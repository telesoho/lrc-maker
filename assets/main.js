!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="./assets/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),o=r(i),a=n(5),s=r(a);n(107);var u=new o.default({el:"#app",render:function(t){return t(s.default,{ref:"app"})}});o.default.prototype.$App=u.$refs.app},function(t,e,n){(function(e,n,r){/*!
	 * Vue.js v2.5.16
	 * (c) 2014-2018 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(t){return void 0===t||null===t}function o(t){return void 0!==t&&null!==t}function a(t){return t===!0}function s(t){return t===!1}function u(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function c(t){return null!==t&&"object"==typeof t}function l(t){return Pr.call(t).slice(8,-1)}function f(t){return"[object Object]"===Pr.call(t)}function d(t){return"[object RegExp]"===Pr.call(t)}function p(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function h(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function v(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function g(t,e){return Ir.call(t,e)}function _(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}function b(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function w(t,e){return t.bind(e)}function x(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function E(t,e){for(var n in e)t[n]=e[n];return t}function A(t){for(var e={},n=0;n<t.length;n++)t[n]&&E(e,t[n]);return e}function k(t,e,n){}function O(t,e){if(t===e)return!0;var n=c(t),r=c(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,n){return O(t,e[n])});if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(n){return O(t[n],e[n])})}catch(t){return!1}}function C(t,e){for(var n=0;n<t.length;n++)if(O(t[n],e))return n;return-1}function $(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function D(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function T(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function N(t){if(!Xr.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}function S(t){return"function"==typeof t&&/native code/.test(t.toString())}function P(t){Ei.target&&Ai.push(Ei.target),Ei.target=t}function F(){Ei.target=Ai.pop()}function j(t){return new ki(void 0,void 0,void 0,String(t))}function I(t){var e=new ki(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}function L(t){Si=t}function R(t,e,n){t.__proto__=e}function M(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];T(t,o,e[o])}}function U(t,e){if(c(t)&&!(t instanceof ki)){var n;return g(t,"__ob__")&&t.__ob__ instanceof Pi?n=t.__ob__:Si&&!fi()&&(Array.isArray(t)||f(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Pi(t)),e&&n&&n.vmCount++,n}}function V(t,n,r,i,o){var a=new Ei,s=Object.getOwnPropertyDescriptor(t,n);if(!s||s.configurable!==!1){var u=s&&s.get;u||2!==arguments.length||(r=t[n]);var c=s&&s.set,l=!o&&U(r);Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var e=u?u.call(t):r;return Ei.target&&(a.depend(),l&&(l.dep.depend(),Array.isArray(e)&&Y(e))),e},set:function(n){var s=u?u.call(t):r;n===s||n!==n&&s!==s||("production"!==e.env.NODE_ENV&&i&&i(),c?c.call(t,n):r=n,l=!o&&U(n),a.notify())}})}}function B(t,n,r){if("production"!==e.env.NODE_ENV&&(i(t)||u(t))&&hi("Cannot set reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&p(n))return t.length=Math.max(t.length,n),t.splice(n,1,r),r;if(n in t&&!(n in Object.prototype))return t[n]=r,r;var o=t.__ob__;return t._isVue||o&&o.vmCount?("production"!==e.env.NODE_ENV&&hi("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),r):o?(V(o.value,n,r),o.dep.notify(),r):(t[n]=r,r)}function z(t,n){if("production"!==e.env.NODE_ENV&&(i(t)||u(t))&&hi("Cannot delete reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&p(n))return void t.splice(n,1);var r=t.__ob__;return t._isVue||r&&r.vmCount?void("production"!==e.env.NODE_ENV&&hi("Avoid deleting properties on a Vue instance or its root $data - just set it to null.")):void(g(t,n)&&(delete t[n],r&&r.dep.notify()))}function Y(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Y(e)}function H(t,e){if(!e)return t;for(var n,r,i,o=Object.keys(e),a=0;a<o.length;a++)n=o[a],r=t[n],i=e[n],g(t,n)?f(r)&&f(i)&&H(r,i):B(t,n,i);return t}function W(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,i="function"==typeof t?t.call(n,n):t;return r?H(r,i):i}:e?t?function(){return H("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Z(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function q(t,n,r,i){var o=Object.create(t||null);return n?("production"!==e.env.NODE_ENV&&tt(i,n,r),E(o,n)):o}function X(t){for(var e in t.components)G(e)}function G(t){/^[a-zA-Z][\w-]*$/.test(t)||hi('Invalid component name: "'+t+'". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.'),(Fr(t)||qr.isReservedTag(t))&&hi("Do not use built-in or reserved HTML elements as component id: "+t)}function K(t,n){var r=t.props;if(r){var i,o,a,s={};if(Array.isArray(r))for(i=r.length;i--;)o=r[i],"string"==typeof o?(a=Rr(o),s[a]={type:null}):"production"!==e.env.NODE_ENV&&hi("props must be strings when using array syntax.");else if(f(r))for(var u in r)o=r[u],a=Rr(u),s[a]=f(o)?o:{type:o};else"production"!==e.env.NODE_ENV&&hi('Invalid value for option "props": expected an Array or an Object, but got '+l(r)+".",n);t.props=s}}function J(t,n){var r=t.inject;if(r){var i=t.inject={};if(Array.isArray(r))for(var o=0;o<r.length;o++)i[r[o]]={from:r[o]};else if(f(r))for(var a in r){var s=r[a];i[a]=f(s)?E({from:a},s):{from:s}}else"production"!==e.env.NODE_ENV&&hi('Invalid value for option "inject": expected an Array or an Object, but got '+l(r)+".",n)}}function Q(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}function tt(t,e,n){f(e)||hi('Invalid value for option "'+t+'": expected an Object, but got '+l(e)+".",n)}function et(t,n,r){function i(e){var i=Fi[e]||Li;c[e]=i(t[e],n[e],r,e)}"production"!==e.env.NODE_ENV&&X(n),"function"==typeof n&&(n=n.options),K(n,r),J(n,r),Q(n);var o=n.extends;if(o&&(t=et(t,o,r)),n.mixins)for(var a=0,s=n.mixins.length;a<s;a++)t=et(t,n.mixins[a],r);var u,c={};for(u in t)i(u);for(u in n)g(t,u)||i(u);return c}function nt(t,n,r,i){if("string"==typeof r){var o=t[n];if(g(o,r))return o[r];var a=Rr(r);if(g(o,a))return o[a];var s=Mr(a);if(g(o,s))return o[s];var u=o[r]||o[a]||o[s];return"production"!==e.env.NODE_ENV&&i&&!u&&hi("Failed to resolve "+n.slice(0,-1)+": "+r,t),u}}function rt(t,n,r,i){var o=n[t],a=!g(r,t),s=r[t],u=ct(Boolean,o.type);if(u>-1)if(a&&!g(o,"default"))s=!1;else if(""===s||s===Vr(t)){var c=ct(String,o.type);(c<0||u<c)&&(s=!0)}if(void 0===s){s=it(i,o,t);var l=Si;L(!0),U(s),L(l)}return"production"!==e.env.NODE_ENV&&ot(o,t,s,i,a),s}function it(t,n,r){if(g(n,"default")){var i=n.default;return"production"!==e.env.NODE_ENV&&c(i)&&hi('Invalid default value for prop "'+r+'": Props with type Object/Array must use a factory function to return the default value.',t),t&&t.$options.propsData&&void 0===t.$options.propsData[r]&&void 0!==t._props[r]?t._props[r]:"function"==typeof i&&"Function"!==st(n.type)?i.call(t):i}}function ot(t,e,n,r,i){if(t.required&&i)return void hi('Missing required prop: "'+e+'"',r);if(null!=n||t.required){var o=t.type,a=!o||o===!0,s=[];if(o){Array.isArray(o)||(o=[o]);for(var u=0;u<o.length&&!a;u++){var c=at(n,o[u]);s.push(c.expectedType||""),a=c.valid}}if(!a)return void hi('Invalid prop: type check failed for prop "'+e+'". Expected '+s.map(Mr).join(", ")+", got "+l(n)+".",r);var f=t.validator;f&&(f(n)||hi('Invalid prop: custom validator check failed for prop "'+e+'".',r))}}function at(t,e){var n,r=st(e);if(Ri.test(r)){var i=typeof t;n=i===r.toLowerCase(),n||"object"!==i||(n=t instanceof e)}else n="Object"===r?f(t):"Array"===r?Array.isArray(t):t instanceof e;return{valid:n,expectedType:r}}function st(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function ut(t,e){return st(t)===st(e)}function ct(t,e){if(!Array.isArray(e))return ut(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(ut(e[n],t))return n;return-1}function lt(t,e,n){if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=i[o].call(r,t,e,n)===!1;if(a)return}catch(t){ft(t,r,"errorCaptured hook")}}ft(t,e,n)}function ft(t,e,n){if(qr.errorHandler)try{return qr.errorHandler.call(null,t,e,n)}catch(t){dt(t,null,"config.errorHandler")}dt(t,e,n)}function dt(t,n,r){if("production"!==e.env.NODE_ENV&&hi("Error in "+r+': "'+t.toString()+'"',n),!Kr&&!Jr||"undefined"==typeof console)throw t;console.error(t)}function pt(){Ui=!1;var t=Mi.slice(0);Mi.length=0;for(var e=0;e<t.length;e++)t[e]()}function ht(t){return t._withTask||(t._withTask=function(){Vi=!0;var e=t.apply(null,arguments);return Vi=!1,e})}function vt(t,e){var n;if(Mi.push(function(){if(t)try{t.call(e)}catch(t){lt(t,e,"nextTick")}else n&&n(e)}),Ui||(Ui=!0,Vi?Ii():ji()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}function mt(t){yt(t,to),to.clear()}function yt(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!c(t)||Object.isFrozen(t)||t instanceof ki)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i)for(n=t.length;n--;)yt(t[n],e);else for(r=Object.keys(t),n=r.length;n--;)yt(t[r[n]],e)}}function gt(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),i=0;i<r.length;i++)r[i].apply(null,t)}return e.fns=t,e}function _t(t,n,r,o,a){var s,u,c,l,f;for(s in t)u=c=t[s],l=n[s],f=ro(s),i(c)?"production"!==e.env.NODE_ENV&&hi('Invalid handler for event "'+f.name+'": got '+String(c),a):i(l)?(i(c.fns)&&(c=t[s]=gt(c)),r(f.name,c,f.once,f.capture,f.passive,f.params)):c!==l&&(l.fns=c,t[s]=l);for(s in n)i(t[s])&&(f=ro(s),o(f.name,n[s],f.capture))}function bt(t,e,n){function r(){n.apply(this,arguments),y(s.fns,r)}t instanceof ki&&(t=t.data.hook||(t.data.hook={}));var s,u=t[e];i(u)?s=gt([r]):o(u.fns)&&a(u.merged)?(s=u,s.fns.push(r)):s=gt([u,r]),s.merged=!0,t[e]=s}function wt(t,n,r){var a=n.options.props;if(!i(a)){var s={},u=t.attrs,c=t.props;if(o(u)||o(c))for(var l in a){var f=Vr(l);if("production"!==e.env.NODE_ENV){var d=l.toLowerCase();l!==d&&u&&g(u,d)&&vi('Prop "'+d+'" is passed to component '+yi(r||n)+', but the declared prop name is "'+l+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+f+'" instead of "'+l+'".')}xt(s,c,l,f,!0)||xt(s,u,l,f,!1)}return s}}function xt(t,e,n,r,i){if(o(e)){if(g(e,n))return t[n]=e[n],i||delete e[n],!0;if(g(e,r))return t[n]=e[r],i||delete e[r],!0}return!1}function Et(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function At(t){return u(t)?[j(t)]:Array.isArray(t)?Ot(t):void 0}function kt(t){return o(t)&&o(t.text)&&s(t.isComment)}function Ot(t,e){var n,r,s,c,l=[];for(n=0;n<t.length;n++)r=t[n],i(r)||"boolean"==typeof r||(s=l.length-1,c=l[s],Array.isArray(r)?r.length>0&&(r=Ot(r,(e||"")+"_"+n),kt(r[0])&&kt(c)&&(l[s]=j(c.text+r[0].text),r.shift()),l.push.apply(l,r)):u(r)?kt(c)?l[s]=j(c.text+r):""!==r&&l.push(j(r)):kt(r)&&kt(c)?l[s]=j(c.text+r.text):(a(t._isVList)&&o(r.tag)&&i(r.key)&&o(e)&&(r.key="__vlist"+e+"_"+n+"__"),l.push(r)));return l}function Ct(t,e){return(t.__esModule||pi&&"Module"===t[Symbol.toStringTag])&&(t=t.default),c(t)?e.extend(t):t}function $t(t,e,n,r,i){var o=Ci();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function Dt(t,n,r){if(a(t.error)&&o(t.errorComp))return t.errorComp;if(o(t.resolved))return t.resolved;if(a(t.loading)&&o(t.loadingComp))return t.loadingComp;if(!o(t.contexts)){var s=t.contexts=[r],u=!0,l=function(){for(var t=0,e=s.length;t<e;t++)s[t].$forceUpdate()},f=$(function(e){t.resolved=Ct(e,n),u||l()}),d=$(function(n){"production"!==e.env.NODE_ENV&&hi("Failed to resolve async component: "+String(t)+(n?"\nReason: "+n:"")),o(t.errorComp)&&(t.error=!0,l())}),p=t(f,d);return c(p)&&("function"==typeof p.then?i(t.resolved)&&p.then(f,d):o(p.component)&&"function"==typeof p.component.then&&(p.component.then(f,d),o(p.error)&&(t.errorComp=Ct(p.error,n)),o(p.loading)&&(t.loadingComp=Ct(p.loading,n),0===p.delay?t.loading=!0:setTimeout(function(){i(t.resolved)&&i(t.error)&&(t.loading=!0,l())},p.delay||200)),o(p.timeout)&&setTimeout(function(){i(t.resolved)&&d("production"!==e.env.NODE_ENV?"timeout ("+p.timeout+"ms)":null)},p.timeout))),u=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(r)}function Tt(t){return t.isComment&&t.asyncFactory}function Nt(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(o(n)&&(o(n.componentOptions)||Tt(n)))return n}}function St(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&jt(t,e)}function Pt(t,e,n){n?no.$once(t,e):no.$on(t,e)}function Ft(t,e){no.$off(t,e)}function jt(t,e,n){no=t,_t(e,n||{},Pt,Ft,t),no=void 0}function It(t){var n=/^hook:/;t.prototype.$on=function(t,e){var r=this,i=this;if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++)r.$on(t[o],e);else(i._events[t]||(i._events[t]=[])).push(e),n.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){function n(){r.$off(t,n),e.apply(r,arguments)}var r=this;return n.fn=e,r.$on(t,n),r},t.prototype.$off=function(t,e){var n=this,r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(t)){for(var i=0,o=t.length;i<o;i++)n.$off(t[i],e);return r}var a=r._events[t];if(!a)return r;if(!e)return r._events[t]=null,r;if(e)for(var s,u=a.length;u--;)if(s=a[u],s===e||s.fn===e){a.splice(u,1);break}return r},t.prototype.$emit=function(t){var n=this;if("production"!==e.env.NODE_ENV){var r=t.toLowerCase();r!==t&&n._events[r]&&vi('Event "'+r+'" is emitted in component '+yi(n)+' but the handler is registered for "'+t+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+Vr(t)+'" instead of "'+t+'".')}var i=n._events[t];if(i){i=i.length>1?x(i):i;for(var o=x(arguments,1),a=0,s=i.length;a<s;a++)try{i[a].apply(n,o)}catch(e){lt(e,n,'event handler for "'+t+'"')}}return n}}function Lt(t,e){var n={};if(!t)return n;for(var r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(Rt)&&delete n[c];return n}function Rt(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Mt(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?Mt(t[n],e):e[t[n].key]=t[n].fn;return e}function Ut(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Vt(t){t.prototype._update=function(t,e){var n=this;n._isMounted&&Zt(n,"beforeUpdate");var r=n.$el,i=n._vnode,o=io;io=n,n._vnode=t,i?n.$el=n.__patch__(i,t):(n.$el=n.__patch__(n.$el,t,e,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),io=o,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Zt(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Zt(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Bt(t,n,r){t.$el=n,t.$options.render||(t.$options.render=Ci,"production"!==e.env.NODE_ENV&&(t.$options.template&&"#"!==t.$options.template.charAt(0)||t.$options.el||n?hi("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",t):hi("Failed to mount component: template or render function not defined.",t))),Zt(t,"beforeMount");var i;return i="production"!==e.env.NODE_ENV&&qr.performance&&Ji?function(){var e=t._name,n=t._uid,i="vue-perf-start:"+n,o="vue-perf-end:"+n;Ji(i);var a=t._render();Ji(o),Qi("vue "+e+" render",i,o),Ji(i),t._update(a,r),Ji(o),Qi("vue "+e+" patch",i,o)}:function(){t._update(t._render(),r)},new mo(t,i,k,null,!0),r=!1,null==t.$vnode&&(t._isMounted=!0,Zt(t,"mounted")),t}function zt(t,n,r,i,o){"production"!==e.env.NODE_ENV&&(oo=!0);var a=!!(o||t.$options._renderChildren||i.data.scopedSlots||t.$scopedSlots!==Sr);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||Sr,t.$listeners=r||Sr,n&&t.$options.props){L(!1);for(var s=t._props,u=t.$options._propKeys||[],c=0;c<u.length;c++){var l=u[c],f=t.$options.props;s[l]=rt(l,f,n,t)}L(!0),t.$options.propsData=n}r=r||Sr;var d=t.$options._parentListeners;t.$options._parentListeners=r,jt(t,r,d),a&&(t.$slots=Lt(o,i.context),t.$forceUpdate()),"production"!==e.env.NODE_ENV&&(oo=!1)}function Yt(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Ht(t,e){if(e){if(t._directInactive=!1,Yt(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Ht(t.$children[n]);Zt(t,"activated")}}function Wt(t,e){if(!(e&&(t._directInactive=!0,Yt(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Wt(t.$children[n]);Zt(t,"deactivated")}}function Zt(t,e){P();var n=t.$options[e];if(n)for(var r=0,i=n.length;r<i;r++)try{n[r].call(t)}catch(n){lt(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),F()}function qt(){ho=so.length=uo.length=0,co={},"production"!==e.env.NODE_ENV&&(lo={}),fo=po=!1}function Xt(){po=!0;var t,n;for(so.sort(function(t,e){return t.id-e.id}),ho=0;ho<so.length;ho++)if(t=so[ho],n=t.id,co[n]=null,t.run(),"production"!==e.env.NODE_ENV&&null!=co[n]&&(lo[n]=(lo[n]||0)+1,lo[n]>ao)){hi("You may have an infinite update loop "+(t.user?'in watcher with expression "'+t.expression+'"':"in a component render function."),t.vm);break}var r=uo.slice(),i=so.slice();qt(),Jt(r),Gt(i),di&&qr.devtools&&di.emit("flush")}function Gt(t){for(var e=t.length;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&Zt(r,"updated")}}function Kt(t){t._inactive=!1,uo.push(t)}function Jt(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ht(t[e],!0)}function Qt(t){var e=t.id;if(null==co[e]){if(co[e]=!0,po){for(var n=so.length-1;n>ho&&so[n].id>t.id;)n--;so.splice(n+1,0,t)}else so.push(t);fo||(fo=!0,vt(Xt))}}function te(t,e,n){yo.get=function(){return this[e][n]},yo.set=function(t){this[e][n]=t},Object.defineProperty(t,n,yo)}function ee(t){t._watchers=[];var e=t.$options;e.props&&ne(t,e.props),e.methods&&ue(t,e.methods),e.data?re(t):U(t._data={},!0),e.computed&&oe(t,e.computed),e.watch&&e.watch!==ai&&ce(t,e.watch)}function ne(t,n){var r=t.$options.propsData||{},i=t._props={},o=t.$options._propKeys=[],a=!t.$parent;a||L(!1);var s=function(a){o.push(a);var s=rt(a,n,r,t);if("production"!==e.env.NODE_ENV){var u=Vr(a);(jr(u)||qr.isReservedAttr(u))&&hi('"'+u+'" is a reserved attribute and cannot be used as component prop.',t),V(i,a,s,function(){t.$parent&&!oo&&hi("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+a+'"',t)})}else V(i,a,s);a in t||te(t,"_props",a)};for(var u in n)s(u);L(!0)}function re(t){var n=t.$options.data;n=t._data="function"==typeof n?ie(n,t):n||{},f(n)||(n={},"production"!==e.env.NODE_ENV&&hi("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",t));for(var r=Object.keys(n),i=t.$options.props,o=t.$options.methods,a=r.length;a--;){var s=r[a];"production"!==e.env.NODE_ENV&&o&&g(o,s)&&hi('Method "'+s+'" has already been defined as a data property.',t),i&&g(i,s)?"production"!==e.env.NODE_ENV&&hi('The data property "'+s+'" is already declared as a prop. Use prop default value instead.',t):D(s)||te(t,"_data",s)}U(n,!0)}function ie(t,e){P();try{return t.call(e,e)}catch(t){return lt(t,e,"data()"),{}}finally{F()}}function oe(t,n){var r=t._computedWatchers=Object.create(null),i=fi();for(var o in n){var a=n[o],s="function"==typeof a?a:a.get;"production"!==e.env.NODE_ENV&&null==s&&hi('Getter is missing for computed property "'+o+'".',t),i||(r[o]=new mo(t,s||k,k,go)),o in t?"production"!==e.env.NODE_ENV&&(o in t.$data?hi('The computed property "'+o+'" is already defined in data.',t):t.$options.props&&o in t.$options.props&&hi('The computed property "'+o+'" is already defined as a prop.',t)):ae(t,o,a)}}function ae(t,n,r){var i=!fi();"function"==typeof r?(yo.get=i?se(n):r,yo.set=k):(yo.get=r.get?i&&r.cache!==!1?se(n):r.get:k,yo.set=r.set?r.set:k),"production"!==e.env.NODE_ENV&&yo.set===k&&(yo.set=function(){hi('Computed property "'+n+'" was assigned to but it has no setter.',this)}),Object.defineProperty(t,n,yo)}function se(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),Ei.target&&e.depend(),e.value}}function ue(t,n){var r=t.$options.props;for(var i in n)"production"!==e.env.NODE_ENV&&(null==n[i]&&hi('Method "'+i+'" has an undefined value in the component definition. Did you reference the function correctly?',t),r&&g(r,i)&&hi('Method "'+i+'" has already been defined as a prop.',t),i in t&&D(i)&&hi('Method "'+i+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.')),t[i]=null==n[i]?k:Br(n[i],t)}function ce(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)le(t,n,r[i]);else le(t,n,r)}}function le(t,e,n,r){return f(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function fe(t){var n={};n.get=function(){return this._data};var r={};r.get=function(){return this._props},"production"!==e.env.NODE_ENV&&(n.set=function(t){hi("Avoid replacing instance root $data. Use nested data properties instead.",this)},r.set=function(){hi("$props is readonly.",this)}),Object.defineProperty(t.prototype,"$data",n),Object.defineProperty(t.prototype,"$props",r),t.prototype.$set=B,t.prototype.$delete=z,t.prototype.$watch=function(t,e,n){var r=this;if(f(e))return le(r,t,e,n);n=n||{},n.user=!0;var i=new mo(r,t,e,n);return n.immediate&&e.call(r,i.value),function(){i.teardown()}}}function de(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}function pe(t){var n=he(t.$options.inject,t);n&&(L(!1),Object.keys(n).forEach(function(r){"production"!==e.env.NODE_ENV?V(t,r,n[r],function(){hi('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+r+'"',t)}):V(t,r,n[r])}),L(!0))}function he(t,n){if(t){for(var r=Object.create(null),i=pi?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),o=0;o<i.length;o++){for(var a=i[o],s=t[a].from,u=n;u;){if(u._provided&&g(u._provided,s)){r[a]=u._provided[s];break}u=u.$parent}if(!u)if("default"in t[a]){var c=t[a].default;r[a]="function"==typeof c?c.call(n):c}else"production"!==e.env.NODE_ENV&&hi('Injection "'+a+'" not found',n)}return r}}function ve(t,e){var n,r,i,a,s;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=e(t[r],r);else if("number"==typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(c(t))for(a=Object.keys(t),n=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],n[r]=e(t[s],s,r);return o(n)&&(n._isVList=!0),n}function me(t,n,r,i){var o,a=this.$scopedSlots[t];if(a)r=r||{},i&&("production"===e.env.NODE_ENV||c(i)||hi("slot v-bind without argument expects an Object",this),r=E(E({},i),r)),o=a(r)||n;else{var s=this.$slots[t];s&&("production"!==e.env.NODE_ENV&&s._rendered&&hi('Duplicate presence of slot "'+t+'" found in the same render tree - this will likely cause render errors.',this),s._rendered=!0),o=s||n}var u=r&&r.slot;return u?this.$createElement("template",{slot:u},o):o}function ye(t){return nt(this.$options,"filters",t,!0)||Yr}function ge(t,e){return Array.isArray(t)?t.indexOf(e)===-1:t!==e}function _e(t,e,n,r,i){var o=qr.keyCodes[e]||n;return i&&r&&!qr.keyCodes[e]?ge(i,r):o?ge(o,t):r?Vr(r)!==e:void 0}function be(t,n,r,i,o){if(r)if(c(r)){Array.isArray(r)&&(r=A(r));var a,s=function(e){if("class"===e||"style"===e||jr(e))a=t;else{var s=t.attrs&&t.attrs.type;a=i||qr.mustUseProp(n,s,e)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}if(!(e in a)&&(a[e]=r[e],o)){var u=t.on||(t.on={});u["update:"+e]=function(t){r[e]=t}}};for(var u in r)s(u)}else"production"!==e.env.NODE_ENV&&hi("v-bind without argument expects an Object or Array value",this);return t}function we(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Ee(r,"__static__"+t,!1),r)}function xe(t,e,n){return Ee(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ee(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&Ae(t[r],e+"_"+r,n);else Ae(t,e,n)}function Ae(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function ke(t,n){if(n)if(f(n)){var r=t.on=t.on?E({},t.on):{};for(var i in n){var o=r[i],a=n[i];r[i]=o?[].concat(o,a):a}}else"production"!==e.env.NODE_ENV&&hi("v-on without argument expects an Object value",this);return t}function Oe(t){t._o=xe,t._n=v,t._s=h,t._l=ve,t._t=me,t._q=O,t._i=C,t._m=we,t._f=ye,t._k=_e,t._b=be,t._v=j,t._e=Ci,t._u=Mt,t._g=ke}function Ce(t,e,n,r,i){var o,s=i.options;g(r,"_uid")?(o=Object.create(r),o._original=r):(o=r,r=r._original);var u=a(s._compiled),c=!u;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||Sr,this.injections=he(s.inject,r),this.slots=function(){return Lt(n,r)},u&&(this.$options=s,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||Sr),s._scopeId?this._c=function(t,e,n,i){var a=je(o,t,e,n,i,c);return a&&!Array.isArray(a)&&(a.fnScopeId=s._scopeId,a.fnContext=r),a}:this._c=function(t,e,n,r){return je(o,t,e,n,r,c)}}function $e(t,e,n,r,i){var a=t.options,s={},u=a.props;if(o(u))for(var c in u)s[c]=rt(c,u,e||Sr);else o(n.attrs)&&Te(s,n.attrs),o(n.props)&&Te(s,n.props);var l=new Ce(n,s,i,r,t),f=a.render.call(null,l._c,l);if(f instanceof ki)return De(f,n,l.parent,a);if(Array.isArray(f)){for(var d=At(f)||[],p=new Array(d.length),h=0;h<d.length;h++)p[h]=De(d[h],n,l.parent,a);return p}}function De(t,e,n,r){var i=I(t);return i.fnContext=n,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function Te(t,e){for(var n in e)t[Rr(n)]=e[n]}function Ne(t,n,r,s,u){if(!i(t)){var l=r.$options._base;if(c(t)&&(t=l.extend(t)),"function"!=typeof t)return void("production"!==e.env.NODE_ENV&&hi("Invalid Component definition: "+String(t),r));var f;if(i(t.cid)&&(f=t,t=Dt(f,l,r),void 0===t))return $t(f,n,r,s,u);n=n||{},ze(t),o(n.model)&&Fe(t.options,n);var d=wt(n,t,u);if(a(t.options.functional))return $e(t,d,n,r,s);var p=n.on;if(n.on=n.nativeOn,a(t.options.abstract)){var h=n.slot;n={},h&&(n.slot=h)}Pe(n);var v=t.options.name||u,m=new ki("vue-component-"+t.cid+(v?"-"+v:""),n,void 0,void 0,void 0,r,{Ctor:t,propsData:d,listeners:p,tag:u,children:s},f);return m}}function Se(t,e,n,r){var i={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:n||null,_refElm:r||null},a=t.data.inlineTemplate;return o(a)&&(i.render=a.render,i.staticRenderFns=a.staticRenderFns),new t.componentOptions.Ctor(i)}function Pe(t){for(var e=t.hook||(t.hook={}),n=0;n<bo.length;n++){var r=bo[n];e[r]=_o[r]}}function Fe(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var i=e.on||(e.on={});o(i[r])?i[r]=[e.model.callback].concat(i[r]):i[r]=e.model.callback}function je(t,e,n,r,i,o){return(Array.isArray(n)||u(n))&&(i=r,r=n,n=void 0),a(o)&&(i=xo),Ie(t,e,n,r,i)}function Ie(t,n,r,i,a){if(o(r)&&o(r.__ob__))return"production"!==e.env.NODE_ENV&&hi("Avoid using observed data object as vnode data: "+JSON.stringify(r)+"\nAlways create fresh vnode data objects in each render!",t),Ci();if(o(r)&&o(r.is)&&(n=r.is),!n)return Ci();"production"!==e.env.NODE_ENV&&o(r)&&o(r.key)&&!u(r.key)&&hi("Avoid using non-primitive value as key, use string/number value instead.",t),Array.isArray(i)&&"function"==typeof i[0]&&(r=r||{},r.scopedSlots={default:i[0]},i.length=0),a===xo?i=At(i):a===wo&&(i=Et(i));var s,c;if("string"==typeof n){var l;c=t.$vnode&&t.$vnode.ns||qr.getTagNamespace(n),s=qr.isReservedTag(n)?new ki(qr.parsePlatformTagName(n),r,i,void 0,void 0,t):o(l=nt(t.$options,"components",n))?Ne(l,r,t,i,n):new ki(n,r,i,void 0,void 0,t)}else s=Ne(n,r,t,i);return Array.isArray(s)?s:o(s)?(o(c)&&Le(s,c),o(r)&&Re(r),s):Ci()}function Le(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),o(t.children))for(var r=0,s=t.children.length;r<s;r++){var u=t.children[r];o(u.tag)&&(i(u.ns)||a(n)&&"svg"!==u.tag)&&Le(u,e,n)}}function Re(t){c(t.style)&&mt(t.style),c(t.class)&&mt(t.class)}function Me(t){t._vnode=null,t._staticTrees=null;var n=t.$options,r=t.$vnode=n._parentVnode,i=r&&r.context;t.$slots=Lt(n._renderChildren,i),t.$scopedSlots=Sr,t._c=function(e,n,r,i){return je(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return je(t,e,n,r,i,!0)};var o=r&&r.data;"production"!==e.env.NODE_ENV?(V(t,"$attrs",o&&o.attrs||Sr,function(){!oo&&hi("$attrs is readonly.",t)},!0),V(t,"$listeners",n._parentListeners||Sr,function(){!oo&&hi("$listeners is readonly.",t)},!0)):(V(t,"$attrs",o&&o.attrs||Sr,null,!0),V(t,"$listeners",n._parentListeners||Sr,null,!0))}function Ue(t){Oe(t.prototype),t.prototype.$nextTick=function(t){return vt(t,this)},t.prototype._render=function(){var t=this,n=t.$options,r=n.render,i=n._parentVnode;if("production"!==e.env.NODE_ENV)for(var o in t.$slots)t.$slots[o]._rendered=!1;i&&(t.$scopedSlots=i.data.scopedSlots||Sr),t.$vnode=i;var a;try{a=r.call(t._renderProxy,t.$createElement)}catch(n){if(lt(n,t,"render"),"production"!==e.env.NODE_ENV)if(t.$options.renderError)try{a=t.$options.renderError.call(t._renderProxy,t.$createElement,n)}catch(e){lt(e,t,"renderError"),a=t._vnode}else a=t._vnode;else a=t._vnode}return a instanceof ki||("production"!==e.env.NODE_ENV&&Array.isArray(a)&&hi("Multiple root nodes returned from render function. Render function should return a single root node.",t),a=Ci()),a.parent=i,a}}function Ve(t){t.prototype._init=function(t){var n=this;n._uid=Eo++;var r,i;"production"!==e.env.NODE_ENV&&qr.performance&&Ji&&(r="vue-perf-start:"+n._uid,i="vue-perf-end:"+n._uid,Ji(r)),n._isVue=!0,t&&t._isComponent?Be(n,t):n.$options=et(ze(n.constructor),t||{},n),"production"!==e.env.NODE_ENV?Hi(n):n._renderProxy=n,n._self=n,Ut(n),St(n),Me(n),Zt(n,"beforeCreate"),pe(n),ee(n),de(n),Zt(n,"created"),"production"!==e.env.NODE_ENV&&qr.performance&&Ji&&(n._name=yi(n,!1),Ji(i),Qi("vue "+n._name+" init",r,i)),n.$options.el&&n.$mount(n.$options.el)}}function Be(t,e){
var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r,n._parentElm=e._parentElm,n._refElm=e._refElm;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function ze(t){var e=t.options;if(t.super){var n=ze(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=Ye(t);i&&E(t.extendOptions,i),e=t.options=et(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Ye(t){var e,n=t.options,r=t.extendOptions,i=t.sealedOptions;for(var o in n)n[o]!==i[o]&&(e||(e={}),e[o]=He(n[o],r[o],i[o]));return e}function He(t,e,n){if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var i=0;i<t.length;i++)(e.indexOf(t[i])>=0||n.indexOf(t[i])<0)&&r.push(t[i]);return r}return t}function We(t){"production"===e.env.NODE_ENV||this instanceof We||hi("Vue is a constructor and should be called with the `new` keyword"),this._init(t)}function Ze(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=x(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}function qe(t){t.mixin=function(t){return this.options=et(this.options,t),this}}function Xe(t){t.cid=0;var n=1;t.extend=function(t){t=t||{};var r=this,i=r.cid,o=t._Ctor||(t._Ctor={});if(o[i])return o[i];var a=t.name||r.options.name;"production"!==e.env.NODE_ENV&&a&&G(a);var s=function(t){this._init(t)};return s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.cid=n++,s.options=et(r.options,t),s.super=r,s.options.props&&Ge(s),s.options.computed&&Ke(s),s.extend=r.extend,s.mixin=r.mixin,s.use=r.use,Wr.forEach(function(t){s[t]=r[t]}),a&&(s.options.components[a]=s),s.superOptions=r.options,s.extendOptions=t,s.sealedOptions=E({},s.options),o[i]=s,s}}function Ge(t){var e=t.options.props;for(var n in e)te(t.prototype,"_props",n)}function Ke(t){var e=t.options.computed;for(var n in e)ae(t.prototype,n,e[n])}function Je(t){Wr.forEach(function(n){t[n]=function(t,r){return r?("production"!==e.env.NODE_ENV&&"component"===n&&G(t),"component"===n&&f(r)&&(r.name=r.name||t,r=this.options._base.extend(r)),"directive"===n&&"function"==typeof r&&(r={bind:r,update:r}),this.options[n+"s"][t]=r,r):this.options[n+"s"][t]}})}function Qe(t){return t&&(t.Ctor.options.name||t.tag)}function tn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!d(t)&&t.test(e)}function en(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=Qe(a.componentOptions);s&&!e(s)&&nn(n,o,r,i)}}}function nn(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,y(n,e)}function rn(t){var n={};n.get=function(){return qr},"production"!==e.env.NODE_ENV&&(n.set=function(){hi("Do not replace the Vue.config object, set individual fields instead.")}),Object.defineProperty(t,"config",n),t.util={warn:hi,extend:E,mergeOptions:et,defineReactive:V},t.set=B,t.delete=z,t.nextTick=vt,t.options=Object.create(null),Wr.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,E(t.options.components,Oo),Ze(t),qe(t),Xe(t),Je(t)}function on(t){for(var e=t.data,n=t,r=t;o(r.componentInstance);)r=r.componentInstance._vnode,r&&r.data&&(e=an(r.data,e));for(;o(n=n.parent);)n&&n.data&&(e=an(e,n.data));return sn(e.staticClass,e.class)}function an(t,e){return{staticClass:un(t.staticClass,e.staticClass),class:o(t.class)?[t.class,e.class]:e.class}}function sn(t,e){return o(t)||o(e)?un(t,cn(e)):""}function un(t,e){return t?e?t+" "+e:t:e||""}function cn(t){return Array.isArray(t)?ln(t):c(t)?fn(t):"string"==typeof t?t:""}function ln(t){for(var e,n="",r=0,i=t.length;r<i;r++)o(e=cn(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function fn(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function dn(t){return Uo(t)?"svg":"math"===t?"math":void 0}function pn(t){if(!Kr)return!0;if(Vo(t))return!1;if(t=t.toLowerCase(),null!=Bo[t])return Bo[t];var e=document.createElement(t);return t.indexOf("-")>-1?Bo[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Bo[t]=/HTMLUnknownElement/.test(e.toString())}function hn(t){if("string"==typeof t){var n=document.querySelector(t);return n?n:("production"!==e.env.NODE_ENV&&hi("Cannot find element: "+t),document.createElement("div"))}return t}function vn(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function mn(t,e){return document.createElementNS(Ro[t],e)}function yn(t){return document.createTextNode(t)}function gn(t){return document.createComment(t)}function _n(t,e,n){t.insertBefore(e,n)}function bn(t,e){t.removeChild(e)}function wn(t,e){t.appendChild(e)}function xn(t){return t.parentNode}function En(t){return t.nextSibling}function An(t){return t.tagName}function kn(t,e){t.textContent=e}function On(t,e){t.setAttribute(e,"")}function Cn(t,e){var n=t.data.ref;if(o(n)){var r=t.context,i=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?y(a[n],i):a[n]===i&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}function $n(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&o(t.data)===o(e.data)&&Dn(t,e)||a(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function Dn(t,e){if("input"!==t.tag)return!0;var n,r=o(n=t.data)&&o(n=n.attrs)&&n.type,i=o(n=e.data)&&o(n=n.attrs)&&n.type;return r===i||zo(r)&&zo(i)}function Tn(t,e,n){var r,i,a={};for(r=e;r<=n;++r)i=t[r].key,o(i)&&(a[i]=r);return a}function Nn(t){function n(t){return new ki(L.tagName(t).toLowerCase(),{},[],void 0,t)}function r(t,e){function n(){0===--n.listeners&&s(t)}return n.listeners=e,n}function s(t){var e=L.parentNode(t);o(e)&&L.removeChild(e,t)}function c(t,e){return!e&&!t.ns&&!(qr.ignoredElements.length&&qr.ignoredElements.some(function(e){return d(e)?e.test(t.tag):e===t.tag}))&&qr.isUnknownElement(t.tag)}function l(t,n,r,i,s,u,l){if(o(t.elm)&&o(u)&&(t=u[l]=I(t)),t.isRootInsert=!s,!f(t,n,r,i)){var d=t.data,p=t.children,h=t.tag;o(h)?("production"!==e.env.NODE_ENV&&(d&&d.pre&&R++,c(t,R)&&hi("Unknown custom element: <"+h+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',t.context)),t.elm=t.ns?L.createElementNS(t.ns,h):L.createElement(h,t),b(t),y(t,p,n),o(d)&&_(t,n),v(r,t.elm,i),"production"!==e.env.NODE_ENV&&d&&d.pre&&R--):a(t.isComment)?(t.elm=L.createComment(t.text),v(r,t.elm,i)):(t.elm=L.createTextNode(t.text),v(r,t.elm,i))}}function f(t,e,n,r){var i=t.data;if(o(i)){var s=o(t.componentInstance)&&i.keepAlive;if(o(i=i.hook)&&o(i=i.init)&&i(t,!1,n,r),o(t.componentInstance))return p(t,e),a(s)&&h(t,e,n,r),!0}}function p(t,e){o(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,g(t)?(_(t,e),b(t)):(Cn(t),e.push(t))}function h(t,e,n,r){for(var i,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,o(i=a.data)&&o(i=i.transition)){for(i=0;i<F.activate.length;++i)F.activate[i](Wo,a);e.push(a);break}v(n,t.elm,r)}function v(t,e,n){o(t)&&(o(n)?n.parentNode===t&&L.insertBefore(t,e,n):L.appendChild(t,e))}function y(t,n,r){if(Array.isArray(n)){"production"!==e.env.NODE_ENV&&O(n);for(var i=0;i<n.length;++i)l(n[i],r,t.elm,null,!0,n,i)}else u(t.text)&&L.appendChild(t.elm,L.createTextNode(String(t.text)))}function g(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return o(t.tag)}function _(t,e){for(var n=0;n<F.create.length;++n)F.create[n](Wo,t);S=t.data.hook,o(S)&&(o(S.create)&&S.create(Wo,t),o(S.insert)&&e.push(t))}function b(t){var e;if(o(e=t.fnScopeId))L.setStyleScope(t.elm,e);else for(var n=t;n;)o(e=n.context)&&o(e=e.$options._scopeId)&&L.setStyleScope(t.elm,e),n=n.parent;o(e=io)&&e!==t.context&&e!==t.fnContext&&o(e=e.$options._scopeId)&&L.setStyleScope(t.elm,e)}function w(t,e,n,r,i,o){for(;r<=i;++r)l(n[r],o,t,e,!1,n,r)}function x(t){var e,n,r=t.data;if(o(r))for(o(e=r.hook)&&o(e=e.destroy)&&e(t),e=0;e<F.destroy.length;++e)F.destroy[e](t);if(o(e=t.children))for(n=0;n<t.children.length;++n)x(t.children[n])}function E(t,e,n,r){for(;n<=r;++n){var i=e[n];o(i)&&(o(i.tag)?(A(i),x(i)):s(i.elm))}}function A(t,e){if(o(e)||o(t.data)){var n,i=F.remove.length+1;for(o(e)?e.listeners+=i:e=r(t.elm,i),o(n=t.componentInstance)&&o(n=n._vnode)&&o(n.data)&&A(n,e),n=0;n<F.remove.length;++n)F.remove[n](t,e);o(n=t.data.hook)&&o(n=n.remove)?n(t,e):e()}else s(t.elm)}function k(t,n,r,a,s){var u,c,f,d,p=0,h=0,v=n.length-1,m=n[0],y=n[v],g=r.length-1,_=r[0],b=r[g],x=!s;for("production"!==e.env.NODE_ENV&&O(r);p<=v&&h<=g;)i(m)?m=n[++p]:i(y)?y=n[--v]:$n(m,_)?($(m,_,a),m=n[++p],_=r[++h]):$n(y,b)?($(y,b,a),y=n[--v],b=r[--g]):$n(m,b)?($(m,b,a),x&&L.insertBefore(t,m.elm,L.nextSibling(y.elm)),m=n[++p],b=r[--g]):$n(y,_)?($(y,_,a),x&&L.insertBefore(t,y.elm,m.elm),y=n[--v],_=r[++h]):(i(u)&&(u=Tn(n,p,v)),c=o(_.key)?u[_.key]:C(_,n,p,v),i(c)?l(_,a,t,m.elm,!1,r,h):(f=n[c],$n(f,_)?($(f,_,a),n[c]=void 0,x&&L.insertBefore(t,f.elm,m.elm)):l(_,a,t,m.elm,!1,r,h)),_=r[++h]);p>v?(d=i(r[g+1])?null:r[g+1].elm,w(t,d,r,h,g,a)):h>g&&E(t,n,p,v)}function O(t){for(var e={},n=0;n<t.length;n++){var r=t[n],i=r.key;o(i)&&(e[i]?hi("Duplicate keys detected: '"+i+"'. This may cause an update error.",r.context):e[i]=!0)}}function C(t,e,n,r){for(var i=n;i<r;i++){var a=e[i];if(o(a)&&$n(t,a))return i}}function $(t,e,n,r){if(t!==e){var s=e.elm=t.elm;if(a(t.isAsyncPlaceholder))return void(o(e.asyncFactory.resolved)?T(t.elm,e,n):e.isAsyncPlaceholder=!0);if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))return void(e.componentInstance=t.componentInstance);var u,c=e.data;o(c)&&o(u=c.hook)&&o(u=u.prepatch)&&u(t,e);var l=t.children,f=e.children;if(o(c)&&g(e)){for(u=0;u<F.update.length;++u)F.update[u](t,e);o(u=c.hook)&&o(u=u.update)&&u(t,e)}i(e.text)?o(l)&&o(f)?l!==f&&k(s,l,f,n,r):o(f)?(o(t.text)&&L.setTextContent(s,""),w(s,null,f,0,f.length-1,n)):o(l)?E(s,l,0,l.length-1):o(t.text)&&L.setTextContent(s,""):t.text!==e.text&&L.setTextContent(s,e.text),o(c)&&o(u=c.hook)&&o(u=u.postpatch)&&u(t,e)}}function D(t,e,n){if(a(n)&&o(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}function T(t,n,r,i){var s,u=n.tag,c=n.data,l=n.children;if(i=i||c&&c.pre,n.elm=t,a(n.isComment)&&o(n.asyncFactory))return n.isAsyncPlaceholder=!0,!0;if("production"!==e.env.NODE_ENV&&!N(t,n,i))return!1;if(o(c)&&(o(s=c.hook)&&o(s=s.init)&&s(n,!0),o(s=n.componentInstance)))return p(n,r),!0;if(o(u)){if(o(l))if(t.hasChildNodes())if(o(s=c)&&o(s=s.domProps)&&o(s=s.innerHTML)){if(s!==t.innerHTML)return"production"===e.env.NODE_ENV||"undefined"==typeof console||M||(M=!0,console.warn("Parent: ",t),console.warn("server innerHTML: ",s),console.warn("client innerHTML: ",t.innerHTML)),!1}else{for(var f=!0,d=t.firstChild,h=0;h<l.length;h++){if(!d||!T(d,l[h],r,i)){f=!1;break}d=d.nextSibling}if(!f||d)return"production"===e.env.NODE_ENV||"undefined"==typeof console||M||(M=!0,console.warn("Parent: ",t),console.warn("Mismatching childNodes vs. VNodes: ",t.childNodes,l)),!1}else y(n,l,r);if(o(c)){var v=!1;for(var m in c)if(!U(m)){v=!0,_(n,r);break}!v&&c.class&&mt(c.class)}}else t.data!==n.text&&(t.data=n.text);return!0}function N(t,e,n){return o(e.tag)?0===e.tag.indexOf("vue-component")||!c(e,n)&&e.tag.toLowerCase()===(t.tagName&&t.tagName.toLowerCase()):t.nodeType===(e.isComment?8:3)}var S,P,F={},j=t.modules,L=t.nodeOps;for(S=0;S<Zo.length;++S)for(F[Zo[S]]=[],P=0;P<j.length;++P)o(j[P][Zo[S]])&&F[Zo[S]].push(j[P][Zo[S]]);var R=0,M=!1,U=m("attrs,class,staticClass,staticStyle,key");return function(t,r,s,u,c,f){if(i(r))return void(o(t)&&x(t));var d=!1,p=[];if(i(t))d=!0,l(r,p,c,f);else{var h=o(t.nodeType);if(!h&&$n(t,r))$(t,r,p,u);else{if(h){if(1===t.nodeType&&t.hasAttribute(Hr)&&(t.removeAttribute(Hr),s=!0),a(s)){if(T(t,r,p))return D(r,p,!0),t;"production"!==e.env.NODE_ENV&&hi("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}t=n(t)}var v=t.elm,m=L.parentNode(v);if(l(r,p,v._leaveCb?null:m,L.nextSibling(v)),o(r.parent))for(var y=r.parent,_=g(r);y;){for(var b=0;b<F.destroy.length;++b)F.destroy[b](y);if(y.elm=r.elm,_){for(var w=0;w<F.create.length;++w)F.create[w](Wo,y);var A=y.data.hook.insert;if(A.merged)for(var k=1;k<A.fns.length;k++)A.fns[k]()}else Cn(y);y=y.parent}o(m)?E(m,[t],0,0):o(t.tag)&&x(t)}}return D(r,p,d),r.elm}}function Sn(t,e){(t.data.directives||e.data.directives)&&Pn(t,e)}function Pn(t,e){var n,r,i,o=t===Wo,a=e===Wo,s=Fn(t.data.directives,t.context),u=Fn(e.data.directives,e.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,In(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(In(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var f=function(){for(var n=0;n<c.length;n++)In(c[n],"inserted",e,t)};o?bt(e,"insert",f):f()}if(l.length&&bt(e,"postpatch",function(){for(var n=0;n<l.length;n++)In(l[n],"componentUpdated",e,t)}),!o)for(n in s)u[n]||In(s[n],"unbind",t,t,a)}function Fn(t,e){var n=Object.create(null);if(!t)return n;var r,i;for(r=0;r<t.length;r++)i=t[r],i.modifiers||(i.modifiers=Xo),n[jn(i)]=i,i.def=nt(e.$options,"directives",i.name,!0);return n}function jn(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function In(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){lt(r,n.context,"directive "+t.name+" "+e+" hook")}}function Ln(t,e){var n=e.componentOptions;if(!(o(n)&&n.Ctor.options.inheritAttrs===!1||i(t.data.attrs)&&i(e.data.attrs))){var r,a,s,u=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};o(l.__ob__)&&(l=e.data.attrs=E({},l));for(r in l)a=l[r],s=c[r],s!==a&&Rn(u,r,a);(ei||ri)&&l.value!==c.value&&Rn(u,"value",l.value);for(r in c)i(l[r])&&(jo(r)?u.removeAttributeNS(Fo,Io(r)):So(r)||u.removeAttribute(r))}}function Rn(t,e,n){t.tagName.indexOf("-")>-1?Mn(t,e,n):Po(e)?Lo(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):So(e)?t.setAttribute(e,Lo(n)||"false"===n?"false":"true"):jo(e)?Lo(n)?t.removeAttributeNS(Fo,Io(e)):t.setAttributeNS(Fo,e,n):Mn(t,e,n)}function Mn(t,e,n){if(Lo(n))t.removeAttribute(e);else{if(ei&&!ni&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}function Un(t,e){var n=e.elm,r=e.data,a=t.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=on(e),u=n._transitionClasses;o(u)&&(s=un(s,cn(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}function Vn(t){if(o(t[Qo])){var e=ei?"change":"input";t[e]=[].concat(t[Qo],t[e]||[]),delete t[Qo]}o(t[ta])&&(t.change=[].concat(t[ta],t.change||[]),delete t[ta])}function Bn(t,e,n){var r=Co;return function i(){var o=t.apply(null,arguments);null!==o&&Yn(e,i,n,r)}}function zn(t,e,n,r,i){e=ht(e),n&&(e=Bn(e,t,r)),Co.addEventListener(t,e,si?{capture:r,passive:i}:r)}function Yn(t,e,n,r){(r||Co).removeEventListener(t,e._withTask||e,n)}function Hn(t,e){if(!i(t.data.on)||!i(e.data.on)){var n=e.data.on||{},r=t.data.on||{};Co=e.elm,Vn(n),_t(n,r,zn,Yn,e.context),Co=void 0}}function Wn(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var n,r,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};o(u.__ob__)&&(u=e.data.domProps=E({},u));for(n in s)i(u[n])&&(a[n]="");for(n in u){if(r=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),r===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n){a._value=r;var c=i(r)?"":String(r);Zn(a,c)&&(a.value=c)}else a[n]=r}}}function Zn(t,e){return!t.composing&&("OPTION"===t.tagName||qn(t,e)||Xn(t,e))}function qn(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}function Xn(t,e){var n=t.value,r=t._vModifiers;if(o(r)){if(r.lazy)return!1;if(r.number)return v(n)!==v(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}function Gn(t){var e=Kn(t.style);return t.staticStyle?E(t.staticStyle,e):e}function Kn(t){return Array.isArray(t)?A(t):"string"==typeof t?ra(t):t}function Jn(t,e){var n,r={};if(e)for(var i=t;i.componentInstance;)i=i.componentInstance._vnode,i&&i.data&&(n=Gn(i.data))&&E(r,n);(n=Gn(t.data))&&E(r,n);for(var o=t;o=o.parent;)o.data&&(n=Gn(o.data))&&E(r,n);return r}function Qn(t,e){var n=e.data,r=t.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var a,s,u=e.elm,c=r.staticStyle,l=r.normalizedStyle||r.style||{},f=c||l,d=Kn(e.data.style)||{};e.data.normalizedStyle=o(d.__ob__)?E({},d):d;var p=Jn(e,!0);for(s in f)i(p[s])&&aa(u,s,"");for(s in p)a=p[s],a!==f[s]&&aa(u,s,null==a?"":a)}}function tr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function er(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function nr(t){if(t){if("object"==typeof t){var e={};return t.css!==!1&&E(e,la(t.name||"v")),E(e,t),e}return"string"==typeof t?la(t):void 0}}function rr(t){ga(function(){ga(t)})}function ir(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),tr(t,e))}function or(t,e){t._transitionClasses&&y(t._transitionClasses,e),er(t,e)}function ar(t,e,n){var r=sr(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===da?va:ya,u=0,c=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++u>=a&&c()};setTimeout(function(){u<a&&c()},o+1),t.addEventListener(s,l)}function sr(t,e){var n,r=window.getComputedStyle(t),i=r[ha+"Delay"].split(", "),o=r[ha+"Duration"].split(", "),a=ur(i,o),s=r[ma+"Delay"].split(", "),u=r[ma+"Duration"].split(", "),c=ur(s,u),l=0,f=0;e===da?a>0&&(n=da,l=a,f=o.length):e===pa?c>0&&(n=pa,l=c,f=u.length):(l=Math.max(a,c),n=l>0?a>c?da:pa:null,f=n?n===da?o.length:u.length:0);var d=n===da&&_a.test(r[ha+"Property"]);return{type:n,timeout:l,propCount:f,hasTransform:d}}function ur(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return cr(e)+cr(t[n])}))}function cr(t){return 1e3*Number(t.slice(0,-1))}function lr(t,n){var r=t.elm;o(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var a=nr(t.data.transition);if(!i(a)&&!o(r._enterCb)&&1===r.nodeType){for(var s=a.css,u=a.type,l=a.enterClass,f=a.enterToClass,d=a.enterActiveClass,p=a.appearClass,h=a.appearToClass,m=a.appearActiveClass,y=a.beforeEnter,g=a.enter,_=a.afterEnter,b=a.enterCancelled,w=a.beforeAppear,x=a.appear,E=a.afterAppear,A=a.appearCancelled,k=a.duration,O=io,C=io.$vnode;C&&C.parent;)C=C.parent,O=C.context;var D=!O._isMounted||!t.isRootInsert;if(!D||x||""===x){var T=D&&p?p:l,N=D&&m?m:d,S=D&&h?h:f,P=D?w||y:y,F=D&&"function"==typeof x?x:g,j=D?E||_:_,I=D?A||b:b,L=v(c(k)?k.enter:k);"production"!==e.env.NODE_ENV&&null!=L&&dr(L,"enter",t);var R=s!==!1&&!ni,M=hr(F),U=r._enterCb=$(function(){R&&(or(r,S),or(r,N)),U.cancelled?(R&&or(r,T),I&&I(r)):j&&j(r),r._enterCb=null});t.data.show||bt(t,"insert",function(){var e=r.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),F&&F(r,U)}),P&&P(r),R&&(ir(r,T),ir(r,N),rr(function(){or(r,T),U.cancelled||(ir(r,S),M||(pr(L)?setTimeout(U,L):ar(r,u,U)))})),t.data.show&&(n&&n(),F&&F(r,U)),R||M||U()}}}function fr(t,n){function r(){A.cancelled||(t.data.show||((a.parentNode._pending||(a.parentNode._pending={}))[t.key]=t),h&&h(a),w&&(ir(a,f),ir(a,p),rr(function(){or(a,f),A.cancelled||(ir(a,d),x||(pr(E)?setTimeout(A,E):ar(a,l,A)))})),m&&m(a,A),w||x||A())}var a=t.elm;o(a._enterCb)&&(a._enterCb.cancelled=!0,a._enterCb());var s=nr(t.data.transition);if(i(s)||1!==a.nodeType)return n();if(!o(a._leaveCb)){var u=s.css,l=s.type,f=s.leaveClass,d=s.leaveToClass,p=s.leaveActiveClass,h=s.beforeLeave,m=s.leave,y=s.afterLeave,g=s.leaveCancelled,_=s.delayLeave,b=s.duration,w=u!==!1&&!ni,x=hr(m),E=v(c(b)?b.leave:b);"production"!==e.env.NODE_ENV&&o(E)&&dr(E,"leave",t);var A=a._leaveCb=$(function(){a.parentNode&&a.parentNode._pending&&(a.parentNode._pending[t.key]=null),w&&(or(a,d),or(a,p)),A.cancelled?(w&&or(a,f),g&&g(a)):(n(),y&&y(a)),a._leaveCb=null});_?_(r):r()}}function dr(t,e,n){"number"!=typeof t?hi("<transition> explicit "+e+" duration is not a valid number - got "+JSON.stringify(t)+".",n.context):isNaN(t)&&hi("<transition> explicit "+e+" duration is NaN - the duration expression might be incorrect.",n.context)}function pr(t){return"number"==typeof t&&!isNaN(t)}function hr(t){if(i(t))return!1;var e=t.fns;return o(e)?hr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function vr(t,e){e.data.show!==!0&&lr(e)}function mr(t,e,n){yr(t,e,n),(ei||ri)&&setTimeout(function(){yr(t,e,n)},0)}function yr(t,n,r){var i=n.value,o=t.multiple;if(o&&!Array.isArray(i))return void("production"!==e.env.NODE_ENV&&hi('<select multiple v-model="'+n.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(i).slice(8,-1),r));for(var a,s,u=0,c=t.options.length;u<c;u++)if(s=t.options[u],o)a=C(i,_r(s))>-1,s.selected!==a&&(s.selected=a);else if(O(_r(s),i))return void(t.selectedIndex!==u&&(t.selectedIndex=u));o||(t.selectedIndex=-1)}function gr(t,e){return e.every(function(e){return!O(e,t)})}function _r(t){return"_value"in t?t._value:t.value}function br(t){t.target.composing=!0}function wr(t){t.target.composing&&(t.target.composing=!1,xr(t.target,"input"))}function xr(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Er(t){return!t.componentInstance||t.data&&t.data.transition?t:Er(t.componentInstance._vnode)}function Ar(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Ar(Nt(e.children)):t}function kr(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[Rr(o)]=i[o];return e}function Or(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Cr(t){for(;t=t.parent;)if(t.data.transition)return!0}function $r(t,e){return e.key===t.key&&e.tag===t.tag}function Dr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Tr(t){t.data.newPos=t.elm.getBoundingClientRect()}function Nr(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var Sr=Object.freeze({}),Pr=Object.prototype.toString,Fr=m("slot,component",!0),jr=m("key,ref,slot,slot-scope,is"),Ir=Object.prototype.hasOwnProperty,Lr=/-(\w)/g,Rr=_(function(t){return t.replace(Lr,function(t,e){return e?e.toUpperCase():""})}),Mr=_(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),Ur=/\B([A-Z])/g,Vr=_(function(t){return t.replace(Ur,"-$1").toLowerCase()}),Br=Function.prototype.bind?w:b,zr=function(t,e,n){return!1},Yr=function(t){return t},Hr="data-server-rendered",Wr=["component","directive","filter"],Zr=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],qr={optionMergeStrategies:Object.create(null),silent:!1,productionTip:"production"!==e.env.NODE_ENV,devtools:"production"!==e.env.NODE_ENV,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:zr,isReservedAttr:zr,isUnknownElement:zr,getTagNamespace:k,parsePlatformTagName:Yr,mustUseProp:zr,_lifecycleHooks:Zr},Xr=/[^\w.$]/,Gr="__proto__"in{},Kr="undefined"!=typeof window,Jr="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Qr=Jr&&WXEnvironment.platform.toLowerCase(),ti=Kr&&window.navigator.userAgent.toLowerCase(),ei=ti&&/msie|trident/.test(ti),ni=ti&&ti.indexOf("msie 9.0")>0,ri=ti&&ti.indexOf("edge/")>0,ii=(ti&&ti.indexOf("android")>0||"android"===Qr,ti&&/iphone|ipad|ipod|ios/.test(ti)||"ios"===Qr),oi=ti&&/chrome\/\d+/.test(ti)&&!ri,ai={}.watch,si=!1;if(Kr)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){si=!0}}),window.addEventListener("test-passive",null,ui)}catch(t){}var ci,li,fi=function(){return void 0===ci&&(ci=!Kr&&!Jr&&"undefined"!=typeof n&&"server"===n.process.env.VUE_ENV),ci},di=Kr&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,pi="undefined"!=typeof Symbol&&S(Symbol)&&"undefined"!=typeof Reflect&&S(Reflect.ownKeys);li="undefined"!=typeof Set&&S(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return this.set[t]===!0},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var hi=k,vi=k,mi=k,yi=k;if("production"!==e.env.NODE_ENV){var gi="undefined"!=typeof console,_i=/(?:^|[-_])(\w)/g,bi=function(t){return t.replace(_i,function(t){return t.toUpperCase()}).replace(/[-_]/g,"")};hi=function(t,e){var n=e?mi(e):"";qr.warnHandler?qr.warnHandler.call(null,t,e,n):gi&&!qr.silent&&console.error("[Vue warn]: "+t+n)},vi=function(t,e){gi&&!qr.silent&&console.warn("[Vue tip]: "+t+(e?mi(e):""))},yi=function(t,e){if(t.$root===t)return"<Root>";var n="function"==typeof t&&null!=t.cid?t.options:t._isVue?t.$options||t.constructor.options:t||{},r=n.name||n._componentTag,i=n.__file;if(!r&&i){var o=i.match(/([^\/\\]+)\.vue$/);r=o&&o[1]}return(r?"<"+bi(r)+">":"<Anonymous>")+(i&&e!==!1?" at "+i:"")};var wi=function(t,e){for(var n="";e;)e%2===1&&(n+=t),e>1&&(t+=t),e>>=1;return n};mi=function(t){if(t._isVue&&t.$parent){for(var e=[],n=0;t;){if(e.length>0){var r=e[e.length-1];if(r.constructor===t.constructor){n++,t=t.$parent;continue}n>0&&(e[e.length-1]=[r,n],n=0)}e.push(t),t=t.$parent}return"\n\nfound in\n\n"+e.map(function(t,e){return""+(0===e?"---> ":wi(" ",5+2*e))+(Array.isArray(t)?yi(t[0])+"... ("+t[1]+" recursive calls)":yi(t))}).join("\n")}return"\n\n(found in "+yi(t)+")"}}var xi=0,Ei=function(){this.id=xi++,this.subs=[]};Ei.prototype.addSub=function(t){this.subs.push(t)},Ei.prototype.removeSub=function(t){y(this.subs,t)},Ei.prototype.depend=function(){Ei.target&&Ei.target.addDep(this)},Ei.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},Ei.target=null;var Ai=[],ki=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Oi={child:{configurable:!0}};Oi.child.get=function(){return this.componentInstance},Object.defineProperties(ki.prototype,Oi);var Ci=function(t){void 0===t&&(t="");var e=new ki;return e.text=t,e.isComment=!0,e},$i=Array.prototype,Di=Object.create($i),Ti=["push","pop","shift","unshift","splice","sort","reverse"];Ti.forEach(function(t){var e=$i[t];T(Di,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})});var Ni=Object.getOwnPropertyNames(Di),Si=!0,Pi=function(t){if(this.value=t,this.dep=new Ei,this.vmCount=0,T(t,"__ob__",this),Array.isArray(t)){var e=Gr?R:M;e(t,Di,Ni),this.observeArray(t)}else this.walk(t)};Pi.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)V(t,e[n])},Pi.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)U(t[e])};var Fi=qr.optionMergeStrategies;"production"!==e.env.NODE_ENV&&(Fi.el=Fi.propsData=function(t,e,n,r){return n||hi('option "'+r+'" can only be used during instance creation with the `new` keyword.'),Li(t,e)}),Fi.data=function(t,n,r){return r?W(t,n,r):n&&"function"!=typeof n?("production"!==e.env.NODE_ENV&&hi('The "data" option should be a function that returns a per-instance value in component definitions.',r),t):W(t,n)},Zr.forEach(function(t){Fi[t]=Z}),Wr.forEach(function(t){Fi[t+"s"]=q}),Fi.watch=function(t,n,r,i){if(t===ai&&(t=void 0),n===ai&&(n=void 0),!n)return Object.create(t||null);if("production"!==e.env.NODE_ENV&&tt(i,n,r),!t)return n;var o={};E(o,t);for(var a in n){var s=o[a],u=n[a];s&&!Array.isArray(s)&&(s=[s]),o[a]=s?s.concat(u):Array.isArray(u)?u:[u]}return o},Fi.props=Fi.methods=Fi.inject=Fi.computed=function(t,n,r,i){if(n&&"production"!==e.env.NODE_ENV&&tt(i,n,r),!t)return n;var o=Object.create(null);return E(o,t),n&&E(o,n),o},Fi.provide=W;var ji,Ii,Li=function(t,e){return void 0===e?t:e},Ri=/^(String|Number|Boolean|Function|Symbol)$/,Mi=[],Ui=!1,Vi=!1;if("undefined"!=typeof r&&S(r))Ii=function(){r(pt)};else if("undefined"==typeof MessageChannel||!S(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Ii=function(){setTimeout(pt,0)};else{var Bi=new MessageChannel,zi=Bi.port2;Bi.port1.onmessage=pt,Ii=function(){zi.postMessage(1)}}if("undefined"!=typeof Promise&&S(Promise)){var Yi=Promise.resolve();ji=function(){Yi.then(pt),ii&&setTimeout(k)}}else ji=Ii;var Hi;if("production"!==e.env.NODE_ENV){var Wi=m("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),Zi=function(t,e){hi('Property or method "'+e+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',t)},qi="undefined"!=typeof Proxy&&S(Proxy);if(qi){var Xi=m("stop,prevent,self,ctrl,shift,alt,meta,exact");qr.keyCodes=new Proxy(qr.keyCodes,{set:function(t,e,n){return Xi(e)?(hi("Avoid overwriting built-in modifier in config.keyCodes: ."+e),!1):(t[e]=n,!0)}})}var Gi={has:function t(e,n){var t=n in e,r=Wi(n)||"_"===n.charAt(0);return t||r||Zi(e,n),t||!r}},Ki={get:function(t,e){return"string"!=typeof e||e in t||Zi(t,e),t[e]}};Hi=function(t){if(qi){var e=t.$options,n=e.render&&e.render._withStripped?Ki:Gi;t._renderProxy=new Proxy(t,n)}else t._renderProxy=t}}var Ji,Qi,to=new li;if("production"!==e.env.NODE_ENV){var eo=Kr&&window.performance;eo&&eo.mark&&eo.measure&&eo.clearMarks&&eo.clearMeasures&&(Ji=function(t){return eo.mark(t)},Qi=function(t,e,n){eo.measure(t,e,n),eo.clearMarks(e),eo.clearMarks(n),eo.clearMeasures(t)})}var no,ro=_(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}),io=null,oo=!1,ao=100,so=[],uo=[],co={},lo={},fo=!1,po=!1,ho=0,vo=0,mo=function(t,n,r,i,o){this.vm=t,o&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++vo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new li,this.newDepIds=new li,this.expression="production"!==e.env.NODE_ENV?n.toString():"","function"==typeof n?this.getter=n:(this.getter=N(n),this.getter||(this.getter=function(){},"production"!==e.env.NODE_ENV&&hi('Failed watching path: "'+n+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',t))),
this.value=this.lazy?void 0:this.get()};mo.prototype.get=function(){P(this);var t,e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;lt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&mt(t),F(),this.cleanupDeps()}return t},mo.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},mo.prototype.cleanupDeps=function(){for(var t=this,e=this.deps.length;e--;){var n=t.deps[e];t.newDepIds.has(n.id)||n.removeSub(t)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},mo.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Qt(this)},mo.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||c(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){lt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},mo.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},mo.prototype.depend=function(){for(var t=this,e=this.deps.length;e--;)t.deps[e].depend()},mo.prototype.teardown=function(){var t=this;if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var e=this.deps.length;e--;)t.deps[e].removeSub(t);this.active=!1}};var yo={enumerable:!0,configurable:!0,get:k,set:k},go={lazy:!0};Oe(Ce.prototype);var _o={init:function(t,e,n,r){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;_o.prepatch(i,i)}else{var o=t.componentInstance=Se(t,io,n,r);o.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;zt(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Zt(n,"mounted")),t.data.keepAlive&&(e._isMounted?Kt(n):Ht(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Wt(e,!0):e.$destroy())}},bo=Object.keys(_o),wo=1,xo=2,Eo=0;Ve(We),fe(We),It(We),Vt(We),Ue(We);var Ao=[String,RegExp,Array],ko={name:"keep-alive",abstract:!0,props:{include:Ao,exclude:Ao,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){var t=this;for(var e in t.cache)nn(t.cache,e,t.keys)},mounted:function(){var t=this;this.$watch("include",function(e){en(t,function(t){return tn(e,t)})}),this.$watch("exclude",function(e){en(t,function(t){return!tn(e,t)})})},render:function(){var t=this.$slots.default,e=Nt(t),n=e&&e.componentOptions;if(n){var r=Qe(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!tn(o,r))||a&&r&&tn(a,r))return e;var s=this,u=s.cache,c=s.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[l]?(e.componentInstance=u[l].componentInstance,y(c,l),c.push(l)):(u[l]=e,c.push(l),this.max&&c.length>parseInt(this.max)&&nn(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Oo={KeepAlive:ko};rn(We),Object.defineProperty(We.prototype,"$isServer",{get:fi}),Object.defineProperty(We.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(We,"FunctionalRenderContext",{value:Ce}),We.version="2.5.16";var Co,$o,Do=m("style,class"),To=m("input,textarea,option,select,progress"),No=function(t,e,n){return"value"===n&&To(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},So=m("contenteditable,draggable,spellcheck"),Po=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Fo="http://www.w3.org/1999/xlink",jo=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Io=function(t){return jo(t)?t.slice(6,t.length):""},Lo=function(t){return null==t||t===!1},Ro={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Mo=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Uo=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Vo=function(t){return Mo(t)||Uo(t)},Bo=Object.create(null),zo=m("text,number,password,search,email,tel,url"),Yo=Object.freeze({createElement:vn,createElementNS:mn,createTextNode:yn,createComment:gn,insertBefore:_n,removeChild:bn,appendChild:wn,parentNode:xn,nextSibling:En,tagName:An,setTextContent:kn,setStyleScope:On}),Ho={create:function(t,e){Cn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Cn(t,!0),Cn(e))},destroy:function(t){Cn(t,!0)}},Wo=new ki("",{},[]),Zo=["create","activate","update","remove","destroy"],qo={create:Sn,update:Sn,destroy:function(t){Sn(t,Wo)}},Xo=Object.create(null),Go=[Ho,qo],Ko={create:Ln,update:Ln},Jo={create:Un,update:Un},Qo="__r",ta="__c",ea={create:Hn,update:Hn},na={create:Wn,update:Wn},ra=_(function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}),ia=/^--/,oa=/\s*!important$/,aa=function(t,e,n){if(ia.test(e))t.style.setProperty(e,n);else if(oa.test(n))t.style.setProperty(e,n.replace(oa,""),"important");else{var r=ua(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},sa=["Webkit","Moz","ms"],ua=_(function(t){if($o=$o||document.createElement("div").style,t=Rr(t),"filter"!==t&&t in $o)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<sa.length;n++){var r=sa[n]+e;if(r in $o)return r}}),ca={create:Qn,update:Qn},la=_(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),fa=Kr&&!ni,da="transition",pa="animation",ha="transition",va="transitionend",ma="animation",ya="animationend";fa&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ha="WebkitTransition",va="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ma="WebkitAnimation",ya="webkitAnimationEnd"));var ga=Kr?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()},_a=/\b(transform|all)(,|$)/,ba=Kr?{create:vr,activate:vr,remove:function(t,e){t.data.show!==!0?fr(t,e):e()}}:{},wa=[Ko,Jo,ea,na,ca,ba],xa=wa.concat(Go),Ea=Nn({nodeOps:Yo,modules:xa});ni&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&xr(t,"input")});var Aa={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?bt(n,"postpatch",function(){Aa.componentUpdated(t,e,n)}):mr(t,e,n.context),t._vOptions=[].map.call(t.options,_r)):("textarea"===n.tag||zo(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",br),t.addEventListener("compositionend",wr),t.addEventListener("change",wr),ni&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){mr(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,_r);if(i.some(function(t,e){return!O(t,r[e])})){var o=t.multiple?e.value.some(function(t){return gr(t,i)}):e.value!==e.oldValue&&gr(e.value,i);o&&xr(t,"change")}}}},ka={bind:function(t,e,n){var r=e.value;n=Er(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,lr(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!=!i){n=Er(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?lr(n,function(){t.style.display=t.__vOriginalDisplay}):fr(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},Oa={model:Aa,show:ka},Ca={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},$a={name:"transition",props:Ca,abstract:!0,render:function(t){var n=this,r=this.$slots.default;if(r&&(r=r.filter(function(t){return t.tag||Tt(t)}),r.length)){"production"!==e.env.NODE_ENV&&r.length>1&&hi("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var i=this.mode;"production"!==e.env.NODE_ENV&&i&&"in-out"!==i&&"out-in"!==i&&hi("invalid <transition> mode: "+i,this.$parent);var o=r[0];if(Cr(this.$vnode))return o;var a=Ar(o);if(!a)return o;if(this._leaving)return Or(t,o);var s="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?s+"comment":s+a.tag:u(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key;var c=(a.data||(a.data={})).transition=kr(this),l=this._vnode,f=Ar(l);if(a.data.directives&&a.data.directives.some(function(t){return"show"===t.name})&&(a.data.show=!0),f&&f.data&&!$r(a,f)&&!Tt(f)&&(!f.componentInstance||!f.componentInstance._vnode.isComment)){var d=f.data.transition=E({},c);if("out-in"===i)return this._leaving=!0,bt(d,"afterLeave",function(){n._leaving=!1,n.$forceUpdate()}),Or(t,o);if("in-out"===i){if(Tt(a))return l;var p,h=function(){p()};bt(c,"afterEnter",h),bt(c,"enterCancelled",h),bt(d,"delayLeave",function(t){p=t})}}return o}}},Da=E({tag:String,moveClass:String},Ca);delete Da.mode;var Ta={props:Da,render:function(t){for(var n=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),i=this.prevChildren=this.children,o=this.$slots.default||[],a=this.children=[],s=kr(this),u=0;u<o.length;u++){var c=o[u];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))a.push(c),r[c.key]=c,(c.data||(c.data={})).transition=s;else if("production"!==e.env.NODE_ENV){var l=c.componentOptions,f=l?l.Ctor.options.name||l.tag||"":c.tag;hi("<transition-group> children must be keyed: <"+f+">")}}if(i){for(var d=[],p=[],h=0;h<i.length;h++){var v=i[h];v.data.transition=s,v.data.pos=v.elm.getBoundingClientRect(),r[v.key]?d.push(v):p.push(v)}this.kept=t(n,null,d),this.removed=p}return t(n,null,a)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Dr),t.forEach(Tr),t.forEach(Nr),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;ir(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(va,n._moveCb=function t(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(va,t),n._moveCb=null,or(n,e))})}}))},methods:{hasMove:function(t,e){if(!fa)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){er(n,t)}),tr(n,e),n.style.display="none",this.$el.appendChild(n);var r=sr(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}},Na={Transition:$a,TransitionGroup:Ta};We.config.mustUseProp=No,We.config.isReservedTag=Vo,We.config.isReservedAttr=Do,We.config.getTagNamespace=dn,We.config.isUnknownElement=pn,E(We.options.directives,Oa),E(We.options.components,Na),We.prototype.__patch__=Kr?Ea:k,We.prototype.$mount=function(t,e){return t=t&&Kr?hn(t):void 0,Bt(this,t,e)},Kr&&setTimeout(function(){qr.devtools&&(di?di.emit("init",We):"production"!==e.env.NODE_ENV&&"test"!==e.env.NODE_ENV&&oi&&console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),"production"!==e.env.NODE_ENV&&"test"!==e.env.NODE_ENV&&qr.productionTip!==!1&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")},0),t.exports=We}).call(e,n(2),function(){return this}(),n(3).setImmediate)},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=h.length;e;){for(p=h,h=[];++m<e;)p&&p[m].run();m=-1,e=h.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,h=[],v=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i="undefined"!=typeof t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(4),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return v[h]=r,p(h),h++}function i(t){delete v[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(m)setTimeout(a,0,t);else{var e=v[t];if(e){m=!0;try{o(e)}finally{i(t),m=!1}}}}function s(){p=function(t){e.nextTick(function(){a(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),p=function(n){t.postMessage(e+n,"*")}}function l(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;a(e)},p=function(e){t.port2.postMessage(e)}}function f(){var t=y.documentElement;p=function(e){var n=y.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function d(){p=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var p,h=1,v={},m=!1,y=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?s():u()?c():t.MessageChannel?l():y&&"onreadystatechange"in y.createElement("script")?f():d(),g.setImmediate=r,g.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(2))},function(t,e,n){n(6);var r=n(17)(n(18),n(106),null,null);t.exports=r.exports},function(t,e,n){var r=n(7);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("4215f386",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.i(n(9),""),e.push([t.id,'footer:after,header:after{content:" ";display:table;clear:both}.expand-y-enter-active,.expand-y-leave-active,.modal-enter-active,.modal-leave-active,.player-more-enter-active,.player-more-leave-active{transition:transform .3s ease}.expand-y-enter,.expand-y-leave-active,.modal-enter,.modal-leave-active,.player-more-enter,.player-more-leave-active{transform:scaleY(0)}.player-more-enter,.player-more-enter-active,.player-more-leave-active{transform-origin:center top}#body,.app,body,html{width:100%;height:100%;margin:0}body{font-size:14px;font-family:Arial,Helvetica,sans-serif;line-height:18px}*{box-sizing:border-box}.app{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}footer,header{width:100%;background-color:#2a72bb}footer .left,header .left{float:left}footer .right,header .right{float:right}footer .center,header .center{margin:auto;text-align:center}footer .mobile-row,header .mobile-row{display:inline-block}@media (max-width:540px){footer .mobile-row,header .mobile-row{padding-bottom:10px;display:block}footer .mobile-row:last-child,header .mobile-row:last-child{padding-bottom:0}}.lyric-editor{-ms-flex:1;flex:1;overflow:auto}.form-group{display:-ms-flexbox;display:flex;padding:5px 0;-ms-flex-align:center;align-items:center}.form-group label{vertical-align:middle;padding-right:10px}.form-group input{-ms-flex:1;flex:1;height:30px;border:1px solid #d6d6d6;padding:0 3px;border-radius:5px}.menu-item{display:inline-block;color:#fff;height:40px;line-height:40px;padding:0 8px;cursor:pointer}.menu-item:hover{background-color:#215991}.btn{border-radius:5px;display:inline-block;padding:6px;font-weight:bolder;cursor:pointer;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#1161b3;color:#fff}.btn:hover{background-color:#124b86}.btn.white,footer .btn,header .btn{background:#fff;color:#1161b3}.btn.white:hover,footer .btn:hover,header .btn:hover{background-color:#e8e1e1}',""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"@font-face{font-family:fontello;src:url("+n(10)+");src:url("+n(10)+'#iefix) format("embedded-opentype"),url('+n(11)+') format("woff2"),url('+n(12)+') format("woff"),url('+n(13)+') format("truetype"),url('+n(14)+'#fontello) format("svg");font-weight:400;font-style:normal}[class*=" icon-"]:before,[class^=icon-]:before{font-family:fontello;font-style:normal;font-weight:400;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-edit:before{content:"\\E800"}.icon-save:before{content:"\\E801"}.icon-trash:before{content:"\\E802"}.icon-download:before{content:"\\E803"}.icon-upload:before{content:"\\E804"}.icon-right:before{content:"\\E805"}.icon-left:before{content:"\\E806"}.icon-up:before{content:"\\E807"}.icon-down:before{content:"\\E808"}.icon-volume-off:before{content:"\\E809"}.icon-volume-up:before{content:"\\E80A"}.icon-plus:before{content:"\\E80D"}.icon-cancel:before{content:"\\E80E"}.icon-ellipsis-vert:before{content:"\\E80F"}.icon-info:before{content:"\\E810"}.icon-help-circled:before{content:"\\E811"}.icon-play:before{content:"\\E812"}.icon-pause:before{content:"\\E813"}.icon-forward:before{content:"\\E814"}.icon-backward:before{content:"\\E815"}.icon-stop:before{content:"\\E816"}',""])},function(t,e,n){t.exports=n.p+"2bb4ae08084b7a900bfe1c703c988f34.eot"},function(t,e,n){t.exports=n.p+"f313a0f987672dc77a8c243380e2089e.woff2"},function(t,e,n){t.exports=n.p+"4cc930163f6d5088dfa5fef619d87cb9.woff"},function(t,e,n){t.exports=n.p+"b483544303fcfc7e1e34159a411fcdcb.ttf"},function(t,e,n){t.exports=n.p+"f4037f8d16f43379b18020706bdc9567.svg"},function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=l[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(o(n.parts[i]));l[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var t=document.createElement("style");return t.type="text/css",f.appendChild(t),t}function o(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(h)return v;r.parentNode.removeChild(r)}if(m){var o=p++;r=d||(d=i()),e=a.bind(null,r,o,!1),n=a.bind(null,r,o,!0)}else r=i(),e=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function a(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function s(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u="undefined"!=typeof document,c=n(16),l={},f=u&&(document.head||document.getElementsByTagName("head")[0]),d=null,p=0,h=!1,v=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){h=n;var i=c(t,e);return r(i),function(e){for(var n=[],o=0;o<i.length;o++){var a=i[o],s=l[a.id];s.refs--,n.push(s)}e?(i=c(t,e),r(i)):i=[];for(var o=0;o<n.length;o++){var s=n[o];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete l[s.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],u=o[2],c=o[3],l={id:t+":"+i,css:s,media:u,sourceMap:c};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}},function(t,e){t.exports=function(t,e,n,r){var i,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,o=t.default);var s="function"==typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),r){var u=s.computed||(s.computed={});Object.keys(r).forEach(function(t){var e=r[t];u[t]=function(){return e}})}return{esModule:i,exports:o,options:s}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),o=r(i),a=n(24),s=r(a),u=n(56),c=r(u),l=n(78),f=r(l),d=n(99),p=r(d),h=n(60),v=n(53),m=r(v);e.default={data:function(){var t=m.default.lrcFormat;return{musicUrl:"",editing:m.default.editing,lrcFormat:t,runner:new h.Runner(h.Lrc.parse(t)),lyricArray:m.default.lyricArray}},methods:{uploadMusic:function(t){this.$refs.player.src=t},removeLyric:function(){this.lrcFormat="",this.lyricArray=[],this.runner=new h.Runner},playto:function(t){this.$refs.player.playto(t)},timeupdate:function(t){this.$refs.lyric.$emit("timeupdate",t)}},watch:{editing:function(t){m.default.editing=t},lrcFormat:function(t){m.default.lrcFormat=t,this.runner=new h.Runner(h.Lrc.parse(this.lrcFormat))},lyricArray:{deep:!0,handler:function(){m.default.lyricArray=this.lyricArray}}},components:{Upload:o.default,Player:s.default,LyricEditor:c.default,Modals:f.default,NavMenu:p.default}}},function(t,e,n){n(20);var r=n(17)(n(22),n(23),"data-v-0a55bac8",null);t.exports=r.exports},function(t,e,n){var r=n(21);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("72090b67",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"input[type=file][data-v-0a55bac8]{display:none}",""])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){var t=this,e=this.$refs.upload;e.addEventListener("change",function(){if(e.files.length>0&&t.type_match())if("url"===t.readFormat)t.$emit("upload",URL.createObjectURL(e.files[0]));else{var n=new FileReader;n.onload=function(e){t.$emit("upload",e.target.result)},n["readAs"+t.readFormat](e.files[0])}})},props:{type:{type:String},readFormat:{type:String,default:"Text"},accept:{type:String,default:""}},methods:{upload:function(){this.$refs.upload.click()},type_match:function(){if(this.type){var t=new RegExp("^"+this.type+"/");return t.test(this.$refs.upload.files[0].type)}return!0}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.upload}},[n("i",{staticClass:"icon-upload"}),t._v(" "),t._t("default"),t._v(" "),n("input",{ref:"upload",attrs:{type:"file",accept:t.accept}})],2)},staticRenderFns:[]}},function(t,e,n){n(25);var r=n(17)(n(27),n(55),"data-v-d48250b0",null);t.exports=r.exports},function(t,e,n){var r=n(26);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("16d40cf5",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".root[data-v-d48250b0]{height:30px}.root.mobile[data-v-d48250b0]{height:60px}.more[data-v-d48250b0],.player[data-v-d48250b0],.sound[data-v-d48250b0]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.more[data-v-d48250b0],.player[data-v-d48250b0]{background:#d0dae4;color:#2a72bb;height:30px}.ctrl-btn[data-v-d48250b0]{font-size:20px;padding:0 1px}.range[data-v-d48250b0]{margin-left:4px;margin-right:4px}.range.music[data-v-d48250b0]{-ms-flex:1;flex:1}time-panel[data-v-d48250b0]{padding:0 5px}.more[data-v-d48250b0]{height:30px;-ms-flex-pack:end;justify-content:flex-end;position:relative;z-index:10}.mobile .more[data-v-d48250b0]{-ms-flex-pack:justify;justify-content:space-between}.sound[data-v-d48250b0]{padding:0 5px;width:30%}.sound .range.volume[data-v-d48250b0]{-ms-flex:1;flex:1}.sound .ctrl-mute-btn[data-v-d48250b0]{width:26px;font-size:18px}",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(28),o=r(i),a=n(49),s=r(a),u=n(32);e.default={data:function(){return{hover:!1,isMobile:u.isMobile,process:0,muted:!1,paused:!0,currentTime:0,duration:0,volume:0,src:"",audio:null}},methods:{seek:function(t){this.playto(parseFloat(t*this.audio.duration))},volumeSeek:function(t){this.audio.volume=this.volume=t},playto:function(t){var e=this;this.paused&&(this.paused=!1),this.$nextTick(function(){e.currentTime=e.audio.currentTime=t})}},mounted:function(){var t=this;this.audio=document.createElement("video"),this.audio.preload="metadata",this.audio.addEventListener("durationchange",function(){t.duration=t.audio.duration}),this.audio.addEventListener("timeupdate",function(){t.currentTime=t.audio.currentTime,t.process=t.currentTime/t.duration,t.$emit("timeupdate",t.currentTime)}),this.audio.addEventListener("ended",function(){t.$emit("timeupdate",t.currentTime),t.process=0,t.paused=!0}),u.globalKeydown.on(["space"," "],function(){return t.paused=!t.paused,!1}).on("arrowleft",function(){return t.$emit("backward"),!1}).on("arrowright",function(){return t.$emit("forward"),!1}),this.$on("backward",function(){t.playto(t.audio.currentTime-5)}).$on("forward",function(){t.playto(t.audio.currentTime+5)})},watch:{src:{immediate:!0,handler:function(t){t&&(this.paused=!0,this.audio.src=t,this.process=0,this.volume=this.audio.volume,this.currentTime=this.audio.currentTime,this.duration=this.audio.duration)}},process:function(t){this.$refs.musicRange.changeValue(t)},volume:function(t){this.$refs.soundRange.changeValue(t)},muted:function(t){this.audio.muted=t},paused:function(){this.paused?this.audio.pause():this.audio.play()}},components:{Range:o.default,TimePanel:s.default}}},function(t,e,n){n(29);var r=n(17)(n(31),n(48),"data-v-5820de74",null);t.exports=r.exports},function(t,e,n){var r=n(30);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("3ad39535",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".bar[data-v-5820de74]{position:relative;height:10px}.wrap[data-v-5820de74]{width:100%;height:100%;background-color:#123b5d;border-radius:5px;overflow:hidden}.value[data-v-5820de74]{height:100%;background-color:#2a72bb}.thumb[data-v-5820de74]{cursor:move;position:absolute;top:-3px;width:10px;height:16px;background:#fff;box-shadow:inset -1px -1px 5px -2px #0b2031;border-radius:16px;transform:translateX(-5px)}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32);e.default={data:function(){return{selfValue:0,draging:!1,dragValue:0}},props:{value:{type:Number,default:0,validator:function(t){return t>=0&&t<=1}}},methods:{click:function(t){t.target!==this.$refs.thumb&&(this.selfValue=this.offset2value(t.offsetX),this.emitSeek())},emitSeek:function(){this.$emit("seek",this.selfValue)},emitDragSeek:function(){this.$emit("drag-seek",this.selfValue)},offset2value:function(t){return t/this.$refs.bar.clientWidth},changeValue:function(t){this.draging||(this.selfValue=t)}},mounted:function(){var t=this,e=this.$refs.thumb,n=this.$refs.bar,i=new r.Dragger(e,n);i.on("start",function(){t.draging=!0}).on("move",function(){t.selfValue=t.offset2value(i.offset),t.emitDragSeek()}).on("end",function(){t.draging=!1,t.selfValue=t.offset2value(i.offset),t.emitSeek()}),i.create()}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);
t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){T?m.default.saveAs(new Blob([t],{type:"text/plain;charset=utf-8"}),e+".lrc"):alert("Please upgrade your browser")}function u(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(t=0);var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;for(t=t.toString();t.split(".")[0].length<e;)t="0"+t;return t};return e?n(parseInt(t/60,10))+":"+n(parseInt(t%60,10)):n(parseInt(t/60,10))+":"+n((t%60).toFixed(2),2)}function c(t){var e=t.split(":"),n=l(e,2),r=n[0],i=n[1];return 60*parseInt(r,10)+parseFloat(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.TooltipPosition=e.Dragger=e.globalKeydown=e.cache=e.Cache=e.DelayHover=e.Scroller=e.EventEmitter=e.isMobile=void 0;var l=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)};e.saveLrc=s,e.timestamp2timestr=u,e.timestr2timestamp=c;var p=n(33),h=r(p),v=n(34),m=r(v),y=n(37),g=r(y),_=n(40),b=r(_),w=n(41),x=r(w),E=n(42),A=r(E),k=n(47),O=r(k),C=e.isMobile="ontouchstart"in window,$=e.EventEmitter=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),f(e,[{key:"on",value:function(t){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(b.default.array(t))t.forEach(function(t){var r;(r=d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",n)).call.apply(r,[n,t].concat(i))});else{var a;(a=d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this)).call.apply(a,[this,t].concat(i))}return this}}]),e}(h.default),D=(e.Scroller=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.timer=[],this.scrollableStartTime=new Date,this.viewport=e,this.config=(0,x.default)({delay:3,time:1,step:100},r),this.viewport.addEventListener("scroll",function(){n.isCanScroll()||n.letDelay()})}return f(t,[{key:"letDelay",value:function(){this.scrollableStartTime=Date.now()+1e3*this.config.delay}},{key:"clearTimer",value:function(){this.timer.forEach(function(t){return clearTimeout(t)}),this.timer=[]}},{key:"isCanScroll",value:function(){return Date.now()>this.scrollableStartTime}},{key:"scrollTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isCanScroll()||n!==!1){this.clearTimer();var r=this.viewport.scrollTop,i=t,o=i-r;if(0!==o)for(var a=o/this.config.step,s=r,u=1;u<this.config.step;++u)!function(t){e.timer.push(setTimeout(function(){s!==e.viewport.scrollTop?(e.clearTimer(),e.letDelay()):(e.viewport.scrollTop=r+a*t,s=e.viewport.scrollTop)},1e3*e.config.time*t/e.config.step))}(u)}}}]),t}(),e.DelayHover=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.enterTimer=null,r.leaveTimer=null,r.show=!1,r.element=t,r.cfg=(0,x.default)({enterDelay:.5,leaveDelay:.3,unique:!0},n),r.hover(function(){r.show=!0},function(){r.show=!1}),C?r.element.addEventListener("click",function(){r.show?r.emit("leave"):(r.closeLastHover(),r.emit("enter"))}):(r.element.addEventListener("mouseenter",function(){r.clearLeaveTimer(),r.enterTimer=setTimeout(function(){r.closeLastHover(),e.LastHover=r,r.emit("enter")},1e3*r.cfg.enterDelay)}),r.element.addEventListener("mouseleave",function(){r.clearEnterTimer(),r.leaveTimer=setTimeout(function(){r.emit("leave")},1e3*r.cfg.leaveDelay)})),r}return a(e,t),f(e,[{key:"closeLastHover",value:function(){this.cfg.unique&&e.LastHover&&e.LastHover!==this&&e.LastHover.emit("leave")}},{key:"clearLeaveTimer",value:function(){null!==this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)}},{key:"clearEnterTimer",value:function(){null!==this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=null)}},{key:"hover",value:function(t,e){this.on("enter",t).on("leave",e)}}]),e}($));D.LastHover=null;var T;try{T=!!new Blob}catch(t){T=!1}var N=e.Cache=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.default.name;i(this,t),this.version=2,this.prefix=e}return f(t,[{key:"read",value:function(){var t;if(this.prefix in localStorage){try{t=JSON.parse(localStorage[this.prefix])}catch(t){console.error(t)}if(t.$version===this.version)return t}return{}}},{key:"write",value:function(t){t.$version=this.version,localStorage[this.prefix]=JSON.stringify(t)}},{key:"get",value:function(t,e){var n=this.read();return t in n?n[t]:e}},{key:"set",value:function(t,e){var n=this.read();n[t]=e;try{this.write(n)}catch(t){console.error(t)}}}]),t}(),S=(e.cache=new N,e.globalKeydown=new $);window.addEventListener("keydown",function(t){if(!/(input|select|option|textarea)/.test(t.target.tagName.toLowerCase())){var e=t.key||t.code,n=S.listeners(e.toLowerCase()).map(function(e){return e(t)}).some(function(t){return t===!1});n&&t.preventDefault()}});e.Dragger=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.ee=new $,r.element=t,r.container=n,r}return a(e,t),f(e,[{key:"on",value:function(){var t;return(t=this.ee).on.apply(t,arguments)}},{key:"emit",value:function(){var t;return(t=this.ee).emit.apply(t,arguments)}},{key:"create",value:function(){this.handles=[this.element],this.bindHandles()}},{key:"dragStart",value:function(t){this.dragStartPoint.left=this.element.offsetLeft,this.emit("start",t)}},{key:"dragMove",value:function(t,e,n){this.offset=this.dragStartPoint.left+n.x,this.offset<0?this.offset=0:this.offset>this.container.clientWidth&&(this.offset=this.container.clientWidth),this.emit("move",t,e,n)}},{key:"dragEnd",value:function(t,e){this.emit("end",t,e)}}]),e}(g.default),e.TooltipPosition=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom";i(this,t),this.dirs=["bottom","right","top","left"],this.target=e,this.tooltip=n,this.viewport=document.documentElement,this.generateDirs(r)}return f(t,[{key:"generateDirs",value:function(t){var e=this.dirs.indexOf(t);this.dirs.splice(e,1),this.dirs.unshift(t)}},{key:"checkRectOverflow",value:function(t){return t.left>=0&&t.top>=0&&t.right<=this.viewport.clientWidth&&t.bottom<=this.viewport.clientHeight}},{key:"rectOverflowCount",value:function(t){var e=function(t){return t<0?t:0};return e(t.left)+e(t.top)+e(this.viewport.clientWidth-t.right)+e(this.viewport.clientHeight-t.bottom)}},{key:"position",value:function(){for(var t=this.target.getBoundingClientRect(),e=this.tooltip.clientWidth,n=this.tooltip.clientHeight,r={width:e,height:n},i=[],o=0;o<this.dirs.length;++o){var a=this.dirs[o];switch(this.dirs[o]){case"bottom":r.left=t.left+t.width/2-e/2,r.right=r.left+e,r.top=t.bottom,r.bottom=t.bottom+n;break;case"top":r.left=t.left+t.width/2-e/2,r.right=r.left+e,r.top=t.top-n,r.bottom=t.top;break;case"left":r.left=t.left-e,r.right=t.left,r.top=t.top+t.height/2-n/2,r.bottom=r.top+n;break;case"right":r.left=t.right,r.right=t.right+e,r.top=t.top+t.height/2-n/2,r.bottom=r.top+n}i.push([this.rectOverflowCount(r),a,(0,A.default)(r)])}return i.sort(function(t,e){return e[0]-t[0]}),{dir:i[0][1],rect:i[0][2]}}}]),t}()},function(t,e,n){var r;!function(i){function o(){this._events={},this._conf&&a.call(this,this._conf)}function a(t){t?(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),this._events.maxListeners=t.maxListeners!==i?t.maxListeners:d,t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=d}function s(t,e){var n="(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak?(n+=" Event name: %s.",console.error(n,t,e)):console.error(n,t),console.trace&&console.trace()}function u(t){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,a.call(this,t)}function c(t,e,n,r){if(!n)return[];var i,o,a,s,u,l,f,d=[],p=e.length,h=e[r],v=e[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(c(t,e,n[a],r+1)));return d}if("**"===h){f=r+1===p||r+2===p&&"*"===v,f&&n._listeners&&(d=d.concat(c(t,e,n,p)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!f&&(d=d.concat(c(t,e,n[a],p))),d=d.concat(c(t,e,n[a],r))):d=a===v?d.concat(c(t,e,n[a],r+2)):d.concat(c(t,e,n[a],r)));return d}d=d.concat(c(t,e,n[h],r+1))}if(s=n["*"],s&&c(t,e,s,r+1),u=n["**"])if(r<p){u._listeners&&c(t,e,u,p);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?c(t,e,u[a],r+2):a===h?c(t,e,u[a],r+1):(l={},l[a]=u[a],c(t,e,{"**":l},r+1)))}else u._listeners?c(t,e,u,p):u["*"]&&u["*"]._listeners&&c(t,e,u["*"],p);return d}function l(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,r=t.length;n+1<r;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var o=this.listenerTree,a=t.shift();a!==i;){if(o[a]||(o[a]={}),o=o[a],0===t.length)return o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(e),!o._listeners.warned&&this._events.maxListeners>0&&o._listeners.length>this._events.maxListeners&&(o._listeners.warned=!0,s.call(this,o._listeners.length,a))):o._listeners=e,!0;a=t.shift()}return!0}var f=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},d=10;u.EventEmitter2=u,u.prototype.delimiter=".",u.prototype.setMaxListeners=function(t){t!==i&&(this._events||o.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},u.prototype.event="",u.prototype.once=function(t,e){return this.many(t,1,e),this},u.prototype.many=function(t,e,n){function r(){0===--e&&i.off(t,r),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),i},u.prototype.emit=function(){this._events||o.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;var e,n,r,i,a,s=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),s>3)for(e=new Array(s),i=0;i<s;i++)e[i]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=t,s){case 1:a[r].call(this,t);break;case 2:a[r].call(this,t,arguments[1]);break;case 3:a[r].call(this,t,arguments[1],arguments[2]);break;default:a[r].apply(this,e)}}if(this.wildcard){a=[];var u="string"==typeof t?t.split(this.delimiter):t.slice();c.call(this,a,u,this.listenerTree,0)}else{if(a=this._events[t],"function"==typeof a){switch(this.event=t,s){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(s-1),i=1;i<s;i++)e[i-1]=arguments[i];a.apply(this,e)}return!0}a&&(a=a.slice())}if(a&&a.length){if(s>3)for(e=new Array(s-1),i=1;i<s;i++)e[i-1]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=t,s){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,e)}return!0}if(!this._all&&"error"===t)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},u.prototype.emitAsync=function(){this._events||o.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var e,n,r,i,a,s=[],u=arguments.length;if(this._all){if(u>3)for(e=new Array(u),i=1;i<u;i++)e[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=t,u){case 1:s.push(this._all[r].call(this,t));break;case 2:s.push(this._all[r].call(this,t,arguments[1]));break;case 3:s.push(this._all[r].call(this,t,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,e))}}if(this.wildcard){a=[];var l="string"==typeof t?t.split(this.delimiter):t.slice();c.call(this,a,l,this.listenerTree,0)}else a=this._events[t];if("function"==typeof a)switch(this.event=t,u){case 1:s.push(a.call(this));break;case 2:s.push(a.call(this,arguments[1]));break;case 3:s.push(a.call(this,arguments[1],arguments[2]));break;default:for(e=new Array(u-1),i=1;i<u;i++)e[i-1]=arguments[i];s.push(a.apply(this,e))}else if(a&&a.length){if(u>3)for(e=new Array(u-1),i=1;i<u;i++)e[i-1]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=t,u){case 1:s.push(a[r].call(this));break;case 2:s.push(a[r].call(this,arguments[1]));break;case 3:s.push(a[r].call(this,arguments[1],arguments[2]));break;default:s.push(a[r].apply(this,e))}}else if(!this._all&&"error"===t)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},u.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");return this._events||o.call(this),this.emit("newListener",t,e),this.wildcard?(l.call(this,t,e),this):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),this._events[t].push(e),!this._events[t].warned&&this._events.maxListeners>0&&this._events[t].length>this._events.maxListeners&&(this._events[t].warned=!0,s.call(this,this._events[t].length,t))):this._events[t]=e,this)},u.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},u.prototype.addListener=u.prototype.on,u.prototype.off=function(t,e){function n(t){if(t!==i){var e=Object.keys(t);for(var r in e){var o=e[r],a=t[o];a instanceof Function||"object"!=typeof a||null===a||(Object.keys(a).length>0&&n(t[o]),0===Object.keys(a).length&&delete t[o])}}}if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var r,o=[];if(this.wildcard){var a="string"==typeof t?t.split(this.delimiter):t.slice();o=c.call(this,null,a,this.listenerTree,0)}else{if(!this._events[t])return this;r=this._events[t],o.push({_listeners:r})}for(var s=0;s<o.length;s++){var u=o[s];if(r=u._listeners,f(r)){for(var l=-1,d=0,p=r.length;d<p;d++)if(r[d]===e||r[d].listener&&r[d].listener===e||r[d]._origin&&r[d]._origin===e){l=d;break}if(l<0)continue;return this.wildcard?u._listeners.splice(l,1):this._events[t].splice(l,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[t]),this.emit("removeListener",t,e),this}(r===e||r.listener&&r.listener===e||r._origin&&r._origin===e)&&(this.wildcard?delete u._listeners:delete this._events[t],this.emit("removeListener",t,e))}return n(this.listenerTree),this},u.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,r=e.length;n<r;n++)if(t===e[n])return e.splice(n,1),this.emit("removeListenerAny",t),this}else{for(e=this._all,n=0,r=e.length;n<r;n++)this.emit("removeListenerAny",e[n]);this._all=[]}return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||o.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),n=c.call(this,null,e,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[t]=null);return this},u.prototype.listeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return c.call(this,e,n,this.listenerTree,0),e}return this._events||o.call(this),this._events[t]||(this._events[t]=[]),f(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},u.prototype.listenerCount=function(t){return this.listeners(t).length},u.prototype.listenersAny=function(){return this._all?this._all:[]},r=function(){return u}.call(e,n,e,t),!(r!==i&&(t.exports=r))}()},function(t,e,n){var r,i,o=o||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=t.webkitRequestFileSystem,s=t.requestFileSystem||a||t.mozRequestFileSystem,u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",l=0,f=500,d=function(e){var r=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};t.chrome?r():setTimeout(r,f)},p=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){u(t)}}},h=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t},v=function(e,u,f){f||(e=h(e));var v,m,y,g=this,_=e.type,b=!1,w=function(){p(g,"writestart progress write writeend".split(" "))},x=function(){if(!b&&v||(v=n().createObjectURL(e)),m)m.location.href=v;else{var r=t.open(v,"_blank");void 0==r&&"undefined"!=typeof safari&&(t.location.href=v)}g.readyState=g.DONE,w(),d(v)},E=function(t){return function(){if(g.readyState!==g.DONE)return t.apply(this,arguments)}},A={create:!0,exclusive:!1};return g.readyState=g.INIT,u||(u="download"),i?(v=n().createObjectURL(e),r.href=v,r.download=u,void setTimeout(function(){o(r),w(),d(v),g.readyState=g.DONE})):(t.chrome&&_&&_!==c&&(y=e.slice||e.webkitSlice,e=y.call(e,0,e.size,c),b=!0),a&&"download"!==u&&(u+=".download"),(_===c||a)&&(m=t),s?(l+=e.size,void s(t.TEMPORARY,l,E(function(t){t.root.getDirectory("saved",A,E(function(t){var n=function(){t.getFile(u,A,E(function(t){t.createWriter(E(function(n){n.onwriteend=function(e){m.location.href=t.toURL(),g.readyState=g.DONE,p(g,"writeend",e),d(t)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=g["on"+t]}),n.write(e),g.abort=function(){n.abort(),g.readyState=g.DONE},g.readyState=g.WRITING}),x)}),x)};t.getFile(u,{create:!1},E(function(t){t.remove(),n()}),E(function(t){t.code===t.NOT_FOUND_ERR?n():x()}))}),x)}),x)):void x())},m=v.prototype,y=function(t,e,n){return new v(t,e,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return n||(t=h(t)),navigator.msSaveOrOpenBlob(t,e||"download")}:(m.abort=function(){var t=this;t.readyState=t.DONE,p(t,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,y)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=o:null!==n(35)&&null!=n(36)&&(r=[],i=function(){return o}.apply(e,r),!(void 0!==i&&(t.exports=i)))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){var r,i;/*!
	 * Unidragger v2.3.0
	 * Draggable base class
	 * MIT license
	 */
!function(o,a){r=[n(38)],i=function(t){return a(o,t)}.apply(e,r),!(void 0!==i&&(t.exports=i))}(window,function(t,e){"use strict";function n(){}var r=n.prototype=Object.create(e.prototype);r.bindHandles=function(){this._bindHandles(!0)},r.unbindHandles=function(){this._bindHandles(!1)},r._bindHandles=function(e){e=void 0===e||e;for(var n=e?"addEventListener":"removeEventListener",r=e?this._touchActionValue:"",i=0;i<this.handles.length;i++){var o=this.handles[i];this._bindStartEvent(o,e),o[n]("click",this),t.PointerEvent&&(o.style.touchAction=r)}},r._touchActionValue="none",r.pointerDown=function(t,e){var n=this.okayPointerDown(t);n&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var i={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return r.okayPointerDown=function(t){var e=i[t.target.nodeName],n=o[t.target.type],r=!e||n;return r||this._pointerReset(),r},r.pointerDownBlur=function(){var t=document.activeElement,e=t&&t.blur&&t!=document.body;e&&t.blur()},r.pointerMove=function(t,e){var n=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,n]),this._dragMove(t,e,n)},r._dragPointerMove=function(t,e){var n={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this._dragStart(t,e),n},r.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},r.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},r._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},r._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},r.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},r._dragMove=function(t,e,n){this.isDragging&&this.dragMove(t,e,n)},r.dragMove=function(t,e,n){t.preventDefault(),this.emitEvent("dragMove",[t,e,n])},r._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},r.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},r.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},r._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},r.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},n.getPointerPoint=e.getPointerPoint,n})},function(t,e,n){var r,i;/*!
	 * Unipointer v2.3.0
	 * base class for doing one thing with pointer event
	 * MIT license
	 */
!function(o,a){r=[n(39)],i=function(t){return a(o,t)}.apply(e,r),!(void 0!==i&&(t.exports=i))}(window,function(t,e){"use strict";function n(){}function r(){}var i=r.prototype=Object.create(e.prototype);i.bindStartEvent=function(t){this._bindStartEvent(t,!0)},i.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},i._bindStartEvent=function(e,n){n=void 0===n||n;var r=n?"addEventListener":"removeEventListener",i="mousedown";t.PointerEvent?i="pointerdown":"ontouchstart"in t&&(i="touchstart"),e[r](i,this)},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.getTouch=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.identifier==this.pointerIdentifier)return n}},i.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},i.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},i.onpointerdown=function(t){this._pointerDown(t,t)},i._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},i.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var o={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return i._bindPostStartEvents=function(e){if(e){var n=o[e.type];n.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=n}},i._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},i.onmousemove=function(t){this._pointerMove(t,t)},i.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},i.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},i._pointerMove=function(t,e){this.pointerMove(t,e)},i.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},i.onmouseup=function(t){this._pointerUp(t,t)},i.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},i.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},i._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},i.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},i._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},i._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},i.pointerDone=n,i.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},i.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},i._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},i.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},r.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},r})},function(t,e,n){var r,i;!function(o,a){r=a,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i))}("undefined"!=typeof window?window:this,function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},r=n[t]=n[t]||[];return r.indexOf(e)==-1&&r.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{},r=n[t]=n[t]||{};return r[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var r=n.indexOf(e);return r!=-1&&n.splice(r,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var r=this._onceEvents&&this._onceEvents[t],i=0;i<n.length;i++){var o=n[i],a=r&&r[o];a&&(this.off(t,o),delete r[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})},function(t,e,n){var r;(function(i){!function(i,o){r=function(){return i.is=o()}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this,function(){function t(t){return function(){return!t.apply(null,l.call(arguments))}}function e(t){return function(){var e=l.call(arguments),n=e.length;1===n&&u.array(e[0])&&(e=e[0],n=e.length);for(var r=0;r<n;r++)if(!t.call(null,e[r]))return!1;return!0}}function n(t){return function(){var e=l.call(arguments),n=e.length;1===n&&u.array(e[0])&&(e=e[0],n=e.length);for(var r=0;r<n;r++)if(t.call(null,e[r]))return!0;return!1}}function r(t,e){u[t]=function(n){return e[t].test(n)}}function o(){var r=u;for(var i in r)if(f.call(r,i)&&u.function(r[i]))for(var o=r[i].api||["not","all","any"],a=0;a<o.length;a++)"not"===o[a]&&(u.not[i]=t(u[i])),"all"===o[a]&&(u.all[i]=e(u[i])),"any"===o[a]&&(u.any[i]=n(u[i]))}var a=this||i,s=a.is,u={};u.VERSION="0.8.0",u.not={},u.all={},u.any={};var c=Object.prototype.toString,l=Array.prototype.slice,f=Object.prototype.hasOwnProperty;u.arguments=function(t){return u.not.null(t)&&("[object Arguments]"===c.call(t)||"object"==typeof t&&"callee"in t)},u.array=Array.isArray||function(t){return"[object Array]"===c.call(t)},u.boolean=function(t){return t===!0||t===!1||"[object Boolean]"===c.call(t)},u.date=function(t){return"[object Date]"===c.call(t)},u.error=function(t){return"[object Error]"===c.call(t)},u.function=function(t){return"[object Function]"===c.call(t)||"function"==typeof t},u.nan=function(t){return t!==t},u.null=function(t){return null===t},u.number=function(t){return u.not.nan(t)&&"[object Number]"===c.call(t)},u.object=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},u.json=function(t){return"[object Object]"===c.call(t)},u.regexp=function(t){return"[object RegExp]"===c.call(t)},u.sameType=function(t,e){return u.nan(t)||u.nan(e)?u.nan(t)===u.nan(e):c.call(t)===c.call(e)},u.sameType.api=["not"],u.string=function(t){return"[object String]"===c.call(t)},u.char=function(t){return u.string(t)&&1===t.length},u.undefined=function(t){return void 0===t},u.empty=function(t){if(u.object(t)){var e=Object.getOwnPropertyNames(t).length;return!!(0===e||1===e&&u.array(t)||2===e&&u.arguments(t))}return""===t},u.existy=function(t){return null!==t&&void 0!==t},u.truthy=function(t){return u.existy(t)&&t!==!1&&u.not.nan(t)&&""!==t&&0!==t},u.falsy=t(u.truthy),u.space=function(t){if(u.char(t)){var e=t.charCodeAt(0);return e>8&&e<14||32===e}return!1},u.equal=function(t,e){return u.all.number(t,e)?t===e&&1/t===1/e:u.all.string(t,e)||u.all.regexp(t,e)?""+t==""+e:!!u.all.boolean(t,e)&&t===e},u.equal.api=["not"],u.even=function(t){return u.number(t)&&t%2===0},u.odd=function(t){return u.number(t)&&t%2===1},u.positive=function(t){return u.number(t)&&t>0},u.negative=function(t){return u.number(t)&&t<0},u.above=function(t,e){return u.all.number(t,e)&&t>e},u.above.api=["not"],u.under=function(t,e){return u.all.number(t,e)&&t<e},u.under.api=["not"],u.within=function(t,e,n){return u.all.number(t,e,n)&&t>e&&t<n},u.within.api=["not"],u.decimal=function(t){return u.number(t)&&t%1!==0},u.integer=function(t){return u.number(t)&&t%1===0},u.finite=isFinite||function(t){return t!==1/0&&t!==-(1/0)&&u.not.nan(t)},u.infinite=t(u.finite);var d={url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,alphaNumeric:/^[A-Za-z0-9]+$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,dateString:/^(1[0-2]|0?[1-9])\/(3[01]|[12][0-9]|0?[1-9])\/(?:[0-9]{2})?[0-9]{2}$/,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-(?!00)[0-9]{2}-(?!0000)[0-9]{4}$/,affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,hexadecimal:/^[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/};for(var p in d)d.hasOwnProperty(p)&&r(p,d);u.include=function(t,e){return t.indexOf(e)>-1},u.include.api=["not"],u.upperCase=function(t){return u.string(t)&&t===t.toUpperCase()},u.lowerCase=function(t){return u.string(t)&&t===t.toLowerCase()},u.startWith=function(t,e){return u.string(t)&&0===t.indexOf(e)},u.startWith.api=["not"],u.endWith=function(t,e){return u.string(t)&&t.indexOf(e)>-1&&t.indexOf(e)===t.length-e.length},u.endWith.api=["not"],u.capitalized=function(t){if(u.not.string(t))return!1;for(var e=t.split(" "),n=[],r=0;r<e.length;r++)n.push(e[r][0]===e[r][0].toUpperCase());return u.all.truthy.apply(null,n)},u.palindrome=function(t){return u.string(t)&&t==t.split("").reverse().join("")};var h=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],v=["january","february","march","april","may","june","july","august","september","october","november","december"];if(u.today=function(t){var e=new Date,n=e.toDateString();return u.date(t)&&t.toDateString()===n},u.yesterday=function(t){var e=new Date,n=new Date(e.setDate(e.getDate()-1)).toDateString();return u.date(t)&&t.toDateString()===n},u.tomorrow=function(t){var e=new Date,n=new Date(e.setDate(e.getDate()+1)).toDateString();return u.date(t)&&t.toDateString()===n},u.past=function(t){var e=new Date;return u.date(t)&&t.getTime()<e.getTime()},u.future=t(u.past),u.day=function(t,e){return u.date(t)&&e.toLowerCase()===h[t.getDay()]},u.day.api=["not"],u.month=function(t,e){return u.date(t)&&e.toLowerCase()===v[t.getMonth()]},u.month.api=["not"],u.year=function(t,e){return u.date(t)&&u.number(e)&&e===t.getFullYear()},u.year.api=["not"],u.leapYear=function(t){return u.number(t)&&(t%4===0&&t%100!==0||t%400===0)},u.weekend=function(t){return u.date(t)&&(6===t.getDay()||0===t.getDay())},u.weekday=t(u.weekend),u.inDateRange=function(t,e,n){if(u.not.date(t)||u.not.date(e)||u.not.date(n))return!1;var r=t.getTime(),i=e.getTime(),o=n.getTime();return r>i&&r<o},u.inDateRange.api=["not"],u.inLastWeek=function(t){return u.inDateRange(t,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},u.inLastMonth=function(t){return u.inDateRange(t,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},u.inLastYear=function(t){return u.inDateRange(t,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},u.inNextWeek=function(t){return u.inDateRange(t,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},u.inNextMonth=function(t){return u.inDateRange(t,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},u.inNextYear=function(t){return u.inDateRange(t,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},u.quarterOfYear=function(t,e){return u.date(t)&&u.number(e)&&e===Math.floor((t.getMonth()+3)/3)},u.quarterOfYear.api=["not"],u.dayLightSavingTime=function(t){var e=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),6,1),r=Math.max(e.getTimezoneOffset(),n.getTimezoneOffset());return t.getTimezoneOffset()<r},"undefined"!=typeof window){var m="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"",y="navigator"in window&&"vendor"in navigator&&navigator.vendor.toLowerCase()||"",g="navigator"in window&&"appVersion"in navigator&&navigator.appVersion.toLowerCase()||"";u.chrome=function(){return/chrome|chromium/i.test(m)&&/google inc/.test(y)},u.chrome.api=["not"],u.firefox=function(){return/firefox/i.test(m)},u.firefox.api=["not"],u.edge=function(){return/edge/i.test(m)},u.edge.api=["not"],u.ie=function(t){return t?t>=11?"ActiveXObject"in window:new RegExp("msie "+t).test(m):/msie/i.test(m)||"ActiveXObject"in window},u.ie.api=["not"],u.opera=function(){return/^Opera\//.test(m)||/\x20OPR\//.test(m)},u.opera.api=["not"],u.safari=function(){return/safari/i.test(m)&&/apple computer/i.test(y)},u.safari.api=["not"],u.ios=function(){return u.iphone()||u.ipad()||u.ipod()},u.ios.api=["not"],u.iphone=function(){return/iphone/i.test(m)},u.iphone.api=["not"],u.ipad=function(){return/ipad/i.test(m)},u.ipad.api=["not"],u.ipod=function(){return/ipod/i.test(m)},u.ipod.api=["not"],u.android=function(){return/android/i.test(m)},u.android.api=["not"],u.androidPhone=function(){return/android/i.test(m)&&/mobile/i.test(m)},u.androidPhone.api=["not"],u.androidTablet=function(){return/android/i.test(m)&&!/mobile/i.test(m)},u.androidTablet.api=["not"],u.blackberry=function(){return/blackberry/i.test(m)||/BB10/i.test(m)},u.blackberry.api=["not"],u.desktop=function(){return u.not.mobile()&&u.not.tablet()},u.desktop.api=["not"],u.linux=function(){return/linux/i.test(g)},u.linux.api=["not"],u.mac=function(){return/mac/i.test(g)},u.mac.api=["not"],u.windows=function(){return/win/i.test(g)},u.windows.api=["not"],u.windowsPhone=function(){return u.windows()&&/phone/i.test(m)},u.windowsPhone.api=["not"],u.windowsTablet=function(){return u.windows()&&u.not.windowsPhone()&&/touch/i.test(m)},u.windowsTablet.api=["not"],u.mobile=function(){return u.iphone()||u.ipod()||u.androidPhone()||u.blackberry()||u.windowsPhone()},u.mobile.api=["not"],u.tablet=function(){return u.ipad()||u.androidTablet()||u.windowsTablet()},u.tablet.api=["not"],u.online=function(){return navigator.onLine},u.online.api=["not"],u.offline=t(u.online),u.offline.api=["not"],u.touchDevice=function(){return"ontouchstart"in window||"DocumentTouch"in window&&document instanceof DocumentTouch},u.touchDevice.api=["not"]}return u.propertyCount=function(t,e){if(!u.object(t)||!u.number(e))return!1;if(Object.keys)return Object.keys(t).length===e;var n,r=[];for(n in t)f.call(t,n)&&r.push(n);return r.length===e},u.propertyCount.api=["not"],u.propertyDefined=function(t,e){return u.object(t)&&u.string(e)&&e in t},u.propertyDefined.api=["not"],u.windowObject=function(t){return"object"==typeof t&&"setInterval"in t},u.domNode=function(t){return u.object(t)&&t.nodeType>0},u.inArray=function(t,e){if(u.not.array(e))return!1;for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},u.inArray.api=["not"],u.sorted=function(t){if(u.not.array(t))return!1;for(var e=0;e<t.length;e++)if(t[e]>t[e+1])return!1;return!0},o(),u.setRegexp=function(t,e){for(var n in d)f.call(d,n)&&e===n&&(d[n]=t)},u.setNamespace=function(){return a.is=s,this},u})}).call(e,function(){return this}())},function(t,e){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},o=function(t){if(!t||"[object Object]"!==r.call(t))return!1;var e=n.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var o;for(o in t);return"undefined"==typeof o||n.call(t,o)};t.exports=function t(){var e,n,r,a,s,u,c=arguments[0],l=1,f=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[1]||{},l=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});l<f;++l)if(e=arguments[l],null!=e)for(n in e)r=c[n],a=e[n],c!==a&&(d&&a&&(o(a)||(s=i(a)))?(s?(s=!1,u=r&&i(r)?r:[]):u=r&&o(r)?r:{},c[n]=t(d,u,a)):"undefined"!=typeof a&&(c[n]=a));return c}},function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}function n(r,i,o,a,f){function d(r,o){if(null===r)return null;if(0===o)return r;var m,y;if("object"!=typeof r)return r;if(t(r,u))m=new u;else if(t(r,c))m=new c;else if(t(r,l))m=new l(function(t,e){r.then(function(e){t(d(e,o-1))},function(t){e(d(t,o-1))})});else if(n.__isArray(r))m=[];else if(n.__isRegExp(r))m=new RegExp(r.source,s(r)),r.lastIndex&&(m.lastIndex=r.lastIndex);else if(n.__isDate(r))m=new Date(r.getTime());else{if(v&&e.isBuffer(r))return m=new e(r.length),r.copy(m),m;t(r,Error)?m=Object.create(r):"undefined"==typeof a?(y=Object.getPrototypeOf(r),m=Object.create(y)):(m=Object.create(a),y=a)}if(i){var g=p.indexOf(r);if(g!=-1)return h[g];p.push(r),h.push(m)}t(r,u)&&r.forEach(function(t,e){var n=d(e,o-1),r=d(t,o-1);m.set(n,r)}),t(r,c)&&r.forEach(function(t){var e=d(t,o-1);m.add(e)});for(var _ in r){var b;y&&(b=Object.getOwnPropertyDescriptor(y,_)),b&&null==b.set||(m[_]=d(r[_],o-1))}if(Object.getOwnPropertySymbols)for(var w=Object.getOwnPropertySymbols(r),_=0;_<w.length;_++){var x=w[_],E=Object.getOwnPropertyDescriptor(r,x);(!E||E.enumerable||f)&&(m[x]=d(r[x],o-1),E.enumerable||Object.defineProperty(m,x,{enumerable:!1}))}if(f)for(var A=Object.getOwnPropertyNames(r),_=0;_<A.length;_++){var k=A[_],E=Object.getOwnPropertyDescriptor(r,k);E&&E.enumerable||(m[k]=d(r[k],o-1),Object.defineProperty(m,k,{enumerable:!1}))}return m}"object"==typeof i&&(o=i.depth,a=i.prototype,f=i.includeNonEnumerable,i=i.circular);var p=[],h=[],v="undefined"!=typeof e;return"undefined"==typeof i&&(i=!0),"undefined"==typeof o&&(o=1/0),d(r,o)}function r(t){return Object.prototype.toString.call(t)}function i(t){return"object"==typeof t&&"[object Date]"===r(t)}function o(t){return"object"==typeof t&&"[object Array]"===r(t)}function a(t){return"object"==typeof t&&"[object RegExp]"===r(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var u;try{u=Map}catch(t){u=function(){}}var c;try{c=Set}catch(t){c=function(){}}var l;try{l=Promise}catch(t){l=function(){}}return n.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},n.__objToStr=r,n.__isDate=i,n.__isArray=o,n.__isRegExp=a,n.__getRegExpFlags=s,n}();"object"==typeof t&&t.exports&&(t.exports=n)}).call(e,n(43).Buffer)},function(t,e,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return s(this,t,e,n)}function s(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?f(t,e,n):h(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e,n,r){return u(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function l(t,e){if(u(e),t=o(t,e<0?0:0|v(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(e,n);t=o(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function d(t,e){var n=e.length<0?0:0|v(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=d(t,e),t}function h(t,e){if(a.isBuffer(e)){var n=0|v(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||G(e.length)?o(t,0):d(t,e);if("Buffer"===e.type&&Q(e.data))return d(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function m(t){return+t!=t&&(t=0),a.alloc(+t)}function y(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return H(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return D(this,e,n);case"ascii":return N(this,e,n);case"latin1":case"binary":return S(this,e,n);case"base64":return $(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(o(t,c)===o(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*a}else l!==-1&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,d=0;d<u;d++)if(o(t,c+d)!==o(e,d)){f=!1;break}if(f)return c}return-1}function x(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function E(t,e,n,r){return X(H(e,t.length-n),t,n,r)}function A(t,e,n,r){return X(W(e),t,n,r)}function k(t,e,n,r){return A(t,e,n,r)}function O(t,e,n,r){return X(q(e),t,n,r)}function C(t,e,n,r){return X(Z(e,t.length-n),t,n,r)}function $(t,e,n){return 0===e&&n===t.length?K.fromByteArray(t):K.fromByteArray(t.slice(e,n))}function D(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(a=f));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return T(r)}function T(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function N(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function S(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Y(t[o]);return i}function F(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,i){return i||M(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,n,r,23,4),n+4}function V(t,e,n,r,i){return i||M(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,n,r,52,8),n+8}function B(t){if(t=z(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Z(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function q(t){return K.toByteArray(B(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function G(t){return t!==t}var K=n(44),J=n(45),Q=n(46);e.Buffer=a,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=i(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return s(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return c(null,t,e,n)},a.allocUnsafe=function(t){return l(null,t)},a.allocUnsafeSlow=function(t){return l(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=a.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?D(this,0,t):g.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,u=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},a.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return A(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=a.prototype;else{var i=e-t;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},a.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),J.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),J.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),J.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),J.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;I(this,t,e,n,i,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;I(this,t,e,n,i,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return V(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return V(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:H(new a(t,r).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function r(t){var e=n(t),r=e[0],i=e[1];return 3*(r+i)/4-i}function i(t,e,n){return 3*(e+n)/4-n}function o(t){for(var e,r=n(t),o=r[0],a=r[1],s=new f(i(t,o,a)),u=0,c=a>0?o-4:o,d=0;d<c;d+=4)e=l[t.charCodeAt(d)]<<18|l[t.charCodeAt(d+1)]<<12|l[t.charCodeAt(d+2)]<<6|l[t.charCodeAt(d+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;return 2===a&&(e=l[t.charCodeAt(d)]<<2|l[t.charCodeAt(d+1)]>>4,s[u++]=255&e),1===a&&(e=l[t.charCodeAt(d)]<<10|l[t.charCodeAt(d+1)]<<4|l[t.charCodeAt(d+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e),s}function a(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function s(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(a(r));return i.join("")}function u(t){for(var e,n=t.length,r=n%3,i=[],o=16383,a=0,u=n-r;a<u;a+=o)i.push(s(t,a,a+o>u?u:a+o));return 1===r?(e=t[n-1],i.push(c[e>>2]+c[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(c[e>>10]+c[e>>4&63]+c[e<<2&63]+"=")),i.join("")}e.byteLength=r,e.toByteArray=o,e.fromByteArray=u;for(var c=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=d.length;p<h;++p)c[p]=d[p],l[d.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,p=t[e+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?d/u:d*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=h,a/=256,c-=8);t[n+p-h]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports={name:"lrc-maker",version:"0.2.2",description:"lrc maker",main:"index.js",scripts:{test:"npm run lint",lint:"eslint --format 'node_modules/eslint-friendly-formatter' --ext js,vue webpack.config.js src",dev:"webpack-dev-server --host='0.0.0.0' --progress --colors --inline --hot --output-public-path='/assets/'",build:"npm run build:clean && npm run build:webpack && npm run build:view","build:clean":"rm -rf build","build:view":" cp index.html build/index.html","build:webpack":"webpack --optimize-minimize --output-public-path='./assets/'",deploy:"npm run build && gh-pages -d build"},keywords:["lrc"],author:"Weirong Xu <weirongxu.raidou@gmail.com>",homepage:"https://github.com/weirongxu/lrc-maker",repository:{type:"git",url:"https://github.com/weirongxu/lrc-maker.git"},onlinePage:"https://weirongxu.github.io/lrc-maker/",bugs:"https://github.com/weirongxu/lrc-maker/issues",license:"MIT",devDependencies:{autoprefixer:"^6.5.3","babel-core":"^6.7.6","babel-eslint":"^7.1.1","babel-helper-vue-jsx-merge-props":"^2.0.2","babel-loader":"^6.2.8","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-vue-jsx":"^3.2.0","babel-preset-latest":"^6.16.0","babel-preset-stage-0":"^6.16.0","css-loader":"^0.26.0",eslint:"^3.10.2","eslint-config-standard":"^6.2.1","eslint-friendly-formatter":"^2.0.6","eslint-loader":"^1.3.0","eslint-plugin-html":"^1.7.0","eslint-plugin-promise":"^3.4.0","eslint-plugin-standard":"^2.0.1","file-loader":"^0.9.0","gh-pages":"^0.12.0","json-loader":"^0.5.4","node-sass":"^3.13.0","resolve-url-loader":"^1.6.0","sass-loader":"^4.0.2","url-loader":"^0.5.7","vue-loader":"^10.0.1","vue-template-compiler":"^2.1.3",webpack:"^1.12.15","webpack-dev-server":"^1.14.1","yaml-loader":"^0.4.0"},dependencies:{clone:"^2.1.0",eventemitter2:"^2.2.1",extend:"^3.0.0","filesaver.js":"^0.2.0","lrc-kit":"^0.2.0",unidragger:"^2.1.0",vue:"^2.1.3","vue-i18n":"^5.0.3"}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"bar",staticClass:"bar",on:{click:t.click}},[n("div",{staticClass:"wrap"},[n("div",{staticClass:"value",style:{width:100*t.selfValue+"%"}})]),t._v(" "),n("div",{ref:"thumb",staticClass:"thumb",style:{left:100*t.selfValue+"%"}})])},staticRenderFns:[]}},function(t,e,n){n(50);var r=n(17)(n(52),n(54),null,null);t.exports=r.exports},function(t,e,n){var r=n(51);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("31d90ce6",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),o=n(53),a=r(o);e.default={data:function(){return{remain:a.default.timeRemain}},props:{duration:{default:0,type:Number},currentTime:{default:0,type:Number}},filters:{time:function(t){return(0,i.timestamp2timestr)(t,!0)}},watch:{remain:function(t){a.default.timeRemain=t}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),i={lrcFormat:{},lyric:{},editing:{default:!0},lyricArray:{default:[]},timeRemain:{default:!1},userName:{default:""}},o={};Object.keys(i).forEach(function(t){var e=i[t];o[t]=r.cache.get(e.name||t,e.default||"")}),e.default=new Proxy(o,{set:function(t,e,n){var o=i[e];return r.cache.set(o.name||e,n),t[e]=n,!0}})},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{on:{click:function(e){t.remain=!t.remain}}},[t.remain?[t._v("\n      -"+t._s(t._f("time")(t.duration-t.currentTime))+"\n    ")]:[t._v("\n      "+t._s(t._f("time")(t.currentTime))+"\n    ")]],2),t._v("\n  / "+t._s(t._f("time")(t.duration))+"\n")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.src.length,expression:"src.length"}],staticClass:"root",class:{mobile:t.isMobile},on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[n("div",{staticClass:"player"},[n("div",{staticClass:"ctrl-btn",attrs:{title:"[SPACE]"},on:{click:function(e){t.paused=!t.paused}}},[t.paused?n("i",{staticClass:"icon-play"}):n("i",{staticClass:"icon-pause"})]),t._v(" "),n("div",{staticClass:"ctrl-btn",attrs:{title:"[LEFT]"},on:{click:function(e){t.$emit("backward")}}},[n("i",{staticClass:"icon-backward"})]),t._v(" "),n("div",{staticClass:"ctrl-btn",attrs:{title:"[RIGHT]"},on:{click:function(e){t.$emit("forward")}}},[n("i",{staticClass:"icon-forward"})]),t._v(" "),n("range",{ref:"musicRange",staticClass:"range music",attrs:{value:t.process},on:{seek:t.seek}}),t._v(" "),t.isMobile?t._e():n("time-panel",{attrs:{duration:t.duration,"current-time":t.currentTime}})],1),t._v(" "),n("transition",{attrs:{name:"player-more"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isMobile||t.hover,expression:"isMobile || hover"}],staticClass:"more"},[t.isMobile?n("time-panel",{attrs:{duration:t.duration,"current-time":t.currentTime}}):t._e(),t._v(" "),n("div",{staticClass:"sound"},[n("div",{staticClass:"ctrl-btn",on:{click:function(e){t.muted=!t.muted}}},[t.muted||0==t.volume?n("i",{staticClass:"icon-volume-off"}):n("i",{staticClass:"icon-volume-up"})]),t._v(" "),n("range",{ref:"soundRange",staticClass:"range volume",attrs:{value:t.volume},on:{seek:t.volumeSeek,"drag-seek":t.volumeSeek}})],1)],1)])],1)},staticRenderFns:[]}},function(t,e,n){n(57);var r=n(17)(n(59),n(77),"data-v-3fb441bc",null);t.exports=r.exports},function(t,e,n){var r=n(58);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("15dd552b",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,'ul.lyrics[data-v-3fb441bc]{list-style-type:none;margin:0;padding:0;background-color:#f1f1f1}ul.lyrics>li[data-v-3fb441bc]{min-height:40px;text-align:center;color:#2a72bb;padding:10px 0}ul.lyrics>li.cur[data-v-3fb441bc]{color:#2a72bb;text-shadow:1px 1px 1px #aaa;background-color:#fbfbfb}ul.lyrics>li:hover .conceal[data-v-3fb441bc]{display:inline-block}ul.lyrics>li .conceal[data-v-3fb441bc]{display:none}ul.lyrics>li.division[data-v-3fb441bc],ul.lyrics>li.unsorted[data-v-3fb441bc]{background-color:#f1f1f1}ul.lyrics>li.division[data-v-3fb441bc]{display:block;width:100%;min-height:auto;padding:2px 0;font-size:12px;text-align:center}ul.lyrics.editing>li[data-v-3fb441bc]{padding:0;display:-ms-flexbox;display:flex}ul.lyrics.editing>li.division[data-v-3fb441bc]{display:block;padding:4px 0}ul.lyrics.editing>li .timestamp[data-v-3fb441bc]{color:#7c9fbb;width:60px;overflow:hidden;text-overflow:"."}ul.lyrics.editing>li .content[data-v-3fb441bc]{-ms-flex:1;flex:1}ul.lyrics.editing>li .icon-btn[data-v-3fb441bc]{padding-left:4px;padding-right:4px}ul.lyrics.editing>li .content[data-v-3fb441bc],ul.lyrics.editing>li .icon-btn[data-v-3fb441bc],ul.lyrics.editing>li .timestamp[data-v-3fb441bc]{padding-top:10px;padding-bottom:10px}ul.lyrics.editing>li input[data-v-3fb441bc]{text-align:center;border:none;background-color:#d0dae4}',""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(60),a=n(32),s=n(53),u=r(s),c=n(65),l=r(c);e.default={data:function(){return{index:-1,editingIndex:-1,editingTextIndex:-1,scroller:null}},props:{runner:{type:o.Runner,default:new o.Runner},playto:{type:Function,default:function(){}},editing:{type:Boolean,default:u.default.editing},lyricArray:{type:Array,default:[]}},methods:{editMenu:function(t){},exitEdit:function(){this.editingIndex=-1,this.editingTextIndex=-1,this.$emit("update")},edit:function(t){this.editingIndex=t},editText:function(t){this.editingTextIndex=t,this.$emit("update")},remove:function(t){this.runner.lrc.lyrics.splice(t,1),this.$emit("update")},removeText:function(t){this.lyricArray.splice(t,1),this.$emit("update")},insert:function(t){this.runner.lrc.lyrics.splice(t+1,0,{timestamp:this.runner.lrc.lyrics[t].timestamp,content:this.runner.lrc.lyrics[t].content}),this.$emit("update")},insertText:function(t){this.lyricArray.splice(t+1,0,this.lyricArray[t]),this.$emit("update")},removeTimestamp:function(t){var e,n=this.runner.lrc.lyrics,r=n.splice(t,n.length-t).map(function(t){return t.content});(e=this.lyricArray).splice.apply(e,[0,0].concat(i(r))),this.$emit("update")},setTimestamp:function(t){var e=this.$parent.$refs.player.currentTime;0!==e&&(this.runner.lrc.lyrics[t].timestamp=e,this.$emit("update"))},setTimestampText:function(t){var e=this.$parent.$refs.player.currentTime;0!==e&&this.lyricArray.length&&(this.runner.lrc.lyrics.push({timestamp:e,content:this.lyricArray[t]}),this.removeText(t),this.$emit("update"))},scrollToCurrentLyric:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.$el,n=e.querySelector(".cur");if(n){var r=e.clientHeight,i=n.offsetTop-r/2;this.scroller.scrollTo(i,t)}}},filters:{time:a.timestamp2timestr},created:function(){var t=this;this.$on("timeupdate",function(e){t.runner.timeUpdate(e),t.index=t.runner.curIndex(),t.scrollToCurrentLyric()}).$on("update",function(){t.runner.lrcUpdate(),t.$App.lrcFormat=t.runner.lrc.toString(),t.$App.lyricArray=t.lyricArray}).$on("prevlyric",function(){t.removeTimestamp(t.runner.lrc.lyrics.length-1)}).$on("nextlyric",function(){t.setTimestampText(0)})},mounted:function(){var t=this;this.scroller=new a.Scroller(this.$el),a.globalKeydown.on(["enter","escape"],function(){if(t.editing)return t.exitEdit(),!1}).on("arrowup",function(){if(t.editing)return t.$emit("prevlyric"),!1}).on("arrowdown",function(){if(t.editing)return t.$emit("nextlyric"),
!1})},watch:{editing:function(){this.editing||this.exitEdit()}},components:{Tmenu:l.default}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Runner=e.Lrc=e.LineParser=void 0;var i=n(61),o=r(i),a=n(62),s=r(a),u=n(63),c=r(u);e.LineParser=o.default,e.Lrc=s.default,e.Runner=c.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){n(this,t),this.type=t.TYPE.INVALID;try{var i=t.parseTags(e),o=r(i,2),a=o[0],s=o[1];t.TIME_REGEXP.test(a[0])?this.parseAsTime(a,s):t.INFO_REGEXP.test(a[0])?this.parseAsInfo(a[0]):this.type=t.TYPE.INVALID}catch(e){this.type=t.TYPE.INVALID}}return i(t,null,[{key:"parseTags",value:function(e){e=e.trim();var n=t.TAGS_REGEXP.exec(e),r=n[0],i=e.substr(r.length);return[r.slice(1,-1).split(/\]\s*\[/),i]}}]),i(t,[{key:"parseAsTime",value:function(e,n){var r=[];e.forEach(function(e){var n=t.TIME_REGEXP.exec(e),i=parseFloat(n[1]),o=parseFloat(n[2].replace(/\s+/g,"").replace(":","."));r.push(60*i+o)}),this.timestamps=r,this.content=n.trim(),this.type=t.TYPE.TIME}},{key:"parseAsInfo",value:function(e){var n=t.INFO_REGEXP.exec(e);this.key=n[1].trim(),this.value=n[2].trim(),this.type=t.TYPE.INFO}}]),t}();o.TAGS_REGEXP=/^(\[.+\])+/,o.INFO_REGEXP=/^\s*(\w+)\s*:(.*)$/,o.TIME_REGEXP=/^\s*(\d+)\s*:\s*(\d+(\s*[\.:]\s*\d+)?)\s*$/,o.TYPE={INVALID:0,INFO:1,TIME:2},e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(40),s=r(a),u=n(61),c=r(u),l=function(){function t(){i(this,t),this.info={},this.lyrics=[]}return o(t,[{key:"offset",value:function(t){this.lyrics.forEach(function(e){e.timestamp+=t,e.timestamp<0&&(e.timestamp=0)})}},{key:"toString",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.combine=!("combine"in e)||e.combine,e.lineFormat="lineFormat"in e?e.lineFormat:"\r\n",e.sort=!("sort"in e)||e.sort;var n=[],r={},i=[];for(var o in this.info)n.push("["+o+":"+this.info[o]+"]");if(e.combine){this.lyrics.forEach(function(t){t.content in r?r[t.content].push(t.timestamp):r[t.content]=[t.timestamp]});for(var a in r)e.sort&&r[a].sort(),i.push({timestamps:r[a],content:a});e.sort&&i.sort(function(t,e){return t.timestamps[0]-e.timestamps[0]}),i.forEach(function(e){n.push("["+e.timestamps.map(function(e){return t.timestampToString(e)}).join("][")+"]"+(e.content||""))})}else this.lyrics.forEach(function(e){n.push("["+t.timestampToString(e.timestamp)+"]"+(e.content||""))});return n.join(e.lineFormat)}}],[{key:"parse",value:function(t){var e=[],n={};t.split(/\r\n|[\n\r]/g).map(function(t){return new c.default(t)}).forEach(function(t){switch(t.type){case c.default.TYPE.INFO:n[t.key]=t.value;break;case c.default.TYPE.TIME:t.timestamps.forEach(function(n){e.push({timestamp:n,content:t.content})})}});var r=new this;return r.lyrics=e,r.info=n,r}},{key:"checkLyricObject",value:function(t){return s.default.object(t)&&"timestamp"in t&&s.default.number(t.timestamp)&&"content"in t&&s.default.string(t.content)}},{key:"padZero",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?2:arguments[1];for(s.default.number(t)&&(t=t.toString());t.split(".")[0].length<e;)t="0"+t;return t}},{key:"timestampToString",value:function(t){return this.padZero(parseInt(t/60))+":"+this.padZero((t%60).toFixed(2))}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(62),s=r(a),u=n(64),c=r(u),l=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?new s.default:arguments[0],n=arguments.length<=1||void 0===arguments[1]||arguments[1];i(this,t),this.offset=n,this._currentIndex=-1,this.setLrc(e)}return o(t,[{key:"setLrc",value:function(t){this.lrc=(0,c.default)(t),this.lrcUpdate()}},{key:"lrcUpdate",value:function(){this.offset&&this._offsetAlign(),this._sort()}},{key:"_offsetAlign",value:function(){if("offset"in this.lrc.info){var t=parseInt(this.lrc.info.offset)/1e3;isNaN(t)||(this.lrc.offset(t),delete this.lrc.info.offset)}}},{key:"_sort",value:function(){this.lrc.lyrics.sort(function(t,e){return t.timestamp-e.timestamp})}},{key:"timeUpdate",value:function(t){this._currentIndex>=this.lrc.lyrics.length?this._currentIndex=this.lrc.lyrics.length-1:this._currentIndex<-1&&(this._currentIndex=-1),this._currentIndex=this._findIndex(t,this._currentIndex)}},{key:"_findIndex",value:function(t,e){var n=e==-1?Number.NEGATIVE_INFINITY:this.lrc.lyrics[e].timestamp,r=e==this.lrc.lyrics.length-1?Number.POSITIVE_INFINITY:this.lrc.lyrics[e+1].timestamp;return t<n?this._findIndex(t,e-1):t===r?r===Number.POSITIVE_INFINITY?e:e+1:t>r?this._findIndex(t,e+1):e}},{key:"getInfo",value:function(){return this.lrc.info}},{key:"getLyrics",value:function(){return this.lrc.lyrics}},{key:"getLyric",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.curIndex():arguments[0];if(t>=0&&t<=this.lrc.lyrics.length-1)return this.lrc.lyrics[t];throw new Error("Index not exist")}},{key:"curIndex",value:function(){return this._currentIndex}},{key:"curLyric",value:function(){return this.getLyric()}}]),t}();e.default=l},function(t,e,n){(function(e){var n=function(){"use strict";function t(n,r,i,o){function s(n,i){if(null===n)return null;if(0==i)return n;var u,d;if("object"!=typeof n)return n;if(t.__isArray(n))u=[];else if(t.__isRegExp(n))u=new RegExp(n.source,a(n)),n.lastIndex&&(u.lastIndex=n.lastIndex);else if(t.__isDate(n))u=new Date(n.getTime());else{if(f&&e.isBuffer(n))return u=e.allocUnsafe?e.allocUnsafe(n.length):new e(n.length),n.copy(u),u;"undefined"==typeof o?(d=Object.getPrototypeOf(n),u=Object.create(d)):(u=Object.create(o),d=o)}if(r){var p=c.indexOf(n);if(p!=-1)return l[p];c.push(n),l.push(u)}for(var h in n){var v;d&&(v=Object.getOwnPropertyDescriptor(d,h)),v&&null==v.set||(u[h]=s(n[h],i-1))}return u}var u;"object"==typeof r&&(i=r.depth,o=r.prototype,u=r.filter,r=r.circular);var c=[],l=[],f="undefined"!=typeof e;return"undefined"==typeof r&&(r=!0),"undefined"==typeof i&&(i=1/0),s(n,i)}function n(t){return Object.prototype.toString.call(t)}function r(t){return"object"==typeof t&&"[object Date]"===n(t)}function i(t){return"object"==typeof t&&"[object Array]"===n(t)}function o(t){return"object"==typeof t&&"[object RegExp]"===n(t)}function a(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=n,t.__isDate=r,t.__isArray=i,t.__isRegExp=o,t.__getRegExpFlags=a,t}();"object"==typeof t&&t.exports&&(t.exports=n)}).call(e,n(43).Buffer)},function(t,e,n){n(66),n(68);var r=n(17)(n(70),n(76),"data-v-0bc1d85c",null);t.exports=r.exports},function(t,e,n){var r=n(67);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("006e083c",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"span[data-v-0bc1d85c]{position:relative}",""])},function(t,e,n){var r=n(69);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("dfb22360",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".menu{display:inline-block;position:relative}.menu ul{list-style-type:none;margin:0;padding:0}.menu ul li{white-space:nowrap;height:25px;line-height:25px;text-align:left;background-color:#fff;color:#2a72bb;cursor:pointer}.menu ul li:hover{color:#2a72bb;background-color:#e8e1e1}",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(71),o=r(i);e.default={data:function(){return{dir:!1}},components:{Tooltip:o.default}}},function(t,e,n){n(72);var r=n(17)(n(74),n(75),null,null);t.exports=r.exports},function(t,e,n){var r=n(73);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("1bc2ced5",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".tooltip .wrap{padding:8px;position:fixed;z-index:100;background-color:#fff;color:#2a72bb;border-radius:8px;box-shadow:.5px .5px 3px .5px #ccc}.tooltip .wrap .arrow{position:absolute;width:0;height:0;display:block;margin:auto}.tooltip .wrap .arrow.left{top:0;bottom:0;right:-16px;border:8px solid transparent;border-left:8px solid #fff}.tooltip .wrap .arrow.right{top:0;bottom:0;left:-16px;border:8px solid transparent;border-right:8px solid #fff}.tooltip .wrap .arrow.top{left:0;right:0;bottom:-16px;border:8px solid transparent;border-top:8px solid #fff}.tooltip .wrap .arrow.bottom{left:0;right:0;top:-16px;border:8px solid transparent;border-bottom:8px solid #fff}",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),o=n(41),a=r(o);e.default={data:function(){return{style:{top:0,left:0,visibility:"hidden"},show:!1,dir:!1}},props:{enterDelay:{type:Number,default:.1},leaveDelay:{type:Number,default:.5},target:{type:Element,default:null}},mounted:function(){var t=this,e=null!==this.target?this.target:this.$el,n=new i.TooltipPosition(e,this.$refs.wrap),r=10,o=new i.DelayHover(e,{enterDelay:this.enterDelay,leaveDelay:this.leaveDelay});o.hover(function(){var e=n.position();switch(t.dir=e.dir,t.dir){case"left":(0,a.default)(t.style,{top:e.rect.top+"px",left:e.rect.left-r+"px"});break;case"right":(0,a.default)(t.style,{top:e.rect.top+"px",left:e.rect.left+r+"px"});break;case"top":(0,a.default)(t.style,{top:e.rect.top-r+"px",left:e.rect.left+"px"});break;case"bottom":(0,a.default)(t.style,{top:e.rect.top+r+"px",left:e.rect.left+"px"});break;case!1:return}t.show=!0},function(){t.show=!1})},watch:{show:{immediate:!0,handler:function(){this.style.visibility=this.show?"visible":"hidden"}}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"tooltip"},[t._t("target"),t._v(" "),n("div",{ref:"wrap",staticClass:"wrap",style:t.style},[n("div",{class:"arrow "+t.dir}),t._v(" "),n("div",{staticClass:"content"},[t._t("content")],2)])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"menu",staticClass:"menu"},[n("tooltip",{attrs:{dir:t.dir,target:t.$refs.menu,"enter-delay":0}},[n("div",{attrs:{slot:"target"},slot:"target"},[t._t("target")],2),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[t._t("list")],2)])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editing?n("ul",{staticClass:"editing lyrics"},[t._l(t.runner.lrc.lyrics,function(e,r){return n("li",{class:{cur:r==t.index},attrs:{title:e.timestamp},on:{dblclick:function(e){t.edit(r)},contextmenu:function(e){e.preventDefault(),t.editMenu(r)}}},[t.editingIndex==r?[n("input",{directives:[{name:"model",rawName:"v-model",value:e.timestamp,expression:"lyric.timestamp"}],staticClass:"timestamp",attrs:{type:"text"},domProps:{value:e.timestamp},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.exitEdit(e):null},input:function(n){n.target.composing||t.$set(e,"timestamp",n.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"lyric.content"}],staticClass:"content",attrs:{type:"text"},domProps:{value:e.content},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.exitEdit(e):null},input:function(n){n.target.composing||t.$set(e,"content",n.target.value)}}})]:[n("div",{staticClass:"timestamp"},[t._v(t._s(t._f("time")(e.timestamp)))]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),n("div",{staticClass:"icon-btn conceal"},[n("tmenu",[n("div",{attrs:{slot:"target"},slot:"target"},[n("i",{staticClass:"icon-ellipsis-vert"})]),t._v(" "),n("ul",{attrs:{slot:"list"},slot:"list"},[n("li",{on:{click:function(e){t.removeTimestamp(r)}}},[n("i",{staticClass:"icon-cancel"}),t._v(" "+t._s(t.$t("lyric_editor.remove_timestamp"))+"\n            ")]),t._v(" "),n("li",{on:{click:function(e){t.edit(r)}}},[n("i",{staticClass:"icon-edit"}),t._v(" "+t._s(t.$t("lyric_editor.edit"))+"\n            ")]),t._v(" "),n("li",{on:{click:function(e){t.insert(r)}}},[n("i",{staticClass:"icon-plus"}),t._v(" "+t._s(t.$t("lyric_editor.add"))+"\n            ")]),t._v(" "),n("li",{on:{click:function(e){t.remove(r)}}},[n("i",{staticClass:"icon-trash"}),t._v(" "+t._s(t.$t("lyric_editor.remove"))+"\n            ")])])])],1)]],2)}),t._v(" "),t.lyricArray.length?n("li",{staticClass:"division"},[t._v(t._s(t.$t("lyric_editor.following_unsorted")))]):t._e(),t._v(" "),t._l(t.lyricArray,function(e,r){return n("li",{staticClass:"unsorted",attrs:{"track-by":"i"},on:{dblclick:function(e){t.editText(r)},contextmenu:function(e){e.preventDefault(),t.editMenu(r)}}},[t.editingTextIndex==r?[n("input",{directives:[{name:"model",rawName:"v-model",value:t.lyricArray[r],expression:"lyricArray[i]"}],staticClass:"content",attrs:{type:"text"},domProps:{value:t.lyricArray[r]},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.exitEdit(e):null},input:function(e){e.target.composing||t.$set(t.lyricArray,r,e.target.value)}}})]:[n("div",{staticClass:"content"},[t._v(t._s(e))]),t._v(" "),n("div",{staticClass:"icon-btn conceal"},[n("tmenu",[n("div",{attrs:{slot:"target"},slot:"target"},[n("i",{staticClass:"icon-ellipsis-vert"})]),t._v(" "),n("ul",{attrs:{slot:"list"},slot:"list"},[n("li",{on:{click:function(e){t.editText(r)}}},[n("i",{staticClass:"icon-edit"}),t._v(" "+t._s(t.$t("lyric_editor.edit"))+"\n            ")]),t._v(" "),n("li",{on:{click:function(e){t.insertText(r)}}},[n("i",{staticClass:"icon-plus"}),t._v(" "+t._s(t.$t("lyric_editor.add"))+"\n            ")]),t._v(" "),n("li",{on:{click:function(e){t.removeText(r)}}},[n("i",{staticClass:"icon-trash"}),t._v(" "+t._s(t.$t("lyric_editor.remove"))+"\n            ")])])])],1)]],2)})],2):n("ul",{staticClass:"lyrics"},[t._l(t.runner.lrc.lyrics,function(e,r){return n("li",{class:{cur:r==t.index},attrs:{title:e.timestamp},on:{click:function(n){t.playto(e.timestamp)}}},[t._v("\n    "+t._s(e.content)+"\n  ")])}),t._v(" "),t.lyricArray.length?n("li",{staticClass:"division"},[t._v(t._s(t.$t("lyric_editor.following_unsorted")))]):t._e(),t._v(" "),t._l(t.lyricArray,function(e,r){return n("li",{staticClass:"unsorted",attrs:{"track-by":"i"}},[t._v("\n    "+t._s(e)+"\n  ")])})],2)},staticRenderFns:[]}},function(t,e,n){n(79),n(81);var r=n(17)(n(83),n(98),"data-v-72d29e70",null);t.exports=r.exports},function(t,e,n){var r=n(80);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("31657c49",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,'.modal .footer .btn-group[data-v-72d29e70]:after,.modal .header[data-v-72d29e70]:after{content:" ";display:table;clear:both}.cover[data-v-72d29e70]{position:fixed;top:0;left:0;background-color:rgba(0,0,0,.7);width:100%;height:100%;z-index:1000;overflow:auto}.modal[data-v-72d29e70]{position:relative;margin:30px auto;background:#fff;border-radius:8px;overflow:hidden}.modal.lg[data-v-72d29e70]{width:50%}.modal.md[data-v-72d29e70]{width:70%}.modal.sm[data-v-72d29e70]{width:90%}.modal .body[data-v-72d29e70],.modal .footer[data-v-72d29e70],.modal .header[data-v-72d29e70]{padding-left:14px;padding-right:14px}.modal .body[data-v-72d29e70],.modal .header[data-v-72d29e70]{padding-top:14px;padding-bottom:14px}.modal .footer[data-v-72d29e70],.modal .header[data-v-72d29e70]{color:#2a72bb}.modal .header[data-v-72d29e70]{border-bottom:1px solid #e5e5e5;font-weight:bolder}.modal .header .icon-cancel[data-v-72d29e70]{float:right;cursor:pointer}.modal .footer[data-v-72d29e70]{border-top:1px solid #e5e5e5}.modal .footer .btn-group .btn[data-v-72d29e70]{float:right;border-radius:0;background-color:transparent;color:#2a72bb;padding:8px 10px}.modal .footer .btn-group .btn[data-v-72d29e70]:hover{background-color:rgba(0,0,0,.1)}',""])},function(t,e,n){var r=n(82);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("7749d2c6",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".modal h3{margin:10px 0}.modal textarea{width:100%;border:1px solid #d6d6d6;border-radius:5px;min-height:300px;margin:10px 0}.modal p{margin:0}",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(1),a=r(o),s=n(32),u=n(84),c=r(u),l=n(89),f=r(l),d=n(92),p=r(d),h=n(95),v=r(h),m={help:c.default,"lrc-format-upload":f.default,"lyric-upload":p.default,"lrc-save":v.default};window.MC=[],e.default={data:function(){return{title:"Modal",size:"md",confirm:!1,modalName:"",modalComponent:null,isShow:!1,coverShow:!1}},methods:{show:function(t){var e=this;return this.isShow=!0,this.coverShow=!0,this.$nextTick(function(){e.modalName=t,e.modalComponent=new a.default(i({},m[e.modalName])),e.modalComponent.$mount(e.$refs.modalWrapper),e.modalComponent.title&&(e.title=e.modalComponent.title),e.modalComponent.size&&(e.title=e.modalComponent.size),e.modalComponent.confirm&&(e.confirm=e.modalComponent.confirm)}),this},ok:function(){this.isShow=!1,this.modalComponent.$emit("ok"),this.modalComponent.$destroy()},cancel:function(){this.isShow=!1,this.modalComponent.$emit("cancel"),this.modalComponent.$destroy()}},mounted:function(){var t=this;s.globalKeydown.on("escape",function(){t.isShow&&t.cancel()})},components:{Help:c.default,LrcFormatUpload:f.default,LyricUpload:p.default,LrcSave:v.default}}},function(t,e,n){n(85);var r=n(17)(n(87),n(88),"data-v-a65836da",null);t.exports=r.exports},function(t,e,n){var r=n(86);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("5fcdf4e2",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".help[data-v-a65836da]{color:#333}.help a[data-v-a65836da],.help h3[data-v-a65836da],.help h4[data-v-a65836da]{color:#2a72bb}.help h3[data-v-a65836da]{margin:5px 0}.help h4[data-v-a65836da]{margin:0}.help a[data-v-a65836da]{font-weight:bolder}.help ul[data-v-a65836da]{list-style-type:none;padding:0 0 0 20px}",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(47),o=r(i);e.default={data:function(){return{PKG:o.default,title:this.$t("modal.help.title")}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"help"},[n("h3",[t._v(t._s(t.$t("modal.help.shortcut_key")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("modal.help.play_control.title")))]),t._v(" "),n("ul",[n("li",[n("strong",[t._v(t._s(t.$t("modal.help.play_control.left_key"))+":")]),t._v(" "+t._s(t.$t("modal.help.play_control.backward")))]),t._v(" "),n("li",[n("strong",[t._v(t._s(t.$t("modal.help.play_control.right_key"))+":")]),t._v(" "+t._s(t.$t("modal.help.play_control.forward")))])]),t._v(" "),n("h4",[t._v(t._s(t.$t("modal.help.make_lrc.title")))]),t._v(" "),n("ul",[n("li",[n("strong",[t._v(t._s(t.$t("modal.help.make_lrc.up_key"))+":")]),t._v(" "+t._s(t.$t("modal.help.make_lrc.prev_lyric")))]),t._v(" "),n("li",[n("strong",[t._v(t._s(t.$t("modal.help.make_lrc.down_key"))+":")]),t._v(" "+t._s(t.$t("modal.help.make_lrc.next_lyric")))])]),t._v(" "),n("div",{staticClass:"link"},[n("a",{attrs:{href:t.PKG.homepage,target:"_blank"}},[t._v(t._s(t.$t("modal.help.source_code"))+": github")])])])},staticRenderFns:[]}},function(t,e,n){var r=n(17)(n(90),n(91),null,null);t.exports=r.exports},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),o=r(i);e.default={data:function(){return{title:this.$t("modal.lrc_format_upload.title"),lyric:"",confirm:!0}},created:function(){var t=this;this.lyric=this.$App.lrcFormat,this.$on("ok",function(){t.$App.lrcFormat=t.lyric})},methods:{upload:function(t){this.lyric=t}},components:{Upload:o.default}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v(t._s(t.$t("modal.lrc_format_upload.description")))]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.lyric,expression:"lyric"}],domProps:{value:t.lyric},on:{input:function(e){e.target.composing||(t.lyric=e.target.value)}}}),t._v(" "),n("upload",{staticClass:"btn",on:{upload:t.upload}},[t._v(t._s(t.$t("modal.lrc_format_upload.upload")))])],1)},staticRenderFns:[]}},function(t,e,n){var r=n(17)(n(93),n(94),null,null);t.exports=r.exports},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),o=r(i),a=n(53),s=r(a);e.default={data:function(){return{title:this.$t("modal.lyric_upload.title"),lyric:s.default.lyric,confirm:!0}},created:function(){var t=this;this.$on("ok",function(){t.$App.lyricArray=t.lyric.split(/\r\n|[\n\r]/g)})},methods:{upload:function(t){this.lyric=t}},watch:{lyric:function(t){s.default.lyric=t}},components:{Upload:o.default}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v(t._s(t.$t("modal.lyric_upload.description")))]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.lyric,expression:"lyric"}],domProps:{value:t.lyric},on:{input:function(e){e.target.composing||(t.lyric=e.target.value)}}}),t._v(" "),n("upload",{staticClass:"btn",on:{upload:t.upload}},[t._v(t._s(t.$t("modal.lyric_upload.upload")))])],1)},staticRenderFns:[]}},function(t,e,n){var r=n(17)(n(96),n(97),null,null);t.exports=r.exports},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),o=n(53),a=r(o),s=n(47),u=r(s);e.default={data:function(){return{title:this.$t("modal.lrc_format_save.title"),lyric:"",userName:a.default.userName,saveOptions:{combine:!0,lineFormat:"\r\n",sort:!0},infoFields:[{key:"ti",label:this.$t("modal.lrc_format_save.fields.song_title")},{key:"ar",label:this.$t("modal.lrc_format_save.fields.artist")},{key:"al",label:this.$t("modal.lrc_format_save.fields.album")},{key:"au",label:this.$t("modal.lrc_format_save.fields.songtext_creator")}],info:{}}},mounted:function(){var t=this;this.runner=this.$App.runner;var e=this.$App.$refs.player,n={};this.infoFields.forEach(function(e){e.key in t.runner.lrc.info?n[e.key]=t.runner.lrc.info[e.key]:n[e.key]=""}),e.duration&&(n.length=(0,i.timestamp2timestr)(e.duration)),this.userName&&(n.by=this.userName),n.re=u.default.name+" ("+u.default.onlinePage+")",n.ve=u.default.version,this.info=n,this.lyricUpdate()},methods:{save:function(){(0,i.saveLrc)(this.runner.lrc.toString(this.saveOptions),this.runner.lrc.info.ti||"lyric")},infoUpdate:function(){for(var t in this.info)0!==this.info[t].length?this.runner.lrc.info[t]=this.info[t]:delete this.runner.lrc.info[t];this.lyricUpdate()},lyricUpdate:function(){this.lyric=this.runner.lrc.toString(this.saveOptions)}},watch:{userName:function(t){this.$set(this.info,"by",t),a.default.userName=t},lyric:function(){this.$App.lrcFormat=this.lyric},saveOptions:{deep:!0,handler:function(){this.lyricUpdate()}},info:{deep:!0,handler:function(){this.infoUpdate()}}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v(t._s(t.$t("modal.lrc_format_save.info_title")))]),t._v(" "),t._l(t.infoFields,function(e){return e.label?n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"info-"+e.key},domProps:{textContent:t._s(e.label)}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info[e.key],expression:"info[field.key]"}],attrs:{id:"info-"+e.key,type:"text"},domProps:{value:t.info[e.key]},on:{input:function(n){n.target.composing||t.$set(t.info,e.key,n.target.value)}}})]):t._e()}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"info-by"}},[t._v(t._s(t.$t("modal.lrc_format_save.fields.lrc_creator")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{id:"info-by",type:"text"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),n("h3",[t._v(t._s(t.$t("modal.lrc_format_save.save_title")))]),t._v(" "),n("textarea",[t._v(t._s(t.lyric))]),t._v(" "),n("label",[t._v("\n    "+t._s(t.$t("modal.lrc_format_save.combine"))+"\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.saveOptions.combine,expression:"saveOptions.combine"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.saveOptions.combine)?t._i(t.saveOptions.combine,null)>-1:t.saveOptions.combine},on:{change:function(e){var n=t.saveOptions.combine,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&t.$set(t.saveOptions,"combine",n.concat([o])):a>-1&&t.$set(t.saveOptions,"combine",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.saveOptions,"combine",i)}}})]),t._v(" "),n("div",{staticClass:"btn",on:{click:t.save}},[n("i",{staticClass:"icon-download"}),t._v(" "+t._s(t.$t("modal.lrc_format_save.download"))+"\n  ")])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{cover:t.coverShow},on:{click:t.cancel}},[n("transition",{attrs:{name:"modal"},on:{"after-leave":function(e){t.coverShow=!1}}},[t.isShow?n("div",{staticClass:"modal",class:[t.size],on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"header"},[t._v("\n        "+t._s(t.title)+"\n        "),n("i",{staticClass:"icon-cancel",on:{click:t.cancel}})]),t._v(" "),n("div",{staticClass:"body"},[n("div",{ref:"modalWrapper"})]),t._v(" "),n("div",{staticClass:"footer"},[t.confirm?n("div",{staticClass:"btn-group"},[n("div",{staticClass:"btn",on:{click:t.ok}},[t._v(t._s(t.$t("modal.button.ok")))]),t._v(" "),n("div",{staticClass:"btn",on:{click:t.cancel}},[t._v(t._s(t.$t("modal.button.cancel")))])]):t._e()])]):t._e()])],1)},staticRenderFns:[]}},function(t,e,n){n(100),n(102);var r=n(17)(n(104),n(105),"data-v-a3733660",null);t.exports=r.exports},function(t,e,n){var r=n(101);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("1c3b5d85",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".target[data-v-a3733660]{position:relative;display:block;margin:-8px;padding:8px}",""])},function(t,e,n){var r=n(103);"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);n(15)("1b692471",r,!0)},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".nav-menu .wrap{position:absolute;z-index:100;box-shadow:4px 4px 3px -2px #ccc}.nav-menu .wrap ul{list-style-type:none;padding:0;margin:0;background-color:#215991}.nav-menu .wrap ul li{padding:0 5px;cursor:pointer;line-height:30px;font-size:12px}.nav-menu .wrap ul li:hover{background-color:#173f68}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32);e.default={data:function(){return{dir:!1,style:{top:0,left:0},show:!1}},props:{enterDelay:{type:Number,default:.1},leaveDelay:{type:Number,default:.5}},mounted:function(){var t=this,e=this.$refs.menu,n=new r.DelayHover(e,{enterDelay:this.enterDelay,leaveDelay:this.leaveDelay});n.hover(function(){t.show=!0},function(){t.show=!1});var i=this.$el;this.style.top=i.style.clientHeight}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"menu",staticClass:"nav-menu"},[n("span",{staticClass:"target"},[t._t("target")],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"wrap",style:t.style},[t._t("list")],2)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("header",[n("div",{staticClass:"left"},[n("nav-menu",{staticClass:"menu-item",attrs:{title:t.$t("button.upload")}},[n("div",{attrs:{slot:"target"},slot:"target"},[n("i",{staticClass:"icon-upload"})]),t._v(" "),n("ul",{attrs:{slot:"list"},slot:"list"},[n("li",{on:{click:function(e){t.$refs.modals.show("lrc-format-upload")}}},[n("i",{staticClass:"icon-upload"}),t._v(" "+t._s(t.$t("menu.upload.lrc"))+"\n          ")]),t._v(" "),n("li",{on:{click:function(e){t.$refs.modals.show("lyric-upload")}}},[n("i",{staticClass:"icon-upload"}),t._v(" "+t._s(t.$t("menu.upload.lyric"))+"\n          ")]),t._v(" "),n("li",[n("upload",{attrs:{accept:"audio/*","read-format":"url"},on:{upload:t.uploadMusic}},[t._v(t._s(t.$t("menu.upload.music")))])],1)])]),t._v(" "),n("div",{staticClass:"menu-item",attrs:{title:t.$t("button.save")},on:{click:function(e){t.$refs.modals.show("lrc-save")}}},[n("i",{staticClass:"icon-save"})])],1),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"menu-item",attrs:{title:t.editing?t.$t("button.close_edit"):t.$t("button.open_edit")},on:{click:function(e){t.editing=!t.editing}}},[t.editing?[n("i",{staticClass:"icon-cancel"})]:[n("i",{staticClass:"icon-edit"})]],2),t._v(" "),n("div",{staticClass:"menu-item",attrs:{title:t.$t("button.help")},on:{click:function(e){t.$refs.modals.show("help")}}},[n("i",{staticClass:"icon-help-circled"})])])]),t._v(" "),n("player",{ref:"player",attrs:{src:t.musicUrl},on:{timeupdate:t.timeupdate}}),t._v(" "),n("lyric-editor",{ref:"lyric",staticClass:"lyric-editor",attrs:{editing:t.editing,runner:t.runner,"lyric-array":t.lyricArray,playto:t.playto}},[t._v("\n    lyric editor\n  ")]),t._v(" "),n("footer",[n("div",{staticClass:"left"},[n("div",{staticClass:"menu-item",on:{click:t.removeLyric}},[n("i",{staticClass:"icon-trash"}),t._v(" "+t._s(t.$t("button.remove_lyric"))+"\n      ")])]),t._v(" "),t.editing?n("div",{staticClass:"right"},[n("div",{staticClass:"menu-item",attrs:{title:"[UP]"},on:{click:function(e){t.$refs.lyric.$emit("prevlyric")}}},[t._v(t._s(t.$t("button.prev_lyric")))]),t._v(" "),n("div",{staticClass:"menu-item",attrs:{title:"[DOWN]"},on:{click:function(e){t.$refs.lyric.$emit("nextlyric")}}},[t._v(t._s(t.$t("button.next_lyric")))])]):t._e()]),t._v(" "),n("modals",{ref:"modals"})],1)},staticRenderFns:[]}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),o=r(i),a=n(108),s=r(a),u=n(109),c=r(u),l=(navigator.language||navigator.userLanguage||"en").toLocaleLowerCase();l in c.default||l.indexOf("-")>=0&&(l=l.split("-")[0]),
o.default.use(s.default),o.default.config.lang=l,o.default.locale(l,c.default[l])},function(t,e,n){(function(e){/*!
	 * vue-i18n v5.0.3 
	 * (c) 2017 kazuya kawaguchi
	 * Released under the MIT License.
	 */
"use strict";function n(t,e){window.console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}function r(t,e,n){if("object"==typeof e)n(e);else{var r=e.call(this);if("function"==typeof r)if(r.resolved)n(r.resolved);else if(r.requested)r.pendingCallbacks.push(n);else{r.requested=!0;var o=r.pendingCallbacks=[n];r(function(t){r.resolved=t;for(var e=0,n=o.length;e<n;e++)o[e](t)},function(){n()})}else i(r)&&r.then(function(t){n(t)},function(){n()}).catch(function(t){console.error(t),n()})}}function i(t){return t&&"function"==typeof t.then}function o(t){if(!b){var e=t.$watch("__watcher__",function(t){});b=t._watchers[0].constructor,e()}return b}function a(t){return!w&&t&&t._data&&t._data.__ob__&&t._data.__ob__.dep&&(w=t._data.__ob__.dep.constructor),w}function s(t){return null===t||void 0===t}function u(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function c(t){return null!==t&&"object"==typeof t}function l(t){return k.call(t)===O}function f(t,e){return C.call(t,e)}function d(t){return X.test(t)}function p(t){var e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e!==n||34!==e&&39!==e?t:t.slice(1,-1)}function h(t){if(void 0===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:case 48:return t;case 95:case 36:case 45:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return e>=97&&e<=122||e>=65&&e<=90?"ident":e>=49&&e<=57?"number":"else"}function v(t){var e=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(d(e)?p(e):"*"+e)}function m(t){function e(){var e=t[l+1];if(f===z&&"'"===e||f===Y&&'"'===e)return l++,r="\\"+e,p[F](),!0}var n,r,i,o,a,s,u,c=[],l=-1,f=R,d=0,p=[];for(p[j]=function(){void 0!==i&&(c.push(i),i=void 0)},p[F]=function(){void 0===i?i=r:i+=r},p[I]=function(){p[F](),d++},p[L]=function(){if(d>0)d--,f=B,p[F]();else{if(d=0,i=v(i),i===!1)return!1;p[j]()}};null!=f;)if(l++,n=t[l],"\\"!==n||!e()){if(o=h(n),u=Z[f],a=u[o]||u.else||W,a===W)return;if(f=a[0],s=p[a[1]],s&&(r=a[2],r=void 0===r?n:r,s()===!1))return;if(f===H)return c.raw=t,c}}function y(t){var e=P[t];return e||(e=m(t),e&&(P[t]=e)),e}function g(t,r){void 0===r&&(r={});var i=t.version&&Number(t.version.split(".")[0])||-1;if("production"!==e.env.NODE_ENV&&g.installed)return void n("already installed.");if("production"!==e.env.NODE_ENV&&i<2)return void n("vue-i18n ("+g.version+") need to use Vue 2.0 or later (Vue: "+t.version+").");var o="en";_(t,o),E(t,q),A(t,q),T(t,q,o),K(t)}function _(t,e){var n=t.config.silent;t.config.silent=!0,q||(q=new t({data:{lang:e,locales:{}}})),t.config.silent=n}var b,w,x,E=function(t,e){t.locale=function(t,i,o){return void 0===i?e.locales[t]:void(null===i?(e.locales[t]=void 0,delete e.locales[t]):r(t,i,function(r){r?e.$set(e.locales,t,r):n("failed set `"+t+"` locale"),o&&o()}))}},A=function(t,e){var n=t.prototype._init;t.prototype._init=function(t){var r=this;n.call(this,t),this.$parent||(this._$lang=e,this._langUnwatch=this._$lang.$watch("$data",function(t,e){r.$forceUpdate()},{deep:!0}))};var r=t.prototype._destroy;t.prototype._destroy=function(){!this.$parent&&this._langUnwatch&&(this._langUnwatch(),this._langUnwatch=null,this._$lang=null),r.apply(this,arguments)}},k=Object.prototype.toString,O="[object Object]",C=Object.prototype.hasOwnProperty,$=null,D=null,T=function(t,e,n){function r(t,e){var n=new i(e,t,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),s&&s.target&&n.depend(),n.value}}var i=o(e),s=a(e);Object.defineProperty(t.config,"lang",{enumerable:!0,configurable:!0,get:r(function(){return e.lang},e),set:u(function(t){e.lang=t},e)}),x=n,Object.defineProperty(t.config,"fallbackLang",{enumerable:!0,configurable:!0,get:function(){return x},set:function(t){x=t}}),Object.defineProperty(t.config,"missingHandler",{enumerable:!0,configurable:!0,get:function(){return $},set:function(t){$=t}}),Object.defineProperty(t.config,"i18nFormatter",{enumerable:!0,configurable:!0,get:function(){return D},set:function(t){D=t}})},N=/(%|)\{([0-9a-zA-Z_]+)\}/g,S=function(t){function e(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return e=1===e.length&&"object"==typeof e[0]?e[0]:{},e&&e.hasOwnProperty||(e={}),t.replace(N,function(n,r,i,o){var a;return"{"===t[o-1]&&"}"===t[o+n.length]?i:(a=f(e,i)?e[i]:n,s(a)?"":a)})}return e},P=Object.create(null),F=0,j=1,I=2,L=3,R=0,M=1,U=2,V=3,B=4,z=5,Y=6,H=7,W=8,Z=[];Z[R]={ws:[R],ident:[V,F],"[":[B],eof:[H]},Z[M]={ws:[M],".":[U],"[":[B],eof:[H]},Z[U]={ws:[U],ident:[V,F],0:[V,F],number:[V,F]},Z[V]={ident:[V,F],0:[V,F],number:[V,F],ws:[M,j],".":[U,j],"[":[B,j],eof:[H,j]},Z[B]={"'":[z,F],'"':[Y,F],"[":[B,I],"]":[M,L],eof:W,else:[B,F]},Z[z]={"'":[B,F],eof:W,else:[z,F]},Z[Y]={'"':[B,F],eof:W,else:[Y,F]};var q,X=/^\s?(true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/,G=function(t){function e(t){if(null===t||void 0===t)return!0;if(Array.isArray(t)){if(t.length>0)return!1;if(0===t.length)return!0}else if(l(t))for(var e in t)if(f(t,e))return!1;return!0}function n(t,n){if(!c(t))return null;var r=y(n);if(e(r))return null;for(var i=r.length,o=null,a=t,s=0;s<i;){var u=a[r[s]];if(void 0===u){a=null;break}a=u,s++}return o=a}return n},K=function(t){function r(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=t.config.lang,i=t.config.fallbackLang;return 1===e.length?c(e[0])||Array.isArray(e[0])?e=e[0]:"string"==typeof e[0]&&(r=e[0]):2===e.length&&("string"==typeof e[0]&&(r=e[0]),(c(e[1])||Array.isArray(e[1]))&&(e=e[1])),{lang:r,fallback:i,params:e}}function i(t,e){return!(!t||!e)&&!s(y(t,e))}function o(e,r,i){if(!e)return null;var a=y(e,r);if(Array.isArray(a))return a;if(s(a)&&(a=e[r]),s(a))return null;if("string"!=typeof a)return n("Value of key '"+r+"' is not a string!"),null;if(a.indexOf("@:")>=0){var u=a.match(/(@:[\w|.]+)/g);for(var c in u){var l=u[c],f=l.substr(2),d=o(e,f,i);a=a.replace(l,d)}}return i?t.config.i18nFormatter?t.config.i18nFormatter.apply(null,[a].concat(i)):m(a,i):a}function a(t,r,i,a,u){var c=null;return c=o(t(r),a,u),s(c)?(c=o(t(i),a,u),s(c)?null:("production"!==e.env.NODE_ENV&&n('Fall back to translate the keypath "'+a+'" with "'+i+'" language.'),c)):c}function l(r,i,o,a){return s(a)?(t.config.missingHandler?t.config.missingHandler.apply(null,[r,i,o]):"production"!==e.env.NODE_ENV&&n('Cannot translate the value of keypath "'+i+'". Use the value of keypath as default'),i):a}function f(e){return t.locale(e)}function d(t){return this.$options.locales[t]}function p(t){return t?t>1?1:0:1}function h(t,e){return t=Math.abs(t),2===e?p(t):t?Math.min(t,2):0}function v(t,e){if(!t&&"string"!=typeof t)return null;var n=t.split("|");return e=h(e,n.length),n[e]?n[e].trim():t}var m=S(t),y=G(t);return t.t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!t)return"";var i=r.apply(void 0,e),o=i.lang,s=i.fallback,u=i.params;return l(o,t,null,a(f,o,s,t,u))},t.tc=function(e,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];return v(t.t.apply(t,[e].concat(r)),n)},t.te=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var o=r.apply(void 0,e),a=o.lang;return i(f(a),t)},t.prototype.$t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!t)return"";var i=r.apply(void 0,e),o=i.lang,s=i.fallback,c=i.params,p=null;return this.$options.locales&&(p=a(u(d,this),o,s,t,c))?p:l(o,t,this,a(f,o,s,t,c))},t.prototype.$tc=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return"number"!=typeof e&&"undefined"!=typeof e?t:v((i=this).$t.apply(i,[t].concat(n)),e);var i},t.prototype.$te=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var o=r.apply(void 0,e),a=o.lang,s=!1;return this.$options.locales&&(s=i(u(d)(a),t)),s||(s=i(f(a),t)),s},t.mixin({computed:{$lang:function(){return t.config.lang}}}),t};g.version="__VERSION__","undefined"!=typeof window&&window.Vue&&window.Vue.use(g),t.exports=g}).call(e,n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};["en","zh"].forEach(function(t){r[t]=n(110)("./"+t)}),e.default=r},function(t,e,n){function r(t){return n(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./en":111,"./en.yml":111,"./index":109,"./index.js":109,"./zh":112,"./zh.yml":112};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=110},function(t,e){t.exports={button:{upload:"upload",save:"save",close_edit:"close edit",open_edit:"open edit",help:"help",lrc_info:"info",remove_lyric:"remove lyric",prev_lyric:"prev lyric",next_lyric:"next lyric"},menu:{upload:{lrc:"LRC format lyric",lyric:"lyric text",music:"music"}},modal:{lrc_format_save:{title:"Lyrics Save",info_title:"Lyrics Info",fields:{song_title:"Sone Title",artist:"Artist",album:"Album",songtext_creator:"Songtext Creator",lrc_creator:"LRC Creator"},save_title:"Lyrics",combine:"combine lyrics",download:"lyrics file download"},lrc_format_upload:{title:"Upload LRC Format",description:"Upload timestamped lyrics",upload:"Read from file"},lyric_upload:{title:"Upload Text Lyrics",description:"Plain Text lyrics, lyrics divided by a newline",upload:"Read from file"},help:{title:"Help",shortcut_key:"shortcut key",play_control:{title:"play control",left_key:"<Left>",right_key:"<Right>",backward:"backward",forward:"forward"},make_lrc:{title:"make lrc",up_key:"<Up>",down_key:"<Down>",prev_lyric:"prev lyric",next_lyric:"next lyric"},source_code:"source code"},button:{ok:"ok",cancel:"cancel"}},lyric_editor:{edit:"edit",add:"add",remove:"remove",remove_timestamp:"remove timestamp",play_to_this_lyric:"play to this lyric",following_unsorted:"The following unsorted"}}},function(t,e){t.exports={button:{upload:"",save:"",close_edit:"",open_edit:"",help:"",lrc_info:"",remove_lyric:"",prev_lyric:"",next_lyric:""},menu:{upload:{lrc:"LRC",lyric:"",music:""}},modal:{lrc_format_save:{title:"",info_title:"",fields:{song_title:"",artist:"",album:"",songtext_creator:"",lrc_creator:"LRC "},save_title:"",combine:"",download:""},lrc_format_upload:{title:"LRC",description:"",upload:""},lyric_upload:{title:"",description:"",upload:""},help:{title:"",shortcut_key:"",play_control:{title:"",left_key:"<Left>",right_key:"<Right>",backward:"",forward:""},make_lrc:{title:"",up_key:"<Up>",down_key:"<Down>",prev_lyric:"",next_lyric:""},source_code:""},button:{ok:"",cancel:""}},lyric_editor:{edit:"",add:"",remove:"",remove_timestamp:"",play_to_this_lyric:"",following_unsorted:""}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbWFpbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMDYxZDczM2E2MWZlNWI1ZjkwZmEiLCJ3ZWJwYWNrOi8vLy4vbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi4vfi92dWUvZGlzdC92dWUucnVudGltZS5jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uLi9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy4uL34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvaW5kZXgudnVlIiwid2VicGFjazovLy8uL2FwcC9pbmRleC52dWU/NzBjNSIsIndlYnBhY2s6Ly8vLi9hcHAvaW5kZXgudnVlPzVhNjUiLCJ3ZWJwYWNrOi8vLy4uL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3Nhc3MvZm9udGVsbG8vY3NzL2ZvbnRlbGxvLmNzcyIsIndlYnBhY2s6Ly8vLi9hcHAvc2Fzcy9mb250ZWxsby9mb250L2ZvbnRlbGxvLmVvdCIsIndlYnBhY2s6Ly8vLi9hcHAvc2Fzcy9mb250ZWxsby9mb250L2ZvbnRlbGxvLndvZmYyIiwid2VicGFjazovLy8uL2FwcC9zYXNzL2ZvbnRlbGxvL2ZvbnQvZm9udGVsbG8ud29mZiIsIndlYnBhY2s6Ly8vLi9hcHAvc2Fzcy9mb250ZWxsby9mb250L2ZvbnRlbGxvLnR0ZiIsIndlYnBhY2s6Ly8vLi9hcHAvc2Fzcy9mb250ZWxsby9mb250L2ZvbnRlbGxvLnN2ZyIsIndlYnBhY2s6Ly8vLi4vfi92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4uL34vdnVlLXN0eWxlLWxvYWRlci9saWIvbGlzdFRvU3R5bGVzLmpzIiwid2VicGFjazovLy8uLi9+L3Z1ZS1sb2FkZXIvbGliL2NvbXBvbmVudC1ub3JtYWxpemVyLmpzIiwid2VicGFjazovLy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vYXBwL3VwbG9hZC52dWUiLCJ3ZWJwYWNrOi8vLy4vYXBwL3VwbG9hZC52dWU/ZmNjMyIsIndlYnBhY2s6Ly8vLi9hcHAvdXBsb2FkLnZ1ZT9lOTgwIiwid2VicGFjazovLy91cGxvYWQudnVlIiwid2VicGFjazovLy8uL2FwcC91cGxvYWQudnVlPzVhNTUiLCJ3ZWJwYWNrOi8vLy4vYXBwL3BsYXllci52dWUiLCJ3ZWJwYWNrOi8vLy4vYXBwL3BsYXllci52dWU/NGMxZCIsIndlYnBhY2s6Ly8vLi9hcHAvcGxheWVyLnZ1ZT9jMDhlIiwid2VicGFjazovLy9wbGF5ZXIudnVlIiwid2VicGFjazovLy8uL2FwcC9yYW5nZS52dWUiLCJ3ZWJwYWNrOi8vLy4vYXBwL3JhbmdlLnZ1ZT9kOGJlIiwid2VicGFjazovLy8uL2FwcC9yYW5nZS52dWU/MmExZSIsIndlYnBhY2s6Ly8vcmFuZ2UudnVlIiwid2VicGFjazovLy8uL3V0aWxzLmpzIiwid2VicGFjazovLy8uLi9+L2V2ZW50ZW1pdHRlcjIvbGliL2V2ZW50ZW1pdHRlcjIuanMiLCJ3ZWJwYWNrOi8vLy4uL34vZmlsZXNhdmVyLmpzL0ZpbGVTYXZlci5qcyIsIndlYnBhY2s6Ly8vLi4vfi93ZWJwYWNrL2J1aWxkaW4vYW1kLWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vLi4vfi93ZWJwYWNrL2J1aWxkaW4vYW1kLW9wdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4uL34vdW5pZHJhZ2dlci91bmlkcmFnZ2VyLmpzIiwid2VicGFjazovLy8uLi9+L3VuaXBvaW50ZXIvdW5pcG9pbnRlci5qcyIsIndlYnBhY2s6Ly8vLi4vfi9ldi1lbWl0dGVyL2V2LWVtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4uL34vaXNfanMvaXMuanMiLCJ3ZWJwYWNrOi8vLy4uL34vZXh0ZW5kL2luZGV4LmpzIiwid2VicGFjazovLy8uLi9+L2Nsb25lL2Nsb25lLmpzIiwid2VicGFjazovLy8uLi9+L2J1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vfi9iYXNlNjQtanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4uL34vaWVlZTc1NC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vfi9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uLi9wYWNrYWdlLmpzb24iLCJ3ZWJwYWNrOi8vLy4vYXBwL3JhbmdlLnZ1ZT8yODU0Iiwid2VicGFjazovLy8uL2FwcC90aW1lLXBhbmVsLnZ1ZSIsIndlYnBhY2s6Ly8vLi9hcHAvdGltZS1wYW5lbC52dWU/OTBlYiIsIndlYnBhY2s6Ly8vLi9hcHAvdGltZS1wYW5lbC52dWU/Yzk4NiIsIndlYnBhY2s6Ly8vdGltZS1wYW5lbC52dWUiLCJ3ZWJwYWNrOi8vLy4vY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RpbWUtcGFuZWwudnVlPzMyM2YiLCJ3ZWJwYWNrOi8vLy4vYXBwL3BsYXllci52dWU/YTdjZiIsIndlYnBhY2s6Ly8vLi9hcHAvbHlyaWMtZWRpdG9yLnZ1ZSIsIndlYnBhY2s6Ly8vLi9hcHAvbHlyaWMtZWRpdG9yLnZ1ZT83Mzc2Iiwid2VicGFjazovLy8uL2FwcC9seXJpYy1lZGl0b3IudnVlP2RhOGYiLCJ3ZWJwYWNrOi8vL2x5cmljLWVkaXRvci52dWUiLCJ3ZWJwYWNrOi8vLy4uL34vbHJjLWtpdC9saWIvbHJjLWtpdC5qcyIsIndlYnBhY2s6Ly8vLi4vfi9scmMta2l0L2xpYi9saW5lLXBhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi4vfi9scmMta2l0L2xpYi9scmMuanMiLCJ3ZWJwYWNrOi8vLy4uL34vbHJjLWtpdC9saWIvcnVubmVyLmpzIiwid2VicGFjazovLy8uLi9+L2xyYy1raXQvfi9jbG9uZS9jbG9uZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvdG1lbnUudnVlIiwid2VicGFjazovLy8uL2FwcC90bWVudS52dWU/YzljOCIsIndlYnBhY2s6Ly8vLi9hcHAvdG1lbnUudnVlPzNlMTQiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RtZW51LnZ1ZT9hNmUwIiwid2VicGFjazovLy8uL2FwcC90bWVudS52dWU/Y2Q5NCIsIndlYnBhY2s6Ly8vdG1lbnUudnVlIiwid2VicGFjazovLy8uL2FwcC90b29sdGlwLnZ1ZSIsIndlYnBhY2s6Ly8vLi9hcHAvdG9vbHRpcC52dWU/ZDhlOSIsIndlYnBhY2s6Ly8vLi9hcHAvdG9vbHRpcC52dWU/ZDliYyIsIndlYnBhY2s6Ly8vdG9vbHRpcC52dWUiLCJ3ZWJwYWNrOi8vLy4vYXBwL3Rvb2x0aXAudnVlP2JjNjAiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RtZW51LnZ1ZT8xZWZlIiwid2VicGFjazovLy8uL2FwcC9seXJpYy1lZGl0b3IudnVlPzllMTYiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGFscy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGFscy9pbmRleC52dWU/OGY4ZiIsIndlYnBhY2s6Ly8vLi9hcHAvbW9kYWxzL2luZGV4LnZ1ZT84MThjIiwid2VicGFjazovLy8uL2FwcC9tb2RhbHMvaW5kZXgudnVlPzQ3YzEiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGFscy9pbmRleC52dWU/ZTUxYSIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzc0ODEiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGFscy9oZWxwLnZ1ZSIsIndlYnBhY2s6Ly8vLi9hcHAvbW9kYWxzL2hlbHAudnVlPzlhOTYiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGFscy9oZWxwLnZ1ZT9iOTdmIiwid2VicGFjazovLy9oZWxwLnZ1ZSIsIndlYnBhY2s6Ly8vLi9hcHAvbW9kYWxzL2hlbHAudnVlPzk1NjAiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGFscy9scmMtZm9ybWF0LXVwbG9hZC52dWUiLCJ3ZWJwYWNrOi8vL2xyYy1mb3JtYXQtdXBsb2FkLnZ1ZSIsIndlYnBhY2s6Ly8vLi9hcHAvbW9kYWxzL2xyYy1mb3JtYXQtdXBsb2FkLnZ1ZT8xMDE1Iiwid2VicGFjazovLy8uL2FwcC9tb2RhbHMvbHlyaWMtdXBsb2FkLnZ1ZSIsIndlYnBhY2s6Ly8vbHlyaWMtdXBsb2FkLnZ1ZSIsIndlYnBhY2s6Ly8vLi9hcHAvbW9kYWxzL2x5cmljLXVwbG9hZC52dWU/YTlmMiIsIndlYnBhY2s6Ly8vLi9hcHAvbW9kYWxzL2xyYy1zYXZlLnZ1ZSIsIndlYnBhY2s6Ly8vbHJjLXNhdmUudnVlIiwid2VicGFjazovLy8uL2FwcC9tb2RhbHMvbHJjLXNhdmUudnVlPzQyNDgiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGFscy9pbmRleC52dWU/MmJmYSIsIndlYnBhY2s6Ly8vLi9hcHAvbmF2LW1lbnUudnVlIiwid2VicGFjazovLy8uL2FwcC9uYXYtbWVudS52dWU/ZTdlYiIsIndlYnBhY2s6Ly8vLi9hcHAvbmF2LW1lbnUudnVlP2NiYjkiLCJ3ZWJwYWNrOi8vLy4vYXBwL25hdi1tZW51LnZ1ZT9jYTlkIiwid2VicGFjazovLy8uL2FwcC9uYXYtbWVudS52dWU/MTQ5YiIsIndlYnBhY2s6Ly8vbmF2LW1lbnUudnVlIiwid2VicGFjazovLy8uL2FwcC9uYXYtbWVudS52dWU/MjAxYiIsIndlYnBhY2s6Ly8vLi9hcHAvaW5kZXgudnVlPzRkNjMiLCJ3ZWJwYWNrOi8vLy4vaTE4bi5qcyIsIndlYnBhY2s6Ly8vLi4vfi92dWUtaTE4bi9kaXN0L3Z1ZS1pMThuLmNvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9sb2NhbGVzL2luZGV4LmpzIiwid2VicGFjazovLy8uL2xvY2FsZXMgXlxcLlxcLy4qJCIsIndlYnBhY2s6Ly8vLi9sb2NhbGVzL2VuLnltbCIsIndlYnBhY2s6Ly8vLi9sb2NhbGVzL3poLnltbCJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfdnVlIiwiX3Z1ZTIiLCJfYXBwIiwiX2FwcDIiLCJyb290IiwiVnVlIiwiZWwiLCJyZW5kZXIiLCJoIiwiQXBwIiwicmVmIiwicHJvdG90eXBlIiwiJEFwcCIsIiRyZWZzIiwiYXBwIiwicHJvY2VzcyIsImdsb2JhbCIsInNldEltbWVkaWF0ZSIsImlzVW5kZWYiLCJ2IiwidW5kZWZpbmVkIiwiaXNEZWYiLCJpc1RydWUiLCJpc0ZhbHNlIiwiaXNQcmltaXRpdmUiLCJ2YWx1ZSIsImlzT2JqZWN0IiwidG9SYXdUeXBlIiwiX3RvU3RyaW5nIiwic2xpY2UiLCJpc1BsYWluT2JqZWN0IiwiaXNSZWdFeHAiLCJpc1ZhbGlkQXJyYXlJbmRleCIsInZhbCIsIm4iLCJwYXJzZUZsb2F0IiwiU3RyaW5nIiwiTWF0aCIsImZsb29yIiwiaXNGaW5pdGUiLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b051bWJlciIsImlzTmFOIiwibWFrZU1hcCIsInN0ciIsImV4cGVjdHNMb3dlckNhc2UiLCJtYXAiLCJPYmplY3QiLCJjcmVhdGUiLCJsaXN0Iiwic3BsaXQiLCJpIiwibGVuZ3RoIiwidG9Mb3dlckNhc2UiLCJyZW1vdmUiLCJhcnIiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiaGFzT3duIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJjYWNoZWQiLCJmbiIsImNhY2hlIiwiaGl0IiwicG9seWZpbGxCaW5kIiwiY3R4IiwiYm91bmRGbiIsImEiLCJsIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbGVuZ3RoIiwibmF0aXZlQmluZCIsImJpbmQiLCJ0b0FycmF5Iiwic3RhcnQiLCJyZXQiLCJBcnJheSIsImV4dGVuZCIsInRvIiwiX2Zyb20iLCJ0b09iamVjdCIsInJlcyIsIm5vb3AiLCJiIiwibG9vc2VFcXVhbCIsImlzT2JqZWN0QSIsImlzT2JqZWN0QiIsImlzQXJyYXlBIiwiaXNBcnJheSIsImlzQXJyYXlCIiwiZXZlcnkiLCJlIiwia2V5c0EiLCJrZXlzIiwia2V5c0IiLCJsb29zZUluZGV4T2YiLCJvbmNlIiwiY2FsbGVkIiwidGhpcyIsImlzUmVzZXJ2ZWQiLCJjaGFyQ29kZUF0IiwiZGVmIiwiZW51bWVyYWJsZSIsImRlZmluZVByb3BlcnR5Iiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJwYXJzZVBhdGgiLCJwYXRoIiwiYmFpbFJFIiwidGVzdCIsInNlZ21lbnRzIiwiaXNOYXRpdmUiLCJDdG9yIiwicHVzaFRhcmdldCIsIl90YXJnZXQiLCJEZXAiLCJ0YXJnZXQiLCJ0YXJnZXRTdGFjayIsInB1c2giLCJwb3BUYXJnZXQiLCJwb3AiLCJjcmVhdGVUZXh0Vk5vZGUiLCJWTm9kZSIsImNsb25lVk5vZGUiLCJ2bm9kZSIsImNsb25lZCIsInRhZyIsImRhdGEiLCJjaGlsZHJlbiIsInRleHQiLCJlbG0iLCJjb250ZXh0IiwiY29tcG9uZW50T3B0aW9ucyIsImFzeW5jRmFjdG9yeSIsIm5zIiwiaXNTdGF0aWMiLCJpc0NvbW1lbnQiLCJmbkNvbnRleHQiLCJmbk9wdGlvbnMiLCJmblNjb3BlSWQiLCJpc0Nsb25lZCIsInRvZ2dsZU9ic2VydmluZyIsInNob3VsZE9ic2VydmUiLCJwcm90b0F1Z21lbnQiLCJzcmMiLCJfX3Byb3RvX18iLCJjb3B5QXVnbWVudCIsIm9ic2VydmUiLCJhc1Jvb3REYXRhIiwib2IiLCJfX29iX18iLCJPYnNlcnZlciIsImlzU2VydmVyUmVuZGVyaW5nIiwiaXNFeHRlbnNpYmxlIiwiX2lzVnVlIiwidm1Db3VudCIsImRlZmluZVJlYWN0aXZlIiwiY3VzdG9tU2V0dGVyIiwic2hhbGxvdyIsImRlcCIsInByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0dGVyIiwiZ2V0Iiwic2V0dGVyIiwic2V0IiwiY2hpbGRPYiIsImRlcGVuZCIsImRlcGVuZEFycmF5IiwibmV3VmFsIiwiZW52IiwiTk9ERV9FTlYiLCJub3RpZnkiLCJ3YXJuIiwibWF4IiwiZGVsIiwibWVyZ2VEYXRhIiwiZnJvbSIsInRvVmFsIiwiZnJvbVZhbCIsIm1lcmdlRGF0YU9yRm4iLCJwYXJlbnRWYWwiLCJjaGlsZFZhbCIsInZtIiwiaW5zdGFuY2VEYXRhIiwiZGVmYXVsdERhdGEiLCJtZXJnZUhvb2siLCJjb25jYXQiLCJtZXJnZUFzc2V0cyIsImFzc2VydE9iamVjdFR5cGUiLCJjaGVja0NvbXBvbmVudHMiLCJvcHRpb25zIiwiY29tcG9uZW50cyIsInZhbGlkYXRlQ29tcG9uZW50TmFtZSIsIm5hbWUiLCJpc0J1aWx0SW5UYWciLCJjb25maWciLCJpc1Jlc2VydmVkVGFnIiwibm9ybWFsaXplUHJvcHMiLCJwcm9wcyIsImNhbWVsaXplIiwidHlwZSIsIm5vcm1hbGl6ZUluamVjdCIsImluamVjdCIsIm5vcm1hbGl6ZWQiLCJub3JtYWxpemVEaXJlY3RpdmVzIiwiZGlycyIsImRpcmVjdGl2ZXMiLCJ1cGRhdGUiLCJtZXJnZU9wdGlvbnMiLCJwYXJlbnQiLCJjaGlsZCIsIm1lcmdlRmllbGQiLCJzdHJhdCIsInN0cmF0cyIsImRlZmF1bHRTdHJhdCIsImV4dGVuZHNGcm9tIiwiZXh0ZW5kcyIsIm1peGlucyIsInJlc29sdmVBc3NldCIsIndhcm5NaXNzaW5nIiwiYXNzZXRzIiwiY2FtZWxpemVkSWQiLCJQYXNjYWxDYXNlSWQiLCJjYXBpdGFsaXplIiwidmFsaWRhdGVQcm9wIiwicHJvcE9wdGlvbnMiLCJwcm9wc0RhdGEiLCJwcm9wIiwiYWJzZW50IiwiYm9vbGVhbkluZGV4IiwiZ2V0VHlwZUluZGV4IiwiQm9vbGVhbiIsImh5cGhlbmF0ZSIsInN0cmluZ0luZGV4IiwiZ2V0UHJvcERlZmF1bHRWYWx1ZSIsInByZXZTaG91bGRPYnNlcnZlIiwiYXNzZXJ0UHJvcCIsIiRvcHRpb25zIiwiX3Byb3BzIiwiZ2V0VHlwZSIsInJlcXVpcmVkIiwidmFsaWQiLCJleHBlY3RlZFR5cGVzIiwiYXNzZXJ0ZWRUeXBlIiwiYXNzZXJ0VHlwZSIsImV4cGVjdGVkVHlwZSIsImpvaW4iLCJ2YWxpZGF0b3IiLCJzaW1wbGVDaGVja1JFIiwidCIsIm1hdGNoIiwiaXNTYW1lVHlwZSIsImxlbiIsImhhbmRsZUVycm9yIiwiZXJyIiwiaW5mbyIsImN1ciIsIiRwYXJlbnQiLCJob29rcyIsImVycm9yQ2FwdHVyZWQiLCJjYXB0dXJlIiwiZ2xvYmFsSGFuZGxlRXJyb3IiLCJlcnJvckhhbmRsZXIiLCJsb2dFcnJvciIsImluQnJvd3NlciIsImluV2VleCIsImNvbnNvbGUiLCJlcnJvciIsImZsdXNoQ2FsbGJhY2tzIiwicGVuZGluZyIsImNvcGllcyIsImNhbGxiYWNrcyIsIndpdGhNYWNyb1Rhc2siLCJfd2l0aFRhc2siLCJ1c2VNYWNyb1Rhc2siLCJuZXh0VGljayIsImNiIiwiX3Jlc29sdmUiLCJtYWNyb1RpbWVyRnVuYyIsIm1pY3JvVGltZXJGdW5jIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0cmF2ZXJzZSIsIl90cmF2ZXJzZSIsInNlZW5PYmplY3RzIiwiY2xlYXIiLCJzZWVuIiwiaXNBIiwiaXNGcm96ZW4iLCJkZXBJZCIsImhhcyIsImFkZCIsImNyZWF0ZUZuSW52b2tlciIsImZucyIsImludm9rZXIiLCJhcmd1bWVudHMkMSIsInVwZGF0ZUxpc3RlbmVycyIsIm9uIiwib2xkT24iLCJyZW1vdmUkJDEiLCJvbGQiLCJldmVudCIsIm5vcm1hbGl6ZUV2ZW50IiwicGFzc2l2ZSIsInBhcmFtcyIsIm1lcmdlVk5vZGVIb29rIiwiaG9va0tleSIsImhvb2siLCJ3cmFwcGVkSG9vayIsIm9sZEhvb2siLCJtZXJnZWQiLCJleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhIiwiYXR0cnMiLCJhbHRLZXkiLCJrZXlJbkxvd2VyQ2FzZSIsInRpcCIsImZvcm1hdENvbXBvbmVudE5hbWUiLCJjaGVja1Byb3AiLCJoYXNoIiwicHJlc2VydmUiLCJzaW1wbGVOb3JtYWxpemVDaGlsZHJlbiIsIm5vcm1hbGl6ZUNoaWxkcmVuIiwibm9ybWFsaXplQXJyYXlDaGlsZHJlbiIsImlzVGV4dE5vZGUiLCJub2RlIiwibmVzdGVkSW5kZXgiLCJsYXN0SW5kZXgiLCJsYXN0Iiwic2hpZnQiLCJfaXNWTGlzdCIsImVuc3VyZUN0b3IiLCJjb21wIiwiYmFzZSIsImhhc1N5bWJvbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiY3JlYXRlQXN5bmNQbGFjZWhvbGRlciIsImZhY3RvcnkiLCJjcmVhdGVFbXB0eVZOb2RlIiwiYXN5bmNNZXRhIiwicmVzb2x2ZUFzeW5jQ29tcG9uZW50IiwiYmFzZUN0b3IiLCJlcnJvckNvbXAiLCJyZXNvbHZlZCIsImxvYWRpbmciLCJsb2FkaW5nQ29tcCIsImNvbnRleHRzIiwic3luYyIsImZvcmNlUmVuZGVyIiwiJGZvcmNlVXBkYXRlIiwicmVqZWN0IiwicmVhc29uIiwidGhlbiIsImNvbXBvbmVudCIsImRlbGF5Iiwic2V0VGltZW91dCIsInRpbWVvdXQiLCJpc0FzeW5jUGxhY2Vob2xkZXIiLCJnZXRGaXJzdENvbXBvbmVudENoaWxkIiwiaW5pdEV2ZW50cyIsIl9ldmVudHMiLCJfaGFzSG9va0V2ZW50IiwibGlzdGVuZXJzIiwiX3BhcmVudExpc3RlbmVycyIsInVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyIsIiRvbmNlIiwiJG9uIiwicmVtb3ZlJDEiLCIkb2ZmIiwib2xkTGlzdGVuZXJzIiwiZXZlbnRzTWl4aW4iLCJob29rUkUiLCJ0aGlzJDEiLCJjYnMiLCJpJDEiLCIkZW1pdCIsImxvd2VyQ2FzZUV2ZW50IiwiYXJncyIsInJlc29sdmVTbG90cyIsInNsb3RzIiwic2xvdCIsIm5hbWUkMSIsImlzV2hpdGVzcGFjZSIsInJlc29sdmVTY29wZWRTbG90cyIsImluaXRMaWZlY3ljbGUiLCJhYnN0cmFjdCIsIiRjaGlsZHJlbiIsIiRyb290IiwiX3dhdGNoZXIiLCJfaW5hY3RpdmUiLCJfZGlyZWN0SW5hY3RpdmUiLCJfaXNNb3VudGVkIiwiX2lzRGVzdHJveWVkIiwiX2lzQmVpbmdEZXN0cm95ZWQiLCJsaWZlY3ljbGVNaXhpbiIsIl91cGRhdGUiLCJoeWRyYXRpbmciLCJjYWxsSG9vayIsInByZXZFbCIsIiRlbCIsInByZXZWbm9kZSIsIl92bm9kZSIsInByZXZBY3RpdmVJbnN0YW5jZSIsImFjdGl2ZUluc3RhbmNlIiwiX19wYXRjaF9fIiwiX3BhcmVudEVsbSIsIl9yZWZFbG0iLCJfX3Z1ZV9fIiwiJHZub2RlIiwiJGRlc3Ryb3kiLCJ0ZWFyZG93biIsIl93YXRjaGVycyIsIl9kYXRhIiwibW91bnRDb21wb25lbnQiLCJ0ZW1wbGF0ZSIsImNoYXJBdCIsInVwZGF0ZUNvbXBvbmVudCIsInBlcmZvcm1hbmNlIiwibWFyayIsIl9uYW1lIiwiX3VpZCIsInN0YXJ0VGFnIiwiZW5kVGFnIiwiX3JlbmRlciIsIm1lYXN1cmUiLCJXYXRjaGVyIiwidXBkYXRlQ2hpbGRDb21wb25lbnQiLCJwYXJlbnRWbm9kZSIsInJlbmRlckNoaWxkcmVuIiwiaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50IiwiaGFzQ2hpbGRyZW4iLCJfcmVuZGVyQ2hpbGRyZW4iLCJzY29wZWRTbG90cyIsIiRzY29wZWRTbG90cyIsImVtcHR5T2JqZWN0IiwiX3BhcmVudFZub2RlIiwiJGF0dHJzIiwiJGxpc3RlbmVycyIsInByb3BLZXlzIiwiX3Byb3BLZXlzIiwiJHNsb3RzIiwiaXNJbkluYWN0aXZlVHJlZSIsImFjdGl2YXRlQ2hpbGRDb21wb25lbnQiLCJkaXJlY3QiLCJkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQiLCJoYW5kbGVycyIsImoiLCJyZXNldFNjaGVkdWxlclN0YXRlIiwicXVldWUiLCJhY3RpdmF0ZWRDaGlsZHJlbiIsImNpcmN1bGFyIiwid2FpdGluZyIsImZsdXNoaW5nIiwiZmx1c2hTY2hlZHVsZXJRdWV1ZSIsIndhdGNoZXIiLCJzb3J0IiwicnVuIiwiTUFYX1VQREFURV9DT1VOVCIsInVzZXIiLCJhY3RpdmF0ZWRRdWV1ZSIsInVwZGF0ZWRRdWV1ZSIsImNhbGxBY3RpdmF0ZWRIb29rcyIsImNhbGxVcGRhdGVkSG9va3MiLCJkZXZ0b29scyIsImVtaXQiLCJxdWV1ZUFjdGl2YXRlZENvbXBvbmVudCIsInF1ZXVlV2F0Y2hlciIsInByb3h5Iiwic291cmNlS2V5Iiwic2hhcmVkUHJvcGVydHlEZWZpbml0aW9uIiwiaW5pdFN0YXRlIiwib3B0cyIsImluaXRQcm9wcyIsIm1ldGhvZHMiLCJpbml0TWV0aG9kcyIsImluaXREYXRhIiwiY29tcHV0ZWQiLCJpbml0Q29tcHV0ZWQiLCJ3YXRjaCIsIm5hdGl2ZVdhdGNoIiwiaW5pdFdhdGNoIiwicHJvcHNPcHRpb25zIiwiaXNSb290IiwibG9vcCIsImh5cGhlbmF0ZWRLZXkiLCJpc1Jlc2VydmVkQXR0cmlidXRlIiwiaXNSZXNlcnZlZEF0dHIiLCJnZXREYXRhIiwid2F0Y2hlcnMiLCJfY29tcHV0ZWRXYXRjaGVycyIsImlzU1NSIiwidXNlckRlZiIsImNvbXB1dGVkV2F0Y2hlck9wdGlvbnMiLCIkZGF0YSIsImRlZmluZUNvbXB1dGVkIiwic2hvdWxkQ2FjaGUiLCJjcmVhdGVDb21wdXRlZEdldHRlciIsImRpcnR5IiwiZXZhbHVhdGUiLCJoYW5kbGVyIiwiY3JlYXRlV2F0Y2hlciIsImV4cE9yRm4iLCIkd2F0Y2giLCJzdGF0ZU1peGluIiwiZGF0YURlZiIsInByb3BzRGVmIiwibmV3RGF0YSIsIiRzZXQiLCIkZGVsZXRlIiwiaW1tZWRpYXRlIiwiaW5pdFByb3ZpZGUiLCJwcm92aWRlIiwiX3Byb3ZpZGVkIiwiaW5pdEluamVjdGlvbnMiLCJyZXN1bHQiLCJyZXNvbHZlSW5qZWN0IiwiZm9yRWFjaCIsIlJlZmxlY3QiLCJvd25LZXlzIiwiZmlsdGVyIiwicHJvdmlkZUtleSIsInNvdXJjZSIsInByb3ZpZGVEZWZhdWx0IiwicmVuZGVyTGlzdCIsInJlbmRlclNsb3QiLCJmYWxsYmFjayIsImJpbmRPYmplY3QiLCJub2RlcyIsInNjb3BlZFNsb3RGbiIsInNsb3ROb2RlcyIsIl9yZW5kZXJlZCIsIiRjcmVhdGVFbGVtZW50IiwicmVzb2x2ZUZpbHRlciIsImlkZW50aXR5IiwiaXNLZXlOb3RNYXRjaCIsImV4cGVjdCIsImFjdHVhbCIsImNoZWNrS2V5Q29kZXMiLCJldmVudEtleUNvZGUiLCJidWlsdEluS2V5Q29kZSIsImV2ZW50S2V5TmFtZSIsImJ1aWx0SW5LZXlOYW1lIiwibWFwcGVkS2V5Q29kZSIsImtleUNvZGVzIiwiYmluZE9iamVjdFByb3BzIiwiYXNQcm9wIiwiaXNTeW5jIiwibXVzdFVzZVByb3AiLCJkb21Qcm9wcyIsIiRldmVudCIsInJlbmRlclN0YXRpYyIsImlzSW5Gb3IiLCJfc3RhdGljVHJlZXMiLCJ0cmVlIiwic3RhdGljUmVuZGVyRm5zIiwiX3JlbmRlclByb3h5IiwibWFya1N0YXRpYyIsIm1hcmtPbmNlIiwiaXNPbmNlIiwibWFya1N0YXRpY05vZGUiLCJiaW5kT2JqZWN0TGlzdGVuZXJzIiwiZXhpc3RpbmciLCJvdXJzIiwiaW5zdGFsbFJlbmRlckhlbHBlcnMiLCJfbyIsIl9uIiwiX3MiLCJfbCIsIl90IiwiX3EiLCJfaSIsIl9tIiwiX2YiLCJfayIsIl9iIiwiX3YiLCJfZSIsIl91IiwiX2ciLCJGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCIsImNvbnRleHRWbSIsIl9vcmlnaW5hbCIsImlzQ29tcGlsZWQiLCJfY29tcGlsZWQiLCJuZWVkTm9ybWFsaXphdGlvbiIsImluamVjdGlvbnMiLCJfc2NvcGVJZCIsIl9jIiwiZCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50IiwibWVyZ2VQcm9wcyIsInJlbmRlckNvbnRleHQiLCJjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0Iiwidm5vZGVzIiwiY2xvbmUiLCJjcmVhdGVDb21wb25lbnQiLCJfYmFzZSIsImNpZCIsInJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMiLCJtb2RlbCIsInRyYW5zZm9ybU1vZGVsIiwiZnVuY3Rpb25hbCIsIm5hdGl2ZU9uIiwiaW5zdGFsbENvbXBvbmVudEhvb2tzIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2VGb3JWbm9kZSIsInBhcmVudEVsbSIsInJlZkVsbSIsIl9pc0NvbXBvbmVudCIsImlubGluZVRlbXBsYXRlIiwiaG9va3NUb01lcmdlIiwiY29tcG9uZW50Vk5vZGVIb29rcyIsImNhbGxiYWNrIiwibm9ybWFsaXphdGlvblR5cGUiLCJhbHdheXNOb3JtYWxpemUiLCJBTFdBWVNfTk9STUFMSVpFIiwiX2NyZWF0ZUVsZW1lbnQiLCJpcyIsIlNJTVBMRV9OT1JNQUxJWkUiLCJnZXRUYWdOYW1lc3BhY2UiLCJwYXJzZVBsYXRmb3JtVGFnTmFtZSIsImFwcGx5TlMiLCJyZWdpc3RlckRlZXBCaW5kaW5ncyIsImZvcmNlIiwic3R5bGUiLCJjbGFzcyIsImluaXRSZW5kZXIiLCJwYXJlbnREYXRhIiwicmVuZGVyTWl4aW4iLCIkbmV4dFRpY2siLCJyZW5kZXJFcnJvciIsImluaXRNaXhpbiIsIl9pbml0IiwidWlkJDMiLCJpbml0SW50ZXJuYWxDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsImluaXRQcm94eSIsIl9zZWxmIiwiJG1vdW50Iiwidm5vZGVDb21wb25lbnRPcHRpb25zIiwiX2NvbXBvbmVudFRhZyIsInN1cGVyIiwic3VwZXJPcHRpb25zIiwiY2FjaGVkU3VwZXJPcHRpb25zIiwibW9kaWZpZWRPcHRpb25zIiwicmVzb2x2ZU1vZGlmaWVkT3B0aW9ucyIsImV4dGVuZE9wdGlvbnMiLCJtb2RpZmllZCIsImxhdGVzdCIsImV4dGVuZGVkIiwic2VhbGVkIiwic2VhbGVkT3B0aW9ucyIsImRlZHVwZSIsImluaXRVc2UiLCJ1c2UiLCJwbHVnaW4iLCJpbnN0YWxsZWRQbHVnaW5zIiwiX2luc3RhbGxlZFBsdWdpbnMiLCJ1bnNoaWZ0IiwiaW5zdGFsbCIsImluaXRNaXhpbiQxIiwibWl4aW4iLCJpbml0RXh0ZW5kIiwiU3VwZXIiLCJTdXBlcklkIiwiY2FjaGVkQ3RvcnMiLCJfQ3RvciIsIlN1YiIsImluaXRQcm9wcyQxIiwiaW5pdENvbXB1dGVkJDEiLCJBU1NFVF9UWVBFUyIsIkNvbXAiLCJpbml0QXNzZXRSZWdpc3RlcnMiLCJkZWZpbml0aW9uIiwiZ2V0Q29tcG9uZW50TmFtZSIsIm1hdGNoZXMiLCJwYXR0ZXJuIiwicHJ1bmVDYWNoZSIsImtlZXBBbGl2ZUluc3RhbmNlIiwiY2FjaGVkTm9kZSIsInBydW5lQ2FjaGVFbnRyeSIsImN1cnJlbnQiLCJjYWNoZWQkJDEiLCJjb21wb25lbnRJbnN0YW5jZSIsImluaXRHbG9iYWxBUEkiLCJjb25maWdEZWYiLCJ1dGlsIiwiZGVsZXRlIiwiYnVpbHRJbkNvbXBvbmVudHMiLCJnZW5DbGFzc0ZvclZub2RlIiwicGFyZW50Tm9kZSIsImNoaWxkTm9kZSIsIm1lcmdlQ2xhc3NEYXRhIiwicmVuZGVyQ2xhc3MiLCJzdGF0aWNDbGFzcyIsImR5bmFtaWNDbGFzcyIsInN0cmluZ2lmeUNsYXNzIiwic3RyaW5naWZ5QXJyYXkiLCJzdHJpbmdpZnlPYmplY3QiLCJzdHJpbmdpZmllZCIsImlzU1ZHIiwiaXNVbmtub3duRWxlbWVudCIsInVua25vd25FbGVtZW50Q2FjaGUiLCJkb2N1bWVudCIsIndpbmRvdyIsIkhUTUxVbmtub3duRWxlbWVudCIsIkhUTUxFbGVtZW50IiwicXVlcnkiLCJzZWxlY3RlZCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50JDEiLCJ0YWdOYW1lIiwibXVsdGlwbGUiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVFbGVtZW50TlMiLCJuYW1lc3BhY2UiLCJuYW1lc3BhY2VNYXAiLCJjcmVhdGVUZXh0Tm9kZSIsImNyZWF0ZUNvbW1lbnQiLCJpbnNlcnRCZWZvcmUiLCJuZXdOb2RlIiwicmVmZXJlbmNlTm9kZSIsInJlbW92ZUNoaWxkIiwiYXBwZW5kQ2hpbGQiLCJuZXh0U2libGluZyIsInNldFRleHRDb250ZW50IiwidGV4dENvbnRlbnQiLCJzZXRTdHlsZVNjb3BlIiwic2NvcGVJZCIsInJlZ2lzdGVyUmVmIiwiaXNSZW1vdmFsIiwicmVmcyIsInJlZkluRm9yIiwic2FtZVZub2RlIiwic2FtZUlucHV0VHlwZSIsInR5cGVBIiwidHlwZUIiLCJpc1RleHRJbnB1dFR5cGUiLCJjcmVhdGVLZXlUb09sZElkeCIsImJlZ2luSWR4IiwiZW5kSWR4IiwiY3JlYXRlUGF0Y2hGdW5jdGlvbiIsImJhY2tlbmQiLCJlbXB0eU5vZGVBdCIsIm5vZGVPcHMiLCJjcmVhdGVSbUNiIiwiY2hpbGRFbG0iLCJyZW1vdmVOb2RlIiwiaXNVbmtub3duRWxlbWVudCQkMSIsImluVlByZSIsImlnbm9yZWRFbGVtZW50cyIsInNvbWUiLCJpZ25vcmUiLCJjcmVhdGVFbG0iLCJpbnNlcnRlZFZub2RlUXVldWUiLCJuZXN0ZWQiLCJvd25lckFycmF5IiwiaXNSb290SW5zZXJ0IiwicHJlIiwiY3JlYXRpbmdFbG1JblZQcmUiLCJzZXRTY29wZSIsImNyZWF0ZUNoaWxkcmVuIiwiaW52b2tlQ3JlYXRlSG9va3MiLCJpbnNlcnQiLCJpc1JlYWN0aXZhdGVkIiwia2VlcEFsaXZlIiwiaW5pdCIsImluaXRDb21wb25lbnQiLCJyZWFjdGl2YXRlQ29tcG9uZW50IiwicGVuZGluZ0luc2VydCIsImlzUGF0Y2hhYmxlIiwiaW5uZXJOb2RlIiwidHJhbnNpdGlvbiIsImFjdGl2YXRlIiwiZW1wdHlOb2RlIiwicmVmJCQxIiwiY2hlY2tEdXBsaWNhdGVLZXlzIiwiYW5jZXN0b3IiLCJhZGRWbm9kZXMiLCJzdGFydElkeCIsImludm9rZURlc3Ryb3lIb29rIiwiZGVzdHJveSIsInJlbW92ZVZub2RlcyIsImNoIiwicmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayIsInJtIiwidXBkYXRlQ2hpbGRyZW4iLCJvbGRDaCIsIm5ld0NoIiwicmVtb3ZlT25seSIsIm9sZEtleVRvSWR4IiwiaWR4SW5PbGQiLCJ2bm9kZVRvTW92ZSIsIm9sZFN0YXJ0SWR4IiwibmV3U3RhcnRJZHgiLCJvbGRFbmRJZHgiLCJvbGRTdGFydFZub2RlIiwib2xkRW5kVm5vZGUiLCJuZXdFbmRJZHgiLCJuZXdTdGFydFZub2RlIiwibmV3RW5kVm5vZGUiLCJjYW5Nb3ZlIiwicGF0Y2hWbm9kZSIsImZpbmRJZHhJbk9sZCIsInNlZW5LZXlzIiwiZW5kIiwib2xkVm5vZGUiLCJoeWRyYXRlIiwicHJlcGF0Y2giLCJwb3N0cGF0Y2giLCJpbnZva2VJbnNlcnRIb29rIiwiaW5pdGlhbCIsImFzc2VydE5vZGVNYXRjaCIsImhhc0NoaWxkTm9kZXMiLCJpbm5lckhUTUwiLCJoeWRyYXRpb25CYWlsZWQiLCJjaGlsZHJlbk1hdGNoIiwiZmlyc3RDaGlsZCIsImNoaWxkTm9kZXMiLCJmdWxsSW52b2tlIiwiaXNSZW5kZXJlZE1vZHVsZSIsIm5vZGVUeXBlIiwiaXNJbml0aWFsUGF0Y2giLCJpc1JlYWxFbGVtZW50IiwiaGFzQXR0cmlidXRlIiwiU1NSX0FUVFIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJvbGRFbG0iLCJwYXJlbnRFbG0kMSIsIl9sZWF2ZUNiIiwicGF0Y2hhYmxlIiwiaSQyIiwidXBkYXRlRGlyZWN0aXZlcyIsIm9sZERpciIsImRpciIsImlzQ3JlYXRlIiwiaXNEZXN0cm95Iiwib2xkRGlycyIsIm5vcm1hbGl6ZURpcmVjdGl2ZXMkMSIsIm5ld0RpcnMiLCJkaXJzV2l0aEluc2VydCIsImRpcnNXaXRoUG9zdHBhdGNoIiwib2xkVmFsdWUiLCJjYWxsSG9vayQxIiwiY29tcG9uZW50VXBkYXRlZCIsImluc2VydGVkIiwiY2FsbEluc2VydCIsIm1vZGlmaWVycyIsImVtcHR5TW9kaWZpZXJzIiwiZ2V0UmF3RGlyTmFtZSIsInJhd05hbWUiLCJ1cGRhdGVBdHRycyIsImluaGVyaXRBdHRycyIsIm9sZEF0dHJzIiwic2V0QXR0ciIsImlzSUUiLCJpc0VkZ2UiLCJpc1hsaW5rIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJ4bGlua05TIiwiZ2V0WGxpbmtQcm9wIiwiaXNFbnVtZXJhdGVkQXR0ciIsImJhc2VTZXRBdHRyIiwiaXNCb29sZWFuQXR0ciIsImlzRmFsc3lBdHRyVmFsdWUiLCJzZXRBdHRyaWJ1dGVOUyIsImlzSUU5IiwiX19pZXBoIiwiYmxvY2tlciIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwidXBkYXRlQ2xhc3MiLCJvbGREYXRhIiwiY2xzIiwidHJhbnNpdGlvbkNsYXNzIiwiX3RyYW5zaXRpb25DbGFzc2VzIiwiX3ByZXZDbGFzcyIsIm5vcm1hbGl6ZUV2ZW50cyIsIlJBTkdFX1RPS0VOIiwiQ0hFQ0tCT1hfUkFESU9fVE9LRU4iLCJjaGFuZ2UiLCJjcmVhdGVPbmNlSGFuZGxlciIsInRhcmdldCQxIiwib25jZUhhbmRsZXIiLCJyZW1vdmUkMiIsImFkZCQxIiwib25jZSQkMSIsInN1cHBvcnRzUGFzc2l2ZSIsInVwZGF0ZURPTUxpc3RlbmVycyIsInVwZGF0ZURPTVByb3BzIiwib2xkUHJvcHMiLCJfdmFsdWUiLCJzdHJDdXIiLCJzaG91bGRVcGRhdGVWYWx1ZSIsImNoZWNrVmFsIiwiY29tcG9zaW5nIiwiaXNOb3RJbkZvY3VzQW5kRGlydHkiLCJpc0RpcnR5V2l0aE1vZGlmaWVycyIsIm5vdEluRm9jdXMiLCJhY3RpdmVFbGVtZW50IiwiX3ZNb2RpZmllcnMiLCJsYXp5IiwibnVtYmVyIiwidHJpbSIsIm5vcm1hbGl6ZVN0eWxlRGF0YSIsIm5vcm1hbGl6ZVN0eWxlQmluZGluZyIsInN0YXRpY1N0eWxlIiwiYmluZGluZ1N0eWxlIiwicGFyc2VTdHlsZVRleHQiLCJnZXRTdHlsZSIsImNoZWNrQ2hpbGQiLCJzdHlsZURhdGEiLCJ1cGRhdGVTdHlsZSIsIm9sZFN0YXRpY1N0eWxlIiwib2xkU3R5bGVCaW5kaW5nIiwibm9ybWFsaXplZFN0eWxlIiwib2xkU3R5bGUiLCJuZXdTdHlsZSIsInNldFByb3AiLCJhZGRDbGFzcyIsImNsYXNzTGlzdCIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUNsYXNzIiwidGFyIiwicmVwbGFjZSIsInJlc29sdmVUcmFuc2l0aW9uIiwiY3NzIiwiYXV0b0Nzc1RyYW5zaXRpb24iLCJuZXh0RnJhbWUiLCJyYWYiLCJhZGRUcmFuc2l0aW9uQ2xhc3MiLCJ0cmFuc2l0aW9uQ2xhc3NlcyIsInJlbW92ZVRyYW5zaXRpb25DbGFzcyIsIndoZW5UcmFuc2l0aW9uRW5kcyIsImdldFRyYW5zaXRpb25JbmZvIiwicHJvcENvdW50IiwiVFJBTlNJVElPTiIsInRyYW5zaXRpb25FbmRFdmVudCIsImFuaW1hdGlvbkVuZEV2ZW50IiwiZW5kZWQiLCJvbkVuZCIsInN0eWxlcyIsImdldENvbXB1dGVkU3R5bGUiLCJ0cmFuc2l0aW9uRGVsYXlzIiwidHJhbnNpdGlvblByb3AiLCJ0cmFuc2l0aW9uRHVyYXRpb25zIiwidHJhbnNpdGlvblRpbWVvdXQiLCJnZXRUaW1lb3V0IiwiYW5pbWF0aW9uRGVsYXlzIiwiYW5pbWF0aW9uUHJvcCIsImFuaW1hdGlvbkR1cmF0aW9ucyIsImFuaW1hdGlvblRpbWVvdXQiLCJBTklNQVRJT04iLCJoYXNUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1SRSIsImRlbGF5cyIsImR1cmF0aW9ucyIsInRvTXMiLCJzIiwiTnVtYmVyIiwiZW50ZXIiLCJ0b2dnbGVEaXNwbGF5IiwiY2FuY2VsbGVkIiwiX2VudGVyQ2IiLCJlbnRlckNsYXNzIiwiZW50ZXJUb0NsYXNzIiwiZW50ZXJBY3RpdmVDbGFzcyIsImFwcGVhckNsYXNzIiwiYXBwZWFyVG9DbGFzcyIsImFwcGVhckFjdGl2ZUNsYXNzIiwiYmVmb3JlRW50ZXIiLCJhZnRlckVudGVyIiwiZW50ZXJDYW5jZWxsZWQiLCJiZWZvcmVBcHBlYXIiLCJhcHBlYXIiLCJhZnRlckFwcGVhciIsImFwcGVhckNhbmNlbGxlZCIsImR1cmF0aW9uIiwidHJhbnNpdGlvbk5vZGUiLCJpc0FwcGVhciIsInN0YXJ0Q2xhc3MiLCJhY3RpdmVDbGFzcyIsInRvQ2xhc3MiLCJiZWZvcmVFbnRlckhvb2siLCJlbnRlckhvb2siLCJhZnRlckVudGVySG9vayIsImVudGVyQ2FuY2VsbGVkSG9vayIsImV4cGxpY2l0RW50ZXJEdXJhdGlvbiIsImNoZWNrRHVyYXRpb24iLCJleHBlY3RzQ1NTIiwidXNlcldhbnRzQ29udHJvbCIsImdldEhvb2tBcmd1bWVudHNMZW5ndGgiLCJzaG93IiwicGVuZGluZ05vZGUiLCJfcGVuZGluZyIsImlzVmFsaWREdXJhdGlvbiIsImxlYXZlIiwicGVyZm9ybUxlYXZlIiwiYmVmb3JlTGVhdmUiLCJsZWF2ZUNsYXNzIiwibGVhdmVBY3RpdmVDbGFzcyIsImxlYXZlVG9DbGFzcyIsImV4cGxpY2l0TGVhdmVEdXJhdGlvbiIsImFmdGVyTGVhdmUiLCJsZWF2ZUNhbmNlbGxlZCIsImRlbGF5TGVhdmUiLCJpbnZva2VyRm5zIiwiX2VudGVyIiwiXyIsInNldFNlbGVjdGVkIiwiYmluZGluZyIsImFjdHVhbGx5U2V0U2VsZWN0ZWQiLCJpc011bHRpcGxlIiwib3B0aW9uIiwiZ2V0VmFsdWUiLCJzZWxlY3RlZEluZGV4IiwiaGFzTm9NYXRjaGluZ09wdGlvbiIsIm8iLCJvbkNvbXBvc2l0aW9uU3RhcnQiLCJvbkNvbXBvc2l0aW9uRW5kIiwidHJpZ2dlciIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImxvY2F0ZU5vZGUiLCJnZXRSZWFsQ2hpbGQiLCJjb21wT3B0aW9ucyIsImV4dHJhY3RUcmFuc2l0aW9uRGF0YSIsImtleSQxIiwicGxhY2Vob2xkZXIiLCJyYXdDaGlsZCIsImhhc1BhcmVudFRyYW5zaXRpb24iLCJpc1NhbWVDaGlsZCIsIm9sZENoaWxkIiwiY2FsbFBlbmRpbmdDYnMiLCJfbW92ZUNiIiwicmVjb3JkUG9zaXRpb24iLCJuZXdQb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhcHBseVRyYW5zbGF0aW9uIiwib2xkUG9zIiwicG9zIiwiZHgiLCJsZWZ0IiwiZHkiLCJ0b3AiLCJtb3ZlZCIsInRyYW5zZm9ybSIsIldlYmtpdFRyYW5zZm9ybSIsInRyYW5zaXRpb25EdXJhdGlvbiIsImZyZWV6ZSIsImNhbWVsaXplUkUiLCJ0b1VwcGVyQ2FzZSIsImh5cGhlbmF0ZVJFIiwiRnVuY3Rpb24iLCJubyIsIkxJRkVDWUNMRV9IT09LUyIsIm9wdGlvbk1lcmdlU3RyYXRlZ2llcyIsInNpbGVudCIsInByb2R1Y3Rpb25UaXAiLCJ3YXJuSGFuZGxlciIsIl9saWZlY3ljbGVIb29rcyIsImhhc1Byb3RvIiwiV1hFbnZpcm9ubWVudCIsInBsYXRmb3JtIiwid2VleFBsYXRmb3JtIiwiVUEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpc0lPUyIsImlzQ2hyb21lIiwiX2lzU2VydmVyIiwiX1NldCIsIlZVRV9FTlYiLCJfX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fIiwiU2V0IiwiZ2VuZXJhdGVDb21wb25lbnRUcmFjZSIsImhhc0NvbnNvbGUiLCJjbGFzc2lmeVJFIiwiY2xhc3NpZnkiLCJtc2ciLCJ0cmFjZSIsImluY2x1ZGVGaWxlIiwiZmlsZSIsIl9fZmlsZSIsInJlcGVhdCIsImN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSIsInVpZCIsInN1YnMiLCJhZGRTdWIiLCJzdWIiLCJyZW1vdmVTdWIiLCJhZGREZXAiLCJyYXciLCJwcm90b3R5cGVBY2Nlc3NvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiYXJyYXlQcm90byIsImFycmF5TWV0aG9kcyIsIm1ldGhvZHNUb1BhdGNoIiwibWV0aG9kIiwib3JpZ2luYWwiLCJvYnNlcnZlQXJyYXkiLCJhcnJheUtleXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiYXVnbWVudCIsIndhbGsiLCJpdGVtcyIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQiLCJwb3J0MiIsInBvcnQxIiwib25tZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJhbGxvd2VkR2xvYmFscyIsIndhcm5Ob25QcmVzZW50IiwiaGFzUHJveHkiLCJQcm94eSIsImlzQnVpbHRJbk1vZGlmaWVyIiwiaGFzSGFuZGxlciIsImlzQWxsb3dlZCIsImdldEhhbmRsZXIiLCJfd2l0aFN0cmlwcGVkIiwicGVyZiIsImNsZWFyTWFya3MiLCJjbGVhck1lYXN1cmVzIiwidWlkJDEiLCJpc1JlbmRlcldhdGNoZXIiLCJkZWVwIiwiYWN0aXZlIiwiZGVwcyIsIm5ld0RlcHMiLCJkZXBJZHMiLCJuZXdEZXBJZHMiLCJleHByZXNzaW9uIiwiY2xlYW51cERlcHMiLCJ0bXAiLCJtb3VudGVkTm9kZSIsInBhdHRlcm5UeXBlcyIsIlJlZ0V4cCIsIktlZXBBbGl2ZSIsImluY2x1ZGUiLCJleGNsdWRlIiwiY3JlYXRlZCIsImRlc3Ryb3llZCIsIm1vdW50ZWQiLCJyZWYkMSIsInBhcnNlSW50Iiwic3NyQ29udGV4dCIsInZlcnNpb24iLCJlbXB0eVN0eWxlIiwiYWNjZXB0VmFsdWUiLCJhdHRyIiwic3ZnIiwibWF0aCIsImlzSFRNTFRhZyIsImJhc2VNb2R1bGVzIiwia2xhc3MiLCJldmVudHMiLCJjc3NUZXh0IiwibGlzdERlbGltaXRlciIsInByb3BlcnR5RGVsaW1pdGVyIiwiY3NzVmFyUkUiLCJpbXBvcnRhbnRSRSIsInNldFByb3BlcnR5Iiwibm9ybWFsaXplZE5hbWUiLCJub3JtYWxpemUiLCJ2ZW5kb3JOYW1lcyIsImNhcE5hbWUiLCJoYXNUcmFuc2l0aW9uIiwib250cmFuc2l0aW9uZW5kIiwib253ZWJraXR0cmFuc2l0aW9uZW5kIiwib25hbmltYXRpb25lbmQiLCJvbndlYmtpdGFuaW1hdGlvbmVuZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInBsYXRmb3JtTW9kdWxlcyIsInBhdGNoIiwidm1vZGVsIiwiZGlyZWN0aXZlIiwiX3ZPcHRpb25zIiwicHJldk9wdGlvbnMiLCJjdXJPcHRpb25zIiwibmVlZFJlc2V0IiwidHJhbnNpdGlvbiQkMSIsIm9yaWdpbmFsRGlzcGxheSIsIl9fdk9yaWdpbmFsRGlzcGxheSIsImRpc3BsYXkiLCJ1bmJpbmQiLCJwbGF0Zm9ybURpcmVjdGl2ZXMiLCJ0cmFuc2l0aW9uUHJvcHMiLCJtb2RlIiwiVHJhbnNpdGlvbiIsIl9sZWF2aW5nIiwib2xkUmF3Q2hpbGQiLCJkZWxheWVkTGVhdmUiLCJtb3ZlQ2xhc3MiLCJUcmFuc2l0aW9uR3JvdXAiLCJwcmV2Q2hpbGRyZW4iLCJyYXdDaGlsZHJlbiIsInRyYW5zaXRpb25EYXRhIiwia2VwdCIsInJlbW92ZWQiLCJjJDEiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiaGFzTW92ZSIsIl9yZWZsb3ciLCJib2R5Iiwib2Zmc2V0SGVpZ2h0IiwicHJvcGVydHlOYW1lIiwiX2hhc01vdmUiLCJjbG9uZU5vZGUiLCJwbGF0Zm9ybUNvbXBvbmVudHMiLCJkZWZhdWx0U2V0VGltb3V0IiwiRXJyb3IiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwiSXRlbSIsImFycmF5IiwidGl0bGUiLCJicm93c2VyIiwiYXJndiIsInZlcnNpb25zIiwiYWRkTGlzdGVuZXIiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJjd2QiLCJjaGRpciIsInVtYXNrIiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNjb3BlIiwic2VsZiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsb3NlIiwidW5yZWYiLCJlbnJvbGwiLCJtc2VjcyIsIl9pZGxlVGltZW91dElkIiwiX2lkbGVUaW1lb3V0IiwidW5lbnJvbGwiLCJfdW5yZWZBY3RpdmUiLCJfb25UaW1lb3V0IiwiY2xlYXJJbW1lZGlhdGUiLCJ0YXNrIiwidGFza3NCeUhhbmRsZSIsIm5leHRIYW5kbGUiLCJyZWdpc3RlckltbWVkaWF0ZSIsImhhbmRsZSIsInJ1bklmUHJlc2VudCIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uIiwiY2FuVXNlUG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsImluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uIiwibWVzc2FnZVByZWZpeCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImF0dGFjaEV2ZW50IiwiaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24iLCJpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uIiwiaHRtbCIsImRvYyIsImRvY3VtZW50RWxlbWVudCIsInNjcmlwdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsImluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24iLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwiQ29tcG9uZW50IiwiY29udGVudCIsImxvY2FscyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiYWRkU3R5bGVzVG9Eb20iLCJkb21TdHlsZSIsInN0eWxlc0luRG9tIiwicGFydHMiLCJhZGRTdHlsZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsInN0eWxlRWxlbWVudCIsImhlYWQiLCJpc1Byb2R1Y3Rpb24iLCJpc09sZElFIiwic3R5bGVJbmRleCIsInNpbmdsZXRvbkNvdW50ZXIiLCJzaW5nbGV0b25FbGVtZW50IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJtZWRpYSIsInNvdXJjZU1hcCIsInN0eWxlU2hlZXQiLCJyZXBsYWNlVGV4dCIsImNzc05vZGUiLCJzb3VyY2VzIiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiaGFzRG9jdW1lbnQiLCJsaXN0VG9TdHlsZXMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudElkIiwiX2lzUHJvZHVjdGlvbiIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlbWVudCIsIm5ld1N0eWxlcyIsInBhcnQiLCJyYXdTY3JpcHRFeHBvcnRzIiwiY29tcGlsZWRUZW1wbGF0ZSIsImNzc01vZHVsZXMiLCJlc01vZHVsZSIsInNjcmlwdEV4cG9ydHMiLCJfdXBsb2FkIiwiX3VwbG9hZDIiLCJfcGxheWVyIiwiX3BsYXllcjIiLCJfbHlyaWNFZGl0b3IiLCJfbHlyaWNFZGl0b3IyIiwiX21vZGFscyIsIl9tb2RhbHMyIiwiX25hdk1lbnUiLCJfbmF2TWVudTIiLCJfbHJjS2l0IiwiX2NhY2hlIiwiX2NhY2hlMiIsImxyY0Zvcm1hdCIsIm11c2ljVXJsIiwiZWRpdGluZyIsInJ1bm5lciIsIlJ1bm5lciIsIkxyYyIsInBhcnNlIiwibHlyaWNBcnJheSIsInVwbG9hZE11c2ljIiwibXVzaWMiLCJwbGF5ZXIiLCJyZW1vdmVMeXJpYyIsInBsYXl0byIsInRpbWUiLCJ0aW1ldXBkYXRlIiwidGltZXN0YW1wIiwibHlyaWMiLCJVcGxvYWQiLCJQbGF5ZXIiLCJMeXJpY0VkaXRvciIsIk1vZGFscyIsIk5hdk1lbnUiLCJfdGhpcyIsInVwbG9hZCIsImZpbGVzIiwidHlwZV9tYXRjaCIsInJlYWRGb3JtYXQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiYWNjZXB0IiwiY2xpY2siLCJfdm0iLCJfaCIsIl9yYW5nZSIsIl9yYW5nZTIiLCJfdGltZVBhbmVsIiwiX3RpbWVQYW5lbDIiLCJfdXRpbHMiLCJob3ZlciIsImlzTW9iaWxlIiwibXV0ZWQiLCJwYXVzZWQiLCJjdXJyZW50VGltZSIsInZvbHVtZSIsImF1ZGlvIiwic2VlayIsInBlcmNlbnQiLCJ2b2x1bWVTZWVrIiwiX3RoaXMyIiwicHJlbG9hZCIsImdsb2JhbEtleWRvd24iLCJtdXNpY1JhbmdlIiwiY2hhbmdlVmFsdWUiLCJzb3VuZFJhbmdlIiwicGF1c2UiLCJwbGF5IiwiUmFuZ2UiLCJUaW1lUGFuZWwiLCJzZWxmVmFsdWUiLCJkcmFnaW5nIiwiZHJhZ1ZhbHVlIiwidGh1bWIiLCJvZmZzZXQydmFsdWUiLCJvZmZzZXRYIiwiZW1pdFNlZWsiLCJlbWl0RHJhZ1NlZWsiLCJvZmZzZXQiLCJiYXIiLCJjbGllbnRXaWR0aCIsImRyYWdnZXIiLCJEcmFnZ2VyIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJzZXRQcm90b3R5cGVPZiIsInNhdmVMcmMiLCJpc0ZpbGVTYXZlclN1cHBvcnRlZCIsIkZpbGVTYXZlciIsInNhdmVBcyIsIkJsb2IiLCJhbGVydCIsInRpbWVzdGFtcDJ0aW1lc3RyIiwib25seUludGVnZXIiLCJwYWRaZXJvIiwibnVtIiwic2l6ZSIsInRvRml4ZWQiLCJ0aW1lc3RyMnRpbWVzdGFtcCIsIl9zdHIkc3BsaXQiLCJfc3RyJHNwbGl0MiIsIl9zbGljZWRUb0FycmF5IiwibWludXRlIiwic2Vjb25kIiwiVG9vbHRpcFBvc2l0aW9uIiwiQ2FjaGUiLCJEZWxheUhvdmVyIiwiU2Nyb2xsZXIiLCJFdmVudEVtaXR0ZXIiLCJzbGljZUl0ZXJhdG9yIiwiX2FyciIsIl9kIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsIl9jcmVhdGVDbGFzcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfZ2V0Iiwib2JqZWN0IiwicmVjZWl2ZXIiLCJkZXNjIiwiX2V2ZW50ZW1pdHRlciIsIl9ldmVudGVtaXR0ZXIyIiwiX2ZpbGVzYXZlciIsIl9maWxlc2F2ZXIyIiwiX3VuaWRyYWdnZXIiLCJfdW5pZHJhZ2dlcjIiLCJfaXNfanMiLCJfaXNfanMyIiwiX2V4dGVuZCIsIl9leHRlbmQyIiwiX2Nsb25lIiwiX2Nsb25lMiIsIl9wYWNrYWdlIiwiX3BhY2thZ2UyIiwiX0V2ZW50RW1pdHRlciIsIl9sZW4iLCJfa2V5IiwiaXQiLCJfZ2V0MiIsIl9nZXQzIiwiRXZlbnRFbWl0dGVyMiIsInZpZXdwb3J0IiwiX3RoaXMzIiwidGltZXIiLCJzY3JvbGxhYmxlU3RhcnRUaW1lIiwiRGF0ZSIsInN0ZXAiLCJpc0NhblNjcm9sbCIsImxldERlbGF5Iiwibm93IiwidGFyZ2V0VG9wIiwiX3RoaXM0IiwiY2xlYXJUaW1lciIsInN0YXJ0VG9wIiwic2Nyb2xsVG9wIiwiZW5kVG9wIiwiZGlmZlRvcCIsInBlclN0ZXAiLCJjdXJUb3AiLCJfRXZlbnRFbWl0dGVyMiIsImVsZW1lbnQiLCJfdGhpczUiLCJlbnRlclRpbWVyIiwibGVhdmVUaW1lciIsImNmZyIsImVudGVyRGVsYXkiLCJsZWF2ZURlbGF5IiwidW5pcXVlIiwiY2xvc2VMYXN0SG92ZXIiLCJjbGVhckxlYXZlVGltZXIiLCJMYXN0SG92ZXIiLCJjbGVhckVudGVyVGltZXIiLCJwcmVmaXgiLCJQS0ciLCJsb2NhbFN0b3JhZ2UiLCIkdmVyc2lvbiIsImRlZmF1bHRWYWx1ZSIsInJlYWQiLCJ3cml0ZSIsImNvZGUiLCJoYXNGYWxzZSIsImZsYWciLCJwcmV2ZW50RGVmYXVsdCIsIl9VbmlkcmFnZ2VyIiwiZWxlbSIsImNvbnRhaW5lciIsIl90aGlzNiIsImVlIiwiX2VlIiwiX2VlMiIsImhhbmRsZXMiLCJiaW5kSGFuZGxlcyIsImRyYWdTdGFydFBvaW50Iiwib2Zmc2V0TGVmdCIsInBvaW50ZXIiLCJtb3ZlVmVjdG9yIiwieCIsIlVuaWRyYWdnZXIiLCJ0b29sdGlwIiwiZ2VuZXJhdGVEaXJzIiwiaWR4IiwicmVjdCIsInJpZ2h0IiwiYm90dG9tIiwiY2xpZW50SGVpZ2h0IiwibmVnYXRpdmUiLCJ3aWR0aCIsImhlaWdodCIsInRvb2x0aXBSZWN0Iiwib3ZlcmZsb3dWYWx1ZXMiLCJyZWN0T3ZlcmZsb3dDb3VudCIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiX2NvbmYiLCJjb25maWd1cmUiLCJjb25mIiwiZGVsaW1pdGVyIiwibWF4TGlzdGVuZXJzIiwiZGVmYXVsdE1heExpc3RlbmVycyIsIndpbGRjYXJkIiwibmV3TGlzdGVuZXIiLCJ2ZXJib3NlTWVtb3J5TGVhayIsImxpc3RlbmVyVHJlZSIsImxvZ1Bvc3NpYmxlTWVtb3J5TGVhayIsImNvdW50IiwiZXZlbnROYW1lIiwiZXJyb3JNc2ciLCJzZWFyY2hMaXN0ZW5lclRyZWUiLCJsZWFmIiwiYnJhbmNoIiwieFRyZWUiLCJ4eFRyZWUiLCJpc29sYXRlZEJyYW5jaCIsImVuZFJlYWNoZWQiLCJ0eXBlTGVuZ3RoIiwiY3VycmVudFR5cGUiLCJuZXh0VHlwZSIsIl9saXN0ZW5lcnMiLCIqKiIsImdyb3dMaXN0ZW5lclRyZWUiLCJsaXN0ZW5lciIsIndhcm5lZCIsInNldE1heExpc3RlbmVycyIsIm1hbnkiLCJ0dGwiLCJfb3JpZ2luIiwiYWwiLCJfYWxsIiwiZW1pdEFzeW5jIiwicHJvbWlzZXMiLCJhbGwiLCJvbkFueSIsInJlY3Vyc2l2ZWx5R2FyYmFnZUNvbGxlY3QiLCJsZWFmcyIsImlMZWFmIiwicG9zaXRpb24iLCJvZmZBbnkiLCJsaXN0ZW5lckNvdW50IiwibGlzdGVuZXJzQW55IiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsInZpZXciLCJnZXRfVVJMIiwid2Via2l0VVJMIiwic2F2ZV9saW5rIiwiY2FuX3VzZV9zYXZlX2xpbmsiLCJNb3VzZUV2ZW50Iiwid2Via2l0X3JlcV9mcyIsIndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtIiwicmVxX2ZzIiwicmVxdWVzdEZpbGVTeXN0ZW0iLCJtb3pSZXF1ZXN0RmlsZVN5c3RlbSIsInRocm93X291dHNpZGUiLCJleCIsImZvcmNlX3NhdmVhYmxlX3R5cGUiLCJmc19taW5fc2l6ZSIsImFyYml0cmFyeV9yZXZva2VfdGltZW91dCIsInJldm9rZSIsInJldm9rZXIiLCJyZXZva2VPYmplY3RVUkwiLCJjaHJvbWUiLCJkaXNwYXRjaCIsImZpbGVzYXZlciIsImV2ZW50X3R5cGVzIiwiYXV0b19ib20iLCJibG9iIiwibm9fYXV0b19ib20iLCJvYmplY3RfdXJsIiwidGFyZ2V0X3ZpZXciLCJibG9iX2NoYW5nZWQiLCJkaXNwYXRjaF9hbGwiLCJmc19lcnJvciIsImxvY2F0aW9uIiwiaHJlZiIsIm5ld190YWIiLCJvcGVuIiwic2FmYXJpIiwicmVhZHlTdGF0ZSIsIkRPTkUiLCJhYm9ydGFibGUiLCJmdW5jIiwiY3JlYXRlX2lmX25vdF9mb3VuZCIsImV4Y2x1c2l2ZSIsIklOSVQiLCJkb3dubG9hZCIsIndlYmtpdFNsaWNlIiwiVEVNUE9SQVJZIiwiZnMiLCJnZXREaXJlY3RvcnkiLCJzYXZlIiwiZ2V0RmlsZSIsImNyZWF0ZVdyaXRlciIsIndyaXRlciIsIm9ud3JpdGVlbmQiLCJ0b1VSTCIsIm9uZXJyb3IiLCJBQk9SVF9FUlIiLCJhYm9ydCIsIldSSVRJTkciLCJOT1RfRk9VTkRfRVJSIiwiRlNfcHJvdG8iLCJtc1NhdmVPck9wZW5CbG9iIiwib253cml0ZXN0YXJ0Iiwib25wcm9ncmVzcyIsIm9ud3JpdGUiLCJvbmFib3J0IiwiX193ZWJwYWNrX2FtZF9vcHRpb25zX18iLCJVbmlwb2ludGVyIiwicHJvdG8iLCJfYmluZEhhbmRsZXMiLCJ1bmJpbmRIYW5kbGVzIiwiaXNBZGQiLCJiaW5kTWV0aG9kIiwidG91Y2hBY3Rpb24iLCJfdG91Y2hBY3Rpb25WYWx1ZSIsIl9iaW5kU3RhcnRFdmVudCIsIlBvaW50ZXJFdmVudCIsInBvaW50ZXJEb3duIiwiaXNPa2F5Iiwib2theVBvaW50ZXJEb3duIiwicG9pbnRlckRvd25Qb2ludGVyIiwicG9pbnRlckRvd25CbHVyIiwiX2JpbmRQb3N0U3RhcnRFdmVudHMiLCJlbWl0RXZlbnQiLCJjdXJzb3JOb2RlcyIsIlRFWFRBUkVBIiwiSU5QVVQiLCJTRUxFQ1QiLCJPUFRJT04iLCJjbGlja1R5cGVzIiwicmFkaW8iLCJjaGVja2JveCIsImJ1dHRvbiIsInN1Ym1pdCIsImltYWdlIiwiaXNDdXJzb3JOb2RlIiwibm9kZU5hbWUiLCJpc0NsaWNrVHlwZSIsIl9wb2ludGVyUmVzZXQiLCJmb2N1c2VkIiwiY2FuQmx1ciIsImJsdXIiLCJwb2ludGVyTW92ZSIsIl9kcmFnUG9pbnRlck1vdmUiLCJfZHJhZ01vdmUiLCJwYWdlWCIsInkiLCJwYWdlWSIsImlzRHJhZ2dpbmciLCJoYXNEcmFnU3RhcnRlZCIsIl9kcmFnU3RhcnQiLCJhYnMiLCJwb2ludGVyVXAiLCJfZHJhZ1BvaW50ZXJVcCIsIl9kcmFnRW5kIiwiX3N0YXRpY0NsaWNrIiwiaXNQcmV2ZW50aW5nQ2xpY2tzIiwiZHJhZ1N0YXJ0IiwiZHJhZ01vdmUiLCJkcmFnRW5kIiwib25jbGljayIsImlzSWdub3JpbmdNb3VzZVVwIiwic3RhdGljQ2xpY2siLCJnZXRQb2ludGVyUG9pbnQiLCJFdkVtaXR0ZXIiLCJiaW5kU3RhcnRFdmVudCIsInVuYmluZFN0YXJ0RXZlbnQiLCJzdGFydEV2ZW50IiwiaGFuZGxlRXZlbnQiLCJnZXRUb3VjaCIsInRvdWNoZXMiLCJ0b3VjaCIsImlkZW50aWZpZXIiLCJwb2ludGVySWRlbnRpZmllciIsIm9ubW91c2Vkb3duIiwiX3BvaW50ZXJEb3duIiwib250b3VjaHN0YXJ0IiwiY2hhbmdlZFRvdWNoZXMiLCJvbnBvaW50ZXJkb3duIiwiaXNQb2ludGVyRG93biIsInBvaW50ZXJJZCIsInBvc3RTdGFydEV2ZW50cyIsIm1vdXNlZG93biIsInRvdWNoc3RhcnQiLCJwb2ludGVyZG93biIsIl9ib3VuZFBvaW50ZXJFdmVudHMiLCJfdW5iaW5kUG9zdFN0YXJ0RXZlbnRzIiwib25tb3VzZW1vdmUiLCJfcG9pbnRlck1vdmUiLCJvbnBvaW50ZXJtb3ZlIiwib250b3VjaG1vdmUiLCJvbm1vdXNldXAiLCJfcG9pbnRlclVwIiwib25wb2ludGVydXAiLCJvbnRvdWNoZW5kIiwiX3BvaW50ZXJEb25lIiwicG9pbnRlckRvbmUiLCJvbnBvaW50ZXJjYW5jZWwiLCJfcG9pbnRlckNhbmNlbCIsIm9udG91Y2hjYW5jZWwiLCJwb2ludGVyQ2FuY2VsIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fIiwib25jZUV2ZW50cyIsIl9vbmNlRXZlbnRzIiwib25jZUxpc3RlbmVycyIsImFsbE9mZiIsIm5vdCIsImFycmF5U2xpY2UiLCJwYXJhbWV0ZXJzIiwiYW55IiwicmVnZXhwQ2hlY2siLCJyZWdleHAiLCJyZWdleHBzIiwic2V0SW50ZXJmYWNlcyIsImZ1bmN0aW9uIiwiaW50ZXJmYWNlcyIsImFwaSIsInByZXZpb3VzSXMiLCJWRVJTSU9OIiwibnVsbCIsImJvb2xlYW4iLCJkYXRlIiwibmFuIiwianNvbiIsInNhbWVUeXBlIiwidmFsdWUxIiwidmFsdWUyIiwic3RyaW5nIiwiY2hhciIsImVtcHR5IiwiZXhpc3R5IiwidHJ1dGh5IiwiZmFsc3kiLCJzcGFjZSIsImNoYXJhY3RlckNvZGUiLCJlcXVhbCIsImV2ZW4iLCJudW1iIiwib2RkIiwicG9zaXRpdmUiLCJhYm92ZSIsIm1pbiIsInVuZGVyIiwid2l0aGluIiwiZGVjaW1hbCIsImludGVnZXIiLCJmaW5pdGUiLCJJbmZpbml0eSIsImluZmluaXRlIiwidXJsIiwiZW1haWwiLCJjcmVkaXRDYXJkIiwiYWxwaGFOdW1lcmljIiwidGltZVN0cmluZyIsImRhdGVTdHJpbmciLCJ1c1ppcENvZGUiLCJjYVBvc3RhbENvZGUiLCJ1a1Bvc3RDb2RlIiwibmFucFBob25lIiwiZXBwUGhvbmUiLCJzb2NpYWxTZWN1cml0eU51bWJlciIsImFmZmlybWF0aXZlIiwiaGV4YWRlY2ltYWwiLCJoZXhDb2xvciIsImlwdjQiLCJpcHY2IiwiaXAiLCJzdWJzdHIiLCJ1cHBlckNhc2UiLCJsb3dlckNhc2UiLCJzdGFydFdpdGgiLCJlbmRXaXRoIiwiY2FwaXRhbGl6ZWQiLCJ3b3JkcyIsInBhbGluZHJvbWUiLCJyZXZlcnNlIiwiZGF5cyIsIm1vbnRocyIsInRvZGF5IiwidG9kYXlTdHJpbmciLCJ0b0RhdGVTdHJpbmciLCJ5ZXN0ZXJkYXkiLCJ5ZXN0ZXJkYXlTdHJpbmciLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInRvbW9ycm93IiwidG9tb3Jyb3dTdHJpbmciLCJwYXN0IiwiZ2V0VGltZSIsImZ1dHVyZSIsImRheSIsImRheVN0cmluZyIsImdldERheSIsIm1vbnRoIiwibW9udGhTdHJpbmciLCJnZXRNb250aCIsInllYXIiLCJnZXRGdWxsWWVhciIsImxlYXBZZWFyIiwid2Vla2VuZCIsIndlZWtkYXkiLCJpbkRhdGVSYW5nZSIsInN0YXJ0T2JqIiwiZW5kT2JqIiwiZ2l2ZW5EYXRlIiwiaW5MYXN0V2VlayIsImluTGFzdE1vbnRoIiwic2V0TW9udGgiLCJpbkxhc3RZZWFyIiwic2V0RnVsbFllYXIiLCJpbk5leHRXZWVrIiwiaW5OZXh0TW9udGgiLCJpbk5leHRZZWFyIiwicXVhcnRlck9mWWVhciIsInF1YXJ0ZXJOdW1iZXIiLCJkYXlMaWdodFNhdmluZ1RpbWUiLCJqYW51YXJ5IiwianVseSIsInN0ZFRpbWV6b25lT2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJ2ZW5kb3IiLCJhcHBWZXJzaW9uIiwiZmlyZWZveCIsImVkZ2UiLCJpZSIsIm9wZXJhIiwiaW9zIiwiaXBob25lIiwiaXBhZCIsImlwb2QiLCJhbmRyb2lkIiwiYW5kcm9pZFBob25lIiwiYW5kcm9pZFRhYmxldCIsImJsYWNrYmVycnkiLCJkZXNrdG9wIiwibW9iaWxlIiwidGFibGV0IiwibGludXgiLCJtYWMiLCJ3aW5kb3dzIiwid2luZG93c1Bob25lIiwid2luZG93c1RhYmxldCIsIm9ubGluZSIsIm9uTGluZSIsIm9mZmxpbmUiLCJ0b3VjaERldmljZSIsIkRvY3VtZW50VG91Y2giLCJwcm9wZXJ0eUNvdW50IiwicHJvcGVydGllcyIsInByb3BlcnR5RGVmaW5lZCIsIndpbmRvd09iamVjdCIsImRvbU5vZGUiLCJpbkFycmF5Iiwic29ydGVkIiwic2V0UmVnZXhwIiwicmVnZXhwTmFtZSIsInIiLCJzZXROYW1lc3BhY2UiLCJ0b1N0ciIsImhhc093bkNvbnN0cnVjdG9yIiwiaGFzSXNQcm90b3R5cGVPZiIsImNvcHkiLCJjb3B5SXNBcnJheSIsIkJ1ZmZlciIsIl9pbnN0YW5jZW9mIiwiZGVwdGgiLCJpbmNsdWRlTm9uRW51bWVyYWJsZSIsIm5hdGl2ZU1hcCIsIm5hdGl2ZVNldCIsIm5hdGl2ZVByb21pc2UiLCJfX2lzQXJyYXkiLCJfX2lzUmVnRXhwIiwiX19nZXRSZWdFeHBGbGFncyIsIl9faXNEYXRlIiwidXNlQnVmZmVyIiwiaXNCdWZmZXIiLCJhbGxQYXJlbnRzIiwiYWxsQ2hpbGRyZW4iLCJrZXlDaGlsZCIsInZhbHVlQ2hpbGQiLCJlbnRyeUNoaWxkIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwic3ltYm9scyIsInN5bWJvbCIsImFsbFByb3BlcnR5TmFtZXMiLCJfX29ialRvU3RyIiwicmUiLCJmbGFncyIsImlnbm9yZUNhc2UiLCJtdWx0aWxpbmUiLCJNYXAiLCJjbG9uZVByb3RvdHlwZSIsInR5cGVkQXJyYXlTdXBwb3J0IiwiVWludDhBcnJheSIsImZvbyIsInN1YmFycmF5IiwiYnl0ZUxlbmd0aCIsImtNYXhMZW5ndGgiLCJUWVBFRF9BUlJBWV9TVVBQT1JUIiwiY3JlYXRlQnVmZmVyIiwidGhhdCIsIlJhbmdlRXJyb3IiLCJhcmciLCJlbmNvZGluZ09yT2Zmc2V0IiwiYWxsb2NVbnNhZmUiLCJBcnJheUJ1ZmZlciIsImZyb21BcnJheUJ1ZmZlciIsImZyb21TdHJpbmciLCJmcm9tT2JqZWN0IiwiYXNzZXJ0U2l6ZSIsImFsbG9jIiwiZmlsbCIsImVuY29kaW5nIiwiY2hlY2tlZCIsImlzRW5jb2RpbmciLCJmcm9tQXJyYXlMaWtlIiwiYnl0ZU9mZnNldCIsImJ1ZmZlciIsImlzbmFuIiwiU2xvd0J1ZmZlciIsImlzVmlldyIsImxvd2VyZWRDYXNlIiwidXRmOFRvQnl0ZXMiLCJiYXNlNjRUb0J5dGVzIiwic2xvd1RvU3RyaW5nIiwiaGV4U2xpY2UiLCJ1dGY4U2xpY2UiLCJhc2NpaVNsaWNlIiwibGF0aW4xU2xpY2UiLCJiYXNlNjRTbGljZSIsInV0ZjE2bGVTbGljZSIsInN3YXAiLCJiaWRpcmVjdGlvbmFsSW5kZXhPZiIsImFycmF5SW5kZXhPZiIsImxhc3RJbmRleE9mIiwiYnVmIiwiaW5kZXhTaXplIiwicmVhZFVJbnQxNkJFIiwiYXJyTGVuZ3RoIiwidmFsTGVuZ3RoIiwiZm91bmRJbmRleCIsImZvdW5kIiwiaGV4V3JpdGUiLCJyZW1haW5pbmciLCJzdHJMZW4iLCJwYXJzZWQiLCJ1dGY4V3JpdGUiLCJibGl0QnVmZmVyIiwiYXNjaWlXcml0ZSIsImFzY2lpVG9CeXRlcyIsImxhdGluMVdyaXRlIiwiYmFzZTY0V3JpdGUiLCJ1Y3MyV3JpdGUiLCJ1dGYxNmxlVG9CeXRlcyIsImJhc2U2NCIsImZyb21CeXRlQXJyYXkiLCJmaXJzdEJ5dGUiLCJjb2RlUG9pbnQiLCJieXRlc1BlclNlcXVlbmNlIiwic2Vjb25kQnl0ZSIsInRoaXJkQnl0ZSIsImZvdXJ0aEJ5dGUiLCJ0ZW1wQ29kZVBvaW50IiwiZGVjb2RlQ29kZVBvaW50c0FycmF5IiwiY29kZVBvaW50cyIsIk1BWF9BUkdVTUVOVFNfTEVOR1RIIiwiZnJvbUNoYXJDb2RlIiwib3V0IiwidG9IZXgiLCJieXRlcyIsImNoZWNrT2Zmc2V0IiwiZXh0IiwiY2hlY2tJbnQiLCJvYmplY3RXcml0ZVVJbnQxNiIsImxpdHRsZUVuZGlhbiIsIm9iamVjdFdyaXRlVUludDMyIiwiY2hlY2tJRUVFNzU0Iiwid3JpdGVGbG9hdCIsIm5vQXNzZXJ0IiwiaWVlZTc1NCIsIndyaXRlRG91YmxlIiwiYmFzZTY0Y2xlYW4iLCJzdHJpbmd0cmltIiwiSU5WQUxJRF9CQVNFNjRfUkUiLCJ1bml0cyIsImxlYWRTdXJyb2dhdGUiLCJieXRlQXJyYXkiLCJoaSIsImxvIiwidG9CeXRlQXJyYXkiLCJkc3QiLCJJTlNQRUNUX01BWF9CWVRFUyIsInBvb2xTaXplIiwiX2F1Z21lbnQiLCJzcGVjaWVzIiwiYWxsb2NVbnNhZmVTbG93IiwiX2lzQnVmZmVyIiwiY29tcGFyZSIsInN3YXAxNiIsInN3YXAzMiIsInN3YXA2NCIsImVxdWFscyIsImluc3BlY3QiLCJ0aGlzU3RhcnQiLCJ0aGlzRW5kIiwidGhpc0NvcHkiLCJ0YXJnZXRDb3B5IiwiaW5jbHVkZXMiLCJ0b0pTT04iLCJuZXdCdWYiLCJzbGljZUxlbiIsInJlYWRVSW50TEUiLCJtdWwiLCJyZWFkVUludEJFIiwicmVhZFVJbnQ4IiwicmVhZFVJbnQxNkxFIiwicmVhZFVJbnQzMkxFIiwicmVhZFVJbnQzMkJFIiwicmVhZEludExFIiwicG93IiwicmVhZEludEJFIiwicmVhZEludDgiLCJyZWFkSW50MTZMRSIsInJlYWRJbnQxNkJFIiwicmVhZEludDMyTEUiLCJyZWFkSW50MzJCRSIsInJlYWRGbG9hdExFIiwicmVhZEZsb2F0QkUiLCJyZWFkRG91YmxlTEUiLCJyZWFkRG91YmxlQkUiLCJ3cml0ZVVJbnRMRSIsIm1heEJ5dGVzIiwid3JpdGVVSW50QkUiLCJ3cml0ZVVJbnQ4Iiwid3JpdGVVSW50MTZMRSIsIndyaXRlVUludDE2QkUiLCJ3cml0ZVVJbnQzMkxFIiwid3JpdGVVSW50MzJCRSIsIndyaXRlSW50TEUiLCJsaW1pdCIsIndyaXRlSW50QkUiLCJ3cml0ZUludDgiLCJ3cml0ZUludDE2TEUiLCJ3cml0ZUludDE2QkUiLCJ3cml0ZUludDMyTEUiLCJ3cml0ZUludDMyQkUiLCJ3cml0ZUZsb2F0TEUiLCJ3cml0ZUZsb2F0QkUiLCJ3cml0ZURvdWJsZUxFIiwid3JpdGVEb3VibGVCRSIsInRhcmdldFN0YXJ0IiwiZ2V0TGVucyIsImI2NCIsInZhbGlkTGVuIiwicGxhY2VIb2xkZXJzTGVuIiwibGVucyIsIl9ieXRlTGVuZ3RoIiwiQXJyIiwiY3VyQnl0ZSIsInJldkxvb2t1cCIsInRyaXBsZXRUb0Jhc2U2NCIsImxvb2t1cCIsImVuY29kZUNodW5rIiwidWludDgiLCJvdXRwdXQiLCJleHRyYUJ5dGVzIiwibWF4Q2h1bmtMZW5ndGgiLCJsZW4yIiwiaXNMRSIsIm1MZW4iLCJuQnl0ZXMiLCJlTGVuIiwiZU1heCIsImVCaWFzIiwibkJpdHMiLCJOYU4iLCJydCIsImxvZyIsIkxOMiIsImRlc2NyaXB0aW9uIiwibWFpbiIsInNjcmlwdHMiLCJsaW50IiwiZGV2IiwiYnVpbGQiLCJidWlsZDpjbGVhbiIsImJ1aWxkOnZpZXciLCJidWlsZDp3ZWJwYWNrIiwiZGVwbG95Iiwia2V5d29yZHMiLCJhdXRob3IiLCJob21lcGFnZSIsInJlcG9zaXRvcnkiLCJvbmxpbmVQYWdlIiwiYnVncyIsImxpY2Vuc2UiLCJkZXZEZXBlbmRlbmNpZXMiLCJhdXRvcHJlZml4ZXIiLCJiYWJlbC1jb3JlIiwiYmFiZWwtZXNsaW50IiwiYmFiZWwtaGVscGVyLXZ1ZS1qc3gtbWVyZ2UtcHJvcHMiLCJiYWJlbC1sb2FkZXIiLCJiYWJlbC1wbHVnaW4tc3ludGF4LWpzeCIsImJhYmVsLXBsdWdpbi10cmFuc2Zvcm0tdnVlLWpzeCIsImJhYmVsLXByZXNldC1sYXRlc3QiLCJiYWJlbC1wcmVzZXQtc3RhZ2UtMCIsImNzcy1sb2FkZXIiLCJlc2xpbnQiLCJlc2xpbnQtY29uZmlnLXN0YW5kYXJkIiwiZXNsaW50LWZyaWVuZGx5LWZvcm1hdHRlciIsImVzbGludC1sb2FkZXIiLCJlc2xpbnQtcGx1Z2luLWh0bWwiLCJlc2xpbnQtcGx1Z2luLXByb21pc2UiLCJlc2xpbnQtcGx1Z2luLXN0YW5kYXJkIiwiZmlsZS1sb2FkZXIiLCJnaC1wYWdlcyIsImpzb24tbG9hZGVyIiwibm9kZS1zYXNzIiwicmVzb2x2ZS11cmwtbG9hZGVyIiwic2Fzcy1sb2FkZXIiLCJ1cmwtbG9hZGVyIiwidnVlLWxvYWRlciIsInZ1ZS10ZW1wbGF0ZS1jb21waWxlciIsIndlYnBhY2siLCJ3ZWJwYWNrLWRldi1zZXJ2ZXIiLCJ5YW1sLWxvYWRlciIsImRlcGVuZGVuY2llcyIsImV2ZW50ZW1pdHRlcjIiLCJmaWxlc2F2ZXIuanMiLCJscmMta2l0IiwidW5pZHJhZ2dlciIsInZ1ZSIsInZ1ZS1pMThuIiwicmVtYWluIiwidGltZVJlbWFpbiIsImZpbHRlcnMiLCJjYWNoZU1hcCIsInVzZXJOYW1lIiwiY2FjaGVPYmoiLCJtb3VzZW92ZXIiLCJtb3VzZWxlYXZlIiwiY3VycmVudC10aW1lIiwiZHJhZy1zZWVrIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyMiIsIl90bWVudSIsIl90bWVudTIiLCJlZGl0aW5nSW5kZXgiLCJlZGl0aW5nVGV4dEluZGV4Iiwic2Nyb2xsZXIiLCJlZGl0TWVudSIsImV4aXRFZGl0IiwiZWRpdCIsImVkaXRUZXh0IiwibHJjIiwibHlyaWNzIiwicmVtb3ZlVGV4dCIsImluc2VydFRleHQiLCJyZW1vdmVUaW1lc3RhbXAiLCJfbHlyaWNBcnJheSIsInJlbW92ZUx5cmljcyIsInNldFRpbWVzdGFtcCIsInNldFRpbWVzdGFtcFRleHQiLCJzY3JvbGxUb0N1cnJlbnRMeXJpYyIsIm9mZnNldFRvcCIsInNjcm9sbFRvIiwidGltZVVwZGF0ZSIsImN1ckluZGV4IiwibHJjVXBkYXRlIiwiVG1lbnUiLCJMaW5lUGFyc2VyIiwiX2xpbmVQYXJzZXIiLCJfbGluZVBhcnNlcjIiLCJfbHJjIiwiX2xyYzIiLCJfcnVubmVyIiwiX3J1bm5lcjIiLCJsaW5lIiwiVFlQRSIsIklOVkFMSUQiLCJfTGluZVBhcnNlciRwYXJzZVRhZ3MiLCJwYXJzZVRhZ3MiLCJfTGluZVBhcnNlciRwYXJzZVRhZ3MyIiwidGFncyIsIlRJTUVfUkVHRVhQIiwicGFyc2VBc1RpbWUiLCJJTkZPX1JFR0VYUCIsInBhcnNlQXNJbmZvIiwibWF0Y2hzIiwiVEFHU19SRUdFWFAiLCJleGVjIiwidGltZXN0YW1wcyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwiVElNRSIsIklORk8iLCJvZmZzZXRUaW1lIiwiY29tYmluZSIsImxpbmVGb3JtYXQiLCJsaW5lcyIsImx5cmljc01hcCIsImx5cmljc0xpc3QiLCJ0aW1lc3RhbXBUb1N0cmluZyIsIl9jdXJyZW50SW5kZXgiLCJzZXRMcmMiLCJfb2Zmc2V0QWxpZ24iLCJfc29ydCIsIl9maW5kSW5kZXgiLCJzdGFydEluZGV4IiwiY3VyRnJvbnRUaW1lc3RhbXAiLCJORUdBVElWRV9JTkZJTklUWSIsImN1ckJhY2tUaW1lc3RhbXAiLCJQT1NJVElWRV9JTkZJTklUWSIsImdldEx5cmljIiwiX3Rvb2x0aXAiLCJfdG9vbHRpcDIiLCJUb29sdGlwIiwidmlzaWJpbGl0eSIsIkVsZW1lbnQiLCJ0bHBQb3MiLCJ3cmFwIiwiYXJyb3dTcGFjZSIsImRob3ZlciIsIm1lbnUiLCJlbnRlci1kZWxheSIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJrZXlkb3duIiwia2V5Q29kZSIsImlucHV0IiwiJHQiLCJ0cmFjay1ieSIsIl9leHRlbmRzIiwiYXNzaWduIiwiX2hlbHAiLCJfaGVscDIiLCJfbHJjRm9ybWF0VXBsb2FkIiwiX2xyY0Zvcm1hdFVwbG9hZDIiLCJfbHlyaWNVcGxvYWQiLCJfbHlyaWNVcGxvYWQyIiwiX2xyY1NhdmUiLCJfbHJjU2F2ZTIiLCJDT01QT05FTlRTIiwiaGVscCIsImxyYy1mb3JtYXQtdXBsb2FkIiwibHlyaWMtdXBsb2FkIiwibHJjLXNhdmUiLCJNQyIsImNvbmZpcm0iLCJtb2RhbE5hbWUiLCJtb2RhbENvbXBvbmVudCIsImlzU2hvdyIsImNvdmVyU2hvdyIsIm1vZGFsV3JhcHBlciIsIm9rIiwiY2FuY2VsIiwiSGVscCIsIkxyY0Zvcm1hdFVwbG9hZCIsIkx5cmljVXBsb2FkIiwiTHJjU2F2ZSIsInNhdmVPcHRpb25zIiwiaW5mb0ZpZWxkcyIsImxhYmVsIiwiZmllbGQiLCJieSIsInZlIiwibHlyaWNVcGRhdGUiLCJ0aSIsImluZm9VcGRhdGUiLCJmb3IiLCIkJGEiLCIkJGVsIiwiJCRjIiwiJCR2IiwiJCRpIiwiY292ZXIiLCJhZnRlci1sZWF2ZSIsInN0b3BQcm9wYWdhdGlvbiIsIm1vZGFscyIsInJlYWQtZm9ybWF0IiwibHlyaWMtYXJyYXkiLCJfdnVlSTE4biIsIl92dWVJMThuMiIsIl9sb2NhbGVzIiwiX2xvY2FsZXMyIiwibGFuZyIsImxhbmd1YWdlIiwidXNlckxhbmd1YWdlIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJsb2NhbGVzIiwiaTE4biIsImxvY2FsZSIsInN0YWNrIiwic2V0TG9jYWxlIiwicmVxdWVzdGVkIiwicGVuZGluZ0NhbGxiYWNrcyIsImlzUHJvbWlzZSIsImNhdGNoIiwiZ2V0V2F0Y2hlciIsInVud2F0Y2giLCJnZXREZXAiLCJpc05pbCIsIk9CSkVDVF9TVFJJTkciLCJpc0xpdGVyYWwiLCJleHAiLCJsaXRlcmFsVmFsdWVSRSIsInN0cmlwUXVvdGVzIiwiZ2V0UGF0aENoYXJUeXBlIiwiZm9ybWF0U3ViUGF0aCIsInRyaW1tZWQiLCJtYXliZVVuZXNjYXBlUXVvdGUiLCJuZXh0Q2hhciIsIklOX1NJTkdMRV9RVU9URSIsIklOX0RPVUJMRV9RVU9URSIsIm5ld0NoYXIiLCJhY3Rpb25zIiwiQVBQRU5EIiwiYWN0aW9uIiwidHlwZU1hcCIsIkJFRk9SRV9QQVRIIiwic3ViUGF0aERlcHRoIiwiUFVTSCIsIklOQ19TVUJfUEFUSF9ERVBUSCIsIlBVU0hfU1VCX1BBVEgiLCJJTl9TVUJfUEFUSCIsInBhdGhTdGF0ZU1hY2hpbmUiLCJFUlJPUiIsIkFGVEVSX1BBVEgiLCJwYXRoQ2FjaGUiLCJpbnN0YWxsZWQiLCJzZXR1cExhbmdWTSIsIkFzc2V0IiwibGFuZ1ZNIiwiT3ZlcnJpZGUiLCJDb25maWciLCJFeHRlbmQiLCJfJGxhbmciLCJfbGFuZ1Vud2F0Y2giLCJfZGVzdHJveSIsIm1pc3NpbmdIYW5kbGVyIiwiaTE4bkZvcm1hdHRlciIsIm1ha2VDb21wdXRlZEdldHRlciIsIm93bmVyIiwiUkVfTkFSR1MiLCJGb3JtYXQiLCJJTl9QQVRIIiwiQkVGT1JFX0lERU5UIiwiSU5fSURFTlQiLCJ3cyIsImlkZW50IiwiWyIsImVvZiIsIi4iLCIwIiwiJyIsIlwiIiwiXSIsImVsc2UiLCJQYXRoIiwicGF0aHMiLCJwYXJzZUFyZ3MiLCJmYWxsYmFja0xhbmciLCJleGlzdCIsImludGVycG9sYXRlIiwibGluayIsImxpbmtQbGFjZWhvbGRlciIsInRyYW5zbGF0ZWRzdHJpbmciLCJmb3JtYXQiLCJ0cmFuc2xhdGUiLCJ3YXJuRGVmYXVsdCIsImdldEFzc2V0TG9jYWxlIiwiZ2V0Q29tcG9uZW50TG9jYWxlIiwiZ2V0T2xkQ2hvaWNlSW5kZXhGaXhlZCIsImNob2ljZSIsImdldENob2ljZUluZGV4IiwiY2hvaWNlc0xlbmd0aCIsImZldGNoQ2hvaWNlIiwiY2hvaWNlcyIsInRjIiwidGUiLCIkdGMiLCIkdGUiLCIkbGFuZyIsIndlYnBhY2tDb250ZXh0IiwicmVxIiwid2VicGFja0NvbnRleHRSZXNvbHZlIiwiLi9lbiIsIi4vZW4ueW1sIiwiLi9pbmRleCIsIi4vaW5kZXguanMiLCIuL3poIiwiLi96aC55bWwiLCJjbG9zZV9lZGl0Iiwib3Blbl9lZGl0IiwibHJjX2luZm8iLCJyZW1vdmVfbHlyaWMiLCJwcmV2X2x5cmljIiwibmV4dF9seXJpYyIsIm1vZGFsIiwibHJjX2Zvcm1hdF9zYXZlIiwiaW5mb190aXRsZSIsImZpZWxkcyIsInNvbmdfdGl0bGUiLCJhcnRpc3QiLCJhbGJ1bSIsInNvbmd0ZXh0X2NyZWF0b3IiLCJscmNfY3JlYXRvciIsInNhdmVfdGl0bGUiLCJscmNfZm9ybWF0X3VwbG9hZCIsImx5cmljX3VwbG9hZCIsInNob3J0Y3V0X2tleSIsInBsYXlfY29udHJvbCIsImxlZnRfa2V5IiwicmlnaHRfa2V5IiwiYmFja3dhcmQiLCJmb3J3YXJkIiwibWFrZV9scmMiLCJ1cF9rZXkiLCJkb3duX2tleSIsInNvdXJjZV9jb2RlIiwibHlyaWNfZWRpdG9yIiwicmVtb3ZlX3RpbWVzdGFtcCIsInBsYXlfdG9fdGhpc19seXJpYyIsImZvbGxvd2luZ191bnNvcnRlZCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxZQUdBVixFQUFBLEtETU0sU0FBVUksRUFBUUQsRUFBU0gsR0FFaEMsWUFZQSxTQUFTVyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHRTFEeEYsR0FBQUcsR0FBQWYsRUFBQSxHRmtES2dCLEVBQVFMLEVBQXVCSSxHRWpEcENFLEVBQUFqQixFQUFBLEdGcURLa0IsRUFBUVAsRUFBdUJNLEVFcERw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LE9BQTZDb2xDLE9BQVVDLGlCQUFtQm50QyxNQUFBLE9BQUFvdEMsV0FBQSxPQUFBQyxRQUE2Q0MsV0FBQSxLQUFBQyxPQUFBLE1BQUFDLE1BQUEsS0FBQUMsaUJBQUEsT0FBQUMsWUFBQSxXQUFnR0MsV0FBQSxLQUFBbE4sUUFBQSxPQUFBcm1CLFNBQUEsVUFBd0R3ekIsbUJBQXNCNXRDLE1BQUEsWUFBQW01QixZQUFBLGVBQUF2d0IsT0FBQSxTQUFrRWlsQyxjQUFpQjd0QyxNQUFBLFNBQUFtNUIsWUFBQSxpQkFBQXZ3QixPQUFBLFNBQWlFMjZCLE1BQVN2akMsTUFBQSxLQUFBOHRDLGFBQUEsTUFBQUMsY0FBa0QvdEMsTUFBQSxPQUFBZ3VDLFNBQUEsU0FBQUMsVUFBQSxVQUFBQyxTQUFBLEtBQUFDLFFBQUEsTUFBd0ZDLFVBQWFwdUMsTUFBQSxPQUFBcXVDLE9BQUEsT0FBQUMsU0FBQSxTQUFBdEIsV0FBQSxRQUFBQyxXQUFBLFNBQTZGc0IsWUFBQSxNQUFvQm54QixRQUFXOG1CLEdBQUEsS0FBQUMsT0FBQSxPQUF5QnFLLGNBQWlCNVEsS0FBQSxLQUFBeDRELElBQUEsS0FBQWxQLE9BQUEsS0FBQXU0RSxpQkFBQSxRQUFBQyxtQkFBQSxVQUFBQyxtQkFBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiLi9hc3NldHMvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF92dWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF92dWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdnVlKTtcblx0XG5cdHZhciBfYXBwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfYXBwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwcCk7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIHJvb3QgPSBuZXcgX3Z1ZTIuZGVmYXVsdCh7XG5cdCAgZWw6ICcjYXBwJyxcblx0ICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7XG5cdCAgICByZXR1cm4gaChfYXBwMi5kZWZhdWx0LCB7IHJlZjogJ2FwcCcgfSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdF92dWUyLmRlZmF1bHQucHJvdG90eXBlLiRBcHAgPSByb290LiRyZWZzLmFwcDtcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCwgc2V0SW1tZWRpYXRlKSB7LyohXG5cdCAqIFZ1ZS5qcyB2Mi41LjE2XG5cdCAqIChjKSAyMDE0LTIwMTggRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyogICovXG5cdFxuXHR2YXIgZW1wdHlPYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcblx0XG5cdC8vIHRoZXNlIGhlbHBlcnMgcHJvZHVjZXMgYmV0dGVyIHZtIGNvZGUgaW4gSlMgZW5naW5lcyBkdWUgdG8gdGhlaXJcblx0Ly8gZXhwbGljaXRuZXNzIGFuZCBmdW5jdGlvbiBpbmxpbmluZ1xuXHRmdW5jdGlvbiBpc1VuZGVmICh2KSB7XG5cdCAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRGVmICh2KSB7XG5cdCAgcmV0dXJuIHYgIT09IHVuZGVmaW5lZCAmJiB2ICE9PSBudWxsXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVHJ1ZSAodikge1xuXHQgIHJldHVybiB2ID09PSB0cnVlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRmFsc2UgKHYpIHtcblx0ICByZXR1cm4gdiA9PT0gZmFsc2Vcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHZhbHVlIGlzIHByaW1pdGl2ZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNQcmltaXRpdmUgKHZhbHVlKSB7XG5cdCAgcmV0dXJuIChcblx0ICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcblx0ICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHxcblx0ICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgICAgdHlwZW9mIHZhbHVlID09PSAnc3ltYm9sJyB8fFxuXHQgICAgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbidcblx0ICApXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcblx0ICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuXHQgKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCAob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSByYXcgdHlwZSBzdHJpbmcgb2YgYSB2YWx1ZSBlLmcuIFtvYmplY3QgT2JqZWN0XVxuXHQgKi9cblx0dmFyIF90b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHRmdW5jdGlvbiB0b1Jhd1R5cGUgKHZhbHVlKSB7XG5cdCAgcmV0dXJuIF90b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcblx0ICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cblx0ICovXG5cdGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QgKG9iaikge1xuXHQgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1JlZ0V4cCAodikge1xuXHQgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2KSA9PT0gJ1tvYmplY3QgUmVnRXhwXSdcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHZhbCBpcyBhIHZhbGlkIGFycmF5IGluZGV4LlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNWYWxpZEFycmF5SW5kZXggKHZhbCkge1xuXHQgIHZhciBuID0gcGFyc2VGbG9hdChTdHJpbmcodmFsKSk7XG5cdCAgcmV0dXJuIG4gPj0gMCAmJiBNYXRoLmZsb29yKG4pID09PSBuICYmIGlzRmluaXRlKHZhbClcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSB2YWx1ZSB0byBhIHN0cmluZyB0aGF0IGlzIGFjdHVhbGx5IHJlbmRlcmVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9TdHJpbmcgKHZhbCkge1xuXHQgIHJldHVybiB2YWwgPT0gbnVsbFxuXHQgICAgPyAnJ1xuXHQgICAgOiB0eXBlb2YgdmFsID09PSAnb2JqZWN0J1xuXHQgICAgICA/IEpTT04uc3RyaW5naWZ5KHZhbCwgbnVsbCwgMilcblx0ICAgICAgOiBTdHJpbmcodmFsKVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIGlucHV0IHZhbHVlIHRvIGEgbnVtYmVyIGZvciBwZXJzaXN0ZW5jZS5cblx0ICogSWYgdGhlIGNvbnZlcnNpb24gZmFpbHMsIHJldHVybiBvcmlnaW5hbCBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b051bWJlciAodmFsKSB7XG5cdCAgdmFyIG4gPSBwYXJzZUZsb2F0KHZhbCk7XG5cdCAgcmV0dXJuIGlzTmFOKG4pID8gdmFsIDogblxuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIG1hcCBhbmQgcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGEga2V5XG5cdCAqIGlzIGluIHRoYXQgbWFwLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFrZU1hcCAoXG5cdCAgc3RyLFxuXHQgIGV4cGVjdHNMb3dlckNhc2Vcblx0KSB7XG5cdCAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGxpc3QgPSBzdHIuc3BsaXQoJywnKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0ICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiBleHBlY3RzTG93ZXJDYXNlXG5cdCAgICA/IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIG1hcFt2YWwudG9Mb3dlckNhc2UoKV07IH1cblx0ICAgIDogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbF07IH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgdGFnIGlzIGEgYnVpbHQtaW4gdGFnLlxuXHQgKi9cblx0dmFyIGlzQnVpbHRJblRhZyA9IG1ha2VNYXAoJ3Nsb3QsY29tcG9uZW50JywgdHJ1ZSk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBhdHRyaWJ1dGUgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUuXG5cdCAqL1xuXHR2YXIgaXNSZXNlcnZlZEF0dHJpYnV0ZSA9IG1ha2VNYXAoJ2tleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzJyk7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGFuIGl0ZW0gZnJvbSBhbiBhcnJheVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVtb3ZlIChhcnIsIGl0ZW0pIHtcblx0ICBpZiAoYXJyLmxlbmd0aCkge1xuXHQgICAgdmFyIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG5cdCAgICBpZiAoaW5kZXggPiAtMSkge1xuXHQgICAgICByZXR1cm4gYXJyLnNwbGljZShpbmRleCwgMSlcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cblx0ICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdGZ1bmN0aW9uIGhhc093biAob2JqLCBrZXkpIHtcblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIGNhY2hlZCB2ZXJzaW9uIG9mIGEgcHVyZSBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGNhY2hlZCAoZm4pIHtcblx0ICB2YXIgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHJldHVybiAoZnVuY3Rpb24gY2FjaGVkRm4gKHN0cikge1xuXHQgICAgdmFyIGhpdCA9IGNhY2hlW3N0cl07XG5cdCAgICByZXR1cm4gaGl0IHx8IChjYWNoZVtzdHJdID0gZm4oc3RyKSlcblx0ICB9KVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsaW1pdGVkIHN0cmluZy5cblx0ICovXG5cdHZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXHR2YXIgY2FtZWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCBmdW5jdGlvbiAoXywgYykgeyByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnOyB9KVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBDYXBpdGFsaXplIGEgc3RyaW5nLlxuXHQgKi9cblx0dmFyIGNhcGl0YWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuXHQgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSlcblx0fSk7XG5cdFxuXHQvKipcblx0ICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cblx0ICovXG5cdHZhciBoeXBoZW5hdGVSRSA9IC9cXEIoW0EtWl0pL2c7XG5cdHZhciBoeXBoZW5hdGUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJy0kMScpLnRvTG93ZXJDYXNlKClcblx0fSk7XG5cdFxuXHQvKipcblx0ICogU2ltcGxlIGJpbmQgcG9seWZpbGwgZm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBzdXBwb3J0IGl0Li4uIGUuZy5cblx0ICogUGhhbnRvbUpTIDEueC4gVGVjaG5pY2FsbHkgd2UgZG9uJ3QgbmVlZCB0aGlzIGFueW1vcmUgc2luY2UgbmF0aXZlIGJpbmQgaXNcblx0ICogbm93IG1vcmUgcGVyZm9ybWFudCBpbiBtb3N0IGJyb3dzZXJzLCBidXQgcmVtb3ZpbmcgaXQgd291bGQgYmUgYnJlYWtpbmcgZm9yXG5cdCAqIGNvZGUgdGhhdCB3YXMgYWJsZSB0byBydW4gaW4gUGhhbnRvbUpTIDEueCwgc28gdGhpcyBtdXN0IGJlIGtlcHQgZm9yXG5cdCAqIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXHQgKi9cblx0XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGZ1bmN0aW9uIHBvbHlmaWxsQmluZCAoZm4sIGN0eCkge1xuXHQgIGZ1bmN0aW9uIGJvdW5kRm4gKGEpIHtcblx0ICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHJldHVybiBsXG5cdCAgICAgID8gbCA+IDFcblx0ICAgICAgICA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKVxuXHQgICAgICAgIDogZm4uY2FsbChjdHgsIGEpXG5cdCAgICAgIDogZm4uY2FsbChjdHgpXG5cdCAgfVxuXHRcblx0ICBib3VuZEZuLl9sZW5ndGggPSBmbi5sZW5ndGg7XG5cdCAgcmV0dXJuIGJvdW5kRm5cblx0fVxuXHRcblx0ZnVuY3Rpb24gbmF0aXZlQmluZCAoZm4sIGN0eCkge1xuXHQgIHJldHVybiBmbi5iaW5kKGN0eClcblx0fVxuXHRcblx0dmFyIGJpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZFxuXHQgID8gbmF0aXZlQmluZFxuXHQgIDogcG9seWZpbGxCaW5kO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9BcnJheSAobGlzdCwgc3RhcnQpIHtcblx0ICBzdGFydCA9IHN0YXJ0IHx8IDA7XG5cdCAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuXHQgIHZhciByZXQgPSBuZXcgQXJyYXkoaSk7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiBleHRlbmQgKHRvLCBfZnJvbSkge1xuXHQgIGZvciAodmFyIGtleSBpbiBfZnJvbSkge1xuXHQgICAgdG9ba2V5XSA9IF9mcm9tW2tleV07XG5cdCAgfVxuXHQgIHJldHVybiB0b1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgYW4gQXJyYXkgb2YgT2JqZWN0cyBpbnRvIGEgc2luZ2xlIE9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIHRvT2JqZWN0IChhcnIpIHtcblx0ICB2YXIgcmVzID0ge307XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmIChhcnJbaV0pIHtcblx0ICAgICAgZXh0ZW5kKHJlcywgYXJyW2ldKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGVyZm9ybSBubyBvcGVyYXRpb24uXG5cdCAqIFN0dWJiaW5nIGFyZ3MgdG8gbWFrZSBGbG93IGhhcHB5IHdpdGhvdXQgbGVhdmluZyB1c2VsZXNzIHRyYW5zcGlsZWQgY29kZVxuXHQgKiB3aXRoIC4uLnJlc3QgKGh0dHBzOi8vZmxvdy5vcmcvYmxvZy8yMDE3LzA1LzA3L1N0cmljdC1GdW5jdGlvbi1DYWxsLUFyaXR5Lylcblx0ICovXG5cdGZ1bmN0aW9uIG5vb3AgKGEsIGIsIGMpIHt9XG5cdFxuXHQvKipcblx0ICogQWx3YXlzIHJldHVybiBmYWxzZS5cblx0ICovXG5cdHZhciBubyA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7IHJldHVybiBmYWxzZTsgfTtcblx0XG5cdC8qKlxuXHQgKiBSZXR1cm4gc2FtZSB2YWx1ZVxuXHQgKi9cblx0dmFyIGlkZW50aXR5ID0gZnVuY3Rpb24gKF8pIHsgcmV0dXJuIF87IH07XG5cdFxuXHQvKipcblx0ICogR2VuZXJhdGUgYSBzdGF0aWMga2V5cyBzdHJpbmcgZnJvbSBjb21waWxlciBtb2R1bGVzLlxuXHQgKi9cblx0XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG5cdCAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cblx0ICovXG5cdGZ1bmN0aW9uIGxvb3NlRXF1YWwgKGEsIGIpIHtcblx0ICBpZiAoYSA9PT0gYikgeyByZXR1cm4gdHJ1ZSB9XG5cdCAgdmFyIGlzT2JqZWN0QSA9IGlzT2JqZWN0KGEpO1xuXHQgIHZhciBpc09iamVjdEIgPSBpc09iamVjdChiKTtcblx0ICBpZiAoaXNPYmplY3RBICYmIGlzT2JqZWN0Qikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIGlzQXJyYXlBID0gQXJyYXkuaXNBcnJheShhKTtcblx0ICAgICAgdmFyIGlzQXJyYXlCID0gQXJyYXkuaXNBcnJheShiKTtcblx0ICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7XG5cdCAgICAgICAgcmV0dXJuIGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KGZ1bmN0aW9uIChlLCBpKSB7XG5cdCAgICAgICAgICByZXR1cm4gbG9vc2VFcXVhbChlLCBiW2ldKVxuXHQgICAgICAgIH0pXG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzQXJyYXlBICYmICFpc0FycmF5Qikge1xuXHQgICAgICAgIHZhciBrZXlzQSA9IE9iamVjdC5rZXlzKGEpO1xuXHQgICAgICAgIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xuXHQgICAgICAgIHJldHVybiBrZXlzQS5sZW5ndGggPT09IGtleXNCLmxlbmd0aCAmJiBrZXlzQS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICByZXR1cm4gbG9vc2VFcXVhbChhW2tleV0sIGJba2V5XSlcblx0ICAgICAgICB9KVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICghaXNPYmplY3RBICYmICFpc09iamVjdEIpIHtcblx0ICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxvb3NlSW5kZXhPZiAoYXJyLCB2YWwpIHtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7IHJldHVybiBpIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbnN1cmUgYSBmdW5jdGlvbiBpcyBjYWxsZWQgb25seSBvbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gb25jZSAoZm4pIHtcblx0ICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghY2FsbGVkKSB7XG5cdCAgICAgIGNhbGxlZCA9IHRydWU7XG5cdCAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgU1NSX0FUVFIgPSAnZGF0YS1zZXJ2ZXItcmVuZGVyZWQnO1xuXHRcblx0dmFyIEFTU0VUX1RZUEVTID0gW1xuXHQgICdjb21wb25lbnQnLFxuXHQgICdkaXJlY3RpdmUnLFxuXHQgICdmaWx0ZXInXG5cdF07XG5cdFxuXHR2YXIgTElGRUNZQ0xFX0hPT0tTID0gW1xuXHQgICdiZWZvcmVDcmVhdGUnLFxuXHQgICdjcmVhdGVkJyxcblx0ICAnYmVmb3JlTW91bnQnLFxuXHQgICdtb3VudGVkJyxcblx0ICAnYmVmb3JlVXBkYXRlJyxcblx0ICAndXBkYXRlZCcsXG5cdCAgJ2JlZm9yZURlc3Ryb3knLFxuXHQgICdkZXN0cm95ZWQnLFxuXHQgICdhY3RpdmF0ZWQnLFxuXHQgICdkZWFjdGl2YXRlZCcsXG5cdCAgJ2Vycm9yQ2FwdHVyZWQnXG5cdF07XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBjb25maWcgPSAoe1xuXHQgIC8qKlxuXHQgICAqIE9wdGlvbiBtZXJnZSBzdHJhdGVnaWVzICh1c2VkIGluIGNvcmUvdXRpbC9vcHRpb25zKVxuXHQgICAqL1xuXHQgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgIG9wdGlvbk1lcmdlU3RyYXRlZ2llczogT2JqZWN0LmNyZWF0ZShudWxsKSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cblx0ICAgKi9cblx0ICBzaWxlbnQ6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBTaG93IHByb2R1Y3Rpb24gbW9kZSB0aXAgbWVzc2FnZSBvbiBib290P1xuXHQgICAqL1xuXHQgIHByb2R1Y3Rpb25UaXA6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gZW5hYmxlIGRldnRvb2xzXG5cdCAgICovXG5cdCAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gcmVjb3JkIHBlcmZcblx0ICAgKi9cblx0ICBwZXJmb3JtYW5jZTogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEVycm9yIGhhbmRsZXIgZm9yIHdhdGNoZXIgZXJyb3JzXG5cdCAgICovXG5cdCAgZXJyb3JIYW5kbGVyOiBudWxsLFxuXHRcblx0ICAvKipcblx0ICAgKiBXYXJuIGhhbmRsZXIgZm9yIHdhdGNoZXIgd2FybnNcblx0ICAgKi9cblx0ICB3YXJuSGFuZGxlcjogbnVsbCxcblx0XG5cdCAgLyoqXG5cdCAgICogSWdub3JlIGNlcnRhaW4gY3VzdG9tIGVsZW1lbnRzXG5cdCAgICovXG5cdCAgaWdub3JlZEVsZW1lbnRzOiBbXSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3VzdG9tIHVzZXIga2V5IGFsaWFzZXMgZm9yIHYtb25cblx0ICAgKi9cblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICBrZXlDb2RlczogT2JqZWN0LmNyZWF0ZShudWxsKSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSB0YWcgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhcyBhXG5cdCAgICogY29tcG9uZW50LiBUaGlzIGlzIHBsYXRmb3JtLWRlcGVuZGVudCBhbmQgbWF5IGJlIG92ZXJ3cml0dGVuLlxuXHQgICAqL1xuXHQgIGlzUmVzZXJ2ZWRUYWc6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgdXNlZCBhcyBhIGNvbXBvbmVudFxuXHQgICAqIHByb3AuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uXG5cdCAgICovXG5cdCAgaXNSZXNlcnZlZEF0dHI6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhIHRhZyBpcyBhbiB1bmtub3duIGVsZW1lbnQuXG5cdCAgICogUGxhdGZvcm0tZGVwZW5kZW50LlxuXHQgICAqL1xuXHQgIGlzVW5rbm93bkVsZW1lbnQ6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIG5hbWVzcGFjZSBvZiBhbiBlbGVtZW50XG5cdCAgICovXG5cdCAgZ2V0VGFnTmFtZXNwYWNlOiBub29wLFxuXHRcblx0ICAvKipcblx0ICAgKiBQYXJzZSB0aGUgcmVhbCB0YWcgbmFtZSBmb3IgdGhlIHNwZWNpZmljIHBsYXRmb3JtLlxuXHQgICAqL1xuXHQgIHBhcnNlUGxhdGZvcm1UYWdOYW1lOiBpZGVudGl0eSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYW4gYXR0cmlidXRlIG11c3QgYmUgYm91bmQgdXNpbmcgcHJvcGVydHksIGUuZy4gdmFsdWVcblx0ICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuXG5cdCAgICovXG5cdCAgbXVzdFVzZVByb3A6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBFeHBvc2VkIGZvciBsZWdhY3kgcmVhc29uc1xuXHQgICAqL1xuXHQgIF9saWZlY3ljbGVIb29rczogTElGRUNZQ0xFX0hPT0tTXG5cdH0pXG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cblx0ICovXG5cdGZ1bmN0aW9uIGlzUmVzZXJ2ZWQgKHN0cikge1xuXHQgIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuXHQgIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUZcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHByb3BlcnR5LlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVmIChvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICB2YWx1ZTogdmFsLFxuXHQgICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuXHQgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIHNpbXBsZSBwYXRoLlxuXHQgKi9cblx0dmFyIGJhaWxSRSA9IC9bXlxcdy4kXS87XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuXHQgIGlmIChiYWlsUkUudGVzdChwYXRoKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKTtcblx0ICByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAoIW9iaikgeyByZXR1cm4gfVxuXHQgICAgICBvYmogPSBvYmpbc2VnbWVudHNbaV1dO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9ialxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyBjYW4gd2UgdXNlIF9fcHJvdG9fXz9cblx0dmFyIGhhc1Byb3RvID0gJ19fcHJvdG9fXycgaW4ge307XG5cdFxuXHQvLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG5cdHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblx0dmFyIGluV2VleCA9IHR5cGVvZiBXWEVudmlyb25tZW50ICE9PSAndW5kZWZpbmVkJyAmJiAhIVdYRW52aXJvbm1lbnQucGxhdGZvcm07XG5cdHZhciB3ZWV4UGxhdGZvcm0gPSBpbldlZXggJiYgV1hFbnZpcm9ubWVudC5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpO1xuXHR2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcblx0dmFyIGlzSUUgPSBVQSAmJiAvbXNpZXx0cmlkZW50Ly50ZXN0KFVBKTtcblx0dmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG5cdHZhciBpc0VkZ2UgPSBVQSAmJiBVQS5pbmRleE9mKCdlZGdlLycpID4gMDtcblx0dmFyIGlzQW5kcm9pZCA9IChVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwKSB8fCAod2VleFBsYXRmb3JtID09PSAnYW5kcm9pZCcpO1xuXHR2YXIgaXNJT1MgPSAoVUEgJiYgL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KFVBKSkgfHwgKHdlZXhQbGF0Zm9ybSA9PT0gJ2lvcycpO1xuXHR2YXIgaXNDaHJvbWUgPSBVQSAmJiAvY2hyb21lXFwvXFxkKy8udGVzdChVQSkgJiYgIWlzRWRnZTtcblx0XG5cdC8vIEZpcmVmb3ggaGFzIGEgXCJ3YXRjaFwiIGZ1bmN0aW9uIG9uIE9iamVjdC5wcm90b3R5cGUuLi5cblx0dmFyIG5hdGl2ZVdhdGNoID0gKHt9KS53YXRjaDtcblx0XG5cdHZhciBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcblx0aWYgKGluQnJvd3Nlcikge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgb3B0cyA9IHt9O1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdHMsICdwYXNzaXZlJywgKHtcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfSkpOyAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMjg1XG5cdCAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdC1wYXNzaXZlJywgbnVsbCwgb3B0cyk7XG5cdCAgfSBjYXRjaCAoZSkge31cblx0fVxuXHRcblx0Ly8gdGhpcyBuZWVkcyB0byBiZSBsYXp5LWV2YWxlZCBiZWNhdXNlIHZ1ZSBtYXkgYmUgcmVxdWlyZWQgYmVmb3JlXG5cdC8vIHZ1ZS1zZXJ2ZXItcmVuZGVyZXIgY2FuIHNldCBWVUVfRU5WXG5cdHZhciBfaXNTZXJ2ZXI7XG5cdHZhciBpc1NlcnZlclJlbmRlcmluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoX2lzU2VydmVyID09PSB1bmRlZmluZWQpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFpbkJyb3dzZXIgJiYgIWluV2VleCAmJiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAvLyBkZXRlY3QgcHJlc2VuY2Ugb2YgdnVlLXNlcnZlci1yZW5kZXJlciBhbmQgYXZvaWRcblx0ICAgICAgLy8gV2VicGFjayBzaGltbWluZyB0aGUgcHJvY2Vzc1xuXHQgICAgICBfaXNTZXJ2ZXIgPSBnbG9iYWxbJ3Byb2Nlc3MnXS5lbnYuVlVFX0VOViA9PT0gJ3NlcnZlcic7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBfaXNTZXJ2ZXIgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIF9pc1NlcnZlclxuXHR9O1xuXHRcblx0Ly8gZGV0ZWN0IGRldnRvb2xzXG5cdHZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblx0XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGZ1bmN0aW9uIGlzTmF0aXZlIChDdG9yKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBDdG9yID09PSAnZnVuY3Rpb24nICYmIC9uYXRpdmUgY29kZS8udGVzdChDdG9yLnRvU3RyaW5nKCkpXG5cdH1cblx0XG5cdHZhciBoYXNTeW1ib2wgPVxuXHQgIHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFN5bWJvbCkgJiZcblx0ICB0eXBlb2YgUmVmbGVjdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUmVmbGVjdC5vd25LZXlzKTtcblx0XG5cdHZhciBfU2V0O1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8gLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTZXQpKSB7XG5cdCAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG5cdCAgX1NldCA9IFNldDtcblx0fSBlbHNlIHtcblx0ICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG5cdCAgX1NldCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTZXQgKCkge1xuXHQgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB9XG5cdCAgICBTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIGhhcyAoa2V5KSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNldFtrZXldID09PSB0cnVlXG5cdCAgICB9O1xuXHQgICAgU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQgKGtleSkge1xuXHQgICAgICB0aGlzLnNldFtrZXldID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIgKCkge1xuXHQgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBTZXQ7XG5cdCAgfSgpKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgd2FybiA9IG5vb3A7XG5cdHZhciB0aXAgPSBub29wO1xuXHR2YXIgZ2VuZXJhdGVDb21wb25lbnRUcmFjZSA9IChub29wKTsgLy8gd29yayBhcm91bmQgZmxvdyBjaGVja1xuXHR2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IChub29wKTtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cdCAgdmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKShcXHcpL2c7XG5cdCAgdmFyIGNsYXNzaWZ5ID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyXG5cdCAgICAucmVwbGFjZShjbGFzc2lmeVJFLCBmdW5jdGlvbiAoYykgeyByZXR1cm4gYy50b1VwcGVyQ2FzZSgpOyB9KVxuXHQgICAgLnJlcGxhY2UoL1stX10vZywgJycpOyB9O1xuXHRcblx0ICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcblx0ICAgIHZhciB0cmFjZSA9IHZtID8gZ2VuZXJhdGVDb21wb25lbnRUcmFjZSh2bSkgOiAnJztcblx0XG5cdCAgICBpZiAoY29uZmlnLndhcm5IYW5kbGVyKSB7XG5cdCAgICAgIGNvbmZpZy53YXJuSGFuZGxlci5jYWxsKG51bGwsIG1zZywgdm0sIHRyYWNlKTtcblx0ICAgIH0gZWxzZSBpZiAoaGFzQ29uc29sZSAmJiAoIWNvbmZpZy5zaWxlbnQpKSB7XG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW1Z1ZSB3YXJuXTogXCIgKyBtc2cgKyB0cmFjZSkpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHRpcCA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG5cdCAgICBpZiAoaGFzQ29uc29sZSAmJiAoIWNvbmZpZy5zaWxlbnQpKSB7XG5cdCAgICAgIGNvbnNvbGUud2FybihcIltWdWUgdGlwXTogXCIgKyBtc2cgKyAoXG5cdCAgICAgICAgdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnXG5cdCAgICAgICkpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0sIGluY2x1ZGVGaWxlKSB7XG5cdCAgICBpZiAodm0uJHJvb3QgPT09IHZtKSB7XG5cdCAgICAgIHJldHVybiAnPFJvb3Q+J1xuXHQgICAgfVxuXHQgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygdm0gPT09ICdmdW5jdGlvbicgJiYgdm0uY2lkICE9IG51bGxcblx0ICAgICAgPyB2bS5vcHRpb25zXG5cdCAgICAgIDogdm0uX2lzVnVlXG5cdCAgICAgICAgPyB2bS4kb3B0aW9ucyB8fCB2bS5jb25zdHJ1Y3Rvci5vcHRpb25zXG5cdCAgICAgICAgOiB2bSB8fCB7fTtcblx0ICAgIHZhciBuYW1lID0gb3B0aW9ucy5uYW1lIHx8IG9wdGlvbnMuX2NvbXBvbmVudFRhZztcblx0ICAgIHZhciBmaWxlID0gb3B0aW9ucy5fX2ZpbGU7XG5cdCAgICBpZiAoIW5hbWUgJiYgZmlsZSkge1xuXHQgICAgICB2YXIgbWF0Y2ggPSBmaWxlLm1hdGNoKC8oW14vXFxcXF0rKVxcLnZ1ZSQvKTtcblx0ICAgICAgbmFtZSA9IG1hdGNoICYmIG1hdGNoWzFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiAoXG5cdCAgICAgIChuYW1lID8gKFwiPFwiICsgKGNsYXNzaWZ5KG5hbWUpKSArIFwiPlwiKSA6IFwiPEFub255bW91cz5cIikgK1xuXHQgICAgICAoZmlsZSAmJiBpbmNsdWRlRmlsZSAhPT0gZmFsc2UgPyAoXCIgYXQgXCIgKyBmaWxlKSA6ICcnKVxuXHQgICAgKVxuXHQgIH07XG5cdFxuXHQgIHZhciByZXBlYXQgPSBmdW5jdGlvbiAoc3RyLCBuKSB7XG5cdCAgICB2YXIgcmVzID0gJyc7XG5cdCAgICB3aGlsZSAobikge1xuXHQgICAgICBpZiAobiAlIDIgPT09IDEpIHsgcmVzICs9IHN0cjsgfVxuXHQgICAgICBpZiAobiA+IDEpIHsgc3RyICs9IHN0cjsgfVxuXHQgICAgICBuID4+PSAxO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc1xuXHQgIH07XG5cdFxuXHQgIGdlbmVyYXRlQ29tcG9uZW50VHJhY2UgPSBmdW5jdGlvbiAodm0pIHtcblx0ICAgIGlmICh2bS5faXNWdWUgJiYgdm0uJHBhcmVudCkge1xuXHQgICAgICB2YXIgdHJlZSA9IFtdO1xuXHQgICAgICB2YXIgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID0gMDtcblx0ICAgICAgd2hpbGUgKHZtKSB7XG5cdCAgICAgICAgaWYgKHRyZWUubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdmFyIGxhc3QgPSB0cmVlW3RyZWUubGVuZ3RoIC0gMV07XG5cdCAgICAgICAgICBpZiAobGFzdC5jb25zdHJ1Y3RvciA9PT0gdm0uY29uc3RydWN0b3IpIHtcblx0ICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlKys7XG5cdCAgICAgICAgICAgIHZtID0gdm0uJHBhcmVudDtcblx0ICAgICAgICAgICAgY29udGludWVcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID4gMCkge1xuXHQgICAgICAgICAgICB0cmVlW3RyZWUubGVuZ3RoIC0gMV0gPSBbbGFzdCwgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlXTtcblx0ICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID0gMDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdHJlZS5wdXNoKHZtKTtcblx0ICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuICdcXG5cXG5mb3VuZCBpblxcblxcbicgKyB0cmVlXG5cdCAgICAgICAgLm1hcChmdW5jdGlvbiAodm0sIGkpIHsgcmV0dXJuIChcIlwiICsgKGkgPT09IDAgPyAnLS0tPiAnIDogcmVwZWF0KCcgJywgNSArIGkgKiAyKSkgKyAoQXJyYXkuaXNBcnJheSh2bSlcblx0ICAgICAgICAgICAgPyAoKGZvcm1hdENvbXBvbmVudE5hbWUodm1bMF0pKSArIFwiLi4uIChcIiArICh2bVsxXSkgKyBcIiByZWN1cnNpdmUgY2FsbHMpXCIpXG5cdCAgICAgICAgICAgIDogZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpKTsgfSlcblx0ICAgICAgICAuam9pbignXFxuJylcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAoXCJcXG5cXG4oZm91bmQgaW4gXCIgKyAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgXCIpXCIpXG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0dmFyIHVpZCA9IDA7XG5cdFxuXHQvKipcblx0ICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG5cdCAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG5cdCAqL1xuXHR2YXIgRGVwID0gZnVuY3Rpb24gRGVwICgpIHtcblx0ICB0aGlzLmlkID0gdWlkKys7XG5cdCAgdGhpcy5zdWJzID0gW107XG5cdH07XG5cdFxuXHREZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIGFkZFN1YiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLnB1c2goc3ViKTtcblx0fTtcblx0XG5cdERlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gcmVtb3ZlU3ViIChzdWIpIHtcblx0ICByZW1vdmUodGhpcy5zdWJzLCBzdWIpO1xuXHR9O1xuXHRcblx0RGVwLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiBkZXBlbmQgKCkge1xuXHQgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHREZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSAoKSB7XG5cdCAgLy8gc3RhYmlsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3Rcblx0ICB2YXIgc3VicyA9IHRoaXMuc3Vicy5zbGljZSgpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHN1YnNbaV0udXBkYXRlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuXHQvLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG5cdC8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuXHREZXAudGFyZ2V0ID0gbnVsbDtcblx0dmFyIHRhcmdldFN0YWNrID0gW107XG5cdFxuXHRmdW5jdGlvbiBwdXNoVGFyZ2V0IChfdGFyZ2V0KSB7XG5cdCAgaWYgKERlcC50YXJnZXQpIHsgdGFyZ2V0U3RhY2sucHVzaChEZXAudGFyZ2V0KTsgfVxuXHQgIERlcC50YXJnZXQgPSBfdGFyZ2V0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwb3BUYXJnZXQgKCkge1xuXHQgIERlcC50YXJnZXQgPSB0YXJnZXRTdGFjay5wb3AoKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgVk5vZGUgPSBmdW5jdGlvbiBWTm9kZSAoXG5cdCAgdGFnLFxuXHQgIGRhdGEsXG5cdCAgY2hpbGRyZW4sXG5cdCAgdGV4dCxcblx0ICBlbG0sXG5cdCAgY29udGV4dCxcblx0ICBjb21wb25lbnRPcHRpb25zLFxuXHQgIGFzeW5jRmFjdG9yeVxuXHQpIHtcblx0ICB0aGlzLnRhZyA9IHRhZztcblx0ICB0aGlzLmRhdGEgPSBkYXRhO1xuXHQgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblx0ICB0aGlzLnRleHQgPSB0ZXh0O1xuXHQgIHRoaXMuZWxtID0gZWxtO1xuXHQgIHRoaXMubnMgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblx0ICB0aGlzLmZuQ29udGV4dCA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLmZuT3B0aW9ucyA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLmZuU2NvcGVJZCA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLmtleSA9IGRhdGEgJiYgZGF0YS5rZXk7XG5cdCAgdGhpcy5jb21wb25lbnRPcHRpb25zID0gY29tcG9uZW50T3B0aW9ucztcblx0ICB0aGlzLmNvbXBvbmVudEluc3RhbmNlID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMucmF3ID0gZmFsc2U7XG5cdCAgdGhpcy5pc1N0YXRpYyA9IGZhbHNlO1xuXHQgIHRoaXMuaXNSb290SW5zZXJ0ID0gdHJ1ZTtcblx0ICB0aGlzLmlzQ29tbWVudCA9IGZhbHNlO1xuXHQgIHRoaXMuaXNDbG9uZWQgPSBmYWxzZTtcblx0ICB0aGlzLmlzT25jZSA9IGZhbHNlO1xuXHQgIHRoaXMuYXN5bmNGYWN0b3J5ID0gYXN5bmNGYWN0b3J5O1xuXHQgIHRoaXMuYXN5bmNNZXRhID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuaXNBc3luY1BsYWNlaG9sZGVyID0gZmFsc2U7XG5cdH07XG5cdFxuXHR2YXIgcHJvdG90eXBlQWNjZXNzb3JzID0geyBjaGlsZDogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXHRcblx0Ly8gREVQUkVDQVRFRDogYWxpYXMgZm9yIGNvbXBvbmVudEluc3RhbmNlIGZvciBiYWNrd2FyZHMgY29tcGF0LlxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRwcm90b3R5cGVBY2Nlc3NvcnMuY2hpbGQuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB0aGlzLmNvbXBvbmVudEluc3RhbmNlXG5cdH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggVk5vZGUucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMgKTtcblx0XG5cdHZhciBjcmVhdGVFbXB0eVZOb2RlID0gZnVuY3Rpb24gKHRleHQpIHtcblx0ICBpZiAoIHRleHQgPT09IHZvaWQgMCApIHRleHQgPSAnJztcblx0XG5cdCAgdmFyIG5vZGUgPSBuZXcgVk5vZGUoKTtcblx0ICBub2RlLnRleHQgPSB0ZXh0O1xuXHQgIG5vZGUuaXNDb21tZW50ID0gdHJ1ZTtcblx0ICByZXR1cm4gbm9kZVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlVGV4dFZOb2RlICh2YWwpIHtcblx0ICByZXR1cm4gbmV3IFZOb2RlKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFN0cmluZyh2YWwpKVxuXHR9XG5cdFxuXHQvLyBvcHRpbWl6ZWQgc2hhbGxvdyBjbG9uZVxuXHQvLyB1c2VkIGZvciBzdGF0aWMgbm9kZXMgYW5kIHNsb3Qgbm9kZXMgYmVjYXVzZSB0aGV5IG1heSBiZSByZXVzZWQgYWNyb3NzXG5cdC8vIG11bHRpcGxlIHJlbmRlcnMsIGNsb25pbmcgdGhlbSBhdm9pZHMgZXJyb3JzIHdoZW4gRE9NIG1hbmlwdWxhdGlvbnMgcmVseVxuXHQvLyBvbiB0aGVpciBlbG0gcmVmZXJlbmNlLlxuXHRmdW5jdGlvbiBjbG9uZVZOb2RlICh2bm9kZSkge1xuXHQgIHZhciBjbG9uZWQgPSBuZXcgVk5vZGUoXG5cdCAgICB2bm9kZS50YWcsXG5cdCAgICB2bm9kZS5kYXRhLFxuXHQgICAgdm5vZGUuY2hpbGRyZW4sXG5cdCAgICB2bm9kZS50ZXh0LFxuXHQgICAgdm5vZGUuZWxtLFxuXHQgICAgdm5vZGUuY29udGV4dCxcblx0ICAgIHZub2RlLmNvbXBvbmVudE9wdGlvbnMsXG5cdCAgICB2bm9kZS5hc3luY0ZhY3Rvcnlcblx0ICApO1xuXHQgIGNsb25lZC5ucyA9IHZub2RlLm5zO1xuXHQgIGNsb25lZC5pc1N0YXRpYyA9IHZub2RlLmlzU3RhdGljO1xuXHQgIGNsb25lZC5rZXkgPSB2bm9kZS5rZXk7XG5cdCAgY2xvbmVkLmlzQ29tbWVudCA9IHZub2RlLmlzQ29tbWVudDtcblx0ICBjbG9uZWQuZm5Db250ZXh0ID0gdm5vZGUuZm5Db250ZXh0O1xuXHQgIGNsb25lZC5mbk9wdGlvbnMgPSB2bm9kZS5mbk9wdGlvbnM7XG5cdCAgY2xvbmVkLmZuU2NvcGVJZCA9IHZub2RlLmZuU2NvcGVJZDtcblx0ICBjbG9uZWQuaXNDbG9uZWQgPSB0cnVlO1xuXHQgIHJldHVybiBjbG9uZWRcblx0fVxuXHRcblx0Lypcblx0ICogbm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IHBsYXkgd2VsbCB3aXRoXG5cdCAqIGR5bmFtaWNhbGx5IGFjY2Vzc2luZyBtZXRob2RzIG9uIEFycmF5IHByb3RvdHlwZVxuXHQgKi9cblx0XG5cdHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXHR2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKTtcblx0XG5cdHZhciBtZXRob2RzVG9QYXRjaCA9IFtcblx0ICAncHVzaCcsXG5cdCAgJ3BvcCcsXG5cdCAgJ3NoaWZ0Jyxcblx0ICAndW5zaGlmdCcsXG5cdCAgJ3NwbGljZScsXG5cdCAgJ3NvcnQnLFxuXHQgICdyZXZlcnNlJ1xuXHRdO1xuXHRcblx0LyoqXG5cdCAqIEludGVyY2VwdCBtdXRhdGluZyBtZXRob2RzIGFuZCBlbWl0IGV2ZW50c1xuXHQgKi9cblx0bWV0aG9kc1RvUGF0Y2guZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG5cdCAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG5cdCAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuXHQgIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvciAoKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTtcblx0XG5cdCAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcblx0ICAgIHZhciBpbnNlcnRlZDtcblx0ICAgIHN3aXRjaCAobWV0aG9kKSB7XG5cdCAgICAgIGNhc2UgJ3B1c2gnOlxuXHQgICAgICBjYXNlICd1bnNoaWZ0Jzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG5cdCAgICAgICAgYnJlYWtcblx0ICAgICAgY2FzZSAnc3BsaWNlJzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG5cdCAgICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICAgIGlmIChpbnNlcnRlZCkgeyBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpOyB9XG5cdCAgICAvLyBub3RpZnkgY2hhbmdlXG5cdCAgICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0XG5cdCAgfSk7XG5cdH0pO1xuXHRcblx0LyogICovXG5cdFxuXHR2YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblx0XG5cdC8qKlxuXHQgKiBJbiBzb21lIGNhc2VzIHdlIG1heSB3YW50IHRvIGRpc2FibGUgb2JzZXJ2YXRpb24gaW5zaWRlIGEgY29tcG9uZW50J3Ncblx0ICogdXBkYXRlIGNvbXB1dGF0aW9uLlxuXHQgKi9cblx0dmFyIHNob3VsZE9ic2VydmUgPSB0cnVlO1xuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlT2JzZXJ2aW5nICh2YWx1ZSkge1xuXHQgIHNob3VsZE9ic2VydmUgPSB2YWx1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE9ic2VydmVyIGNsYXNzIHRoYXQgaXMgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuXHQgKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0aGUgdGFyZ2V0XG5cdCAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XG5cdCAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaCB1cGRhdGVzLlxuXHQgKi9cblx0dmFyIE9ic2VydmVyID0gZnVuY3Rpb24gT2JzZXJ2ZXIgKHZhbHVlKSB7XG5cdCAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuXHQgIHRoaXMudm1Db3VudCA9IDA7XG5cdCAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvXG5cdCAgICAgID8gcHJvdG9BdWdtZW50XG5cdCAgICAgIDogY29weUF1Z21lbnQ7XG5cdCAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7XG5cdCAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMud2Fsayh2YWx1ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuXHQgKiBnZXR0ZXIvc2V0dGVycy4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cblx0ICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG5cdCAqL1xuXHRPYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIHdhbGsgKG9iaikge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgIGRlZmluZVJlYWN0aXZlKG9iaiwga2V5c1tpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuXHQgKi9cblx0T2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIG9ic2VydmVBcnJheSAoaXRlbXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb2JzZXJ2ZShpdGVtc1tpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gaGVscGVyc1xuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcblx0ICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cblx0ICovXG5cdGZ1bmN0aW9uIHByb3RvQXVnbWVudCAodGFyZ2V0LCBzcmMsIGtleXMpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXHQgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG5cdCAqIGhpZGRlbiBwcm9wZXJ0aWVzLlxuXHQgKi9cblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ZnVuY3Rpb24gY29weUF1Z21lbnQgKHRhcmdldCwgc3JjLCBrZXlzKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcblx0ICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcblx0ICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG5cdCAqL1xuXHRmdW5jdGlvbiBvYnNlcnZlICh2YWx1ZSwgYXNSb290RGF0YSkge1xuXHQgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlIGluc3RhbmNlb2YgVk5vZGUpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgb2I7XG5cdCAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG5cdCAgICBvYiA9IHZhbHVlLl9fb2JfXztcblx0ICB9IGVsc2UgaWYgKFxuXHQgICAgc2hvdWxkT2JzZXJ2ZSAmJlxuXHQgICAgIWlzU2VydmVyUmVuZGVyaW5nKCkgJiZcblx0ICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiZcblx0ICAgIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmXG5cdCAgICAhdmFsdWUuX2lzVnVlXG5cdCAgKSB7XG5cdCAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmIChhc1Jvb3REYXRhICYmIG9iKSB7XG5cdCAgICBvYi52bUNvdW50Kys7XG5cdCAgfVxuXHQgIHJldHVybiBvYlxuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUgKFxuXHQgIG9iaixcblx0ICBrZXksXG5cdCAgdmFsLFxuXHQgIGN1c3RvbVNldHRlcixcblx0ICBzaGFsbG93XG5cdCkge1xuXHQgIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cdFxuXHQgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuXHQgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuXHQgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG5cdCAgaWYgKCFnZXR0ZXIgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuXHQgICAgdmFsID0gb2JqW2tleV07XG5cdCAgfVxuXHQgIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cdFxuXHQgIHZhciBjaGlsZE9iID0gIXNoYWxsb3cgJiYgb2JzZXJ2ZSh2YWwpO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIGRlcC5kZXBlbmQoKTtcblx0ICAgICAgICBpZiAoY2hpbGRPYikge1xuXHQgICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgZGVwZW5kQXJyYXkodmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWVcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyIChuZXdWYWwpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlICovXG5cdCAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlIHx8IChuZXdWYWwgIT09IG5ld1ZhbCAmJiB2YWx1ZSAhPT0gdmFsdWUpKSB7XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1zZWxmLWNvbXBhcmUgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY3VzdG9tU2V0dGVyKSB7XG5cdCAgICAgICAgY3VzdG9tU2V0dGVyKCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNldHRlcikge1xuXHQgICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBuZXdWYWw7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUobmV3VmFsKTtcblx0ICAgICAgZGVwLm5vdGlmeSgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHkgYW5kXG5cdCAqIHRyaWdnZXJzIGNoYW5nZSBub3RpZmljYXRpb24gaWYgdGhlIHByb3BlcnR5IGRvZXNuJ3Rcblx0ICogYWxyZWFkeSBleGlzdC5cblx0ICovXG5cdGZ1bmN0aW9uIHNldCAodGFyZ2V0LCBrZXksIHZhbCkge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAoaXNVbmRlZih0YXJnZXQpIHx8IGlzUHJpbWl0aXZlKHRhcmdldCkpXG5cdCAgKSB7XG5cdCAgICB3YXJuKChcIkNhbm5vdCBzZXQgcmVhY3RpdmUgcHJvcGVydHkgb24gdW5kZWZpbmVkLCBudWxsLCBvciBwcmltaXRpdmUgdmFsdWU6IFwiICsgKCh0YXJnZXQpKSkpO1xuXHQgIH1cblx0ICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHtcblx0ICAgIHRhcmdldC5sZW5ndGggPSBNYXRoLm1heCh0YXJnZXQubGVuZ3RoLCBrZXkpO1xuXHQgICAgdGFyZ2V0LnNwbGljZShrZXksIDEsIHZhbCk7XG5cdCAgICByZXR1cm4gdmFsXG5cdCAgfVxuXHQgIGlmIChrZXkgaW4gdGFyZ2V0ICYmICEoa2V5IGluIE9iamVjdC5wcm90b3R5cGUpKSB7XG5cdCAgICB0YXJnZXRba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybiB2YWxcblx0ICB9XG5cdCAgdmFyIG9iID0gKHRhcmdldCkuX19vYl9fO1xuXHQgIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAnQXZvaWQgYWRkaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMgdG8gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArXG5cdCAgICAgICdhdCBydW50aW1lIC0gZGVjbGFyZSBpdCB1cGZyb250IGluIHRoZSBkYXRhIG9wdGlvbi4nXG5cdCAgICApO1xuXHQgICAgcmV0dXJuIHZhbFxuXHQgIH1cblx0ICBpZiAoIW9iKSB7XG5cdCAgICB0YXJnZXRba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybiB2YWxcblx0ICB9XG5cdCAgZGVmaW5lUmVhY3RpdmUob2IudmFsdWUsIGtleSwgdmFsKTtcblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHQvKipcblx0ICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cblx0ICovXG5cdGZ1bmN0aW9uIGRlbCAodGFyZ2V0LCBrZXkpIHtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgKGlzVW5kZWYodGFyZ2V0KSB8fCBpc1ByaW1pdGl2ZSh0YXJnZXQpKVxuXHQgICkge1xuXHQgICAgd2FybigoXCJDYW5ub3QgZGVsZXRlIHJlYWN0aXZlIHByb3BlcnR5IG9uIHVuZGVmaW5lZCwgbnVsbCwgb3IgcHJpbWl0aXZlIHZhbHVlOiBcIiArICgodGFyZ2V0KSkpKTtcblx0ICB9XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJiBpc1ZhbGlkQXJyYXlJbmRleChrZXkpKSB7XG5cdCAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSk7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIG9iID0gKHRhcmdldCkuX19vYl9fO1xuXHQgIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAnQXZvaWQgZGVsZXRpbmcgcHJvcGVydGllcyBvbiBhIFZ1ZSBpbnN0YW5jZSBvciBpdHMgcm9vdCAkZGF0YSAnICtcblx0ICAgICAgJy0ganVzdCBzZXQgaXQgdG8gbnVsbC4nXG5cdCAgICApO1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGlmICghaGFzT3duKHRhcmdldCwga2V5KSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGRlbGV0ZSB0YXJnZXRba2V5XTtcblx0ICBpZiAoIW9iKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29sbGVjdCBkZXBlbmRlbmNpZXMgb24gYXJyYXkgZWxlbWVudHMgd2hlbiB0aGUgYXJyYXkgaXMgdG91Y2hlZCwgc2luY2Vcblx0ICogd2UgY2Fubm90IGludGVyY2VwdCBhcnJheSBlbGVtZW50IGFjY2VzcyBsaWtlIHByb3BlcnR5IGdldHRlcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZXBlbmRBcnJheSAodmFsdWUpIHtcblx0ICBmb3IgKHZhciBlID0gKHZvaWQgMCksIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBlID0gdmFsdWVbaV07XG5cdCAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSB7XG5cdCAgICAgIGRlcGVuZEFycmF5KGUpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKipcblx0ICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuXHQgKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuXHQgKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cblx0ICovXG5cdHZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzO1xuXHRcblx0LyoqXG5cdCAqIE9wdGlvbnMgd2l0aCByZXN0cmljdGlvbnNcblx0ICovXG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgc3RyYXRzLmVsID0gc3RyYXRzLnByb3BzRGF0YSA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkLCB2bSwga2V5KSB7XG5cdCAgICBpZiAoIXZtKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgXCJvcHRpb24gXFxcIlwiICsga2V5ICsgXCJcXFwiIGNhbiBvbmx5IGJlIHVzZWQgZHVyaW5nIGluc3RhbmNlIFwiICtcblx0ICAgICAgICAnY3JlYXRpb24gd2l0aCB0aGUgYG5ld2Aga2V5d29yZC4nXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGVmYXVsdFN0cmF0KHBhcmVudCwgY2hpbGQpXG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VEYXRhICh0bywgZnJvbSkge1xuXHQgIGlmICghZnJvbSkgeyByZXR1cm4gdG8gfVxuXHQgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgdG9WYWwgPSB0b1trZXldO1xuXHQgICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcblx0ICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG5cdCAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh0b1ZhbCkgJiYgaXNQbGFpbk9iamVjdChmcm9tVmFsKSkge1xuXHQgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdG9cblx0fVxuXHRcblx0LyoqXG5cdCAqIERhdGFcblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlRGF0YU9yRm4gKFxuXHQgIHBhcmVudFZhbCxcblx0ICBjaGlsZFZhbCxcblx0ICB2bVxuXHQpIHtcblx0ICBpZiAoIXZtKSB7XG5cdCAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuXHQgICAgaWYgKCFjaGlsZFZhbCkge1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsXG5cdCAgICB9XG5cdCAgICBpZiAoIXBhcmVudFZhbCkge1xuXHQgICAgICByZXR1cm4gY2hpbGRWYWxcblx0ICAgIH1cblx0ICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcblx0ICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuXHQgICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG5cdCAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2Vcblx0ICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbiAoKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZURhdGEoXG5cdCAgICAgICAgdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh0aGlzLCB0aGlzKSA6IGNoaWxkVmFsLFxuXHQgICAgICAgIHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh0aGlzLCB0aGlzKSA6IHBhcmVudFZhbFxuXHQgICAgICApXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbiAoKSB7XG5cdCAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG5cdCAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICA/IGNoaWxkVmFsLmNhbGwodm0sIHZtKVxuXHQgICAgICAgIDogY2hpbGRWYWw7XG5cdCAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICA/IHBhcmVudFZhbC5jYWxsKHZtLCB2bSlcblx0ICAgICAgICA6IHBhcmVudFZhbDtcblx0ICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuXHQgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSlcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGVmYXVsdERhdGFcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0c3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAoXG5cdCAgcGFyZW50VmFsLFxuXHQgIGNoaWxkVmFsLFxuXHQgIHZtXG5cdCkge1xuXHQgIGlmICghdm0pIHtcblx0ICAgIGlmIChjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAgICdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgK1xuXHQgICAgICAgICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgK1xuXHQgICAgICAgICdkZWZpbml0aW9ucy4nLFxuXHQgICAgICAgIHZtXG5cdCAgICAgICk7XG5cdFxuXHQgICAgICByZXR1cm4gcGFyZW50VmFsXG5cdCAgICB9XG5cdCAgICByZXR1cm4gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsIGNoaWxkVmFsKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG1lcmdlRGF0YU9yRm4ocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pXG5cdH07XG5cdFxuXHQvKipcblx0ICogSG9va3MgYW5kIHByb3BzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VIb29rIChcblx0ICBwYXJlbnRWYWwsXG5cdCAgY2hpbGRWYWxcblx0KSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsXG5cdCAgICA/IHBhcmVudFZhbFxuXHQgICAgICA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpXG5cdCAgICAgIDogQXJyYXkuaXNBcnJheShjaGlsZFZhbClcblx0ICAgICAgICA/IGNoaWxkVmFsXG5cdCAgICAgICAgOiBbY2hpbGRWYWxdXG5cdCAgICA6IHBhcmVudFZhbFxuXHR9XG5cdFxuXHRMSUZFQ1lDTEVfSE9PS1MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuXHQgIHN0cmF0c1tob29rXSA9IG1lcmdlSG9vaztcblx0fSk7XG5cdFxuXHQvKipcblx0ICogQXNzZXRzXG5cdCAqXG5cdCAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cblx0ICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuXHQgKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlQXNzZXRzIChcblx0ICBwYXJlbnRWYWwsXG5cdCAgY2hpbGRWYWwsXG5cdCAgdm0sXG5cdCAga2V5XG5cdCkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcblx0ICBpZiAoY2hpbGRWYWwpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgYXNzZXJ0T2JqZWN0VHlwZShrZXksIGNoaWxkVmFsLCB2bSk7XG5cdCAgICByZXR1cm4gZXh0ZW5kKHJlcywgY2hpbGRWYWwpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiByZXNcblx0ICB9XG5cdH1cblx0XG5cdEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcblx0fSk7XG5cdFxuXHQvKipcblx0ICogV2F0Y2hlcnMuXG5cdCAqXG5cdCAqIFdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcblx0ICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG5cdCAqL1xuXHRzdHJhdHMud2F0Y2ggPSBmdW5jdGlvbiAoXG5cdCAgcGFyZW50VmFsLFxuXHQgIGNoaWxkVmFsLFxuXHQgIHZtLFxuXHQgIGtleVxuXHQpIHtcblx0ICAvLyB3b3JrIGFyb3VuZCBGaXJlZm94J3MgT2JqZWN0LnByb3RvdHlwZS53YXRjaC4uLlxuXHQgIGlmIChwYXJlbnRWYWwgPT09IG5hdGl2ZVdhdGNoKSB7IHBhcmVudFZhbCA9IHVuZGVmaW5lZDsgfVxuXHQgIGlmIChjaGlsZFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgY2hpbGRWYWwgPSB1bmRlZmluZWQ7IH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWNoaWxkVmFsKSB7IHJldHVybiBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKSB9XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydE9iamVjdFR5cGUoa2V5LCBjaGlsZFZhbCwgdm0pO1xuXHQgIH1cblx0ICBpZiAoIXBhcmVudFZhbCkgeyByZXR1cm4gY2hpbGRWYWwgfVxuXHQgIHZhciByZXQgPSB7fTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGZvciAodmFyIGtleSQxIGluIGNoaWxkVmFsKSB7XG5cdCAgICB2YXIgcGFyZW50ID0gcmV0W2tleSQxXTtcblx0ICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleSQxXTtcblx0ICAgIGlmIChwYXJlbnQgJiYgIUFycmF5LmlzQXJyYXkocGFyZW50KSkge1xuXHQgICAgICBwYXJlbnQgPSBbcGFyZW50XTtcblx0ICAgIH1cblx0ICAgIHJldFtrZXkkMV0gPSBwYXJlbnRcblx0ICAgICAgPyBwYXJlbnQuY29uY2F0KGNoaWxkKVxuXHQgICAgICA6IEFycmF5LmlzQXJyYXkoY2hpbGQpID8gY2hpbGQgOiBbY2hpbGRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH07XG5cdFxuXHQvKipcblx0ICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cblx0ICovXG5cdHN0cmF0cy5wcm9wcyA9XG5cdHN0cmF0cy5tZXRob2RzID1cblx0c3RyYXRzLmluamVjdCA9XG5cdHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChcblx0ICBwYXJlbnRWYWwsXG5cdCAgY2hpbGRWYWwsXG5cdCAgdm0sXG5cdCAga2V5XG5cdCkge1xuXHQgIGlmIChjaGlsZFZhbCAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTtcblx0ICB9XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHsgcmV0dXJuIGNoaWxkVmFsIH1cblx0ICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGlmIChjaGlsZFZhbCkgeyBleHRlbmQocmV0LCBjaGlsZFZhbCk7IH1cblx0ICByZXR1cm4gcmV0XG5cdH07XG5cdHN0cmF0cy5wcm92aWRlID0gbWVyZ2VEYXRhT3JGbjtcblx0XG5cdC8qKlxuXHQgKiBEZWZhdWx0IHN0cmF0ZWd5LlxuXHQgKi9cblx0dmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWRcblx0ICAgID8gcGFyZW50VmFsXG5cdCAgICA6IGNoaWxkVmFsXG5cdH07XG5cdFxuXHQvKipcblx0ICogVmFsaWRhdGUgY29tcG9uZW50IG5hbWVzXG5cdCAqL1xuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudHMgKG9wdGlvbnMpIHtcblx0ICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jb21wb25lbnRzKSB7XG5cdCAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoa2V5KTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHZhbGlkYXRlQ29tcG9uZW50TmFtZSAobmFtZSkge1xuXHQgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICAnSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgK1xuXHQgICAgICAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgdGhlIGh5cGhlbiwgJyArXG5cdCAgICAgICdhbmQgbXVzdCBzdGFydCB3aXRoIGEgbGV0dGVyLidcblx0ICAgICk7XG5cdCAgfVxuXHQgIGlmIChpc0J1aWx0SW5UYWcobmFtZSkgfHwgY29uZmlnLmlzUmVzZXJ2ZWRUYWcobmFtZSkpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgK1xuXHQgICAgICAnaWQ6ICcgKyBuYW1lXG5cdCAgICApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuXHQgKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplUHJvcHMgKG9wdGlvbnMsIHZtKSB7XG5cdCAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICBpZiAoIXByb3BzKSB7IHJldHVybiB9XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIHZhciBpLCB2YWwsIG5hbWU7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMpKSB7XG5cdCAgICBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1tpXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgbmFtZSA9IGNhbWVsaXplKHZhbCk7XG5cdCAgICAgICAgcmVzW25hbWVdID0geyB0eXBlOiBudWxsIH07XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ3Byb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC4nKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuXHQgICAgICB2YWwgPSBwcm9wc1trZXldO1xuXHQgICAgICBuYW1lID0gY2FtZWxpemUoa2V5KTtcblx0ICAgICAgcmVzW25hbWVdID0gaXNQbGFpbk9iamVjdCh2YWwpXG5cdCAgICAgICAgPyB2YWxcblx0ICAgICAgICA6IHsgdHlwZTogdmFsIH07XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwicHJvcHNcXFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsIFwiICtcblx0ICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZShwcm9wcykpICsgXCIuXCIsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0ICBvcHRpb25zLnByb3BzID0gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIGFsbCBpbmplY3Rpb25zIGludG8gT2JqZWN0LWJhc2VkIGZvcm1hdFxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0IChvcHRpb25zLCB2bSkge1xuXHQgIHZhciBpbmplY3QgPSBvcHRpb25zLmluamVjdDtcblx0ICBpZiAoIWluamVjdCkgeyByZXR1cm4gfVxuXHQgIHZhciBub3JtYWxpemVkID0gb3B0aW9ucy5pbmplY3QgPSB7fTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShpbmplY3QpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluamVjdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICBub3JtYWxpemVkW2luamVjdFtpXV0gPSB7IGZyb206IGluamVjdFtpXSB9O1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChpbmplY3QpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gaW5qZWN0KSB7XG5cdCAgICAgIHZhciB2YWwgPSBpbmplY3Rba2V5XTtcblx0ICAgICAgbm9ybWFsaXplZFtrZXldID0gaXNQbGFpbk9iamVjdCh2YWwpXG5cdCAgICAgICAgPyBleHRlbmQoeyBmcm9tOiBrZXkgfSwgdmFsKVxuXHQgICAgICAgIDogeyBmcm9tOiB2YWwgfTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgIFwiSW52YWxpZCB2YWx1ZSBmb3Igb3B0aW9uIFxcXCJpbmplY3RcXFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsIFwiICtcblx0ICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZShpbmplY3QpKSArIFwiLlwiLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgcmF3IGZ1bmN0aW9uIGRpcmVjdGl2ZXMgaW50byBvYmplY3QgZm9ybWF0LlxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplRGlyZWN0aXZlcyAob3B0aW9ucykge1xuXHQgIHZhciBkaXJzID0gb3B0aW9ucy5kaXJlY3RpdmVzO1xuXHQgIGlmIChkaXJzKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gZGlycykge1xuXHQgICAgICB2YXIgZGVmID0gZGlyc1trZXldO1xuXHQgICAgICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIGRpcnNba2V5XSA9IHsgYmluZDogZGVmLCB1cGRhdGU6IGRlZiB9O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRPYmplY3RUeXBlIChuYW1lLCB2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwiXCIgKyBuYW1lICsgXCJcXFwiOiBleHBlY3RlZCBhbiBPYmplY3QsIFwiICtcblx0ICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgXCIuXCIsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cblx0ICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyAoXG5cdCAgcGFyZW50LFxuXHQgIGNoaWxkLFxuXHQgIHZtXG5cdCkge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBjaGVja0NvbXBvbmVudHMoY2hpbGQpO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgY2hpbGQgPSBjaGlsZC5vcHRpb25zO1xuXHQgIH1cblx0XG5cdCAgbm9ybWFsaXplUHJvcHMoY2hpbGQsIHZtKTtcblx0ICBub3JtYWxpemVJbmplY3QoY2hpbGQsIHZtKTtcblx0ICBub3JtYWxpemVEaXJlY3RpdmVzKGNoaWxkKTtcblx0ICB2YXIgZXh0ZW5kc0Zyb20gPSBjaGlsZC5leHRlbmRzO1xuXHQgIGlmIChleHRlbmRzRnJvbSkge1xuXHQgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgZXh0ZW5kc0Zyb20sIHZtKTtcblx0ICB9XG5cdCAgaWYgKGNoaWxkLm1peGlucykge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLm1peGluc1tpXSwgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgIHZhciBrZXk7XG5cdCAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG5cdCAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIGNoaWxkKSB7XG5cdCAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcblx0ICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBtZXJnZUZpZWxkIChrZXkpIHtcblx0ICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcblx0ICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcblx0ICB9XG5cdCAgcmV0dXJuIG9wdGlvbnNcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlc29sdmUgYW4gYXNzZXQuXG5cdCAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuXHQgKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG5cdCAqL1xuXHRmdW5jdGlvbiByZXNvbHZlQXNzZXQgKFxuXHQgIG9wdGlvbnMsXG5cdCAgdHlwZSxcblx0ICBpZCxcblx0ICB3YXJuTWlzc2luZ1xuXHQpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuXHQgIC8vIGNoZWNrIGxvY2FsIHJlZ2lzdHJhdGlvbiB2YXJpYXRpb25zIGZpcnN0XG5cdCAgaWYgKGhhc093bihhc3NldHMsIGlkKSkgeyByZXR1cm4gYXNzZXRzW2lkXSB9XG5cdCAgdmFyIGNhbWVsaXplZElkID0gY2FtZWxpemUoaWQpO1xuXHQgIGlmIChoYXNPd24oYXNzZXRzLCBjYW1lbGl6ZWRJZCkpIHsgcmV0dXJuIGFzc2V0c1tjYW1lbGl6ZWRJZF0gfVxuXHQgIHZhciBQYXNjYWxDYXNlSWQgPSBjYXBpdGFsaXplKGNhbWVsaXplZElkKTtcblx0ICBpZiAoaGFzT3duKGFzc2V0cywgUGFzY2FsQ2FzZUlkKSkgeyByZXR1cm4gYXNzZXRzW1Bhc2NhbENhc2VJZF0gfVxuXHQgIC8vIGZhbGxiYWNrIHRvIHByb3RvdHlwZSBjaGFpblxuXHQgIHZhciByZXMgPSBhc3NldHNbaWRdIHx8IGFzc2V0c1tjYW1lbGl6ZWRJZF0gfHwgYXNzZXRzW1Bhc2NhbENhc2VJZF07XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuXHQgICAgd2Fybihcblx0ICAgICAgJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCxcblx0ICAgICAgb3B0aW9uc1xuXHQgICAgKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHZhbGlkYXRlUHJvcCAoXG5cdCAga2V5LFxuXHQgIHByb3BPcHRpb25zLFxuXHQgIHByb3BzRGF0YSxcblx0ICB2bVxuXHQpIHtcblx0ICB2YXIgcHJvcCA9IHByb3BPcHRpb25zW2tleV07XG5cdCAgdmFyIGFic2VudCA9ICFoYXNPd24ocHJvcHNEYXRhLCBrZXkpO1xuXHQgIHZhciB2YWx1ZSA9IHByb3BzRGF0YVtrZXldO1xuXHQgIC8vIGJvb2xlYW4gY2FzdGluZ1xuXHQgIHZhciBib29sZWFuSW5kZXggPSBnZXRUeXBlSW5kZXgoQm9vbGVhbiwgcHJvcC50eXBlKTtcblx0ICBpZiAoYm9vbGVhbkluZGV4ID4gLTEpIHtcblx0ICAgIGlmIChhYnNlbnQgJiYgIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG5cdCAgICAgIHZhbHVlID0gZmFsc2U7XG5cdCAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gaHlwaGVuYXRlKGtleSkpIHtcblx0ICAgICAgLy8gb25seSBjYXN0IGVtcHR5IHN0cmluZyAvIHNhbWUgbmFtZSB0byBib29sZWFuIGlmXG5cdCAgICAgIC8vIGJvb2xlYW4gaGFzIGhpZ2hlciBwcmlvcml0eVxuXHQgICAgICB2YXIgc3RyaW5nSW5kZXggPSBnZXRUeXBlSW5kZXgoU3RyaW5nLCBwcm9wLnR5cGUpO1xuXHQgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4KSB7XG5cdCAgICAgICAgdmFsdWUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGRlZmF1bHQgdmFsdWVcblx0ICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wLCBrZXkpO1xuXHQgICAgLy8gc2luY2UgdGhlIGRlZmF1bHQgdmFsdWUgaXMgYSBmcmVzaCBjb3B5LFxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIG9ic2VydmUgaXQuXG5cdCAgICB2YXIgcHJldlNob3VsZE9ic2VydmUgPSBzaG91bGRPYnNlcnZlO1xuXHQgICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpO1xuXHQgICAgb2JzZXJ2ZSh2YWx1ZSk7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcocHJldlNob3VsZE9ic2VydmUpO1xuXHQgIH1cblx0ICBpZiAoXG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAvLyBza2lwIHZhbGlkYXRpb24gZm9yIHdlZXggcmVjeWNsZS1saXN0IGNoaWxkIGNvbXBvbmVudCBwcm9wc1xuXHQgICAgIShmYWxzZSAmJiBpc09iamVjdCh2YWx1ZSkgJiYgKCdAYmluZGluZycgaW4gdmFsdWUpKVxuXHQgICkge1xuXHQgICAgYXNzZXJ0UHJvcChwcm9wLCBrZXksIHZhbHVlLCB2bSwgYWJzZW50KTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSAodm0sIHByb3AsIGtleSkge1xuXHQgIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcblx0ICBpZiAoIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG5cdCAgICByZXR1cm4gdW5kZWZpbmVkXG5cdCAgfVxuXHQgIHZhciBkZWYgPSBwcm9wLmRlZmF1bHQ7XG5cdCAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGlzT2JqZWN0KGRlZikpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsga2V5ICsgJ1wiOiAnICtcblx0ICAgICAgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgK1xuXHQgICAgICAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0ICAvLyB0aGUgcmF3IHByb3AgdmFsdWUgd2FzIGFsc28gdW5kZWZpbmVkIGZyb20gcHJldmlvdXMgcmVuZGVyLFxuXHQgIC8vIHJldHVybiBwcmV2aW91cyBkZWZhdWx0IHZhbHVlIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHdhdGNoZXIgdHJpZ2dlclxuXHQgIGlmICh2bSAmJiB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgJiZcblx0ICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YVtrZXldID09PSB1bmRlZmluZWQgJiZcblx0ICAgIHZtLl9wcm9wc1trZXldICE9PSB1bmRlZmluZWRcblx0ICApIHtcblx0ICAgIHJldHVybiB2bS5fcHJvcHNba2V5XVxuXHQgIH1cblx0ICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuXHQgIC8vIGEgdmFsdWUgaXMgRnVuY3Rpb24gaWYgaXRzIHByb3RvdHlwZSBpcyBmdW5jdGlvbiBldmVuIGFjcm9zcyBkaWZmZXJlbnQgZXhlY3V0aW9uIGNvbnRleHRcblx0ICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBnZXRUeXBlKHByb3AudHlwZSkgIT09ICdGdW5jdGlvbidcblx0ICAgID8gZGVmLmNhbGwodm0pXG5cdCAgICA6IGRlZlxuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXNzZXJ0UHJvcCAoXG5cdCAgcHJvcCxcblx0ICBuYW1lLFxuXHQgIHZhbHVlLFxuXHQgIHZtLFxuXHQgIGFic2VudFxuXHQpIHtcblx0ICBpZiAocHJvcC5yZXF1aXJlZCAmJiBhYnNlbnQpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdNaXNzaW5nIHJlcXVpcmVkIHByb3A6IFwiJyArIG5hbWUgKyAnXCInLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcHJvcC5yZXF1aXJlZCkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciB0eXBlID0gcHJvcC50eXBlO1xuXHQgIHZhciB2YWxpZCA9ICF0eXBlIHx8IHR5cGUgPT09IHRydWU7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgaWYgKCFBcnJheS5pc0FycmF5KHR5cGUpKSB7XG5cdCAgICAgIHR5cGUgPSBbdHlwZV07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG5cdCAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcblx0ICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUgfHwgJycpO1xuXHQgICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCF2YWxpZCkge1xuXHQgICAgd2Fybihcblx0ICAgICAgXCJJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIuXCIgK1xuXHQgICAgICBcIiBFeHBlY3RlZCBcIiArIChleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcsICcpKSArXG5cdCAgICAgIFwiLCBnb3QgXCIgKyAodG9SYXdUeXBlKHZhbHVlKSkgKyBcIi5cIixcblx0ICAgICAgdm1cblx0ICAgICk7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIHZhbGlkYXRvciA9IHByb3AudmFsaWRhdG9yO1xuXHQgIGlmICh2YWxpZGF0b3IpIHtcblx0ICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgICdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIG5hbWUgKyAnXCIuJyxcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHNpbXBsZUNoZWNrUkUgPSAvXihTdHJpbmd8TnVtYmVyfEJvb2xlYW58RnVuY3Rpb258U3ltYm9sKSQvO1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0VHlwZSAodmFsdWUsIHR5cGUpIHtcblx0ICB2YXIgdmFsaWQ7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZSA9IGdldFR5cGUodHlwZSk7XG5cdCAgaWYgKHNpbXBsZUNoZWNrUkUudGVzdChleHBlY3RlZFR5cGUpKSB7XG5cdCAgICB2YXIgdCA9IHR5cGVvZiB2YWx1ZTtcblx0ICAgIHZhbGlkID0gdCA9PT0gZXhwZWN0ZWRUeXBlLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAvLyBmb3IgcHJpbWl0aXZlIHdyYXBwZXIgb2JqZWN0c1xuXHQgICAgaWYgKCF2YWxpZCAmJiB0ID09PSAnb2JqZWN0Jykge1xuXHQgICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ09iamVjdCcpIHtcblx0ICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdBcnJheScpIHtcblx0ICAgIHZhbGlkID0gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgdmFsaWQ6IHZhbGlkLFxuXHQgICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBVc2UgZnVuY3Rpb24gc3RyaW5nIG5hbWUgdG8gY2hlY2sgYnVpbHQtaW4gdHlwZXMsXG5cdCAqIGJlY2F1c2UgYSBzaW1wbGUgZXF1YWxpdHkgY2hlY2sgd2lsbCBmYWlsIHdoZW4gcnVubmluZ1xuXHQgKiBhY3Jvc3MgZGlmZmVyZW50IHZtcyAvIGlmcmFtZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRUeXBlIChmbikge1xuXHQgIHZhciBtYXRjaCA9IGZuICYmIGZuLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb24gKFxcdyspLyk7XG5cdCAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiAnJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1NhbWVUeXBlIChhLCBiKSB7XG5cdCAgcmV0dXJuIGdldFR5cGUoYSkgPT09IGdldFR5cGUoYilcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VHlwZUluZGV4ICh0eXBlLCBleHBlY3RlZFR5cGVzKSB7XG5cdCAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVHlwZXMpKSB7XG5cdCAgICByZXR1cm4gaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzLCB0eXBlKSA/IDAgOiAtMVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMCwgbGVuID0gZXhwZWN0ZWRUeXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgaWYgKGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlc1tpXSwgdHlwZSkpIHtcblx0ICAgICAgcmV0dXJuIGlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcblx0ICBpZiAodm0pIHtcblx0ICAgIHZhciBjdXIgPSB2bTtcblx0ICAgIHdoaWxlICgoY3VyID0gY3VyLiRwYXJlbnQpKSB7XG5cdCAgICAgIHZhciBob29rcyA9IGN1ci4kb3B0aW9ucy5lcnJvckNhcHR1cmVkO1xuXHQgICAgICBpZiAoaG9va3MpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgY2FwdHVyZSA9IGhvb2tzW2ldLmNhbGwoY3VyLCBlcnIsIHZtLCBpbmZvKSA9PT0gZmFsc2U7XG5cdCAgICAgICAgICAgIGlmIChjYXB0dXJlKSB7IHJldHVybiB9XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbEhhbmRsZUVycm9yKGUsIGN1ciwgJ2Vycm9yQ2FwdHVyZWQgaG9vaycpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBnbG9iYWxIYW5kbGVFcnJvcihlcnIsIHZtLCBpbmZvKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2xvYmFsSGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcblx0ICBpZiAoY29uZmlnLmVycm9ySGFuZGxlcikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIGNvbmZpZy5lcnJvckhhbmRsZXIuY2FsbChudWxsLCBlcnIsIHZtLCBpbmZvKVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICBsb2dFcnJvcihlLCBudWxsLCAnY29uZmlnLmVycm9ySGFuZGxlcicpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBsb2dFcnJvcihlcnIsIHZtLCBpbmZvKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbG9nRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgd2FybigoXCJFcnJvciBpbiBcIiArIGluZm8gKyBcIjogXFxcIlwiICsgKGVyci50b1N0cmluZygpKSArIFwiXFxcIlwiKSwgdm0pO1xuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmICgoaW5Ccm93c2VyIHx8IGluV2VleCkgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICBjb25zb2xlLmVycm9yKGVycik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRocm93IGVyclxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdC8qIGdsb2JhbHMgTWVzc2FnZUNoYW5uZWwgKi9cblx0XG5cdHZhciBjYWxsYmFja3MgPSBbXTtcblx0dmFyIHBlbmRpbmcgPSBmYWxzZTtcblx0XG5cdGZ1bmN0aW9uIGZsdXNoQ2FsbGJhY2tzICgpIHtcblx0ICBwZW5kaW5nID0gZmFsc2U7XG5cdCAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcblx0ICBjYWxsYmFja3MubGVuZ3RoID0gMDtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuXHQgICAgY29waWVzW2ldKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBIZXJlIHdlIGhhdmUgYXN5bmMgZGVmZXJyaW5nIHdyYXBwZXJzIHVzaW5nIGJvdGggbWljcm90YXNrcyBhbmQgKG1hY3JvKSB0YXNrcy5cblx0Ly8gSW4gPCAyLjQgd2UgdXNlZCBtaWNyb3Rhc2tzIGV2ZXJ5d2hlcmUsIGJ1dCB0aGVyZSBhcmUgc29tZSBzY2VuYXJpb3Mgd2hlcmVcblx0Ly8gbWljcm90YXNrcyBoYXZlIHRvbyBoaWdoIGEgcHJpb3JpdHkgYW5kIGZpcmUgaW4gYmV0d2VlbiBzdXBwb3NlZGx5XG5cdC8vIHNlcXVlbnRpYWwgZXZlbnRzIChlLmcuICM0NTIxLCAjNjY5MCkgb3IgZXZlbiBiZXR3ZWVuIGJ1YmJsaW5nIG9mIHRoZSBzYW1lXG5cdC8vIGV2ZW50ICgjNjU2NikuIEhvd2V2ZXIsIHVzaW5nIChtYWNybykgdGFza3MgZXZlcnl3aGVyZSBhbHNvIGhhcyBzdWJ0bGUgcHJvYmxlbXNcblx0Ly8gd2hlbiBzdGF0ZSBpcyBjaGFuZ2VkIHJpZ2h0IGJlZm9yZSByZXBhaW50IChlLmcuICM2ODEzLCBvdXQtaW4gdHJhbnNpdGlvbnMpLlxuXHQvLyBIZXJlIHdlIHVzZSBtaWNyb3Rhc2sgYnkgZGVmYXVsdCwgYnV0IGV4cG9zZSBhIHdheSB0byBmb3JjZSAobWFjcm8pIHRhc2sgd2hlblxuXHQvLyBuZWVkZWQgKGUuZy4gaW4gZXZlbnQgaGFuZGxlcnMgYXR0YWNoZWQgYnkgdi1vbikuXG5cdHZhciBtaWNyb1RpbWVyRnVuYztcblx0dmFyIG1hY3JvVGltZXJGdW5jO1xuXHR2YXIgdXNlTWFjcm9UYXNrID0gZmFsc2U7XG5cdFxuXHQvLyBEZXRlcm1pbmUgKG1hY3JvKSB0YXNrIGRlZmVyIGltcGxlbWVudGF0aW9uLlxuXHQvLyBUZWNobmljYWxseSBzZXRJbW1lZGlhdGUgc2hvdWxkIGJlIHRoZSBpZGVhbCBjaG9pY2UsIGJ1dCBpdCdzIG9ubHkgYXZhaWxhYmxlXG5cdC8vIGluIElFLiBUaGUgb25seSBwb2x5ZmlsbCB0aGF0IGNvbnNpc3RlbnRseSBxdWV1ZXMgdGhlIGNhbGxiYWNrIGFmdGVyIGFsbCBET01cblx0Ly8gZXZlbnRzIHRyaWdnZXJlZCBpbiB0aGUgc2FtZSBsb29wIGlzIGJ5IHVzaW5nIE1lc3NhZ2VDaGFubmVsLlxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0aWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKHNldEltbWVkaWF0ZSkpIHtcblx0ICBtYWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHNldEltbWVkaWF0ZShmbHVzaENhbGxiYWNrcyk7XG5cdCAgfTtcblx0fSBlbHNlIGlmICh0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnICYmIChcblx0ICBpc05hdGl2ZShNZXNzYWdlQ2hhbm5lbCkgfHxcblx0ICAvLyBQaGFudG9tSlNcblx0ICBNZXNzYWdlQ2hhbm5lbC50b1N0cmluZygpID09PSAnW29iamVjdCBNZXNzYWdlQ2hhbm5lbENvbnN0cnVjdG9yXSdcblx0KSkge1xuXHQgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgdmFyIHBvcnQgPSBjaGFubmVsLnBvcnQyO1xuXHQgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2hDYWxsYmFja3M7XG5cdCAgbWFjcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBwb3J0LnBvc3RNZXNzYWdlKDEpO1xuXHQgIH07XG5cdH0gZWxzZSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICBtYWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHNldFRpbWVvdXQoZmx1c2hDYWxsYmFja3MsIDApO1xuXHQgIH07XG5cdH1cblx0XG5cdC8vIERldGVybWluZSBtaWNyb3Rhc2sgZGVmZXIgaW1wbGVtZW50YXRpb24uXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0LCAkZmxvdy1kaXNhYmxlLWxpbmUgKi9cblx0aWYgKHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShQcm9taXNlKSkge1xuXHQgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdCAgbWljcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBwLnRoZW4oZmx1c2hDYWxsYmFja3MpO1xuXHQgICAgLy8gaW4gcHJvYmxlbWF0aWMgVUlXZWJWaWV3cywgUHJvbWlzZS50aGVuIGRvZXNuJ3QgY29tcGxldGVseSBicmVhaywgYnV0XG5cdCAgICAvLyBpdCBjYW4gZ2V0IHN0dWNrIGluIGEgd2VpcmQgc3RhdGUgd2hlcmUgY2FsbGJhY2tzIGFyZSBwdXNoZWQgaW50byB0aGVcblx0ICAgIC8vIG1pY3JvdGFzayBxdWV1ZSBidXQgdGhlIHF1ZXVlIGlzbid0IGJlaW5nIGZsdXNoZWQsIHVudGlsIHRoZSBicm93c2VyXG5cdCAgICAvLyBuZWVkcyB0byBkbyBzb21lIG90aGVyIHdvcmssIGUuZy4gaGFuZGxlIGEgdGltZXIuIFRoZXJlZm9yZSB3ZSBjYW5cblx0ICAgIC8vIFwiZm9yY2VcIiB0aGUgbWljcm90YXNrIHF1ZXVlIHRvIGJlIGZsdXNoZWQgYnkgYWRkaW5nIGFuIGVtcHR5IHRpbWVyLlxuXHQgICAgaWYgKGlzSU9TKSB7IHNldFRpbWVvdXQobm9vcCk7IH1cblx0ICB9O1xuXHR9IGVsc2Uge1xuXHQgIC8vIGZhbGxiYWNrIHRvIG1hY3JvXG5cdCAgbWljcm9UaW1lckZ1bmMgPSBtYWNyb1RpbWVyRnVuYztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFdyYXAgYSBmdW5jdGlvbiBzbyB0aGF0IGlmIGFueSBjb2RlIGluc2lkZSB0cmlnZ2VycyBzdGF0ZSBjaGFuZ2UsXG5cdCAqIHRoZSBjaGFuZ2VzIGFyZSBxdWV1ZWQgdXNpbmcgYSAobWFjcm8pIHRhc2sgaW5zdGVhZCBvZiBhIG1pY3JvdGFzay5cblx0ICovXG5cdGZ1bmN0aW9uIHdpdGhNYWNyb1Rhc2sgKGZuKSB7XG5cdCAgcmV0dXJuIGZuLl93aXRoVGFzayB8fCAoZm4uX3dpdGhUYXNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdXNlTWFjcm9UYXNrID0gdHJ1ZTtcblx0ICAgIHZhciByZXMgPSBmbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHQgICAgdXNlTWFjcm9UYXNrID0gZmFsc2U7XG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gbmV4dFRpY2sgKGNiLCBjdHgpIHtcblx0ICB2YXIgX3Jlc29sdmU7XG5cdCAgY2FsbGJhY2tzLnB1c2goZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGNiKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgY2IuY2FsbChjdHgpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgaGFuZGxlRXJyb3IoZSwgY3R4LCAnbmV4dFRpY2snKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChfcmVzb2x2ZSkge1xuXHQgICAgICBfcmVzb2x2ZShjdHgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIGlmICghcGVuZGluZykge1xuXHQgICAgcGVuZGluZyA9IHRydWU7XG5cdCAgICBpZiAodXNlTWFjcm9UYXNrKSB7XG5cdCAgICAgIG1hY3JvVGltZXJGdW5jKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtaWNyb1RpbWVyRnVuYygpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICBpZiAoIWNiICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdCAgICAgIF9yZXNvbHZlID0gcmVzb2x2ZTtcblx0ICAgIH0pXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aCBQcm94eSAqL1xuXHRcblx0dmFyIGluaXRQcm94eTtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdmFyIGFsbG93ZWRHbG9iYWxzID0gbWFrZU1hcChcblx0ICAgICdJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLCcgK1xuXHQgICAgJ3BhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksZW5jb2RlVVJJQ29tcG9uZW50LCcgK1xuXHQgICAgJ01hdGgsTnVtYmVyLERhdGUsQXJyYXksT2JqZWN0LEJvb2xlYW4sU3RyaW5nLFJlZ0V4cCxNYXAsU2V0LEpTT04sSW50bCwnICtcblx0ICAgICdyZXF1aXJlJyAvLyBmb3IgV2VicGFjay9Ccm93c2VyaWZ5XG5cdCAgKTtcblx0XG5cdCAgdmFyIHdhcm5Ob25QcmVzZW50ID0gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIlByb3BlcnR5IG9yIG1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgbm90IGRlZmluZWQgb24gdGhlIGluc3RhbmNlIGJ1dCBcIiArXG5cdCAgICAgICdyZWZlcmVuY2VkIGR1cmluZyByZW5kZXIuIE1ha2Ugc3VyZSB0aGF0IHRoaXMgcHJvcGVydHkgaXMgcmVhY3RpdmUsICcgK1xuXHQgICAgICAnZWl0aGVyIGluIHRoZSBkYXRhIG9wdGlvbiwgb3IgZm9yIGNsYXNzLWJhc2VkIGNvbXBvbmVudHMsIGJ5ICcgK1xuXHQgICAgICAnaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eS4gJyArXG5cdCAgICAgICdTZWU6IGh0dHBzOi8vdnVlanMub3JnL3YyL2d1aWRlL3JlYWN0aXZpdHkuaHRtbCNEZWNsYXJpbmctUmVhY3RpdmUtUHJvcGVydGllcy4nLFxuXHQgICAgICB0YXJnZXRcblx0ICAgICk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIGhhc1Byb3h5ID1cblx0ICAgIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJveHkpO1xuXHRcblx0ICBpZiAoaGFzUHJveHkpIHtcblx0ICAgIHZhciBpc0J1aWx0SW5Nb2RpZmllciA9IG1ha2VNYXAoJ3N0b3AscHJldmVudCxzZWxmLGN0cmwsc2hpZnQsYWx0LG1ldGEsZXhhY3QnKTtcblx0ICAgIGNvbmZpZy5rZXlDb2RlcyA9IG5ldyBQcm94eShjb25maWcua2V5Q29kZXMsIHtcblx0ICAgICAgc2V0OiBmdW5jdGlvbiBzZXQgKHRhcmdldCwga2V5LCB2YWx1ZSkge1xuXHQgICAgICAgIGlmIChpc0J1aWx0SW5Nb2RpZmllcihrZXkpKSB7XG5cdCAgICAgICAgICB3YXJuKChcIkF2b2lkIG92ZXJ3cml0aW5nIGJ1aWx0LWluIG1vZGlmaWVyIGluIGNvbmZpZy5rZXlDb2RlczogLlwiICsga2V5KSk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcblx0ICAgICAgICAgIHJldHVybiB0cnVlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIHZhciBoYXNIYW5kbGVyID0ge1xuXHQgICAgaGFzOiBmdW5jdGlvbiBoYXMgKHRhcmdldCwga2V5KSB7XG5cdCAgICAgIHZhciBoYXMgPSBrZXkgaW4gdGFyZ2V0O1xuXHQgICAgICB2YXIgaXNBbGxvd2VkID0gYWxsb3dlZEdsb2JhbHMoa2V5KSB8fCBrZXkuY2hhckF0KDApID09PSAnXyc7XG5cdCAgICAgIGlmICghaGFzICYmICFpc0FsbG93ZWQpIHtcblx0ICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGhhcyB8fCAhaXNBbGxvd2VkXG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgdmFyIGdldEhhbmRsZXIgPSB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCAodGFyZ2V0LCBrZXkpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmICEoa2V5IGluIHRhcmdldCkpIHtcblx0ICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRhcmdldFtrZXldXG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgaW5pdFByb3h5ID0gZnVuY3Rpb24gaW5pdFByb3h5ICh2bSkge1xuXHQgICAgaWYgKGhhc1Byb3h5KSB7XG5cdCAgICAgIC8vIGRldGVybWluZSB3aGljaCBwcm94eSBoYW5kbGVyIHRvIHVzZVxuXHQgICAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zO1xuXHQgICAgICB2YXIgaGFuZGxlcnMgPSBvcHRpb25zLnJlbmRlciAmJiBvcHRpb25zLnJlbmRlci5fd2l0aFN0cmlwcGVkXG5cdCAgICAgICAgPyBnZXRIYW5kbGVyXG5cdCAgICAgICAgOiBoYXNIYW5kbGVyO1xuXHQgICAgICB2bS5fcmVuZGVyUHJveHkgPSBuZXcgUHJveHkodm0sIGhhbmRsZXJzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZtLl9yZW5kZXJQcm94eSA9IHZtO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcblx0XG5cdC8qKlxuXHQgKiBSZWN1cnNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuXHQgKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuXHQgKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuXHQgKi9cblx0ZnVuY3Rpb24gdHJhdmVyc2UgKHZhbCkge1xuXHQgIF90cmF2ZXJzZSh2YWwsIHNlZW5PYmplY3RzKTtcblx0ICBzZWVuT2JqZWN0cy5jbGVhcigpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfdHJhdmVyc2UgKHZhbCwgc2Vlbikge1xuXHQgIHZhciBpLCBrZXlzO1xuXHQgIHZhciBpc0EgPSBBcnJheS5pc0FycmF5KHZhbCk7XG5cdCAgaWYgKCghaXNBICYmICFpc09iamVjdCh2YWwpKSB8fCBPYmplY3QuaXNGcm96ZW4odmFsKSB8fCB2YWwgaW5zdGFuY2VvZiBWTm9kZSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGlmICh2YWwuX19vYl9fKSB7XG5cdCAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcblx0ICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdCAgICBzZWVuLmFkZChkZXBJZCk7XG5cdCAgfVxuXHQgIGlmIChpc0EpIHtcblx0ICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkgeyBfdHJhdmVyc2UodmFsW2ldLCBzZWVuKTsgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHsgX3RyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7IH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBtYXJrO1xuXHR2YXIgbWVhc3VyZTtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdmFyIHBlcmYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnBlcmZvcm1hbmNlO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChcblx0ICAgIHBlcmYgJiZcblx0ICAgIHBlcmYubWFyayAmJlxuXHQgICAgcGVyZi5tZWFzdXJlICYmXG5cdCAgICBwZXJmLmNsZWFyTWFya3MgJiZcblx0ICAgIHBlcmYuY2xlYXJNZWFzdXJlc1xuXHQgICkge1xuXHQgICAgbWFyayA9IGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIHBlcmYubWFyayh0YWcpOyB9O1xuXHQgICAgbWVhc3VyZSA9IGZ1bmN0aW9uIChuYW1lLCBzdGFydFRhZywgZW5kVGFnKSB7XG5cdCAgICAgIHBlcmYubWVhc3VyZShuYW1lLCBzdGFydFRhZywgZW5kVGFnKTtcblx0ICAgICAgcGVyZi5jbGVhck1hcmtzKHN0YXJ0VGFnKTtcblx0ICAgICAgcGVyZi5jbGVhck1hcmtzKGVuZFRhZyk7XG5cdCAgICAgIHBlcmYuY2xlYXJNZWFzdXJlcyhuYW1lKTtcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBub3JtYWxpemVFdmVudCA9IGNhY2hlZChmdW5jdGlvbiAobmFtZSkge1xuXHQgIHZhciBwYXNzaXZlID0gbmFtZS5jaGFyQXQoMCkgPT09ICcmJztcblx0ICBuYW1lID0gcGFzc2l2ZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lO1xuXHQgIHZhciBvbmNlJCQxID0gbmFtZS5jaGFyQXQoMCkgPT09ICd+JzsgLy8gUHJlZml4ZWQgbGFzdCwgY2hlY2tlZCBmaXJzdFxuXHQgIG5hbWUgPSBvbmNlJCQxID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7XG5cdCAgdmFyIGNhcHR1cmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyEnO1xuXHQgIG5hbWUgPSBjYXB0dXJlID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7XG5cdCAgcmV0dXJuIHtcblx0ICAgIG5hbWU6IG5hbWUsXG5cdCAgICBvbmNlOiBvbmNlJCQxLFxuXHQgICAgY2FwdHVyZTogY2FwdHVyZSxcblx0ICAgIHBhc3NpdmU6IHBhc3NpdmVcblx0ICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlRm5JbnZva2VyIChmbnMpIHtcblx0ICBmdW5jdGlvbiBpbnZva2VyICgpIHtcblx0ICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50cztcblx0XG5cdCAgICB2YXIgZm5zID0gaW52b2tlci5mbnM7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShmbnMpKSB7XG5cdCAgICAgIHZhciBjbG9uZWQgPSBmbnMuc2xpY2UoKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9uZWQubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjbG9uZWRbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzJDEpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyByZXR1cm4gaGFuZGxlciByZXR1cm4gdmFsdWUgZm9yIHNpbmdsZSBoYW5kbGVyc1xuXHQgICAgICByZXR1cm4gZm5zLmFwcGx5KG51bGwsIGFyZ3VtZW50cylcblx0ICAgIH1cblx0ICB9XG5cdCAgaW52b2tlci5mbnMgPSBmbnM7XG5cdCAgcmV0dXJuIGludm9rZXJcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlTGlzdGVuZXJzIChcblx0ICBvbixcblx0ICBvbGRPbixcblx0ICBhZGQsXG5cdCAgcmVtb3ZlJCQxLFxuXHQgIHZtXG5cdCkge1xuXHQgIHZhciBuYW1lLCBkZWYsIGN1ciwgb2xkLCBldmVudDtcblx0ICBmb3IgKG5hbWUgaW4gb24pIHtcblx0ICAgIGRlZiA9IGN1ciA9IG9uW25hbWVdO1xuXHQgICAgb2xkID0gb2xkT25bbmFtZV07XG5cdCAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KG5hbWUpO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoaXNVbmRlZihjdXIpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgICBcIkludmFsaWQgaGFuZGxlciBmb3IgZXZlbnQgXFxcIlwiICsgKGV2ZW50Lm5hbWUpICsgXCJcXFwiOiBnb3QgXCIgKyBTdHJpbmcoY3VyKSxcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIGlmIChpc1VuZGVmKG9sZCkpIHtcblx0ICAgICAgaWYgKGlzVW5kZWYoY3VyLmZucykpIHtcblx0ICAgICAgICBjdXIgPSBvbltuYW1lXSA9IGNyZWF0ZUZuSW52b2tlcihjdXIpO1xuXHQgICAgICB9XG5cdCAgICAgIGFkZChldmVudC5uYW1lLCBjdXIsIGV2ZW50Lm9uY2UsIGV2ZW50LmNhcHR1cmUsIGV2ZW50LnBhc3NpdmUsIGV2ZW50LnBhcmFtcyk7XG5cdCAgICB9IGVsc2UgaWYgKGN1ciAhPT0gb2xkKSB7XG5cdCAgICAgIG9sZC5mbnMgPSBjdXI7XG5cdCAgICAgIG9uW25hbWVdID0gb2xkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKG5hbWUgaW4gb2xkT24pIHtcblx0ICAgIGlmIChpc1VuZGVmKG9uW25hbWVdKSkge1xuXHQgICAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KG5hbWUpO1xuXHQgICAgICByZW1vdmUkJDEoZXZlbnQubmFtZSwgb2xkT25bbmFtZV0sIGV2ZW50LmNhcHR1cmUpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZVZOb2RlSG9vayAoZGVmLCBob29rS2V5LCBob29rKSB7XG5cdCAgaWYgKGRlZiBpbnN0YW5jZW9mIFZOb2RlKSB7XG5cdCAgICBkZWYgPSBkZWYuZGF0YS5ob29rIHx8IChkZWYuZGF0YS5ob29rID0ge30pO1xuXHQgIH1cblx0ICB2YXIgaW52b2tlcjtcblx0ICB2YXIgb2xkSG9vayA9IGRlZltob29rS2V5XTtcblx0XG5cdCAgZnVuY3Rpb24gd3JhcHBlZEhvb2sgKCkge1xuXHQgICAgaG9vay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgLy8gaW1wb3J0YW50OiByZW1vdmUgbWVyZ2VkIGhvb2sgdG8gZW5zdXJlIGl0J3MgY2FsbGVkIG9ubHkgb25jZVxuXHQgICAgLy8gYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtcblx0ICAgIHJlbW92ZShpbnZva2VyLmZucywgd3JhcHBlZEhvb2spO1xuXHQgIH1cblx0XG5cdCAgaWYgKGlzVW5kZWYob2xkSG9vaykpIHtcblx0ICAgIC8vIG5vIGV4aXN0aW5nIGhvb2tcblx0ICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW3dyYXBwZWRIb29rXSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKGlzRGVmKG9sZEhvb2suZm5zKSAmJiBpc1RydWUob2xkSG9vay5tZXJnZWQpKSB7XG5cdCAgICAgIC8vIGFscmVhZHkgYSBtZXJnZWQgaW52b2tlclxuXHQgICAgICBpbnZva2VyID0gb2xkSG9vaztcblx0ICAgICAgaW52b2tlci5mbnMucHVzaCh3cmFwcGVkSG9vayk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBleGlzdGluZyBwbGFpbiBob29rXG5cdCAgICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW29sZEhvb2ssIHdyYXBwZWRIb29rXSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpbnZva2VyLm1lcmdlZCA9IHRydWU7XG5cdCAgZGVmW2hvb2tLZXldID0gaW52b2tlcjtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhIChcblx0ICBkYXRhLFxuXHQgIEN0b3IsXG5cdCAgdGFnXG5cdCkge1xuXHQgIC8vIHdlIGFyZSBvbmx5IGV4dHJhY3RpbmcgcmF3IHZhbHVlcyBoZXJlLlxuXHQgIC8vIHZhbGlkYXRpb24gYW5kIGRlZmF1bHQgdmFsdWVzIGFyZSBoYW5kbGVkIGluIHRoZSBjaGlsZFxuXHQgIC8vIGNvbXBvbmVudCBpdHNlbGYuXG5cdCAgdmFyIHByb3BPcHRpb25zID0gQ3Rvci5vcHRpb25zLnByb3BzO1xuXHQgIGlmIChpc1VuZGVmKHByb3BPcHRpb25zKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciByZXMgPSB7fTtcblx0ICB2YXIgYXR0cnMgPSBkYXRhLmF0dHJzO1xuXHQgIHZhciBwcm9wcyA9IGRhdGEucHJvcHM7XG5cdCAgaWYgKGlzRGVmKGF0dHJzKSB8fCBpc0RlZihwcm9wcykpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wT3B0aW9ucykge1xuXHQgICAgICB2YXIgYWx0S2V5ID0gaHlwaGVuYXRlKGtleSk7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFyIGtleUluTG93ZXJDYXNlID0ga2V5LnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgaWYgKFxuXHQgICAgICAgICAga2V5ICE9PSBrZXlJbkxvd2VyQ2FzZSAmJlxuXHQgICAgICAgICAgYXR0cnMgJiYgaGFzT3duKGF0dHJzLCBrZXlJbkxvd2VyQ2FzZSlcblx0ICAgICAgICApIHtcblx0ICAgICAgICAgIHRpcChcblx0ICAgICAgICAgICAgXCJQcm9wIFxcXCJcIiArIGtleUluTG93ZXJDYXNlICsgXCJcXFwiIGlzIHBhc3NlZCB0byBjb21wb25lbnQgXCIgK1xuXHQgICAgICAgICAgICAoZm9ybWF0Q29tcG9uZW50TmFtZSh0YWcgfHwgQ3RvcikpICsgXCIsIGJ1dCB0aGUgZGVjbGFyZWQgcHJvcCBuYW1lIGlzXCIgK1xuXHQgICAgICAgICAgICBcIiBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuIFwiICtcblx0ICAgICAgICAgICAgXCJOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCBjYW1lbENhc2VkIFwiICtcblx0ICAgICAgICAgICAgXCJwcm9wcyBuZWVkIHRvIHVzZSB0aGVpciBrZWJhYi1jYXNlIGVxdWl2YWxlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIFwiICtcblx0ICAgICAgICAgICAgXCJ0ZW1wbGF0ZXMuIFlvdSBzaG91bGQgcHJvYmFibHkgdXNlIFxcXCJcIiArIGFsdEtleSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGtleSArIFwiXFxcIi5cIlxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgY2hlY2tQcm9wKHJlcywgcHJvcHMsIGtleSwgYWx0S2V5LCB0cnVlKSB8fFxuXHQgICAgICBjaGVja1Byb3AocmVzLCBhdHRycywga2V5LCBhbHRLZXksIGZhbHNlKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja1Byb3AgKFxuXHQgIHJlcyxcblx0ICBoYXNoLFxuXHQgIGtleSxcblx0ICBhbHRLZXksXG5cdCAgcHJlc2VydmVcblx0KSB7XG5cdCAgaWYgKGlzRGVmKGhhc2gpKSB7XG5cdCAgICBpZiAoaGFzT3duKGhhc2gsIGtleSkpIHtcblx0ICAgICAgcmVzW2tleV0gPSBoYXNoW2tleV07XG5cdCAgICAgIGlmICghcHJlc2VydmUpIHtcblx0ICAgICAgICBkZWxldGUgaGFzaFtrZXldO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlXG5cdCAgICB9IGVsc2UgaWYgKGhhc093bihoYXNoLCBhbHRLZXkpKSB7XG5cdCAgICAgIHJlc1trZXldID0gaGFzaFthbHRLZXldO1xuXHQgICAgICBpZiAoIXByZXNlcnZlKSB7XG5cdCAgICAgICAgZGVsZXRlIGhhc2hbYWx0S2V5XTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2Vcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyBUaGUgdGVtcGxhdGUgY29tcGlsZXIgYXR0ZW1wdHMgdG8gbWluaW1pemUgdGhlIG5lZWQgZm9yIG5vcm1hbGl6YXRpb24gYnlcblx0Ly8gc3RhdGljYWxseSBhbmFseXppbmcgdGhlIHRlbXBsYXRlIGF0IGNvbXBpbGUgdGltZS5cblx0Ly9cblx0Ly8gRm9yIHBsYWluIEhUTUwgbWFya3VwLCBub3JtYWxpemF0aW9uIGNhbiBiZSBjb21wbGV0ZWx5IHNraXBwZWQgYmVjYXVzZSB0aGVcblx0Ly8gZ2VuZXJhdGVkIHJlbmRlciBmdW5jdGlvbiBpcyBndWFyYW50ZWVkIHRvIHJldHVybiBBcnJheTxWTm9kZT4uIFRoZXJlIGFyZVxuXHQvLyB0d28gY2FzZXMgd2hlcmUgZXh0cmEgbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQ6XG5cdFxuXHQvLyAxLiBXaGVuIHRoZSBjaGlsZHJlbiBjb250YWlucyBjb21wb25lbnRzIC0gYmVjYXVzZSBhIGZ1bmN0aW9uYWwgY29tcG9uZW50XG5cdC8vIG1heSByZXR1cm4gYW4gQXJyYXkgaW5zdGVhZCBvZiBhIHNpbmdsZSByb290LiBJbiB0aGlzIGNhc2UsIGp1c3QgYSBzaW1wbGVcblx0Ly8gbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQgLSBpZiBhbnkgY2hpbGQgaXMgYW4gQXJyYXksIHdlIGZsYXR0ZW4gdGhlIHdob2xlXG5cdC8vIHRoaW5nIHdpdGggQXJyYXkucHJvdG90eXBlLmNvbmNhdC4gSXQgaXMgZ3VhcmFudGVlZCB0byBiZSBvbmx5IDEtbGV2ZWwgZGVlcFxuXHQvLyBiZWNhdXNlIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBhbHJlYWR5IG5vcm1hbGl6ZSB0aGVpciBvd24gY2hpbGRyZW4uXG5cdGZ1bmN0aW9uIHNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuIChjaGlsZHJlbikge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuW2ldKSkge1xuXHQgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgY2hpbGRyZW4pXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBjaGlsZHJlblxuXHR9XG5cdFxuXHQvLyAyLiBXaGVuIHRoZSBjaGlsZHJlbiBjb250YWlucyBjb25zdHJ1Y3RzIHRoYXQgYWx3YXlzIGdlbmVyYXRlZCBuZXN0ZWQgQXJyYXlzLFxuXHQvLyBlLmcuIDx0ZW1wbGF0ZT4sIDxzbG90Piwgdi1mb3IsIG9yIHdoZW4gdGhlIGNoaWxkcmVuIGlzIHByb3ZpZGVkIGJ5IHVzZXJcblx0Ly8gd2l0aCBoYW5kLXdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9ucyAvIEpTWC4gSW4gc3VjaCBjYXNlcyBhIGZ1bGwgbm9ybWFsaXphdGlvblxuXHQvLyBpcyBuZWVkZWQgdG8gY2F0ZXIgdG8gYWxsIHBvc3NpYmxlIHR5cGVzIG9mIGNoaWxkcmVuIHZhbHVlcy5cblx0ZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7XG5cdCAgcmV0dXJuIGlzUHJpbWl0aXZlKGNoaWxkcmVuKVxuXHQgICAgPyBbY3JlYXRlVGV4dFZOb2RlKGNoaWxkcmVuKV1cblx0ICAgIDogQXJyYXkuaXNBcnJheShjaGlsZHJlbilcblx0ICAgICAgPyBub3JtYWxpemVBcnJheUNoaWxkcmVuKGNoaWxkcmVuKVxuXHQgICAgICA6IHVuZGVmaW5lZFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1RleHROb2RlIChub2RlKSB7XG5cdCAgcmV0dXJuIGlzRGVmKG5vZGUpICYmIGlzRGVmKG5vZGUudGV4dCkgJiYgaXNGYWxzZShub2RlLmlzQ29tbWVudClcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplQXJyYXlDaGlsZHJlbiAoY2hpbGRyZW4sIG5lc3RlZEluZGV4KSB7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIHZhciBpLCBjLCBsYXN0SW5kZXgsIGxhc3Q7XG5cdCAgZm9yIChpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBjID0gY2hpbGRyZW5baV07XG5cdCAgICBpZiAoaXNVbmRlZihjKSB8fCB0eXBlb2YgYyA9PT0gJ2Jvb2xlYW4nKSB7IGNvbnRpbnVlIH1cblx0ICAgIGxhc3RJbmRleCA9IHJlcy5sZW5ndGggLSAxO1xuXHQgICAgbGFzdCA9IHJlc1tsYXN0SW5kZXhdO1xuXHQgICAgLy8gIG5lc3RlZFxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoYykpIHtcblx0ICAgICAgaWYgKGMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGMgPSBub3JtYWxpemVBcnJheUNoaWxkcmVuKGMsICgobmVzdGVkSW5kZXggfHwgJycpICsgXCJfXCIgKyBpKSk7XG5cdCAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuXHQgICAgICAgIGlmIChpc1RleHROb2RlKGNbMF0pICYmIGlzVGV4dE5vZGUobGFzdCkpIHtcblx0ICAgICAgICAgIHJlc1tsYXN0SW5kZXhdID0gY3JlYXRlVGV4dFZOb2RlKGxhc3QudGV4dCArIChjWzBdKS50ZXh0KTtcblx0ICAgICAgICAgIGMuc2hpZnQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVzLnB1c2guYXBwbHkocmVzLCBjKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1ByaW1pdGl2ZShjKSkge1xuXHQgICAgICBpZiAoaXNUZXh0Tm9kZShsYXN0KSkge1xuXHQgICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXNcblx0ICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgU1NSIGh5ZHJhdGlvbiBiZWNhdXNlIHRleHQgbm9kZXMgYXJlXG5cdCAgICAgICAgLy8gZXNzZW50aWFsbHkgbWVyZ2VkIHdoZW4gcmVuZGVyZWQgdG8gSFRNTCBzdHJpbmdzXG5cdCAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoYyAhPT0gJycpIHtcblx0ICAgICAgICAvLyBjb252ZXJ0IHByaW1pdGl2ZSB0byB2bm9kZVxuXHQgICAgICAgIHJlcy5wdXNoKGNyZWF0ZVRleHRWTm9kZShjKSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChpc1RleHROb2RlKGMpICYmIGlzVGV4dE5vZGUobGFzdCkpIHtcblx0ICAgICAgICAvLyBtZXJnZSBhZGphY2VudCB0ZXh0IG5vZGVzXG5cdCAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYy50ZXh0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBkZWZhdWx0IGtleSBmb3IgbmVzdGVkIGFycmF5IGNoaWxkcmVuIChsaWtlbHkgZ2VuZXJhdGVkIGJ5IHYtZm9yKVxuXHQgICAgICAgIGlmIChpc1RydWUoY2hpbGRyZW4uX2lzVkxpc3QpICYmXG5cdCAgICAgICAgICBpc0RlZihjLnRhZykgJiZcblx0ICAgICAgICAgIGlzVW5kZWYoYy5rZXkpICYmXG5cdCAgICAgICAgICBpc0RlZihuZXN0ZWRJbmRleCkpIHtcblx0ICAgICAgICAgIGMua2V5ID0gXCJfX3ZsaXN0XCIgKyBuZXN0ZWRJbmRleCArIFwiX1wiICsgaSArIFwiX19cIjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVzLnB1c2goYyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGVuc3VyZUN0b3IgKGNvbXAsIGJhc2UpIHtcblx0ICBpZiAoXG5cdCAgICBjb21wLl9fZXNNb2R1bGUgfHxcblx0ICAgIChoYXNTeW1ib2wgJiYgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJylcblx0ICApIHtcblx0ICAgIGNvbXAgPSBjb21wLmRlZmF1bHQ7XG5cdCAgfVxuXHQgIHJldHVybiBpc09iamVjdChjb21wKVxuXHQgICAgPyBiYXNlLmV4dGVuZChjb21wKVxuXHQgICAgOiBjb21wXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIgKFxuXHQgIGZhY3RvcnksXG5cdCAgZGF0YSxcblx0ICBjb250ZXh0LFxuXHQgIGNoaWxkcmVuLFxuXHQgIHRhZ1xuXHQpIHtcblx0ICB2YXIgbm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTtcblx0ICBub2RlLmFzeW5jRmFjdG9yeSA9IGZhY3Rvcnk7XG5cdCAgbm9kZS5hc3luY01ldGEgPSB7IGRhdGE6IGRhdGEsIGNvbnRleHQ6IGNvbnRleHQsIGNoaWxkcmVuOiBjaGlsZHJlbiwgdGFnOiB0YWcgfTtcblx0ICByZXR1cm4gbm9kZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnQgKFxuXHQgIGZhY3RvcnksXG5cdCAgYmFzZUN0b3IsXG5cdCAgY29udGV4dFxuXHQpIHtcblx0ICBpZiAoaXNUcnVlKGZhY3RvcnkuZXJyb3IpICYmIGlzRGVmKGZhY3RvcnkuZXJyb3JDb21wKSkge1xuXHQgICAgcmV0dXJuIGZhY3RvcnkuZXJyb3JDb21wXG5cdCAgfVxuXHRcblx0ICBpZiAoaXNEZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcblx0ICAgIHJldHVybiBmYWN0b3J5LnJlc29sdmVkXG5cdCAgfVxuXHRcblx0ICBpZiAoaXNUcnVlKGZhY3RvcnkubG9hZGluZykgJiYgaXNEZWYoZmFjdG9yeS5sb2FkaW5nQ29tcCkpIHtcblx0ICAgIHJldHVybiBmYWN0b3J5LmxvYWRpbmdDb21wXG5cdCAgfVxuXHRcblx0ICBpZiAoaXNEZWYoZmFjdG9yeS5jb250ZXh0cykpIHtcblx0ICAgIC8vIGFscmVhZHkgcGVuZGluZ1xuXHQgICAgZmFjdG9yeS5jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGV4dHMgPSBmYWN0b3J5LmNvbnRleHRzID0gW2NvbnRleHRdO1xuXHQgICAgdmFyIHN5bmMgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBmb3JjZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZXh0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBjb250ZXh0c1tpXS4kZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuXHQgICAgICBmYWN0b3J5LnJlc29sdmVkID0gZW5zdXJlQ3RvcihyZXMsIGJhc2VDdG9yKTtcblx0ICAgICAgLy8gaW52b2tlIGNhbGxiYWNrcyBvbmx5IGlmIHRoaXMgaXMgbm90IGEgc3luY2hyb25vdXMgcmVzb2x2ZVxuXHQgICAgICAvLyAoYXN5bmMgcmVzb2x2ZXMgYXJlIHNoaW1tZWQgYXMgc3luY2hyb25vdXMgZHVyaW5nIFNTUilcblx0ICAgICAgaWYgKCFzeW5jKSB7XG5cdCAgICAgICAgZm9yY2VSZW5kZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHJlamVjdCA9IG9uY2UoZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgXCJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQ6IFwiICsgKFN0cmluZyhmYWN0b3J5KSkgK1xuXHQgICAgICAgIChyZWFzb24gPyAoXCJcXG5SZWFzb246IFwiICsgcmVhc29uKSA6ICcnKVxuXHQgICAgICApO1xuXHQgICAgICBpZiAoaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7XG5cdCAgICAgICAgZmFjdG9yeS5lcnJvciA9IHRydWU7XG5cdCAgICAgICAgZm9yY2VSZW5kZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHJlcyA9IGZhY3RvcnkocmVzb2x2ZSwgcmVqZWN0KTtcblx0XG5cdCAgICBpZiAoaXNPYmplY3QocmVzKSkge1xuXHQgICAgICBpZiAodHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgLy8gKCkgPT4gUHJvbWlzZVxuXHQgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7XG5cdCAgICAgICAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChpc0RlZihyZXMuY29tcG9uZW50KSAmJiB0eXBlb2YgcmVzLmNvbXBvbmVudC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgcmVzLmNvbXBvbmVudC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdFxuXHQgICAgICAgIGlmIChpc0RlZihyZXMuZXJyb3IpKSB7XG5cdCAgICAgICAgICBmYWN0b3J5LmVycm9yQ29tcCA9IGVuc3VyZUN0b3IocmVzLmVycm9yLCBiYXNlQ3Rvcik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoaXNEZWYocmVzLmxvYWRpbmcpKSB7XG5cdCAgICAgICAgICBmYWN0b3J5LmxvYWRpbmdDb21wID0gZW5zdXJlQ3RvcihyZXMubG9hZGluZywgYmFzZUN0b3IpO1xuXHQgICAgICAgICAgaWYgKHJlcy5kZWxheSA9PT0gMCkge1xuXHQgICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkgJiYgaXNVbmRlZihmYWN0b3J5LmVycm9yKSkge1xuXHQgICAgICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGZvcmNlUmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCByZXMuZGVsYXkgfHwgMjAwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChpc0RlZihyZXMudGltZW91dCkpIHtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBpZiAoaXNVbmRlZihmYWN0b3J5LnJlc29sdmVkKSkge1xuXHQgICAgICAgICAgICAgIHJlamVjdChcblx0ICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbidcblx0ICAgICAgICAgICAgICAgICAgPyAoXCJ0aW1lb3V0IChcIiArIChyZXMudGltZW91dCkgKyBcIm1zKVwiKVxuXHQgICAgICAgICAgICAgICAgICA6IG51bGxcblx0ICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9LCByZXMudGltZW91dCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgc3luYyA9IGZhbHNlO1xuXHQgICAgLy8gcmV0dXJuIGluIGNhc2UgcmVzb2x2ZWQgc3luY2hyb25vdXNseVxuXHQgICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ1xuXHQgICAgICA/IGZhY3RvcnkubG9hZGluZ0NvbXBcblx0ICAgICAgOiBmYWN0b3J5LnJlc29sdmVkXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGlzQXN5bmNQbGFjZWhvbGRlciAobm9kZSkge1xuXHQgIHJldHVybiBub2RlLmlzQ29tbWVudCAmJiBub2RlLmFzeW5jRmFjdG9yeVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEZpcnN0Q29tcG9uZW50Q2hpbGQgKGNoaWxkcmVuKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBjID0gY2hpbGRyZW5baV07XG5cdCAgICAgIGlmIChpc0RlZihjKSAmJiAoaXNEZWYoYy5jb21wb25lbnRPcHRpb25zKSB8fCBpc0FzeW5jUGxhY2Vob2xkZXIoYykpKSB7XG5cdCAgICAgICAgcmV0dXJuIGNcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRFdmVudHMgKHZtKSB7XG5cdCAgdm0uX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdm0uX2hhc0hvb2tFdmVudCA9IGZhbHNlO1xuXHQgIC8vIGluaXQgcGFyZW50IGF0dGFjaGVkIGV2ZW50c1xuXHQgIHZhciBsaXN0ZW5lcnMgPSB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuXHQgIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSwgbGlzdGVuZXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0YXJnZXQ7XG5cdFxuXHRmdW5jdGlvbiBhZGQgKGV2ZW50LCBmbiwgb25jZSkge1xuXHQgIGlmIChvbmNlKSB7XG5cdCAgICB0YXJnZXQuJG9uY2UoZXZlbnQsIGZuKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LiRvbihldmVudCwgZm4pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlJDEgKGV2ZW50LCBmbikge1xuXHQgIHRhcmdldC4kb2ZmKGV2ZW50LCBmbik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyAoXG5cdCAgdm0sXG5cdCAgbGlzdGVuZXJzLFxuXHQgIG9sZExpc3RlbmVyc1xuXHQpIHtcblx0ICB0YXJnZXQgPSB2bTtcblx0ICB1cGRhdGVMaXN0ZW5lcnMobGlzdGVuZXJzLCBvbGRMaXN0ZW5lcnMgfHwge30sIGFkZCwgcmVtb3ZlJDEsIHZtKTtcblx0ICB0YXJnZXQgPSB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcblx0ICB2YXIgaG9va1JFID0gL15ob29rOi87XG5cdCAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZXZlbnQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdGhpcyQxLiRvbihldmVudFtpXSwgZm4pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAodm0uX2V2ZW50c1tldmVudF0gfHwgKHZtLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcblx0ICAgICAgLy8gb3B0aW1pemUgaG9vazpldmVudCBjb3N0IGJ5IHVzaW5nIGEgYm9vbGVhbiBmbGFnIG1hcmtlZCBhdCByZWdpc3RyYXRpb25cblx0ICAgICAgLy8gaW5zdGVhZCBvZiBhIGhhc2ggbG9va3VwXG5cdCAgICAgIGlmIChob29rUkUudGVzdChldmVudCkpIHtcblx0ICAgICAgICB2bS5faGFzSG9va0V2ZW50ID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtXG5cdCAgfTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBmdW5jdGlvbiBvbiAoKSB7XG5cdCAgICAgIHZtLiRvZmYoZXZlbnQsIG9uKTtcblx0ICAgICAgZm4uYXBwbHkodm0sIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBvbi5mbiA9IGZuO1xuXHQgICAgdm0uJG9uKGV2ZW50LCBvbik7XG5cdCAgICByZXR1cm4gdm1cblx0ICB9O1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgLy8gYWxsXG5cdCAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgdm0uX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgLy8gYXJyYXkgb2YgZXZlbnRzXG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBldmVudC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB0aGlzJDEuJG9mZihldmVudFtpXSwgZm4pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgZXZlbnRcblx0ICAgIHZhciBjYnMgPSB2bS5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIGlmICghY2JzKSB7XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgaWYgKCFmbikge1xuXHQgICAgICB2bS5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgaWYgKGZuKSB7XG5cdCAgICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcblx0ICAgICAgdmFyIGNiO1xuXHQgICAgICB2YXIgaSQxID0gY2JzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGkkMS0tKSB7XG5cdCAgICAgICAgY2IgPSBjYnNbaSQxXTtcblx0ICAgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuXHQgICAgICAgICAgY2JzLnNwbGljZShpJDEsIDEpO1xuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB2bVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB2YXIgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICBpZiAobG93ZXJDYXNlRXZlbnQgIT09IGV2ZW50ICYmIHZtLl9ldmVudHNbbG93ZXJDYXNlRXZlbnRdKSB7XG5cdCAgICAgICAgdGlwKFxuXHQgICAgICAgICAgXCJFdmVudCBcXFwiXCIgKyBsb3dlckNhc2VFdmVudCArIFwiXFxcIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCBcIiArXG5cdCAgICAgICAgICAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgXCIgYnV0IHRoZSBoYW5kbGVyIGlzIHJlZ2lzdGVyZWQgZm9yIFxcXCJcIiArIGV2ZW50ICsgXCJcXFwiLiBcIiArXG5cdCAgICAgICAgICBcIk5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIHlvdSBjYW5ub3QgdXNlIFwiICtcblx0ICAgICAgICAgIFwidi1vbiB0byBsaXN0ZW4gdG8gY2FtZWxDYXNlIGV2ZW50cyB3aGVuIHVzaW5nIGluLURPTSB0ZW1wbGF0ZXMuIFwiICtcblx0ICAgICAgICAgIFwiWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXFxcIlwiICsgKGh5cGhlbmF0ZShldmVudCkpICsgXCJcXFwiIGluc3RlYWQgb2YgXFxcIlwiICsgZXZlbnQgKyBcIlxcXCIuXCJcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgY2JzID0gdm0uX2V2ZW50c1tldmVudF07XG5cdCAgICBpZiAoY2JzKSB7XG5cdCAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuXHQgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNic1tpXS5hcHBseSh2bSwgYXJncyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIChcImV2ZW50IGhhbmRsZXIgZm9yIFxcXCJcIiArIGV2ZW50ICsgXCJcXFwiXCIpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB2bVxuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdFxuXHQvKipcblx0ICogUnVudGltZSBoZWxwZXIgZm9yIHJlc29sdmluZyByYXcgY2hpbGRyZW4gVk5vZGVzIGludG8gYSBzbG90IG9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIHJlc29sdmVTbG90cyAoXG5cdCAgY2hpbGRyZW4sXG5cdCAgY29udGV4dFxuXHQpIHtcblx0ICB2YXIgc2xvdHMgPSB7fTtcblx0ICBpZiAoIWNoaWxkcmVuKSB7XG5cdCAgICByZXR1cm4gc2xvdHNcblx0ICB9XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHQgICAgdmFyIGRhdGEgPSBjaGlsZC5kYXRhO1xuXHQgICAgLy8gcmVtb3ZlIHNsb3QgYXR0cmlidXRlIGlmIHRoZSBub2RlIGlzIHJlc29sdmVkIGFzIGEgVnVlIHNsb3Qgbm9kZVxuXHQgICAgaWYgKGRhdGEgJiYgZGF0YS5hdHRycyAmJiBkYXRhLmF0dHJzLnNsb3QpIHtcblx0ICAgICAgZGVsZXRlIGRhdGEuYXR0cnMuc2xvdDtcblx0ICAgIH1cblx0ICAgIC8vIG5hbWVkIHNsb3RzIHNob3VsZCBvbmx5IGJlIHJlc3BlY3RlZCBpZiB0aGUgdm5vZGUgd2FzIHJlbmRlcmVkIGluIHRoZVxuXHQgICAgLy8gc2FtZSBjb250ZXh0LlxuXHQgICAgaWYgKChjaGlsZC5jb250ZXh0ID09PSBjb250ZXh0IHx8IGNoaWxkLmZuQ29udGV4dCA9PT0gY29udGV4dCkgJiZcblx0ICAgICAgZGF0YSAmJiBkYXRhLnNsb3QgIT0gbnVsbFxuXHQgICAgKSB7XG5cdCAgICAgIHZhciBuYW1lID0gZGF0YS5zbG90O1xuXHQgICAgICB2YXIgc2xvdCA9IChzbG90c1tuYW1lXSB8fCAoc2xvdHNbbmFtZV0gPSBbXSkpO1xuXHQgICAgICBpZiAoY2hpbGQudGFnID09PSAndGVtcGxhdGUnKSB7XG5cdCAgICAgICAgc2xvdC5wdXNoLmFwcGx5KHNsb3QsIGNoaWxkLmNoaWxkcmVuIHx8IFtdKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzbG90LnB1c2goY2hpbGQpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAoc2xvdHMuZGVmYXVsdCB8fCAoc2xvdHMuZGVmYXVsdCA9IFtdKSkucHVzaChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGlnbm9yZSBzbG90cyB0aGF0IGNvbnRhaW5zIG9ubHkgd2hpdGVzcGFjZVxuXHQgIGZvciAodmFyIG5hbWUkMSBpbiBzbG90cykge1xuXHQgICAgaWYgKHNsb3RzW25hbWUkMV0uZXZlcnkoaXNXaGl0ZXNwYWNlKSkge1xuXHQgICAgICBkZWxldGUgc2xvdHNbbmFtZSQxXTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHNsb3RzXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzV2hpdGVzcGFjZSAobm9kZSkge1xuXHQgIHJldHVybiAobm9kZS5pc0NvbW1lbnQgJiYgIW5vZGUuYXN5bmNGYWN0b3J5KSB8fCBub2RlLnRleHQgPT09ICcgJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlU2NvcGVkU2xvdHMgKFxuXHQgIGZucywgLy8gc2VlIGZsb3cvdm5vZGVcblx0ICByZXNcblx0KSB7XG5cdCAgcmVzID0gcmVzIHx8IHt9O1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShmbnNbaV0pKSB7XG5cdCAgICAgIHJlc29sdmVTY29wZWRTbG90cyhmbnNbaV0sIHJlcyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXNbZm5zW2ldLmtleV0gPSBmbnNbaV0uZm47XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgYWN0aXZlSW5zdGFuY2UgPSBudWxsO1xuXHR2YXIgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gZmFsc2U7XG5cdFxuXHRmdW5jdGlvbiBpbml0TGlmZWN5Y2xlICh2bSkge1xuXHQgIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7XG5cdFxuXHQgIC8vIGxvY2F0ZSBmaXJzdCBub24tYWJzdHJhY3QgcGFyZW50XG5cdCAgdmFyIHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuXHQgIGlmIChwYXJlbnQgJiYgIW9wdGlvbnMuYWJzdHJhY3QpIHtcblx0ICAgIHdoaWxlIChwYXJlbnQuJG9wdGlvbnMuYWJzdHJhY3QgJiYgcGFyZW50LiRwYXJlbnQpIHtcblx0ICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG5cdCAgICB9XG5cdCAgICBwYXJlbnQuJGNoaWxkcmVuLnB1c2godm0pO1xuXHQgIH1cblx0XG5cdCAgdm0uJHBhcmVudCA9IHBhcmVudDtcblx0ICB2bS4kcm9vdCA9IHBhcmVudCA/IHBhcmVudC4kcm9vdCA6IHZtO1xuXHRcblx0ICB2bS4kY2hpbGRyZW4gPSBbXTtcblx0ICB2bS4kcmVmcyA9IHt9O1xuXHRcblx0ICB2bS5fd2F0Y2hlciA9IG51bGw7XG5cdCAgdm0uX2luYWN0aXZlID0gbnVsbDtcblx0ICB2bS5fZGlyZWN0SW5hY3RpdmUgPSBmYWxzZTtcblx0ICB2bS5faXNNb3VudGVkID0gZmFsc2U7XG5cdCAgdm0uX2lzRGVzdHJveWVkID0gZmFsc2U7XG5cdCAgdm0uX2lzQmVpbmdEZXN0cm95ZWQgPSBmYWxzZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuXHQgIFZ1ZS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2bm9kZSwgaHlkcmF0aW5nKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKHZtLl9pc01vdW50ZWQpIHtcblx0ICAgICAgY2FsbEhvb2sodm0sICdiZWZvcmVVcGRhdGUnKTtcblx0ICAgIH1cblx0ICAgIHZhciBwcmV2RWwgPSB2bS4kZWw7XG5cdCAgICB2YXIgcHJldlZub2RlID0gdm0uX3Zub2RlO1xuXHQgICAgdmFyIHByZXZBY3RpdmVJbnN0YW5jZSA9IGFjdGl2ZUluc3RhbmNlO1xuXHQgICAgYWN0aXZlSW5zdGFuY2UgPSB2bTtcblx0ICAgIHZtLl92bm9kZSA9IHZub2RlO1xuXHQgICAgLy8gVnVlLnByb3RvdHlwZS5fX3BhdGNoX18gaXMgaW5qZWN0ZWQgaW4gZW50cnkgcG9pbnRzXG5cdCAgICAvLyBiYXNlZCBvbiB0aGUgcmVuZGVyaW5nIGJhY2tlbmQgdXNlZC5cblx0ICAgIGlmICghcHJldlZub2RlKSB7XG5cdCAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG5cdCAgICAgIHZtLiRlbCA9IHZtLl9fcGF0Y2hfXyhcblx0ICAgICAgICB2bS4kZWwsIHZub2RlLCBoeWRyYXRpbmcsIGZhbHNlIC8qIHJlbW92ZU9ubHkgKi8sXG5cdCAgICAgICAgdm0uJG9wdGlvbnMuX3BhcmVudEVsbSxcblx0ICAgICAgICB2bS4kb3B0aW9ucy5fcmVmRWxtXG5cdCAgICAgICk7XG5cdCAgICAgIC8vIG5vIG5lZWQgZm9yIHRoZSByZWYgbm9kZXMgYWZ0ZXIgaW5pdGlhbCBwYXRjaFxuXHQgICAgICAvLyB0aGlzIHByZXZlbnRzIGtlZXBpbmcgYSBkZXRhY2hlZCBET00gdHJlZSBpbiBtZW1vcnkgKCM1ODUxKVxuXHQgICAgICB2bS4kb3B0aW9ucy5fcGFyZW50RWxtID0gdm0uJG9wdGlvbnMuX3JlZkVsbSA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB1cGRhdGVzXG5cdCAgICAgIHZtLiRlbCA9IHZtLl9fcGF0Y2hfXyhwcmV2Vm5vZGUsIHZub2RlKTtcblx0ICAgIH1cblx0ICAgIGFjdGl2ZUluc3RhbmNlID0gcHJldkFjdGl2ZUluc3RhbmNlO1xuXHQgICAgLy8gdXBkYXRlIF9fdnVlX18gcmVmZXJlbmNlXG5cdCAgICBpZiAocHJldkVsKSB7XG5cdCAgICAgIHByZXZFbC5fX3Z1ZV9fID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmICh2bS4kZWwpIHtcblx0ICAgICAgdm0uJGVsLl9fdnVlX18gPSB2bTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHBhcmVudCBpcyBhbiBIT0MsIHVwZGF0ZSBpdHMgJGVsIGFzIHdlbGxcblx0ICAgIGlmICh2bS4kdm5vZGUgJiYgdm0uJHBhcmVudCAmJiB2bS4kdm5vZGUgPT09IHZtLiRwYXJlbnQuX3Zub2RlKSB7XG5cdCAgICAgIHZtLiRwYXJlbnQuJGVsID0gdm0uJGVsO1xuXHQgICAgfVxuXHQgICAgLy8gdXBkYXRlZCBob29rIGlzIGNhbGxlZCBieSB0aGUgc2NoZWR1bGVyIHRvIGVuc3VyZSB0aGF0IGNoaWxkcmVuIGFyZVxuXHQgICAgLy8gdXBkYXRlZCBpbiBhIHBhcmVudCdzIHVwZGF0ZWQgaG9vay5cblx0ICB9O1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAodm0uX3dhdGNoZXIpIHtcblx0ICAgICAgdm0uX3dhdGNoZXIudXBkYXRlKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAodm0uX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdCAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZURlc3Ryb3knKTtcblx0ICAgIHZtLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50XG5cdCAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcblx0ICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdm0uJG9wdGlvbnMuYWJzdHJhY3QpIHtcblx0ICAgICAgcmVtb3ZlKHBhcmVudC4kY2hpbGRyZW4sIHZtKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIHdhdGNoZXJzXG5cdCAgICBpZiAodm0uX3dhdGNoZXIpIHtcblx0ICAgICAgdm0uX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIHZhciBpID0gdm0uX3dhdGNoZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdm0uX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuXHQgICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG5cdCAgICBpZiAodm0uX2RhdGEuX19vYl9fKSB7XG5cdCAgICAgIHZtLl9kYXRhLl9fb2JfXy52bUNvdW50LS07XG5cdCAgICB9XG5cdCAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cblx0ICAgIHZtLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICAvLyBpbnZva2UgZGVzdHJveSBob29rcyBvbiBjdXJyZW50IHJlbmRlcmVkIHRyZWVcblx0ICAgIHZtLl9fcGF0Y2hfXyh2bS5fdm5vZGUsIG51bGwpO1xuXHQgICAgLy8gZmlyZSBkZXN0cm95ZWQgaG9va1xuXHQgICAgY2FsbEhvb2sodm0sICdkZXN0cm95ZWQnKTtcblx0ICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG5cdCAgICB2bS4kb2ZmKCk7XG5cdCAgICAvLyByZW1vdmUgX192dWVfXyByZWZlcmVuY2Vcblx0ICAgIGlmICh2bS4kZWwpIHtcblx0ICAgICAgdm0uJGVsLl9fdnVlX18gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgLy8gcmVsZWFzZSBjaXJjdWxhciByZWZlcmVuY2UgKCM2NzU5KVxuXHQgICAgaWYgKHZtLiR2bm9kZSkge1xuXHQgICAgICB2bS4kdm5vZGUucGFyZW50ID0gbnVsbDtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtb3VudENvbXBvbmVudCAoXG5cdCAgdm0sXG5cdCAgZWwsXG5cdCAgaHlkcmF0aW5nXG5cdCkge1xuXHQgIHZtLiRlbCA9IGVsO1xuXHQgIGlmICghdm0uJG9wdGlvbnMucmVuZGVyKSB7XG5cdCAgICB2bS4kb3B0aW9ucy5yZW5kZXIgPSBjcmVhdGVFbXB0eVZOb2RlO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICgodm0uJG9wdGlvbnMudGVtcGxhdGUgJiYgdm0uJG9wdGlvbnMudGVtcGxhdGUuY2hhckF0KDApICE9PSAnIycpIHx8XG5cdCAgICAgICAgdm0uJG9wdGlvbnMuZWwgfHwgZWwpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgJ1lvdSBhcmUgdXNpbmcgdGhlIHJ1bnRpbWUtb25seSBidWlsZCBvZiBWdWUgd2hlcmUgdGhlIHRlbXBsYXRlICcgK1xuXHQgICAgICAgICAgJ2NvbXBpbGVyIGlzIG5vdCBhdmFpbGFibGUuIEVpdGhlciBwcmUtY29tcGlsZSB0aGUgdGVtcGxhdGVzIGludG8gJyArXG5cdCAgICAgICAgICAncmVuZGVyIGZ1bmN0aW9ucywgb3IgdXNlIHRoZSBjb21waWxlci1pbmNsdWRlZCBidWlsZC4nLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAnRmFpbGVkIHRvIG1vdW50IGNvbXBvbmVudDogdGVtcGxhdGUgb3IgcmVuZGVyIGZ1bmN0aW9uIG5vdCBkZWZpbmVkLicsXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgY2FsbEhvb2sodm0sICdiZWZvcmVNb3VudCcpO1xuXHRcblx0ICB2YXIgdXBkYXRlQ29tcG9uZW50O1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG5cdCAgICB1cGRhdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBuYW1lID0gdm0uX25hbWU7XG5cdCAgICAgIHZhciBpZCA9IHZtLl91aWQ7XG5cdCAgICAgIHZhciBzdGFydFRhZyA9IFwidnVlLXBlcmYtc3RhcnQ6XCIgKyBpZDtcblx0ICAgICAgdmFyIGVuZFRhZyA9IFwidnVlLXBlcmYtZW5kOlwiICsgaWQ7XG5cdFxuXHQgICAgICBtYXJrKHN0YXJ0VGFnKTtcblx0ICAgICAgdmFyIHZub2RlID0gdm0uX3JlbmRlcigpO1xuXHQgICAgICBtYXJrKGVuZFRhZyk7XG5cdCAgICAgIG1lYXN1cmUoKFwidnVlIFwiICsgbmFtZSArIFwiIHJlbmRlclwiKSwgc3RhcnRUYWcsIGVuZFRhZyk7XG5cdFxuXHQgICAgICBtYXJrKHN0YXJ0VGFnKTtcblx0ICAgICAgdm0uX3VwZGF0ZSh2bm9kZSwgaHlkcmF0aW5nKTtcblx0ICAgICAgbWFyayhlbmRUYWcpO1xuXHQgICAgICBtZWFzdXJlKChcInZ1ZSBcIiArIG5hbWUgKyBcIiBwYXRjaFwiKSwgc3RhcnRUYWcsIGVuZFRhZyk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICB1cGRhdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZtLl91cGRhdGUodm0uX3JlbmRlcigpLCBoeWRyYXRpbmcpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8vIHdlIHNldCB0aGlzIHRvIHZtLl93YXRjaGVyIGluc2lkZSB0aGUgd2F0Y2hlcidzIGNvbnN0cnVjdG9yXG5cdCAgLy8gc2luY2UgdGhlIHdhdGNoZXIncyBpbml0aWFsIHBhdGNoIG1heSBjYWxsICRmb3JjZVVwZGF0ZSAoZS5nLiBpbnNpZGUgY2hpbGRcblx0ICAvLyBjb21wb25lbnQncyBtb3VudGVkIGhvb2spLCB3aGljaCByZWxpZXMgb24gdm0uX3dhdGNoZXIgYmVpbmcgYWxyZWFkeSBkZWZpbmVkXG5cdCAgbmV3IFdhdGNoZXIodm0sIHVwZGF0ZUNvbXBvbmVudCwgbm9vcCwgbnVsbCwgdHJ1ZSAvKiBpc1JlbmRlcldhdGNoZXIgKi8pO1xuXHQgIGh5ZHJhdGluZyA9IGZhbHNlO1xuXHRcblx0ICAvLyBtYW51YWxseSBtb3VudGVkIGluc3RhbmNlLCBjYWxsIG1vdW50ZWQgb24gc2VsZlxuXHQgIC8vIG1vdW50ZWQgaXMgY2FsbGVkIGZvciByZW5kZXItY3JlYXRlZCBjaGlsZCBjb21wb25lbnRzIGluIGl0cyBpbnNlcnRlZCBob29rXG5cdCAgaWYgKHZtLiR2bm9kZSA9PSBudWxsKSB7XG5cdCAgICB2bS5faXNNb3VudGVkID0gdHJ1ZTtcblx0ICAgIGNhbGxIb29rKHZtLCAnbW91bnRlZCcpO1xuXHQgIH1cblx0ICByZXR1cm4gdm1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlQ2hpbGRDb21wb25lbnQgKFxuXHQgIHZtLFxuXHQgIHByb3BzRGF0YSxcblx0ICBsaXN0ZW5lcnMsXG5cdCAgcGFyZW50Vm5vZGUsXG5cdCAgcmVuZGVyQ2hpbGRyZW5cblx0KSB7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IHRydWU7XG5cdCAgfVxuXHRcblx0ICAvLyBkZXRlcm1pbmUgd2hldGhlciBjb21wb25lbnQgaGFzIHNsb3QgY2hpbGRyZW5cblx0ICAvLyB3ZSBuZWVkIHRvIGRvIHRoaXMgYmVmb3JlIG92ZXJ3cml0aW5nICRvcHRpb25zLl9yZW5kZXJDaGlsZHJlblxuXHQgIHZhciBoYXNDaGlsZHJlbiA9ICEhKFxuXHQgICAgcmVuZGVyQ2hpbGRyZW4gfHwgICAgICAgICAgICAgICAvLyBoYXMgbmV3IHN0YXRpYyBzbG90c1xuXHQgICAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuIHx8ICAvLyBoYXMgb2xkIHN0YXRpYyBzbG90c1xuXHQgICAgcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90cyB8fCAvLyBoYXMgbmV3IHNjb3BlZCBzbG90c1xuXHQgICAgdm0uJHNjb3BlZFNsb3RzICE9PSBlbXB0eU9iamVjdCAvLyBoYXMgb2xkIHNjb3BlZCBzbG90c1xuXHQgICk7XG5cdFxuXHQgIHZtLiRvcHRpb25zLl9wYXJlbnRWbm9kZSA9IHBhcmVudFZub2RlO1xuXHQgIHZtLiR2bm9kZSA9IHBhcmVudFZub2RlOyAvLyB1cGRhdGUgdm0ncyBwbGFjZWhvbGRlciBub2RlIHdpdGhvdXQgcmUtcmVuZGVyXG5cdFxuXHQgIGlmICh2bS5fdm5vZGUpIHsgLy8gdXBkYXRlIGNoaWxkIHRyZWUncyBwYXJlbnRcblx0ICAgIHZtLl92bm9kZS5wYXJlbnQgPSBwYXJlbnRWbm9kZTtcblx0ICB9XG5cdCAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuID0gcmVuZGVyQ2hpbGRyZW47XG5cdFxuXHQgIC8vIHVwZGF0ZSAkYXR0cnMgYW5kICRsaXN0ZW5lcnMgaGFzaFxuXHQgIC8vIHRoZXNlIGFyZSBhbHNvIHJlYWN0aXZlIHNvIHRoZXkgbWF5IHRyaWdnZXIgY2hpbGQgdXBkYXRlIGlmIHRoZSBjaGlsZFxuXHQgIC8vIHVzZWQgdGhlbSBkdXJpbmcgcmVuZGVyXG5cdCAgdm0uJGF0dHJzID0gcGFyZW50Vm5vZGUuZGF0YS5hdHRycyB8fCBlbXB0eU9iamVjdDtcblx0ICB2bS4kbGlzdGVuZXJzID0gbGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0O1xuXHRcblx0ICAvLyB1cGRhdGUgcHJvcHNcblx0ICBpZiAocHJvcHNEYXRhICYmIHZtLiRvcHRpb25zLnByb3BzKSB7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuXHQgICAgdmFyIHByb3BzID0gdm0uX3Byb3BzO1xuXHQgICAgdmFyIHByb3BLZXlzID0gdm0uJG9wdGlvbnMuX3Byb3BLZXlzIHx8IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wS2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0gcHJvcEtleXNbaV07XG5cdCAgICAgIHZhciBwcm9wT3B0aW9ucyA9IHZtLiRvcHRpb25zLnByb3BzOyAvLyB3dGYgZmxvdz9cblx0ICAgICAgcHJvcHNba2V5XSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BPcHRpb25zLCBwcm9wc0RhdGEsIHZtKTtcblx0ICAgIH1cblx0ICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcblx0ICAgIC8vIGtlZXAgYSBjb3B5IG9mIHJhdyBwcm9wc0RhdGFcblx0ICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YSA9IHByb3BzRGF0YTtcblx0ICB9XG5cdFxuXHQgIC8vIHVwZGF0ZSBsaXN0ZW5lcnNcblx0ICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3Q7XG5cdCAgdmFyIG9sZExpc3RlbmVycyA9IHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7XG5cdCAgdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyA9IGxpc3RlbmVycztcblx0ICB1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnModm0sIGxpc3RlbmVycywgb2xkTGlzdGVuZXJzKTtcblx0XG5cdCAgLy8gcmVzb2x2ZSBzbG90cyArIGZvcmNlIHVwZGF0ZSBpZiBoYXMgY2hpbGRyZW5cblx0ICBpZiAoaGFzQ2hpbGRyZW4pIHtcblx0ICAgIHZtLiRzbG90cyA9IHJlc29sdmVTbG90cyhyZW5kZXJDaGlsZHJlbiwgcGFyZW50Vm5vZGUuY29udGV4dCk7XG5cdCAgICB2bS4kZm9yY2VVcGRhdGUoKTtcblx0ICB9XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzSW5JbmFjdGl2ZVRyZWUgKHZtKSB7XG5cdCAgd2hpbGUgKHZtICYmICh2bSA9IHZtLiRwYXJlbnQpKSB7XG5cdCAgICBpZiAodm0uX2luYWN0aXZlKSB7IHJldHVybiB0cnVlIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHtcblx0ICBpZiAoZGlyZWN0KSB7XG5cdCAgICB2bS5fZGlyZWN0SW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIGlmIChpc0luSW5hY3RpdmVUcmVlKHZtKSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHZtLl9kaXJlY3RJbmFjdGl2ZSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGlmICh2bS5faW5hY3RpdmUgfHwgdm0uX2luYWN0aXZlID09PSBudWxsKSB7XG5cdCAgICB2bS5faW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uJGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQodm0uJGNoaWxkcmVuW2ldKTtcblx0ICAgIH1cblx0ICAgIGNhbGxIb29rKHZtLCAnYWN0aXZhdGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHtcblx0ICBpZiAoZGlyZWN0KSB7XG5cdCAgICB2bS5fZGlyZWN0SW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXZtLl9pbmFjdGl2ZSkge1xuXHQgICAgdm0uX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uJGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO1xuXHQgICAgfVxuXHQgICAgY2FsbEhvb2sodm0sICdkZWFjdGl2YXRlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbEhvb2sgKHZtLCBob29rKSB7XG5cdCAgLy8gIzc1NzMgZGlzYWJsZSBkZXAgY29sbGVjdGlvbiB3aGVuIGludm9raW5nIGxpZmVjeWNsZSBob29rc1xuXHQgIHB1c2hUYXJnZXQoKTtcblx0ICB2YXIgaGFuZGxlcnMgPSB2bS4kb3B0aW9uc1tob29rXTtcblx0ICBpZiAoaGFuZGxlcnMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh2bSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKGhvb2sgKyBcIiBob29rXCIpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAodm0uX2hhc0hvb2tFdmVudCkge1xuXHQgICAgdm0uJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuXHQgIH1cblx0ICBwb3BUYXJnZXQoKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0dmFyIE1BWF9VUERBVEVfQ09VTlQgPSAxMDA7XG5cdFxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGFjdGl2YXRlZENoaWxkcmVuID0gW107XG5cdHZhciBoYXMgPSB7fTtcblx0dmFyIGNpcmN1bGFyID0ge307XG5cdHZhciB3YWl0aW5nID0gZmFsc2U7XG5cdHZhciBmbHVzaGluZyA9IGZhbHNlO1xuXHR2YXIgaW5kZXggPSAwO1xuXHRcblx0LyoqXG5cdCAqIFJlc2V0IHRoZSBzY2hlZHVsZXIncyBzdGF0ZS5cblx0ICovXG5cdGZ1bmN0aW9uIHJlc2V0U2NoZWR1bGVyU3RhdGUgKCkge1xuXHQgIGluZGV4ID0gcXVldWUubGVuZ3RoID0gYWN0aXZhdGVkQ2hpbGRyZW4ubGVuZ3RoID0gMDtcblx0ICBoYXMgPSB7fTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgY2lyY3VsYXIgPSB7fTtcblx0ICB9XG5cdCAgd2FpdGluZyA9IGZsdXNoaW5nID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cblx0ICovXG5cdGZ1bmN0aW9uIGZsdXNoU2NoZWR1bGVyUXVldWUgKCkge1xuXHQgIGZsdXNoaW5nID0gdHJ1ZTtcblx0ICB2YXIgd2F0Y2hlciwgaWQ7XG5cdFxuXHQgIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLlxuXHQgIC8vIFRoaXMgZW5zdXJlcyB0aGF0OlxuXHQgIC8vIDEuIENvbXBvbmVudHMgYXJlIHVwZGF0ZWQgZnJvbSBwYXJlbnQgdG8gY2hpbGQuIChiZWNhdXNlIHBhcmVudCBpcyBhbHdheXNcblx0ICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQpXG5cdCAgLy8gMi4gQSBjb21wb25lbnQncyB1c2VyIHdhdGNoZXJzIGFyZSBydW4gYmVmb3JlIGl0cyByZW5kZXIgd2F0Y2hlciAoYmVjYXVzZVxuXHQgIC8vICAgIHVzZXIgd2F0Y2hlcnMgYXJlIGNyZWF0ZWQgYmVmb3JlIHRoZSByZW5kZXIgd2F0Y2hlcilcblx0ICAvLyAzLiBJZiBhIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQgZHVyaW5nIGEgcGFyZW50IGNvbXBvbmVudCdzIHdhdGNoZXIgcnVuLFxuXHQgIC8vICAgIGl0cyB3YXRjaGVycyBjYW4gYmUgc2tpcHBlZC5cblx0ICBxdWV1ZS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmlkIC0gYi5pZDsgfSk7XG5cdFxuXHQgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuXHQgIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuXHQgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHF1ZXVlLmxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgd2F0Y2hlciA9IHF1ZXVlW2luZGV4XTtcblx0ICAgIGlkID0gd2F0Y2hlci5pZDtcblx0ICAgIGhhc1tpZF0gPSBudWxsO1xuXHQgICAgd2F0Y2hlci5ydW4oKTtcblx0ICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy5cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuXHQgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcblx0ICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IE1BWF9VUERBVEVfQ09VTlQpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCAnICsgKFxuXHQgICAgICAgICAgICB3YXRjaGVyLnVzZXJcblx0ICAgICAgICAgICAgICA/IChcImluIHdhdGNoZXIgd2l0aCBleHByZXNzaW9uIFxcXCJcIiArICh3YXRjaGVyLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpXG5cdCAgICAgICAgICAgICAgOiBcImluIGEgY29tcG9uZW50IHJlbmRlciBmdW5jdGlvbi5cIlxuXHQgICAgICAgICAgKSxcblx0ICAgICAgICAgIHdhdGNoZXIudm1cblx0ICAgICAgICApO1xuXHQgICAgICAgIGJyZWFrXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIGtlZXAgY29waWVzIG9mIHBvc3QgcXVldWVzIGJlZm9yZSByZXNldHRpbmcgc3RhdGVcblx0ICB2YXIgYWN0aXZhdGVkUXVldWUgPSBhY3RpdmF0ZWRDaGlsZHJlbi5zbGljZSgpO1xuXHQgIHZhciB1cGRhdGVkUXVldWUgPSBxdWV1ZS5zbGljZSgpO1xuXHRcblx0ICByZXNldFNjaGVkdWxlclN0YXRlKCk7XG5cdFxuXHQgIC8vIGNhbGwgY29tcG9uZW50IHVwZGF0ZWQgYW5kIGFjdGl2YXRlZCBob29rc1xuXHQgIGNhbGxBY3RpdmF0ZWRIb29rcyhhY3RpdmF0ZWRRdWV1ZSk7XG5cdCAgY2FsbFVwZGF0ZWRIb29rcyh1cGRhdGVkUXVldWUpO1xuXHRcblx0ICAvLyBkZXZ0b29sIGhvb2tcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbFVwZGF0ZWRIb29rcyAocXVldWUpIHtcblx0ICB2YXIgaSA9IHF1ZXVlLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIHZtID0gd2F0Y2hlci52bTtcblx0ICAgIGlmICh2bS5fd2F0Y2hlciA9PT0gd2F0Y2hlciAmJiB2bS5faXNNb3VudGVkKSB7XG5cdCAgICAgIGNhbGxIb29rKHZtLCAndXBkYXRlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFF1ZXVlIGEga2VwdC1hbGl2ZSBjb21wb25lbnQgdGhhdCB3YXMgYWN0aXZhdGVkIGR1cmluZyBwYXRjaC5cblx0ICogVGhlIHF1ZXVlIHdpbGwgYmUgcHJvY2Vzc2VkIGFmdGVyIHRoZSBlbnRpcmUgdHJlZSBoYXMgYmVlbiBwYXRjaGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gcXVldWVBY3RpdmF0ZWRDb21wb25lbnQgKHZtKSB7XG5cdCAgLy8gc2V0dGluZyBfaW5hY3RpdmUgdG8gZmFsc2UgaGVyZSBzbyB0aGF0IGEgcmVuZGVyIGZ1bmN0aW9uIGNhblxuXHQgIC8vIHJlbHkgb24gY2hlY2tpbmcgd2hldGhlciBpdCdzIGluIGFuIGluYWN0aXZlIHRyZWUgKGUuZy4gcm91dGVyLXZpZXcpXG5cdCAgdm0uX2luYWN0aXZlID0gZmFsc2U7XG5cdCAgYWN0aXZhdGVkQ2hpbGRyZW4ucHVzaCh2bSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGxBY3RpdmF0ZWRIb29rcyAocXVldWUpIHtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBxdWV1ZVtpXS5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudChxdWV1ZVtpXSwgdHJ1ZSAvKiB0cnVlICovKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuXHQgKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3Ncblx0ICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBxdWV1ZVdhdGNoZXIgKHdhdGNoZXIpIHtcblx0ICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgIGlmIChoYXNbaWRdID09IG51bGwpIHtcblx0ICAgIGhhc1tpZF0gPSB0cnVlO1xuXHQgICAgaWYgKCFmbHVzaGluZykge1xuXHQgICAgICBxdWV1ZS5wdXNoKHdhdGNoZXIpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gaWYgYWxyZWFkeSBmbHVzaGluZywgc3BsaWNlIHRoZSB3YXRjaGVyIGJhc2VkIG9uIGl0cyBpZFxuXHQgICAgICAvLyBpZiBhbHJlYWR5IHBhc3QgaXRzIGlkLCBpdCB3aWxsIGJlIHJ1biBuZXh0IGltbWVkaWF0ZWx5LlxuXHQgICAgICB2YXIgaSA9IHF1ZXVlLmxlbmd0aCAtIDE7XG5cdCAgICAgIHdoaWxlIChpID4gaW5kZXggJiYgcXVldWVbaV0uaWQgPiB3YXRjaGVyLmlkKSB7XG5cdCAgICAgICAgaS0tO1xuXHQgICAgICB9XG5cdCAgICAgIHF1ZXVlLnNwbGljZShpICsgMSwgMCwgd2F0Y2hlcik7XG5cdCAgICB9XG5cdCAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcblx0ICAgIGlmICghd2FpdGluZykge1xuXHQgICAgICB3YWl0aW5nID0gdHJ1ZTtcblx0ICAgICAgbmV4dFRpY2soZmx1c2hTY2hlZHVsZXJRdWV1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciB1aWQkMSA9IDA7XG5cdFxuXHQvKipcblx0ICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG5cdCAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG5cdCAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuXHQgKi9cblx0dmFyIFdhdGNoZXIgPSBmdW5jdGlvbiBXYXRjaGVyIChcblx0ICB2bSxcblx0ICBleHBPckZuLFxuXHQgIGNiLFxuXHQgIG9wdGlvbnMsXG5cdCAgaXNSZW5kZXJXYXRjaGVyXG5cdCkge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICBpZiAoaXNSZW5kZXJXYXRjaGVyKSB7XG5cdCAgICB2bS5fd2F0Y2hlciA9IHRoaXM7XG5cdCAgfVxuXHQgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuXHQgIC8vIG9wdGlvbnNcblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgdGhpcy5kZWVwID0gISFvcHRpb25zLmRlZXA7XG5cdCAgICB0aGlzLnVzZXIgPSAhIW9wdGlvbnMudXNlcjtcblx0ICAgIHRoaXMubGF6eSA9ICEhb3B0aW9ucy5sYXp5O1xuXHQgICAgdGhpcy5zeW5jID0gISFvcHRpb25zLnN5bmM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuZGVlcCA9IHRoaXMudXNlciA9IHRoaXMubGF6eSA9IHRoaXMuc3luYyA9IGZhbHNlO1xuXHQgIH1cblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgdGhpcy5pZCA9ICsrdWlkJDE7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcblx0ICB0aGlzLmFjdGl2ZSA9IHRydWU7XG5cdCAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcblx0ICB0aGlzLmRlcHMgPSBbXTtcblx0ICB0aGlzLm5ld0RlcHMgPSBbXTtcblx0ICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbidcblx0ICAgID8gZXhwT3JGbi50b1N0cmluZygpXG5cdCAgICA6ICcnO1xuXHQgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlclxuXHQgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLmdldHRlciA9IHBhcnNlUGF0aChleHBPckZuKTtcblx0ICAgIGlmICghdGhpcy5nZXR0ZXIpIHtcblx0ICAgICAgdGhpcy5nZXR0ZXIgPSBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAgIFwiRmFpbGVkIHdhdGNoaW5nIHBhdGg6IFxcXCJcIiArIGV4cE9yRm4gKyBcIlxcXCIgXCIgK1xuXHQgICAgICAgICdXYXRjaGVyIG9ubHkgYWNjZXB0cyBzaW1wbGUgZG90LWRlbGltaXRlZCBwYXRocy4gJyArXG5cdCAgICAgICAgJ0ZvciBmdWxsIGNvbnRyb2wsIHVzZSBhIGZ1bmN0aW9uIGluc3RlYWQuJyxcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0ICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5XG5cdCAgICA/IHVuZGVmaW5lZFxuXHQgICAgOiB0aGlzLmdldCgpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAoKSB7XG5cdCAgcHVzaFRhcmdldCh0aGlzKTtcblx0ICB2YXIgdmFsdWU7XG5cdCAgdmFyIHZtID0gdGhpcy52bTtcblx0ICB0cnkge1xuXHQgICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHZtLCB2bSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHRoaXMudXNlcikge1xuXHQgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKFwiZ2V0dGVyIGZvciB3YXRjaGVyIFxcXCJcIiArICh0aGlzLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRocm93IGVcblx0ICAgIH1cblx0ICB9IGZpbmFsbHkge1xuXHQgICAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG5cdCAgICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcblx0ICAgIGlmICh0aGlzLmRlZXApIHtcblx0ICAgICAgdHJhdmVyc2UodmFsdWUpO1xuXHQgICAgfVxuXHQgICAgcG9wVGFyZ2V0KCk7XG5cdCAgICB0aGlzLmNsZWFudXBEZXBzKCk7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiBhZGREZXAgKGRlcCkge1xuXHQgIHZhciBpZCA9IGRlcC5pZDtcblx0ICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG5cdCAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuXHQgICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG5cdCAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS5jbGVhbnVwRGVwcyA9IGZ1bmN0aW9uIGNsZWFudXBEZXBzICgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdmFyIGRlcCA9IHRoaXMkMS5kZXBzW2ldO1xuXHQgICAgaWYgKCF0aGlzJDEubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG5cdCAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyQxKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzO1xuXHQgIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTtcblx0ICB0bXAgPSB0aGlzLmRlcHM7XG5cdCAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuXHQgIHRoaXMubmV3RGVwcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAodGhpcy5sYXp5KSB7XG5cdCAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKHRoaXMuc3luYykge1xuXHQgICAgdGhpcy5ydW4oKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcXVldWVXYXRjaGVyKHRoaXMpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTY2hlZHVsZXIgam9iIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlci5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIHJ1biAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgICAgaWYgKFxuXHQgICAgICB2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuXHQgICAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cblx0ICAgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuXHQgICAgICAvLyBoYXZlIG11dGF0ZWQuXG5cdCAgICAgIGlzT2JqZWN0KHZhbHVlKSB8fFxuXHQgICAgICB0aGlzLmRlZXBcblx0ICAgICkge1xuXHQgICAgICAvLyBzZXQgbmV3IHZhbHVlXG5cdCAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG5cdCAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgaWYgKHRoaXMudXNlcikge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBoYW5kbGVFcnJvcihlLCB0aGlzLnZtLCAoXCJjYWxsYmFjayBmb3Igd2F0Y2hlciBcXFwiXCIgKyAodGhpcy5leHByZXNzaW9uKSArIFwiXFxcIlwiKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cblx0ICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiBldmFsdWF0ZSAoKSB7XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdGhpcyQxLmRlcHNbaV0uZGVwZW5kKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3Vic2NyaWJlciBsaXN0LlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiB0ZWFyZG93biAoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG5cdCAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG5cdCAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkLlxuXHQgICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIHJlbW92ZSh0aGlzLnZtLl93YXRjaGVycywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMkMS5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzJDEpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24gPSB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgZ2V0OiBub29wLFxuXHQgIHNldDogbm9vcFxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcHJveHkgKHRhcmdldCwgc291cmNlS2V5LCBrZXkpIHtcblx0ICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gZnVuY3Rpb24gcHJveHlHZXR0ZXIgKCkge1xuXHQgICAgcmV0dXJuIHRoaXNbc291cmNlS2V5XVtrZXldXG5cdCAgfTtcblx0ICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gZnVuY3Rpb24gcHJveHlTZXR0ZXIgKHZhbCkge1xuXHQgICAgdGhpc1tzb3VyY2VLZXldW2tleV0gPSB2YWw7XG5cdCAgfTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXRTdGF0ZSAodm0pIHtcblx0ICB2bS5fd2F0Y2hlcnMgPSBbXTtcblx0ICB2YXIgb3B0cyA9IHZtLiRvcHRpb25zO1xuXHQgIGlmIChvcHRzLnByb3BzKSB7IGluaXRQcm9wcyh2bSwgb3B0cy5wcm9wcyk7IH1cblx0ICBpZiAob3B0cy5tZXRob2RzKSB7IGluaXRNZXRob2RzKHZtLCBvcHRzLm1ldGhvZHMpOyB9XG5cdCAgaWYgKG9wdHMuZGF0YSkge1xuXHQgICAgaW5pdERhdGEodm0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvYnNlcnZlKHZtLl9kYXRhID0ge30sIHRydWUgLyogYXNSb290RGF0YSAqLyk7XG5cdCAgfVxuXHQgIGlmIChvcHRzLmNvbXB1dGVkKSB7IGluaXRDb21wdXRlZCh2bSwgb3B0cy5jb21wdXRlZCk7IH1cblx0ICBpZiAob3B0cy53YXRjaCAmJiBvcHRzLndhdGNoICE9PSBuYXRpdmVXYXRjaCkge1xuXHQgICAgaW5pdFdhdGNoKHZtLCBvcHRzLndhdGNoKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXRQcm9wcyAodm0sIHByb3BzT3B0aW9ucykge1xuXHQgIHZhciBwcm9wc0RhdGEgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgfHwge307XG5cdCAgdmFyIHByb3BzID0gdm0uX3Byb3BzID0ge307XG5cdCAgLy8gY2FjaGUgcHJvcCBrZXlzIHNvIHRoYXQgZnV0dXJlIHByb3BzIHVwZGF0ZXMgY2FuIGl0ZXJhdGUgdXNpbmcgQXJyYXlcblx0ICAvLyBpbnN0ZWFkIG9mIGR5bmFtaWMgb2JqZWN0IGtleSBlbnVtZXJhdGlvbi5cblx0ICB2YXIga2V5cyA9IHZtLiRvcHRpb25zLl9wcm9wS2V5cyA9IFtdO1xuXHQgIHZhciBpc1Jvb3QgPSAhdm0uJHBhcmVudDtcblx0ICAvLyByb290IGluc3RhbmNlIHByb3BzIHNob3VsZCBiZSBjb252ZXJ0ZWRcblx0ICBpZiAoIWlzUm9vdCkge1xuXHQgICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTtcblx0ICB9XG5cdCAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGtleSApIHtcblx0ICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgdmFyIHZhbHVlID0gdmFsaWRhdGVQcm9wKGtleSwgcHJvcHNPcHRpb25zLCBwcm9wc0RhdGEsIHZtKTtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB2YXIgaHlwaGVuYXRlZEtleSA9IGh5cGhlbmF0ZShrZXkpO1xuXHQgICAgICBpZiAoaXNSZXNlcnZlZEF0dHJpYnV0ZShoeXBoZW5hdGVkS2V5KSB8fFxuXHQgICAgICAgICAgY29uZmlnLmlzUmVzZXJ2ZWRBdHRyKGh5cGhlbmF0ZWRLZXkpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIChcIlxcXCJcIiArIGh5cGhlbmF0ZWRLZXkgKyBcIlxcXCIgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUgYW5kIGNhbm5vdCBiZSB1c2VkIGFzIGNvbXBvbmVudCBwcm9wLlwiKSxcblx0ICAgICAgICAgIHZtXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShwcm9wcywga2V5LCB2YWx1ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh2bS4kcGFyZW50ICYmICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQpIHtcblx0ICAgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAgIFwiQXZvaWQgbXV0YXRpbmcgYSBwcm9wIGRpcmVjdGx5IHNpbmNlIHRoZSB2YWx1ZSB3aWxsIGJlIFwiICtcblx0ICAgICAgICAgICAgXCJvdmVyd3JpdHRlbiB3aGVuZXZlciB0aGUgcGFyZW50IGNvbXBvbmVudCByZS1yZW5kZXJzLiBcIiArXG5cdCAgICAgICAgICAgIFwiSW5zdGVhZCwgdXNlIGEgZGF0YSBvciBjb21wdXRlZCBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgcHJvcCdzIFwiICtcblx0ICAgICAgICAgICAgXCJ2YWx1ZS4gUHJvcCBiZWluZyBtdXRhdGVkOiBcXFwiXCIgKyBrZXkgKyBcIlxcXCJcIixcblx0ICAgICAgICAgICAgdm1cblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHByb3BzLCBrZXksIHZhbHVlKTtcblx0ICAgIH1cblx0ICAgIC8vIHN0YXRpYyBwcm9wcyBhcmUgYWxyZWFkeSBwcm94aWVkIG9uIHRoZSBjb21wb25lbnQncyBwcm90b3R5cGVcblx0ICAgIC8vIGR1cmluZyBWdWUuZXh0ZW5kKCkuIFdlIG9ubHkgbmVlZCB0byBwcm94eSBwcm9wcyBkZWZpbmVkIGF0XG5cdCAgICAvLyBpbnN0YW50aWF0aW9uIGhlcmUuXG5cdCAgICBpZiAoIShrZXkgaW4gdm0pKSB7XG5cdCAgICAgIHByb3h5KHZtLCBcIl9wcm9wc1wiLCBrZXkpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZvciAodmFyIGtleSBpbiBwcm9wc09wdGlvbnMpIGxvb3AoIGtleSApO1xuXHQgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdERhdGEgKHZtKSB7XG5cdCAgdmFyIGRhdGEgPSB2bS4kb3B0aW9ucy5kYXRhO1xuXHQgIGRhdGEgPSB2bS5fZGF0YSA9IHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nXG5cdCAgICA/IGdldERhdGEoZGF0YSwgdm0pXG5cdCAgICA6IGRhdGEgfHwge307XG5cdCAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG5cdCAgICBkYXRhID0ge307XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdDpcXG4nICtcblx0ICAgICAgJ2h0dHBzOi8vdnVlanMub3JnL3YyL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNkYXRhLU11c3QtQmUtYS1GdW5jdGlvbicsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0ICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcblx0ICB2YXIgcHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wcztcblx0ICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGlmIChtZXRob2RzICYmIGhhc093bihtZXRob2RzLCBrZXkpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIChcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgZGF0YSBwcm9wZXJ0eS5cIiksXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChwcm9wcyAmJiBoYXNPd24ocHJvcHMsIGtleSkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAgIFwiVGhlIGRhdGEgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIGFscmVhZHkgZGVjbGFyZWQgYXMgYSBwcm9wLiBcIiArXG5cdCAgICAgICAgXCJVc2UgcHJvcCBkZWZhdWx0IHZhbHVlIGluc3RlYWQuXCIsXG5cdCAgICAgICAgdm1cblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICBwcm94eSh2bSwgXCJfZGF0YVwiLCBrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBvYnNlcnZlIGRhdGFcblx0ICBvYnNlcnZlKGRhdGEsIHRydWUgLyogYXNSb290RGF0YSAqLyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERhdGEgKGRhdGEsIHZtKSB7XG5cdCAgLy8gIzc1NzMgZGlzYWJsZSBkZXAgY29sbGVjdGlvbiB3aGVuIGludm9raW5nIGRhdGEgZ2V0dGVyc1xuXHQgIHB1c2hUYXJnZXQoKTtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGRhdGEuY2FsbCh2bSwgdm0pXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaGFuZGxlRXJyb3IoZSwgdm0sIFwiZGF0YSgpXCIpO1xuXHQgICAgcmV0dXJuIHt9XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHBvcFRhcmdldCgpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbXB1dGVkV2F0Y2hlck9wdGlvbnMgPSB7IGxhenk6IHRydWUgfTtcblx0XG5cdGZ1bmN0aW9uIGluaXRDb21wdXRlZCAodm0sIGNvbXB1dGVkKSB7XG5cdCAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgdmFyIHdhdGNoZXJzID0gdm0uX2NvbXB1dGVkV2F0Y2hlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIC8vIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIGp1c3QgZ2V0dGVycyBkdXJpbmcgU1NSXG5cdCAgdmFyIGlzU1NSID0gaXNTZXJ2ZXJSZW5kZXJpbmcoKTtcblx0XG5cdCAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG5cdCAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG5cdCAgICB2YXIgZ2V0dGVyID0gdHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicgPyB1c2VyRGVmIDogdXNlckRlZi5nZXQ7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXR0ZXIgPT0gbnVsbCkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgIChcIkdldHRlciBpcyBtaXNzaW5nIGZvciBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuXCIpLFxuXHQgICAgICAgIHZtXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFpc1NTUikge1xuXHQgICAgICAvLyBjcmVhdGUgaW50ZXJuYWwgd2F0Y2hlciBmb3IgdGhlIGNvbXB1dGVkIHByb3BlcnR5LlxuXHQgICAgICB3YXRjaGVyc1trZXldID0gbmV3IFdhdGNoZXIoXG5cdCAgICAgICAgdm0sXG5cdCAgICAgICAgZ2V0dGVyIHx8IG5vb3AsXG5cdCAgICAgICAgbm9vcCxcblx0ICAgICAgICBjb21wdXRlZFdhdGNoZXJPcHRpb25zXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gY29tcG9uZW50LWRlZmluZWQgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWxyZWFkeSBkZWZpbmVkIG9uIHRoZVxuXHQgICAgLy8gY29tcG9uZW50IHByb3RvdHlwZS4gV2Ugb25seSBuZWVkIHRvIGRlZmluZSBjb21wdXRlZCBwcm9wZXJ0aWVzIGRlZmluZWRcblx0ICAgIC8vIGF0IGluc3RhbnRpYXRpb24gaGVyZS5cblx0ICAgIGlmICghKGtleSBpbiB2bSkpIHtcblx0ICAgICAgZGVmaW5lQ29tcHV0ZWQodm0sIGtleSwgdXNlckRlZik7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgaWYgKGtleSBpbiB2bS4kZGF0YSkge1xuXHQgICAgICAgIHdhcm4oKFwiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gZGF0YS5cIiksIHZtKTtcblx0ICAgICAgfSBlbHNlIGlmICh2bS4kb3B0aW9ucy5wcm9wcyAmJiBrZXkgaW4gdm0uJG9wdGlvbnMucHJvcHMpIHtcblx0ICAgICAgICB3YXJuKChcIlRoZSBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcC5cIiksIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZGVmaW5lQ29tcHV0ZWQgKFxuXHQgIHRhcmdldCxcblx0ICBrZXksXG5cdCAgdXNlckRlZlxuXHQpIHtcblx0ICB2YXIgc2hvdWxkQ2FjaGUgPSAhaXNTZXJ2ZXJSZW5kZXJpbmcoKTtcblx0ICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSBzaG91bGRDYWNoZVxuXHQgICAgICA/IGNyZWF0ZUNvbXB1dGVkR2V0dGVyKGtleSlcblx0ICAgICAgOiB1c2VyRGVmO1xuXHQgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IG5vb3A7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSB1c2VyRGVmLmdldFxuXHQgICAgICA/IHNob3VsZENhY2hlICYmIHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlXG5cdCAgICAgICAgPyBjcmVhdGVDb21wdXRlZEdldHRlcihrZXkpXG5cdCAgICAgICAgOiB1c2VyRGVmLmdldFxuXHQgICAgICA6IG5vb3A7XG5cdCAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gdXNlckRlZi5zZXRcblx0ICAgICAgPyB1c2VyRGVmLnNldFxuXHQgICAgICA6IG5vb3A7XG5cdCAgfVxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPT09IG5vb3ApIHtcblx0ICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgKFwiQ29tcHV0ZWQgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIHdhcyBhc3NpZ25lZCB0byBidXQgaXQgaGFzIG5vIHNldHRlci5cIiksXG5cdCAgICAgICAgdGhpc1xuXHQgICAgICApO1xuXHQgICAgfTtcblx0ICB9XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21wdXRlZEdldHRlciAoa2V5KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHtcblx0ICAgIHZhciB3YXRjaGVyID0gdGhpcy5fY29tcHV0ZWRXYXRjaGVycyAmJiB0aGlzLl9jb21wdXRlZFdhdGNoZXJzW2tleV07XG5cdCAgICBpZiAod2F0Y2hlcikge1xuXHQgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuXHQgICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXRNZXRob2RzICh2bSwgbWV0aG9kcykge1xuXHQgIHZhciBwcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzO1xuXHQgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAobWV0aG9kc1trZXldID09IG51bGwpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgaW4gdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uLiBcIiArXG5cdCAgICAgICAgICBcIkRpZCB5b3UgcmVmZXJlbmNlIHRoZSBmdW5jdGlvbiBjb3JyZWN0bHk/XCIsXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywga2V5KSkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAoXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBhcyBhIHByb3AuXCIpLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICgoa2V5IGluIHZtKSAmJiBpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGNvbmZsaWN0cyB3aXRoIGFuIGV4aXN0aW5nIFZ1ZSBpbnN0YW5jZSBtZXRob2QuIFwiICtcblx0ICAgICAgICAgIFwiQXZvaWQgZGVmaW5pbmcgY29tcG9uZW50IG1ldGhvZHMgdGhhdCBzdGFydCB3aXRoIF8gb3IgJC5cIlxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZtW2tleV0gPSBtZXRob2RzW2tleV0gPT0gbnVsbCA/IG5vb3AgOiBiaW5kKG1ldGhvZHNba2V5XSwgdm0pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdFdhdGNoICh2bSwgd2F0Y2gpIHtcblx0ICBmb3IgKHZhciBrZXkgaW4gd2F0Y2gpIHtcblx0ICAgIHZhciBoYW5kbGVyID0gd2F0Y2hba2V5XTtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGhhbmRsZXIpKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlci5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNyZWF0ZVdhdGNoZXIodm0sIGtleSwgaGFuZGxlcltpXSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNyZWF0ZVdhdGNoZXIodm0sIGtleSwgaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVXYXRjaGVyIChcblx0ICB2bSxcblx0ICBleHBPckZuLFxuXHQgIGhhbmRsZXIsXG5cdCAgb3B0aW9uc1xuXHQpIHtcblx0ICBpZiAoaXNQbGFpbk9iamVjdChoYW5kbGVyKSkge1xuXHQgICAgb3B0aW9ucyA9IGhhbmRsZXI7XG5cdCAgICBoYW5kbGVyID0gaGFuZGxlci5oYW5kbGVyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBoYW5kbGVyID0gdm1baGFuZGxlcl07XG5cdCAgfVxuXHQgIHJldHVybiB2bS4kd2F0Y2goZXhwT3JGbiwgaGFuZGxlciwgb3B0aW9ucylcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG5cdCAgLy8gZmxvdyBzb21laG93IGhhcyBwcm9ibGVtcyB3aXRoIGRpcmVjdGx5IGRlY2xhcmVkIGRlZmluaXRpb24gb2JqZWN0XG5cdCAgLy8gd2hlbiB1c2luZyBPYmplY3QuZGVmaW5lUHJvcGVydHksIHNvIHdlIGhhdmUgdG8gcHJvY2VkdXJhbGx5IGJ1aWxkIHVwXG5cdCAgLy8gdGhlIG9iamVjdCBoZXJlLlxuXHQgIHZhciBkYXRhRGVmID0ge307XG5cdCAgZGF0YURlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9kYXRhIH07XG5cdCAgdmFyIHByb3BzRGVmID0ge307XG5cdCAgcHJvcHNEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fcHJvcHMgfTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgZGF0YURlZi5zZXQgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgICdBdm9pZCByZXBsYWNpbmcgaW5zdGFuY2Ugcm9vdCAkZGF0YS4gJyArXG5cdCAgICAgICAgJ1VzZSBuZXN0ZWQgZGF0YSBwcm9wZXJ0aWVzIGluc3RlYWQuJyxcblx0ICAgICAgICB0aGlzXG5cdCAgICAgICk7XG5cdCAgICB9O1xuXHQgICAgcHJvcHNEZWYuc2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB3YXJuKFwiJHByb3BzIGlzIHJlYWRvbmx5LlwiLCB0aGlzKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCBkYXRhRGVmKTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRwcm9wcycsIHByb3BzRGVmKTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kc2V0ID0gc2V0O1xuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGRlbDtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoXG5cdCAgICBleHBPckZuLFxuXHQgICAgY2IsXG5cdCAgICBvcHRpb25zXG5cdCAgKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKGlzUGxhaW5PYmplY3QoY2IpKSB7XG5cdCAgICAgIHJldHVybiBjcmVhdGVXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucylcblx0ICAgIH1cblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgICAgb3B0aW9ucy51c2VyID0gdHJ1ZTtcblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKTtcblx0ICAgIGlmIChvcHRpb25zLmltbWVkaWF0ZSkge1xuXHQgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4gKCkge1xuXHQgICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvdmlkZSAodm0pIHtcblx0ICB2YXIgcHJvdmlkZSA9IHZtLiRvcHRpb25zLnByb3ZpZGU7XG5cdCAgaWYgKHByb3ZpZGUpIHtcblx0ICAgIHZtLl9wcm92aWRlZCA9IHR5cGVvZiBwcm92aWRlID09PSAnZnVuY3Rpb24nXG5cdCAgICAgID8gcHJvdmlkZS5jYWxsKHZtKVxuXHQgICAgICA6IHByb3ZpZGU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0SW5qZWN0aW9ucyAodm0pIHtcblx0ICB2YXIgcmVzdWx0ID0gcmVzb2x2ZUluamVjdCh2bS4kb3B0aW9ucy5pbmplY3QsIHZtKTtcblx0ICBpZiAocmVzdWx0KSB7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuXHQgICAgT2JqZWN0LmtleXMocmVzdWx0KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSh2bSwga2V5LCByZXN1bHRba2V5XSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgd2Fybihcblx0ICAgICAgICAgICAgXCJBdm9pZCBtdXRhdGluZyBhbiBpbmplY3RlZCB2YWx1ZSBkaXJlY3RseSBzaW5jZSB0aGUgY2hhbmdlcyB3aWxsIGJlIFwiICtcblx0ICAgICAgICAgICAgXCJvdmVyd3JpdHRlbiB3aGVuZXZlciB0aGUgcHJvdmlkZWQgY29tcG9uZW50IHJlLXJlbmRlcnMuIFwiICtcblx0ICAgICAgICAgICAgXCJpbmplY3Rpb24gYmVpbmcgbXV0YXRlZDogXFxcIlwiICsga2V5ICsgXCJcXFwiXCIsXG5cdCAgICAgICAgICAgIHZtXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKHZtLCBrZXksIHJlc3VsdFtrZXldKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlSW5qZWN0IChpbmplY3QsIHZtKSB7XG5cdCAgaWYgKGluamVjdCkge1xuXHQgICAgLy8gaW5qZWN0IGlzIDphbnkgYmVjYXVzZSBmbG93IGlzIG5vdCBzbWFydCBlbm91Z2ggdG8gZmlndXJlIG91dCBjYWNoZWRcblx0ICAgIHZhciByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgICAgdmFyIGtleXMgPSBoYXNTeW1ib2xcblx0ICAgICAgPyBSZWZsZWN0Lm93bktleXMoaW5qZWN0KS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaW5qZWN0LCBrZXkpLmVudW1lcmFibGVcblx0ICAgICAgfSlcblx0ICAgICAgOiBPYmplY3Qua2V5cyhpbmplY3QpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgdmFyIHByb3ZpZGVLZXkgPSBpbmplY3Rba2V5XS5mcm9tO1xuXHQgICAgICB2YXIgc291cmNlID0gdm07XG5cdCAgICAgIHdoaWxlIChzb3VyY2UpIHtcblx0ICAgICAgICBpZiAoc291cmNlLl9wcm92aWRlZCAmJiBoYXNPd24oc291cmNlLl9wcm92aWRlZCwgcHJvdmlkZUtleSkpIHtcblx0ICAgICAgICAgIHJlc3VsdFtrZXldID0gc291cmNlLl9wcm92aWRlZFtwcm92aWRlS2V5XTtcblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNvdXJjZSA9IHNvdXJjZS4kcGFyZW50O1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghc291cmNlKSB7XG5cdCAgICAgICAgaWYgKCdkZWZhdWx0JyBpbiBpbmplY3Rba2V5XSkge1xuXHQgICAgICAgICAgdmFyIHByb3ZpZGVEZWZhdWx0ID0gaW5qZWN0W2tleV0uZGVmYXVsdDtcblx0ICAgICAgICAgIHJlc3VsdFtrZXldID0gdHlwZW9mIHByb3ZpZGVEZWZhdWx0ID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgICAgID8gcHJvdmlkZURlZmF1bHQuY2FsbCh2bSlcblx0ICAgICAgICAgICAgOiBwcm92aWRlRGVmYXVsdDtcblx0ICAgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIHdhcm4oKFwiSW5qZWN0aW9uIFxcXCJcIiArIGtleSArIFwiXFxcIiBub3QgZm91bmRcIiksIHZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHRcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgdi1mb3IgbGlzdHMuXG5cdCAqL1xuXHRmdW5jdGlvbiByZW5kZXJMaXN0IChcblx0ICB2YWwsXG5cdCAgcmVuZGVyXG5cdCkge1xuXHQgIHZhciByZXQsIGksIGwsIGtleXMsIGtleTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpIHx8IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXQgPSBuZXcgQXJyYXkodmFsLmxlbmd0aCk7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gdmFsLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICByZXRbaV0gPSByZW5kZXIodmFsW2ldLCBpKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICByZXQgPSBuZXcgQXJyYXkodmFsKTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCB2YWw7IGkrKykge1xuXHQgICAgICByZXRbaV0gPSByZW5kZXIoaSArIDEsIGkpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICByZXQgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIHJldFtpXSA9IHJlbmRlcih2YWxba2V5XSwga2V5LCBpKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGlzRGVmKHJldCkpIHtcblx0ICAgIChyZXQpLl9pc1ZMaXN0ID0gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldFxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIDxzbG90PlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVuZGVyU2xvdCAoXG5cdCAgbmFtZSxcblx0ICBmYWxsYmFjayxcblx0ICBwcm9wcyxcblx0ICBiaW5kT2JqZWN0XG5cdCkge1xuXHQgIHZhciBzY29wZWRTbG90Rm4gPSB0aGlzLiRzY29wZWRTbG90c1tuYW1lXTtcblx0ICB2YXIgbm9kZXM7XG5cdCAgaWYgKHNjb3BlZFNsb3RGbikgeyAvLyBzY29wZWQgc2xvdFxuXHQgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTtcblx0ICAgIGlmIChiaW5kT2JqZWN0KSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc09iamVjdChiaW5kT2JqZWN0KSkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAnc2xvdCB2LWJpbmQgd2l0aG91dCBhcmd1bWVudCBleHBlY3RzIGFuIE9iamVjdCcsXG5cdCAgICAgICAgICB0aGlzXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICBwcm9wcyA9IGV4dGVuZChleHRlbmQoe30sIGJpbmRPYmplY3QpLCBwcm9wcyk7XG5cdCAgICB9XG5cdCAgICBub2RlcyA9IHNjb3BlZFNsb3RGbihwcm9wcykgfHwgZmFsbGJhY2s7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzbG90Tm9kZXMgPSB0aGlzLiRzbG90c1tuYW1lXTtcblx0ICAgIC8vIHdhcm4gZHVwbGljYXRlIHNsb3QgdXNhZ2Vcblx0ICAgIGlmIChzbG90Tm9kZXMpIHtcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgc2xvdE5vZGVzLl9yZW5kZXJlZCkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICBcIkR1cGxpY2F0ZSBwcmVzZW5jZSBvZiBzbG90IFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgZm91bmQgaW4gdGhlIHNhbWUgcmVuZGVyIHRyZWUgXCIgK1xuXHQgICAgICAgICAgXCItIHRoaXMgd2lsbCBsaWtlbHkgY2F1c2UgcmVuZGVyIGVycm9ycy5cIixcblx0ICAgICAgICAgIHRoaXNcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIHNsb3ROb2Rlcy5fcmVuZGVyZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgbm9kZXMgPSBzbG90Tm9kZXMgfHwgZmFsbGJhY2s7XG5cdCAgfVxuXHRcblx0ICB2YXIgdGFyZ2V0ID0gcHJvcHMgJiYgcHJvcHMuc2xvdDtcblx0ICBpZiAodGFyZ2V0KSB7XG5cdCAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7IHNsb3Q6IHRhcmdldCB9LCBub2Rlcylcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5vZGVzXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIGZpbHRlcnNcblx0ICovXG5cdGZ1bmN0aW9uIHJlc29sdmVGaWx0ZXIgKGlkKSB7XG5cdCAgcmV0dXJuIHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGlkLCB0cnVlKSB8fCBpZGVudGl0eVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGlzS2V5Tm90TWF0Y2ggKGV4cGVjdCwgYWN0dWFsKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoZXhwZWN0KSkge1xuXHQgICAgcmV0dXJuIGV4cGVjdC5pbmRleE9mKGFjdHVhbCkgPT09IC0xXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBleHBlY3QgIT09IGFjdHVhbFxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciBjaGVja2luZyBrZXlDb2RlcyBmcm9tIGNvbmZpZy5cblx0ICogZXhwb3NlZCBhcyBWdWUucHJvdG90eXBlLl9rXG5cdCAqIHBhc3NpbmcgaW4gZXZlbnRLZXlOYW1lIGFzIGxhc3QgYXJndW1lbnQgc2VwYXJhdGVseSBmb3IgYmFja3dhcmRzIGNvbXBhdFxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tLZXlDb2RlcyAoXG5cdCAgZXZlbnRLZXlDb2RlLFxuXHQgIGtleSxcblx0ICBidWlsdEluS2V5Q29kZSxcblx0ICBldmVudEtleU5hbWUsXG5cdCAgYnVpbHRJbktleU5hbWVcblx0KSB7XG5cdCAgdmFyIG1hcHBlZEtleUNvZGUgPSBjb25maWcua2V5Q29kZXNba2V5XSB8fCBidWlsdEluS2V5Q29kZTtcblx0ICBpZiAoYnVpbHRJbktleU5hbWUgJiYgZXZlbnRLZXlOYW1lICYmICFjb25maWcua2V5Q29kZXNba2V5XSkge1xuXHQgICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2goYnVpbHRJbktleU5hbWUsIGV2ZW50S2V5TmFtZSlcblx0ICB9IGVsc2UgaWYgKG1hcHBlZEtleUNvZGUpIHtcblx0ICAgIHJldHVybiBpc0tleU5vdE1hdGNoKG1hcHBlZEtleUNvZGUsIGV2ZW50S2V5Q29kZSlcblx0ICB9IGVsc2UgaWYgKGV2ZW50S2V5TmFtZSkge1xuXHQgICAgcmV0dXJuIGh5cGhlbmF0ZShldmVudEtleU5hbWUpICE9PSBrZXlcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciBtZXJnaW5nIHYtYmluZD1cIm9iamVjdFwiIGludG8gYSBWTm9kZSdzIGRhdGEuXG5cdCAqL1xuXHRmdW5jdGlvbiBiaW5kT2JqZWN0UHJvcHMgKFxuXHQgIGRhdGEsXG5cdCAgdGFnLFxuXHQgIHZhbHVlLFxuXHQgIGFzUHJvcCxcblx0ICBpc1N5bmNcblx0KSB7XG5cdCAgaWYgKHZhbHVlKSB7XG5cdCAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgJ3YtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IG9yIEFycmF5IHZhbHVlJyxcblx0ICAgICAgICB0aGlzXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICB2YWx1ZSA9IHRvT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaGFzaDtcblx0ICAgICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGtleSApIHtcblx0ICAgICAgICBpZiAoXG5cdCAgICAgICAgICBrZXkgPT09ICdjbGFzcycgfHxcblx0ICAgICAgICAgIGtleSA9PT0gJ3N0eWxlJyB8fFxuXHQgICAgICAgICAgaXNSZXNlcnZlZEF0dHJpYnV0ZShrZXkpXG5cdCAgICAgICAgKSB7XG5cdCAgICAgICAgICBoYXNoID0gZGF0YTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdmFyIHR5cGUgPSBkYXRhLmF0dHJzICYmIGRhdGEuYXR0cnMudHlwZTtcblx0ICAgICAgICAgIGhhc2ggPSBhc1Byb3AgfHwgY29uZmlnLm11c3RVc2VQcm9wKHRhZywgdHlwZSwga2V5KVxuXHQgICAgICAgICAgICA/IGRhdGEuZG9tUHJvcHMgfHwgKGRhdGEuZG9tUHJvcHMgPSB7fSlcblx0ICAgICAgICAgICAgOiBkYXRhLmF0dHJzIHx8IChkYXRhLmF0dHJzID0ge30pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIShrZXkgaW4gaGFzaCkpIHtcblx0ICAgICAgICAgIGhhc2hba2V5XSA9IHZhbHVlW2tleV07XG5cdFxuXHQgICAgICAgICAgaWYgKGlzU3luYykge1xuXHQgICAgICAgICAgICB2YXIgb24gPSBkYXRhLm9uIHx8IChkYXRhLm9uID0ge30pO1xuXHQgICAgICAgICAgICBvblsoXCJ1cGRhdGU6XCIgKyBrZXkpXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcblx0ICAgICAgICAgICAgICB2YWx1ZVtrZXldID0gJGV2ZW50O1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgbG9vcCgga2V5ICk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBkYXRhXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgc3RhdGljIHRyZWVzLlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVuZGVyU3RhdGljIChcblx0ICBpbmRleCxcblx0ICBpc0luRm9yXG5cdCkge1xuXHQgIHZhciBjYWNoZWQgPSB0aGlzLl9zdGF0aWNUcmVlcyB8fCAodGhpcy5fc3RhdGljVHJlZXMgPSBbXSk7XG5cdCAgdmFyIHRyZWUgPSBjYWNoZWRbaW5kZXhdO1xuXHQgIC8vIGlmIGhhcyBhbHJlYWR5LXJlbmRlcmVkIHN0YXRpYyB0cmVlIGFuZCBub3QgaW5zaWRlIHYtZm9yLFxuXHQgIC8vIHdlIGNhbiByZXVzZSB0aGUgc2FtZSB0cmVlLlxuXHQgIGlmICh0cmVlICYmICFpc0luRm9yKSB7XG5cdCAgICByZXR1cm4gdHJlZVxuXHQgIH1cblx0ICAvLyBvdGhlcndpc2UsIHJlbmRlciBhIGZyZXNoIHRyZWUuXG5cdCAgdHJlZSA9IGNhY2hlZFtpbmRleF0gPSB0aGlzLiRvcHRpb25zLnN0YXRpY1JlbmRlckZuc1tpbmRleF0uY2FsbChcblx0ICAgIHRoaXMuX3JlbmRlclByb3h5LFxuXHQgICAgbnVsbCxcblx0ICAgIHRoaXMgLy8gZm9yIHJlbmRlciBmbnMgZ2VuZXJhdGVkIGZvciBmdW5jdGlvbmFsIGNvbXBvbmVudCB0ZW1wbGF0ZXNcblx0ICApO1xuXHQgIG1hcmtTdGF0aWModHJlZSwgKFwiX19zdGF0aWNfX1wiICsgaW5kZXgpLCBmYWxzZSk7XG5cdCAgcmV0dXJuIHRyZWVcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciB2LW9uY2UuXG5cdCAqIEVmZmVjdGl2ZWx5IGl0IG1lYW5zIG1hcmtpbmcgdGhlIG5vZGUgYXMgc3RhdGljIHdpdGggYSB1bmlxdWUga2V5LlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFya09uY2UgKFxuXHQgIHRyZWUsXG5cdCAgaW5kZXgsXG5cdCAga2V5XG5cdCkge1xuXHQgIG1hcmtTdGF0aWModHJlZSwgKFwiX19vbmNlX19cIiArIGluZGV4ICsgKGtleSA/IChcIl9cIiArIGtleSkgOiBcIlwiKSksIHRydWUpO1xuXHQgIHJldHVybiB0cmVlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hcmtTdGF0aWMgKFxuXHQgIHRyZWUsXG5cdCAga2V5LFxuXHQgIGlzT25jZVxuXHQpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh0cmVlKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmICh0cmVlW2ldICYmIHR5cGVvZiB0cmVlW2ldICE9PSAnc3RyaW5nJykge1xuXHQgICAgICAgIG1hcmtTdGF0aWNOb2RlKHRyZWVbaV0sIChrZXkgKyBcIl9cIiArIGkpLCBpc09uY2UpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIG1hcmtTdGF0aWNOb2RlKHRyZWUsIGtleSwgaXNPbmNlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hcmtTdGF0aWNOb2RlIChub2RlLCBrZXksIGlzT25jZSkge1xuXHQgIG5vZGUuaXNTdGF0aWMgPSB0cnVlO1xuXHQgIG5vZGUua2V5ID0ga2V5O1xuXHQgIG5vZGUuaXNPbmNlID0gaXNPbmNlO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGJpbmRPYmplY3RMaXN0ZW5lcnMgKGRhdGEsIHZhbHVlKSB7XG5cdCAgaWYgKHZhbHVlKSB7XG5cdCAgICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgICAndi1vbiB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IHZhbHVlJyxcblx0ICAgICAgICB0aGlzXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgb24gPSBkYXRhLm9uID0gZGF0YS5vbiA/IGV4dGVuZCh7fSwgZGF0YS5vbikgOiB7fTtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGV4aXN0aW5nID0gb25ba2V5XTtcblx0ICAgICAgICB2YXIgb3VycyA9IHZhbHVlW2tleV07XG5cdCAgICAgICAgb25ba2V5XSA9IGV4aXN0aW5nID8gW10uY29uY2F0KGV4aXN0aW5nLCBvdXJzKSA6IG91cnM7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGRhdGFcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbnN0YWxsUmVuZGVySGVscGVycyAodGFyZ2V0KSB7XG5cdCAgdGFyZ2V0Ll9vID0gbWFya09uY2U7XG5cdCAgdGFyZ2V0Ll9uID0gdG9OdW1iZXI7XG5cdCAgdGFyZ2V0Ll9zID0gdG9TdHJpbmc7XG5cdCAgdGFyZ2V0Ll9sID0gcmVuZGVyTGlzdDtcblx0ICB0YXJnZXQuX3QgPSByZW5kZXJTbG90O1xuXHQgIHRhcmdldC5fcSA9IGxvb3NlRXF1YWw7XG5cdCAgdGFyZ2V0Ll9pID0gbG9vc2VJbmRleE9mO1xuXHQgIHRhcmdldC5fbSA9IHJlbmRlclN0YXRpYztcblx0ICB0YXJnZXQuX2YgPSByZXNvbHZlRmlsdGVyO1xuXHQgIHRhcmdldC5fayA9IGNoZWNrS2V5Q29kZXM7XG5cdCAgdGFyZ2V0Ll9iID0gYmluZE9iamVjdFByb3BzO1xuXHQgIHRhcmdldC5fdiA9IGNyZWF0ZVRleHRWTm9kZTtcblx0ICB0YXJnZXQuX2UgPSBjcmVhdGVFbXB0eVZOb2RlO1xuXHQgIHRhcmdldC5fdSA9IHJlc29sdmVTY29wZWRTbG90cztcblx0ICB0YXJnZXQuX2cgPSBiaW5kT2JqZWN0TGlzdGVuZXJzO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0IChcblx0ICBkYXRhLFxuXHQgIHByb3BzLFxuXHQgIGNoaWxkcmVuLFxuXHQgIHBhcmVudCxcblx0ICBDdG9yXG5cdCkge1xuXHQgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zO1xuXHQgIC8vIGVuc3VyZSB0aGUgY3JlYXRlRWxlbWVudCBmdW5jdGlvbiBpbiBmdW5jdGlvbmFsIGNvbXBvbmVudHNcblx0ICAvLyBnZXRzIGEgdW5pcXVlIGNvbnRleHQgLSB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgY29ycmVjdCBuYW1lZCBzbG90IGNoZWNrXG5cdCAgdmFyIGNvbnRleHRWbTtcblx0ICBpZiAoaGFzT3duKHBhcmVudCwgJ191aWQnKSkge1xuXHQgICAgY29udGV4dFZtID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQpO1xuXHQgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICBjb250ZXh0Vm0uX29yaWdpbmFsID0gcGFyZW50O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyB0aGUgY29udGV4dCB2bSBwYXNzZWQgaW4gaXMgYSBmdW5jdGlvbmFsIGNvbnRleHQgYXMgd2VsbC5cblx0ICAgIC8vIGluIHRoaXMgY2FzZSB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBhcmUgYWJsZSB0byBnZXQgYSBob2xkIHRvIHRoZVxuXHQgICAgLy8gcmVhbCBjb250ZXh0IGluc3RhbmNlLlxuXHQgICAgY29udGV4dFZtID0gcGFyZW50O1xuXHQgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICBwYXJlbnQgPSBwYXJlbnQuX29yaWdpbmFsO1xuXHQgIH1cblx0ICB2YXIgaXNDb21waWxlZCA9IGlzVHJ1ZShvcHRpb25zLl9jb21waWxlZCk7XG5cdCAgdmFyIG5lZWROb3JtYWxpemF0aW9uID0gIWlzQ29tcGlsZWQ7XG5cdFxuXHQgIHRoaXMuZGF0YSA9IGRhdGE7XG5cdCAgdGhpcy5wcm9wcyA9IHByb3BzO1xuXHQgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblx0ICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICB0aGlzLmxpc3RlbmVycyA9IGRhdGEub24gfHwgZW1wdHlPYmplY3Q7XG5cdCAgdGhpcy5pbmplY3Rpb25zID0gcmVzb2x2ZUluamVjdChvcHRpb25zLmluamVjdCwgcGFyZW50KTtcblx0ICB0aGlzLnNsb3RzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZVNsb3RzKGNoaWxkcmVuLCBwYXJlbnQpOyB9O1xuXHRcblx0ICAvLyBzdXBwb3J0IGZvciBjb21waWxlZCBmdW5jdGlvbmFsIHRlbXBsYXRlXG5cdCAgaWYgKGlzQ29tcGlsZWQpIHtcblx0ICAgIC8vIGV4cG9zaW5nICRvcHRpb25zIGZvciByZW5kZXJTdGF0aWMoKVxuXHQgICAgdGhpcy4kb3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICAvLyBwcmUtcmVzb2x2ZSBzbG90cyBmb3IgcmVuZGVyU2xvdCgpXG5cdCAgICB0aGlzLiRzbG90cyA9IHRoaXMuc2xvdHMoKTtcblx0ICAgIHRoaXMuJHNjb3BlZFNsb3RzID0gZGF0YS5zY29wZWRTbG90cyB8fCBlbXB0eU9iamVjdDtcblx0ICB9XG5cdFxuXHQgIGlmIChvcHRpb25zLl9zY29wZUlkKSB7XG5cdCAgICB0aGlzLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHtcblx0ICAgICAgdmFyIHZub2RlID0gY3JlYXRlRWxlbWVudChjb250ZXh0Vm0sIGEsIGIsIGMsIGQsIG5lZWROb3JtYWxpemF0aW9uKTtcblx0ICAgICAgaWYgKHZub2RlICYmICFBcnJheS5pc0FycmF5KHZub2RlKSkge1xuXHQgICAgICAgIHZub2RlLmZuU2NvcGVJZCA9IG9wdGlvbnMuX3Njb3BlSWQ7XG5cdCAgICAgICAgdm5vZGUuZm5Db250ZXh0ID0gcGFyZW50O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2bm9kZVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KGNvbnRleHRWbSwgYSwgYiwgYywgZCwgbmVlZE5vcm1hbGl6YXRpb24pOyB9O1xuXHQgIH1cblx0fVxuXHRcblx0aW5zdGFsbFJlbmRlckhlbHBlcnMoRnVuY3Rpb25hbFJlbmRlckNvbnRleHQucHJvdG90eXBlKTtcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uYWxDb21wb25lbnQgKFxuXHQgIEN0b3IsXG5cdCAgcHJvcHNEYXRhLFxuXHQgIGRhdGEsXG5cdCAgY29udGV4dFZtLFxuXHQgIGNoaWxkcmVuXG5cdCkge1xuXHQgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zO1xuXHQgIHZhciBwcm9wcyA9IHt9O1xuXHQgIHZhciBwcm9wT3B0aW9ucyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgaWYgKGlzRGVmKHByb3BPcHRpb25zKSkge1xuXHQgICAgZm9yICh2YXIga2V5IGluIHByb3BPcHRpb25zKSB7XG5cdCAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhIHx8IGVtcHR5T2JqZWN0KTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKGlzRGVmKGRhdGEuYXR0cnMpKSB7IG1lcmdlUHJvcHMocHJvcHMsIGRhdGEuYXR0cnMpOyB9XG5cdCAgICBpZiAoaXNEZWYoZGF0YS5wcm9wcykpIHsgbWVyZ2VQcm9wcyhwcm9wcywgZGF0YS5wcm9wcyk7IH1cblx0ICB9XG5cdFxuXHQgIHZhciByZW5kZXJDb250ZXh0ID0gbmV3IEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0KFxuXHQgICAgZGF0YSxcblx0ICAgIHByb3BzLFxuXHQgICAgY2hpbGRyZW4sXG5cdCAgICBjb250ZXh0Vm0sXG5cdCAgICBDdG9yXG5cdCAgKTtcblx0XG5cdCAgdmFyIHZub2RlID0gb3B0aW9ucy5yZW5kZXIuY2FsbChudWxsLCByZW5kZXJDb250ZXh0Ll9jLCByZW5kZXJDb250ZXh0KTtcblx0XG5cdCAgaWYgKHZub2RlIGluc3RhbmNlb2YgVk5vZGUpIHtcblx0ICAgIHJldHVybiBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0KHZub2RlLCBkYXRhLCByZW5kZXJDb250ZXh0LnBhcmVudCwgb3B0aW9ucylcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG5cdCAgICB2YXIgdm5vZGVzID0gbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUpIHx8IFtdO1xuXHQgICAgdmFyIHJlcyA9IG5ldyBBcnJheSh2bm9kZXMubGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHJlc1tpXSA9IGNsb25lQW5kTWFya0Z1bmN0aW9uYWxSZXN1bHQodm5vZGVzW2ldLCBkYXRhLCByZW5kZXJDb250ZXh0LnBhcmVudCwgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0ICh2bm9kZSwgZGF0YSwgY29udGV4dFZtLCBvcHRpb25zKSB7XG5cdCAgLy8gIzc4MTcgY2xvbmUgbm9kZSBiZWZvcmUgc2V0dGluZyBmbkNvbnRleHQsIG90aGVyd2lzZSBpZiB0aGUgbm9kZSBpcyByZXVzZWRcblx0ICAvLyAoZS5nLiBpdCB3YXMgZnJvbSBhIGNhY2hlZCBub3JtYWwgc2xvdCkgdGhlIGZuQ29udGV4dCBjYXVzZXMgbmFtZWQgc2xvdHNcblx0ICAvLyB0aGF0IHNob3VsZCBub3QgYmUgbWF0Y2hlZCB0byBtYXRjaC5cblx0ICB2YXIgY2xvbmUgPSBjbG9uZVZOb2RlKHZub2RlKTtcblx0ICBjbG9uZS5mbkNvbnRleHQgPSBjb250ZXh0Vm07XG5cdCAgY2xvbmUuZm5PcHRpb25zID0gb3B0aW9ucztcblx0ICBpZiAoZGF0YS5zbG90KSB7XG5cdCAgICAoY2xvbmUuZGF0YSB8fCAoY2xvbmUuZGF0YSA9IHt9KSkuc2xvdCA9IGRhdGEuc2xvdDtcblx0ICB9XG5cdCAgcmV0dXJuIGNsb25lXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lcmdlUHJvcHMgKHRvLCBmcm9tKSB7XG5cdCAgZm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0ICAgIHRvW2NhbWVsaXplKGtleSldID0gZnJvbVtrZXldO1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0XG5cdFxuXHQvLyBSZWdpc3RlciB0aGUgY29tcG9uZW50IGhvb2sgdG8gd2VleCBuYXRpdmUgcmVuZGVyIGVuZ2luZS5cblx0Ly8gVGhlIGhvb2sgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgbmF0aXZlLCBub3QgamF2YXNjcmlwdC5cblx0XG5cdFxuXHQvLyBVcGRhdGVzIHRoZSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50IHRvIHdlZXggbmF0aXZlIHJlbmRlciBlbmdpbmUuXG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5rczEwMTAwL3dlZXgtbmF0aXZlLWRpcmVjdGl2ZS90cmVlL21hc3Rlci9jb21wb25lbnRcblx0XG5cdC8vIGxpc3RlbmluZyBvbiBuYXRpdmUgY2FsbGJhY2tcblx0XG5cdC8qICAqL1xuXHRcblx0LyogICovXG5cdFxuXHQvLyBpbmxpbmUgaG9va3MgdG8gYmUgaW52b2tlZCBvbiBjb21wb25lbnQgVk5vZGVzIGR1cmluZyBwYXRjaFxuXHR2YXIgY29tcG9uZW50Vk5vZGVIb29rcyA9IHtcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0IChcblx0ICAgIHZub2RlLFxuXHQgICAgaHlkcmF0aW5nLFxuXHQgICAgcGFyZW50RWxtLFxuXHQgICAgcmVmRWxtXG5cdCAgKSB7XG5cdCAgICBpZiAoXG5cdCAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmXG5cdCAgICAgICF2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQgJiZcblx0ICAgICAgdm5vZGUuZGF0YS5rZWVwQWxpdmVcblx0ICAgICkge1xuXHQgICAgICAvLyBrZXB0LWFsaXZlIGNvbXBvbmVudHMsIHRyZWF0IGFzIGEgcGF0Y2hcblx0ICAgICAgdmFyIG1vdW50ZWROb2RlID0gdm5vZGU7IC8vIHdvcmsgYXJvdW5kIGZsb3dcblx0ICAgICAgY29tcG9uZW50Vk5vZGVIb29rcy5wcmVwYXRjaChtb3VudGVkTm9kZSwgbW91bnRlZE5vZGUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlKFxuXHQgICAgICAgIHZub2RlLFxuXHQgICAgICAgIGFjdGl2ZUluc3RhbmNlLFxuXHQgICAgICAgIHBhcmVudEVsbSxcblx0ICAgICAgICByZWZFbG1cblx0ICAgICAgKTtcblx0ICAgICAgY2hpbGQuJG1vdW50KGh5ZHJhdGluZyA/IHZub2RlLmVsbSA6IHVuZGVmaW5lZCwgaHlkcmF0aW5nKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBwcmVwYXRjaDogZnVuY3Rpb24gcHJlcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuXHQgICAgdmFyIGNoaWxkID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBvbGRWbm9kZS5jb21wb25lbnRJbnN0YW5jZTtcblx0ICAgIHVwZGF0ZUNoaWxkQ29tcG9uZW50KFxuXHQgICAgICBjaGlsZCxcblx0ICAgICAgb3B0aW9ucy5wcm9wc0RhdGEsIC8vIHVwZGF0ZWQgcHJvcHNcblx0ICAgICAgb3B0aW9ucy5saXN0ZW5lcnMsIC8vIHVwZGF0ZWQgbGlzdGVuZXJzXG5cdCAgICAgIHZub2RlLCAvLyBuZXcgcGFyZW50IHZub2RlXG5cdCAgICAgIG9wdGlvbnMuY2hpbGRyZW4gLy8gbmV3IGNoaWxkcmVuXG5cdCAgICApO1xuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0ICh2bm9kZSkge1xuXHQgICAgdmFyIGNvbnRleHQgPSB2bm9kZS5jb250ZXh0O1xuXHQgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG5cdCAgICBpZiAoIWNvbXBvbmVudEluc3RhbmNlLl9pc01vdW50ZWQpIHtcblx0ICAgICAgY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCA9IHRydWU7XG5cdCAgICAgIGNhbGxIb29rKGNvbXBvbmVudEluc3RhbmNlLCAnbW91bnRlZCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKHZub2RlLmRhdGEua2VlcEFsaXZlKSB7XG5cdCAgICAgIGlmIChjb250ZXh0Ll9pc01vdW50ZWQpIHtcblx0ICAgICAgICAvLyB2dWUtcm91dGVyIzEyMTJcblx0ICAgICAgICAvLyBEdXJpbmcgdXBkYXRlcywgYSBrZXB0LWFsaXZlIGNvbXBvbmVudCdzIGNoaWxkIGNvbXBvbmVudHMgbWF5XG5cdCAgICAgICAgLy8gY2hhbmdlLCBzbyBkaXJlY3RseSB3YWxraW5nIHRoZSB0cmVlIGhlcmUgbWF5IGNhbGwgYWN0aXZhdGVkIGhvb2tzXG5cdCAgICAgICAgLy8gb24gaW5jb3JyZWN0IGNoaWxkcmVuLiBJbnN0ZWFkIHdlIHB1c2ggdGhlbSBpbnRvIGEgcXVldWUgd2hpY2ggd2lsbFxuXHQgICAgICAgIC8vIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgd2hvbGUgcGF0Y2ggcHJvY2VzcyBlbmRlZC5cblx0ICAgICAgICBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgdHJ1ZSAvKiBkaXJlY3QgKi8pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSAodm5vZGUpIHtcblx0ICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuXHQgICAgaWYgKCFjb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQpIHtcblx0ICAgICAgaWYgKCF2bm9kZS5kYXRhLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIGNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCB0cnVlIC8qIGRpcmVjdCAqLyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaG9va3NUb01lcmdlID0gT2JqZWN0LmtleXMoY29tcG9uZW50Vk5vZGVIb29rcyk7XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKFxuXHQgIEN0b3IsXG5cdCAgZGF0YSxcblx0ICBjb250ZXh0LFxuXHQgIGNoaWxkcmVuLFxuXHQgIHRhZ1xuXHQpIHtcblx0ICBpZiAoaXNVbmRlZihDdG9yKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgYmFzZUN0b3IgPSBjb250ZXh0LiRvcHRpb25zLl9iYXNlO1xuXHRcblx0ICAvLyBwbGFpbiBvcHRpb25zIG9iamVjdDogdHVybiBpdCBpbnRvIGEgY29uc3RydWN0b3Jcblx0ICBpZiAoaXNPYmplY3QoQ3RvcikpIHtcblx0ICAgIEN0b3IgPSBiYXNlQ3Rvci5leHRlbmQoQ3Rvcik7XG5cdCAgfVxuXHRcblx0ICAvLyBpZiBhdCB0aGlzIHN0YWdlIGl0J3Mgbm90IGEgY29uc3RydWN0b3Igb3IgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnksXG5cdCAgLy8gcmVqZWN0LlxuXHQgIGlmICh0eXBlb2YgQ3RvciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgd2FybigoXCJJbnZhbGlkIENvbXBvbmVudCBkZWZpbml0aW9uOiBcIiArIChTdHJpbmcoQ3RvcikpKSwgY29udGV4dCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIC8vIGFzeW5jIGNvbXBvbmVudFxuXHQgIHZhciBhc3luY0ZhY3Rvcnk7XG5cdCAgaWYgKGlzVW5kZWYoQ3Rvci5jaWQpKSB7XG5cdCAgICBhc3luY0ZhY3RvcnkgPSBDdG9yO1xuXHQgICAgQ3RvciA9IHJlc29sdmVBc3luY0NvbXBvbmVudChhc3luY0ZhY3RvcnksIGJhc2VDdG9yLCBjb250ZXh0KTtcblx0ICAgIGlmIChDdG9yID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgLy8gcmV0dXJuIGEgcGxhY2Vob2xkZXIgbm9kZSBmb3IgYXN5bmMgY29tcG9uZW50LCB3aGljaCBpcyByZW5kZXJlZFxuXHQgICAgICAvLyBhcyBhIGNvbW1lbnQgbm9kZSBidXQgcHJlc2VydmVzIGFsbCB0aGUgcmF3IGluZm9ybWF0aW9uIGZvciB0aGUgbm9kZS5cblx0ICAgICAgLy8gdGhlIGluZm9ybWF0aW9uIHdpbGwgYmUgdXNlZCBmb3IgYXN5bmMgc2VydmVyLXJlbmRlcmluZyBhbmQgaHlkcmF0aW9uLlxuXHQgICAgICByZXR1cm4gY3JlYXRlQXN5bmNQbGFjZWhvbGRlcihcblx0ICAgICAgICBhc3luY0ZhY3RvcnksXG5cdCAgICAgICAgZGF0YSxcblx0ICAgICAgICBjb250ZXh0LFxuXHQgICAgICAgIGNoaWxkcmVuLFxuXHQgICAgICAgIHRhZ1xuXHQgICAgICApXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBkYXRhID0gZGF0YSB8fCB7fTtcblx0XG5cdCAgLy8gcmVzb2x2ZSBjb25zdHJ1Y3RvciBvcHRpb25zIGluIGNhc2UgZ2xvYmFsIG1peGlucyBhcmUgYXBwbGllZCBhZnRlclxuXHQgIC8vIGNvbXBvbmVudCBjb25zdHJ1Y3RvciBjcmVhdGlvblxuXHQgIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvcik7XG5cdFxuXHQgIC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBkYXRhIGludG8gcHJvcHMgJiBldmVudHNcblx0ICBpZiAoaXNEZWYoZGF0YS5tb2RlbCkpIHtcblx0ICAgIHRyYW5zZm9ybU1vZGVsKEN0b3Iub3B0aW9ucywgZGF0YSk7XG5cdCAgfVxuXHRcblx0ICAvLyBleHRyYWN0IHByb3BzXG5cdCAgdmFyIHByb3BzRGF0YSA9IGV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEoZGF0YSwgQ3RvciwgdGFnKTtcblx0XG5cdCAgLy8gZnVuY3Rpb25hbCBjb21wb25lbnRcblx0ICBpZiAoaXNUcnVlKEN0b3Iub3B0aW9ucy5mdW5jdGlvbmFsKSkge1xuXHQgICAgcmV0dXJuIGNyZWF0ZUZ1bmN0aW9uYWxDb21wb25lbnQoQ3RvciwgcHJvcHNEYXRhLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbilcblx0ICB9XG5cdFxuXHQgIC8vIGV4dHJhY3QgbGlzdGVuZXJzLCBzaW5jZSB0aGVzZSBuZWVkcyB0byBiZSB0cmVhdGVkIGFzXG5cdCAgLy8gY2hpbGQgY29tcG9uZW50IGxpc3RlbmVycyBpbnN0ZWFkIG9mIERPTSBsaXN0ZW5lcnNcblx0ICB2YXIgbGlzdGVuZXJzID0gZGF0YS5vbjtcblx0ICAvLyByZXBsYWNlIHdpdGggbGlzdGVuZXJzIHdpdGggLm5hdGl2ZSBtb2RpZmllclxuXHQgIC8vIHNvIGl0IGdldHMgcHJvY2Vzc2VkIGR1cmluZyBwYXJlbnQgY29tcG9uZW50IHBhdGNoLlxuXHQgIGRhdGEub24gPSBkYXRhLm5hdGl2ZU9uO1xuXHRcblx0ICBpZiAoaXNUcnVlKEN0b3Iub3B0aW9ucy5hYnN0cmFjdCkpIHtcblx0ICAgIC8vIGFic3RyYWN0IGNvbXBvbmVudHMgZG8gbm90IGtlZXAgYW55dGhpbmdcblx0ICAgIC8vIG90aGVyIHRoYW4gcHJvcHMgJiBsaXN0ZW5lcnMgJiBzbG90XG5cdFxuXHQgICAgLy8gd29yayBhcm91bmQgZmxvd1xuXHQgICAgdmFyIHNsb3QgPSBkYXRhLnNsb3Q7XG5cdCAgICBkYXRhID0ge307XG5cdCAgICBpZiAoc2xvdCkge1xuXHQgICAgICBkYXRhLnNsb3QgPSBzbG90O1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gaW5zdGFsbCBjb21wb25lbnQgbWFuYWdlbWVudCBob29rcyBvbnRvIHRoZSBwbGFjZWhvbGRlciBub2RlXG5cdCAgaW5zdGFsbENvbXBvbmVudEhvb2tzKGRhdGEpO1xuXHRcblx0ICAvLyByZXR1cm4gYSBwbGFjZWhvbGRlciB2bm9kZVxuXHQgIHZhciBuYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgdGFnO1xuXHQgIHZhciB2bm9kZSA9IG5ldyBWTm9kZShcblx0ICAgIChcInZ1ZS1jb21wb25lbnQtXCIgKyAoQ3Rvci5jaWQpICsgKG5hbWUgPyAoXCItXCIgKyBuYW1lKSA6ICcnKSksXG5cdCAgICBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0LFxuXHQgICAgeyBDdG9yOiBDdG9yLCBwcm9wc0RhdGE6IHByb3BzRGF0YSwgbGlzdGVuZXJzOiBsaXN0ZW5lcnMsIHRhZzogdGFnLCBjaGlsZHJlbjogY2hpbGRyZW4gfSxcblx0ICAgIGFzeW5jRmFjdG9yeVxuXHQgICk7XG5cdFxuXHQgIC8vIFdlZXggc3BlY2lmaWM6IGludm9rZSByZWN5Y2xlLWxpc3Qgb3B0aW1pemVkIEByZW5kZXIgZnVuY3Rpb24gZm9yXG5cdCAgLy8gZXh0cmFjdGluZyBjZWxsLXNsb3QgdGVtcGxhdGUuXG5cdCAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0hhbmtzMTAxMDAvd2VleC1uYXRpdmUtZGlyZWN0aXZlL3RyZWUvbWFzdGVyL2NvbXBvbmVudFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIHJldHVybiB2bm9kZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlIChcblx0ICB2bm9kZSwgLy8gd2Uga25vdyBpdCdzIE1vdW50ZWRDb21wb25lbnRWTm9kZSBidXQgZmxvdyBkb2Vzbid0XG5cdCAgcGFyZW50LCAvLyBhY3RpdmVJbnN0YW5jZSBpbiBsaWZlY3ljbGUgc3RhdGVcblx0ICBwYXJlbnRFbG0sXG5cdCAgcmVmRWxtXG5cdCkge1xuXHQgIHZhciBvcHRpb25zID0ge1xuXHQgICAgX2lzQ29tcG9uZW50OiB0cnVlLFxuXHQgICAgcGFyZW50OiBwYXJlbnQsXG5cdCAgICBfcGFyZW50Vm5vZGU6IHZub2RlLFxuXHQgICAgX3BhcmVudEVsbTogcGFyZW50RWxtIHx8IG51bGwsXG5cdCAgICBfcmVmRWxtOiByZWZFbG0gfHwgbnVsbFxuXHQgIH07XG5cdCAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlIHJlbmRlciBmdW5jdGlvbnNcblx0ICB2YXIgaW5saW5lVGVtcGxhdGUgPSB2bm9kZS5kYXRhLmlubGluZVRlbXBsYXRlO1xuXHQgIGlmIChpc0RlZihpbmxpbmVUZW1wbGF0ZSkpIHtcblx0ICAgIG9wdGlvbnMucmVuZGVyID0gaW5saW5lVGVtcGxhdGUucmVuZGVyO1xuXHQgICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBpbmxpbmVUZW1wbGF0ZS5zdGF0aWNSZW5kZXJGbnM7XG5cdCAgfVxuXHQgIHJldHVybiBuZXcgdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yKG9wdGlvbnMpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluc3RhbGxDb21wb25lbnRIb29rcyAoZGF0YSkge1xuXHQgIHZhciBob29rcyA9IGRhdGEuaG9vayB8fCAoZGF0YS5ob29rID0ge30pO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3NUb01lcmdlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIga2V5ID0gaG9va3NUb01lcmdlW2ldO1xuXHQgICAgaG9va3Nba2V5XSA9IGNvbXBvbmVudFZOb2RlSG9va3Nba2V5XTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBpbmZvICh2YWx1ZSBhbmQgY2FsbGJhY2spIGludG9cblx0Ly8gcHJvcCBhbmQgZXZlbnQgaGFuZGxlciByZXNwZWN0aXZlbHkuXG5cdGZ1bmN0aW9uIHRyYW5zZm9ybU1vZGVsIChvcHRpb25zLCBkYXRhKSB7XG5cdCAgdmFyIHByb3AgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLnByb3ApIHx8ICd2YWx1ZSc7XG5cdCAgdmFyIGV2ZW50ID0gKG9wdGlvbnMubW9kZWwgJiYgb3B0aW9ucy5tb2RlbC5ldmVudCkgfHwgJ2lucHV0JzsoZGF0YS5wcm9wcyB8fCAoZGF0YS5wcm9wcyA9IHt9KSlbcHJvcF0gPSBkYXRhLm1vZGVsLnZhbHVlO1xuXHQgIHZhciBvbiA9IGRhdGEub24gfHwgKGRhdGEub24gPSB7fSk7XG5cdCAgaWYgKGlzRGVmKG9uW2V2ZW50XSkpIHtcblx0ICAgIG9uW2V2ZW50XSA9IFtkYXRhLm1vZGVsLmNhbGxiYWNrXS5jb25jYXQob25bZXZlbnRdKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb25bZXZlbnRdID0gZGF0YS5tb2RlbC5jYWxsYmFjaztcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIFNJTVBMRV9OT1JNQUxJWkUgPSAxO1xuXHR2YXIgQUxXQVlTX05PUk1BTElaRSA9IDI7XG5cdFxuXHQvLyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBwcm92aWRpbmcgYSBtb3JlIGZsZXhpYmxlIGludGVyZmFjZVxuXHQvLyB3aXRob3V0IGdldHRpbmcgeWVsbGVkIGF0IGJ5IGZsb3dcblx0ZnVuY3Rpb24gY3JlYXRlRWxlbWVudCAoXG5cdCAgY29udGV4dCxcblx0ICB0YWcsXG5cdCAgZGF0YSxcblx0ICBjaGlsZHJlbixcblx0ICBub3JtYWxpemF0aW9uVHlwZSxcblx0ICBhbHdheXNOb3JtYWxpemVcblx0KSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkgfHwgaXNQcmltaXRpdmUoZGF0YSkpIHtcblx0ICAgIG5vcm1hbGl6YXRpb25UeXBlID0gY2hpbGRyZW47XG5cdCAgICBjaGlsZHJlbiA9IGRhdGE7XG5cdCAgICBkYXRhID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0ICBpZiAoaXNUcnVlKGFsd2F5c05vcm1hbGl6ZSkpIHtcblx0ICAgIG5vcm1hbGl6YXRpb25UeXBlID0gQUxXQVlTX05PUk1BTElaRTtcblx0ICB9XG5cdCAgcmV0dXJuIF9jcmVhdGVFbGVtZW50KGNvbnRleHQsIHRhZywgZGF0YSwgY2hpbGRyZW4sIG5vcm1hbGl6YXRpb25UeXBlKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY3JlYXRlRWxlbWVudCAoXG5cdCAgY29udGV4dCxcblx0ICB0YWcsXG5cdCAgZGF0YSxcblx0ICBjaGlsZHJlbixcblx0ICBub3JtYWxpemF0aW9uVHlwZVxuXHQpIHtcblx0ICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoKGRhdGEpLl9fb2JfXykpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgXCJBdm9pZCB1c2luZyBvYnNlcnZlZCBkYXRhIG9iamVjdCBhcyB2bm9kZSBkYXRhOiBcIiArIChKU09OLnN0cmluZ2lmeShkYXRhKSkgKyBcIlxcblwiICtcblx0ICAgICAgJ0Fsd2F5cyBjcmVhdGUgZnJlc2ggdm5vZGUgZGF0YSBvYmplY3RzIGluIGVhY2ggcmVuZGVyIScsXG5cdCAgICAgIGNvbnRleHRcblx0ICAgICk7XG5cdCAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpXG5cdCAgfVxuXHQgIC8vIG9iamVjdCBzeW50YXggaW4gdi1iaW5kXG5cdCAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKGRhdGEuaXMpKSB7XG5cdCAgICB0YWcgPSBkYXRhLmlzO1xuXHQgIH1cblx0ICBpZiAoIXRhZykge1xuXHQgICAgLy8gaW4gY2FzZSBvZiBjb21wb25lbnQgOmlzIHNldCB0byBmYWxzeSB2YWx1ZVxuXHQgICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKVxuXHQgIH1cblx0ICAvLyB3YXJuIGFnYWluc3Qgbm9uLXByaW1pdGl2ZSBrZXlcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgaXNEZWYoZGF0YSkgJiYgaXNEZWYoZGF0YS5rZXkpICYmICFpc1ByaW1pdGl2ZShkYXRhLmtleSlcblx0ICApIHtcblx0ICAgIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICAnQXZvaWQgdXNpbmcgbm9uLXByaW1pdGl2ZSB2YWx1ZSBhcyBrZXksICcgK1xuXHQgICAgICAgICd1c2Ugc3RyaW5nL251bWJlciB2YWx1ZSBpbnN0ZWFkLicsXG5cdCAgICAgICAgY29udGV4dFxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBzdXBwb3J0IHNpbmdsZSBmdW5jdGlvbiBjaGlsZHJlbiBhcyBkZWZhdWx0IHNjb3BlZCBzbG90XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pICYmXG5cdCAgICB0eXBlb2YgY2hpbGRyZW5bMF0gPT09ICdmdW5jdGlvbidcblx0ICApIHtcblx0ICAgIGRhdGEgPSBkYXRhIHx8IHt9O1xuXHQgICAgZGF0YS5zY29wZWRTbG90cyA9IHsgZGVmYXVsdDogY2hpbGRyZW5bMF0gfTtcblx0ICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7XG5cdCAgfVxuXHQgIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gQUxXQVlTX05PUk1BTElaRSkge1xuXHQgICAgY2hpbGRyZW4gPSBub3JtYWxpemVDaGlsZHJlbihjaGlsZHJlbik7XG5cdCAgfSBlbHNlIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gU0lNUExFX05PUk1BTElaRSkge1xuXHQgICAgY2hpbGRyZW4gPSBzaW1wbGVOb3JtYWxpemVDaGlsZHJlbihjaGlsZHJlbik7XG5cdCAgfVxuXHQgIHZhciB2bm9kZSwgbnM7XG5cdCAgaWYgKHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgQ3Rvcjtcblx0ICAgIG5zID0gKGNvbnRleHQuJHZub2RlICYmIGNvbnRleHQuJHZub2RlLm5zKSB8fCBjb25maWcuZ2V0VGFnTmFtZXNwYWNlKHRhZyk7XG5cdCAgICBpZiAoY29uZmlnLmlzUmVzZXJ2ZWRUYWcodGFnKSkge1xuXHQgICAgICAvLyBwbGF0Zm9ybSBidWlsdC1pbiBlbGVtZW50c1xuXHQgICAgICB2bm9kZSA9IG5ldyBWTm9kZShcblx0ICAgICAgICBjb25maWcucGFyc2VQbGF0Zm9ybVRhZ05hbWUodGFnKSwgZGF0YSwgY2hpbGRyZW4sXG5cdCAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHRcblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNEZWYoQ3RvciA9IHJlc29sdmVBc3NldChjb250ZXh0LiRvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpKSB7XG5cdCAgICAgIC8vIGNvbXBvbmVudFxuXHQgICAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudChDdG9yLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbiwgdGFnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHVua25vd24gb3IgdW5saXN0ZWQgbmFtZXNwYWNlZCBlbGVtZW50c1xuXHQgICAgICAvLyBjaGVjayBhdCBydW50aW1lIGJlY2F1c2UgaXQgbWF5IGdldCBhc3NpZ25lZCBhIG5hbWVzcGFjZSB3aGVuIGl0c1xuXHQgICAgICAvLyBwYXJlbnQgbm9ybWFsaXplcyBjaGlsZHJlblxuXHQgICAgICB2bm9kZSA9IG5ldyBWTm9kZShcblx0ICAgICAgICB0YWcsIGRhdGEsIGNoaWxkcmVuLFxuXHQgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0XG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGRpcmVjdCBjb21wb25lbnQgb3B0aW9ucyAvIGNvbnN0cnVjdG9yXG5cdCAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudCh0YWcsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuKTtcblx0ICB9XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG5cdCAgICByZXR1cm4gdm5vZGVcblx0ICB9IGVsc2UgaWYgKGlzRGVmKHZub2RlKSkge1xuXHQgICAgaWYgKGlzRGVmKG5zKSkgeyBhcHBseU5TKHZub2RlLCBucyk7IH1cblx0ICAgIGlmIChpc0RlZihkYXRhKSkgeyByZWdpc3RlckRlZXBCaW5kaW5ncyhkYXRhKTsgfVxuXHQgICAgcmV0dXJuIHZub2RlXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKClcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGx5TlMgKHZub2RlLCBucywgZm9yY2UpIHtcblx0ICB2bm9kZS5ucyA9IG5zO1xuXHQgIGlmICh2bm9kZS50YWcgPT09ICdmb3JlaWduT2JqZWN0Jykge1xuXHQgICAgLy8gdXNlIGRlZmF1bHQgbmFtZXNwYWNlIGluc2lkZSBmb3JlaWduT2JqZWN0XG5cdCAgICBucyA9IHVuZGVmaW5lZDtcblx0ICAgIGZvcmNlID0gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKGlzRGVmKHZub2RlLmNoaWxkcmVuKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY2hpbGRyZW5baV07XG5cdCAgICAgIGlmIChpc0RlZihjaGlsZC50YWcpICYmIChcblx0ICAgICAgICBpc1VuZGVmKGNoaWxkLm5zKSB8fCAoaXNUcnVlKGZvcmNlKSAmJiBjaGlsZC50YWcgIT09ICdzdmcnKSkpIHtcblx0ICAgICAgICBhcHBseU5TKGNoaWxkLCBucywgZm9yY2UpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyByZWYgIzUzMThcblx0Ly8gbmVjZXNzYXJ5IHRvIGVuc3VyZSBwYXJlbnQgcmUtcmVuZGVyIHdoZW4gZGVlcCBiaW5kaW5ncyBsaWtlIDpzdHlsZSBhbmRcblx0Ly8gOmNsYXNzIGFyZSB1c2VkIG9uIHNsb3Qgbm9kZXNcblx0ZnVuY3Rpb24gcmVnaXN0ZXJEZWVwQmluZGluZ3MgKGRhdGEpIHtcblx0ICBpZiAoaXNPYmplY3QoZGF0YS5zdHlsZSkpIHtcblx0ICAgIHRyYXZlcnNlKGRhdGEuc3R5bGUpO1xuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QoZGF0YS5jbGFzcykpIHtcblx0ICAgIHRyYXZlcnNlKGRhdGEuY2xhc3MpO1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0UmVuZGVyICh2bSkge1xuXHQgIHZtLl92bm9kZSA9IG51bGw7IC8vIHRoZSByb290IG9mIHRoZSBjaGlsZCB0cmVlXG5cdCAgdm0uX3N0YXRpY1RyZWVzID0gbnVsbDsgLy8gdi1vbmNlIGNhY2hlZCB0cmVlc1xuXHQgIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7XG5cdCAgdmFyIHBhcmVudFZub2RlID0gdm0uJHZub2RlID0gb3B0aW9ucy5fcGFyZW50Vm5vZGU7IC8vIHRoZSBwbGFjZWhvbGRlciBub2RlIGluIHBhcmVudCB0cmVlXG5cdCAgdmFyIHJlbmRlckNvbnRleHQgPSBwYXJlbnRWbm9kZSAmJiBwYXJlbnRWbm9kZS5jb250ZXh0O1xuXHQgIHZtLiRzbG90cyA9IHJlc29sdmVTbG90cyhvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiwgcmVuZGVyQ29udGV4dCk7XG5cdCAgdm0uJHNjb3BlZFNsb3RzID0gZW1wdHlPYmplY3Q7XG5cdCAgLy8gYmluZCB0aGUgY3JlYXRlRWxlbWVudCBmbiB0byB0aGlzIGluc3RhbmNlXG5cdCAgLy8gc28gdGhhdCB3ZSBnZXQgcHJvcGVyIHJlbmRlciBjb250ZXh0IGluc2lkZSBpdC5cblx0ICAvLyBhcmdzIG9yZGVyOiB0YWcsIGRhdGEsIGNoaWxkcmVuLCBub3JtYWxpemF0aW9uVHlwZSwgYWx3YXlzTm9ybWFsaXplXG5cdCAgLy8gaW50ZXJuYWwgdmVyc2lvbiBpcyB1c2VkIGJ5IHJlbmRlciBmdW5jdGlvbnMgY29tcGlsZWQgZnJvbSB0ZW1wbGF0ZXNcblx0ICB2bS5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KHZtLCBhLCBiLCBjLCBkLCBmYWxzZSk7IH07XG5cdCAgLy8gbm9ybWFsaXphdGlvbiBpcyBhbHdheXMgYXBwbGllZCBmb3IgdGhlIHB1YmxpYyB2ZXJzaW9uLCB1c2VkIGluXG5cdCAgLy8gdXNlci13cml0dGVuIHJlbmRlciBmdW5jdGlvbnMuXG5cdCAgdm0uJGNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgdHJ1ZSk7IH07XG5cdFxuXHQgIC8vICRhdHRycyAmICRsaXN0ZW5lcnMgYXJlIGV4cG9zZWQgZm9yIGVhc2llciBIT0MgY3JlYXRpb24uXG5cdCAgLy8gdGhleSBuZWVkIHRvIGJlIHJlYWN0aXZlIHNvIHRoYXQgSE9DcyB1c2luZyB0aGVtIGFyZSBhbHdheXMgdXBkYXRlZFxuXHQgIHZhciBwYXJlbnREYXRhID0gcGFyZW50Vm5vZGUgJiYgcGFyZW50Vm5vZGUuZGF0YTtcblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sICckYXR0cnMnLCBwYXJlbnREYXRhICYmIHBhcmVudERhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3QsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCAmJiB3YXJuKFwiJGF0dHJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG5cdCAgICB9LCB0cnVlKTtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHZtLCAnJGxpc3RlbmVycycsIG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oXCIkbGlzdGVuZXJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG5cdCAgICB9LCB0cnVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sICckYXR0cnMnLCBwYXJlbnREYXRhICYmIHBhcmVudERhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3QsIG51bGwsIHRydWUpO1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sICckbGlzdGVuZXJzJywgb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0LCBudWxsLCB0cnVlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbmRlck1peGluIChWdWUpIHtcblx0ICAvLyBpbnN0YWxsIHJ1bnRpbWUgY29udmVuaWVuY2UgaGVscGVyc1xuXHQgIGluc3RhbGxSZW5kZXJIZWxwZXJzKFZ1ZS5wcm90b3R5cGUpO1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuXHQgICAgcmV0dXJuIG5leHRUaWNrKGZuLCB0aGlzKVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3JlbmRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgcmVmID0gdm0uJG9wdGlvbnM7XG5cdCAgICB2YXIgcmVuZGVyID0gcmVmLnJlbmRlcjtcblx0ICAgIHZhciBfcGFyZW50Vm5vZGUgPSByZWYuX3BhcmVudFZub2RlO1xuXHRcblx0ICAgIC8vIHJlc2V0IF9yZW5kZXJlZCBmbGFnIG9uIHNsb3RzIGZvciBkdXBsaWNhdGUgc2xvdCBjaGVja1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHZtLiRzbG90cykge1xuXHQgICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgICAgICAgIHZtLiRzbG90c1trZXldLl9yZW5kZXJlZCA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKF9wYXJlbnRWbm9kZSkge1xuXHQgICAgICB2bS4kc2NvcGVkU2xvdHMgPSBfcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90cyB8fCBlbXB0eU9iamVjdDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBzZXQgcGFyZW50IHZub2RlLiB0aGlzIGFsbG93cyByZW5kZXIgZnVuY3Rpb25zIHRvIGhhdmUgYWNjZXNzXG5cdCAgICAvLyB0byB0aGUgZGF0YSBvbiB0aGUgcGxhY2Vob2xkZXIgbm9kZS5cblx0ICAgIHZtLiR2bm9kZSA9IF9wYXJlbnRWbm9kZTtcblx0ICAgIC8vIHJlbmRlciBzZWxmXG5cdCAgICB2YXIgdm5vZGU7XG5cdCAgICB0cnkge1xuXHQgICAgICB2bm9kZSA9IHJlbmRlci5jYWxsKHZtLl9yZW5kZXJQcm94eSwgdm0uJGNyZWF0ZUVsZW1lbnQpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJyZW5kZXJcIik7XG5cdCAgICAgIC8vIHJldHVybiBlcnJvciByZW5kZXIgcmVzdWx0LFxuXHQgICAgICAvLyBvciBwcmV2aW91cyB2bm9kZSB0byBwcmV2ZW50IHJlbmRlciBlcnJvciBjYXVzaW5nIGJsYW5rIGNvbXBvbmVudFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGlmICh2bS4kb3B0aW9ucy5yZW5kZXJFcnJvcikge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdm5vZGUgPSB2bS4kb3B0aW9ucy5yZW5kZXJFcnJvci5jYWxsKHZtLl9yZW5kZXJQcm94eSwgdm0uJGNyZWF0ZUVsZW1lbnQsIGUpO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJyZW5kZXJFcnJvclwiKTtcblx0ICAgICAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZub2RlID0gdm0uX3Zub2RlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2bm9kZSA9IHZtLl92bm9kZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcmV0dXJuIGVtcHR5IHZub2RlIGluIGNhc2UgdGhlIHJlbmRlciBmdW5jdGlvbiBlcnJvcmVkIG91dFxuXHQgICAgaWYgKCEodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkpIHtcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgJ011bHRpcGxlIHJvb3Qgbm9kZXMgcmV0dXJuZWQgZnJvbSByZW5kZXIgZnVuY3Rpb24uIFJlbmRlciBmdW5jdGlvbiAnICtcblx0ICAgICAgICAgICdzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHJvb3Qgbm9kZS4nLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIHZub2RlID0gY3JlYXRlRW1wdHlWTm9kZSgpO1xuXHQgICAgfVxuXHQgICAgLy8gc2V0IHBhcmVudFxuXHQgICAgdm5vZGUucGFyZW50ID0gX3BhcmVudFZub2RlO1xuXHQgICAgcmV0dXJuIHZub2RlXG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgdWlkJDMgPSAwO1xuXHRcblx0ZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcblx0ICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICAvLyBhIHVpZFxuXHQgICAgdm0uX3VpZCA9IHVpZCQzKys7XG5cdFxuXHQgICAgdmFyIHN0YXJ0VGFnLCBlbmRUYWc7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG5cdCAgICAgIHN0YXJ0VGFnID0gXCJ2dWUtcGVyZi1zdGFydDpcIiArICh2bS5fdWlkKTtcblx0ICAgICAgZW5kVGFnID0gXCJ2dWUtcGVyZi1lbmQ6XCIgKyAodm0uX3VpZCk7XG5cdCAgICAgIG1hcmsoc3RhcnRUYWcpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG5cdCAgICB2bS5faXNWdWUgPSB0cnVlO1xuXHQgICAgLy8gbWVyZ2Ugb3B0aW9uc1xuXHQgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5faXNDb21wb25lbnQpIHtcblx0ICAgICAgLy8gb3B0aW1pemUgaW50ZXJuYWwgY29tcG9uZW50IGluc3RhbnRpYXRpb25cblx0ICAgICAgLy8gc2luY2UgZHluYW1pYyBvcHRpb25zIG1lcmdpbmcgaXMgcHJldHR5IHNsb3csIGFuZCBub25lIG9mIHRoZVxuXHQgICAgICAvLyBpbnRlcm5hbCBjb21wb25lbnQgb3B0aW9ucyBuZWVkcyBzcGVjaWFsIHRyZWF0bWVudC5cblx0ICAgICAgaW5pdEludGVybmFsQ29tcG9uZW50KHZtLCBvcHRpb25zKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZtLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKFxuXHQgICAgICAgIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnModm0uY29uc3RydWN0b3IpLFxuXHQgICAgICAgIG9wdGlvbnMgfHwge30sXG5cdCAgICAgICAgdm1cblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpbml0UHJveHkodm0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdm0uX3JlbmRlclByb3h5ID0gdm07XG5cdCAgICB9XG5cdCAgICAvLyBleHBvc2UgcmVhbCBzZWxmXG5cdCAgICB2bS5fc2VsZiA9IHZtO1xuXHQgICAgaW5pdExpZmVjeWNsZSh2bSk7XG5cdCAgICBpbml0RXZlbnRzKHZtKTtcblx0ICAgIGluaXRSZW5kZXIodm0pO1xuXHQgICAgY2FsbEhvb2sodm0sICdiZWZvcmVDcmVhdGUnKTtcblx0ICAgIGluaXRJbmplY3Rpb25zKHZtKTsgLy8gcmVzb2x2ZSBpbmplY3Rpb25zIGJlZm9yZSBkYXRhL3Byb3BzXG5cdCAgICBpbml0U3RhdGUodm0pO1xuXHQgICAgaW5pdFByb3ZpZGUodm0pOyAvLyByZXNvbHZlIHByb3ZpZGUgYWZ0ZXIgZGF0YS9wcm9wc1xuXHQgICAgY2FsbEhvb2sodm0sICdjcmVhdGVkJyk7XG5cdFxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuXHQgICAgICB2bS5fbmFtZSA9IGZvcm1hdENvbXBvbmVudE5hbWUodm0sIGZhbHNlKTtcblx0ICAgICAgbWFyayhlbmRUYWcpO1xuXHQgICAgICBtZWFzdXJlKChcInZ1ZSBcIiArICh2bS5fbmFtZSkgKyBcIiBpbml0XCIpLCBzdGFydFRhZywgZW5kVGFnKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodm0uJG9wdGlvbnMuZWwpIHtcblx0ICAgICAgdm0uJG1vdW50KHZtLiRvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0SW50ZXJuYWxDb21wb25lbnQgKHZtLCBvcHRpb25zKSB7XG5cdCAgdmFyIG9wdHMgPSB2bS4kb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUodm0uY29uc3RydWN0b3Iub3B0aW9ucyk7XG5cdCAgLy8gZG9pbmcgdGhpcyBiZWNhdXNlIGl0J3MgZmFzdGVyIHRoYW4gZHluYW1pYyBlbnVtZXJhdGlvbi5cblx0ICB2YXIgcGFyZW50Vm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTtcblx0ICBvcHRzLnBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuXHQgIG9wdHMuX3BhcmVudFZub2RlID0gcGFyZW50Vm5vZGU7XG5cdCAgb3B0cy5fcGFyZW50RWxtID0gb3B0aW9ucy5fcGFyZW50RWxtO1xuXHQgIG9wdHMuX3JlZkVsbSA9IG9wdGlvbnMuX3JlZkVsbTtcblx0XG5cdCAgdmFyIHZub2RlQ29tcG9uZW50T3B0aW9ucyA9IHBhcmVudFZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG5cdCAgb3B0cy5wcm9wc0RhdGEgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhO1xuXHQgIG9wdHMuX3BhcmVudExpc3RlbmVycyA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy5saXN0ZW5lcnM7XG5cdCAgb3B0cy5fcmVuZGVyQ2hpbGRyZW4gPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW47XG5cdCAgb3B0cy5fY29tcG9uZW50VGFnID0gdm5vZGVDb21wb25lbnRPcHRpb25zLnRhZztcblx0XG5cdCAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG5cdCAgICBvcHRzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuXHQgICAgb3B0cy5zdGF0aWNSZW5kZXJGbnMgPSBvcHRpb25zLnN0YXRpY1JlbmRlckZucztcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMgKEN0b3IpIHtcblx0ICB2YXIgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucztcblx0ICBpZiAoQ3Rvci5zdXBlcikge1xuXHQgICAgdmFyIHN1cGVyT3B0aW9ucyA9IHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvci5zdXBlcik7XG5cdCAgICB2YXIgY2FjaGVkU3VwZXJPcHRpb25zID0gQ3Rvci5zdXBlck9wdGlvbnM7XG5cdCAgICBpZiAoc3VwZXJPcHRpb25zICE9PSBjYWNoZWRTdXBlck9wdGlvbnMpIHtcblx0ICAgICAgLy8gc3VwZXIgb3B0aW9uIGNoYW5nZWQsXG5cdCAgICAgIC8vIG5lZWQgdG8gcmVzb2x2ZSBuZXcgb3B0aW9ucy5cblx0ICAgICAgQ3Rvci5zdXBlck9wdGlvbnMgPSBzdXBlck9wdGlvbnM7XG5cdCAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbGF0ZS1tb2RpZmllZC9hdHRhY2hlZCBvcHRpb25zICgjNDk3Nilcblx0ICAgICAgdmFyIG1vZGlmaWVkT3B0aW9ucyA9IHJlc29sdmVNb2RpZmllZE9wdGlvbnMoQ3Rvcik7XG5cdCAgICAgIC8vIHVwZGF0ZSBiYXNlIGV4dGVuZCBvcHRpb25zXG5cdCAgICAgIGlmIChtb2RpZmllZE9wdGlvbnMpIHtcblx0ICAgICAgICBleHRlbmQoQ3Rvci5leHRlbmRPcHRpb25zLCBtb2RpZmllZE9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoc3VwZXJPcHRpb25zLCBDdG9yLmV4dGVuZE9wdGlvbnMpO1xuXHQgICAgICBpZiAob3B0aW9ucy5uYW1lKSB7XG5cdCAgICAgICAgb3B0aW9ucy5jb21wb25lbnRzW29wdGlvbnMubmFtZV0gPSBDdG9yO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBvcHRpb25zXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVNb2RpZmllZE9wdGlvbnMgKEN0b3IpIHtcblx0ICB2YXIgbW9kaWZpZWQ7XG5cdCAgdmFyIGxhdGVzdCA9IEN0b3Iub3B0aW9ucztcblx0ICB2YXIgZXh0ZW5kZWQgPSBDdG9yLmV4dGVuZE9wdGlvbnM7XG5cdCAgdmFyIHNlYWxlZCA9IEN0b3Iuc2VhbGVkT3B0aW9ucztcblx0ICBmb3IgKHZhciBrZXkgaW4gbGF0ZXN0KSB7XG5cdCAgICBpZiAobGF0ZXN0W2tleV0gIT09IHNlYWxlZFtrZXldKSB7XG5cdCAgICAgIGlmICghbW9kaWZpZWQpIHsgbW9kaWZpZWQgPSB7fTsgfVxuXHQgICAgICBtb2RpZmllZFtrZXldID0gZGVkdXBlKGxhdGVzdFtrZXldLCBleHRlbmRlZFtrZXldLCBzZWFsZWRba2V5XSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBtb2RpZmllZFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZWR1cGUgKGxhdGVzdCwgZXh0ZW5kZWQsIHNlYWxlZCkge1xuXHQgIC8vIGNvbXBhcmUgbGF0ZXN0IGFuZCBzZWFsZWQgdG8gZW5zdXJlIGxpZmVjeWNsZSBob29rcyB3b24ndCBiZSBkdXBsaWNhdGVkXG5cdCAgLy8gYmV0d2VlbiBtZXJnZXNcblx0ICBpZiAoQXJyYXkuaXNBcnJheShsYXRlc3QpKSB7XG5cdCAgICB2YXIgcmVzID0gW107XG5cdCAgICBzZWFsZWQgPSBBcnJheS5pc0FycmF5KHNlYWxlZCkgPyBzZWFsZWQgOiBbc2VhbGVkXTtcblx0ICAgIGV4dGVuZGVkID0gQXJyYXkuaXNBcnJheShleHRlbmRlZCkgPyBleHRlbmRlZCA6IFtleHRlbmRlZF07XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhdGVzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAvLyBwdXNoIG9yaWdpbmFsIG9wdGlvbnMgYW5kIG5vdCBzZWFsZWQgb3B0aW9ucyB0byBleGNsdWRlIGR1cGxpY2F0ZWQgb3B0aW9uc1xuXHQgICAgICBpZiAoZXh0ZW5kZWQuaW5kZXhPZihsYXRlc3RbaV0pID49IDAgfHwgc2VhbGVkLmluZGV4T2YobGF0ZXN0W2ldKSA8IDApIHtcblx0ICAgICAgICByZXMucHVzaChsYXRlc3RbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBsYXRlc3Rcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFZ1ZSAob3B0aW9ucykge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAhKHRoaXMgaW5zdGFuY2VvZiBWdWUpXG5cdCAgKSB7XG5cdCAgICB3YXJuKCdWdWUgaXMgYSBjb25zdHJ1Y3RvciBhbmQgc2hvdWxkIGJlIGNhbGxlZCB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkJyk7XG5cdCAgfVxuXHQgIHRoaXMuX2luaXQob3B0aW9ucyk7XG5cdH1cblx0XG5cdGluaXRNaXhpbihWdWUpO1xuXHRzdGF0ZU1peGluKFZ1ZSk7XG5cdGV2ZW50c01peGluKFZ1ZSk7XG5cdGxpZmVjeWNsZU1peGluKFZ1ZSk7XG5cdHJlbmRlck1peGluKFZ1ZSk7XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRVc2UgKFZ1ZSkge1xuXHQgIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG5cdCAgICB2YXIgaW5zdGFsbGVkUGx1Z2lucyA9ICh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zIHx8ICh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zID0gW10pKTtcblx0ICAgIGlmIChpbnN0YWxsZWRQbHVnaW5zLmluZGV4T2YocGx1Z2luKSA+IC0xKSB7XG5cdCAgICAgIHJldHVybiB0aGlzXG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcblx0ICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHBsdWdpbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG5cdCAgICB9XG5cdCAgICBpbnN0YWxsZWRQbHVnaW5zLnB1c2gocGx1Z2luKTtcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0TWl4aW4kMSAoVnVlKSB7XG5cdCAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5vcHRpb25zLCBtaXhpbik7XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdEV4dGVuZCAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG5cdCAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuXHQgICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuXHQgICAqL1xuXHQgIFZ1ZS5jaWQgPSAwO1xuXHQgIHZhciBjaWQgPSAxO1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuXHQgICAqL1xuXHQgIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuXHQgICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG5cdCAgICB2YXIgU3VwZXIgPSB0aGlzO1xuXHQgICAgdmFyIFN1cGVySWQgPSBTdXBlci5jaWQ7XG5cdCAgICB2YXIgY2FjaGVkQ3RvcnMgPSBleHRlbmRPcHRpb25zLl9DdG9yIHx8IChleHRlbmRPcHRpb25zLl9DdG9yID0ge30pO1xuXHQgICAgaWYgKGNhY2hlZEN0b3JzW1N1cGVySWRdKSB7XG5cdCAgICAgIHJldHVybiBjYWNoZWRDdG9yc1tTdXBlcklkXVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUpIHtcblx0ICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBTdWIgPSBmdW5jdGlvbiBWdWVDb21wb25lbnQgKG9wdGlvbnMpIHtcblx0ICAgICAgdGhpcy5faW5pdChvcHRpb25zKTtcblx0ICAgIH07XG5cdCAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuXHQgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1Yjtcblx0ICAgIFN1Yi5jaWQgPSBjaWQrKztcblx0ICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFxuXHQgICAgICBTdXBlci5vcHRpb25zLFxuXHQgICAgICBleHRlbmRPcHRpb25zXG5cdCAgICApO1xuXHQgICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cdFxuXHQgICAgLy8gRm9yIHByb3BzIGFuZCBjb21wdXRlZCBwcm9wZXJ0aWVzLCB3ZSBkZWZpbmUgdGhlIHByb3h5IGdldHRlcnMgb25cblx0ICAgIC8vIHRoZSBWdWUgaW5zdGFuY2VzIGF0IGV4dGVuc2lvbiB0aW1lLCBvbiB0aGUgZXh0ZW5kZWQgcHJvdG90eXBlLiBUaGlzXG5cdCAgICAvLyBhdm9pZHMgT2JqZWN0LmRlZmluZVByb3BlcnR5IGNhbGxzIGZvciBlYWNoIGluc3RhbmNlIGNyZWF0ZWQuXG5cdCAgICBpZiAoU3ViLm9wdGlvbnMucHJvcHMpIHtcblx0ICAgICAgaW5pdFByb3BzJDEoU3ViKTtcblx0ICAgIH1cblx0ICAgIGlmIChTdWIub3B0aW9ucy5jb21wdXRlZCkge1xuXHQgICAgICBpbml0Q29tcHV0ZWQkMShTdWIpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uL21peGluL3BsdWdpbiB1c2FnZVxuXHQgICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcblx0ICAgIFN1Yi5taXhpbiA9IFN1cGVyLm1peGluO1xuXHQgICAgU3ViLnVzZSA9IFN1cGVyLnVzZTtcblx0XG5cdCAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG5cdCAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG5cdCAgICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuXHQgICAgfSk7XG5cdCAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIHN1cGVyIG9wdGlvbnMgYXQgZXh0ZW5zaW9uIHRpbWUuXG5cdCAgICAvLyBsYXRlciBhdCBpbnN0YW50aWF0aW9uIHdlIGNhbiBjaGVjayBpZiBTdXBlcidzIG9wdGlvbnMgaGF2ZVxuXHQgICAgLy8gYmVlbiB1cGRhdGVkLlxuXHQgICAgU3ViLnN1cGVyT3B0aW9ucyA9IFN1cGVyLm9wdGlvbnM7XG5cdCAgICBTdWIuZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnM7XG5cdCAgICBTdWIuc2VhbGVkT3B0aW9ucyA9IGV4dGVuZCh7fSwgU3ViLm9wdGlvbnMpO1xuXHRcblx0ICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG5cdCAgICBjYWNoZWRDdG9yc1tTdXBlcklkXSA9IFN1Yjtcblx0ICAgIHJldHVybiBTdWJcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvcHMkMSAoQ29tcCkge1xuXHQgIHZhciBwcm9wcyA9IENvbXAub3B0aW9ucy5wcm9wcztcblx0ICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcblx0ICAgIHByb3h5KENvbXAucHJvdG90eXBlLCBcIl9wcm9wc1wiLCBrZXkpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdENvbXB1dGVkJDEgKENvbXApIHtcblx0ICB2YXIgY29tcHV0ZWQgPSBDb21wLm9wdGlvbnMuY29tcHV0ZWQ7XG5cdCAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG5cdCAgICBkZWZpbmVDb21wdXRlZChDb21wLnByb3RvdHlwZSwga2V5LCBjb21wdXRlZFtrZXldKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdEFzc2V0UmVnaXN0ZXJzIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMuXG5cdCAgICovXG5cdCAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKFxuXHQgICAgICBpZCxcblx0ICAgICAgZGVmaW5pdGlvblxuXHQgICAgKSB7XG5cdCAgICAgIGlmICghZGVmaW5pdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdHlwZSA9PT0gJ2NvbXBvbmVudCcpIHtcblx0ICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShpZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG5cdCAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBkZWZpbml0aW9uLm5hbWUgfHwgaWQ7XG5cdCAgICAgICAgICBkZWZpbml0aW9uID0gdGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChkZWZpbml0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHR5cGUgPT09ICdkaXJlY3RpdmUnICYmIHR5cGVvZiBkZWZpbml0aW9uID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBkZWZpbml0aW9uID0geyBiaW5kOiBkZWZpbml0aW9uLCB1cGRhdGU6IGRlZmluaXRpb24gfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XG5cdCAgICAgICAgcmV0dXJuIGRlZmluaXRpb25cblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBnZXRDb21wb25lbnROYW1lIChvcHRzKSB7XG5cdCAgcmV0dXJuIG9wdHMgJiYgKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hdGNoZXMgKHBhdHRlcm4sIG5hbWUpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkge1xuXHQgICAgcmV0dXJuIHBhdHRlcm4uaW5kZXhPZihuYW1lKSA+IC0xXG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KCcsJykuaW5kZXhPZihuYW1lKSA+IC0xXG5cdCAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkge1xuXHQgICAgcmV0dXJuIHBhdHRlcm4udGVzdChuYW1lKVxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgIHJldHVybiBmYWxzZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcnVuZUNhY2hlIChrZWVwQWxpdmVJbnN0YW5jZSwgZmlsdGVyKSB7XG5cdCAgdmFyIGNhY2hlID0ga2VlcEFsaXZlSW5zdGFuY2UuY2FjaGU7XG5cdCAgdmFyIGtleXMgPSBrZWVwQWxpdmVJbnN0YW5jZS5rZXlzO1xuXHQgIHZhciBfdm5vZGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5fdm5vZGU7XG5cdCAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG5cdCAgICB2YXIgY2FjaGVkTm9kZSA9IGNhY2hlW2tleV07XG5cdCAgICBpZiAoY2FjaGVkTm9kZSkge1xuXHQgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY2FjaGVkTm9kZS5jb21wb25lbnRPcHRpb25zKTtcblx0ICAgICAgaWYgKG5hbWUgJiYgIWZpbHRlcihuYW1lKSkge1xuXHQgICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBfdm5vZGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkgKFxuXHQgIGNhY2hlLFxuXHQgIGtleSxcblx0ICBrZXlzLFxuXHQgIGN1cnJlbnRcblx0KSB7XG5cdCAgdmFyIGNhY2hlZCQkMSA9IGNhY2hlW2tleV07XG5cdCAgaWYgKGNhY2hlZCQkMSAmJiAoIWN1cnJlbnQgfHwgY2FjaGVkJCQxLnRhZyAhPT0gY3VycmVudC50YWcpKSB7XG5cdCAgICBjYWNoZWQkJDEuY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKTtcblx0ICB9XG5cdCAgY2FjaGVba2V5XSA9IG51bGw7XG5cdCAgcmVtb3ZlKGtleXMsIGtleSk7XG5cdH1cblx0XG5cdHZhciBwYXR0ZXJuVHlwZXMgPSBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XTtcblx0XG5cdHZhciBLZWVwQWxpdmUgPSB7XG5cdCAgbmFtZTogJ2tlZXAtYWxpdmUnLFxuXHQgIGFic3RyYWN0OiB0cnVlLFxuXHRcblx0ICBwcm9wczoge1xuXHQgICAgaW5jbHVkZTogcGF0dGVyblR5cGVzLFxuXHQgICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLFxuXHQgICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdXG5cdCAgfSxcblx0XG5cdCAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCAoKSB7XG5cdCAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgIHRoaXMua2V5cyA9IFtdO1xuXHQgIH0sXG5cdFxuXHQgIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkICgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIGZvciAodmFyIGtleSBpbiB0aGlzJDEuY2FjaGUpIHtcblx0ICAgICAgcHJ1bmVDYWNoZUVudHJ5KHRoaXMkMS5jYWNoZSwga2V5LCB0aGlzJDEua2V5cyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCAoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB0aGlzLiR3YXRjaCgnaW5jbHVkZScsIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBtYXRjaGVzKHZhbCwgbmFtZSk7IH0pO1xuXHQgICAgfSk7XG5cdCAgICB0aGlzLiR3YXRjaCgnZXhjbHVkZScsIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiAhbWF0Y2hlcyh2YWwsIG5hbWUpOyB9KTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyICgpIHtcblx0ICAgIHZhciBzbG90ID0gdGhpcy4kc2xvdHMuZGVmYXVsdDtcblx0ICAgIHZhciB2bm9kZSA9IGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoc2xvdCk7XG5cdCAgICB2YXIgY29tcG9uZW50T3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG5cdCAgICBpZiAoY29tcG9uZW50T3B0aW9ucykge1xuXHQgICAgICAvLyBjaGVjayBwYXR0ZXJuXG5cdCAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnRPcHRpb25zKTtcblx0ICAgICAgdmFyIHJlZiA9IHRoaXM7XG5cdCAgICAgIHZhciBpbmNsdWRlID0gcmVmLmluY2x1ZGU7XG5cdCAgICAgIHZhciBleGNsdWRlID0gcmVmLmV4Y2x1ZGU7XG5cdCAgICAgIGlmIChcblx0ICAgICAgICAvLyBub3QgaW5jbHVkZWRcblx0ICAgICAgICAoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpKSB8fFxuXHQgICAgICAgIC8vIGV4Y2x1ZGVkXG5cdCAgICAgICAgKGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKVxuXHQgICAgICApIHtcblx0ICAgICAgICByZXR1cm4gdm5vZGVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHJlZiQxID0gdGhpcztcblx0ICAgICAgdmFyIGNhY2hlID0gcmVmJDEuY2FjaGU7XG5cdCAgICAgIHZhciBrZXlzID0gcmVmJDEua2V5cztcblx0ICAgICAgdmFyIGtleSA9IHZub2RlLmtleSA9PSBudWxsXG5cdCAgICAgICAgLy8gc2FtZSBjb25zdHJ1Y3RvciBtYXkgZ2V0IHJlZ2lzdGVyZWQgYXMgZGlmZmVyZW50IGxvY2FsIGNvbXBvbmVudHNcblx0ICAgICAgICAvLyBzbyBjaWQgYWxvbmUgaXMgbm90IGVub3VnaCAoIzMyNjkpXG5cdCAgICAgICAgPyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkICsgKGNvbXBvbmVudE9wdGlvbnMudGFnID8gKFwiOjpcIiArIChjb21wb25lbnRPcHRpb25zLnRhZykpIDogJycpXG5cdCAgICAgICAgOiB2bm9kZS5rZXk7XG5cdCAgICAgIGlmIChjYWNoZVtrZXldKSB7XG5cdCAgICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBjYWNoZVtrZXldLmNvbXBvbmVudEluc3RhbmNlO1xuXHQgICAgICAgIC8vIG1ha2UgY3VycmVudCBrZXkgZnJlc2hlc3Rcblx0ICAgICAgICByZW1vdmUoa2V5cywga2V5KTtcblx0ICAgICAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjYWNoZVtrZXldID0gdm5vZGU7XG5cdCAgICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICAgICAgLy8gcHJ1bmUgb2xkZXN0IGVudHJ5XG5cdCAgICAgICAgaWYgKHRoaXMubWF4ICYmIGtleXMubGVuZ3RoID4gcGFyc2VJbnQodGhpcy5tYXgpKSB7XG5cdCAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoY2FjaGUsIGtleXNbMF0sIGtleXMsIHRoaXMuX3Zub2RlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2bm9kZSB8fCAoc2xvdCAmJiBzbG90WzBdKVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGJ1aWx0SW5Db21wb25lbnRzID0ge1xuXHQgIEtlZXBBbGl2ZTogS2VlcEFsaXZlXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdEdsb2JhbEFQSSAoVnVlKSB7XG5cdCAgLy8gY29uZmlnXG5cdCAgdmFyIGNvbmZpZ0RlZiA9IHt9O1xuXHQgIGNvbmZpZ0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25maWc7IH07XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGNvbmZpZ0RlZi5zZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgJ0RvIG5vdCByZXBsYWNlIHRoZSBWdWUuY29uZmlnIG9iamVjdCwgc2V0IGluZGl2aWR1YWwgZmllbGRzIGluc3RlYWQuJ1xuXHQgICAgICApO1xuXHQgICAgfTtcblx0ICB9XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ2NvbmZpZycsIGNvbmZpZ0RlZik7XG5cdFxuXHQgIC8vIGV4cG9zZWQgdXRpbCBtZXRob2RzLlxuXHQgIC8vIE5PVEU6IHRoZXNlIGFyZSBub3QgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBwdWJsaWMgQVBJIC0gYXZvaWQgcmVseWluZyBvblxuXHQgIC8vIHRoZW0gdW5sZXNzIHlvdSBhcmUgYXdhcmUgb2YgdGhlIHJpc2suXG5cdCAgVnVlLnV0aWwgPSB7XG5cdCAgICB3YXJuOiB3YXJuLFxuXHQgICAgZXh0ZW5kOiBleHRlbmQsXG5cdCAgICBtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcblx0ICAgIGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5zZXQgPSBzZXQ7XG5cdCAgVnVlLmRlbGV0ZSA9IGRlbDtcblx0ICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblx0XG5cdCAgVnVlLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIFZ1ZS5vcHRpb25zW3R5cGUgKyAncyddID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9KTtcblx0XG5cdCAgLy8gdGhpcyBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBcImJhc2VcIiBjb25zdHJ1Y3RvciB0byBleHRlbmQgYWxsIHBsYWluLW9iamVjdFxuXHQgIC8vIGNvbXBvbmVudHMgd2l0aCBpbiBXZWV4J3MgbXVsdGktaW5zdGFuY2Ugc2NlbmFyaW9zLlxuXHQgIFZ1ZS5vcHRpb25zLl9iYXNlID0gVnVlO1xuXHRcblx0ICBleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgYnVpbHRJbkNvbXBvbmVudHMpO1xuXHRcblx0ICBpbml0VXNlKFZ1ZSk7XG5cdCAgaW5pdE1peGluJDEoVnVlKTtcblx0ICBpbml0RXh0ZW5kKFZ1ZSk7XG5cdCAgaW5pdEFzc2V0UmVnaXN0ZXJzKFZ1ZSk7XG5cdH1cblx0XG5cdGluaXRHbG9iYWxBUEkoVnVlKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGlzU2VydmVyJywge1xuXHQgIGdldDogaXNTZXJ2ZXJSZW5kZXJpbmdcblx0fSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRzc3JDb250ZXh0Jywge1xuXHQgIGdldDogZnVuY3Rpb24gZ2V0ICgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICByZXR1cm4gdGhpcy4kdm5vZGUgJiYgdGhpcy4kdm5vZGUuc3NyQ29udGV4dFxuXHQgIH1cblx0fSk7XG5cdFxuXHQvLyBleHBvc2UgRnVuY3Rpb25hbFJlbmRlckNvbnRleHQgZm9yIHNzciBydW50aW1lIGhlbHBlciBpbnN0YWxsYXRpb25cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ0Z1bmN0aW9uYWxSZW5kZXJDb250ZXh0Jywge1xuXHQgIHZhbHVlOiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dFxuXHR9KTtcblx0XG5cdFZ1ZS52ZXJzaW9uID0gJzIuNS4xNic7XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIHRoZXNlIGFyZSByZXNlcnZlZCBmb3Igd2ViIGJlY2F1c2UgdGhleSBhcmUgZGlyZWN0bHkgY29tcGlsZWQgYXdheVxuXHQvLyBkdXJpbmcgdGVtcGxhdGUgY29tcGlsYXRpb25cblx0dmFyIGlzUmVzZXJ2ZWRBdHRyID0gbWFrZU1hcCgnc3R5bGUsY2xhc3MnKTtcblx0XG5cdC8vIGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYmUgdXNpbmcgcHJvcHMgZm9yIGJpbmRpbmdcblx0dmFyIGFjY2VwdFZhbHVlID0gbWFrZU1hcCgnaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcycpO1xuXHR2YXIgbXVzdFVzZVByb3AgPSBmdW5jdGlvbiAodGFnLCB0eXBlLCBhdHRyKSB7XG5cdCAgcmV0dXJuIChcblx0ICAgIChhdHRyID09PSAndmFsdWUnICYmIGFjY2VwdFZhbHVlKHRhZykpICYmIHR5cGUgIT09ICdidXR0b24nIHx8XG5cdCAgICAoYXR0ciA9PT0gJ3NlbGVjdGVkJyAmJiB0YWcgPT09ICdvcHRpb24nKSB8fFxuXHQgICAgKGF0dHIgPT09ICdjaGVja2VkJyAmJiB0YWcgPT09ICdpbnB1dCcpIHx8XG5cdCAgICAoYXR0ciA9PT0gJ211dGVkJyAmJiB0YWcgPT09ICd2aWRlbycpXG5cdCAgKVxuXHR9O1xuXHRcblx0dmFyIGlzRW51bWVyYXRlZEF0dHIgPSBtYWtlTWFwKCdjb250ZW50ZWRpdGFibGUsZHJhZ2dhYmxlLHNwZWxsY2hlY2snKTtcblx0XG5cdHZhciBpc0Jvb2xlYW5BdHRyID0gbWFrZU1hcChcblx0ICAnYWxsb3dmdWxsc2NyZWVuLGFzeW5jLGF1dG9mb2N1cyxhdXRvcGxheSxjaGVja2VkLGNvbXBhY3QsY29udHJvbHMsZGVjbGFyZSwnICtcblx0ICAnZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLCcgK1xuXHQgICdlbmFibGVkLGZvcm1ub3ZhbGlkYXRlLGhpZGRlbixpbmRldGVybWluYXRlLGluZXJ0LGlzbWFwLGl0ZW1zY29wZSxsb29wLG11bHRpcGxlLCcgK1xuXHQgICdtdXRlZCxub2hyZWYsbm9yZXNpemUsbm9zaGFkZSxub3ZhbGlkYXRlLG5vd3JhcCxvcGVuLHBhdXNlb25leGl0LHJlYWRvbmx5LCcgK1xuXHQgICdyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLCcgK1xuXHQgICd0cnVlc3BlZWQsdHlwZW11c3RtYXRjaCx2aXNpYmxlJ1xuXHQpO1xuXHRcblx0dmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG5cdFxuXHR2YXIgaXNYbGluayA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgcmV0dXJuIG5hbWUuY2hhckF0KDUpID09PSAnOicgJiYgbmFtZS5zbGljZSgwLCA1KSA9PT0gJ3hsaW5rJ1xuXHR9O1xuXHRcblx0dmFyIGdldFhsaW5rUHJvcCA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgcmV0dXJuIGlzWGxpbmsobmFtZSkgPyBuYW1lLnNsaWNlKDYsIG5hbWUubGVuZ3RoKSA6ICcnXG5cdH07XG5cdFxuXHR2YXIgaXNGYWxzeUF0dHJWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICByZXR1cm4gdmFsID09IG51bGwgfHwgdmFsID09PSBmYWxzZVxuXHR9O1xuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBnZW5DbGFzc0ZvclZub2RlICh2bm9kZSkge1xuXHQgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcblx0ICB2YXIgcGFyZW50Tm9kZSA9IHZub2RlO1xuXHQgIHZhciBjaGlsZE5vZGUgPSB2bm9kZTtcblx0ICB3aGlsZSAoaXNEZWYoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuXHQgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcblx0ICAgIGlmIChjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEpIHtcblx0ICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGNoaWxkTm9kZS5kYXRhLCBkYXRhKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2hpbGUgKGlzRGVmKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHtcblx0ICAgIGlmIChwYXJlbnROb2RlICYmIHBhcmVudE5vZGUuZGF0YSkge1xuXHQgICAgICBkYXRhID0gbWVyZ2VDbGFzc0RhdGEoZGF0YSwgcGFyZW50Tm9kZS5kYXRhKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlbmRlckNsYXNzKGRhdGEuc3RhdGljQ2xhc3MsIGRhdGEuY2xhc3MpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQ2xhc3NEYXRhIChjaGlsZCwgcGFyZW50KSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBjb25jYXQoY2hpbGQuc3RhdGljQ2xhc3MsIHBhcmVudC5zdGF0aWNDbGFzcyksXG5cdCAgICBjbGFzczogaXNEZWYoY2hpbGQuY2xhc3MpXG5cdCAgICAgID8gW2NoaWxkLmNsYXNzLCBwYXJlbnQuY2xhc3NdXG5cdCAgICAgIDogcGFyZW50LmNsYXNzXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW5kZXJDbGFzcyAoXG5cdCAgc3RhdGljQ2xhc3MsXG5cdCAgZHluYW1pY0NsYXNzXG5cdCkge1xuXHQgIGlmIChpc0RlZihzdGF0aWNDbGFzcykgfHwgaXNEZWYoZHluYW1pY0NsYXNzKSkge1xuXHQgICAgcmV0dXJuIGNvbmNhdChzdGF0aWNDbGFzcywgc3RyaW5naWZ5Q2xhc3MoZHluYW1pY0NsYXNzKSlcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICByZXR1cm4gJydcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29uY2F0IChhLCBiKSB7XG5cdCAgcmV0dXJuIGEgPyBiID8gKGEgKyAnICcgKyBiKSA6IGEgOiAoYiB8fCAnJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RyaW5naWZ5Q2xhc3MgKHZhbHVlKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5naWZ5QXJyYXkodmFsdWUpXG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBzdHJpbmdpZnlPYmplY3QodmFsdWUpXG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWVcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICByZXR1cm4gJydcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RyaW5naWZ5QXJyYXkgKHZhbHVlKSB7XG5cdCAgdmFyIHJlcyA9ICcnO1xuXHQgIHZhciBzdHJpbmdpZmllZDtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaWYgKGlzRGVmKHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5Q2xhc3ModmFsdWVbaV0pKSAmJiBzdHJpbmdpZmllZCAhPT0gJycpIHtcblx0ICAgICAgaWYgKHJlcykgeyByZXMgKz0gJyAnOyB9XG5cdCAgICAgIHJlcyArPSBzdHJpbmdpZmllZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdHJpbmdpZnlPYmplY3QgKHZhbHVlKSB7XG5cdCAgdmFyIHJlcyA9ICcnO1xuXHQgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHQgICAgaWYgKHZhbHVlW2tleV0pIHtcblx0ICAgICAgaWYgKHJlcykgeyByZXMgKz0gJyAnOyB9XG5cdCAgICAgIHJlcyArPSBrZXk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgbmFtZXNwYWNlTWFwID0ge1xuXHQgIHN2ZzogJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcblx0ICBtYXRoOiAnaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCdcblx0fTtcblx0XG5cdHZhciBpc0hUTUxUYWcgPSBtYWtlTWFwKFxuXHQgICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSwnICtcblx0ICAnYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGdyb3VwLG5hdixzZWN0aW9uLCcgK1xuXHQgICdkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCwnICtcblx0ICAnYSxiLGFiYnIsYmRpLGJkbyxicixjaXRlLGNvZGUsZGF0YSxkZm4sZW0saSxrYmQsbWFyayxxLHJwLHJ0LHJ0YyxydWJ5LCcgK1xuXHQgICdzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCx0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbywnICtcblx0ICAnZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsJyArXG5cdCAgJ2NhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLHRoLHRyLCcgK1xuXHQgICdidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsb3B0aW9uLCcgK1xuXHQgICdvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLCcgK1xuXHQgICdkZXRhaWxzLGRpYWxvZyxtZW51LG1lbnVpdGVtLHN1bW1hcnksJyArXG5cdCAgJ2NvbnRlbnQsZWxlbWVudCxzaGFkb3csdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnXG5cdCk7XG5cdFxuXHQvLyB0aGlzIG1hcCBpcyBpbnRlbnRpb25hbGx5IHNlbGVjdGl2ZSwgb25seSBjb3ZlcmluZyBTVkcgZWxlbWVudHMgdGhhdCBtYXlcblx0Ly8gY29udGFpbiBjaGlsZCBlbGVtZW50cy5cblx0dmFyIGlzU1ZHID0gbWFrZU1hcChcblx0ICAnc3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLCcgK1xuXHQgICdmb3JlaWduT2JqZWN0LGcsZ2x5cGgsaW1hZ2UsbGluZSxtYXJrZXIsbWFzayxtaXNzaW5nLWdseXBoLHBhdGgscGF0dGVybiwnICtcblx0ICAncG9seWdvbixwb2x5bGluZSxyZWN0LHN3aXRjaCxzeW1ib2wsdGV4dCx0ZXh0cGF0aCx0c3Bhbix1c2UsdmlldycsXG5cdCAgdHJ1ZVxuXHQpO1xuXHRcblx0XG5cdFxuXHR2YXIgaXNSZXNlcnZlZFRhZyA9IGZ1bmN0aW9uICh0YWcpIHtcblx0ICByZXR1cm4gaXNIVE1MVGFnKHRhZykgfHwgaXNTVkcodGFnKVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0VGFnTmFtZXNwYWNlICh0YWcpIHtcblx0ICBpZiAoaXNTVkcodGFnKSkge1xuXHQgICAgcmV0dXJuICdzdmcnXG5cdCAgfVxuXHQgIC8vIGJhc2ljIHN1cHBvcnQgZm9yIE1hdGhNTFxuXHQgIC8vIG5vdGUgaXQgZG9lc24ndCBzdXBwb3J0IG90aGVyIE1hdGhNTCBlbGVtZW50cyBiZWluZyBjb21wb25lbnQgcm9vdHNcblx0ICBpZiAodGFnID09PSAnbWF0aCcpIHtcblx0ICAgIHJldHVybiAnbWF0aCdcblx0ICB9XG5cdH1cblx0XG5cdHZhciB1bmtub3duRWxlbWVudENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCAodGFnKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFpbkJyb3dzZXIpIHtcblx0ICAgIHJldHVybiB0cnVlXG5cdCAgfVxuXHQgIGlmIChpc1Jlc2VydmVkVGFnKHRhZykpIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0ICB0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddICE9IG51bGwpIHtcblx0ICAgIHJldHVybiB1bmtub3duRWxlbWVudENhY2hlW3RhZ11cblx0ICB9XG5cdCAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuXHQgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcblx0ICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcblx0ICAgIHJldHVybiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddID0gKFxuXHQgICAgICBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fFxuXHQgICAgICBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50XG5cdCAgICApKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gKHVua25vd25FbGVtZW50Q2FjaGVbdGFnXSA9IC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkpXG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgaXNUZXh0SW5wdXRUeXBlID0gbWFrZU1hcCgndGV4dCxudW1iZXIscGFzc3dvcmQsc2VhcmNoLGVtYWlsLHRlbCx1cmwnKTtcblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxuXHQgKi9cblx0ZnVuY3Rpb24gcXVlcnkgKGVsKSB7XG5cdCAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhciBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuXHQgICAgaWYgKCFzZWxlY3RlZCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBlbFxuXHQgICAgICApO1xuXHQgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jylcblx0ICAgIH1cblx0ICAgIHJldHVybiBzZWxlY3RlZFxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZWxcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlRWxlbWVudCQxICh0YWdOYW1lLCB2bm9kZSkge1xuXHQgIHZhciBlbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXHQgIGlmICh0YWdOYW1lICE9PSAnc2VsZWN0Jykge1xuXHQgICAgcmV0dXJuIGVsbVxuXHQgIH1cblx0ICAvLyBmYWxzZSBvciBudWxsIHdpbGwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgYnV0IHVuZGVmaW5lZCB3aWxsIG5vdFxuXHQgIGlmICh2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEuYXR0cnMgJiYgdm5vZGUuZGF0YS5hdHRycy5tdWx0aXBsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICBlbG0uc2V0QXR0cmlidXRlKCdtdWx0aXBsZScsICdtdWx0aXBsZScpO1xuXHQgIH1cblx0ICByZXR1cm4gZWxtXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyAobmFtZXNwYWNlLCB0YWdOYW1lKSB7XG5cdCAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2VNYXBbbmFtZXNwYWNlXSwgdGFnTmFtZSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlVGV4dE5vZGUgKHRleHQpIHtcblx0ICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dClcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ29tbWVudCAodGV4dCkge1xuXHQgIHJldHVybiBkb2N1bWVudC5jcmVhdGVDb21tZW50KHRleHQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluc2VydEJlZm9yZSAocGFyZW50Tm9kZSwgbmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSkge1xuXHQgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDaGlsZCAobm9kZSwgY2hpbGQpIHtcblx0ICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXBwZW5kQ2hpbGQgKG5vZGUsIGNoaWxkKSB7XG5cdCAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcmVudE5vZGUgKG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZS5wYXJlbnROb2RlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5leHRTaWJsaW5nIChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUubmV4dFNpYmxpbmdcblx0fVxuXHRcblx0ZnVuY3Rpb24gdGFnTmFtZSAobm9kZSkge1xuXHQgIHJldHVybiBub2RlLnRhZ05hbWVcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQgKG5vZGUsIHRleHQpIHtcblx0ICBub2RlLnRleHRDb250ZW50ID0gdGV4dDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0U3R5bGVTY29wZSAobm9kZSwgc2NvcGVJZCkge1xuXHQgIG5vZGUuc2V0QXR0cmlidXRlKHNjb3BlSWQsICcnKTtcblx0fVxuXHRcblx0XG5cdHZhciBub2RlT3BzID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0Y3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCQxLFxuXHRcdGNyZWF0ZUVsZW1lbnROUzogY3JlYXRlRWxlbWVudE5TLFxuXHRcdGNyZWF0ZVRleHROb2RlOiBjcmVhdGVUZXh0Tm9kZSxcblx0XHRjcmVhdGVDb21tZW50OiBjcmVhdGVDb21tZW50LFxuXHRcdGluc2VydEJlZm9yZTogaW5zZXJ0QmVmb3JlLFxuXHRcdHJlbW92ZUNoaWxkOiByZW1vdmVDaGlsZCxcblx0XHRhcHBlbmRDaGlsZDogYXBwZW5kQ2hpbGQsXG5cdFx0cGFyZW50Tm9kZTogcGFyZW50Tm9kZSxcblx0XHRuZXh0U2libGluZzogbmV4dFNpYmxpbmcsXG5cdFx0dGFnTmFtZTogdGFnTmFtZSxcblx0XHRzZXRUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cdFx0c2V0U3R5bGVTY29wZTogc2V0U3R5bGVTY29wZVxuXHR9KTtcblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHJlZiA9IHtcblx0ICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSAoXywgdm5vZGUpIHtcblx0ICAgIHJlZ2lzdGVyUmVmKHZub2RlKTtcblx0ICB9LFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICAgIGlmIChvbGRWbm9kZS5kYXRhLnJlZiAhPT0gdm5vZGUuZGF0YS5yZWYpIHtcblx0ICAgICAgcmVnaXN0ZXJSZWYob2xkVm5vZGUsIHRydWUpO1xuXHQgICAgICByZWdpc3RlclJlZih2bm9kZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkge1xuXHQgICAgcmVnaXN0ZXJSZWYodm5vZGUsIHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVnaXN0ZXJSZWYgKHZub2RlLCBpc1JlbW92YWwpIHtcblx0ICB2YXIga2V5ID0gdm5vZGUuZGF0YS5yZWY7XG5cdCAgaWYgKCFpc0RlZihrZXkpKSB7IHJldHVybiB9XG5cdFxuXHQgIHZhciB2bSA9IHZub2RlLmNvbnRleHQ7XG5cdCAgdmFyIHJlZiA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlIHx8IHZub2RlLmVsbTtcblx0ICB2YXIgcmVmcyA9IHZtLiRyZWZzO1xuXHQgIGlmIChpc1JlbW92YWwpIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KHJlZnNba2V5XSkpIHtcblx0ICAgICAgcmVtb3ZlKHJlZnNba2V5XSwgcmVmKTtcblx0ICAgIH0gZWxzZSBpZiAocmVmc1trZXldID09PSByZWYpIHtcblx0ICAgICAgcmVmc1trZXldID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAodm5vZGUuZGF0YS5yZWZJbkZvcikge1xuXHQgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVmc1trZXldKSkge1xuXHQgICAgICAgIHJlZnNba2V5XSA9IFtyZWZdO1xuXHQgICAgICB9IGVsc2UgaWYgKHJlZnNba2V5XS5pbmRleE9mKHJlZikgPCAwKSB7XG5cdCAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICAgICAgcmVmc1trZXldLnB1c2gocmVmKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVmc1trZXldID0gcmVmO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFZpcnR1YWwgRE9NIHBhdGNoaW5nIGFsZ29yaXRobSBiYXNlZCBvbiBTbmFiYmRvbSBieVxuXHQgKiBTaW1vbiBGcmlpcyBWaW5kdW0gKEBwYWxkZXBpbmQpXG5cdCAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuXHQgKiBodHRwczovL2dpdGh1Yi5jb20vcGFsZGVwaW5kL3NuYWJiZG9tL2Jsb2IvbWFzdGVyL0xJQ0VOU0Vcblx0ICpcblx0ICogbW9kaWZpZWQgYnkgRXZhbiBZb3UgKEB5eXg5OTA4MDMpXG5cdCAqXG5cdCAqIE5vdCB0eXBlLWNoZWNraW5nIHRoaXMgYmVjYXVzZSB0aGlzIGZpbGUgaXMgcGVyZi1jcml0aWNhbCBhbmQgdGhlIGNvc3Rcblx0ICogb2YgbWFraW5nIGZsb3cgdW5kZXJzdGFuZCBpdCBpcyBub3Qgd29ydGggaXQuXG5cdCAqL1xuXHRcblx0dmFyIGVtcHR5Tm9kZSA9IG5ldyBWTm9kZSgnJywge30sIFtdKTtcblx0XG5cdHZhciBob29rcyA9IFsnY3JlYXRlJywgJ2FjdGl2YXRlJywgJ3VwZGF0ZScsICdyZW1vdmUnLCAnZGVzdHJveSddO1xuXHRcblx0ZnVuY3Rpb24gc2FtZVZub2RlIChhLCBiKSB7XG5cdCAgcmV0dXJuIChcblx0ICAgIGEua2V5ID09PSBiLmtleSAmJiAoXG5cdCAgICAgIChcblx0ICAgICAgICBhLnRhZyA9PT0gYi50YWcgJiZcblx0ICAgICAgICBhLmlzQ29tbWVudCA9PT0gYi5pc0NvbW1lbnQgJiZcblx0ICAgICAgICBpc0RlZihhLmRhdGEpID09PSBpc0RlZihiLmRhdGEpICYmXG5cdCAgICAgICAgc2FtZUlucHV0VHlwZShhLCBiKVxuXHQgICAgICApIHx8IChcblx0ICAgICAgICBpc1RydWUoYS5pc0FzeW5jUGxhY2Vob2xkZXIpICYmXG5cdCAgICAgICAgYS5hc3luY0ZhY3RvcnkgPT09IGIuYXN5bmNGYWN0b3J5ICYmXG5cdCAgICAgICAgaXNVbmRlZihiLmFzeW5jRmFjdG9yeS5lcnJvcilcblx0ICAgICAgKVxuXHQgICAgKVxuXHQgIClcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2FtZUlucHV0VHlwZSAoYSwgYikge1xuXHQgIGlmIChhLnRhZyAhPT0gJ2lucHV0JykgeyByZXR1cm4gdHJ1ZSB9XG5cdCAgdmFyIGk7XG5cdCAgdmFyIHR5cGVBID0gaXNEZWYoaSA9IGEuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTtcblx0ICB2YXIgdHlwZUIgPSBpc0RlZihpID0gYi5kYXRhKSAmJiBpc0RlZihpID0gaS5hdHRycykgJiYgaS50eXBlO1xuXHQgIHJldHVybiB0eXBlQSA9PT0gdHlwZUIgfHwgaXNUZXh0SW5wdXRUeXBlKHR5cGVBKSAmJiBpc1RleHRJbnB1dFR5cGUodHlwZUIpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUtleVRvT2xkSWR4IChjaGlsZHJlbiwgYmVnaW5JZHgsIGVuZElkeCkge1xuXHQgIHZhciBpLCBrZXk7XG5cdCAgdmFyIG1hcCA9IHt9O1xuXHQgIGZvciAoaSA9IGJlZ2luSWR4OyBpIDw9IGVuZElkeDsgKytpKSB7XG5cdCAgICBrZXkgPSBjaGlsZHJlbltpXS5rZXk7XG5cdCAgICBpZiAoaXNEZWYoa2V5KSkgeyBtYXBba2V5XSA9IGk7IH1cblx0ICB9XG5cdCAgcmV0dXJuIG1hcFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVQYXRjaEZ1bmN0aW9uIChiYWNrZW5kKSB7XG5cdCAgdmFyIGksIGo7XG5cdCAgdmFyIGNicyA9IHt9O1xuXHRcblx0ICB2YXIgbW9kdWxlcyA9IGJhY2tlbmQubW9kdWxlcztcblx0ICB2YXIgbm9kZU9wcyA9IGJhY2tlbmQubm9kZU9wcztcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgKytpKSB7XG5cdCAgICBjYnNbaG9va3NbaV1dID0gW107XG5cdCAgICBmb3IgKGogPSAwOyBqIDwgbW9kdWxlcy5sZW5ndGg7ICsraikge1xuXHQgICAgICBpZiAoaXNEZWYobW9kdWxlc1tqXVtob29rc1tpXV0pKSB7XG5cdCAgICAgICAgY2JzW2hvb2tzW2ldXS5wdXNoKG1vZHVsZXNbal1baG9va3NbaV1dKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZW1wdHlOb2RlQXQgKGVsbSkge1xuXHQgICAgcmV0dXJuIG5ldyBWTm9kZShub2RlT3BzLnRhZ05hbWUoZWxtKS50b0xvd2VyQ2FzZSgpLCB7fSwgW10sIHVuZGVmaW5lZCwgZWxtKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlUm1DYiAoY2hpbGRFbG0sIGxpc3RlbmVycykge1xuXHQgICAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcblx0ICAgICAgaWYgKC0tcmVtb3ZlLmxpc3RlbmVycyA9PT0gMCkge1xuXHQgICAgICAgIHJlbW92ZU5vZGUoY2hpbGRFbG0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZW1vdmUubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuXHQgICAgcmV0dXJuIHJlbW92ZVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVtb3ZlTm9kZSAoZWwpIHtcblx0ICAgIHZhciBwYXJlbnQgPSBub2RlT3BzLnBhcmVudE5vZGUoZWwpO1xuXHQgICAgLy8gZWxlbWVudCBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gcmVtb3ZlZCBkdWUgdG8gdi1odG1sIC8gdi10ZXh0XG5cdCAgICBpZiAoaXNEZWYocGFyZW50KSkge1xuXHQgICAgICBub2RlT3BzLnJlbW92ZUNoaWxkKHBhcmVudCwgZWwpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCQkMSAodm5vZGUsIGluVlByZSkge1xuXHQgICAgcmV0dXJuIChcblx0ICAgICAgIWluVlByZSAmJlxuXHQgICAgICAhdm5vZGUubnMgJiZcblx0ICAgICAgIShcblx0ICAgICAgICBjb25maWcuaWdub3JlZEVsZW1lbnRzLmxlbmd0aCAmJlxuXHQgICAgICAgIGNvbmZpZy5pZ25vcmVkRWxlbWVudHMuc29tZShmdW5jdGlvbiAoaWdub3JlKSB7XG5cdCAgICAgICAgICByZXR1cm4gaXNSZWdFeHAoaWdub3JlKVxuXHQgICAgICAgICAgICA/IGlnbm9yZS50ZXN0KHZub2RlLnRhZylcblx0ICAgICAgICAgICAgOiBpZ25vcmUgPT09IHZub2RlLnRhZ1xuXHQgICAgICAgIH0pXG5cdCAgICAgICkgJiZcblx0ICAgICAgY29uZmlnLmlzVW5rbm93bkVsZW1lbnQodm5vZGUudGFnKVxuXHQgICAgKVxuXHQgIH1cblx0XG5cdCAgdmFyIGNyZWF0aW5nRWxtSW5WUHJlID0gMDtcblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlRWxtIChcblx0ICAgIHZub2RlLFxuXHQgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLFxuXHQgICAgcGFyZW50RWxtLFxuXHQgICAgcmVmRWxtLFxuXHQgICAgbmVzdGVkLFxuXHQgICAgb3duZXJBcnJheSxcblx0ICAgIGluZGV4XG5cdCAgKSB7XG5cdCAgICBpZiAoaXNEZWYodm5vZGUuZWxtKSAmJiBpc0RlZihvd25lckFycmF5KSkge1xuXHQgICAgICAvLyBUaGlzIHZub2RlIHdhcyB1c2VkIGluIGEgcHJldmlvdXMgcmVuZGVyIVxuXHQgICAgICAvLyBub3cgaXQncyB1c2VkIGFzIGEgbmV3IG5vZGUsIG92ZXJ3cml0aW5nIGl0cyBlbG0gd291bGQgY2F1c2Vcblx0ICAgICAgLy8gcG90ZW50aWFsIHBhdGNoIGVycm9ycyBkb3duIHRoZSByb2FkIHdoZW4gaXQncyB1c2VkIGFzIGFuIGluc2VydGlvblxuXHQgICAgICAvLyByZWZlcmVuY2Ugbm9kZS4gSW5zdGVhZCwgd2UgY2xvbmUgdGhlIG5vZGUgb24tZGVtYW5kIGJlZm9yZSBjcmVhdGluZ1xuXHQgICAgICAvLyBhc3NvY2lhdGVkIERPTSBlbGVtZW50IGZvciBpdC5cblx0ICAgICAgdm5vZGUgPSBvd25lckFycmF5W2luZGV4XSA9IGNsb25lVk5vZGUodm5vZGUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZub2RlLmlzUm9vdEluc2VydCA9ICFuZXN0ZWQ7IC8vIGZvciB0cmFuc2l0aW9uIGVudGVyIGNoZWNrXG5cdCAgICBpZiAoY3JlYXRlQ29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcblx0ICAgIHZhciB0YWcgPSB2bm9kZS50YWc7XG5cdCAgICBpZiAoaXNEZWYodGFnKSkge1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGlmIChkYXRhICYmIGRhdGEucHJlKSB7XG5cdCAgICAgICAgICBjcmVhdGluZ0VsbUluVlByZSsrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaXNVbmtub3duRWxlbWVudCQkMSh2bm9kZSwgY3JlYXRpbmdFbG1JblZQcmUpKSB7XG5cdCAgICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgICAnVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArXG5cdCAgICAgICAgICAgICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICtcblx0ICAgICAgICAgICAgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyxcblx0ICAgICAgICAgICAgdm5vZGUuY29udGV4dFxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZub2RlLmVsbSA9IHZub2RlLm5zXG5cdCAgICAgICAgPyBub2RlT3BzLmNyZWF0ZUVsZW1lbnROUyh2bm9kZS5ucywgdGFnKVxuXHQgICAgICAgIDogbm9kZU9wcy5jcmVhdGVFbGVtZW50KHRhZywgdm5vZGUpO1xuXHQgICAgICBzZXRTY29wZSh2bm9kZSk7XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAge1xuXHQgICAgICAgIGNyZWF0ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICBpZiAoaXNEZWYoZGF0YSkpIHtcblx0ICAgICAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGRhdGEgJiYgZGF0YS5wcmUpIHtcblx0ICAgICAgICBjcmVhdGluZ0VsbUluVlByZS0tO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpKSB7XG5cdCAgICAgIHZub2RlLmVsbSA9IG5vZGVPcHMuY3JlYXRlQ29tbWVudCh2bm9kZS50ZXh0KTtcblx0ICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdm5vZGUuZWxtID0gbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZSh2bm9kZS50ZXh0KTtcblx0ICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuXHQgICAgdmFyIGkgPSB2bm9kZS5kYXRhO1xuXHQgICAgaWYgKGlzRGVmKGkpKSB7XG5cdCAgICAgIHZhciBpc1JlYWN0aXZhdGVkID0gaXNEZWYodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpICYmIGkua2VlcEFsaXZlO1xuXHQgICAgICBpZiAoaXNEZWYoaSA9IGkuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHtcblx0ICAgICAgICBpKHZub2RlLCBmYWxzZSAvKiBoeWRyYXRpbmcgKi8sIHBhcmVudEVsbSwgcmVmRWxtKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBhZnRlciBjYWxsaW5nIHRoZSBpbml0IGhvb2ssIGlmIHRoZSB2bm9kZSBpcyBhIGNoaWxkIGNvbXBvbmVudFxuXHQgICAgICAvLyBpdCBzaG91bGQndmUgY3JlYXRlZCBhIGNoaWxkIGluc3RhbmNlIGFuZCBtb3VudGVkIGl0LiB0aGUgY2hpbGRcblx0ICAgICAgLy8gY29tcG9uZW50IGFsc28gaGFzIHNldCB0aGUgcGxhY2Vob2xkZXIgdm5vZGUncyBlbG0uXG5cdCAgICAgIC8vIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdCByZXR1cm4gdGhlIGVsZW1lbnQgYW5kIGJlIGRvbmUuXG5cdCAgICAgIGlmIChpc0RlZih2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHtcblx0ICAgICAgICBpbml0Q29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIGlmIChpc1RydWUoaXNSZWFjdGl2YXRlZCkpIHtcblx0ICAgICAgICAgIHJlYWN0aXZhdGVDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbml0Q29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG5cdCAgICBpZiAoaXNEZWYodm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0KSkge1xuXHQgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaC5hcHBseShpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCk7XG5cdCAgICAgIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2bm9kZS5lbG0gPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kZWw7XG5cdCAgICBpZiAoaXNQYXRjaGFibGUodm5vZGUpKSB7XG5cdCAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICBzZXRTY29wZSh2bm9kZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBlbXB0eSBjb21wb25lbnQgcm9vdC5cblx0ICAgICAgLy8gc2tpcCBhbGwgZWxlbWVudC1yZWxhdGVkIG1vZHVsZXMgZXhjZXB0IGZvciByZWYgKCMzNDU1KVxuXHQgICAgICByZWdpc3RlclJlZih2bm9kZSk7XG5cdCAgICAgIC8vIG1ha2Ugc3VyZSB0byBpbnZva2UgdGhlIGluc2VydCBob29rXG5cdCAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKHZub2RlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWN0aXZhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIC8vIGhhY2sgZm9yICM0MzM5OiBhIHJlYWN0aXZhdGVkIGNvbXBvbmVudCB3aXRoIGlubmVyIHRyYW5zaXRpb25cblx0ICAgIC8vIGRvZXMgbm90IHRyaWdnZXIgYmVjYXVzZSB0aGUgaW5uZXIgbm9kZSdzIGNyZWF0ZWQgaG9va3MgYXJlIG5vdCBjYWxsZWRcblx0ICAgIC8vIGFnYWluLiBJdCdzIG5vdCBpZGVhbCB0byBpbnZvbHZlIG1vZHVsZS1zcGVjaWZpYyBsb2dpYyBpbiBoZXJlIGJ1dFxuXHQgICAgLy8gdGhlcmUgZG9lc24ndCBzZWVtIHRvIGJlIGEgYmV0dGVyIHdheSB0byBkbyBpdC5cblx0ICAgIHZhciBpbm5lck5vZGUgPSB2bm9kZTtcblx0ICAgIHdoaWxlIChpbm5lck5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHtcblx0ICAgICAgaW5uZXJOb2RlID0gaW5uZXJOb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcblx0ICAgICAgaWYgKGlzRGVmKGkgPSBpbm5lck5vZGUuZGF0YSkgJiYgaXNEZWYoaSA9IGkudHJhbnNpdGlvbikpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmFjdGl2YXRlLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgICBjYnMuYWN0aXZhdGVbaV0oZW1wdHlOb2RlLCBpbm5lck5vZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaChpbm5lck5vZGUpO1xuXHQgICAgICAgIGJyZWFrXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHVubGlrZSBhIG5ld2x5IGNyZWF0ZWQgY29tcG9uZW50LFxuXHQgICAgLy8gYSByZWFjdGl2YXRlZCBrZWVwLWFsaXZlIGNvbXBvbmVudCBkb2Vzbid0IGluc2VydCBpdHNlbGZcblx0ICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGluc2VydCAocGFyZW50LCBlbG0sIHJlZiQkMSkge1xuXHQgICAgaWYgKGlzRGVmKHBhcmVudCkpIHtcblx0ICAgICAgaWYgKGlzRGVmKHJlZiQkMSkpIHtcblx0ICAgICAgICBpZiAocmVmJCQxLnBhcmVudE5vZGUgPT09IHBhcmVudCkge1xuXHQgICAgICAgICAgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50LCBlbG0sIHJlZiQkMSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG5vZGVPcHMuYXBwZW5kQ2hpbGQocGFyZW50LCBlbG0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjcmVhdGVDaGlsZHJlbiAodm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhjaGlsZHJlbik7XG5cdCAgICAgIH1cblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgIGNyZWF0ZUVsbShjaGlsZHJlbltpXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB2bm9kZS5lbG0sIG51bGwsIHRydWUsIGNoaWxkcmVuLCBpKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1ByaW1pdGl2ZSh2bm9kZS50ZXh0KSkge1xuXHQgICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHZub2RlLmVsbSwgbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZShTdHJpbmcodm5vZGUudGV4dCkpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzUGF0Y2hhYmxlICh2bm9kZSkge1xuXHQgICAgd2hpbGUgKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSB7XG5cdCAgICAgIHZub2RlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGlzRGVmKHZub2RlLnRhZylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUNyZWF0ZUhvb2tzICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG5cdCAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjYnMuY3JlYXRlLmxlbmd0aDsgKytpJDEpIHtcblx0ICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgdm5vZGUpO1xuXHQgICAgfVxuXHQgICAgaSA9IHZub2RlLmRhdGEuaG9vazsgLy8gUmV1c2UgdmFyaWFibGVcblx0ICAgIGlmIChpc0RlZihpKSkge1xuXHQgICAgICBpZiAoaXNEZWYoaS5jcmVhdGUpKSB7IGkuY3JlYXRlKGVtcHR5Tm9kZSwgdm5vZGUpOyB9XG5cdCAgICAgIGlmIChpc0RlZihpLmluc2VydCkpIHsgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2godm5vZGUpOyB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBzZXQgc2NvcGUgaWQgYXR0cmlidXRlIGZvciBzY29wZWQgQ1NTLlxuXHQgIC8vIHRoaXMgaXMgaW1wbGVtZW50ZWQgYXMgYSBzcGVjaWFsIGNhc2UgdG8gYXZvaWQgdGhlIG92ZXJoZWFkXG5cdCAgLy8gb2YgZ29pbmcgdGhyb3VnaCB0aGUgbm9ybWFsIGF0dHJpYnV0ZSBwYXRjaGluZyBwcm9jZXNzLlxuXHQgIGZ1bmN0aW9uIHNldFNjb3BlICh2bm9kZSkge1xuXHQgICAgdmFyIGk7XG5cdCAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmZuU2NvcGVJZCkpIHtcblx0ICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgYW5jZXN0b3IgPSB2bm9kZTtcblx0ICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG5cdCAgICAgICAgaWYgKGlzRGVmKGkgPSBhbmNlc3Rvci5jb250ZXh0KSAmJiBpc0RlZihpID0gaS4kb3B0aW9ucy5fc2NvcGVJZCkpIHtcblx0ICAgICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gZm9yIHNsb3QgY29udGVudCB0aGV5IHNob3VsZCBhbHNvIGdldCB0aGUgc2NvcGVJZCBmcm9tIHRoZSBob3N0IGluc3RhbmNlLlxuXHQgICAgaWYgKGlzRGVmKGkgPSBhY3RpdmVJbnN0YW5jZSkgJiZcblx0ICAgICAgaSAhPT0gdm5vZGUuY29udGV4dCAmJlxuXHQgICAgICBpICE9PSB2bm9kZS5mbkNvbnRleHQgJiZcblx0ICAgICAgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpXG5cdCAgICApIHtcblx0ICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhZGRWbm9kZXMgKHBhcmVudEVsbSwgcmVmRWxtLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuXHQgICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkge1xuXHQgICAgICBjcmVhdGVFbG0odm5vZGVzW3N0YXJ0SWR4XSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSwgZmFsc2UsIHZub2Rlcywgc3RhcnRJZHgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW52b2tlRGVzdHJveUhvb2sgKHZub2RlKSB7XG5cdCAgICB2YXIgaSwgajtcblx0ICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcblx0ICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuZGVzdHJveSkpIHsgaSh2bm9kZSk7IH1cblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7IGNicy5kZXN0cm95W2ldKHZub2RlKTsgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jaGlsZHJlbikpIHtcblx0ICAgICAgZm9yIChqID0gMDsgaiA8IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgKytqKSB7XG5cdCAgICAgICAgaW52b2tlRGVzdHJveUhvb2sodm5vZGUuY2hpbGRyZW5bal0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1vdmVWbm9kZXMgKHBhcmVudEVsbSwgdm5vZGVzLCBzdGFydElkeCwgZW5kSWR4KSB7XG5cdCAgICBmb3IgKDsgc3RhcnRJZHggPD0gZW5kSWR4OyArK3N0YXJ0SWR4KSB7XG5cdCAgICAgIHZhciBjaCA9IHZub2Rlc1tzdGFydElkeF07XG5cdCAgICAgIGlmIChpc0RlZihjaCkpIHtcblx0ICAgICAgICBpZiAoaXNEZWYoY2gudGFnKSkge1xuXHQgICAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhjaCk7XG5cdCAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhjaCk7XG5cdCAgICAgICAgfSBlbHNlIHsgLy8gVGV4dCBub2RlXG5cdCAgICAgICAgICByZW1vdmVOb2RlKGNoLmVsbSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rICh2bm9kZSwgcm0pIHtcblx0ICAgIGlmIChpc0RlZihybSkgfHwgaXNEZWYodm5vZGUuZGF0YSkpIHtcblx0ICAgICAgdmFyIGk7XG5cdCAgICAgIHZhciBsaXN0ZW5lcnMgPSBjYnMucmVtb3ZlLmxlbmd0aCArIDE7XG5cdCAgICAgIGlmIChpc0RlZihybSkpIHtcblx0ICAgICAgICAvLyB3ZSBoYXZlIGEgcmVjdXJzaXZlbHkgcGFzc2VkIGRvd24gcm0gY2FsbGJhY2tcblx0ICAgICAgICAvLyBpbmNyZWFzZSB0aGUgbGlzdGVuZXJzIGNvdW50XG5cdCAgICAgICAgcm0ubGlzdGVuZXJzICs9IGxpc3RlbmVycztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBkaXJlY3RseSByZW1vdmluZ1xuXHQgICAgICAgIHJtID0gY3JlYXRlUm1DYih2bm9kZS5lbG0sIGxpc3RlbmVycyk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gcmVjdXJzaXZlbHkgaW52b2tlIGhvb2tzIG9uIGNoaWxkIGNvbXBvbmVudCByb290IG5vZGVcblx0ICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgJiYgaXNEZWYoaSA9IGkuX3Zub2RlKSAmJiBpc0RlZihpLmRhdGEpKSB7XG5cdCAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhpLCBybSk7XG5cdCAgICAgIH1cblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5yZW1vdmUubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICBjYnMucmVtb3ZlW2ldKHZub2RlLCBybSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5kYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnJlbW92ZSkpIHtcblx0ICAgICAgICBpKHZub2RlLCBybSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcm0oKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVtb3ZlTm9kZSh2bm9kZS5lbG0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4gKHBhcmVudEVsbSwgb2xkQ2gsIG5ld0NoLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpIHtcblx0ICAgIHZhciBvbGRTdGFydElkeCA9IDA7XG5cdCAgICB2YXIgbmV3U3RhcnRJZHggPSAwO1xuXHQgICAgdmFyIG9sZEVuZElkeCA9IG9sZENoLmxlbmd0aCAtIDE7XG5cdCAgICB2YXIgb2xkU3RhcnRWbm9kZSA9IG9sZENoWzBdO1xuXHQgICAgdmFyIG9sZEVuZFZub2RlID0gb2xkQ2hbb2xkRW5kSWR4XTtcblx0ICAgIHZhciBuZXdFbmRJZHggPSBuZXdDaC5sZW5ndGggLSAxO1xuXHQgICAgdmFyIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFswXTtcblx0ICAgIHZhciBuZXdFbmRWbm9kZSA9IG5ld0NoW25ld0VuZElkeF07XG5cdCAgICB2YXIgb2xkS2V5VG9JZHgsIGlkeEluT2xkLCB2bm9kZVRvTW92ZSwgcmVmRWxtO1xuXHRcblx0ICAgIC8vIHJlbW92ZU9ubHkgaXMgYSBzcGVjaWFsIGZsYWcgdXNlZCBvbmx5IGJ5IDx0cmFuc2l0aW9uLWdyb3VwPlxuXHQgICAgLy8gdG8gZW5zdXJlIHJlbW92ZWQgZWxlbWVudHMgc3RheSBpbiBjb3JyZWN0IHJlbGF0aXZlIHBvc2l0aW9uc1xuXHQgICAgLy8gZHVyaW5nIGxlYXZpbmcgdHJhbnNpdGlvbnNcblx0ICAgIHZhciBjYW5Nb3ZlID0gIXJlbW92ZU9ubHk7XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgY2hlY2tEdXBsaWNhdGVLZXlzKG5ld0NoKTtcblx0ICAgIH1cblx0XG5cdCAgICB3aGlsZSAob2xkU3RhcnRJZHggPD0gb2xkRW5kSWR4ICYmIG5ld1N0YXJ0SWR4IDw9IG5ld0VuZElkeCkge1xuXHQgICAgICBpZiAoaXNVbmRlZihvbGRTdGFydFZub2RlKSkge1xuXHQgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTsgLy8gVm5vZGUgaGFzIGJlZW4gbW92ZWQgbGVmdFxuXHQgICAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkRW5kVm5vZGUpKSB7XG5cdCAgICAgICAgb2xkRW5kVm5vZGUgPSBvbGRDaFstLW9sZEVuZElkeF07XG5cdCAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld1N0YXJ0Vm5vZGUpKSB7XG5cdCAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTtcblx0ICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG5cdCAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZEVuZFZub2RlLCBuZXdFbmRWbm9kZSkpIHtcblx0ICAgICAgICBwYXRjaFZub2RlKG9sZEVuZFZub2RlLCBuZXdFbmRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcblx0ICAgICAgICBuZXdFbmRWbm9kZSA9IG5ld0NoWy0tbmV3RW5kSWR4XTtcblx0ICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3RW5kVm5vZGUpKSB7IC8vIFZub2RlIG1vdmVkIHJpZ2h0XG5cdCAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIG5vZGVPcHMubmV4dFNpYmxpbmcob2xkRW5kVm5vZGUuZWxtKSk7XG5cdCAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdO1xuXHQgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuXHQgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgbGVmdFxuXHQgICAgICAgIHBhdGNoVm5vZGUob2xkRW5kVm5vZGUsIG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZEVuZFZub2RlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pO1xuXHQgICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuXHQgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoaXNVbmRlZihvbGRLZXlUb0lkeCkpIHsgb2xkS2V5VG9JZHggPSBjcmVhdGVLZXlUb09sZElkeChvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7IH1cblx0ICAgICAgICBpZHhJbk9sZCA9IGlzRGVmKG5ld1N0YXJ0Vm5vZGUua2V5KVxuXHQgICAgICAgICAgPyBvbGRLZXlUb0lkeFtuZXdTdGFydFZub2RlLmtleV1cblx0ICAgICAgICAgIDogZmluZElkeEluT2xkKG5ld1N0YXJ0Vm5vZGUsIG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTtcblx0ICAgICAgICBpZiAoaXNVbmRlZihpZHhJbk9sZCkpIHsgLy8gTmV3IGVsZW1lbnRcblx0ICAgICAgICAgIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGZhbHNlLCBuZXdDaCwgbmV3U3RhcnRJZHgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB2bm9kZVRvTW92ZSA9IG9sZENoW2lkeEluT2xkXTtcblx0ICAgICAgICAgIGlmIChzYW1lVm5vZGUodm5vZGVUb01vdmUsIG5ld1N0YXJ0Vm5vZGUpKSB7XG5cdCAgICAgICAgICAgIHBhdGNoVm5vZGUodm5vZGVUb01vdmUsIG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgICAgIG9sZENoW2lkeEluT2xkXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIHZub2RlVG9Nb3ZlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBrZXkgYnV0IGRpZmZlcmVudCBlbGVtZW50LiB0cmVhdCBhcyBuZXcgZWxlbWVudFxuXHQgICAgICAgICAgICBjcmVhdGVFbG0obmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBmYWxzZSwgbmV3Q2gsIG5ld1N0YXJ0SWR4KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAob2xkU3RhcnRJZHggPiBvbGRFbmRJZHgpIHtcblx0ICAgICAgcmVmRWxtID0gaXNVbmRlZihuZXdDaFtuZXdFbmRJZHggKyAxXSkgPyBudWxsIDogbmV3Q2hbbmV3RW5kSWR4ICsgMV0uZWxtO1xuXHQgICAgICBhZGRWbm9kZXMocGFyZW50RWxtLCByZWZFbG0sIG5ld0NoLCBuZXdTdGFydElkeCwgbmV3RW5kSWR4LCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgfSBlbHNlIGlmIChuZXdTdGFydElkeCA+IG5ld0VuZElkeCkge1xuXHQgICAgICByZW1vdmVWbm9kZXMocGFyZW50RWxtLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZUtleXMgKGNoaWxkcmVuKSB7XG5cdCAgICB2YXIgc2VlbktleXMgPSB7fTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHZub2RlID0gY2hpbGRyZW5baV07XG5cdCAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXk7XG5cdCAgICAgIGlmIChpc0RlZihrZXkpKSB7XG5cdCAgICAgICAgaWYgKHNlZW5LZXlzW2tleV0pIHtcblx0ICAgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAgIChcIkR1cGxpY2F0ZSBrZXlzIGRldGVjdGVkOiAnXCIgKyBrZXkgKyBcIicuIFRoaXMgbWF5IGNhdXNlIGFuIHVwZGF0ZSBlcnJvci5cIiksXG5cdCAgICAgICAgICAgIHZub2RlLmNvbnRleHRcblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHNlZW5LZXlzW2tleV0gPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZmluZElkeEluT2xkIChub2RlLCBvbGRDaCwgc3RhcnQsIGVuZCkge1xuXHQgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcblx0ICAgICAgdmFyIGMgPSBvbGRDaFtpXTtcblx0ICAgICAgaWYgKGlzRGVmKGMpICYmIHNhbWVWbm9kZShub2RlLCBjKSkgeyByZXR1cm4gaSB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBwYXRjaFZub2RlIChvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSkge1xuXHQgICAgaWYgKG9sZFZub2RlID09PSB2bm9kZSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZWxtID0gdm5vZGUuZWxtID0gb2xkVm5vZGUuZWxtO1xuXHRcblx0ICAgIGlmIChpc1RydWUob2xkVm5vZGUuaXNBc3luY1BsYWNlaG9sZGVyKSkge1xuXHQgICAgICBpZiAoaXNEZWYodm5vZGUuYXN5bmNGYWN0b3J5LnJlc29sdmVkKSkge1xuXHQgICAgICAgIGh5ZHJhdGUob2xkVm5vZGUuZWxtLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIC8vIHJldXNlIGVsZW1lbnQgZm9yIHN0YXRpYyB0cmVlcy5cblx0ICAgIC8vIG5vdGUgd2Ugb25seSBkbyB0aGlzIGlmIHRoZSB2bm9kZSBpcyBjbG9uZWQgLVxuXHQgICAgLy8gaWYgdGhlIG5ldyBub2RlIGlzIG5vdCBjbG9uZWQgaXQgbWVhbnMgdGhlIHJlbmRlciBmdW5jdGlvbnMgaGF2ZSBiZWVuXG5cdCAgICAvLyByZXNldCBieSB0aGUgaG90LXJlbG9hZC1hcGkgYW5kIHdlIG5lZWQgdG8gZG8gYSBwcm9wZXIgcmUtcmVuZGVyLlxuXHQgICAgaWYgKGlzVHJ1ZSh2bm9kZS5pc1N0YXRpYykgJiZcblx0ICAgICAgaXNUcnVlKG9sZFZub2RlLmlzU3RhdGljKSAmJlxuXHQgICAgICB2bm9kZS5rZXkgPT09IG9sZFZub2RlLmtleSAmJlxuXHQgICAgICAoaXNUcnVlKHZub2RlLmlzQ2xvbmVkKSB8fCBpc1RydWUodm5vZGUuaXNPbmNlKSlcblx0ICAgICkge1xuXHQgICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IG9sZFZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcblx0ICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wcmVwYXRjaCkpIHtcblx0ICAgICAgaShvbGRWbm9kZSwgdm5vZGUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBvbGRDaCA9IG9sZFZub2RlLmNoaWxkcmVuO1xuXHQgICAgdmFyIGNoID0gdm5vZGUuY2hpbGRyZW47XG5cdCAgICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNQYXRjaGFibGUodm5vZGUpKSB7XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMudXBkYXRlLmxlbmd0aDsgKytpKSB7IGNicy51cGRhdGVbaV0ob2xkVm5vZGUsIHZub2RlKTsgfVxuXHQgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkudXBkYXRlKSkgeyBpKG9sZFZub2RlLCB2bm9kZSk7IH1cblx0ICAgIH1cblx0ICAgIGlmIChpc1VuZGVmKHZub2RlLnRleHQpKSB7XG5cdCAgICAgIGlmIChpc0RlZihvbGRDaCkgJiYgaXNEZWYoY2gpKSB7XG5cdCAgICAgICAgaWYgKG9sZENoICE9PSBjaCkgeyB1cGRhdGVDaGlsZHJlbihlbG0sIG9sZENoLCBjaCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KTsgfVxuXHQgICAgICB9IGVsc2UgaWYgKGlzRGVmKGNoKSkge1xuXHQgICAgICAgIGlmIChpc0RlZihvbGRWbm9kZS50ZXh0KSkgeyBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgJycpOyB9XG5cdCAgICAgICAgYWRkVm5vZGVzKGVsbSwgbnVsbCwgY2gsIDAsIGNoLmxlbmd0aCAtIDEsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkQ2gpKSB7XG5cdCAgICAgICAgcmVtb3ZlVm5vZGVzKGVsbSwgb2xkQ2gsIDAsIG9sZENoLmxlbmd0aCAtIDEpO1xuXHQgICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7XG5cdCAgICAgICAgbm9kZU9wcy5zZXRUZXh0Q29udGVudChlbG0sICcnKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChvbGRWbm9kZS50ZXh0ICE9PSB2bm9kZS50ZXh0KSB7XG5cdCAgICAgIG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCB2bm9kZS50ZXh0KTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkucG9zdHBhdGNoKSkgeyBpKG9sZFZub2RlLCB2bm9kZSk7IH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUluc2VydEhvb2sgKHZub2RlLCBxdWV1ZSwgaW5pdGlhbCkge1xuXHQgICAgLy8gZGVsYXkgaW5zZXJ0IGhvb2tzIGZvciBjb21wb25lbnQgcm9vdCBub2RlcywgaW52b2tlIHRoZW0gYWZ0ZXIgdGhlXG5cdCAgICAvLyBlbGVtZW50IGlzIHJlYWxseSBpbnNlcnRlZFxuXHQgICAgaWYgKGlzVHJ1ZShpbml0aWFsKSAmJiBpc0RlZih2bm9kZS5wYXJlbnQpKSB7XG5cdCAgICAgIHZub2RlLnBhcmVudC5kYXRhLnBlbmRpbmdJbnNlcnQgPSBxdWV1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICBxdWV1ZVtpXS5kYXRhLmhvb2suaW5zZXJ0KHF1ZXVlW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGh5ZHJhdGlvbkJhaWxlZCA9IGZhbHNlO1xuXHQgIC8vIGxpc3Qgb2YgbW9kdWxlcyB0aGF0IGNhbiBza2lwIGNyZWF0ZSBob29rIGR1cmluZyBoeWRyYXRpb24gYmVjYXVzZSB0aGV5XG5cdCAgLy8gYXJlIGFscmVhZHkgcmVuZGVyZWQgb24gdGhlIGNsaWVudCBvciBoYXMgbm8gbmVlZCBmb3IgaW5pdGlhbGl6YXRpb25cblx0ICAvLyBOb3RlOiBzdHlsZSBpcyBleGNsdWRlZCBiZWNhdXNlIGl0IHJlbGllcyBvbiBpbml0aWFsIGNsb25lIGZvciBmdXR1cmVcblx0ICAvLyBkZWVwIHVwZGF0ZXMgKCM3MDYzKS5cblx0ICB2YXIgaXNSZW5kZXJlZE1vZHVsZSA9IG1ha2VNYXAoJ2F0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleScpO1xuXHRcblx0ICAvLyBOb3RlOiB0aGlzIGlzIGEgYnJvd3Nlci1vbmx5IGZ1bmN0aW9uIHNvIHdlIGNhbiBhc3N1bWUgZWxtcyBhcmUgRE9NIG5vZGVzLlxuXHQgIGZ1bmN0aW9uIGh5ZHJhdGUgKGVsbSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgaW5WUHJlKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciB0YWcgPSB2bm9kZS50YWc7XG5cdCAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcblx0ICAgIGluVlByZSA9IGluVlByZSB8fCAoZGF0YSAmJiBkYXRhLnByZSk7XG5cdCAgICB2bm9kZS5lbG0gPSBlbG07XG5cdFxuXHQgICAgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpICYmIGlzRGVmKHZub2RlLmFzeW5jRmFjdG9yeSkpIHtcblx0ICAgICAgdm5vZGUuaXNBc3luY1BsYWNlaG9sZGVyID0gdHJ1ZTtcblx0ICAgICAgcmV0dXJuIHRydWVcblx0ICAgIH1cblx0ICAgIC8vIGFzc2VydCBub2RlIG1hdGNoXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAoIWFzc2VydE5vZGVNYXRjaChlbG0sIHZub2RlLCBpblZQcmUpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHsgaSh2bm9kZSwgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pOyB9XG5cdCAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7XG5cdCAgICAgICAgLy8gY2hpbGQgY29tcG9uZW50LiBpdCBzaG91bGQgaGF2ZSBoeWRyYXRlZCBpdHMgb3duIHRyZWUuXG5cdCAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNEZWYodGFnKSkge1xuXHQgICAgICBpZiAoaXNEZWYoY2hpbGRyZW4pKSB7XG5cdCAgICAgICAgLy8gZW1wdHkgZWxlbWVudCwgYWxsb3cgY2xpZW50IHRvIHBpY2sgdXAgYW5kIHBvcHVsYXRlIGNoaWxkcmVuXG5cdCAgICAgICAgaWYgKCFlbG0uaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgICAgICBjcmVhdGVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4sIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHYtaHRtbCBhbmQgZG9tUHJvcHM6IGlubmVySFRNTFxuXHQgICAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhKSAmJiBpc0RlZihpID0gaS5kb21Qcm9wcykgJiYgaXNEZWYoaSA9IGkuaW5uZXJIVE1MKSkge1xuXHQgICAgICAgICAgICBpZiAoaSAhPT0gZWxtLmlubmVySFRNTCkge1xuXHQgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgICAgICAgICAgICB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICAgICAgICAgICAgICAgICFoeWRyYXRpb25CYWlsZWRcblx0ICAgICAgICAgICAgICApIHtcblx0ICAgICAgICAgICAgICAgIGh5ZHJhdGlvbkJhaWxlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BhcmVudDogJywgZWxtKTtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybignc2VydmVyIGlubmVySFRNTDogJywgaSk7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2NsaWVudCBpbm5lckhUTUw6ICcsIGVsbS5pbm5lckhUTUwpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgLy8gaXRlcmF0ZSBhbmQgY29tcGFyZSBjaGlsZHJlbiBsaXN0c1xuXHQgICAgICAgICAgICB2YXIgY2hpbGRyZW5NYXRjaCA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBjaGlsZE5vZGUgPSBlbG0uZmlyc3RDaGlsZDtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgY2hpbGRyZW4ubGVuZ3RoOyBpJDErKykge1xuXHQgICAgICAgICAgICAgIGlmICghY2hpbGROb2RlIHx8ICFoeWRyYXRlKGNoaWxkTm9kZSwgY2hpbGRyZW5baSQxXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpblZQcmUpKSB7XG5cdCAgICAgICAgICAgICAgICBjaGlsZHJlbk1hdGNoID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICBicmVha1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgLy8gaWYgY2hpbGROb2RlIGlzIG5vdCBudWxsLCBpdCBtZWFucyB0aGUgYWN0dWFsIGNoaWxkTm9kZXMgbGlzdCBpc1xuXHQgICAgICAgICAgICAvLyBsb25nZXIgdGhhbiB0aGUgdmlydHVhbCBjaGlsZHJlbiBsaXN0LlxuXHQgICAgICAgICAgICBpZiAoIWNoaWxkcmVuTWF0Y2ggfHwgY2hpbGROb2RlKSB7XG5cdCAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICAgICAgICAgICAgIWh5ZHJhdGlvbkJhaWxlZFxuXHQgICAgICAgICAgICAgICkge1xuXHQgICAgICAgICAgICAgICAgaHlkcmF0aW9uQmFpbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGFyZW50OiAnLCBlbG0pO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNaXNtYXRjaGluZyBjaGlsZE5vZGVzIHZzLiBWTm9kZXM6ICcsIGVsbS5jaGlsZE5vZGVzLCBjaGlsZHJlbik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICAgIHZhciBmdWxsSW52b2tlID0gZmFsc2U7XG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcblx0ICAgICAgICAgIGlmICghaXNSZW5kZXJlZE1vZHVsZShrZXkpKSB7XG5cdCAgICAgICAgICAgIGZ1bGxJbnZva2UgPSB0cnVlO1xuXHQgICAgICAgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICAgICAgYnJlYWtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFmdWxsSW52b2tlICYmIGRhdGFbJ2NsYXNzJ10pIHtcblx0ICAgICAgICAgIC8vIGVuc3VyZSBjb2xsZWN0aW5nIGRlcHMgZm9yIGRlZXAgY2xhc3MgYmluZGluZ3MgZm9yIGZ1dHVyZSB1cGRhdGVzXG5cdCAgICAgICAgICB0cmF2ZXJzZShkYXRhWydjbGFzcyddKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoZWxtLmRhdGEgIT09IHZub2RlLnRleHQpIHtcblx0ICAgICAgZWxtLmRhdGEgPSB2bm9kZS50ZXh0O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRydWVcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydE5vZGVNYXRjaCAobm9kZSwgdm5vZGUsIGluVlByZSkge1xuXHQgICAgaWYgKGlzRGVmKHZub2RlLnRhZykpIHtcblx0ICAgICAgcmV0dXJuIHZub2RlLnRhZy5pbmRleE9mKCd2dWUtY29tcG9uZW50JykgPT09IDAgfHwgKFxuXHQgICAgICAgICFpc1Vua25vd25FbGVtZW50JCQxKHZub2RlLCBpblZQcmUpICYmXG5cdCAgICAgICAgdm5vZGUudGFnLnRvTG93ZXJDYXNlKCkgPT09IChub2RlLnRhZ05hbWUgJiYgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAodm5vZGUuaXNDb21tZW50ID8gOCA6IDMpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSwgaHlkcmF0aW5nLCByZW1vdmVPbmx5LCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuXHQgICAgaWYgKGlzVW5kZWYodm5vZGUpKSB7XG5cdCAgICAgIGlmIChpc0RlZihvbGRWbm9kZSkpIHsgaW52b2tlRGVzdHJveUhvb2sob2xkVm5vZGUpOyB9XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpc0luaXRpYWxQYXRjaCA9IGZhbHNlO1xuXHQgICAgdmFyIGluc2VydGVkVm5vZGVRdWV1ZSA9IFtdO1xuXHRcblx0ICAgIGlmIChpc1VuZGVmKG9sZFZub2RlKSkge1xuXHQgICAgICAvLyBlbXB0eSBtb3VudCAobGlrZWx5IGFzIGNvbXBvbmVudCksIGNyZWF0ZSBuZXcgcm9vdCBlbGVtZW50XG5cdCAgICAgIGlzSW5pdGlhbFBhdGNoID0gdHJ1ZTtcblx0ICAgICAgY3JlYXRlRWxtKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBpc1JlYWxFbGVtZW50ID0gaXNEZWYob2xkVm5vZGUubm9kZVR5cGUpO1xuXHQgICAgICBpZiAoIWlzUmVhbEVsZW1lbnQgJiYgc2FtZVZub2RlKG9sZFZub2RlLCB2bm9kZSkpIHtcblx0ICAgICAgICAvLyBwYXRjaCBleGlzdGluZyByb290IG5vZGVcblx0ICAgICAgICBwYXRjaFZub2RlKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoaXNSZWFsRWxlbWVudCkge1xuXHQgICAgICAgICAgLy8gbW91bnRpbmcgdG8gYSByZWFsIGVsZW1lbnRcblx0ICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQgYW5kIGlmIHdlIGNhbiBwZXJmb3JtXG5cdCAgICAgICAgICAvLyBhIHN1Y2Nlc3NmdWwgaHlkcmF0aW9uLlxuXHQgICAgICAgICAgaWYgKG9sZFZub2RlLm5vZGVUeXBlID09PSAxICYmIG9sZFZub2RlLmhhc0F0dHJpYnV0ZShTU1JfQVRUUikpIHtcblx0ICAgICAgICAgICAgb2xkVm5vZGUucmVtb3ZlQXR0cmlidXRlKFNTUl9BVFRSKTtcblx0ICAgICAgICAgICAgaHlkcmF0aW5nID0gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChpc1RydWUoaHlkcmF0aW5nKSkge1xuXHQgICAgICAgICAgICBpZiAoaHlkcmF0ZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkpIHtcblx0ICAgICAgICAgICAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHRydWUpO1xuXHQgICAgICAgICAgICAgIHJldHVybiBvbGRWbm9kZVxuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgICAgICAgJ1RoZSBjbGllbnQtc2lkZSByZW5kZXJlZCB2aXJ0dWFsIERPTSB0cmVlIGlzIG5vdCBtYXRjaGluZyAnICtcblx0ICAgICAgICAgICAgICAgICdzZXJ2ZXItcmVuZGVyZWQgY29udGVudC4gVGhpcyBpcyBsaWtlbHkgY2F1c2VkIGJ5IGluY29ycmVjdCAnICtcblx0ICAgICAgICAgICAgICAgICdIVE1MIG1hcmt1cCwgZm9yIGV4YW1wbGUgbmVzdGluZyBibG9jay1sZXZlbCBlbGVtZW50cyBpbnNpZGUgJyArXG5cdCAgICAgICAgICAgICAgICAnPHA+LCBvciBtaXNzaW5nIDx0Ym9keT4uIEJhaWxpbmcgaHlkcmF0aW9uIGFuZCBwZXJmb3JtaW5nICcgK1xuXHQgICAgICAgICAgICAgICAgJ2Z1bGwgY2xpZW50LXNpZGUgcmVuZGVyLidcblx0ICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyBlaXRoZXIgbm90IHNlcnZlci1yZW5kZXJlZCwgb3IgaHlkcmF0aW9uIGZhaWxlZC5cblx0ICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBub2RlIGFuZCByZXBsYWNlIGl0XG5cdCAgICAgICAgICBvbGRWbm9kZSA9IGVtcHR5Tm9kZUF0KG9sZFZub2RlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHJlcGxhY2luZyBleGlzdGluZyBlbGVtZW50XG5cdCAgICAgICAgdmFyIG9sZEVsbSA9IG9sZFZub2RlLmVsbTtcblx0ICAgICAgICB2YXIgcGFyZW50RWxtJDEgPSBub2RlT3BzLnBhcmVudE5vZGUob2xkRWxtKTtcblx0XG5cdCAgICAgICAgLy8gY3JlYXRlIG5ldyBub2RlXG5cdCAgICAgICAgY3JlYXRlRWxtKFxuXHQgICAgICAgICAgdm5vZGUsXG5cdCAgICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUsXG5cdCAgICAgICAgICAvLyBleHRyZW1lbHkgcmFyZSBlZGdlIGNhc2U6IGRvIG5vdCBpbnNlcnQgaWYgb2xkIGVsZW1lbnQgaXMgaW4gYVxuXHQgICAgICAgICAgLy8gbGVhdmluZyB0cmFuc2l0aW9uLiBPbmx5IGhhcHBlbnMgd2hlbiBjb21iaW5pbmcgdHJhbnNpdGlvbiArXG5cdCAgICAgICAgICAvLyBrZWVwLWFsaXZlICsgSE9Dcy4gKCM0NTkwKVxuXHQgICAgICAgICAgb2xkRWxtLl9sZWF2ZUNiID8gbnVsbCA6IHBhcmVudEVsbSQxLFxuXHQgICAgICAgICAgbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbG0pXG5cdCAgICAgICAgKTtcblx0XG5cdCAgICAgICAgLy8gdXBkYXRlIHBhcmVudCBwbGFjZWhvbGRlciBub2RlIGVsZW1lbnQsIHJlY3Vyc2l2ZWx5XG5cdCAgICAgICAgaWYgKGlzRGVmKHZub2RlLnBhcmVudCkpIHtcblx0ICAgICAgICAgIHZhciBhbmNlc3RvciA9IHZub2RlLnBhcmVudDtcblx0ICAgICAgICAgIHZhciBwYXRjaGFibGUgPSBpc1BhdGNoYWJsZSh2bm9kZSk7XG5cdCAgICAgICAgICB3aGlsZSAoYW5jZXN0b3IpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMuZGVzdHJveS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgICAgICAgIGNicy5kZXN0cm95W2ldKGFuY2VzdG9yKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBhbmNlc3Rvci5lbG0gPSB2bm9kZS5lbG07XG5cdCAgICAgICAgICAgIGlmIChwYXRjaGFibGUpIHtcblx0ICAgICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjYnMuY3JlYXRlLmxlbmd0aDsgKytpJDEpIHtcblx0ICAgICAgICAgICAgICAgIGNicy5jcmVhdGVbaSQxXShlbXB0eU5vZGUsIGFuY2VzdG9yKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgLy8gIzY1MTNcblx0ICAgICAgICAgICAgICAvLyBpbnZva2UgaW5zZXJ0IGhvb2tzIHRoYXQgbWF5IGhhdmUgYmVlbiBtZXJnZWQgYnkgY3JlYXRlIGhvb2tzLlxuXHQgICAgICAgICAgICAgIC8vIGUuZy4gZm9yIGRpcmVjdGl2ZXMgdGhhdCB1c2VzIHRoZSBcImluc2VydGVkXCIgaG9vay5cblx0ICAgICAgICAgICAgICB2YXIgaW5zZXJ0ID0gYW5jZXN0b3IuZGF0YS5ob29rLmluc2VydDtcblx0ICAgICAgICAgICAgICBpZiAoaW5zZXJ0Lm1lcmdlZCkge1xuXHQgICAgICAgICAgICAgICAgLy8gc3RhcnQgYXQgaW5kZXggMSB0byBhdm9pZCByZS1pbnZva2luZyBjb21wb25lbnQgbW91bnRlZCBob29rXG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpJDIgPSAxOyBpJDIgPCBpbnNlcnQuZm5zLmxlbmd0aDsgaSQyKyspIHtcblx0ICAgICAgICAgICAgICAgICAgaW5zZXJ0LmZuc1tpJDJdKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHJlZ2lzdGVyUmVmKGFuY2VzdG9yKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGRlc3Ryb3kgb2xkIG5vZGVcblx0ICAgICAgICBpZiAoaXNEZWYocGFyZW50RWxtJDEpKSB7XG5cdCAgICAgICAgICByZW1vdmVWbm9kZXMocGFyZW50RWxtJDEsIFtvbGRWbm9kZV0sIDAsIDApO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGFnKSkge1xuXHQgICAgICAgICAgaW52b2tlRGVzdHJveUhvb2sob2xkVm5vZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGludm9rZUluc2VydEhvb2sodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgaXNJbml0aWFsUGF0Y2gpO1xuXHQgICAgcmV0dXJuIHZub2RlLmVsbVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgZGlyZWN0aXZlcyA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZURpcmVjdGl2ZXMsXG5cdCAgdXBkYXRlOiB1cGRhdGVEaXJlY3RpdmVzLFxuXHQgIGRlc3Ryb3k6IGZ1bmN0aW9uIHVuYmluZERpcmVjdGl2ZXMgKHZub2RlKSB7XG5cdCAgICB1cGRhdGVEaXJlY3RpdmVzKHZub2RlLCBlbXB0eU5vZGUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlRGlyZWN0aXZlcyAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgaWYgKG9sZFZub2RlLmRhdGEuZGlyZWN0aXZlcyB8fCB2bm9kZS5kYXRhLmRpcmVjdGl2ZXMpIHtcblx0ICAgIF91cGRhdGUob2xkVm5vZGUsIHZub2RlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF91cGRhdGUgKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgIHZhciBpc0NyZWF0ZSA9IG9sZFZub2RlID09PSBlbXB0eU5vZGU7XG5cdCAgdmFyIGlzRGVzdHJveSA9IHZub2RlID09PSBlbXB0eU5vZGU7XG5cdCAgdmFyIG9sZERpcnMgPSBub3JtYWxpemVEaXJlY3RpdmVzJDEob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzLCBvbGRWbm9kZS5jb250ZXh0KTtcblx0ICB2YXIgbmV3RGlycyA9IG5vcm1hbGl6ZURpcmVjdGl2ZXMkMSh2bm9kZS5kYXRhLmRpcmVjdGl2ZXMsIHZub2RlLmNvbnRleHQpO1xuXHRcblx0ICB2YXIgZGlyc1dpdGhJbnNlcnQgPSBbXTtcblx0ICB2YXIgZGlyc1dpdGhQb3N0cGF0Y2ggPSBbXTtcblx0XG5cdCAgdmFyIGtleSwgb2xkRGlyLCBkaXI7XG5cdCAgZm9yIChrZXkgaW4gbmV3RGlycykge1xuXHQgICAgb2xkRGlyID0gb2xkRGlyc1trZXldO1xuXHQgICAgZGlyID0gbmV3RGlyc1trZXldO1xuXHQgICAgaWYgKCFvbGREaXIpIHtcblx0ICAgICAgLy8gbmV3IGRpcmVjdGl2ZSwgYmluZFxuXHQgICAgICBjYWxsSG9vayQxKGRpciwgJ2JpbmQnLCB2bm9kZSwgb2xkVm5vZGUpO1xuXHQgICAgICBpZiAoZGlyLmRlZiAmJiBkaXIuZGVmLmluc2VydGVkKSB7XG5cdCAgICAgICAgZGlyc1dpdGhJbnNlcnQucHVzaChkaXIpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBleGlzdGluZyBkaXJlY3RpdmUsIHVwZGF0ZVxuXHQgICAgICBkaXIub2xkVmFsdWUgPSBvbGREaXIudmFsdWU7XG5cdCAgICAgIGNhbGxIb29rJDEoZGlyLCAndXBkYXRlJywgdm5vZGUsIG9sZFZub2RlKTtcblx0ICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5jb21wb25lbnRVcGRhdGVkKSB7XG5cdCAgICAgICAgZGlyc1dpdGhQb3N0cGF0Y2gucHVzaChkaXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlyc1dpdGhJbnNlcnQubGVuZ3RoKSB7XG5cdCAgICB2YXIgY2FsbEluc2VydCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXJzV2l0aEluc2VydC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhJbnNlcnRbaV0sICdpbnNlcnRlZCcsIHZub2RlLCBvbGRWbm9kZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBpZiAoaXNDcmVhdGUpIHtcblx0ICAgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdpbnNlcnQnLCBjYWxsSW5zZXJ0KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNhbGxJbnNlcnQoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChkaXJzV2l0aFBvc3RwYXRjaC5sZW5ndGgpIHtcblx0ICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoUG9zdHBhdGNoLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY2FsbEhvb2skMShkaXJzV2l0aFBvc3RwYXRjaFtpXSwgJ2NvbXBvbmVudFVwZGF0ZWQnLCB2bm9kZSwgb2xkVm5vZGUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmICghaXNDcmVhdGUpIHtcblx0ICAgIGZvciAoa2V5IGluIG9sZERpcnMpIHtcblx0ICAgICAgaWYgKCFuZXdEaXJzW2tleV0pIHtcblx0ICAgICAgICAvLyBubyBsb25nZXIgcHJlc2VudCwgdW5iaW5kXG5cdCAgICAgICAgY2FsbEhvb2skMShvbGREaXJzW2tleV0sICd1bmJpbmQnLCBvbGRWbm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBlbXB0eU1vZGlmaWVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzJDEgKFxuXHQgIGRpcnMsXG5cdCAgdm1cblx0KSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgaWYgKCFkaXJzKSB7XG5cdCAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICAgIHJldHVybiByZXNcblx0ICB9XG5cdCAgdmFyIGksIGRpcjtcblx0ICBmb3IgKGkgPSAwOyBpIDwgZGlycy5sZW5ndGg7IGkrKykge1xuXHQgICAgZGlyID0gZGlyc1tpXTtcblx0ICAgIGlmICghZGlyLm1vZGlmaWVycykge1xuXHQgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICAgICAgZGlyLm1vZGlmaWVycyA9IGVtcHR5TW9kaWZpZXJzO1xuXHQgICAgfVxuXHQgICAgcmVzW2dldFJhd0Rpck5hbWUoZGlyKV0gPSBkaXI7XG5cdCAgICBkaXIuZGVmID0gcmVzb2x2ZUFzc2V0KHZtLiRvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpci5uYW1lLCB0cnVlKTtcblx0ICB9XG5cdCAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRSYXdEaXJOYW1lIChkaXIpIHtcblx0ICByZXR1cm4gZGlyLnJhd05hbWUgfHwgKChkaXIubmFtZSkgKyBcIi5cIiArIChPYmplY3Qua2V5cyhkaXIubW9kaWZpZXJzIHx8IHt9KS5qb2luKCcuJykpKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjYWxsSG9vayQxIChkaXIsIGhvb2ssIHZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KSB7XG5cdCAgdmFyIGZuID0gZGlyLmRlZiAmJiBkaXIuZGVmW2hvb2tdO1xuXHQgIGlmIChmbikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZm4odm5vZGUuZWxtLCBkaXIsIHZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgaGFuZGxlRXJyb3IoZSwgdm5vZGUuY29udGV4dCwgKFwiZGlyZWN0aXZlIFwiICsgKGRpci5uYW1lKSArIFwiIFwiICsgaG9vayArIFwiIGhvb2tcIikpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGJhc2VNb2R1bGVzID0gW1xuXHQgIHJlZixcblx0ICBkaXJlY3RpdmVzXG5cdF1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlQXR0cnMgKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgIHZhciBvcHRzID0gdm5vZGUuY29tcG9uZW50T3B0aW9ucztcblx0ICBpZiAoaXNEZWYob3B0cykgJiYgb3B0cy5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzID09PSBmYWxzZSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGlmIChpc1VuZGVmKG9sZFZub2RlLmRhdGEuYXR0cnMpICYmIGlzVW5kZWYodm5vZGUuZGF0YS5hdHRycykpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIga2V5LCBjdXIsIG9sZDtcblx0ICB2YXIgZWxtID0gdm5vZGUuZWxtO1xuXHQgIHZhciBvbGRBdHRycyA9IG9sZFZub2RlLmRhdGEuYXR0cnMgfHwge307XG5cdCAgdmFyIGF0dHJzID0gdm5vZGUuZGF0YS5hdHRycyB8fCB7fTtcblx0ICAvLyBjbG9uZSBvYnNlcnZlZCBvYmplY3RzLCBhcyB0aGUgdXNlciBwcm9iYWJseSB3YW50cyB0byBtdXRhdGUgaXRcblx0ICBpZiAoaXNEZWYoYXR0cnMuX19vYl9fKSkge1xuXHQgICAgYXR0cnMgPSB2bm9kZS5kYXRhLmF0dHJzID0gZXh0ZW5kKHt9LCBhdHRycyk7XG5cdCAgfVxuXHRcblx0ICBmb3IgKGtleSBpbiBhdHRycykge1xuXHQgICAgY3VyID0gYXR0cnNba2V5XTtcblx0ICAgIG9sZCA9IG9sZEF0dHJzW2tleV07XG5cdCAgICBpZiAob2xkICE9PSBjdXIpIHtcblx0ICAgICAgc2V0QXR0cihlbG0sIGtleSwgY3VyKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gIzQzOTE6IGluIElFOSwgc2V0dGluZyB0eXBlIGNhbiByZXNldCB2YWx1ZSBmb3IgaW5wdXRbdHlwZT1yYWRpb11cblx0ICAvLyAjNjY2NjogSUUvRWRnZSBmb3JjZXMgcHJvZ3Jlc3MgdmFsdWUgZG93biB0byAxIGJlZm9yZSBzZXR0aW5nIGEgbWF4XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKChpc0lFIHx8IGlzRWRnZSkgJiYgYXR0cnMudmFsdWUgIT09IG9sZEF0dHJzLnZhbHVlKSB7XG5cdCAgICBzZXRBdHRyKGVsbSwgJ3ZhbHVlJywgYXR0cnMudmFsdWUpO1xuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBvbGRBdHRycykge1xuXHQgICAgaWYgKGlzVW5kZWYoYXR0cnNba2V5XSkpIHtcblx0ICAgICAgaWYgKGlzWGxpbmsoa2V5KSkge1xuXHQgICAgICAgIGVsbS5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBnZXRYbGlua1Byb3Aoa2V5KSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzRW51bWVyYXRlZEF0dHIoa2V5KSkge1xuXHQgICAgICAgIGVsbS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0QXR0ciAoZWwsIGtleSwgdmFsdWUpIHtcblx0ICBpZiAoZWwudGFnTmFtZS5pbmRleE9mKCctJykgPiAtMSkge1xuXHQgICAgYmFzZVNldEF0dHIoZWwsIGtleSwgdmFsdWUpO1xuXHQgIH0gZWxzZSBpZiAoaXNCb29sZWFuQXR0cihrZXkpKSB7XG5cdCAgICAvLyBzZXQgYXR0cmlidXRlIGZvciBibGFuayB2YWx1ZVxuXHQgICAgLy8gZS5nLiA8b3B0aW9uIGRpc2FibGVkPlNlbGVjdCBvbmU8L29wdGlvbj5cblx0ICAgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHRlY2huaWNhbGx5IGFsbG93ZnVsbHNjcmVlbiBpcyBhIGJvb2xlYW4gYXR0cmlidXRlIGZvciA8aWZyYW1lPixcblx0ICAgICAgLy8gYnV0IEZsYXNoIGV4cGVjdHMgYSB2YWx1ZSBvZiBcInRydWVcIiB3aGVuIHVzZWQgb24gPGVtYmVkPiB0YWdcblx0ICAgICAgdmFsdWUgPSBrZXkgPT09ICdhbGxvd2Z1bGxzY3JlZW4nICYmIGVsLnRhZ05hbWUgPT09ICdFTUJFRCdcblx0ICAgICAgICA/ICd0cnVlJ1xuXHQgICAgICAgIDoga2V5O1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpIHx8IHZhbHVlID09PSAnZmFsc2UnID8gJ2ZhbHNlJyA6ICd0cnVlJyk7XG5cdCAgfSBlbHNlIGlmIChpc1hsaW5rKGtleSkpIHtcblx0ICAgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBnZXRYbGlua1Byb3Aoa2V5KSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXksIHZhbHVlKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgYmFzZVNldEF0dHIoZWwsIGtleSwgdmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYmFzZVNldEF0dHIgKGVsLCBrZXksIHZhbHVlKSB7XG5cdCAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7XG5cdCAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gIzcxMzg6IElFMTAgJiAxMSBmaXJlcyBpbnB1dCBldmVudCB3aGVuIHNldHRpbmcgcGxhY2Vob2xkZXIgb25cblx0ICAgIC8vIDx0ZXh0YXJlYT4uLi4gYmxvY2sgdGhlIGZpcnN0IGlucHV0IGV2ZW50IGFuZCByZW1vdmUgdGhlIGJsb2NrZXJcblx0ICAgIC8vIGltbWVkaWF0ZWx5LlxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoXG5cdCAgICAgIGlzSUUgJiYgIWlzSUU5ICYmXG5cdCAgICAgIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiZcblx0ICAgICAga2V5ID09PSAncGxhY2Vob2xkZXInICYmICFlbC5fX2llcGhcblx0ICAgICkge1xuXHQgICAgICB2YXIgYmxvY2tlciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0ICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpO1xuXHQgICAgICB9O1xuXHQgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpO1xuXHQgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICAgICAgZWwuX19pZXBoID0gdHJ1ZTsgLyogSUUgcGxhY2Vob2xkZXIgcGF0Y2hlZCAqL1xuXHQgICAgfVxuXHQgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGF0dHJzID0ge1xuXHQgIGNyZWF0ZTogdXBkYXRlQXR0cnMsXG5cdCAgdXBkYXRlOiB1cGRhdGVBdHRyc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUNsYXNzIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICB2YXIgZWwgPSB2bm9kZS5lbG07XG5cdCAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuXHQgIHZhciBvbGREYXRhID0gb2xkVm5vZGUuZGF0YTtcblx0ICBpZiAoXG5cdCAgICBpc1VuZGVmKGRhdGEuc3RhdGljQ2xhc3MpICYmXG5cdCAgICBpc1VuZGVmKGRhdGEuY2xhc3MpICYmIChcblx0ICAgICAgaXNVbmRlZihvbGREYXRhKSB8fCAoXG5cdCAgICAgICAgaXNVbmRlZihvbGREYXRhLnN0YXRpY0NsYXNzKSAmJlxuXHQgICAgICAgIGlzVW5kZWYob2xkRGF0YS5jbGFzcylcblx0ICAgICAgKVxuXHQgICAgKVxuXHQgICkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgY2xzID0gZ2VuQ2xhc3NGb3JWbm9kZSh2bm9kZSk7XG5cdFxuXHQgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIGNsYXNzZXNcblx0ICB2YXIgdHJhbnNpdGlvbkNsYXNzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzO1xuXHQgIGlmIChpc0RlZih0cmFuc2l0aW9uQ2xhc3MpKSB7XG5cdCAgICBjbHMgPSBjb25jYXQoY2xzLCBzdHJpbmdpZnlDbGFzcyh0cmFuc2l0aW9uQ2xhc3MpKTtcblx0ICB9XG5cdFxuXHQgIC8vIHNldCB0aGUgY2xhc3Ncblx0ICBpZiAoY2xzICE9PSBlbC5fcHJldkNsYXNzKSB7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcblx0ICAgIGVsLl9wcmV2Q2xhc3MgPSBjbHM7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIga2xhc3MgPSB7XG5cdCAgY3JlYXRlOiB1cGRhdGVDbGFzcyxcblx0ICB1cGRhdGU6IHVwZGF0ZUNsYXNzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyogICovXG5cdFxuXHRcblx0XG5cdFxuXHRcblx0XG5cdFxuXHRcblx0XG5cdC8vIGFkZCBhIHJhdyBhdHRyICh1c2UgdGhpcyBpbiBwcmVUcmFuc2Zvcm1zKVxuXHRcblx0XG5cdFxuXHRcblx0XG5cdFxuXHRcblx0XG5cdC8vIG5vdGU6IHRoaXMgb25seSByZW1vdmVzIHRoZSBhdHRyIGZyb20gdGhlIEFycmF5IChhdHRyc0xpc3QpIHNvIHRoYXQgaXRcblx0Ly8gZG9lc24ndCBnZXQgcHJvY2Vzc2VkIGJ5IHByb2Nlc3NBdHRycy5cblx0Ly8gQnkgZGVmYXVsdCBpdCBkb2VzIE5PVCByZW1vdmUgaXQgZnJvbSB0aGUgbWFwIChhdHRyc01hcCkgYmVjYXVzZSB0aGUgbWFwIGlzXG5cdC8vIG5lZWRlZCBkdXJpbmcgY29kZWdlbi5cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIENyb3NzLXBsYXRmb3JtIGNvZGUgZ2VuZXJhdGlvbiBmb3IgY29tcG9uZW50IHYtbW9kZWxcblx0ICovXG5cdFxuXHRcblx0LyoqXG5cdCAqIENyb3NzLXBsYXRmb3JtIGNvZGVnZW4gaGVscGVyIGZvciBnZW5lcmF0aW5nIHYtbW9kZWwgdmFsdWUgYXNzaWdubWVudCBjb2RlLlxuXHQgKi9cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gaW4gc29tZSBjYXNlcywgdGhlIGV2ZW50IHVzZWQgaGFzIHRvIGJlIGRldGVybWluZWQgYXQgcnVudGltZVxuXHQvLyBzbyB3ZSB1c2VkIHNvbWUgcmVzZXJ2ZWQgdG9rZW5zIGR1cmluZyBjb21waWxlLlxuXHR2YXIgUkFOR0VfVE9LRU4gPSAnX19yJztcblx0dmFyIENIRUNLQk9YX1JBRElPX1RPS0VOID0gJ19fYyc7XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIG5vcm1hbGl6ZSB2LW1vZGVsIGV2ZW50IHRva2VucyB0aGF0IGNhbiBvbmx5IGJlIGRldGVybWluZWQgYXQgcnVudGltZS5cblx0Ly8gaXQncyBpbXBvcnRhbnQgdG8gcGxhY2UgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBpbiB0aGUgYXJyYXkgYmVjYXVzZVxuXHQvLyB0aGUgd2hvbGUgcG9pbnQgaXMgZW5zdXJpbmcgdGhlIHYtbW9kZWwgY2FsbGJhY2sgZ2V0cyBjYWxsZWQgYmVmb3JlXG5cdC8vIHVzZXItYXR0YWNoZWQgaGFuZGxlcnMuXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50cyAob24pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNEZWYob25bUkFOR0VfVE9LRU5dKSkge1xuXHQgICAgLy8gSUUgaW5wdXRbdHlwZT1yYW5nZV0gb25seSBzdXBwb3J0cyBgY2hhbmdlYCBldmVudFxuXHQgICAgdmFyIGV2ZW50ID0gaXNJRSA/ICdjaGFuZ2UnIDogJ2lucHV0Jztcblx0ICAgIG9uW2V2ZW50XSA9IFtdLmNvbmNhdChvbltSQU5HRV9UT0tFTl0sIG9uW2V2ZW50XSB8fCBbXSk7XG5cdCAgICBkZWxldGUgb25bUkFOR0VfVE9LRU5dO1xuXHQgIH1cblx0ICAvLyBUaGlzIHdhcyBvcmlnaW5hbGx5IGludGVuZGVkIHRvIGZpeCAjNDUyMSBidXQgbm8gbG9uZ2VyIG5lY2Vzc2FyeVxuXHQgIC8vIGFmdGVyIDIuNS4gS2VlcGluZyBpdCBmb3IgYmFja3dhcmRzIGNvbXBhdCB3aXRoIGdlbmVyYXRlZCBjb2RlIGZyb20gPCAyLjRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNEZWYob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dKSkge1xuXHQgICAgb24uY2hhbmdlID0gW10uY29uY2F0KG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXSwgb24uY2hhbmdlIHx8IFtdKTtcblx0ICAgIGRlbGV0ZSBvbltDSEVDS0JPWF9SQURJT19UT0tFTl07XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGFyZ2V0JDE7XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVPbmNlSGFuZGxlciAoaGFuZGxlciwgZXZlbnQsIGNhcHR1cmUpIHtcblx0ICB2YXIgX3RhcmdldCA9IHRhcmdldCQxOyAvLyBzYXZlIGN1cnJlbnQgdGFyZ2V0IGVsZW1lbnQgaW4gY2xvc3VyZVxuXHQgIHJldHVybiBmdW5jdGlvbiBvbmNlSGFuZGxlciAoKSB7XG5cdCAgICB2YXIgcmVzID0gaGFuZGxlci5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHQgICAgaWYgKHJlcyAhPT0gbnVsbCkge1xuXHQgICAgICByZW1vdmUkMihldmVudCwgb25jZUhhbmRsZXIsIGNhcHR1cmUsIF90YXJnZXQpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkJDEgKFxuXHQgIGV2ZW50LFxuXHQgIGhhbmRsZXIsXG5cdCAgb25jZSQkMSxcblx0ICBjYXB0dXJlLFxuXHQgIHBhc3NpdmVcblx0KSB7XG5cdCAgaGFuZGxlciA9IHdpdGhNYWNyb1Rhc2soaGFuZGxlcik7XG5cdCAgaWYgKG9uY2UkJDEpIHsgaGFuZGxlciA9IGNyZWF0ZU9uY2VIYW5kbGVyKGhhbmRsZXIsIGV2ZW50LCBjYXB0dXJlKTsgfVxuXHQgIHRhcmdldCQxLmFkZEV2ZW50TGlzdGVuZXIoXG5cdCAgICBldmVudCxcblx0ICAgIGhhbmRsZXIsXG5cdCAgICBzdXBwb3J0c1Bhc3NpdmVcblx0ICAgICAgPyB7IGNhcHR1cmU6IGNhcHR1cmUsIHBhc3NpdmU6IHBhc3NpdmUgfVxuXHQgICAgICA6IGNhcHR1cmVcblx0ICApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmUkMiAoXG5cdCAgZXZlbnQsXG5cdCAgaGFuZGxlcixcblx0ICBjYXB0dXJlLFxuXHQgIF90YXJnZXRcblx0KSB7XG5cdCAgKF90YXJnZXQgfHwgdGFyZ2V0JDEpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG5cdCAgICBldmVudCxcblx0ICAgIGhhbmRsZXIuX3dpdGhUYXNrIHx8IGhhbmRsZXIsXG5cdCAgICBjYXB0dXJlXG5cdCAgKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlRE9NTGlzdGVuZXJzIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLm9uKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEub24pKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIG9uID0gdm5vZGUuZGF0YS5vbiB8fCB7fTtcblx0ICB2YXIgb2xkT24gPSBvbGRWbm9kZS5kYXRhLm9uIHx8IHt9O1xuXHQgIHRhcmdldCQxID0gdm5vZGUuZWxtO1xuXHQgIG5vcm1hbGl6ZUV2ZW50cyhvbik7XG5cdCAgdXBkYXRlTGlzdGVuZXJzKG9uLCBvbGRPbiwgYWRkJDEsIHJlbW92ZSQyLCB2bm9kZS5jb250ZXh0KTtcblx0ICB0YXJnZXQkMSA9IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0dmFyIGV2ZW50cyA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZURPTUxpc3RlbmVycyxcblx0ICB1cGRhdGU6IHVwZGF0ZURPTUxpc3RlbmVyc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZURPTVByb3BzIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmRvbVByb3BzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuZG9tUHJvcHMpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIGtleSwgY3VyO1xuXHQgIHZhciBlbG0gPSB2bm9kZS5lbG07XG5cdCAgdmFyIG9sZFByb3BzID0gb2xkVm5vZGUuZGF0YS5kb21Qcm9wcyB8fCB7fTtcblx0ICB2YXIgcHJvcHMgPSB2bm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9O1xuXHQgIC8vIGNsb25lIG9ic2VydmVkIG9iamVjdHMsIGFzIHRoZSB1c2VyIHByb2JhYmx5IHdhbnRzIHRvIG11dGF0ZSBpdFxuXHQgIGlmIChpc0RlZihwcm9wcy5fX29iX18pKSB7XG5cdCAgICBwcm9wcyA9IHZub2RlLmRhdGEuZG9tUHJvcHMgPSBleHRlbmQoe30sIHByb3BzKTtcblx0ICB9XG5cdFxuXHQgIGZvciAoa2V5IGluIG9sZFByb3BzKSB7XG5cdCAgICBpZiAoaXNVbmRlZihwcm9wc1trZXldKSkge1xuXHQgICAgICBlbG1ba2V5XSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBwcm9wcykge1xuXHQgICAgY3VyID0gcHJvcHNba2V5XTtcblx0ICAgIC8vIGlnbm9yZSBjaGlsZHJlbiBpZiB0aGUgbm9kZSBoYXMgdGV4dENvbnRlbnQgb3IgaW5uZXJIVE1MLFxuXHQgICAgLy8gYXMgdGhlc2Ugd2lsbCB0aHJvdyBhd2F5IGV4aXN0aW5nIERPTSBub2RlcyBhbmQgY2F1c2UgcmVtb3ZhbCBlcnJvcnNcblx0ICAgIC8vIG9uIHN1YnNlcXVlbnQgcGF0Y2hlcyAoIzMzNjApXG5cdCAgICBpZiAoa2V5ID09PSAndGV4dENvbnRlbnQnIHx8IGtleSA9PT0gJ2lubmVySFRNTCcpIHtcblx0ICAgICAgaWYgKHZub2RlLmNoaWxkcmVuKSB7IHZub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7IH1cblx0ICAgICAgaWYgKGN1ciA9PT0gb2xkUHJvcHNba2V5XSkgeyBjb250aW51ZSB9XG5cdCAgICAgIC8vICM2NjAxIHdvcmsgYXJvdW5kIENocm9tZSB2ZXJzaW9uIDw9IDU1IGJ1ZyB3aGVyZSBzaW5nbGUgdGV4dE5vZGVcblx0ICAgICAgLy8gcmVwbGFjZWQgYnkgaW5uZXJIVE1ML3RleHRDb250ZW50IHJldGFpbnMgaXRzIHBhcmVudE5vZGUgcHJvcGVydHlcblx0ICAgICAgaWYgKGVsbS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIGVsbS5yZW1vdmVDaGlsZChlbG0uY2hpbGROb2Rlc1swXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoa2V5ID09PSAndmFsdWUnKSB7XG5cdCAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIF92YWx1ZSBhcyB3ZWxsIHNpbmNlXG5cdCAgICAgIC8vIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmUgc3RyaW5naWZpZWRcblx0ICAgICAgZWxtLl92YWx1ZSA9IGN1cjtcblx0ICAgICAgLy8gYXZvaWQgcmVzZXR0aW5nIGN1cnNvciBwb3NpdGlvbiB3aGVuIHZhbHVlIGlzIHRoZSBzYW1lXG5cdCAgICAgIHZhciBzdHJDdXIgPSBpc1VuZGVmKGN1cikgPyAnJyA6IFN0cmluZyhjdXIpO1xuXHQgICAgICBpZiAoc2hvdWxkVXBkYXRlVmFsdWUoZWxtLCBzdHJDdXIpKSB7XG5cdCAgICAgICAgZWxtLnZhbHVlID0gc3RyQ3VyO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbG1ba2V5XSA9IGN1cjtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIGNoZWNrIHBsYXRmb3Jtcy93ZWIvdXRpbC9hdHRycy5qcyBhY2NlcHRWYWx1ZVxuXHRcblx0XG5cdGZ1bmN0aW9uIHNob3VsZFVwZGF0ZVZhbHVlIChlbG0sIGNoZWNrVmFsKSB7XG5cdCAgcmV0dXJuICghZWxtLmNvbXBvc2luZyAmJiAoXG5cdCAgICBlbG0udGFnTmFtZSA9PT0gJ09QVElPTicgfHxcblx0ICAgIGlzTm90SW5Gb2N1c0FuZERpcnR5KGVsbSwgY2hlY2tWYWwpIHx8XG5cdCAgICBpc0RpcnR5V2l0aE1vZGlmaWVycyhlbG0sIGNoZWNrVmFsKVxuXHQgICkpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzTm90SW5Gb2N1c0FuZERpcnR5IChlbG0sIGNoZWNrVmFsKSB7XG5cdCAgLy8gcmV0dXJuIHRydWUgd2hlbiB0ZXh0Ym94ICgubnVtYmVyIGFuZCAudHJpbSkgbG9zZXMgZm9jdXMgYW5kIGl0cyB2YWx1ZSBpc1xuXHQgIC8vIG5vdCBlcXVhbCB0byB0aGUgdXBkYXRlZCB2YWx1ZVxuXHQgIHZhciBub3RJbkZvY3VzID0gdHJ1ZTtcblx0ICAvLyAjNjE1N1xuXHQgIC8vIHdvcmsgYXJvdW5kIElFIGJ1ZyB3aGVuIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluIGFuIGlmcmFtZVxuXHQgIHRyeSB7IG5vdEluRm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBlbG07IH0gY2F0Y2ggKGUpIHt9XG5cdCAgcmV0dXJuIG5vdEluRm9jdXMgJiYgZWxtLnZhbHVlICE9PSBjaGVja1ZhbFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0RpcnR5V2l0aE1vZGlmaWVycyAoZWxtLCBuZXdWYWwpIHtcblx0ICB2YXIgdmFsdWUgPSBlbG0udmFsdWU7XG5cdCAgdmFyIG1vZGlmaWVycyA9IGVsbS5fdk1vZGlmaWVyczsgLy8gaW5qZWN0ZWQgYnkgdi1tb2RlbCBydW50aW1lXG5cdCAgaWYgKGlzRGVmKG1vZGlmaWVycykpIHtcblx0ICAgIGlmIChtb2RpZmllcnMubGF6eSkge1xuXHQgICAgICAvLyBpbnB1dHMgd2l0aCBsYXp5IHNob3VsZCBvbmx5IGJlIHVwZGF0ZWQgd2hlbiBub3QgaW4gZm9jdXNcblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICB9XG5cdCAgICBpZiAobW9kaWZpZXJzLm51bWJlcikge1xuXHQgICAgICByZXR1cm4gdG9OdW1iZXIodmFsdWUpICE9PSB0b051bWJlcihuZXdWYWwpXG5cdCAgICB9XG5cdCAgICBpZiAobW9kaWZpZXJzLnRyaW0pIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlLnRyaW0oKSAhPT0gbmV3VmFsLnRyaW0oKVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgIT09IG5ld1ZhbFxuXHR9XG5cdFxuXHR2YXIgZG9tUHJvcHMgPSB7XG5cdCAgY3JlYXRlOiB1cGRhdGVET01Qcm9wcyxcblx0ICB1cGRhdGU6IHVwZGF0ZURPTVByb3BzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHBhcnNlU3R5bGVUZXh0ID0gY2FjaGVkKGZ1bmN0aW9uIChjc3NUZXh0KSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIHZhciBsaXN0RGVsaW1pdGVyID0gLzsoPyFbXihdKlxcKSkvZztcblx0ICB2YXIgcHJvcGVydHlEZWxpbWl0ZXIgPSAvOiguKykvO1xuXHQgIGNzc1RleHQuc3BsaXQobGlzdERlbGltaXRlcikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgaWYgKGl0ZW0pIHtcblx0ICAgICAgdmFyIHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXIpO1xuXHQgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmVzW3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHJlc1xuXHR9KTtcblx0XG5cdC8vIG1lcmdlIHN0YXRpYyBhbmQgZHluYW1pYyBzdHlsZSBkYXRhIG9uIHRoZSBzYW1lIHZub2RlXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlRGF0YSAoZGF0YSkge1xuXHQgIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyhkYXRhLnN0eWxlKTtcblx0ICAvLyBzdGF0aWMgc3R5bGUgaXMgcHJlLXByb2Nlc3NlZCBpbnRvIGFuIG9iamVjdCBkdXJpbmcgY29tcGlsYXRpb25cblx0ICAvLyBhbmQgaXMgYWx3YXlzIGEgZnJlc2ggb2JqZWN0LCBzbyBpdCdzIHNhZmUgdG8gbWVyZ2UgaW50byBpdFxuXHQgIHJldHVybiBkYXRhLnN0YXRpY1N0eWxlXG5cdCAgICA/IGV4dGVuZChkYXRhLnN0YXRpY1N0eWxlLCBzdHlsZSlcblx0ICAgIDogc3R5bGVcblx0fVxuXHRcblx0Ly8gbm9ybWFsaXplIHBvc3NpYmxlIGFycmF5IC8gc3RyaW5nIHZhbHVlcyBpbnRvIE9iamVjdFxuXHRmdW5jdGlvbiBub3JtYWxpemVTdHlsZUJpbmRpbmcgKGJpbmRpbmdTdHlsZSkge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KGJpbmRpbmdTdHlsZSkpIHtcblx0ICAgIHJldHVybiB0b09iamVjdChiaW5kaW5nU3R5bGUpXG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgYmluZGluZ1N0eWxlID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHBhcnNlU3R5bGVUZXh0KGJpbmRpbmdTdHlsZSlcblx0ICB9XG5cdCAgcmV0dXJuIGJpbmRpbmdTdHlsZVxuXHR9XG5cdFxuXHQvKipcblx0ICogcGFyZW50IGNvbXBvbmVudCBzdHlsZSBzaG91bGQgYmUgYWZ0ZXIgY2hpbGQnc1xuXHQgKiBzbyB0aGF0IHBhcmVudCBjb21wb25lbnQncyBzdHlsZSBjb3VsZCBvdmVycmlkZSBpdFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0U3R5bGUgKHZub2RlLCBjaGVja0NoaWxkKSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIHZhciBzdHlsZURhdGE7XG5cdFxuXHQgIGlmIChjaGVja0NoaWxkKSB7XG5cdCAgICB2YXIgY2hpbGROb2RlID0gdm5vZGU7XG5cdCAgICB3aGlsZSAoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7XG5cdCAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG5cdCAgICAgIGlmIChcblx0ICAgICAgICBjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEgJiZcblx0ICAgICAgICAoc3R5bGVEYXRhID0gbm9ybWFsaXplU3R5bGVEYXRhKGNoaWxkTm9kZS5kYXRhKSlcblx0ICAgICAgKSB7XG5cdCAgICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEodm5vZGUuZGF0YSkpKSB7XG5cdCAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHBhcmVudE5vZGUgPSB2bm9kZTtcblx0ICB3aGlsZSAoKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHtcblx0ICAgIGlmIChwYXJlbnROb2RlLmRhdGEgJiYgKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YShwYXJlbnROb2RlLmRhdGEpKSkge1xuXHQgICAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGNzc1ZhclJFID0gL14tLS87XG5cdHZhciBpbXBvcnRhbnRSRSA9IC9cXHMqIWltcG9ydGFudCQvO1xuXHR2YXIgc2V0UHJvcCA9IGZ1bmN0aW9uIChlbCwgbmFtZSwgdmFsKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGNzc1ZhclJFLnRlc3QobmFtZSkpIHtcblx0ICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7XG5cdCAgfSBlbHNlIGlmIChpbXBvcnRhbnRSRS50ZXN0KHZhbCkpIHtcblx0ICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbC5yZXBsYWNlKGltcG9ydGFudFJFLCAnJyksICdpbXBvcnRhbnQnKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplKG5hbWUpO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuXHQgICAgICAvLyBTdXBwb3J0IHZhbHVlcyBhcnJheSBjcmVhdGVkIGJ5IGF1dG9wcmVmaXhlciwgZS5nLlxuXHQgICAgICAvLyB7ZGlzcGxheTogW1wiLXdlYmtpdC1ib3hcIiwgXCItbXMtZmxleGJveFwiLCBcImZsZXhcIl19XG5cdCAgICAgIC8vIFNldCB0aGVtIG9uZSBieSBvbmUsIGFuZCB0aGUgYnJvd3NlciB3aWxsIG9ubHkgc2V0IHRob3NlIGl0IGNhbiByZWNvZ25pemVcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHZhbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgIGVsLnN0eWxlW25vcm1hbGl6ZWROYW1lXSA9IHZhbFtpXTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdID0gdmFsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciB2ZW5kb3JOYW1lcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuXHRcblx0dmFyIGVtcHR5U3R5bGU7XG5cdHZhciBub3JtYWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHByb3ApIHtcblx0ICBlbXB0eVN0eWxlID0gZW1wdHlTdHlsZSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcblx0ICBwcm9wID0gY2FtZWxpemUocHJvcCk7XG5cdCAgaWYgKHByb3AgIT09ICdmaWx0ZXInICYmIChwcm9wIGluIGVtcHR5U3R5bGUpKSB7XG5cdCAgICByZXR1cm4gcHJvcFxuXHQgIH1cblx0ICB2YXIgY2FwTmFtZSA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVuZG9yTmFtZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBuYW1lID0gdmVuZG9yTmFtZXNbaV0gKyBjYXBOYW1lO1xuXHQgICAgaWYgKG5hbWUgaW4gZW1wdHlTdHlsZSkge1xuXHQgICAgICByZXR1cm4gbmFtZVxuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVTdHlsZSAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuXHQgIHZhciBvbGREYXRhID0gb2xkVm5vZGUuZGF0YTtcblx0XG5cdCAgaWYgKGlzVW5kZWYoZGF0YS5zdGF0aWNTdHlsZSkgJiYgaXNVbmRlZihkYXRhLnN0eWxlKSAmJlxuXHQgICAgaXNVbmRlZihvbGREYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKG9sZERhdGEuc3R5bGUpXG5cdCAgKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHZhciBjdXIsIG5hbWU7XG5cdCAgdmFyIGVsID0gdm5vZGUuZWxtO1xuXHQgIHZhciBvbGRTdGF0aWNTdHlsZSA9IG9sZERhdGEuc3RhdGljU3R5bGU7XG5cdCAgdmFyIG9sZFN0eWxlQmluZGluZyA9IG9sZERhdGEubm9ybWFsaXplZFN0eWxlIHx8IG9sZERhdGEuc3R5bGUgfHwge307XG5cdFxuXHQgIC8vIGlmIHN0YXRpYyBzdHlsZSBleGlzdHMsIHN0eWxlYmluZGluZyBhbHJlYWR5IG1lcmdlZCBpbnRvIGl0IHdoZW4gZG9pbmcgbm9ybWFsaXplU3R5bGVEYXRhXG5cdCAgdmFyIG9sZFN0eWxlID0gb2xkU3RhdGljU3R5bGUgfHwgb2xkU3R5bGVCaW5kaW5nO1xuXHRcblx0ICB2YXIgc3R5bGUgPSBub3JtYWxpemVTdHlsZUJpbmRpbmcodm5vZGUuZGF0YS5zdHlsZSkgfHwge307XG5cdFxuXHQgIC8vIHN0b3JlIG5vcm1hbGl6ZWQgc3R5bGUgdW5kZXIgYSBkaWZmZXJlbnQga2V5IGZvciBuZXh0IGRpZmZcblx0ICAvLyBtYWtlIHN1cmUgdG8gY2xvbmUgaXQgaWYgaXQncyByZWFjdGl2ZSwgc2luY2UgdGhlIHVzZXIgbGlrZWx5IHdhbnRzXG5cdCAgLy8gdG8gbXV0YXRlIGl0LlxuXHQgIHZub2RlLmRhdGEubm9ybWFsaXplZFN0eWxlID0gaXNEZWYoc3R5bGUuX19vYl9fKVxuXHQgICAgPyBleHRlbmQoe30sIHN0eWxlKVxuXHQgICAgOiBzdHlsZTtcblx0XG5cdCAgdmFyIG5ld1N0eWxlID0gZ2V0U3R5bGUodm5vZGUsIHRydWUpO1xuXHRcblx0ICBmb3IgKG5hbWUgaW4gb2xkU3R5bGUpIHtcblx0ICAgIGlmIChpc1VuZGVmKG5ld1N0eWxlW25hbWVdKSkge1xuXHQgICAgICBzZXRQcm9wKGVsLCBuYW1lLCAnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAobmFtZSBpbiBuZXdTdHlsZSkge1xuXHQgICAgY3VyID0gbmV3U3R5bGVbbmFtZV07XG5cdCAgICBpZiAoY3VyICE9PSBvbGRTdHlsZVtuYW1lXSkge1xuXHQgICAgICAvLyBpZTkgc2V0dGluZyB0byBudWxsIGhhcyBubyBlZmZlY3QsIG11c3QgdXNlIGVtcHR5IHN0cmluZ1xuXHQgICAgICBzZXRQcm9wKGVsLCBuYW1lLCBjdXIgPT0gbnVsbCA/ICcnIDogY3VyKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBzdHlsZSA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZVN0eWxlLFxuXHQgIHVwZGF0ZTogdXBkYXRlU3R5bGVcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKipcblx0ICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgU1ZHIHNpbmNlIGNsYXNzTGlzdCBpcyBub3Qgc3VwcG9ydGVkIG9uXG5cdCAqIFNWRyBlbGVtZW50cyBpbiBJRVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbHMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWNscyB8fCAhKGNscyA9IGNscy50cmltKCkpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgaWYgKGNscy5pbmRleE9mKCcgJykgPiAtMSkge1xuXHQgICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBlbC5jbGFzc0xpc3QuYWRkKGMpOyB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9IFwiIFwiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIjtcblx0ICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKGN1ciArIGNscykudHJpbSgpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb25cblx0ICogU1ZHIGVsZW1lbnRzIGluIElFXG5cdCAqL1xuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyAoZWwsIGNscykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghY2xzIHx8ICEoY2xzID0gY2xzLnRyaW0oKSkpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBpZiAoY2xzLmluZGV4T2YoJyAnKSA+IC0xKSB7XG5cdCAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5yZW1vdmUoYyk7IH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFlbC5jbGFzc0xpc3QubGVuZ3RoKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9IFwiIFwiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIjtcblx0ICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG5cdCAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG5cdCAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcblx0ICAgIH1cblx0ICAgIGN1ciA9IGN1ci50cmltKCk7XG5cdCAgICBpZiAoY3VyKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjdXIpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvbiAoZGVmKSB7XG5cdCAgaWYgKCFkZWYpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmICh0eXBlb2YgZGVmID09PSAnb2JqZWN0Jykge1xuXHQgICAgdmFyIHJlcyA9IHt9O1xuXHQgICAgaWYgKGRlZi5jc3MgIT09IGZhbHNlKSB7XG5cdCAgICAgIGV4dGVuZChyZXMsIGF1dG9Dc3NUcmFuc2l0aW9uKGRlZi5uYW1lIHx8ICd2JykpO1xuXHQgICAgfVxuXHQgICAgZXh0ZW5kKHJlcywgZGVmKTtcblx0ICAgIHJldHVybiByZXNcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBkZWYgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gYXV0b0Nzc1RyYW5zaXRpb24oZGVmKVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGF1dG9Dc3NUcmFuc2l0aW9uID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGVudGVyQ2xhc3M6IChuYW1lICsgXCItZW50ZXJcIiksXG5cdCAgICBlbnRlclRvQ2xhc3M6IChuYW1lICsgXCItZW50ZXItdG9cIiksXG5cdCAgICBlbnRlckFjdGl2ZUNsYXNzOiAobmFtZSArIFwiLWVudGVyLWFjdGl2ZVwiKSxcblx0ICAgIGxlYXZlQ2xhc3M6IChuYW1lICsgXCItbGVhdmVcIiksXG5cdCAgICBsZWF2ZVRvQ2xhc3M6IChuYW1lICsgXCItbGVhdmUtdG9cIiksXG5cdCAgICBsZWF2ZUFjdGl2ZUNsYXNzOiAobmFtZSArIFwiLWxlYXZlLWFjdGl2ZVwiKVxuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgaGFzVHJhbnNpdGlvbiA9IGluQnJvd3NlciAmJiAhaXNJRTk7XG5cdHZhciBUUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuXHR2YXIgQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG5cdFxuXHQvLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5cdHZhciB0cmFuc2l0aW9uUHJvcCA9ICd0cmFuc2l0aW9uJztcblx0dmFyIHRyYW5zaXRpb25FbmRFdmVudCA9ICd0cmFuc2l0aW9uZW5kJztcblx0dmFyIGFuaW1hdGlvblByb3AgPSAnYW5pbWF0aW9uJztcblx0dmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gJ2FuaW1hdGlvbmVuZCc7XG5cdGlmIChoYXNUcmFuc2l0aW9uKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuXHQgICAgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkXG5cdCAgKSB7XG5cdCAgICB0cmFuc2l0aW9uUHJvcCA9ICdXZWJraXRUcmFuc2l0aW9uJztcblx0ICAgIHRyYW5zaXRpb25FbmRFdmVudCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kJztcblx0ICB9XG5cdCAgaWYgKHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmXG5cdCAgICB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZFxuXHQgICkge1xuXHQgICAgYW5pbWF0aW9uUHJvcCA9ICdXZWJraXRBbmltYXRpb24nO1xuXHQgICAgYW5pbWF0aW9uRW5kRXZlbnQgPSAnd2Via2l0QW5pbWF0aW9uRW5kJztcblx0ICB9XG5cdH1cblx0XG5cdC8vIGJpbmRpbmcgdG8gd2luZG93IGlzIG5lY2Vzc2FyeSB0byBtYWtlIGhvdCByZWxvYWQgd29yayBpbiBJRSBpbiBzdHJpY3QgbW9kZVxuXHR2YXIgcmFmID0gaW5Ccm93c2VyXG5cdCAgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG5cdCAgICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpXG5cdCAgICA6IHNldFRpbWVvdXRcblx0ICA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4oKTsgfTtcblx0XG5cdGZ1bmN0aW9uIG5leHRGcmFtZSAoZm4pIHtcblx0ICByYWYoZnVuY3Rpb24gKCkge1xuXHQgICAgcmFmKGZuKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7XG5cdCAgdmFyIHRyYW5zaXRpb25DbGFzc2VzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzIHx8IChlbC5fdHJhbnNpdGlvbkNsYXNzZXMgPSBbXSk7XG5cdCAgaWYgKHRyYW5zaXRpb25DbGFzc2VzLmluZGV4T2YoY2xzKSA8IDApIHtcblx0ICAgIHRyYW5zaXRpb25DbGFzc2VzLnB1c2goY2xzKTtcblx0ICAgIGFkZENsYXNzKGVsLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3Nlcykge1xuXHQgICAgcmVtb3ZlKGVsLl90cmFuc2l0aW9uQ2xhc3NlcywgY2xzKTtcblx0ICB9XG5cdCAgcmVtb3ZlQ2xhc3MoZWwsIGNscyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyAoXG5cdCAgZWwsXG5cdCAgZXhwZWN0ZWRUeXBlLFxuXHQgIGNiXG5cdCkge1xuXHQgIHZhciByZWYgPSBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKTtcblx0ICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuXHQgIHZhciB0aW1lb3V0ID0gcmVmLnRpbWVvdXQ7XG5cdCAgdmFyIHByb3BDb3VudCA9IHJlZi5wcm9wQ291bnQ7XG5cdCAgaWYgKCF0eXBlKSB7IHJldHVybiBjYigpIH1cblx0ICB2YXIgZXZlbnQgPSB0eXBlID09PSBUUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG5cdCAgdmFyIGVuZGVkID0gMDtcblx0ICB2YXIgZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpO1xuXHQgICAgY2IoKTtcblx0ICB9O1xuXHQgIHZhciBvbkVuZCA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG5cdCAgICAgIGlmICgrK2VuZGVkID49IHByb3BDb3VudCkge1xuXHQgICAgICAgIGVuZCgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkge1xuXHQgICAgICBlbmQoKTtcblx0ICAgIH1cblx0ICB9LCB0aW1lb3V0ICsgMSk7XG5cdCAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpO1xuXHR9XG5cdFxuXHR2YXIgdHJhbnNmb3JtUkUgPSAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvO1xuXHRcblx0ZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8gKGVsLCBleHBlY3RlZFR5cGUpIHtcblx0ICB2YXIgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuXHQgIHZhciB0cmFuc2l0aW9uRGVsYXlzID0gc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0RlbGF5J10uc3BsaXQoJywgJyk7XG5cdCAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbnMgPSBzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nXS5zcGxpdCgnLCAnKTtcblx0ICB2YXIgdHJhbnNpdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KHRyYW5zaXRpb25EZWxheXMsIHRyYW5zaXRpb25EdXJhdGlvbnMpO1xuXHQgIHZhciBhbmltYXRpb25EZWxheXMgPSBzdHlsZXNbYW5pbWF0aW9uUHJvcCArICdEZWxheSddLnNwbGl0KCcsICcpO1xuXHQgIHZhciBhbmltYXRpb25EdXJhdGlvbnMgPSBzdHlsZXNbYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbiddLnNwbGl0KCcsICcpO1xuXHQgIHZhciBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7XG5cdFxuXHQgIHZhciB0eXBlO1xuXHQgIHZhciB0aW1lb3V0ID0gMDtcblx0ICB2YXIgcHJvcENvdW50ID0gMDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoZXhwZWN0ZWRUeXBlID09PSBUUkFOU0lUSU9OKSB7XG5cdCAgICBpZiAodHJhbnNpdGlvblRpbWVvdXQgPiAwKSB7XG5cdCAgICAgIHR5cGUgPSBUUkFOU0lUSU9OO1xuXHQgICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7XG5cdCAgICAgIHByb3BDb3VudCA9IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHtcblx0ICAgIGlmIChhbmltYXRpb25UaW1lb3V0ID4gMCkge1xuXHQgICAgICB0eXBlID0gQU5JTUFUSU9OO1xuXHQgICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDtcblx0ICAgICAgcHJvcENvdW50ID0gYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcblx0ICAgIHR5cGUgPSB0aW1lb3V0ID4gMFxuXHQgICAgICA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dFxuXHQgICAgICAgID8gVFJBTlNJVElPTlxuXHQgICAgICAgIDogQU5JTUFUSU9OXG5cdCAgICAgIDogbnVsbDtcblx0ICAgIHByb3BDb3VudCA9IHR5cGVcblx0ICAgICAgPyB0eXBlID09PSBUUkFOU0lUSU9OXG5cdCAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aFxuXHQgICAgICAgIDogYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aFxuXHQgICAgICA6IDA7XG5cdCAgfVxuXHQgIHZhciBoYXNUcmFuc2Zvcm0gPVxuXHQgICAgdHlwZSA9PT0gVFJBTlNJVElPTiAmJlxuXHQgICAgdHJhbnNmb3JtUkUudGVzdChzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnUHJvcGVydHknXSk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHR5cGU6IHR5cGUsXG5cdCAgICB0aW1lb3V0OiB0aW1lb3V0LFxuXHQgICAgcHJvcENvdW50OiBwcm9wQ291bnQsXG5cdCAgICBoYXNUcmFuc2Zvcm06IGhhc1RyYW5zZm9ybVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VGltZW91dCAoZGVsYXlzLCBkdXJhdGlvbnMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xuXHQgICAgZGVsYXlzID0gZGVsYXlzLmNvbmNhdChkZWxheXMpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIGR1cmF0aW9ucy5tYXAoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgIHJldHVybiB0b01zKGQpICsgdG9NcyhkZWxheXNbaV0pXG5cdCAgfSkpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvTXMgKHMpIHtcblx0ICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpKSAqIDEwMDBcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBlbnRlciAodm5vZGUsIHRvZ2dsZURpc3BsYXkpIHtcblx0ICB2YXIgZWwgPSB2bm9kZS5lbG07XG5cdFxuXHQgIC8vIGNhbGwgbGVhdmUgY2FsbGJhY2sgbm93XG5cdCAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkge1xuXHQgICAgZWwuX2xlYXZlQ2IuY2FuY2VsbGVkID0gdHJ1ZTtcblx0ICAgIGVsLl9sZWF2ZUNiKCk7XG5cdCAgfVxuXHRcblx0ICB2YXIgZGF0YSA9IHJlc29sdmVUcmFuc2l0aW9uKHZub2RlLmRhdGEudHJhbnNpdGlvbik7XG5cdCAgaWYgKGlzVW5kZWYoZGF0YSkpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzRGVmKGVsLl9lbnRlckNiKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgY3NzID0gZGF0YS5jc3M7XG5cdCAgdmFyIHR5cGUgPSBkYXRhLnR5cGU7XG5cdCAgdmFyIGVudGVyQ2xhc3MgPSBkYXRhLmVudGVyQ2xhc3M7XG5cdCAgdmFyIGVudGVyVG9DbGFzcyA9IGRhdGEuZW50ZXJUb0NsYXNzO1xuXHQgIHZhciBlbnRlckFjdGl2ZUNsYXNzID0gZGF0YS5lbnRlckFjdGl2ZUNsYXNzO1xuXHQgIHZhciBhcHBlYXJDbGFzcyA9IGRhdGEuYXBwZWFyQ2xhc3M7XG5cdCAgdmFyIGFwcGVhclRvQ2xhc3MgPSBkYXRhLmFwcGVhclRvQ2xhc3M7XG5cdCAgdmFyIGFwcGVhckFjdGl2ZUNsYXNzID0gZGF0YS5hcHBlYXJBY3RpdmVDbGFzcztcblx0ICB2YXIgYmVmb3JlRW50ZXIgPSBkYXRhLmJlZm9yZUVudGVyO1xuXHQgIHZhciBlbnRlciA9IGRhdGEuZW50ZXI7XG5cdCAgdmFyIGFmdGVyRW50ZXIgPSBkYXRhLmFmdGVyRW50ZXI7XG5cdCAgdmFyIGVudGVyQ2FuY2VsbGVkID0gZGF0YS5lbnRlckNhbmNlbGxlZDtcblx0ICB2YXIgYmVmb3JlQXBwZWFyID0gZGF0YS5iZWZvcmVBcHBlYXI7XG5cdCAgdmFyIGFwcGVhciA9IGRhdGEuYXBwZWFyO1xuXHQgIHZhciBhZnRlckFwcGVhciA9IGRhdGEuYWZ0ZXJBcHBlYXI7XG5cdCAgdmFyIGFwcGVhckNhbmNlbGxlZCA9IGRhdGEuYXBwZWFyQ2FuY2VsbGVkO1xuXHQgIHZhciBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XG5cdFxuXHQgIC8vIGFjdGl2ZUluc3RhbmNlIHdpbGwgYWx3YXlzIGJlIHRoZSA8dHJhbnNpdGlvbj4gY29tcG9uZW50IG1hbmFnaW5nIHRoaXNcblx0ICAvLyB0cmFuc2l0aW9uLiBPbmUgZWRnZSBjYXNlIHRvIGNoZWNrIGlzIHdoZW4gdGhlIDx0cmFuc2l0aW9uPiBpcyBwbGFjZWRcblx0ICAvLyBhcyB0aGUgcm9vdCBub2RlIG9mIGEgY2hpbGQgY29tcG9uZW50LiBJbiB0aGF0IGNhc2Ugd2UgbmVlZCB0byBjaGVja1xuXHQgIC8vIDx0cmFuc2l0aW9uPidzIHBhcmVudCBmb3IgYXBwZWFyIGNoZWNrLlxuXHQgIHZhciBjb250ZXh0ID0gYWN0aXZlSW5zdGFuY2U7XG5cdCAgdmFyIHRyYW5zaXRpb25Ob2RlID0gYWN0aXZlSW5zdGFuY2UuJHZub2RlO1xuXHQgIHdoaWxlICh0cmFuc2l0aW9uTm9kZSAmJiB0cmFuc2l0aW9uTm9kZS5wYXJlbnQpIHtcblx0ICAgIHRyYW5zaXRpb25Ob2RlID0gdHJhbnNpdGlvbk5vZGUucGFyZW50O1xuXHQgICAgY29udGV4dCA9IHRyYW5zaXRpb25Ob2RlLmNvbnRleHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgaXNBcHBlYXIgPSAhY29udGV4dC5faXNNb3VudGVkIHx8ICF2bm9kZS5pc1Jvb3RJbnNlcnQ7XG5cdFxuXHQgIGlmIChpc0FwcGVhciAmJiAhYXBwZWFyICYmIGFwcGVhciAhPT0gJycpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIHN0YXJ0Q2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJDbGFzc1xuXHQgICAgPyBhcHBlYXJDbGFzc1xuXHQgICAgOiBlbnRlckNsYXNzO1xuXHQgIHZhciBhY3RpdmVDbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhckFjdGl2ZUNsYXNzXG5cdCAgICA/IGFwcGVhckFjdGl2ZUNsYXNzXG5cdCAgICA6IGVudGVyQWN0aXZlQ2xhc3M7XG5cdCAgdmFyIHRvQ2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJUb0NsYXNzXG5cdCAgICA/IGFwcGVhclRvQ2xhc3Ncblx0ICAgIDogZW50ZXJUb0NsYXNzO1xuXHRcblx0ICB2YXIgYmVmb3JlRW50ZXJIb29rID0gaXNBcHBlYXJcblx0ICAgID8gKGJlZm9yZUFwcGVhciB8fCBiZWZvcmVFbnRlcilcblx0ICAgIDogYmVmb3JlRW50ZXI7XG5cdCAgdmFyIGVudGVySG9vayA9IGlzQXBwZWFyXG5cdCAgICA/ICh0eXBlb2YgYXBwZWFyID09PSAnZnVuY3Rpb24nID8gYXBwZWFyIDogZW50ZXIpXG5cdCAgICA6IGVudGVyO1xuXHQgIHZhciBhZnRlckVudGVySG9vayA9IGlzQXBwZWFyXG5cdCAgICA/IChhZnRlckFwcGVhciB8fCBhZnRlckVudGVyKVxuXHQgICAgOiBhZnRlckVudGVyO1xuXHQgIHZhciBlbnRlckNhbmNlbGxlZEhvb2sgPSBpc0FwcGVhclxuXHQgICAgPyAoYXBwZWFyQ2FuY2VsbGVkIHx8IGVudGVyQ2FuY2VsbGVkKVxuXHQgICAgOiBlbnRlckNhbmNlbGxlZDtcblx0XG5cdCAgdmFyIGV4cGxpY2l0RW50ZXJEdXJhdGlvbiA9IHRvTnVtYmVyKFxuXHQgICAgaXNPYmplY3QoZHVyYXRpb24pXG5cdCAgICAgID8gZHVyYXRpb24uZW50ZXJcblx0ICAgICAgOiBkdXJhdGlvblxuXHQgICk7XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGV4cGxpY2l0RW50ZXJEdXJhdGlvbiAhPSBudWxsKSB7XG5cdCAgICBjaGVja0R1cmF0aW9uKGV4cGxpY2l0RW50ZXJEdXJhdGlvbiwgJ2VudGVyJywgdm5vZGUpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGV4cGVjdHNDU1MgPSBjc3MgIT09IGZhbHNlICYmICFpc0lFOTtcblx0ICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgoZW50ZXJIb29rKTtcblx0XG5cdCAgdmFyIGNiID0gZWwuX2VudGVyQ2IgPSBvbmNlKGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChleHBlY3RzQ1NTKSB7XG5cdCAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgdG9DbGFzcyk7XG5cdCAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgYWN0aXZlQ2xhc3MpO1xuXHQgICAgfVxuXHQgICAgaWYgKGNiLmNhbmNlbGxlZCkge1xuXHQgICAgICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgICAgZW50ZXJDYW5jZWxsZWRIb29rICYmIGVudGVyQ2FuY2VsbGVkSG9vayhlbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhZnRlckVudGVySG9vayAmJiBhZnRlckVudGVySG9vayhlbCk7XG5cdCAgICB9XG5cdCAgICBlbC5fZW50ZXJDYiA9IG51bGw7XG5cdCAgfSk7XG5cdFxuXHQgIGlmICghdm5vZGUuZGF0YS5zaG93KSB7XG5cdCAgICAvLyByZW1vdmUgcGVuZGluZyBsZWF2ZSBlbGVtZW50IG9uIGVudGVyIGJ5IGluamVjdGluZyBhbiBpbnNlcnQgaG9va1xuXHQgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdpbnNlcnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuXHQgICAgICB2YXIgcGVuZGluZ05vZGUgPSBwYXJlbnQgJiYgcGFyZW50Ll9wZW5kaW5nICYmIHBhcmVudC5fcGVuZGluZ1t2bm9kZS5rZXldO1xuXHQgICAgICBpZiAocGVuZGluZ05vZGUgJiZcblx0ICAgICAgICBwZW5kaW5nTm9kZS50YWcgPT09IHZub2RlLnRhZyAmJlxuXHQgICAgICAgIHBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYlxuXHQgICAgICApIHtcblx0ICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2IoKTtcblx0ICAgICAgfVxuXHQgICAgICBlbnRlckhvb2sgJiYgZW50ZXJIb29rKGVsLCBjYik7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIC8vIHN0YXJ0IGVudGVyIHRyYW5zaXRpb25cblx0ICBiZWZvcmVFbnRlckhvb2sgJiYgYmVmb3JlRW50ZXJIb29rKGVsKTtcblx0ICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcblx0ICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYWN0aXZlQ2xhc3MpO1xuXHQgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcblx0ICAgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIHRvQ2xhc3MpO1xuXHQgICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkge1xuXHQgICAgICAgICAgaWYgKGlzVmFsaWREdXJhdGlvbihleHBsaWNpdEVudGVyRHVyYXRpb24pKSB7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQoY2IsIGV4cGxpY2l0RW50ZXJEdXJhdGlvbik7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGNiKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKHZub2RlLmRhdGEuc2hvdykge1xuXHQgICAgdG9nZ2xlRGlzcGxheSAmJiB0b2dnbGVEaXNwbGF5KCk7XG5cdCAgICBlbnRlckhvb2sgJiYgZW50ZXJIb29rKGVsLCBjYik7XG5cdCAgfVxuXHRcblx0ICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHtcblx0ICAgIGNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsZWF2ZSAodm5vZGUsIHJtKSB7XG5cdCAgdmFyIGVsID0gdm5vZGUuZWxtO1xuXHRcblx0ICAvLyBjYWxsIGVudGVyIGNhbGxiYWNrIG5vd1xuXHQgIGlmIChpc0RlZihlbC5fZW50ZXJDYikpIHtcblx0ICAgIGVsLl9lbnRlckNiLmNhbmNlbGxlZCA9IHRydWU7XG5cdCAgICBlbC5fZW50ZXJDYigpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGRhdGEgPSByZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pO1xuXHQgIGlmIChpc1VuZGVmKGRhdGEpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7XG5cdCAgICByZXR1cm4gcm0oKVxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgY3NzID0gZGF0YS5jc3M7XG5cdCAgdmFyIHR5cGUgPSBkYXRhLnR5cGU7XG5cdCAgdmFyIGxlYXZlQ2xhc3MgPSBkYXRhLmxlYXZlQ2xhc3M7XG5cdCAgdmFyIGxlYXZlVG9DbGFzcyA9IGRhdGEubGVhdmVUb0NsYXNzO1xuXHQgIHZhciBsZWF2ZUFjdGl2ZUNsYXNzID0gZGF0YS5sZWF2ZUFjdGl2ZUNsYXNzO1xuXHQgIHZhciBiZWZvcmVMZWF2ZSA9IGRhdGEuYmVmb3JlTGVhdmU7XG5cdCAgdmFyIGxlYXZlID0gZGF0YS5sZWF2ZTtcblx0ICB2YXIgYWZ0ZXJMZWF2ZSA9IGRhdGEuYWZ0ZXJMZWF2ZTtcblx0ICB2YXIgbGVhdmVDYW5jZWxsZWQgPSBkYXRhLmxlYXZlQ2FuY2VsbGVkO1xuXHQgIHZhciBkZWxheUxlYXZlID0gZGF0YS5kZWxheUxlYXZlO1xuXHQgIHZhciBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XG5cdFxuXHQgIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7XG5cdCAgdmFyIHVzZXJXYW50c0NvbnRyb2wgPSBnZXRIb29rQXJndW1lbnRzTGVuZ3RoKGxlYXZlKTtcblx0XG5cdCAgdmFyIGV4cGxpY2l0TGVhdmVEdXJhdGlvbiA9IHRvTnVtYmVyKFxuXHQgICAgaXNPYmplY3QoZHVyYXRpb24pXG5cdCAgICAgID8gZHVyYXRpb24ubGVhdmVcblx0ICAgICAgOiBkdXJhdGlvblxuXHQgICk7XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGlzRGVmKGV4cGxpY2l0TGVhdmVEdXJhdGlvbikpIHtcblx0ICAgIGNoZWNrRHVyYXRpb24oZXhwbGljaXRMZWF2ZUR1cmF0aW9uLCAnbGVhdmUnLCB2bm9kZSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgY2IgPSBlbC5fbGVhdmVDYiA9IG9uY2UoZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5fcGVuZGluZykge1xuXHQgICAgICBlbC5wYXJlbnROb2RlLl9wZW5kaW5nW3Zub2RlLmtleV0gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKGV4cGVjdHNDU1MpIHtcblx0ICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuXHQgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuXHQgICAgfVxuXHQgICAgaWYgKGNiLmNhbmNlbGxlZCkge1xuXHQgICAgICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgICAgbGVhdmVDYW5jZWxsZWQgJiYgbGVhdmVDYW5jZWxsZWQoZWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcm0oKTtcblx0ICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKGVsKTtcblx0ICAgIH1cblx0ICAgIGVsLl9sZWF2ZUNiID0gbnVsbDtcblx0ICB9KTtcblx0XG5cdCAgaWYgKGRlbGF5TGVhdmUpIHtcblx0ICAgIGRlbGF5TGVhdmUocGVyZm9ybUxlYXZlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcGVyZm9ybUxlYXZlKCk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBwZXJmb3JtTGVhdmUgKCkge1xuXHQgICAgLy8gdGhlIGRlbGF5ZWQgbGVhdmUgbWF5IGhhdmUgYWxyZWFkeSBiZWVuIGNhbmNlbGxlZFxuXHQgICAgaWYgKGNiLmNhbmNlbGxlZCkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0ICAgIC8vIHJlY29yZCBsZWF2aW5nIGVsZW1lbnRcblx0ICAgIGlmICghdm5vZGUuZGF0YS5zaG93KSB7XG5cdCAgICAgIChlbC5wYXJlbnROb2RlLl9wZW5kaW5nIHx8IChlbC5wYXJlbnROb2RlLl9wZW5kaW5nID0ge30pKVsodm5vZGUua2V5KV0gPSB2bm9kZTtcblx0ICAgIH1cblx0ICAgIGJlZm9yZUxlYXZlICYmIGJlZm9yZUxlYXZlKGVsKTtcblx0ICAgIGlmIChleHBlY3RzQ1NTKSB7XG5cdCAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG5cdCAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG5cdCAgICAgIG5leHRGcmFtZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTtcblx0ICAgICAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xuXHQgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuXHQgICAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7XG5cdCAgICAgICAgICAgIGlmIChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRMZWF2ZUR1cmF0aW9uKSkge1xuXHQgICAgICAgICAgICAgIHNldFRpbWVvdXQoY2IsIGV4cGxpY2l0TGVhdmVEdXJhdGlvbik7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBjYik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgbGVhdmUgJiYgbGVhdmUoZWwsIGNiKTtcblx0ICAgIGlmICghZXhwZWN0c0NTUyAmJiAhdXNlcldhbnRzQ29udHJvbCkge1xuXHQgICAgICBjYigpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0Ly8gb25seSB1c2VkIGluIGRldiBtb2RlXG5cdGZ1bmN0aW9uIGNoZWNrRHVyYXRpb24gKHZhbCwgbmFtZSwgdm5vZGUpIHtcblx0ICBpZiAodHlwZW9mIHZhbCAhPT0gJ251bWJlcicpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgIFwiPHRyYW5zaXRpb24+IGV4cGxpY2l0IFwiICsgbmFtZSArIFwiIGR1cmF0aW9uIGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIFwiICtcblx0ICAgICAgXCJnb3QgXCIgKyAoSlNPTi5zdHJpbmdpZnkodmFsKSkgKyBcIi5cIixcblx0ICAgICAgdm5vZGUuY29udGV4dFxuXHQgICAgKTtcblx0ICB9IGVsc2UgaWYgKGlzTmFOKHZhbCkpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgIFwiPHRyYW5zaXRpb24+IGV4cGxpY2l0IFwiICsgbmFtZSArIFwiIGR1cmF0aW9uIGlzIE5hTiAtIFwiICtcblx0ICAgICAgJ3RoZSBkdXJhdGlvbiBleHByZXNzaW9uIG1pZ2h0IGJlIGluY29ycmVjdC4nLFxuXHQgICAgICB2bm9kZS5jb250ZXh0XG5cdCAgICApO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNWYWxpZER1cmF0aW9uICh2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbClcblx0fVxuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBhIHRyYW5zaXRpb24gaG9vaydzIGFyZ3VtZW50IGxlbmd0aC4gVGhlIGhvb2sgbWF5IGJlOlxuXHQgKiAtIGEgbWVyZ2VkIGhvb2sgKGludm9rZXIpIHdpdGggdGhlIG9yaWdpbmFsIGluIC5mbnNcblx0ICogLSBhIHdyYXBwZWQgY29tcG9uZW50IG1ldGhvZCAoY2hlY2sgLl9sZW5ndGgpXG5cdCAqIC0gYSBwbGFpbiBmdW5jdGlvbiAoLmxlbmd0aClcblx0ICovXG5cdGZ1bmN0aW9uIGdldEhvb2tBcmd1bWVudHNMZW5ndGggKGZuKSB7XG5cdCAgaWYgKGlzVW5kZWYoZm4pKSB7XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdCAgdmFyIGludm9rZXJGbnMgPSBmbi5mbnM7XG5cdCAgaWYgKGlzRGVmKGludm9rZXJGbnMpKSB7XG5cdCAgICAvLyBpbnZva2VyXG5cdCAgICByZXR1cm4gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChcblx0ICAgICAgQXJyYXkuaXNBcnJheShpbnZva2VyRm5zKVxuXHQgICAgICAgID8gaW52b2tlckZuc1swXVxuXHQgICAgICAgIDogaW52b2tlckZuc1xuXHQgICAgKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gKGZuLl9sZW5ndGggfHwgZm4ubGVuZ3RoKSA+IDFcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9lbnRlciAoXywgdm5vZGUpIHtcblx0ICBpZiAodm5vZGUuZGF0YS5zaG93ICE9PSB0cnVlKSB7XG5cdCAgICBlbnRlcih2bm9kZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdHJhbnNpdGlvbiA9IGluQnJvd3NlciA/IHtcblx0ICBjcmVhdGU6IF9lbnRlcixcblx0ICBhY3RpdmF0ZTogX2VudGVyLFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlJCQxICh2bm9kZSwgcm0pIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgICBpZiAodm5vZGUuZGF0YS5zaG93ICE9PSB0cnVlKSB7XG5cdCAgICAgIGxlYXZlKHZub2RlLCBybSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBybSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fSA6IHt9XG5cdFxuXHR2YXIgcGxhdGZvcm1Nb2R1bGVzID0gW1xuXHQgIGF0dHJzLFxuXHQgIGtsYXNzLFxuXHQgIGV2ZW50cyxcblx0ICBkb21Qcm9wcyxcblx0ICBzdHlsZSxcblx0ICB0cmFuc2l0aW9uXG5cdF1cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gdGhlIGRpcmVjdGl2ZSBtb2R1bGUgc2hvdWxkIGJlIGFwcGxpZWQgbGFzdCwgYWZ0ZXIgYWxsXG5cdC8vIGJ1aWx0LWluIG1vZHVsZXMgaGF2ZSBiZWVuIGFwcGxpZWQuXG5cdHZhciBtb2R1bGVzID0gcGxhdGZvcm1Nb2R1bGVzLmNvbmNhdChiYXNlTW9kdWxlcyk7XG5cdFxuXHR2YXIgcGF0Y2ggPSBjcmVhdGVQYXRjaEZ1bmN0aW9uKHsgbm9kZU9wczogbm9kZU9wcywgbW9kdWxlczogbW9kdWxlcyB9KTtcblx0XG5cdC8qKlxuXHQgKiBOb3QgdHlwZSBjaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBmbG93IGRvZXNuJ3QgbGlrZSBhdHRhY2hpbmdcblx0ICogcHJvcGVydGllcyB0byBFbGVtZW50cy5cblx0ICovXG5cdFxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0aWYgKGlzSUU5KSB7XG5cdCAgLy8gaHR0cDovL3d3dy5tYXR0czQxMS5jb20vcG9zdC9pbnRlcm5ldC1leHBsb3Jlci05LW9uaW5wdXQvXG5cdCAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0ICAgIGlmIChlbCAmJiBlbC52bW9kZWwpIHtcblx0ICAgICAgdHJpZ2dlcihlbCwgJ2lucHV0Jyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH1cblx0XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkIChlbCwgYmluZGluZywgdm5vZGUsIG9sZFZub2RlKSB7XG5cdCAgICBpZiAodm5vZGUudGFnID09PSAnc2VsZWN0Jykge1xuXHQgICAgICAvLyAjNjkwM1xuXHQgICAgICBpZiAob2xkVm5vZGUuZWxtICYmICFvbGRWbm9kZS5lbG0uX3ZPcHRpb25zKSB7XG5cdCAgICAgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdwb3N0cGF0Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBkaXJlY3RpdmUuY29tcG9uZW50VXBkYXRlZChlbCwgYmluZGluZywgdm5vZGUpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bm9kZS5jb250ZXh0KTtcblx0ICAgICAgfVxuXHQgICAgICBlbC5fdk9wdGlvbnMgPSBbXS5tYXAuY2FsbChlbC5vcHRpb25zLCBnZXRWYWx1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKHZub2RlLnRhZyA9PT0gJ3RleHRhcmVhJyB8fCBpc1RleHRJbnB1dFR5cGUoZWwudHlwZSkpIHtcblx0ICAgICAgZWwuX3ZNb2RpZmllcnMgPSBiaW5kaW5nLm1vZGlmaWVycztcblx0ICAgICAgaWYgKCFiaW5kaW5nLm1vZGlmaWVycy5sYXp5KSB7XG5cdCAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25zdGFydCcsIG9uQ29tcG9zaXRpb25TdGFydCk7XG5cdCAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25lbmQnLCBvbkNvbXBvc2l0aW9uRW5kKTtcblx0ICAgICAgICAvLyBTYWZhcmkgPCAxMC4yICYgVUlXZWJWaWV3IGRvZXNuJ3QgZmlyZSBjb21wb3NpdGlvbmVuZCB3aGVuXG5cdCAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZVxuXHQgICAgICAgIC8vIHRoaXMgYWxzbyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgc29tZSBicm93c2VycyBlLmcuIGlPUyBDaHJvbWVcblx0ICAgICAgICAvLyBmaXJlcyBcImNoYW5nZVwiIGluc3RlYWQgb2YgXCJpbnB1dFwiIG9uIGF1dG9jb21wbGV0ZS5cblx0ICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkNvbXBvc2l0aW9uRW5kKTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoaXNJRTkpIHtcblx0ICAgICAgICAgIGVsLnZtb2RlbCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgY29tcG9uZW50VXBkYXRlZDogZnVuY3Rpb24gY29tcG9uZW50VXBkYXRlZCAoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG5cdCAgICBpZiAodm5vZGUudGFnID09PSAnc2VsZWN0Jykge1xuXHQgICAgICBzZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm5vZGUuY29udGV4dCk7XG5cdCAgICAgIC8vIGluIGNhc2UgdGhlIG9wdGlvbnMgcmVuZGVyZWQgYnkgdi1mb3IgaGF2ZSBjaGFuZ2VkLFxuXHQgICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHZhbHVlIGlzIG91dC1vZi1zeW5jIHdpdGggdGhlIHJlbmRlcmVkIG9wdGlvbnMuXG5cdCAgICAgIC8vIGRldGVjdCBzdWNoIGNhc2VzIGFuZCBmaWx0ZXIgb3V0IHZhbHVlcyB0aGF0IG5vIGxvbmdlciBoYXMgYSBtYXRjaGluZ1xuXHQgICAgICAvLyBvcHRpb24gaW4gdGhlIERPTS5cblx0ICAgICAgdmFyIHByZXZPcHRpb25zID0gZWwuX3ZPcHRpb25zO1xuXHQgICAgICB2YXIgY3VyT3B0aW9ucyA9IGVsLl92T3B0aW9ucyA9IFtdLm1hcC5jYWxsKGVsLm9wdGlvbnMsIGdldFZhbHVlKTtcblx0ICAgICAgaWYgKGN1ck9wdGlvbnMuc29tZShmdW5jdGlvbiAobywgaSkgeyByZXR1cm4gIWxvb3NlRXF1YWwobywgcHJldk9wdGlvbnNbaV0pOyB9KSkge1xuXHQgICAgICAgIC8vIHRyaWdnZXIgY2hhbmdlIGV2ZW50IGlmXG5cdCAgICAgICAgLy8gbm8gbWF0Y2hpbmcgb3B0aW9uIGZvdW5kIGZvciBhdCBsZWFzdCBvbmUgdmFsdWVcblx0ICAgICAgICB2YXIgbmVlZFJlc2V0ID0gZWwubXVsdGlwbGVcblx0ICAgICAgICAgID8gYmluZGluZy52YWx1ZS5zb21lKGZ1bmN0aW9uICh2KSB7IHJldHVybiBoYXNOb01hdGNoaW5nT3B0aW9uKHYsIGN1ck9wdGlvbnMpOyB9KVxuXHQgICAgICAgICAgOiBiaW5kaW5nLnZhbHVlICE9PSBiaW5kaW5nLm9sZFZhbHVlICYmIGhhc05vTWF0Y2hpbmdPcHRpb24oYmluZGluZy52YWx1ZSwgY3VyT3B0aW9ucyk7XG5cdCAgICAgICAgaWYgKG5lZWRSZXNldCkge1xuXHQgICAgICAgICAgdHJpZ2dlcihlbCwgJ2NoYW5nZScpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNldFNlbGVjdGVkIChlbCwgYmluZGluZywgdm0pIHtcblx0ICBhY3R1YWxseVNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bSk7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzSUUgfHwgaXNFZGdlKSB7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pO1xuXHQgICAgfSwgMCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhY3R1YWxseVNldFNlbGVjdGVkIChlbCwgYmluZGluZywgdm0pIHtcblx0ICB2YXIgdmFsdWUgPSBiaW5kaW5nLnZhbHVlO1xuXHQgIHZhciBpc011bHRpcGxlID0gZWwubXVsdGlwbGU7XG5cdCAgaWYgKGlzTXVsdGlwbGUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgIFwiPHNlbGVjdCBtdWx0aXBsZSB2LW1vZGVsPVxcXCJcIiArIChiaW5kaW5nLmV4cHJlc3Npb24pICsgXCJcXFwiPiBcIiArXG5cdCAgICAgIFwiZXhwZWN0cyBhbiBBcnJheSB2YWx1ZSBmb3IgaXRzIGJpbmRpbmcsIGJ1dCBnb3QgXCIgKyAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSkpLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgc2VsZWN0ZWQsIG9wdGlvbjtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvcHRpb24gPSBlbC5vcHRpb25zW2ldO1xuXHQgICAgaWYgKGlzTXVsdGlwbGUpIHtcblx0ICAgICAgc2VsZWN0ZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIGdldFZhbHVlKG9wdGlvbikpID4gLTE7XG5cdCAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQgIT09IHNlbGVjdGVkKSB7XG5cdCAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChsb29zZUVxdWFsKGdldFZhbHVlKG9wdGlvbiksIHZhbHVlKSkge1xuXHQgICAgICAgIGlmIChlbC5zZWxlY3RlZEluZGV4ICE9PSBpKSB7XG5cdCAgICAgICAgICBlbC5zZWxlY3RlZEluZGV4ID0gaTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFpc011bHRpcGxlKSB7XG5cdCAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYXNOb01hdGNoaW5nT3B0aW9uICh2YWx1ZSwgb3B0aW9ucykge1xuXHQgIHJldHVybiBvcHRpb25zLmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhbG9vc2VFcXVhbChvLCB2YWx1ZSk7IH0pXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFZhbHVlIChvcHRpb24pIHtcblx0ICByZXR1cm4gJ192YWx1ZScgaW4gb3B0aW9uXG5cdCAgICA/IG9wdGlvbi5fdmFsdWVcblx0ICAgIDogb3B0aW9uLnZhbHVlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydCAoZSkge1xuXHQgIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9uQ29tcG9zaXRpb25FbmQgKGUpIHtcblx0ICAvLyBwcmV2ZW50IHRyaWdnZXJpbmcgYW4gaW5wdXQgZXZlbnQgZm9yIG5vIHJlYXNvblxuXHQgIGlmICghZS50YXJnZXQuY29tcG9zaW5nKSB7IHJldHVybiB9XG5cdCAgZS50YXJnZXQuY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgdHJpZ2dlcihlLnRhcmdldCwgJ2lucHV0Jyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRyaWdnZXIgKGVsLCB0eXBlKSB7XG5cdCAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuXHQgIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuXHQgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gcmVjdXJzaXZlbHkgc2VhcmNoIGZvciBwb3NzaWJsZSB0cmFuc2l0aW9uIGRlZmluZWQgaW5zaWRlIHRoZSBjb21wb25lbnQgcm9vdFxuXHRmdW5jdGlvbiBsb2NhdGVOb2RlICh2bm9kZSkge1xuXHQgIHJldHVybiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSAmJiAoIXZub2RlLmRhdGEgfHwgIXZub2RlLmRhdGEudHJhbnNpdGlvbilcblx0ICAgID8gbG9jYXRlTm9kZSh2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpXG5cdCAgICA6IHZub2RlXG5cdH1cblx0XG5cdHZhciBzaG93ID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQgKGVsLCByZWYsIHZub2RlKSB7XG5cdCAgICB2YXIgdmFsdWUgPSByZWYudmFsdWU7XG5cdFxuXHQgICAgdm5vZGUgPSBsb2NhdGVOb2RlKHZub2RlKTtcblx0ICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247XG5cdCAgICB2YXIgb3JpZ2luYWxEaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5ID1cblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJycgOiBlbC5zdHlsZS5kaXNwbGF5O1xuXHQgICAgaWYgKHZhbHVlICYmIHRyYW5zaXRpb24kJDEpIHtcblx0ICAgICAgdm5vZGUuZGF0YS5zaG93ID0gdHJ1ZTtcblx0ICAgICAgZW50ZXIodm5vZGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5O1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IG9yaWdpbmFsRGlzcGxheSA6ICdub25lJztcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSAoZWwsIHJlZiwgdm5vZGUpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcblx0ICAgIHZhciBvbGRWYWx1ZSA9IHJlZi5vbGRWYWx1ZTtcblx0XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghdmFsdWUgPT09ICFvbGRWYWx1ZSkgeyByZXR1cm4gfVxuXHQgICAgdm5vZGUgPSBsb2NhdGVOb2RlKHZub2RlKTtcblx0ICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247XG5cdCAgICBpZiAodHJhbnNpdGlvbiQkMSkge1xuXHQgICAgICB2bm9kZS5kYXRhLnNob3cgPSB0cnVlO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICBlbnRlcih2bm9kZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IGVsLl9fdk9yaWdpbmFsRGlzcGxheTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsZWF2ZSh2bm9kZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX192T3JpZ2luYWxEaXNwbGF5IDogJ25vbmUnO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kIChcblx0ICAgIGVsLFxuXHQgICAgYmluZGluZyxcblx0ICAgIHZub2RlLFxuXHQgICAgb2xkVm5vZGUsXG5cdCAgICBpc0Rlc3Ryb3lcblx0ICApIHtcblx0ICAgIGlmICghaXNEZXN0cm95KSB7XG5cdCAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgcGxhdGZvcm1EaXJlY3RpdmVzID0ge1xuXHQgIG1vZGVsOiBkaXJlY3RpdmUsXG5cdCAgc2hvdzogc2hvd1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIFByb3ZpZGVzIHRyYW5zaXRpb24gc3VwcG9ydCBmb3IgYSBzaW5nbGUgZWxlbWVudC9jb21wb25lbnQuXG5cdC8vIHN1cHBvcnRzIHRyYW5zaXRpb24gbW9kZSAob3V0LWluIC8gaW4tb3V0KVxuXHRcblx0dmFyIHRyYW5zaXRpb25Qcm9wcyA9IHtcblx0ICBuYW1lOiBTdHJpbmcsXG5cdCAgYXBwZWFyOiBCb29sZWFuLFxuXHQgIGNzczogQm9vbGVhbixcblx0ICBtb2RlOiBTdHJpbmcsXG5cdCAgdHlwZTogU3RyaW5nLFxuXHQgIGVudGVyQ2xhc3M6IFN0cmluZyxcblx0ICBsZWF2ZUNsYXNzOiBTdHJpbmcsXG5cdCAgZW50ZXJUb0NsYXNzOiBTdHJpbmcsXG5cdCAgbGVhdmVUb0NsYXNzOiBTdHJpbmcsXG5cdCAgZW50ZXJBY3RpdmVDbGFzczogU3RyaW5nLFxuXHQgIGxlYXZlQWN0aXZlQ2xhc3M6IFN0cmluZyxcblx0ICBhcHBlYXJDbGFzczogU3RyaW5nLFxuXHQgIGFwcGVhckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG5cdCAgYXBwZWFyVG9DbGFzczogU3RyaW5nLFxuXHQgIGR1cmF0aW9uOiBbTnVtYmVyLCBTdHJpbmcsIE9iamVjdF1cblx0fTtcblx0XG5cdC8vIGluIGNhc2UgdGhlIGNoaWxkIGlzIGFsc28gYW4gYWJzdHJhY3QgY29tcG9uZW50LCBlLmcuIDxrZWVwLWFsaXZlPlxuXHQvLyB3ZSB3YW50IHRvIHJlY3Vyc2l2ZWx5IHJldHJpZXZlIHRoZSByZWFsIGNvbXBvbmVudCB0byBiZSByZW5kZXJlZFxuXHRmdW5jdGlvbiBnZXRSZWFsQ2hpbGQgKHZub2RlKSB7XG5cdCAgdmFyIGNvbXBPcHRpb25zID0gdm5vZGUgJiYgdm5vZGUuY29tcG9uZW50T3B0aW9ucztcblx0ICBpZiAoY29tcE9wdGlvbnMgJiYgY29tcE9wdGlvbnMuQ3Rvci5vcHRpb25zLmFic3RyYWN0KSB7XG5cdCAgICByZXR1cm4gZ2V0UmVhbENoaWxkKGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoY29tcE9wdGlvbnMuY2hpbGRyZW4pKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gdm5vZGVcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2l0aW9uRGF0YSAoY29tcCkge1xuXHQgIHZhciBkYXRhID0ge307XG5cdCAgdmFyIG9wdGlvbnMgPSBjb21wLiRvcHRpb25zO1xuXHQgIC8vIHByb3BzXG5cdCAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMucHJvcHNEYXRhKSB7XG5cdCAgICBkYXRhW2tleV0gPSBjb21wW2tleV07XG5cdCAgfVxuXHQgIC8vIGV2ZW50cy5cblx0ICAvLyBleHRyYWN0IGxpc3RlbmVycyBhbmQgcGFzcyB0aGVtIGRpcmVjdGx5IHRvIHRoZSB0cmFuc2l0aW9uIG1ldGhvZHNcblx0ICB2YXIgbGlzdGVuZXJzID0gb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuXHQgIGZvciAodmFyIGtleSQxIGluIGxpc3RlbmVycykge1xuXHQgICAgZGF0YVtjYW1lbGl6ZShrZXkkMSldID0gbGlzdGVuZXJzW2tleSQxXTtcblx0ICB9XG5cdCAgcmV0dXJuIGRhdGFcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGxhY2Vob2xkZXIgKGgsIHJhd0NoaWxkKSB7XG5cdCAgaWYgKC9cXGQta2VlcC1hbGl2ZSQvLnRlc3QocmF3Q2hpbGQudGFnKSkge1xuXHQgICAgcmV0dXJuIGgoJ2tlZXAtYWxpdmUnLCB7XG5cdCAgICAgIHByb3BzOiByYXdDaGlsZC5jb21wb25lbnRPcHRpb25zLnByb3BzRGF0YVxuXHQgICAgfSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhc1BhcmVudFRyYW5zaXRpb24gKHZub2RlKSB7XG5cdCAgd2hpbGUgKCh2bm9kZSA9IHZub2RlLnBhcmVudCkpIHtcblx0ICAgIGlmICh2bm9kZS5kYXRhLnRyYW5zaXRpb24pIHtcblx0ICAgICAgcmV0dXJuIHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU2FtZUNoaWxkIChjaGlsZCwgb2xkQ2hpbGQpIHtcblx0ICByZXR1cm4gb2xkQ2hpbGQua2V5ID09PSBjaGlsZC5rZXkgJiYgb2xkQ2hpbGQudGFnID09PSBjaGlsZC50YWdcblx0fVxuXHRcblx0dmFyIFRyYW5zaXRpb24gPSB7XG5cdCAgbmFtZTogJ3RyYW5zaXRpb24nLFxuXHQgIHByb3BzOiB0cmFuc2l0aW9uUHJvcHMsXG5cdCAgYWJzdHJhY3Q6IHRydWUsXG5cdFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0O1xuXHQgICAgaWYgKCFjaGlsZHJlbikge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICAvLyBmaWx0ZXIgb3V0IHRleHQgbm9kZXMgKHBvc3NpYmxlIHdoaXRlc3BhY2VzKVxuXHQgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMudGFnIHx8IGlzQXN5bmNQbGFjZWhvbGRlcihjKTsgfSk7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdhcm4gbXVsdGlwbGUgZWxlbWVudHNcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICAnPHRyYW5zaXRpb24+IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBzaW5nbGUgZWxlbWVudC4gVXNlICcgK1xuXHQgICAgICAgICc8dHJhbnNpdGlvbi1ncm91cD4gZm9yIGxpc3RzLicsXG5cdCAgICAgICAgdGhpcy4kcGFyZW50XG5cdCAgICAgICk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1vZGUgPSB0aGlzLm1vZGU7XG5cdFxuXHQgICAgLy8gd2FybiBpbnZhbGlkIG1vZGVcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgIG1vZGUgJiYgbW9kZSAhPT0gJ2luLW91dCcgJiYgbW9kZSAhPT0gJ291dC1pbidcblx0ICAgICkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgICdpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAnICsgbW9kZSxcblx0ICAgICAgICB0aGlzLiRwYXJlbnRcblx0ICAgICAgKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmF3Q2hpbGQgPSBjaGlsZHJlblswXTtcblx0XG5cdCAgICAvLyBpZiB0aGlzIGlzIGEgY29tcG9uZW50IHJvb3Qgbm9kZSBhbmQgdGhlIGNvbXBvbmVudCdzXG5cdCAgICAvLyBwYXJlbnQgY29udGFpbmVyIG5vZGUgYWxzbyBoYXMgdHJhbnNpdGlvbiwgc2tpcC5cblx0ICAgIGlmIChoYXNQYXJlbnRUcmFuc2l0aW9uKHRoaXMuJHZub2RlKSkge1xuXHQgICAgICByZXR1cm4gcmF3Q2hpbGRcblx0ICAgIH1cblx0XG5cdCAgICAvLyBhcHBseSB0cmFuc2l0aW9uIGRhdGEgdG8gY2hpbGRcblx0ICAgIC8vIHVzZSBnZXRSZWFsQ2hpbGQoKSB0byBpZ25vcmUgYWJzdHJhY3QgY29tcG9uZW50cyBlLmcuIGtlZXAtYWxpdmVcblx0ICAgIHZhciBjaGlsZCA9IGdldFJlYWxDaGlsZChyYXdDaGlsZCk7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghY2hpbGQpIHtcblx0ICAgICAgcmV0dXJuIHJhd0NoaWxkXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRoaXMuX2xlYXZpbmcpIHtcblx0ICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyKGgsIHJhd0NoaWxkKVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGVuc3VyZSBhIGtleSB0aGF0IGlzIHVuaXF1ZSB0byB0aGUgdm5vZGUgdHlwZSBhbmQgdG8gdGhpcyB0cmFuc2l0aW9uXG5cdCAgICAvLyBjb21wb25lbnQgaW5zdGFuY2UuIFRoaXMga2V5IHdpbGwgYmUgdXNlZCB0byByZW1vdmUgcGVuZGluZyBsZWF2aW5nIG5vZGVzXG5cdCAgICAvLyBkdXJpbmcgZW50ZXJpbmcuXG5cdCAgICB2YXIgaWQgPSBcIl9fdHJhbnNpdGlvbi1cIiArICh0aGlzLl91aWQpICsgXCItXCI7XG5cdCAgICBjaGlsZC5rZXkgPSBjaGlsZC5rZXkgPT0gbnVsbFxuXHQgICAgICA/IGNoaWxkLmlzQ29tbWVudFxuXHQgICAgICAgID8gaWQgKyAnY29tbWVudCdcblx0ICAgICAgICA6IGlkICsgY2hpbGQudGFnXG5cdCAgICAgIDogaXNQcmltaXRpdmUoY2hpbGQua2V5KVxuXHQgICAgICAgID8gKFN0cmluZyhjaGlsZC5rZXkpLmluZGV4T2YoaWQpID09PSAwID8gY2hpbGQua2V5IDogaWQgKyBjaGlsZC5rZXkpXG5cdCAgICAgICAgOiBjaGlsZC5rZXk7XG5cdFxuXHQgICAgdmFyIGRhdGEgPSAoY2hpbGQuZGF0YSB8fCAoY2hpbGQuZGF0YSA9IHt9KSkudHJhbnNpdGlvbiA9IGV4dHJhY3RUcmFuc2l0aW9uRGF0YSh0aGlzKTtcblx0ICAgIHZhciBvbGRSYXdDaGlsZCA9IHRoaXMuX3Zub2RlO1xuXHQgICAgdmFyIG9sZENoaWxkID0gZ2V0UmVhbENoaWxkKG9sZFJhd0NoaWxkKTtcblx0XG5cdCAgICAvLyBtYXJrIHYtc2hvd1xuXHQgICAgLy8gc28gdGhhdCB0aGUgdHJhbnNpdGlvbiBtb2R1bGUgY2FuIGhhbmQgb3ZlciB0aGUgY29udHJvbCB0byB0aGUgZGlyZWN0aXZlXG5cdCAgICBpZiAoY2hpbGQuZGF0YS5kaXJlY3RpdmVzICYmIGNoaWxkLmRhdGEuZGlyZWN0aXZlcy5zb21lKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLm5hbWUgPT09ICdzaG93JzsgfSkpIHtcblx0ICAgICAgY2hpbGQuZGF0YS5zaG93ID0gdHJ1ZTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoXG5cdCAgICAgIG9sZENoaWxkICYmXG5cdCAgICAgIG9sZENoaWxkLmRhdGEgJiZcblx0ICAgICAgIWlzU2FtZUNoaWxkKGNoaWxkLCBvbGRDaGlsZCkgJiZcblx0ICAgICAgIWlzQXN5bmNQbGFjZWhvbGRlcihvbGRDaGlsZCkgJiZcblx0ICAgICAgLy8gIzY2ODcgY29tcG9uZW50IHJvb3QgaXMgYSBjb21tZW50IG5vZGVcblx0ICAgICAgIShvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZSAmJiBvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUuaXNDb21tZW50KVxuXHQgICAgKSB7XG5cdCAgICAgIC8vIHJlcGxhY2Ugb2xkIGNoaWxkIHRyYW5zaXRpb24gZGF0YSB3aXRoIGZyZXNoIG9uZVxuXHQgICAgICAvLyBpbXBvcnRhbnQgZm9yIGR5bmFtaWMgdHJhbnNpdGlvbnMhXG5cdCAgICAgIHZhciBvbGREYXRhID0gb2xkQ2hpbGQuZGF0YS50cmFuc2l0aW9uID0gZXh0ZW5kKHt9LCBkYXRhKTtcblx0ICAgICAgLy8gaGFuZGxlIHRyYW5zaXRpb24gbW9kZVxuXHQgICAgICBpZiAobW9kZSA9PT0gJ291dC1pbicpIHtcblx0ICAgICAgICAvLyByZXR1cm4gcGxhY2Vob2xkZXIgbm9kZSBhbmQgcXVldWUgdXBkYXRlIHdoZW4gbGVhdmUgZmluaXNoZXNcblx0ICAgICAgICB0aGlzLl9sZWF2aW5nID0gdHJ1ZTtcblx0ICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnYWZ0ZXJMZWF2ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRoaXMkMS5fbGVhdmluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgdGhpcyQxLiRmb3JjZVVwZGF0ZSgpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZClcblx0ICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnaW4tb3V0Jykge1xuXHQgICAgICAgIGlmIChpc0FzeW5jUGxhY2Vob2xkZXIoY2hpbGQpKSB7XG5cdCAgICAgICAgICByZXR1cm4gb2xkUmF3Q2hpbGRcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGRlbGF5ZWRMZWF2ZTtcblx0ICAgICAgICB2YXIgcGVyZm9ybUxlYXZlID0gZnVuY3Rpb24gKCkgeyBkZWxheWVkTGVhdmUoKTsgfTtcblx0ICAgICAgICBtZXJnZVZOb2RlSG9vayhkYXRhLCAnYWZ0ZXJFbnRlcicsIHBlcmZvcm1MZWF2ZSk7XG5cdCAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2VudGVyQ2FuY2VsbGVkJywgcGVyZm9ybUxlYXZlKTtcblx0ICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnZGVsYXlMZWF2ZScsIGZ1bmN0aW9uIChsZWF2ZSkgeyBkZWxheWVkTGVhdmUgPSBsZWF2ZTsgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmF3Q2hpbGRcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gUHJvdmlkZXMgdHJhbnNpdGlvbiBzdXBwb3J0IGZvciBsaXN0IGl0ZW1zLlxuXHQvLyBzdXBwb3J0cyBtb3ZlIHRyYW5zaXRpb25zIHVzaW5nIHRoZSBGTElQIHRlY2huaXF1ZS5cblx0XG5cdC8vIEJlY2F1c2UgdGhlIHZkb20ncyBjaGlsZHJlbiB1cGRhdGUgYWxnb3JpdGhtIGlzIFwidW5zdGFibGVcIiAtIGkuZS5cblx0Ly8gaXQgZG9lc24ndCBndWFyYW50ZWUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uaW5nIG9mIHJlbW92ZWQgZWxlbWVudHMsXG5cdC8vIHdlIGZvcmNlIHRyYW5zaXRpb24tZ3JvdXAgdG8gdXBkYXRlIGl0cyBjaGlsZHJlbiBpbnRvIHR3byBwYXNzZXM6XG5cdC8vIGluIHRoZSBmaXJzdCBwYXNzLCB3ZSByZW1vdmUgYWxsIG5vZGVzIHRoYXQgbmVlZCB0byBiZSByZW1vdmVkLFxuXHQvLyB0cmlnZ2VyaW5nIHRoZWlyIGxlYXZpbmcgdHJhbnNpdGlvbjsgaW4gdGhlIHNlY29uZCBwYXNzLCB3ZSBpbnNlcnQvbW92ZVxuXHQvLyBpbnRvIHRoZSBmaW5hbCBkZXNpcmVkIHN0YXRlLiBUaGlzIHdheSBpbiB0aGUgc2Vjb25kIHBhc3MgcmVtb3ZlZFxuXHQvLyBub2RlcyB3aWxsIHJlbWFpbiB3aGVyZSB0aGV5IHNob3VsZCBiZS5cblx0XG5cdHZhciBwcm9wcyA9IGV4dGVuZCh7XG5cdCAgdGFnOiBTdHJpbmcsXG5cdCAgbW92ZUNsYXNzOiBTdHJpbmdcblx0fSwgdHJhbnNpdGlvblByb3BzKTtcblx0XG5cdGRlbGV0ZSBwcm9wcy5tb2RlO1xuXHRcblx0dmFyIFRyYW5zaXRpb25Hcm91cCA9IHtcblx0ICBwcm9wczogcHJvcHMsXG5cdFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7XG5cdCAgICB2YXIgdGFnID0gdGhpcy50YWcgfHwgdGhpcy4kdm5vZGUuZGF0YS50YWcgfHwgJ3NwYW4nO1xuXHQgICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5wcmV2Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuO1xuXHQgICAgdmFyIHJhd0NoaWxkcmVuID0gdGhpcy4kc2xvdHMuZGVmYXVsdCB8fCBbXTtcblx0ICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4gPSBbXTtcblx0ICAgIHZhciB0cmFuc2l0aW9uRGF0YSA9IGV4dHJhY3RUcmFuc2l0aW9uRGF0YSh0aGlzKTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBjID0gcmF3Q2hpbGRyZW5baV07XG5cdCAgICAgIGlmIChjLnRhZykge1xuXHQgICAgICAgIGlmIChjLmtleSAhPSBudWxsICYmIFN0cmluZyhjLmtleSkuaW5kZXhPZignX192bGlzdCcpICE9PSAwKSB7XG5cdCAgICAgICAgICBjaGlsZHJlbi5wdXNoKGMpO1xuXHQgICAgICAgICAgbWFwW2Mua2V5XSA9IGNcblx0ICAgICAgICAgIDsoYy5kYXRhIHx8IChjLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRGF0YTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIHZhciBvcHRzID0gYy5jb21wb25lbnRPcHRpb25zO1xuXHQgICAgICAgICAgdmFyIG5hbWUgPSBvcHRzID8gKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcgfHwgJycpIDogYy50YWc7XG5cdCAgICAgICAgICB3YXJuKChcIjx0cmFuc2l0aW9uLWdyb3VwPiBjaGlsZHJlbiBtdXN0IGJlIGtleWVkOiA8XCIgKyBuYW1lICsgXCI+XCIpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAocHJldkNoaWxkcmVuKSB7XG5cdCAgICAgIHZhciBrZXB0ID0gW107XG5cdCAgICAgIHZhciByZW1vdmVkID0gW107XG5cdCAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHByZXZDaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7XG5cdCAgICAgICAgdmFyIGMkMSA9IHByZXZDaGlsZHJlbltpJDFdO1xuXHQgICAgICAgIGMkMS5kYXRhLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRGF0YTtcblx0ICAgICAgICBjJDEuZGF0YS5wb3MgPSBjJDEuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgICAgIGlmIChtYXBbYyQxLmtleV0pIHtcblx0ICAgICAgICAgIGtlcHQucHVzaChjJDEpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZW1vdmVkLnB1c2goYyQxKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5rZXB0ID0gaCh0YWcsIG51bGwsIGtlcHQpO1xuXHQgICAgICB0aGlzLnJlbW92ZWQgPSByZW1vdmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBoKHRhZywgbnVsbCwgY2hpbGRyZW4pXG5cdCAgfSxcblx0XG5cdCAgYmVmb3JlVXBkYXRlOiBmdW5jdGlvbiBiZWZvcmVVcGRhdGUgKCkge1xuXHQgICAgLy8gZm9yY2UgcmVtb3ZpbmcgcGFzc1xuXHQgICAgdGhpcy5fX3BhdGNoX18oXG5cdCAgICAgIHRoaXMuX3Zub2RlLFxuXHQgICAgICB0aGlzLmtlcHQsXG5cdCAgICAgIGZhbHNlLCAvLyBoeWRyYXRpbmdcblx0ICAgICAgdHJ1ZSAvLyByZW1vdmVPbmx5ICghaW1wb3J0YW50LCBhdm9pZHMgdW5uZWNlc3NhcnkgbW92ZXMpXG5cdCAgICApO1xuXHQgICAgdGhpcy5fdm5vZGUgPSB0aGlzLmtlcHQ7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCAoKSB7XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByZXZDaGlsZHJlbjtcblx0ICAgIHZhciBtb3ZlQ2xhc3MgPSB0aGlzLm1vdmVDbGFzcyB8fCAoKHRoaXMubmFtZSB8fCAndicpICsgJy1tb3ZlJyk7XG5cdCAgICBpZiAoIWNoaWxkcmVuLmxlbmd0aCB8fCAhdGhpcy5oYXNNb3ZlKGNoaWxkcmVuWzBdLmVsbSwgbW92ZUNsYXNzKSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICAvLyB3ZSBkaXZpZGUgdGhlIHdvcmsgaW50byB0aHJlZSBsb29wcyB0byBhdm9pZCBtaXhpbmcgRE9NIHJlYWRzIGFuZCB3cml0ZXNcblx0ICAgIC8vIGluIGVhY2ggaXRlcmF0aW9uIC0gd2hpY2ggaGVscHMgcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nLlxuXHQgICAgY2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7XG5cdCAgICBjaGlsZHJlbi5mb3JFYWNoKHJlY29yZFBvc2l0aW9uKTtcblx0ICAgIGNoaWxkcmVuLmZvckVhY2goYXBwbHlUcmFuc2xhdGlvbik7XG5cdFxuXHQgICAgLy8gZm9yY2UgcmVmbG93IHRvIHB1dCBldmVyeXRoaW5nIGluIHBvc2l0aW9uXG5cdCAgICAvLyBhc3NpZ24gdG8gdGhpcyB0byBhdm9pZCBiZWluZyByZW1vdmVkIGluIHRyZWUtc2hha2luZ1xuXHQgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICB0aGlzLl9yZWZsb3cgPSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDtcblx0XG5cdCAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG5cdCAgICAgIGlmIChjLmRhdGEubW92ZWQpIHtcblx0ICAgICAgICB2YXIgZWwgPSBjLmVsbTtcblx0ICAgICAgICB2YXIgcyA9IGVsLnN0eWxlO1xuXHQgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcblx0ICAgICAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnJztcblx0ICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmRFdmVudCwgZWwuX21vdmVDYiA9IGZ1bmN0aW9uIGNiIChlKSB7XG5cdCAgICAgICAgICBpZiAoIWUgfHwgL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpKSB7XG5cdCAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCBjYik7XG5cdCAgICAgICAgICAgIGVsLl9tb3ZlQ2IgPSBudWxsO1xuXHQgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIGhhc01vdmU6IGZ1bmN0aW9uIGhhc01vdmUgKGVsLCBtb3ZlQ2xhc3MpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghaGFzVHJhbnNpdGlvbikge1xuXHQgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICB9XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAodGhpcy5faGFzTW92ZSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9oYXNNb3ZlXG5cdCAgICAgIH1cblx0ICAgICAgLy8gRGV0ZWN0IHdoZXRoZXIgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3ZlIGNsYXNzIGFwcGxpZWQgaGFzXG5cdCAgICAgIC8vIENTUyB0cmFuc2l0aW9ucy4gU2luY2UgdGhlIGVsZW1lbnQgbWF5IGJlIGluc2lkZSBhbiBlbnRlcmluZ1xuXHQgICAgICAvLyB0cmFuc2l0aW9uIGF0IHRoaXMgdmVyeSBtb21lbnQsIHdlIG1ha2UgYSBjbG9uZSBvZiBpdCBhbmQgcmVtb3ZlXG5cdCAgICAgIC8vIGFsbCBvdGhlciB0cmFuc2l0aW9uIGNsYXNzZXMgYXBwbGllZCB0byBlbnN1cmUgb25seSB0aGUgbW92ZSBjbGFzc1xuXHQgICAgICAvLyBpcyBhcHBsaWVkLlxuXHQgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcblx0ICAgICAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3Nlcykge1xuXHQgICAgICAgIGVsLl90cmFuc2l0aW9uQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHsgcmVtb3ZlQ2xhc3MoY2xvbmUsIGNscyk7IH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGFkZENsYXNzKGNsb25lLCBtb3ZlQ2xhc3MpO1xuXHQgICAgICBjbG9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgICAgICB0aGlzLiRlbC5hcHBlbmRDaGlsZChjbG9uZSk7XG5cdCAgICAgIHZhciBpbmZvID0gZ2V0VHJhbnNpdGlvbkluZm8oY2xvbmUpO1xuXHQgICAgICB0aGlzLiRlbC5yZW1vdmVDaGlsZChjbG9uZSk7XG5cdCAgICAgIHJldHVybiAodGhpcy5faGFzTW92ZSA9IGluZm8uaGFzVHJhbnNmb3JtKVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbFBlbmRpbmdDYnMgKGMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoYy5lbG0uX21vdmVDYikge1xuXHQgICAgYy5lbG0uX21vdmVDYigpO1xuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoYy5lbG0uX2VudGVyQ2IpIHtcblx0ICAgIGMuZWxtLl9lbnRlckNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWNvcmRQb3NpdGlvbiAoYykge1xuXHQgIGMuZGF0YS5uZXdQb3MgPSBjLmVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbiAoYykge1xuXHQgIHZhciBvbGRQb3MgPSBjLmRhdGEucG9zO1xuXHQgIHZhciBuZXdQb3MgPSBjLmRhdGEubmV3UG9zO1xuXHQgIHZhciBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7XG5cdCAgdmFyIGR5ID0gb2xkUG9zLnRvcCAtIG5ld1Bvcy50b3A7XG5cdCAgaWYgKGR4IHx8IGR5KSB7XG5cdCAgICBjLmRhdGEubW92ZWQgPSB0cnVlO1xuXHQgICAgdmFyIHMgPSBjLmVsbS5zdHlsZTtcblx0ICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIGR4ICsgXCJweCxcIiArIGR5ICsgXCJweClcIjtcblx0ICAgIHMudHJhbnNpdGlvbkR1cmF0aW9uID0gJzBzJztcblx0ICB9XG5cdH1cblx0XG5cdHZhciBwbGF0Zm9ybUNvbXBvbmVudHMgPSB7XG5cdCAgVHJhbnNpdGlvbjogVHJhbnNpdGlvbixcblx0ICBUcmFuc2l0aW9uR3JvdXA6IFRyYW5zaXRpb25Hcm91cFxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIGluc3RhbGwgcGxhdGZvcm0gc3BlY2lmaWMgdXRpbHNcblx0VnVlLmNvbmZpZy5tdXN0VXNlUHJvcCA9IG11c3RVc2VQcm9wO1xuXHRWdWUuY29uZmlnLmlzUmVzZXJ2ZWRUYWcgPSBpc1Jlc2VydmVkVGFnO1xuXHRWdWUuY29uZmlnLmlzUmVzZXJ2ZWRBdHRyID0gaXNSZXNlcnZlZEF0dHI7XG5cdFZ1ZS5jb25maWcuZ2V0VGFnTmFtZXNwYWNlID0gZ2V0VGFnTmFtZXNwYWNlO1xuXHRWdWUuY29uZmlnLmlzVW5rbm93bkVsZW1lbnQgPSBpc1Vua25vd25FbGVtZW50O1xuXHRcblx0Ly8gaW5zdGFsbCBwbGF0Zm9ybSBydW50aW1lIGRpcmVjdGl2ZXMgJiBjb21wb25lbnRzXG5cdGV4dGVuZChWdWUub3B0aW9ucy5kaXJlY3RpdmVzLCBwbGF0Zm9ybURpcmVjdGl2ZXMpO1xuXHRleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgcGxhdGZvcm1Db21wb25lbnRzKTtcblx0XG5cdC8vIGluc3RhbGwgcGxhdGZvcm0gcGF0Y2ggZnVuY3Rpb25cblx0VnVlLnByb3RvdHlwZS5fX3BhdGNoX18gPSBpbkJyb3dzZXIgPyBwYXRjaCA6IG5vb3A7XG5cdFxuXHQvLyBwdWJsaWMgbW91bnQgbWV0aG9kXG5cdFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKFxuXHQgIGVsLFxuXHQgIGh5ZHJhdGluZ1xuXHQpIHtcblx0ICBlbCA9IGVsICYmIGluQnJvd3NlciA/IHF1ZXJ5KGVsKSA6IHVuZGVmaW5lZDtcblx0ICByZXR1cm4gbW91bnRDb21wb25lbnQodGhpcywgZWwsIGh5ZHJhdGluZylcblx0fTtcblx0XG5cdC8vIGRldnRvb2xzIGdsb2JhbCBob29rXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGlmIChpbkJyb3dzZXIpIHtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgICAgaWYgKGRldnRvb2xzKSB7XG5cdCAgICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoXG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcgJiZcblx0ICAgICAgICBpc0Nocm9tZVxuXHQgICAgICApIHtcblx0ICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXShcblx0ICAgICAgICAgICdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGV4dGVuc2lvbiBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICtcblx0ICAgICAgICAgICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJ1xuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcgJiZcblx0ICAgICAgY29uZmlnLnByb2R1Y3Rpb25UaXAgIT09IGZhbHNlICYmXG5cdCAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJ1xuXHQgICAgKSB7XG5cdCAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKFxuXHQgICAgICAgIFwiWW91IGFyZSBydW5uaW5nIFZ1ZSBpbiBkZXZlbG9wbWVudCBtb2RlLlxcblwiICtcblx0ICAgICAgICBcIk1ha2Ugc3VyZSB0byB0dXJuIG9uIHByb2R1Y3Rpb24gbW9kZSB3aGVuIGRlcGxveWluZyBmb3IgcHJvZHVjdGlvbi5cXG5cIiArXG5cdCAgICAgICAgXCJTZWUgbW9yZSB0aXBzIGF0IGh0dHBzOi8vdnVlanMub3JnL2d1aWRlL2RlcGxveW1lbnQuaHRtbFwiXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfSwgMCk7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBWdWU7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygzKS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0gKCkpXG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoKGUpe1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG5cdCAgICAgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3Jcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdFxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpe1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0XG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0cHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgc2NvcGUgPSAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwpIHx8XG5cdCAgICAgICAgICAgICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmKSB8fFxuXHQgICAgICAgICAgICB3aW5kb3c7XG5cdHZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcblx0fTtcblx0ZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG5cdH07XG5cdGV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cblx0ZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuXHQgIGlmICh0aW1lb3V0KSB7XG5cdCAgICB0aW1lb3V0LmNsb3NlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuXHQgIHRoaXMuX2lkID0gaWQ7XG5cdCAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG5cdH1cblx0VGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuXHRUaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuXHQgIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5cdGV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcblx0fTtcblx0XG5cdGV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0XG5cdCAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG5cdCAgaWYgKG1zZWNzID49IDApIHtcblx0ICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcblx0ICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcblx0ICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcblx0ICAgIH0sIG1zZWNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdC8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1lZGlhdGVgIHdhc1xuXHQvLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuXHQvLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcblx0ICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuXHQgICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cdCAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG5cdCAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuXHQgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG5cdCAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcblx0ICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuXHQgICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcblx0ICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG5cdCAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW4odGFzaykge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG5cdCAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcblx0ICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG5cdCAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cblx0ICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG5cdCAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG5cdCAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgICAgICAgICBpZiAodGFzaykge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcblx0ICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG5cdCAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG5cdCAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcblx0ICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHRcblx0ICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcblx0ICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG5cdCAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuXHQgICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuXHQgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuXHQgICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuXHQgICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cdFxuXHQgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuXHQgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcblx0ICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXHRcblx0ICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHRcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG5cdCAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcblx0ICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXHRcblx0ICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcblx0ICAgICAgICAvLyBGb3IgSUUgNuKAkzhcblx0ICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cdFxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHQgICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblx0fSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMikpKVxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0Lyogc3R5bGVzICovXG5cdF9fd2VicGFja19yZXF1aXJlX18oNilcblx0XG5cdHZhciBDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KShcblx0ICAvKiBzY3JpcHQgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSxcblx0ICAvKiB0ZW1wbGF0ZSAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMTA2KSxcblx0ICAvKiBzY29wZUlkICovXG5cdCAgbnVsbCxcblx0ICAvKiBjc3NNb2R1bGVzICovXG5cdCAgbnVsbFxuXHQpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCI0MjE1ZjM4NlwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSgpO1xuXHQvLyBpbXBvcnRzXG5cdGV4cG9ydHMuaShfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLCBcIlwiKTtcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJmb290ZXI6YWZ0ZXIsaGVhZGVyOmFmdGVye2NvbnRlbnQ6XFxcIiBcXFwiO2Rpc3BsYXk6dGFibGU7Y2xlYXI6Ym90aH0uZXhwYW5kLXktZW50ZXItYWN0aXZlLC5leHBhbmQteS1sZWF2ZS1hY3RpdmUsLm1vZGFsLWVudGVyLWFjdGl2ZSwubW9kYWwtbGVhdmUtYWN0aXZlLC5wbGF5ZXItbW9yZS1lbnRlci1hY3RpdmUsLnBsYXllci1tb3JlLWxlYXZlLWFjdGl2ZXt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuM3MgZWFzZX0uZXhwYW5kLXktZW50ZXIsLmV4cGFuZC15LWxlYXZlLWFjdGl2ZSwubW9kYWwtZW50ZXIsLm1vZGFsLWxlYXZlLWFjdGl2ZSwucGxheWVyLW1vcmUtZW50ZXIsLnBsYXllci1tb3JlLWxlYXZlLWFjdGl2ZXt0cmFuc2Zvcm06c2NhbGVZKDApfS5wbGF5ZXItbW9yZS1lbnRlciwucGxheWVyLW1vcmUtZW50ZXItYWN0aXZlLC5wbGF5ZXItbW9yZS1sZWF2ZS1hY3RpdmV7dHJhbnNmb3JtLW9yaWdpbjpjZW50ZXIgdG9wfSNib2R5LC5hcHAsYm9keSxodG1se3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWFyZ2luOjB9Ym9keXtmb250LXNpemU6MTRweDtmb250LWZhbWlseTpBcmlhbCxIZWx2ZXRpY2Esc2Fucy1zZXJpZjtsaW5lLWhlaWdodDoxOHB4fSp7Ym94LXNpemluZzpib3JkZXItYm94fS5hcHB7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Zm9vdGVyLGhlYWRlcnt3aWR0aDoxMDAlO2JhY2tncm91bmQtY29sb3I6IzJhNzJiYn1mb290ZXIgLmxlZnQsaGVhZGVyIC5sZWZ0e2Zsb2F0OmxlZnR9Zm9vdGVyIC5yaWdodCxoZWFkZXIgLnJpZ2h0e2Zsb2F0OnJpZ2h0fWZvb3RlciAuY2VudGVyLGhlYWRlciAuY2VudGVye21hcmdpbjphdXRvO3RleHQtYWxpZ246Y2VudGVyfWZvb3RlciAubW9iaWxlLXJvdyxoZWFkZXIgLm1vYmlsZS1yb3d7ZGlzcGxheTppbmxpbmUtYmxvY2t9QG1lZGlhIChtYXgtd2lkdGg6NTQwcHgpe2Zvb3RlciAubW9iaWxlLXJvdyxoZWFkZXIgLm1vYmlsZS1yb3d7cGFkZGluZy1ib3R0b206MTBweDtkaXNwbGF5OmJsb2NrfWZvb3RlciAubW9iaWxlLXJvdzpsYXN0LWNoaWxkLGhlYWRlciAubW9iaWxlLXJvdzpsYXN0LWNoaWxke3BhZGRpbmctYm90dG9tOjB9fS5seXJpYy1lZGl0b3J7LW1zLWZsZXg6MTtmbGV4OjE7b3ZlcmZsb3c6YXV0b30uZm9ybS1ncm91cHtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDtwYWRkaW5nOjVweCAwOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXJ9LmZvcm0tZ3JvdXAgbGFiZWx7dmVydGljYWwtYWxpZ246bWlkZGxlO3BhZGRpbmctcmlnaHQ6MTBweH0uZm9ybS1ncm91cCBpbnB1dHstbXMtZmxleDoxO2ZsZXg6MTtoZWlnaHQ6MzBweDtib3JkZXI6MXB4IHNvbGlkICNkNmQ2ZDY7cGFkZGluZzowIDNweDtib3JkZXItcmFkaXVzOjVweH0ubWVudS1pdGVte2Rpc3BsYXk6aW5saW5lLWJsb2NrO2NvbG9yOiNmZmY7aGVpZ2h0OjQwcHg7bGluZS1oZWlnaHQ6NDBweDtwYWRkaW5nOjAgOHB4O2N1cnNvcjpwb2ludGVyfS5tZW51LWl0ZW06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojMjE1OTkxfS5idG57Ym9yZGVyLXJhZGl1czo1cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzo2cHg7Zm9udC13ZWlnaHQ6Ym9sZGVyO2N1cnNvcjpwb2ludGVyO3RleHQtZGVjb3JhdGlvbjpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtiYWNrZ3JvdW5kOiMxMTYxYjM7Y29sb3I6I2ZmZn0uYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzEyNGI4Nn0uYnRuLndoaXRlLGZvb3RlciAuYnRuLGhlYWRlciAuYnRue2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojMTE2MWIzfS5idG4ud2hpdGU6aG92ZXIsZm9vdGVyIC5idG46aG92ZXIsaGVhZGVyIC5idG46aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZThlMWUxfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Lypcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRcdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcblx0Ki9cblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbGlzdCA9IFtdO1xuXHRcblx0XHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cdFx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xuXHRcdFx0XHRpZihpdGVtWzJdKSB7XG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XG5cdFx0fTtcblx0XG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3Rcblx0XHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuXHRcdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XG5cdFx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuXHRcdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXHRcdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuXHRcdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0cmV0dXJuIGxpc3Q7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkBmb250LWZhY2V7Zm9udC1mYW1pbHk6Zm9udGVsbG87c3JjOnVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMTApICsgXCIpO3NyYzp1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKSArIFwiI2llZml4KSBmb3JtYXQoXFxcImVtYmVkZGVkLW9wZW50eXBlXFxcIiksdXJsKFwiICsgX193ZWJwYWNrX3JlcXVpcmVfXygxMSkgKyBcIikgZm9ybWF0KFxcXCJ3b2ZmMlxcXCIpLHVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMTIpICsgXCIpIGZvcm1hdChcXFwid29mZlxcXCIpLHVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMTMpICsgXCIpIGZvcm1hdChcXFwidHJ1ZXR5cGVcXFwiKSx1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KSArIFwiI2ZvbnRlbGxvKSBmb3JtYXQoXFxcInN2Z1xcXCIpO2ZvbnQtd2VpZ2h0OjQwMDtmb250LXN0eWxlOm5vcm1hbH1bY2xhc3MqPVxcXCIgaWNvbi1cXFwiXTpiZWZvcmUsW2NsYXNzXj1pY29uLV06YmVmb3Jle2ZvbnQtZmFtaWx5OmZvbnRlbGxvO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0OjQwMDtzcGVhazpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtZGVjb3JhdGlvbjppbmhlcml0O3dpZHRoOjFlbTttYXJnaW4tcmlnaHQ6LjJlbTt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXZhcmlhbnQ6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7bGluZS1oZWlnaHQ6MWVtO21hcmdpbi1sZWZ0Oi4yZW07LXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZDstbW96LW9zeC1mb250LXNtb290aGluZzpncmF5c2NhbGV9Lmljb24tZWRpdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MDBcXFwifS5pY29uLXNhdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODAxXFxcIn0uaWNvbi10cmFzaDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MDJcXFwifS5pY29uLWRvd25sb2FkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwM1xcXCJ9Lmljb24tdXBsb2FkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwNFxcXCJ9Lmljb24tcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODA1XFxcIn0uaWNvbi1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwNlxcXCJ9Lmljb24tdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODA3XFxcIn0uaWNvbi1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwOFxcXCJ9Lmljb24tdm9sdW1lLW9mZjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MDlcXFwifS5pY29uLXZvbHVtZS11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MEFcXFwifS5pY29uLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODBEXFxcIn0uaWNvbi1jYW5jZWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODBFXFxcIn0uaWNvbi1lbGxpcHNpcy12ZXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwRlxcXCJ9Lmljb24taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MTBcXFwifS5pY29uLWhlbHAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MTFcXFwifS5pY29uLXBsYXk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODEyXFxcIn0uaWNvbi1wYXVzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MTNcXFwifS5pY29uLWZvcndhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODE0XFxcIn0uaWNvbi1iYWNrd2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MTVcXFwifS5pY29uLXN0b3A6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODE2XFxcIn1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiMmJiNGFlMDgwODRiN2E5MDBiZmUxYzcwM2M5ODhmMzQuZW90XCI7XG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiZjMxM2EwZjk4NzY3MmRjNzdhOGMyNDMzODBlMjA4OWUud29mZjJcIjtcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCI0Y2M5MzAxNjNmNmQ1MDg4ZGZhNWZlZjYxOWQ4N2NiOS53b2ZmXCI7XG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiYjQ4MzU0NDMwM2ZjZmM3ZTFlMzQxNTlhNDExZmNkY2IudHRmXCI7XG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiZjQwMzdmOGQxNmY0MzM3OWIxODAyMDcwNmJkYzk1Njcuc3ZnXCI7XG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdCAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuXHQgIE1vZGlmaWVkIGJ5IEV2YW4gWW91IEB5eXg5OTA4MDNcblx0Ki9cblx0XG5cdHZhciBoYXNEb2N1bWVudCA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcblx0XG5cdGlmIChmYWxzZSkge1xuXHQgIGlmICghaGFzRG9jdW1lbnQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcihcblx0ICAgICd2dWUtc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnQuICcgK1xuXHQgICAgXCJVc2UgeyB0YXJnZXQ6ICdub2RlJyB9IGluIHlvdXIgV2VicGFjayBjb25maWcgdG8gaW5kaWNhdGUgYSBzZXJ2ZXItcmVuZGVyaW5nIGVudmlyb25tZW50LlwiXG5cdCAgKSB9XG5cdH1cblx0XG5cdHZhciBsaXN0VG9TdHlsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KVxuXHRcblx0Lypcblx0dHlwZSBTdHlsZU9iamVjdCA9IHtcblx0ICBpZDogbnVtYmVyO1xuXHQgIHBhcnRzOiBBcnJheTxTdHlsZU9iamVjdFBhcnQ+XG5cdH1cblx0XG5cdHR5cGUgU3R5bGVPYmplY3RQYXJ0ID0ge1xuXHQgIGNzczogc3RyaW5nO1xuXHQgIG1lZGlhOiBzdHJpbmc7XG5cdCAgc291cmNlTWFwOiA/c3RyaW5nXG5cdH1cblx0Ki9cblx0XG5cdHZhciBzdHlsZXNJbkRvbSA9IHsvKlxuXHQgIFtpZDogbnVtYmVyXToge1xuXHQgICAgaWQ6IG51bWJlcixcblx0ICAgIHJlZnM6IG51bWJlcixcblx0ICAgIHBhcnRzOiBBcnJheTwob2JqPzogU3R5bGVPYmplY3RQYXJ0KSA9PiB2b2lkPlxuXHQgIH1cblx0Ki99XG5cdFxuXHR2YXIgaGVhZCA9IGhhc0RvY3VtZW50ICYmIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0pXG5cdHZhciBzaW5nbGV0b25FbGVtZW50ID0gbnVsbFxuXHR2YXIgc2luZ2xldG9uQ291bnRlciA9IDBcblx0dmFyIGlzUHJvZHVjdGlvbiA9IGZhbHNlXG5cdHZhciBub29wID0gZnVuY3Rpb24gKCkge31cblx0XG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdHZhciBpc09sZElFID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL21zaWUgWzYtOV1cXGIvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGFyZW50SWQsIGxpc3QsIF9pc1Byb2R1Y3Rpb24pIHtcblx0ICBpc1Byb2R1Y3Rpb24gPSBfaXNQcm9kdWN0aW9uXG5cdFxuXHQgIHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMocGFyZW50SWQsIGxpc3QpXG5cdCAgYWRkU3R5bGVzVG9Eb20oc3R5bGVzKVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdCAgICB2YXIgbWF5UmVtb3ZlID0gW11cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldXG5cdCAgICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdXG5cdCAgICAgIGRvbVN0eWxlLnJlZnMtLVxuXHQgICAgICBtYXlSZW1vdmUucHVzaChkb21TdHlsZSlcblx0ICAgIH1cblx0ICAgIGlmIChuZXdMaXN0KSB7XG5cdCAgICAgIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhwYXJlbnRJZCwgbmV3TGlzdClcblx0ICAgICAgYWRkU3R5bGVzVG9Eb20oc3R5bGVzKVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3R5bGVzID0gW11cblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXVxuXHQgICAgICBpZiAoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHQgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKClcblx0ICAgICAgICB9XG5cdCAgICAgICAgZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzIC8qIEFycmF5PFN0eWxlT2JqZWN0PiAqLykge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgaXRlbSA9IHN0eWxlc1tpXVxuXHQgICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF1cblx0ICAgIGlmIChkb21TdHlsZSkge1xuXHQgICAgICBkb21TdHlsZS5yZWZzKytcblx0ICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pXG5cdCAgICAgIH1cblx0ICAgICAgZm9yICg7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdKSlcblx0ICAgICAgfVxuXHQgICAgICBpZiAoZG9tU3R5bGUucGFydHMubGVuZ3RoID4gaXRlbS5wYXJ0cy5sZW5ndGgpIHtcblx0ICAgICAgICBkb21TdHlsZS5wYXJ0cy5sZW5ndGggPSBpdGVtLnBhcnRzLmxlbmd0aFxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgcGFydHMgPSBbXVxuXHQgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICBwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0pKVxuXHQgICAgICB9XG5cdCAgICAgIHN0eWxlc0luRG9tW2l0ZW0uaWRdID0geyBpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAoKSB7XG5cdCAgdmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJylcblx0ICBzdHlsZUVsZW1lbnQudHlwZSA9ICd0ZXh0L2Nzcydcblx0ICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudClcblx0ICByZXR1cm4gc3R5bGVFbGVtZW50XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlIChvYmogLyogU3R5bGVPYmplY3RQYXJ0ICovKSB7XG5cdCAgdmFyIHVwZGF0ZSwgcmVtb3ZlXG5cdCAgdmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlW2RhdGEtdnVlLXNzci1pZH49XCInICsgb2JqLmlkICsgJ1wiXScpXG5cdFxuXHQgIGlmIChzdHlsZUVsZW1lbnQpIHtcblx0ICAgIGlmIChpc1Byb2R1Y3Rpb24pIHtcblx0ICAgICAgLy8gaGFzIFNTUiBzdHlsZXMgYW5kIGluIHByb2R1Y3Rpb24gbW9kZS5cblx0ICAgICAgLy8gc2ltcGx5IGRvIG5vdGhpbmcuXG5cdCAgICAgIHJldHVybiBub29wXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBoYXMgU1NSIHN0eWxlcyBidXQgaW4gZGV2IG1vZGUuXG5cdCAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBDaHJvbWUgY2FuJ3QgaGFuZGxlIHNvdXJjZSBtYXAgaW4gc2VydmVyLXJlbmRlcmVkXG5cdCAgICAgIC8vIHN0eWxlIHRhZ3MgLSBzb3VyY2UgbWFwcyBpbiA8c3R5bGU+IG9ubHkgd29ya3MgaWYgdGhlIHN0eWxlIHRhZyBpc1xuXHQgICAgICAvLyBjcmVhdGVkIGFuZCBpbnNlcnRlZCBkeW5hbWljYWxseS4gU28gd2UgcmVtb3ZlIHRoZSBzZXJ2ZXIgcmVuZGVyZWRcblx0ICAgICAgLy8gc3R5bGVzIGFuZCBpbmplY3QgbmV3IG9uZXMuXG5cdCAgICAgIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudClcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChpc09sZElFKSB7XG5cdCAgICAvLyB1c2Ugc2luZ2xldG9uIG1vZGUgZm9yIElFOS5cblx0ICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrXG5cdCAgICBzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KCkpXG5cdCAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSlcblx0ICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpXG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHVzZSBtdWx0aS1zdHlsZS10YWcgbW9kZSBpbiBhbGwgb3RoZXIgY2FzZXNcblx0ICAgIHN0eWxlRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudCgpXG5cdCAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KVxuXHQgICAgcmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB1cGRhdGUob2JqKVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaiAvKiBTdHlsZU9iamVjdFBhcnQgKi8pIHtcblx0ICAgIGlmIChuZXdPYmopIHtcblx0ICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0ICAgICAgICAgIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdCAgICAgICAgICBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgICAgdXBkYXRlKG9iaiA9IG5ld09iailcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlbW92ZSgpXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHQgIHZhciB0ZXh0U3RvcmUgPSBbXVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHQgICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50XG5cdCAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKVxuXHQgIH1cblx0fSkoKVxuXHRcblx0ZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0ICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmouY3NzXG5cdFxuXHQgIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuXHQgICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKVxuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2Rlc1xuXHQgICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pXG5cdCAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0ICAgICAgc3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSlcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0ICB2YXIgY3NzID0gb2JqLmNzc1xuXHQgIHZhciBtZWRpYSA9IG9iai5tZWRpYVxuXHQgIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwXG5cdFxuXHQgIGlmIChtZWRpYSkge1xuXHQgICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSlcblx0ICB9XG5cdFxuXHQgIGlmIChzb3VyY2VNYXApIHtcblx0ICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9qYXZhc2NyaXB0LWRlYnVnZ2luZ1xuXHQgICAgLy8gdGhpcyBtYWtlcyBzb3VyY2UgbWFwcyBpbnNpZGUgc3R5bGUgdGFncyB3b3JrIHByb3Blcmx5IGluIENocm9tZVxuXHQgICAgY3NzICs9ICdcXG4vKiMgc291cmNlVVJMPScgKyBzb3VyY2VNYXAuc291cmNlc1swXSArICcgKi8nXG5cdCAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHQgICAgY3NzICs9ICdcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LCcgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgJyAqLydcblx0ICB9XG5cdFxuXHQgIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuXHQgICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzc1xuXHQgIH0gZWxzZSB7XG5cdCAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKVxuXHQgICAgfVxuXHQgICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpXG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUcmFuc2xhdGVzIHRoZSBsaXN0IGZvcm1hdCBwcm9kdWNlZCBieSBjc3MtbG9hZGVyIGludG8gc29tZXRoaW5nXG5cdCAqIGVhc2llciB0byBtYW5pcHVsYXRlLlxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsaXN0VG9TdHlsZXMgKHBhcmVudElkLCBsaXN0KSB7XG5cdCAgdmFyIHN0eWxlcyA9IFtdXG5cdCAgdmFyIG5ld1N0eWxlcyA9IHt9XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgaXRlbSA9IGxpc3RbaV1cblx0ICAgIHZhciBpZCA9IGl0ZW1bMF1cblx0ICAgIHZhciBjc3MgPSBpdGVtWzFdXG5cdCAgICB2YXIgbWVkaWEgPSBpdGVtWzJdXG5cdCAgICB2YXIgc291cmNlTWFwID0gaXRlbVszXVxuXHQgICAgdmFyIHBhcnQgPSB7XG5cdCAgICAgIGlkOiBwYXJlbnRJZCArICc6JyArIGksXG5cdCAgICAgIGNzczogY3NzLFxuXHQgICAgICBtZWRpYTogbWVkaWEsXG5cdCAgICAgIHNvdXJjZU1hcDogc291cmNlTWFwXG5cdCAgICB9XG5cdCAgICBpZiAoIW5ld1N0eWxlc1tpZF0pIHtcblx0ICAgICAgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHsgaWQ6IGlkLCBwYXJ0czogW3BhcnRdIH0pXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydClcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHN0eWxlc1xuXHR9XG5cblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50IChcblx0ICByYXdTY3JpcHRFeHBvcnRzLFxuXHQgIGNvbXBpbGVkVGVtcGxhdGUsXG5cdCAgc2NvcGVJZCxcblx0ICBjc3NNb2R1bGVzXG5cdCkge1xuXHQgIHZhciBlc01vZHVsZVxuXHQgIHZhciBzY3JpcHRFeHBvcnRzID0gcmF3U2NyaXB0RXhwb3J0cyA9IHJhd1NjcmlwdEV4cG9ydHMgfHwge31cblx0XG5cdCAgLy8gRVM2IG1vZHVsZXMgaW50ZXJvcFxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHJhd1NjcmlwdEV4cG9ydHMuZGVmYXVsdFxuXHQgIGlmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBlc01vZHVsZSA9IHJhd1NjcmlwdEV4cG9ydHNcblx0ICAgIHNjcmlwdEV4cG9ydHMgPSByYXdTY3JpcHRFeHBvcnRzLmRlZmF1bHRcblx0ICB9XG5cdFxuXHQgIC8vIFZ1ZS5leHRlbmQgY29uc3RydWN0b3IgZXhwb3J0IGludGVyb3Bcblx0ICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzY3JpcHRFeHBvcnRzID09PSAnZnVuY3Rpb24nXG5cdCAgICA/IHNjcmlwdEV4cG9ydHMub3B0aW9uc1xuXHQgICAgOiBzY3JpcHRFeHBvcnRzXG5cdFxuXHQgIC8vIHJlbmRlciBmdW5jdGlvbnNcblx0ICBpZiAoY29tcGlsZWRUZW1wbGF0ZSkge1xuXHQgICAgb3B0aW9ucy5yZW5kZXIgPSBjb21waWxlZFRlbXBsYXRlLnJlbmRlclxuXHQgICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBjb21waWxlZFRlbXBsYXRlLnN0YXRpY1JlbmRlckZuc1xuXHQgIH1cblx0XG5cdCAgLy8gc2NvcGVkSWRcblx0ICBpZiAoc2NvcGVJZCkge1xuXHQgICAgb3B0aW9ucy5fc2NvcGVJZCA9IHNjb3BlSWRcblx0ICB9XG5cdFxuXHQgIC8vIGluamVjdCBjc3NNb2R1bGVzXG5cdCAgaWYgKGNzc01vZHVsZXMpIHtcblx0ICAgIHZhciBjb21wdXRlZCA9IG9wdGlvbnMuY29tcHV0ZWQgfHwgKG9wdGlvbnMuY29tcHV0ZWQgPSB7fSlcblx0ICAgIE9iamVjdC5rZXlzKGNzc01vZHVsZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICB2YXIgbW9kdWxlID0gY3NzTW9kdWxlc1trZXldXG5cdCAgICAgIGNvbXB1dGVkW2tleV0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBtb2R1bGUgfVxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIHJldHVybiB7XG5cdCAgICBlc01vZHVsZTogZXNNb2R1bGUsXG5cdCAgICBleHBvcnRzOiBzY3JpcHRFeHBvcnRzLFxuXHQgICAgb3B0aW9uczogb3B0aW9uc1xuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdXBsb2FkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHR2YXIgX3VwbG9hZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cGxvYWQpO1xuXHRcblx0dmFyIF9wbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfcGxheWVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BsYXllcik7XG5cdFxuXHR2YXIgX2x5cmljRWRpdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5cdFxuXHR2YXIgX2x5cmljRWRpdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2x5cmljRWRpdG9yKTtcblx0XG5cdHZhciBfbW9kYWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7XG5cdFxuXHR2YXIgX21vZGFsczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tb2RhbHMpO1xuXHRcblx0dmFyIF9uYXZNZW51ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7XG5cdFxuXHR2YXIgX25hdk1lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbmF2TWVudSk7XG5cdFxuXHR2YXIgX2xyY0tpdCA9IF9fd2VicGFja19yZXF1aXJlX18oNjApO1xuXHRcblx0dmFyIF9jYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuXHRcblx0dmFyIF9jYWNoZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jYWNoZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICB2YXIgbHJjRm9ybWF0ID0gX2NhY2hlMi5kZWZhdWx0LmxyY0Zvcm1hdDtcblx0XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBtdXNpY1VybDogJycsXG5cdCAgICAgIGVkaXRpbmc6IF9jYWNoZTIuZGVmYXVsdC5lZGl0aW5nLFxuXHRcblx0ICAgICAgbHJjRm9ybWF0OiBscmNGb3JtYXQsXG5cdCAgICAgIHJ1bm5lcjogbmV3IF9scmNLaXQuUnVubmVyKF9scmNLaXQuTHJjLnBhcnNlKGxyY0Zvcm1hdCkpLFxuXHQgICAgICBseXJpY0FycmF5OiBfY2FjaGUyLmRlZmF1bHQubHlyaWNBcnJheVxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICB1cGxvYWRNdXNpYzogZnVuY3Rpb24gdXBsb2FkTXVzaWMobXVzaWMpIHtcblx0ICAgICAgLy8gY2FjaGUubXVzaWMgPSBtdXNpY1xuXHQgICAgICB0aGlzLiRyZWZzLnBsYXllci5zcmMgPSBtdXNpYztcblx0ICAgIH0sXG5cdCAgICByZW1vdmVMeXJpYzogZnVuY3Rpb24gcmVtb3ZlTHlyaWMoKSB7XG5cdCAgICAgIHRoaXMubHJjRm9ybWF0ID0gJyc7XG5cdCAgICAgIHRoaXMubHlyaWNBcnJheSA9IFtdO1xuXHQgICAgICB0aGlzLnJ1bm5lciA9IG5ldyBfbHJjS2l0LlJ1bm5lcigpO1xuXHQgICAgfSxcblx0ICAgIHBsYXl0bzogZnVuY3Rpb24gcGxheXRvKHRpbWUpIHtcblx0ICAgICAgdGhpcy4kcmVmcy5wbGF5ZXIucGxheXRvKHRpbWUpO1xuXHQgICAgfSxcblx0ICAgIHRpbWV1cGRhdGU6IGZ1bmN0aW9uIHRpbWV1cGRhdGUodGltZXN0YW1wKSB7XG5cdCAgICAgIHRoaXMuJHJlZnMubHlyaWMuJGVtaXQoJ3RpbWV1cGRhdGUnLCB0aW1lc3RhbXApO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgd2F0Y2g6IHtcblx0ICAgIGVkaXRpbmc6IGZ1bmN0aW9uIGVkaXRpbmcodmFsKSB7XG5cdCAgICAgIF9jYWNoZTIuZGVmYXVsdC5lZGl0aW5nID0gdmFsO1xuXHQgICAgfSxcblx0ICAgIGxyY0Zvcm1hdDogZnVuY3Rpb24gbHJjRm9ybWF0KHZhbCkge1xuXHQgICAgICBfY2FjaGUyLmRlZmF1bHQubHJjRm9ybWF0ID0gdmFsO1xuXHQgICAgICB0aGlzLnJ1bm5lciA9IG5ldyBfbHJjS2l0LlJ1bm5lcihfbHJjS2l0LkxyYy5wYXJzZSh0aGlzLmxyY0Zvcm1hdCkpO1xuXHQgICAgfSxcblx0XG5cdCAgICBseXJpY0FycmF5OiB7XG5cdCAgICAgIGRlZXA6IHRydWUsXG5cdCAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG5cdCAgICAgICAgX2NhY2hlMi5kZWZhdWx0Lmx5cmljQXJyYXkgPSB0aGlzLmx5cmljQXJyYXk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIFVwbG9hZDogX3VwbG9hZDIuZGVmYXVsdCxcblx0ICAgIFBsYXllcjogX3BsYXllcjIuZGVmYXVsdCxcblx0ICAgIEx5cmljRWRpdG9yOiBfbHlyaWNFZGl0b3IyLmRlZmF1bHQsXG5cdCAgICBNb2RhbHM6IF9tb2RhbHMyLmRlZmF1bHQsXG5cdCAgICAvLyBNZW51LFxuXHQgICAgTmF2TWVudTogX25hdk1lbnUyLmRlZmF1bHRcblx0ICB9XG5cdH07XG5cdC8vIGltcG9ydCBNZW51IGZyb20gJy4vbWVudSdcblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHQvKiBzdHlsZXMgKi9cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMClcblx0XG5cdHZhciBDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KShcblx0ICAvKiBzY3JpcHQgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSxcblx0ICAvKiB0ZW1wbGF0ZSAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMjMpLFxuXHQgIC8qIHNjb3BlSWQgKi9cblx0ICBcImRhdGEtdi0wYTU1YmFjOFwiLFxuXHQgIC8qIGNzc01vZHVsZXMgKi9cblx0ICBudWxsXG5cdClcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ29tcG9uZW50LmV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpKFwiNzIwOTBiNjdcIiwgY29udGVudCwgdHJ1ZSk7XG5cbi8qKiovIH0pLFxuLyogMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiaW5wdXRbdHlwZT1maWxlXVtkYXRhLXYtMGE1NWJhYzhde2Rpc3BsYXk6bm9uZX1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgdXBsb2FkID0gdGhpcy4kcmVmcy51cGxvYWQ7XG5cdCAgICB1cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAodXBsb2FkLmZpbGVzLmxlbmd0aCA+IDAgJiYgX3RoaXMudHlwZV9tYXRjaCgpKSB7XG5cdCAgICAgICAgaWYgKF90aGlzLnJlYWRGb3JtYXQgPT09ICd1cmwnKSB7XG5cdCAgICAgICAgICBfdGhpcy4kZW1pdCgndXBsb2FkJywgVVJMLmNyZWF0ZU9iamVjdFVSTCh1cGxvYWQuZmlsZXNbMF0pKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdCAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIF90aGlzLiRlbWl0KCd1cGxvYWQnLCBldmVudC50YXJnZXQucmVzdWx0KTtcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgICByZWFkZXJbJ3JlYWRBcycgKyBfdGhpcy5yZWFkRm9ybWF0XSh1cGxvYWQuZmlsZXNbMF0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBwcm9wczoge1xuXHQgICAgdHlwZToge1xuXHQgICAgICB0eXBlOiBTdHJpbmdcblx0ICAgIH0sXG5cdCAgICByZWFkRm9ybWF0OiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgZGVmYXVsdDogJ1RleHQnXG5cdCAgICB9LFxuXHQgICAgYWNjZXB0OiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgZGVmYXVsdDogJydcblx0ICAgIH1cblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHVwbG9hZDogZnVuY3Rpb24gdXBsb2FkKCkge1xuXHQgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5jbGljaygpO1xuXHQgICAgfSxcblx0ICAgIHR5cGVfbWF0Y2g6IGZ1bmN0aW9uIHR5cGVfbWF0Y2goKSB7XG5cdCAgICAgIGlmICh0aGlzLnR5cGUpIHtcblx0ICAgICAgICB2YXIgbWF0Y2ggPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMudHlwZSArICcvJyk7XG5cdCAgICAgICAgcmV0dXJuIG1hdGNoLnRlc3QodGhpcy4kcmVmcy51cGxvYWQuZmlsZXNbMF0udHlwZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2Jywge1xuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBfdm0udXBsb2FkXG5cdCAgICB9XG5cdCAgfSwgW19jKCdpJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi11cGxvYWRcIlxuXHQgIH0pLCBfdm0uX3YoXCIgXCIpLCBfdm0uX3QoXCJkZWZhdWx0XCIpLCBfdm0uX3YoXCIgXCIpLCBfYygnaW5wdXQnLCB7XG5cdCAgICByZWY6IFwidXBsb2FkXCIsXG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInR5cGVcIjogXCJmaWxlXCIsXG5cdCAgICAgIFwiYWNjZXB0XCI6IF92bS5hY2NlcHRcblx0ICAgIH1cblx0ICB9KV0sIDIpXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHQvKiBzdHlsZXMgKi9cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNSlcblx0XG5cdHZhciBDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KShcblx0ICAvKiBzY3JpcHQgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KSxcblx0ICAvKiB0ZW1wbGF0ZSAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNTUpLFxuXHQgIC8qIHNjb3BlSWQgKi9cblx0ICBcImRhdGEtdi1kNDgyNTBiMFwiLFxuXHQgIC8qIGNzc01vZHVsZXMgKi9cblx0ICBudWxsXG5cdClcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ29tcG9uZW50LmV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpKFwiMTZkNDBjZjVcIiwgY29udGVudCwgdHJ1ZSk7XG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnJvb3RbZGF0YS12LWQ0ODI1MGIwXXtoZWlnaHQ6MzBweH0ucm9vdC5tb2JpbGVbZGF0YS12LWQ0ODI1MGIwXXtoZWlnaHQ6NjBweH0ubW9yZVtkYXRhLXYtZDQ4MjUwYjBdLC5wbGF5ZXJbZGF0YS12LWQ0ODI1MGIwXSwuc291bmRbZGF0YS12LWQ0ODI1MGIwXXtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy1tcy1mbGV4LXBhY2s6anVzdGlmeTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0ubW9yZVtkYXRhLXYtZDQ4MjUwYjBdLC5wbGF5ZXJbZGF0YS12LWQ0ODI1MGIwXXtiYWNrZ3JvdW5kOiNkMGRhZTQ7Y29sb3I6IzJhNzJiYjtoZWlnaHQ6MzBweH0uY3RybC1idG5bZGF0YS12LWQ0ODI1MGIwXXtmb250LXNpemU6MjBweDtwYWRkaW5nOjAgMXB4fS5yYW5nZVtkYXRhLXYtZDQ4MjUwYjBde21hcmdpbi1sZWZ0OjRweDttYXJnaW4tcmlnaHQ6NHB4fS5yYW5nZS5tdXNpY1tkYXRhLXYtZDQ4MjUwYjBdey1tcy1mbGV4OjE7ZmxleDoxfXRpbWUtcGFuZWxbZGF0YS12LWQ0ODI1MGIwXXtwYWRkaW5nOjAgNXB4fS5tb3JlW2RhdGEtdi1kNDgyNTBiMF17aGVpZ2h0OjMwcHg7LW1zLWZsZXgtcGFjazplbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kO3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTB9Lm1vYmlsZSAubW9yZVtkYXRhLXYtZDQ4MjUwYjBdey1tcy1mbGV4LXBhY2s6anVzdGlmeTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0uc291bmRbZGF0YS12LWQ0ODI1MGIwXXtwYWRkaW5nOjAgNXB4O3dpZHRoOjMwJX0uc291bmQgLnJhbmdlLnZvbHVtZVtkYXRhLXYtZDQ4MjUwYjBdey1tcy1mbGV4OjE7ZmxleDoxfS5zb3VuZCAuY3RybC1tdXRlLWJ0bltkYXRhLXYtZDQ4MjUwYjBde3dpZHRoOjI2cHg7Zm9udC1zaXplOjE4cHh9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3JhbmdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX3JhbmdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JhbmdlKTtcblx0XG5cdHZhciBfdGltZVBhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdFxuXHR2YXIgX3RpbWVQYW5lbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90aW1lUGFuZWwpO1xuXHRcblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaG92ZXI6IGZhbHNlLFxuXHQgICAgICBpc01vYmlsZTogX3V0aWxzLmlzTW9iaWxlLFxuXHRcblx0ICAgICAgcHJvY2VzczogMCxcblx0ICAgICAgbXV0ZWQ6IGZhbHNlLFxuXHQgICAgICBwYXVzZWQ6IHRydWUsXG5cdCAgICAgIGN1cnJlbnRUaW1lOiAwLFxuXHQgICAgICBkdXJhdGlvbjogMCxcblx0ICAgICAgdm9sdW1lOiAwLFxuXHQgICAgICBzcmM6ICcnLFxuXHQgICAgICBhdWRpbzogbnVsbFxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICBzZWVrOiBmdW5jdGlvbiBzZWVrKHBlcmNlbnQpIHtcblx0ICAgICAgdGhpcy5wbGF5dG8ocGFyc2VGbG9hdChwZXJjZW50ICogdGhpcy5hdWRpby5kdXJhdGlvbikpO1xuXHQgICAgfSxcblx0ICAgIHZvbHVtZVNlZWs6IGZ1bmN0aW9uIHZvbHVtZVNlZWsocGVyY2VudCkge1xuXHQgICAgICB0aGlzLmF1ZGlvLnZvbHVtZSA9IHRoaXMudm9sdW1lID0gcGVyY2VudDtcblx0ICAgIH0sXG5cdCAgICBwbGF5dG86IGZ1bmN0aW9uIHBsYXl0byh0aW1lKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAodGhpcy5wYXVzZWQpIHtcblx0ICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIFVzaW5nIGBuZXh0VGlja2Bcblx0ICAgICAgLy8gQSBidWcgb24gY2hyb21lLCBkYXRhVVJMIG11c2ljIHdpbGwgb3ZlcmxhcCBwbGF5IHdoZW4gY2hhbmdlIGN1cnJlbnRUaW1lIGJlZm9yZSBjYWxsIGBhdWRpby5wbGF5KClgXG5cdCAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfdGhpcy5jdXJyZW50VGltZSA9IF90aGlzLmF1ZGlvLmN1cnJlbnRUaW1lID0gdGltZTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge1xuXHQgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5hdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG5cdCAgICB0aGlzLmF1ZGlvLnByZWxvYWQgPSAnbWV0YWRhdGEnO1xuXHQgICAgdGhpcy5hdWRpby5hZGRFdmVudExpc3RlbmVyKCdkdXJhdGlvbmNoYW5nZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMyLmR1cmF0aW9uID0gX3RoaXMyLmF1ZGlvLmR1cmF0aW9uO1xuXHQgICAgfSk7XG5cdCAgICAvLyBUT0RPIG9uIHByb2dyZXNzXG5cdCAgICB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzMi5jdXJyZW50VGltZSA9IF90aGlzMi5hdWRpby5jdXJyZW50VGltZTtcblx0ICAgICAgX3RoaXMyLnByb2Nlc3MgPSBfdGhpczIuY3VycmVudFRpbWUgLyBfdGhpczIuZHVyYXRpb247XG5cdCAgICAgIF90aGlzMi4kZW1pdCgndGltZXVwZGF0ZScsIF90aGlzMi5jdXJyZW50VGltZSk7XG5cdCAgICB9KTtcblx0ICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzMi4kZW1pdCgndGltZXVwZGF0ZScsIF90aGlzMi5jdXJyZW50VGltZSk7XG5cdCAgICAgIF90aGlzMi5wcm9jZXNzID0gMDtcblx0ICAgICAgX3RoaXMyLnBhdXNlZCA9IHRydWU7XG5cdCAgICB9KTtcblx0ICAgIF91dGlscy5nbG9iYWxLZXlkb3duLm9uKFsnc3BhY2UnLCAnICddLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzMi5wYXVzZWQgPSAhX3RoaXMyLnBhdXNlZDtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSkub24oJ2Fycm93bGVmdCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMyLiRlbWl0KCdiYWNrd2FyZCcpO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9KS5vbignYXJyb3dyaWdodCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMyLiRlbWl0KCdmb3J3YXJkJyk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRoaXMuJG9uKCdiYWNrd2FyZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMyLnBsYXl0byhfdGhpczIuYXVkaW8uY3VycmVudFRpbWUgLSA1KTtcblx0ICAgIH0pLiRvbignZm9yd2FyZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMyLnBsYXl0byhfdGhpczIuYXVkaW8uY3VycmVudFRpbWUgKyA1KTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIHdhdGNoOiB7XG5cdCAgICBzcmM6IHtcblx0ICAgICAgaW1tZWRpYXRlOiB0cnVlLFxuXHQgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHNyYykge1xuXHQgICAgICAgIGlmIChzcmMpIHtcblx0ICAgICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcblx0ICAgICAgICAgIHRoaXMuYXVkaW8uc3JjID0gc3JjO1xuXHQgICAgICAgICAgdGhpcy5wcm9jZXNzID0gMDtcblx0ICAgICAgICAgIHRoaXMudm9sdW1lID0gdGhpcy5hdWRpby52b2x1bWU7XG5cdCAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gdGhpcy5hdWRpby5jdXJyZW50VGltZTtcblx0ICAgICAgICAgIHRoaXMuZHVyYXRpb24gPSB0aGlzLmF1ZGlvLmR1cmF0aW9uO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHByb2Nlc3M6IGZ1bmN0aW9uIHByb2Nlc3ModmFsKSB7XG5cdCAgICAgIHRoaXMuJHJlZnMubXVzaWNSYW5nZS5jaGFuZ2VWYWx1ZSh2YWwpO1xuXHQgICAgfSxcblx0ICAgIHZvbHVtZTogZnVuY3Rpb24gdm9sdW1lKHZhbCkge1xuXHQgICAgICB0aGlzLiRyZWZzLnNvdW5kUmFuZ2UuY2hhbmdlVmFsdWUodmFsKTtcblx0ICAgIH0sXG5cdCAgICBtdXRlZDogZnVuY3Rpb24gbXV0ZWQodmFsKSB7XG5cdCAgICAgIHRoaXMuYXVkaW8ubXV0ZWQgPSB2YWw7XG5cdCAgICB9LFxuXHQgICAgcGF1c2VkOiBmdW5jdGlvbiBwYXVzZWQoKSB7XG5cdCAgICAgIGlmICh0aGlzLnBhdXNlZCkge1xuXHQgICAgICAgIHRoaXMuYXVkaW8ucGF1c2UoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmF1ZGlvLnBsYXkoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgUmFuZ2U6IF9yYW5nZTIuZGVmYXVsdCxcblx0ICAgIFRpbWVQYW5lbDogX3RpbWVQYW5lbDIuZGVmYXVsdFxuXHQgIH1cblx0fTsgLy9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHQvKiBzdHlsZXMgKi9cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyOSlcblx0XG5cdHZhciBDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KShcblx0ICAvKiBzY3JpcHQgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSxcblx0ICAvKiB0ZW1wbGF0ZSAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNDgpLFxuXHQgIC8qIHNjb3BlSWQgKi9cblx0ICBcImRhdGEtdi01ODIwZGU3NFwiLFxuXHQgIC8qIGNzc01vZHVsZXMgKi9cblx0ICBudWxsXG5cdClcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ29tcG9uZW50LmV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDI5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpKFwiM2FkMzk1MzVcIiwgY29udGVudCwgdHJ1ZSk7XG5cbi8qKiovIH0pLFxuLyogMzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmJhcltkYXRhLXYtNTgyMGRlNzRde3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxMHB4fS53cmFwW2RhdGEtdi01ODIwZGU3NF17d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiMxMjNiNWQ7Ym9yZGVyLXJhZGl1czo1cHg7b3ZlcmZsb3c6aGlkZGVufS52YWx1ZVtkYXRhLXYtNTgyMGRlNzRde2hlaWdodDoxMDAlO2JhY2tncm91bmQtY29sb3I6IzJhNzJiYn0udGh1bWJbZGF0YS12LTU4MjBkZTc0XXtjdXJzb3I6bW92ZTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTNweDt3aWR0aDoxMHB4O2hlaWdodDoxNnB4O2JhY2tncm91bmQ6I2ZmZjtib3gtc2hhZG93Omluc2V0IC0xcHggLTFweCA1cHggLTJweCAjMGIyMDMxO2JvcmRlci1yYWRpdXM6MTZweDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNXB4KX1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgc2VsZlZhbHVlOiAwLFxuXHQgICAgICBkcmFnaW5nOiBmYWxzZSxcblx0ICAgICAgZHJhZ1ZhbHVlOiAwXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICB2YWx1ZToge1xuXHQgICAgICB0eXBlOiBOdW1iZXIsXG5cdCAgICAgIGRlZmF1bHQ6IDAsXG5cdCAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gdmFsaWRhdG9yKHZhbCkge1xuXHQgICAgICAgIHJldHVybiB2YWwgPj0gMCAmJiB2YWwgPD0gMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMuJHJlZnMudGh1bWIpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5zZWxmVmFsdWUgPSB0aGlzLm9mZnNldDJ2YWx1ZShldmVudC5vZmZzZXRYKTtcblx0ICAgICAgdGhpcy5lbWl0U2VlaygpO1xuXHQgICAgfSxcblx0ICAgIGVtaXRTZWVrOiBmdW5jdGlvbiBlbWl0U2VlaygpIHtcblx0ICAgICAgdGhpcy4kZW1pdCgnc2VlaycsIHRoaXMuc2VsZlZhbHVlKTtcblx0ICAgIH0sXG5cdCAgICBlbWl0RHJhZ1NlZWs6IGZ1bmN0aW9uIGVtaXREcmFnU2VlaygpIHtcblx0ICAgICAgdGhpcy4kZW1pdCgnZHJhZy1zZWVrJywgdGhpcy5zZWxmVmFsdWUpO1xuXHQgICAgfSxcblx0ICAgIG9mZnNldDJ2YWx1ZTogZnVuY3Rpb24gb2Zmc2V0MnZhbHVlKG9mZnNldCkge1xuXHQgICAgICByZXR1cm4gb2Zmc2V0IC8gdGhpcy4kcmVmcy5iYXIuY2xpZW50V2lkdGg7XG5cdCAgICB9LFxuXHQgICAgY2hhbmdlVmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVZhbHVlKHZhbHVlKSB7XG5cdCAgICAgIGlmICghdGhpcy5kcmFnaW5nKSB7XG5cdCAgICAgICAgdGhpcy5zZWxmVmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHRodW1iID0gdGhpcy4kcmVmcy50aHVtYjtcblx0ICAgIHZhciBiYXIgPSB0aGlzLiRyZWZzLmJhcjtcblx0XG5cdCAgICB2YXIgZHJhZ2dlciA9IG5ldyBfdXRpbHMuRHJhZ2dlcih0aHVtYiwgYmFyKTtcblx0ICAgIGRyYWdnZXIub24oJ3N0YXJ0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBfdGhpcy5kcmFnaW5nID0gdHJ1ZTtcblx0ICAgIH0pLm9uKCdtb3ZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBfdGhpcy5zZWxmVmFsdWUgPSBfdGhpcy5vZmZzZXQydmFsdWUoZHJhZ2dlci5vZmZzZXQpO1xuXHQgICAgICBfdGhpcy5lbWl0RHJhZ1NlZWsoKTtcblx0ICAgIH0pLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLmRyYWdpbmcgPSBmYWxzZTtcblx0ICAgICAgX3RoaXMuc2VsZlZhbHVlID0gX3RoaXMub2Zmc2V0MnZhbHVlKGRyYWdnZXIub2Zmc2V0KTtcblx0ICAgICAgX3RoaXMuZW1pdFNlZWsoKTtcblx0ICAgIH0pO1xuXHQgICAgZHJhZ2dlci5jcmVhdGUoKTtcblx0ICB9XG5cdH07IC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cbi8qKiovIH0pLFxuLyogMzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5Ub29sdGlwUG9zaXRpb24gPSBleHBvcnRzLkRyYWdnZXIgPSBleHBvcnRzLmdsb2JhbEtleWRvd24gPSBleHBvcnRzLmNhY2hlID0gZXhwb3J0cy5DYWNoZSA9IGV4cG9ydHMuRGVsYXlIb3ZlciA9IGV4cG9ydHMuU2Nyb2xsZXIgPSBleHBvcnRzLkV2ZW50RW1pdHRlciA9IGV4cG9ydHMuaXNNb2JpbGUgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXHRcblx0ZXhwb3J0cy5zYXZlTHJjID0gc2F2ZUxyYztcblx0ZXhwb3J0cy50aW1lc3RhbXAydGltZXN0ciA9IHRpbWVzdGFtcDJ0aW1lc3RyO1xuXHRleHBvcnRzLnRpbWVzdHIydGltZXN0YW1wID0gdGltZXN0cjJ0aW1lc3RhbXA7XG5cdFxuXHR2YXIgX2V2ZW50ZW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0dmFyIF9ldmVudGVtaXR0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRlbWl0dGVyKTtcblx0XG5cdHZhciBfZmlsZXNhdmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHR2YXIgX2ZpbGVzYXZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlc2F2ZXIpO1xuXHRcblx0dmFyIF91bmlkcmFnZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdFxuXHR2YXIgX3VuaWRyYWdnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5pZHJhZ2dlcik7XG5cdFxuXHR2YXIgX2lzX2pzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHR2YXIgX2lzX2pzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzX2pzKTtcblx0XG5cdHZhciBfZXh0ZW5kID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdFxuXHR2YXIgX2V4dGVuZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmQpO1xuXHRcblx0dmFyIF9jbG9uZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHRcblx0dmFyIF9jbG9uZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbG9uZSk7XG5cdFxuXHR2YXIgX3BhY2thZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0XG5cdHZhciBfcGFja2FnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYWNrYWdlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBpc01vYmlsZSA9IGV4cG9ydHMuaXNNb2JpbGUgPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XG5cdFxuXHR2YXIgRXZlbnRFbWl0dGVyID0gZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuXHQgIF9pbmhlcml0cyhFdmVudEVtaXR0ZXIsIF9FdmVudEVtaXR0ZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRFbWl0dGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEV2ZW50RW1pdHRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEV2ZW50RW1pdHRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEV2ZW50RW1pdHRlciwgW3tcblx0ICAgIGtleTogJ29uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbihldmVudHMpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKF9pc19qczIuZGVmYXVsdC5hcnJheShldmVudHMpKSB7XG5cdCAgICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGl0KSB7XG5cdCAgICAgICAgICB2YXIgX2dldDI7XG5cdFxuXHQgICAgICAgICAgKF9nZXQyID0gX2dldChFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSksICdvbicsIF90aGlzMikpLmNhbGwuYXBwbHkoX2dldDIsIFtfdGhpczIsIGl0XS5jb25jYXQoYXJncykpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhciBfZ2V0Mztcblx0XG5cdCAgICAgICAgKF9nZXQzID0gX2dldChFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSksICdvbicsIHRoaXMpKS5jYWxsLmFwcGx5KF9nZXQzLCBbdGhpcywgZXZlbnRzXS5jb25jYXQoYXJncykpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEV2ZW50RW1pdHRlcjtcblx0fShfZXZlbnRlbWl0dGVyMi5kZWZhdWx0KTtcblx0XG5cdHZhciBTY3JvbGxlciA9IGV4cG9ydHMuU2Nyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gU2Nyb2xsZXIodmlld3BvcnQpIHtcblx0ICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY3JvbGxlcik7XG5cdFxuXHQgICAgdGhpcy50aW1lciA9IFtdO1xuXHQgICAgdGhpcy5zY3JvbGxhYmxlU3RhcnRUaW1lID0gbmV3IERhdGUoKTtcblx0XG5cdCAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG5cdCAgICB0aGlzLmNvbmZpZyA9ICgwLCBfZXh0ZW5kMi5kZWZhdWx0KSh7IGRlbGF5OiAzLCB0aW1lOiAxLCBzdGVwOiAxMDAgfSwgY29uZmlnKTtcblx0XG5cdCAgICB0aGlzLnZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKCFfdGhpczMuaXNDYW5TY3JvbGwoKSkge1xuXHQgICAgICAgIF90aGlzMy5sZXREZWxheSgpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhTY3JvbGxlciwgW3tcblx0ICAgIGtleTogJ2xldERlbGF5Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBsZXREZWxheSgpIHtcblx0ICAgICAgdGhpcy5zY3JvbGxhYmxlU3RhcnRUaW1lID0gRGF0ZS5ub3coKSArIHRoaXMuY29uZmlnLmRlbGF5ICogMTAwMDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjbGVhclRpbWVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhclRpbWVyKCkge1xuXHQgICAgICB0aGlzLnRpbWVyLmZvckVhY2goZnVuY3Rpb24gKGl0KSB7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChpdCk7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLnRpbWVyID0gW107XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaXNDYW5TY3JvbGwnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2FuU2Nyb2xsKCkge1xuXHQgICAgICByZXR1cm4gRGF0ZS5ub3coKSA+IHRoaXMuc2Nyb2xsYWJsZVN0YXJ0VGltZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzY3JvbGxUbycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG8odGFyZ2V0VG9wKSB7XG5cdCAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIGZvcmNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblx0XG5cdCAgICAgIGlmICghdGhpcy5pc0NhblNjcm9sbCgpICYmIGZvcmNlID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmNsZWFyVGltZXIoKTtcblx0XG5cdCAgICAgIHZhciBzdGFydFRvcCA9IHRoaXMudmlld3BvcnQuc2Nyb2xsVG9wO1xuXHQgICAgICB2YXIgZW5kVG9wID0gdGFyZ2V0VG9wO1xuXHQgICAgICB2YXIgZGlmZlRvcCA9IGVuZFRvcCAtIHN0YXJ0VG9wO1xuXHQgICAgICBpZiAoZGlmZlRvcCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHBlclN0ZXAgPSBkaWZmVG9wIC8gdGhpcy5jb25maWcuc3RlcDtcblx0XG5cdCAgICAgIHZhciBjdXJUb3AgPSBzdGFydFRvcDtcblx0ICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLmNvbmZpZy5zdGVwOyArK2kpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKGkpIHtcblx0ICAgICAgICAgIF90aGlzNC50aW1lci5wdXNoKHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBpZiAoY3VyVG9wICE9PSBfdGhpczQudmlld3BvcnQuc2Nyb2xsVG9wKSB7XG5cdCAgICAgICAgICAgICAgX3RoaXM0LmNsZWFyVGltZXIoKTtcblx0ICAgICAgICAgICAgICBfdGhpczQubGV0RGVsYXkoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBfdGhpczQudmlld3BvcnQuc2Nyb2xsVG9wID0gc3RhcnRUb3AgKyBwZXJTdGVwICogaTtcblx0ICAgICAgICAgICAgICBjdXJUb3AgPSBfdGhpczQudmlld3BvcnQuc2Nyb2xsVG9wO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9LCBfdGhpczQuY29uZmlnLnRpbWUgKiAxMDAwICogaSAvIF90aGlzNC5jb25maWcuc3RlcCkpO1xuXHQgICAgICAgIH0pKGkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU2Nyb2xsZXI7XG5cdH0oKTtcblx0XG5cdHZhciBEZWxheUhvdmVyID0gZXhwb3J0cy5EZWxheUhvdmVyID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIyKSB7XG5cdCAgX2luaGVyaXRzKERlbGF5SG92ZXIsIF9FdmVudEVtaXR0ZXIyKTtcblx0XG5cdCAgZnVuY3Rpb24gRGVsYXlIb3ZlcihlbGVtZW50KSB7XG5cdCAgICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVsYXlIb3Zlcik7XG5cdFxuXHQgICAgdmFyIF90aGlzNSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEZWxheUhvdmVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGVsYXlIb3ZlcikpLmNhbGwodGhpcykpO1xuXHRcblx0ICAgIF90aGlzNS5lbnRlclRpbWVyID0gbnVsbDtcblx0ICAgIF90aGlzNS5sZWF2ZVRpbWVyID0gbnVsbDtcblx0ICAgIF90aGlzNS5zaG93ID0gZmFsc2U7XG5cdFxuXHQgICAgX3RoaXM1LmVsZW1lbnQgPSBlbGVtZW50O1xuXHQgICAgX3RoaXM1LmNmZyA9ICgwLCBfZXh0ZW5kMi5kZWZhdWx0KSh7XG5cdCAgICAgIGVudGVyRGVsYXk6IDAuNSxcblx0ICAgICAgbGVhdmVEZWxheTogMC4zLFxuXHQgICAgICB1bmlxdWU6IHRydWVcblx0ICAgIH0sIGNvbmZpZyk7XG5cdFxuXHQgICAgX3RoaXM1LmhvdmVyKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXM1LnNob3cgPSB0cnVlO1xuXHQgICAgfSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICBfdGhpczUuc2hvdyA9IGZhbHNlO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgaWYgKGlzTW9iaWxlKSB7XG5cdCAgICAgIF90aGlzNS5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChfdGhpczUuc2hvdykge1xuXHQgICAgICAgICAgX3RoaXM1LmVtaXQoJ2xlYXZlJyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIF90aGlzNS5jbG9zZUxhc3RIb3ZlcigpO1xuXHQgICAgICAgICAgX3RoaXM1LmVtaXQoJ2VudGVyJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIF90aGlzNS5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXM1LmNsZWFyTGVhdmVUaW1lcigpO1xuXHQgICAgICAgIF90aGlzNS5lbnRlclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBfdGhpczUuY2xvc2VMYXN0SG92ZXIoKTtcblx0ICAgICAgICAgIERlbGF5SG92ZXIuTGFzdEhvdmVyID0gX3RoaXM1O1xuXHQgICAgICAgICAgX3RoaXM1LmVtaXQoJ2VudGVyJyk7XG5cdCAgICAgICAgfSwgMTAwMCAqIF90aGlzNS5jZmcuZW50ZXJEZWxheSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBfdGhpczUuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzNS5jbGVhckVudGVyVGltZXIoKTtcblx0ICAgICAgICBfdGhpczUubGVhdmVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgX3RoaXM1LmVtaXQoJ2xlYXZlJyk7XG5cdCAgICAgICAgfSwgMTAwMCAqIF90aGlzNS5jZmcubGVhdmVEZWxheSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF90aGlzNTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhEZWxheUhvdmVyLCBbe1xuXHQgICAga2V5OiAnY2xvc2VMYXN0SG92ZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlTGFzdEhvdmVyKCkge1xuXHQgICAgICBpZiAodGhpcy5jZmcudW5pcXVlICYmIERlbGF5SG92ZXIuTGFzdEhvdmVyICYmIERlbGF5SG92ZXIuTGFzdEhvdmVyICE9PSB0aGlzKSB7XG5cdCAgICAgICAgRGVsYXlIb3Zlci5MYXN0SG92ZXIuZW1pdCgnbGVhdmUnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyTGVhdmVUaW1lcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJMZWF2ZVRpbWVyKCkge1xuXHQgICAgICBpZiAodGhpcy5sZWF2ZVRpbWVyICE9PSBudWxsKSB7XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubGVhdmVUaW1lcik7XG5cdCAgICAgICAgdGhpcy5sZWF2ZVRpbWVyID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyRW50ZXJUaW1lcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJFbnRlclRpbWVyKCkge1xuXHQgICAgICBpZiAodGhpcy5lbnRlclRpbWVyICE9PSBudWxsKSB7XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZW50ZXJUaW1lcik7XG5cdCAgICAgICAgdGhpcy5lbnRlclRpbWVyID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hvdmVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBob3ZlcihlbnRlciwgbGVhdmUpIHtcblx0ICAgICAgdGhpcy5vbignZW50ZXInLCBlbnRlcikub24oJ2xlYXZlJywgbGVhdmUpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIERlbGF5SG92ZXI7XG5cdH0oRXZlbnRFbWl0dGVyKTtcblx0XG5cdERlbGF5SG92ZXIuTGFzdEhvdmVyID0gbnVsbDtcblx0XG5cdFxuXHR2YXIgaXNGaWxlU2F2ZXJTdXBwb3J0ZWQ7XG5cdHRyeSB7XG5cdCAgaXNGaWxlU2F2ZXJTdXBwb3J0ZWQgPSAhIW5ldyBCbG9iKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0ICBpc0ZpbGVTYXZlclN1cHBvcnRlZCA9IGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzYXZlTHJjKHN0ciwgbmFtZSkge1xuXHQgIGlmIChpc0ZpbGVTYXZlclN1cHBvcnRlZCkge1xuXHQgICAgX2ZpbGVzYXZlcjIuZGVmYXVsdC5zYXZlQXMobmV3IEJsb2IoW3N0cl0sIHsgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcgfSksIG5hbWUgKyAnLmxyYycpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBhbGVydCgnUGxlYXNlIHVwZ3JhZGUgeW91ciBicm93c2VyJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgQ2FjaGUgPSBleHBvcnRzLkNhY2hlID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIENhY2hlKCkge1xuXHQgICAgdmFyIHByZWZpeCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogX3BhY2thZ2UyLmRlZmF1bHQubmFtZTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FjaGUpO1xuXHRcblx0ICAgIHRoaXMudmVyc2lvbiA9IDI7XG5cdFxuXHQgICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQ2FjaGUsIFt7XG5cdCAgICBrZXk6ICdyZWFkJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkKCkge1xuXHQgICAgICB2YXIgZGF0YTtcblx0ICAgICAgaWYgKHRoaXMucHJlZml4IGluIGxvY2FsU3RvcmFnZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbdGhpcy5wcmVmaXhdKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZGF0YS4kdmVyc2lvbiA9PT0gdGhpcy52ZXJzaW9uKSB7XG5cdCAgICAgICAgICByZXR1cm4gZGF0YTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHt9O1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3dyaXRlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB3cml0ZShkYXRhKSB7XG5cdCAgICAgIGRhdGEuJHZlcnNpb24gPSB0aGlzLnZlcnNpb247XG5cdCAgICAgIGxvY2FsU3RvcmFnZVt0aGlzLnByZWZpeF0gPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldChrZXksIGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgICB2YXIgZGF0YSA9IHRoaXMucmVhZCgpO1xuXHQgICAgICByZXR1cm4ga2V5IGluIGRhdGEgPyBkYXRhW2tleV0gOiBkZWZhdWx0VmFsdWU7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkge1xuXHQgICAgICB2YXIgZGF0YSA9IHRoaXMucmVhZCgpO1xuXHQgICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB0aGlzLndyaXRlKGRhdGEpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcihlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIENhY2hlO1xuXHR9KCk7XG5cdFxuXHR2YXIgY2FjaGUgPSBleHBvcnRzLmNhY2hlID0gbmV3IENhY2hlKCk7XG5cdFxuXHR2YXIgZ2xvYmFsS2V5ZG93biA9IGV4cG9ydHMuZ2xvYmFsS2V5ZG93biA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICBpZiAoLyhpbnB1dHxzZWxlY3R8b3B0aW9ufHRleHRhcmVhKS8udGVzdChldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuO1xuXHRcblx0ICB2YXIgY29kZSA9IGV2ZW50LmtleSB8fCBldmVudC5jb2RlO1xuXHQgIHZhciBoYXNGYWxzZSA9IGdsb2JhbEtleWRvd24ubGlzdGVuZXJzKGNvZGUudG9Mb3dlckNhc2UoKSkubWFwKGZ1bmN0aW9uIChmbikge1xuXHQgICAgcmV0dXJuIGZuKGV2ZW50KTtcblx0ICB9KS5zb21lKGZ1bmN0aW9uIChmbGFnKSB7XG5cdCAgICByZXR1cm4gZmxhZyA9PT0gZmFsc2U7XG5cdCAgfSk7XG5cdCAgaWYgKGhhc0ZhbHNlKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9KTtcblx0XG5cdHZhciBEcmFnZ2VyID0gZXhwb3J0cy5EcmFnZ2VyID0gZnVuY3Rpb24gKF9VbmlkcmFnZ2VyKSB7XG5cdCAgX2luaGVyaXRzKERyYWdnZXIsIF9VbmlkcmFnZ2VyKTtcblx0XG5cdCAgZnVuY3Rpb24gRHJhZ2dlcihlbGVtLCBjb250YWluZXIpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcmFnZ2VyKTtcblx0XG5cdCAgICB2YXIgX3RoaXM2ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERyYWdnZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEcmFnZ2VyKSkuY2FsbCh0aGlzLCBlbGVtKSk7XG5cdFxuXHQgICAgX3RoaXM2LmVlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXHQgICAgX3RoaXM2LmVsZW1lbnQgPSBlbGVtO1xuXHQgICAgX3RoaXM2LmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgIHJldHVybiBfdGhpczY7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRHJhZ2dlciwgW3tcblx0ICAgIGtleTogJ29uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbigpIHtcblx0ICAgICAgdmFyIF9lZTtcblx0XG5cdCAgICAgIHJldHVybiAoX2VlID0gdGhpcy5lZSkub24uYXBwbHkoX2VlLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2VtaXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXQoKSB7XG5cdCAgICAgIHZhciBfZWUyO1xuXHRcblx0ICAgICAgcmV0dXJuIChfZWUyID0gdGhpcy5lZSkuZW1pdC5hcHBseShfZWUyLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NyZWF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKCkge1xuXHQgICAgICB0aGlzLmhhbmRsZXMgPSBbdGhpcy5lbGVtZW50XTtcblx0ICAgICAgdGhpcy5iaW5kSGFuZGxlcygpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYWdTdGFydCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZHJhZ1N0YXJ0KGV2ZW50KSB7XG5cdCAgICAgIHRoaXMuZHJhZ1N0YXJ0UG9pbnQubGVmdCA9IHRoaXMuZWxlbWVudC5vZmZzZXRMZWZ0O1xuXHQgICAgICB0aGlzLmVtaXQoJ3N0YXJ0JywgZXZlbnQpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYWdNb3ZlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkcmFnTW92ZShldmVudCwgcG9pbnRlciwgbW92ZVZlY3Rvcikge1xuXHQgICAgICB0aGlzLm9mZnNldCA9IHRoaXMuZHJhZ1N0YXJ0UG9pbnQubGVmdCArIG1vdmVWZWN0b3IueDtcblx0ICAgICAgaWYgKHRoaXMub2Zmc2V0IDwgMCkge1xuXHQgICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLm9mZnNldCA+IHRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoKSB7XG5cdCAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmVtaXQoJ21vdmUnLCBldmVudCwgcG9pbnRlciwgbW92ZVZlY3Rvcik7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZHJhZ0VuZCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZHJhZ0VuZChldmVudCwgcG9pbnRlcikge1xuXHQgICAgICB0aGlzLmVtaXQoJ2VuZCcsIGV2ZW50LCBwb2ludGVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBEcmFnZ2VyO1xuXHR9KF91bmlkcmFnZ2VyMi5kZWZhdWx0KTtcblx0XG5cdGZ1bmN0aW9uIHRpbWVzdGFtcDJ0aW1lc3RyKHRpbWUpIHtcblx0ICB2YXIgb25seUludGVnZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXHRcblx0ICBpZiAoIXRpbWUpIHtcblx0ICAgIHRpbWUgPSAwO1xuXHQgIH1cblx0ICB2YXIgcGFkWmVybyA9IGZ1bmN0aW9uIHBhZFplcm8obnVtKSB7XG5cdCAgICB2YXIgc2l6ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMjtcblx0XG5cdCAgICBudW0gPSBudW0udG9TdHJpbmcoKTtcblx0ICAgIHdoaWxlIChudW0uc3BsaXQoJy4nKVswXS5sZW5ndGggPCBzaXplKSB7XG5cdCAgICAgIG51bSA9ICcwJyArIG51bTtcblx0ICAgIH1yZXR1cm4gbnVtO1xuXHQgIH07XG5cdCAgaWYgKG9ubHlJbnRlZ2VyKSB7XG5cdCAgICByZXR1cm4gcGFkWmVybyhwYXJzZUludCh0aW1lIC8gNjAsIDEwKSkgKyAnOicgKyBwYWRaZXJvKHBhcnNlSW50KHRpbWUgJSA2MCwgMTApKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHBhZFplcm8ocGFyc2VJbnQodGltZSAvIDYwLCAxMCkpICsgJzonICsgcGFkWmVybygodGltZSAlIDYwKS50b0ZpeGVkKDIpLCAyKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRpbWVzdHIydGltZXN0YW1wKHN0cikge1xuXHQgIHZhciBfc3RyJHNwbGl0ID0gc3RyLnNwbGl0KCc6JyksXG5cdCAgICAgIF9zdHIkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3N0ciRzcGxpdCwgMiksXG5cdCAgICAgIG1pbnV0ZSA9IF9zdHIkc3BsaXQyWzBdLFxuXHQgICAgICBzZWNvbmQgPSBfc3RyJHNwbGl0MlsxXTtcblx0XG5cdCAgcmV0dXJuIHBhcnNlSW50KG1pbnV0ZSwgMTApICogNjAgKyBwYXJzZUZsb2F0KHNlY29uZCk7XG5cdH1cblx0XG5cdHZhciBUb29sdGlwUG9zaXRpb24gPSBleHBvcnRzLlRvb2x0aXBQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBUb29sdGlwUG9zaXRpb24odGFyZ2V0LCB0b29sdGlwKSB7XG5cdCAgICB2YXIgZGlyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnYm90dG9tJztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVG9vbHRpcFBvc2l0aW9uKTtcblx0XG5cdCAgICB0aGlzLmRpcnMgPSBbJ2JvdHRvbScsICdyaWdodCcsICd0b3AnLCAnbGVmdCddO1xuXHRcblx0ICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXHQgICAgdGhpcy50b29sdGlwID0gdG9vbHRpcDtcblx0ICAgIHRoaXMudmlld3BvcnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgICB0aGlzLmdlbmVyYXRlRGlycyhkaXIpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFRvb2x0aXBQb3NpdGlvbiwgW3tcblx0ICAgIGtleTogJ2dlbmVyYXRlRGlycycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVEaXJzKGRpcikge1xuXHQgICAgICB2YXIgaWR4ID0gdGhpcy5kaXJzLmluZGV4T2YoZGlyKTtcblx0ICAgICAgdGhpcy5kaXJzLnNwbGljZShpZHgsIDEpO1xuXHQgICAgICB0aGlzLmRpcnMudW5zaGlmdChkaXIpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NoZWNrUmVjdE92ZXJmbG93Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja1JlY3RPdmVyZmxvdyhyZWN0KSB7XG5cdCAgICAgIHJldHVybiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LnRvcCA+PSAwICYmIHJlY3QucmlnaHQgPD0gdGhpcy52aWV3cG9ydC5jbGllbnRXaWR0aCAmJiByZWN0LmJvdHRvbSA8PSB0aGlzLnZpZXdwb3J0LmNsaWVudEhlaWdodDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZWN0T3ZlcmZsb3dDb3VudCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVjdE92ZXJmbG93Q291bnQocmVjdCkge1xuXHQgICAgICB2YXIgbmVnYXRpdmUgPSBmdW5jdGlvbiBuZWdhdGl2ZSh2YWwpIHtcblx0ICAgICAgICByZXR1cm4gdmFsIDwgMCA/IHZhbCA6IDA7XG5cdCAgICAgIH07XG5cdCAgICAgIHJldHVybiBuZWdhdGl2ZShyZWN0LmxlZnQpICsgbmVnYXRpdmUocmVjdC50b3ApICsgbmVnYXRpdmUodGhpcy52aWV3cG9ydC5jbGllbnRXaWR0aCAtIHJlY3QucmlnaHQpICsgbmVnYXRpdmUodGhpcy52aWV3cG9ydC5jbGllbnRIZWlnaHQgLSByZWN0LmJvdHRvbSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncG9zaXRpb24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBvc2l0aW9uKCkge1xuXHQgICAgICB2YXIgcmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgICB2YXIgd2lkdGggPSB0aGlzLnRvb2x0aXAuY2xpZW50V2lkdGg7XG5cdCAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnRvb2x0aXAuY2xpZW50SGVpZ2h0O1xuXHRcblx0ICAgICAgdmFyIHRvb2x0aXBSZWN0ID0ge1xuXHQgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICBoZWlnaHQ6IGhlaWdodFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIG92ZXJmbG93VmFsdWVzID0gW107XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGlycy5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgIHZhciBkaXIgPSB0aGlzLmRpcnNbaV07XG5cdCAgICAgICAgc3dpdGNoICh0aGlzLmRpcnNbaV0pIHtcblx0ICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG5cdCAgICAgICAgICAgIHRvb2x0aXBSZWN0LmxlZnQgPSByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMiAtIHdpZHRoIC8gMjtcblx0ICAgICAgICAgICAgdG9vbHRpcFJlY3QucmlnaHQgPSB0b29sdGlwUmVjdC5sZWZ0ICsgd2lkdGg7XG5cdCAgICAgICAgICAgIHRvb2x0aXBSZWN0LnRvcCA9IHJlY3QuYm90dG9tO1xuXHQgICAgICAgICAgICB0b29sdGlwUmVjdC5ib3R0b20gPSByZWN0LmJvdHRvbSArIGhlaWdodDtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICBjYXNlICd0b3AnOlxuXHQgICAgICAgICAgICB0b29sdGlwUmVjdC5sZWZ0ID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIgLSB3aWR0aCAvIDI7XG5cdCAgICAgICAgICAgIHRvb2x0aXBSZWN0LnJpZ2h0ID0gdG9vbHRpcFJlY3QubGVmdCArIHdpZHRoO1xuXHQgICAgICAgICAgICB0b29sdGlwUmVjdC50b3AgPSByZWN0LnRvcCAtIGhlaWdodDtcblx0ICAgICAgICAgICAgdG9vbHRpcFJlY3QuYm90dG9tID0gcmVjdC50b3A7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgY2FzZSAnbGVmdCc6XG5cdCAgICAgICAgICAgIHRvb2x0aXBSZWN0LmxlZnQgPSByZWN0LmxlZnQgLSB3aWR0aDtcblx0ICAgICAgICAgICAgdG9vbHRpcFJlY3QucmlnaHQgPSByZWN0LmxlZnQ7XG5cdCAgICAgICAgICAgIHRvb2x0aXBSZWN0LnRvcCA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyIC0gaGVpZ2h0IC8gMjtcblx0ICAgICAgICAgICAgdG9vbHRpcFJlY3QuYm90dG9tID0gdG9vbHRpcFJlY3QudG9wICsgaGVpZ2h0O1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIGNhc2UgJ3JpZ2h0Jzpcblx0ICAgICAgICAgICAgdG9vbHRpcFJlY3QubGVmdCA9IHJlY3QucmlnaHQ7XG5cdCAgICAgICAgICAgIHRvb2x0aXBSZWN0LnJpZ2h0ID0gcmVjdC5yaWdodCArIHdpZHRoO1xuXHQgICAgICAgICAgICB0b29sdGlwUmVjdC50b3AgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMiAtIGhlaWdodCAvIDI7XG5cdCAgICAgICAgICAgIHRvb2x0aXBSZWN0LmJvdHRvbSA9IHRvb2x0aXBSZWN0LnRvcCArIGhlaWdodDtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBvdmVyZmxvd1ZhbHVlcy5wdXNoKFt0aGlzLnJlY3RPdmVyZmxvd0NvdW50KHRvb2x0aXBSZWN0KSwgZGlyLCAoMCwgX2Nsb25lMi5kZWZhdWx0KSh0b29sdGlwUmVjdCldKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgb3ZlcmZsb3dWYWx1ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICAgIHJldHVybiBiWzBdIC0gYVswXTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGRpcjogb3ZlcmZsb3dWYWx1ZXNbMF1bMV0sXG5cdCAgICAgICAgcmVjdDogb3ZlcmZsb3dWYWx1ZXNbMF1bMl1cblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XSk7XG5cblx0ICByZXR1cm4gVG9vbHRpcFBvc2l0aW9uO1xuXHR9KCk7XG5cbi8qKiovIH0pLFxuLyogMzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohXHJcblx0ICogRXZlbnRFbWl0dGVyMlxyXG5cdCAqIGh0dHBzOi8vZ2l0aHViLmNvbS9oaWoxbngvRXZlbnRFbWl0dGVyMlxyXG5cdCAqXHJcblx0ICogQ29weXJpZ2h0IChjKSAyMDEzIGhpajFueFxyXG5cdCAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuXHQgKi9cclxuXHQ7IWZ1bmN0aW9uKHVuZGVmaW5lZCkge1xyXG5cdFxyXG5cdCAgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5ID8gQXJyYXkuaXNBcnJheSA6IGZ1bmN0aW9uIF9pc0FycmF5KG9iaikge1xyXG5cdCAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09IFwiW29iamVjdCBBcnJheV1cIjtcclxuXHQgIH07XHJcblx0ICB2YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xyXG5cdFxyXG5cdCAgZnVuY3Rpb24gaW5pdCgpIHtcclxuXHQgICAgdGhpcy5fZXZlbnRzID0ge307XHJcblx0ICAgIGlmICh0aGlzLl9jb25mKSB7XHJcblx0ICAgICAgY29uZmlndXJlLmNhbGwodGhpcywgdGhpcy5fY29uZik7XHJcblx0ICAgIH1cclxuXHQgIH1cclxuXHRcclxuXHQgIGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25mKSB7XHJcblx0ICAgIGlmIChjb25mKSB7XHJcblx0ICAgICAgdGhpcy5fY29uZiA9IGNvbmY7XHJcblx0XHJcblx0ICAgICAgY29uZi5kZWxpbWl0ZXIgJiYgKHRoaXMuZGVsaW1pdGVyID0gY29uZi5kZWxpbWl0ZXIpO1xyXG5cdCAgICAgIHRoaXMuX2V2ZW50cy5tYXhMaXN0ZW5lcnMgPSBjb25mLm1heExpc3RlbmVycyAhPT0gdW5kZWZpbmVkID8gY29uZi5tYXhMaXN0ZW5lcnMgOiBkZWZhdWx0TWF4TGlzdGVuZXJzO1xyXG5cdCAgICAgIGNvbmYud2lsZGNhcmQgJiYgKHRoaXMud2lsZGNhcmQgPSBjb25mLndpbGRjYXJkKTtcclxuXHQgICAgICBjb25mLm5ld0xpc3RlbmVyICYmICh0aGlzLm5ld0xpc3RlbmVyID0gY29uZi5uZXdMaXN0ZW5lcik7XHJcblx0ICAgICAgY29uZi52ZXJib3NlTWVtb3J5TGVhayAmJiAodGhpcy52ZXJib3NlTWVtb3J5TGVhayA9IGNvbmYudmVyYm9zZU1lbW9yeUxlYWspO1xyXG5cdFxyXG5cdCAgICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XHJcblx0ICAgICAgICB0aGlzLmxpc3RlbmVyVHJlZSA9IHt9O1xyXG5cdCAgICAgIH1cclxuXHQgICAgfSBlbHNlIHtcclxuXHQgICAgICB0aGlzLl9ldmVudHMubWF4TGlzdGVuZXJzID0gZGVmYXVsdE1heExpc3RlbmVycztcclxuXHQgICAgfVxyXG5cdCAgfVxyXG5cdFxyXG5cdCAgZnVuY3Rpb24gbG9nUG9zc2libGVNZW1vcnlMZWFrKGNvdW50LCBldmVudE5hbWUpIHtcclxuXHQgICAgdmFyIGVycm9yTXNnID0gJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xyXG5cdCAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXHJcblx0ICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJztcclxuXHRcclxuXHQgICAgaWYodGhpcy52ZXJib3NlTWVtb3J5TGVhayl7XHJcblx0ICAgICAgZXJyb3JNc2cgKz0gJyBFdmVudCBuYW1lOiAlcy4nO1xyXG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNc2csIGNvdW50LCBldmVudE5hbWUpO1xyXG5cdCAgICB9IGVsc2Uge1xyXG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNc2csIGNvdW50KTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICBpZiAoY29uc29sZS50cmFjZSl7XHJcblx0ICAgICAgY29uc29sZS50cmFjZSgpO1xyXG5cdCAgICB9XHJcblx0ICB9XHJcblx0XHJcblx0ICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoY29uZikge1xyXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcclxuXHQgICAgdGhpcy5uZXdMaXN0ZW5lciA9IGZhbHNlO1xyXG5cdCAgICB0aGlzLnZlcmJvc2VNZW1vcnlMZWFrID0gZmFsc2U7XHJcblx0ICAgIGNvbmZpZ3VyZS5jYWxsKHRoaXMsIGNvbmYpO1xyXG5cdCAgfVxyXG5cdCAgRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlcjIgPSBFdmVudEVtaXR0ZXI7IC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBleHBvcnRpbmcgRXZlbnRFbWl0dGVyIHByb3BlcnR5XHJcblx0XHJcblx0ICAvL1xyXG5cdCAgLy8gQXR0ZW50aW9uLCBmdW5jdGlvbiByZXR1cm4gdHlwZSBub3cgaXMgYXJyYXksIGFsd2F5cyAhXHJcblx0ICAvLyBJdCBoYXMgemVybyBlbGVtZW50cyBpZiBubyBhbnkgbWF0Y2hlcyBmb3VuZCBhbmQgb25lIG9yIG1vcmVcclxuXHQgIC8vIGVsZW1lbnRzIChsZWFmcykgaWYgdGhlcmUgYXJlIG1hdGNoZXNcclxuXHQgIC8vXHJcblx0ICBmdW5jdGlvbiBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHRyZWUsIGkpIHtcclxuXHQgICAgaWYgKCF0cmVlKSB7XHJcblx0ICAgICAgcmV0dXJuIFtdO1xyXG5cdCAgICB9XHJcblx0ICAgIHZhciBsaXN0ZW5lcnM9W10sIGxlYWYsIGxlbiwgYnJhbmNoLCB4VHJlZSwgeHhUcmVlLCBpc29sYXRlZEJyYW5jaCwgZW5kUmVhY2hlZCxcclxuXHQgICAgICAgIHR5cGVMZW5ndGggPSB0eXBlLmxlbmd0aCwgY3VycmVudFR5cGUgPSB0eXBlW2ldLCBuZXh0VHlwZSA9IHR5cGVbaSsxXTtcclxuXHQgICAgaWYgKGkgPT09IHR5cGVMZW5ndGggJiYgdHJlZS5fbGlzdGVuZXJzKSB7XHJcblx0ICAgICAgLy9cclxuXHQgICAgICAvLyBJZiBhdCB0aGUgZW5kIG9mIHRoZSBldmVudChzKSBsaXN0IGFuZCB0aGUgdHJlZSBoYXMgbGlzdGVuZXJzXHJcblx0ICAgICAgLy8gaW52b2tlIHRob3NlIGxpc3RlbmVycy5cclxuXHQgICAgICAvL1xyXG5cdCAgICAgIGlmICh0eXBlb2YgdHJlZS5fbGlzdGVuZXJzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0ICAgICAgICBoYW5kbGVycyAmJiBoYW5kbGVycy5wdXNoKHRyZWUuX2xpc3RlbmVycyk7XHJcblx0ICAgICAgICByZXR1cm4gW3RyZWVdO1xyXG5cdCAgICAgIH0gZWxzZSB7XHJcblx0ICAgICAgICBmb3IgKGxlYWYgPSAwLCBsZW4gPSB0cmVlLl9saXN0ZW5lcnMubGVuZ3RoOyBsZWFmIDwgbGVuOyBsZWFmKyspIHtcclxuXHQgICAgICAgICAgaGFuZGxlcnMgJiYgaGFuZGxlcnMucHVzaCh0cmVlLl9saXN0ZW5lcnNbbGVhZl0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIFt0cmVlXTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgaWYgKChjdXJyZW50VHlwZSA9PT0gJyonIHx8IGN1cnJlbnRUeXBlID09PSAnKionKSB8fCB0cmVlW2N1cnJlbnRUeXBlXSkge1xyXG5cdCAgICAgIC8vXHJcblx0ICAgICAgLy8gSWYgdGhlIGV2ZW50IGVtaXR0ZWQgaXMgJyonIGF0IHRoaXMgcGFydFxyXG5cdCAgICAgIC8vIG9yIHRoZXJlIGlzIGEgY29uY3JldGUgbWF0Y2ggYXQgdGhpcyBwYXRjaFxyXG5cdCAgICAgIC8vXHJcblx0ICAgICAgaWYgKGN1cnJlbnRUeXBlID09PSAnKicpIHtcclxuXHQgICAgICAgIGZvciAoYnJhbmNoIGluIHRyZWUpIHtcclxuXHQgICAgICAgICAgaWYgKGJyYW5jaCAhPT0gJ19saXN0ZW5lcnMnICYmIHRyZWUuaGFzT3duUHJvcGVydHkoYnJhbmNoKSkge1xyXG5cdCAgICAgICAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIGkrMSkpO1xyXG5cdCAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gbGlzdGVuZXJzO1xyXG5cdCAgICAgIH0gZWxzZSBpZihjdXJyZW50VHlwZSA9PT0gJyoqJykge1xyXG5cdCAgICAgICAgZW5kUmVhY2hlZCA9IChpKzEgPT09IHR5cGVMZW5ndGggfHwgKGkrMiA9PT0gdHlwZUxlbmd0aCAmJiBuZXh0VHlwZSA9PT0gJyonKSk7XHJcblx0ICAgICAgICBpZihlbmRSZWFjaGVkICYmIHRyZWUuX2xpc3RlbmVycykge1xyXG5cdCAgICAgICAgICAvLyBUaGUgbmV4dCBlbGVtZW50IGhhcyBhIF9saXN0ZW5lcnMsIGFkZCBpdCB0byB0aGUgaGFuZGxlcnMuXHJcblx0ICAgICAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlLCB0eXBlTGVuZ3RoKSk7XHJcblx0ICAgICAgICB9XHJcblx0XHJcblx0ICAgICAgICBmb3IgKGJyYW5jaCBpbiB0cmVlKSB7XHJcblx0ICAgICAgICAgIGlmIChicmFuY2ggIT09ICdfbGlzdGVuZXJzJyAmJiB0cmVlLmhhc093blByb3BlcnR5KGJyYW5jaCkpIHtcclxuXHQgICAgICAgICAgICBpZihicmFuY2ggPT09ICcqJyB8fCBicmFuY2ggPT09ICcqKicpIHtcclxuXHQgICAgICAgICAgICAgIGlmKHRyZWVbYnJhbmNoXS5fbGlzdGVuZXJzICYmICFlbmRSZWFjaGVkKSB7XHJcblx0ICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIHR5cGVMZW5ndGgpKTtcclxuXHQgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIGkpKTtcclxuXHQgICAgICAgICAgICB9IGVsc2UgaWYoYnJhbmNoID09PSBuZXh0VHlwZSkge1xyXG5cdCAgICAgICAgICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmNvbmNhdChzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHRyZWVbYnJhbmNoXSwgaSsyKSk7XHJcblx0ICAgICAgICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgICAgICAgIC8vIE5vIG1hdGNoIG9uIHRoaXMgb25lLCBzaGlmdCBpbnRvIHRoZSB0cmVlIGJ1dCBub3QgaW4gdGhlIHR5cGUgYXJyYXkuXHJcblx0ICAgICAgICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuY29uY2F0KHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgdHJlZVticmFuY2hdLCBpKSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gbGlzdGVuZXJzO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuY29uY2F0KHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgdHJlZVtjdXJyZW50VHlwZV0sIGkrMSkpO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHhUcmVlID0gdHJlZVsnKiddO1xyXG5cdCAgICBpZiAoeFRyZWUpIHtcclxuXHQgICAgICAvL1xyXG5cdCAgICAgIC8vIElmIHRoZSBsaXN0ZW5lciB0cmVlIHdpbGwgYWxsb3cgYW55IG1hdGNoIGZvciB0aGlzIHBhcnQsXHJcblx0ICAgICAgLy8gdGhlbiByZWN1cnNpdmVseSBleHBsb3JlIGFsbCBicmFuY2hlcyBvZiB0aGUgdHJlZVxyXG5cdCAgICAgIC8vXHJcblx0ICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4VHJlZSwgaSsxKTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB4eFRyZWUgPSB0cmVlWycqKiddO1xyXG5cdCAgICBpZih4eFRyZWUpIHtcclxuXHQgICAgICBpZihpIDwgdHlwZUxlbmd0aCkge1xyXG5cdCAgICAgICAgaWYoeHhUcmVlLl9saXN0ZW5lcnMpIHtcclxuXHQgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIGxpc3RlbmVyIG9uIGEgJyoqJywgaXQgd2lsbCBjYXRjaCBhbGwsIHNvIGFkZCBpdHMgaGFuZGxlci5cclxuXHQgICAgICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4eFRyZWUsIHR5cGVMZW5ndGgpO1xyXG5cdCAgICAgICAgfVxyXG5cdFxyXG5cdCAgICAgICAgLy8gQnVpbGQgYXJyYXlzIG9mIG1hdGNoaW5nIG5leHQgYnJhbmNoZXMgYW5kIG90aGVycy5cclxuXHQgICAgICAgIGZvcihicmFuY2ggaW4geHhUcmVlKSB7XHJcblx0ICAgICAgICAgIGlmKGJyYW5jaCAhPT0gJ19saXN0ZW5lcnMnICYmIHh4VHJlZS5oYXNPd25Qcm9wZXJ0eShicmFuY2gpKSB7XHJcblx0ICAgICAgICAgICAgaWYoYnJhbmNoID09PSBuZXh0VHlwZSkge1xyXG5cdCAgICAgICAgICAgICAgLy8gV2Uga25vdyB0aGUgbmV4dCBlbGVtZW50IHdpbGwgbWF0Y2gsIHNvIGp1bXAgdHdpY2UuXHJcblx0ICAgICAgICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHh4VHJlZVticmFuY2hdLCBpKzIpO1xyXG5cdCAgICAgICAgICAgIH0gZWxzZSBpZihicmFuY2ggPT09IGN1cnJlbnRUeXBlKSB7XHJcblx0ICAgICAgICAgICAgICAvLyBDdXJyZW50IG5vZGUgbWF0Y2hlcywgbW92ZSBpbnRvIHRoZSB0cmVlLlxyXG5cdCAgICAgICAgICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4eFRyZWVbYnJhbmNoXSwgaSsxKTtcclxuXHQgICAgICAgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgaXNvbGF0ZWRCcmFuY2ggPSB7fTtcclxuXHQgICAgICAgICAgICAgIGlzb2xhdGVkQnJhbmNoW2JyYW5jaF0gPSB4eFRyZWVbYnJhbmNoXTtcclxuXHQgICAgICAgICAgICAgIHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgeyAnKionOiBpc29sYXRlZEJyYW5jaCB9LCBpKzEpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgIH0gZWxzZSBpZih4eFRyZWUuX2xpc3RlbmVycykge1xyXG5cdCAgICAgICAgLy8gV2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgYW5kIHN0aWxsIG9uIGEgJyoqJ1xyXG5cdCAgICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4eFRyZWUsIHR5cGVMZW5ndGgpO1xyXG5cdCAgICAgIH0gZWxzZSBpZih4eFRyZWVbJyonXSAmJiB4eFRyZWVbJyonXS5fbGlzdGVuZXJzKSB7XHJcblx0ICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHh4VHJlZVsnKiddLCB0eXBlTGVuZ3RoKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgcmV0dXJuIGxpc3RlbmVycztcclxuXHQgIH1cclxuXHRcclxuXHQgIGZ1bmN0aW9uIGdyb3dMaXN0ZW5lclRyZWUodHlwZSwgbGlzdGVuZXIpIHtcclxuXHRcclxuXHQgICAgdHlwZSA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUuc3BsaXQodGhpcy5kZWxpbWl0ZXIpIDogdHlwZS5zbGljZSgpO1xyXG5cdFxyXG5cdCAgICAvL1xyXG5cdCAgICAvLyBMb29rcyBmb3IgdHdvIGNvbnNlY3V0aXZlICcqKicsIGlmIHNvLCBkb24ndCBhZGQgdGhlIGV2ZW50IGF0IGFsbC5cclxuXHQgICAgLy9cclxuXHQgICAgZm9yKHZhciBpID0gMCwgbGVuID0gdHlwZS5sZW5ndGg7IGkrMSA8IGxlbjsgaSsrKSB7XHJcblx0ICAgICAgaWYodHlwZVtpXSA9PT0gJyoqJyAmJiB0eXBlW2krMV0gPT09ICcqKicpIHtcclxuXHQgICAgICAgIHJldHVybjtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIHRyZWUgPSB0aGlzLmxpc3RlbmVyVHJlZTtcclxuXHQgICAgdmFyIG5hbWUgPSB0eXBlLnNoaWZ0KCk7XHJcblx0XHJcblx0ICAgIHdoaWxlIChuYW1lICE9PSB1bmRlZmluZWQpIHtcclxuXHRcclxuXHQgICAgICBpZiAoIXRyZWVbbmFtZV0pIHtcclxuXHQgICAgICAgIHRyZWVbbmFtZV0gPSB7fTtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgdHJlZSA9IHRyZWVbbmFtZV07XHJcblx0XHJcblx0ICAgICAgaWYgKHR5cGUubGVuZ3RoID09PSAwKSB7XHJcblx0XHJcblx0ICAgICAgICBpZiAoIXRyZWUuX2xpc3RlbmVycykge1xyXG5cdCAgICAgICAgICB0cmVlLl9saXN0ZW5lcnMgPSBsaXN0ZW5lcjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICBpZiAodHlwZW9mIHRyZWUuX2xpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgICAgICAgIHRyZWUuX2xpc3RlbmVycyA9IFt0cmVlLl9saXN0ZW5lcnNdO1xyXG5cdCAgICAgICAgICB9XHJcblx0XHJcblx0ICAgICAgICAgIHRyZWUuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuXHRcclxuXHQgICAgICAgICAgaWYgKFxyXG5cdCAgICAgICAgICAgICF0cmVlLl9saXN0ZW5lcnMud2FybmVkICYmXHJcblx0ICAgICAgICAgICAgdGhpcy5fZXZlbnRzLm1heExpc3RlbmVycyA+IDAgJiZcclxuXHQgICAgICAgICAgICB0cmVlLl9saXN0ZW5lcnMubGVuZ3RoID4gdGhpcy5fZXZlbnRzLm1heExpc3RlbmVyc1xyXG5cdCAgICAgICAgICApIHtcclxuXHQgICAgICAgICAgICB0cmVlLl9saXN0ZW5lcnMud2FybmVkID0gdHJ1ZTtcclxuXHQgICAgICAgICAgICBsb2dQb3NzaWJsZU1lbW9yeUxlYWsuY2FsbCh0aGlzLCB0cmVlLl9saXN0ZW5lcnMubGVuZ3RoLCBuYW1lKTtcclxuXHQgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIHRydWU7XHJcblx0ICAgICAgfVxyXG5cdCAgICAgIG5hbWUgPSB0eXBlLnNoaWZ0KCk7XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIHRydWU7XHJcblx0ICB9XHJcblx0XHJcblx0ICAvLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuXHJcblx0ICAvLyAxMCBsaXN0ZW5lcnMgYXJlIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2hcclxuXHQgIC8vIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxyXG5cdCAgLy9cclxuXHQgIC8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xyXG5cdCAgLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmRlbGltaXRlciA9ICcuJztcclxuXHRcclxuXHQgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xyXG5cdCAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XHJcblx0ICAgICAgdGhpcy5fZXZlbnRzIHx8IGluaXQuY2FsbCh0aGlzKTtcclxuXHQgICAgICB0aGlzLl9ldmVudHMubWF4TGlzdGVuZXJzID0gbjtcclxuXHQgICAgICBpZiAoIXRoaXMuX2NvbmYpIHRoaXMuX2NvbmYgPSB7fTtcclxuXHQgICAgICB0aGlzLl9jb25mLm1heExpc3RlbmVycyA9IG47XHJcblx0ICAgIH1cclxuXHQgIH07XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50ID0gJyc7XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbihldmVudCwgZm4pIHtcclxuXHQgICAgdGhpcy5tYW55KGV2ZW50LCAxLCBmbik7XHJcblx0ICAgIHJldHVybiB0aGlzO1xyXG5cdCAgfTtcclxuXHRcclxuXHQgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubWFueSA9IGZ1bmN0aW9uKGV2ZW50LCB0dGwsIGZuKSB7XHJcblx0ICAgIHZhciBzZWxmID0gdGhpcztcclxuXHRcclxuXHQgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignbWFueSBvbmx5IGFjY2VwdHMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgZnVuY3Rpb24gbGlzdGVuZXIoKSB7XHJcblx0ICAgICAgaWYgKC0tdHRsID09PSAwKSB7XHJcblx0ICAgICAgICBzZWxmLm9mZihldmVudCwgbGlzdGVuZXIpO1xyXG5cdCAgICAgIH1cclxuXHQgICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGxpc3RlbmVyLl9vcmlnaW4gPSBmbjtcclxuXHRcclxuXHQgICAgdGhpcy5vbihldmVudCwgbGlzdGVuZXIpO1xyXG5cdFxyXG5cdCAgICByZXR1cm4gc2VsZjtcclxuXHQgIH07XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcclxuXHQgICAgdGhpcy5fZXZlbnRzIHx8IGluaXQuY2FsbCh0aGlzKTtcclxuXHRcclxuXHQgICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF07XHJcblx0XHJcblx0ICAgIGlmICh0eXBlID09PSAnbmV3TGlzdGVuZXInICYmICF0aGlzLm5ld0xpc3RlbmVyKSB7XHJcblx0ICAgICAgaWYgKCF0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpIHtcclxuXHQgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGFsID0gYXJndW1lbnRzLmxlbmd0aDtcclxuXHQgICAgdmFyIGFyZ3MsbCxpLGo7XHJcblx0ICAgIHZhciBoYW5kbGVyO1xyXG5cdFxyXG5cdCAgICBpZiAodGhpcy5fYWxsICYmIHRoaXMuX2FsbC5sZW5ndGgpIHtcclxuXHQgICAgICBoYW5kbGVyID0gdGhpcy5fYWxsLnNsaWNlKCk7XHJcblx0ICAgICAgaWYgKGFsID4gMykge1xyXG5cdCAgICAgICAgYXJncyA9IG5ldyBBcnJheShhbCk7XHJcblx0ICAgICAgICBmb3IgKGogPSAwOyBqIDwgYWw7IGorKykgYXJnc1tqXSA9IGFyZ3VtZW50c1tqXTtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgZm9yIChpID0gMCwgbCA9IGhhbmRsZXIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0ICAgICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcclxuXHQgICAgICAgIHN3aXRjaCAoYWwpIHtcclxuXHQgICAgICAgIGNhc2UgMTpcclxuXHQgICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIHR5cGUpO1xyXG5cdCAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIGNhc2UgMjpcclxuXHQgICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIHR5cGUsIGFyZ3VtZW50c1sxXSk7XHJcblx0ICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgY2FzZSAzOlxyXG5cdCAgICAgICAgICBoYW5kbGVyW2ldLmNhbGwodGhpcywgdHlwZSwgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xyXG5cdCAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIGRlZmF1bHQ6XHJcblx0ICAgICAgICAgIGhhbmRsZXJbaV0uYXBwbHkodGhpcywgYXJncyk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XHJcblx0ICAgICAgaGFuZGxlciA9IFtdO1xyXG5cdCAgICAgIHZhciBucyA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUuc3BsaXQodGhpcy5kZWxpbWl0ZXIpIDogdHlwZS5zbGljZSgpO1xyXG5cdCAgICAgIHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIGhhbmRsZXIsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XHJcblx0ICAgIH0gZWxzZSB7XHJcblx0ICAgICAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcclxuXHQgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICAgIHRoaXMuZXZlbnQgPSB0eXBlO1xyXG5cdCAgICAgICAgc3dpdGNoIChhbCkge1xyXG5cdCAgICAgICAgY2FzZSAxOlxyXG5cdCAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XHJcblx0ICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgY2FzZSAyOlxyXG5cdCAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcclxuXHQgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICBjYXNlIDM6XHJcblx0ICAgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XHJcblx0ICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgZGVmYXVsdDpcclxuXHQgICAgICAgICAgYXJncyA9IG5ldyBBcnJheShhbCAtIDEpO1xyXG5cdCAgICAgICAgICBmb3IgKGogPSAxOyBqIDwgYWw7IGorKykgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XHJcblx0ICAgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHQgICAgICB9IGVsc2UgaWYgKGhhbmRsZXIpIHtcclxuXHQgICAgICAgIC8vIG5lZWQgdG8gbWFrZSBjb3B5IG9mIGhhbmRsZXJzIGJlY2F1c2UgbGlzdCBjYW4gY2hhbmdlIGluIHRoZSBtaWRkbGVcclxuXHQgICAgICAgIC8vIG9mIGVtaXQgY2FsbFxyXG5cdCAgICAgICAgaGFuZGxlciA9IGhhbmRsZXIuc2xpY2UoKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgaWYgKGhhbmRsZXIgJiYgaGFuZGxlci5sZW5ndGgpIHtcclxuXHQgICAgICBpZiAoYWwgPiAzKSB7XHJcblx0ICAgICAgICBhcmdzID0gbmV3IEFycmF5KGFsIC0gMSk7XHJcblx0ICAgICAgICBmb3IgKGogPSAxOyBqIDwgYWw7IGorKykgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XHJcblx0ICAgICAgfVxyXG5cdCAgICAgIGZvciAoaSA9IDAsIGwgPSBoYW5kbGVyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG5cdCAgICAgICAgdGhpcy5ldmVudCA9IHR5cGU7XHJcblx0ICAgICAgICBzd2l0Y2ggKGFsKSB7XHJcblx0ICAgICAgICBjYXNlIDE6XHJcblx0ICAgICAgICAgIGhhbmRsZXJbaV0uY2FsbCh0aGlzKTtcclxuXHQgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICBjYXNlIDI6XHJcblx0ICAgICAgICAgIGhhbmRsZXJbaV0uY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xyXG5cdCAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIGNhc2UgMzpcclxuXHQgICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcclxuXHQgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICBkZWZhdWx0OlxyXG5cdCAgICAgICAgICBoYW5kbGVyW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgIH1cclxuXHQgICAgICByZXR1cm4gdHJ1ZTtcclxuXHQgICAgfSBlbHNlIGlmICghdGhpcy5fYWxsICYmIHR5cGUgPT09ICdlcnJvcicpIHtcclxuXHQgICAgICBpZiAoYXJndW1lbnRzWzFdIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuXHQgICAgICAgIHRocm93IGFyZ3VtZW50c1sxXTsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5jYXVnaHQsIHVuc3BlY2lmaWVkICdlcnJvcicgZXZlbnQuXCIpO1xyXG5cdCAgICAgIH1cclxuXHQgICAgICByZXR1cm4gZmFsc2U7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgcmV0dXJuICEhdGhpcy5fYWxsO1xyXG5cdCAgfTtcclxuXHRcclxuXHQgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdEFzeW5jID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcblx0ICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XHJcblx0XHJcblx0ICAgIHZhciB0eXBlID0gYXJndW1lbnRzWzBdO1xyXG5cdFxyXG5cdCAgICBpZiAodHlwZSA9PT0gJ25ld0xpc3RlbmVyJyAmJiAhdGhpcy5uZXdMaXN0ZW5lcikge1xyXG5cdCAgICAgICAgaWYgKCF0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbZmFsc2VdKTsgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhciBwcm9taXNlcz0gW107XHJcblx0XHJcblx0ICAgIHZhciBhbCA9IGFyZ3VtZW50cy5sZW5ndGg7XHJcblx0ICAgIHZhciBhcmdzLGwsaSxqO1xyXG5cdCAgICB2YXIgaGFuZGxlcjtcclxuXHRcclxuXHQgICAgaWYgKHRoaXMuX2FsbCkge1xyXG5cdCAgICAgIGlmIChhbCA+IDMpIHtcclxuXHQgICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwpO1xyXG5cdCAgICAgICAgZm9yIChqID0gMTsgaiA8IGFsOyBqKyspIGFyZ3Nbal0gPSBhcmd1bWVudHNbal07XHJcblx0ICAgICAgfVxyXG5cdCAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLl9hbGwubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0ICAgICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcclxuXHQgICAgICAgIHN3aXRjaCAoYWwpIHtcclxuXHQgICAgICAgIGNhc2UgMTpcclxuXHQgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9hbGxbaV0uY2FsbCh0aGlzLCB0eXBlKSk7XHJcblx0ICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgY2FzZSAyOlxyXG5cdCAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2FsbFtpXS5jYWxsKHRoaXMsIHR5cGUsIGFyZ3VtZW50c1sxXSkpO1xyXG5cdCAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIGNhc2UgMzpcclxuXHQgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9hbGxbaV0uY2FsbCh0aGlzLCB0eXBlLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSkpO1xyXG5cdCAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIGRlZmF1bHQ6XHJcblx0ICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fYWxsW2ldLmFwcGx5KHRoaXMsIGFyZ3MpKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgaWYgKHRoaXMud2lsZGNhcmQpIHtcclxuXHQgICAgICBoYW5kbGVyID0gW107XHJcblx0ICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XHJcblx0ICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcywgaGFuZGxlciwgbnMsIHRoaXMubGlzdGVuZXJUcmVlLCAwKTtcclxuXHQgICAgfSBlbHNlIHtcclxuXHQgICAgICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgIHRoaXMuZXZlbnQgPSB0eXBlO1xyXG5cdCAgICAgIHN3aXRjaCAoYWwpIHtcclxuXHQgICAgICBjYXNlIDE6XHJcblx0ICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXIuY2FsbCh0aGlzKSk7XHJcblx0ICAgICAgICBicmVhaztcclxuXHQgICAgICBjYXNlIDI6XHJcblx0ICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pKTtcclxuXHQgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgIGNhc2UgMzpcclxuXHQgICAgICAgIHByb21pc2VzLnB1c2goaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKSk7XHJcblx0ICAgICAgICBicmVhaztcclxuXHQgICAgICBkZWZhdWx0OlxyXG5cdCAgICAgICAgYXJncyA9IG5ldyBBcnJheShhbCAtIDEpO1xyXG5cdCAgICAgICAgZm9yIChqID0gMTsgaiA8IGFsOyBqKyspIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xyXG5cdCAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiBoYW5kbGVyLmxlbmd0aCkge1xyXG5cdCAgICAgIGlmIChhbCA+IDMpIHtcclxuXHQgICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwgLSAxKTtcclxuXHQgICAgICAgIGZvciAoaiA9IDE7IGogPCBhbDsgaisrKSBhcmdzW2ogLSAxXSA9IGFyZ3VtZW50c1tqXTtcclxuXHQgICAgICB9XHJcblx0ICAgICAgZm9yIChpID0gMCwgbCA9IGhhbmRsZXIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0ICAgICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcclxuXHQgICAgICAgIHN3aXRjaCAoYWwpIHtcclxuXHQgICAgICAgIGNhc2UgMTpcclxuXHQgICAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyW2ldLmNhbGwodGhpcykpO1xyXG5cdCAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIGNhc2UgMjpcclxuXHQgICAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyW2ldLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKSk7XHJcblx0ICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgY2FzZSAzOlxyXG5cdCAgICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXJbaV0uY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSkpO1xyXG5cdCAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIGRlZmF1bHQ6XHJcblx0ICAgICAgICAgIHByb21pc2VzLnB1c2goaGFuZGxlcltpXS5hcHBseSh0aGlzLCBhcmdzKSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgfVxyXG5cdCAgICB9IGVsc2UgaWYgKCF0aGlzLl9hbGwgJiYgdHlwZSA9PT0gJ2Vycm9yJykge1xyXG5cdCAgICAgIGlmIChhcmd1bWVudHNbMV0gaW5zdGFuY2VvZiBFcnJvcikge1xyXG5cdCAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGFyZ3VtZW50c1sxXSk7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XHJcblx0ICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlVuY2F1Z2h0LCB1bnNwZWNpZmllZCAnZXJyb3InIGV2ZW50LlwiKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcclxuXHQgIH07XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcclxuXHQgICAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0ICAgICAgdGhpcy5vbkFueSh0eXBlKTtcclxuXHQgICAgICByZXR1cm4gdGhpcztcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XHJcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbiBvbmx5IGFjY2VwdHMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XHJcblx0ICAgIH1cclxuXHQgICAgdGhpcy5fZXZlbnRzIHx8IGluaXQuY2FsbCh0aGlzKTtcclxuXHRcclxuXHQgICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PSBcIm5ld0xpc3RlbmVyc1wiISBCZWZvcmVcclxuXHQgICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lcnNcIi5cclxuXHQgICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcclxuXHRcclxuXHQgICAgaWYgKHRoaXMud2lsZGNhcmQpIHtcclxuXHQgICAgICBncm93TGlzdGVuZXJUcmVlLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIpO1xyXG5cdCAgICAgIHJldHVybiB0aGlzO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB7XHJcblx0ICAgICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXHJcblx0ICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XHJcblx0ICAgIH1cclxuXHQgICAgZWxzZSB7XHJcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLl9ldmVudHNbdHlwZV0gPT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICAgIC8vIENoYW5nZSB0byBhcnJheS5cclxuXHQgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXHJcblx0ICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xyXG5cdFxyXG5cdCAgICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXHJcblx0ICAgICAgaWYgKFxyXG5cdCAgICAgICAgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgJiZcclxuXHQgICAgICAgIHRoaXMuX2V2ZW50cy5tYXhMaXN0ZW5lcnMgPiAwICYmXHJcblx0ICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gdGhpcy5fZXZlbnRzLm1heExpc3RlbmVyc1xyXG5cdCAgICAgICkge1xyXG5cdCAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XHJcblx0ICAgICAgICBsb2dQb3NzaWJsZU1lbW9yeUxlYWsuY2FsbCh0aGlzLCB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoLCB0eXBlKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgcmV0dXJuIHRoaXM7XHJcblx0ICB9O1xyXG5cdFxyXG5cdCAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbkFueSA9IGZ1bmN0aW9uKGZuKSB7XHJcblx0ICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29uQW55IG9ubHkgYWNjZXB0cyBpbnN0YW5jZXMgb2YgRnVuY3Rpb24nKTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICBpZiAoIXRoaXMuX2FsbCkge1xyXG5cdCAgICAgIHRoaXMuX2FsbCA9IFtdO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIC8vIEFkZCB0aGUgZnVuY3Rpb24gdG8gdGhlIGV2ZW50IGxpc3RlbmVyIGNvbGxlY3Rpb24uXHJcblx0ICAgIHRoaXMuX2FsbC5wdXNoKGZuKTtcclxuXHQgICAgcmV0dXJuIHRoaXM7XHJcblx0ICB9O1xyXG5cdFxyXG5cdCAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUub247XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XHJcblx0ICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbW92ZUxpc3RlbmVyIG9ubHkgdGFrZXMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGhhbmRsZXJzLGxlYWZzPVtdO1xyXG5cdFxyXG5cdCAgICBpZih0aGlzLndpbGRjYXJkKSB7XHJcblx0ICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XHJcblx0ICAgICAgbGVhZnMgPSBzZWFyY2hMaXN0ZW5lclRyZWUuY2FsbCh0aGlzLCBudWxsLCBucywgdGhpcy5saXN0ZW5lclRyZWUsIDApO1xyXG5cdCAgICB9XHJcblx0ICAgIGVsc2Uge1xyXG5cdCAgICAgIC8vIGRvZXMgbm90IHVzZSBsaXN0ZW5lcnMoKSwgc28gbm8gc2lkZSBlZmZlY3Qgb2YgY3JlYXRpbmcgX2V2ZW50c1t0eXBlXVxyXG5cdCAgICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSByZXR1cm4gdGhpcztcclxuXHQgICAgICBoYW5kbGVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcclxuXHQgICAgICBsZWFmcy5wdXNoKHtfbGlzdGVuZXJzOmhhbmRsZXJzfSk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgZm9yICh2YXIgaUxlYWY9MDsgaUxlYWY8bGVhZnMubGVuZ3RoOyBpTGVhZisrKSB7XHJcblx0ICAgICAgdmFyIGxlYWYgPSBsZWFmc1tpTGVhZl07XHJcblx0ICAgICAgaGFuZGxlcnMgPSBsZWFmLl9saXN0ZW5lcnM7XHJcblx0ICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XHJcblx0XHJcblx0ICAgICAgICB2YXIgcG9zaXRpb24gPSAtMTtcclxuXHRcclxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG5cdCAgICAgICAgICBpZiAoaGFuZGxlcnNbaV0gPT09IGxpc3RlbmVyIHx8XHJcblx0ICAgICAgICAgICAgKGhhbmRsZXJzW2ldLmxpc3RlbmVyICYmIGhhbmRsZXJzW2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikgfHxcclxuXHQgICAgICAgICAgICAoaGFuZGxlcnNbaV0uX29yaWdpbiAmJiBoYW5kbGVyc1tpXS5fb3JpZ2luID09PSBsaXN0ZW5lcikpIHtcclxuXHQgICAgICAgICAgICBwb3NpdGlvbiA9IGk7XHJcblx0ICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHRcclxuXHQgICAgICAgIGlmIChwb3NpdGlvbiA8IDApIHtcclxuXHQgICAgICAgICAgY29udGludWU7XHJcblx0ICAgICAgICB9XHJcblx0XHJcblx0ICAgICAgICBpZih0aGlzLndpbGRjYXJkKSB7XHJcblx0ICAgICAgICAgIGxlYWYuX2xpc3RlbmVycy5zcGxpY2UocG9zaXRpb24sIDEpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5zcGxpY2UocG9zaXRpb24sIDEpO1xyXG5cdCAgICAgICAgfVxyXG5cdFxyXG5cdCAgICAgICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMCkge1xyXG5cdCAgICAgICAgICBpZih0aGlzLndpbGRjYXJkKSB7XHJcblx0ICAgICAgICAgICAgZGVsZXRlIGxlYWYuX2xpc3RlbmVycztcclxuXHQgICAgICAgICAgfVxyXG5cdCAgICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xyXG5cdCAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0XHJcblx0ICAgICAgICB0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLCB0eXBlLCBsaXN0ZW5lcik7XHJcblx0XHJcblx0ICAgICAgICByZXR1cm4gdGhpcztcclxuXHQgICAgICB9XHJcblx0ICAgICAgZWxzZSBpZiAoaGFuZGxlcnMgPT09IGxpc3RlbmVyIHx8XHJcblx0ICAgICAgICAoaGFuZGxlcnMubGlzdGVuZXIgJiYgaGFuZGxlcnMubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB8fFxyXG5cdCAgICAgICAgKGhhbmRsZXJzLl9vcmlnaW4gJiYgaGFuZGxlcnMuX29yaWdpbiA9PT0gbGlzdGVuZXIpKSB7XHJcblx0ICAgICAgICBpZih0aGlzLndpbGRjYXJkKSB7XHJcblx0ICAgICAgICAgIGRlbGV0ZSBsZWFmLl9saXN0ZW5lcnM7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcclxuXHQgICAgICAgIH1cclxuXHRcclxuXHQgICAgICAgIHRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsIHR5cGUsIGxpc3RlbmVyKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlHYXJiYWdlQ29sbGVjdChyb290KSB7XHJcblx0ICAgICAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCkge1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHQgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHJvb3QpO1xyXG5cdCAgICAgIGZvciAodmFyIGkgaW4ga2V5cykge1xyXG5cdCAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XHJcblx0ICAgICAgICB2YXIgb2JqID0gcm9vdFtrZXldO1xyXG5cdCAgICAgICAgaWYgKChvYmogaW5zdGFuY2VvZiBGdW5jdGlvbikgfHwgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHx8IChvYmogPT09IG51bGwpKVxyXG5cdCAgICAgICAgICBjb250aW51ZTtcclxuXHQgICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDApIHtcclxuXHQgICAgICAgICAgcmVjdXJzaXZlbHlHYXJiYWdlQ29sbGVjdChyb290W2tleV0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwKSB7XHJcblx0ICAgICAgICAgIGRlbGV0ZSByb290W2tleV07XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0ICAgIHJlY3Vyc2l2ZWx5R2FyYmFnZUNvbGxlY3QodGhpcy5saXN0ZW5lclRyZWUpO1xyXG5cdFxyXG5cdCAgICByZXR1cm4gdGhpcztcclxuXHQgIH07XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZkFueSA9IGZ1bmN0aW9uKGZuKSB7XHJcblx0ICAgIHZhciBpID0gMCwgbCA9IDAsIGZucztcclxuXHQgICAgaWYgKGZuICYmIHRoaXMuX2FsbCAmJiB0aGlzLl9hbGwubGVuZ3RoID4gMCkge1xyXG5cdCAgICAgIGZucyA9IHRoaXMuX2FsbDtcclxuXHQgICAgICBmb3IoaSA9IDAsIGwgPSBmbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0ICAgICAgICBpZihmbiA9PT0gZm5zW2ldKSB7XHJcblx0ICAgICAgICAgIGZucy5zcGxpY2UoaSwgMSk7XHJcblx0ICAgICAgICAgIHRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyQW55XCIsIGZuKTtcclxuXHQgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgfVxyXG5cdCAgICB9IGVsc2Uge1xyXG5cdCAgICAgIGZucyA9IHRoaXMuX2FsbDtcclxuXHQgICAgICBmb3IoaSA9IDAsIGwgPSBmbnMubGVuZ3RoOyBpIDwgbDsgaSsrKVxyXG5cdCAgICAgICAgdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJBbnlcIiwgZm5zW2ldKTtcclxuXHQgICAgICB0aGlzLl9hbGwgPSBbXTtcclxuXHQgICAgfVxyXG5cdCAgICByZXR1cm4gdGhpcztcclxuXHQgIH07XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmY7XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcclxuXHQgICAgICAhdGhpcy5fZXZlbnRzIHx8IGluaXQuY2FsbCh0aGlzKTtcclxuXHQgICAgICByZXR1cm4gdGhpcztcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICBpZiAodGhpcy53aWxkY2FyZCkge1xyXG5cdCAgICAgIHZhciBucyA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUuc3BsaXQodGhpcy5kZWxpbWl0ZXIpIDogdHlwZS5zbGljZSgpO1xyXG5cdCAgICAgIHZhciBsZWFmcyA9IHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIG51bGwsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XHJcblx0XHJcblx0ICAgICAgZm9yICh2YXIgaUxlYWY9MDsgaUxlYWY8bGVhZnMubGVuZ3RoOyBpTGVhZisrKSB7XHJcblx0ICAgICAgICB2YXIgbGVhZiA9IGxlYWZzW2lMZWFmXTtcclxuXHQgICAgICAgIGxlYWYuX2xpc3RlbmVycyA9IG51bGw7XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0ICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50cykge1xyXG5cdCAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IG51bGw7XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIHRoaXM7XHJcblx0ICB9O1xyXG5cdFxyXG5cdCAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XHJcblx0ICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XHJcblx0ICAgICAgdmFyIGhhbmRsZXJzID0gW107XHJcblx0ICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XHJcblx0ICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcywgaGFuZGxlcnMsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XHJcblx0ICAgICAgcmV0dXJuIGhhbmRsZXJzO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XHJcblx0XHJcblx0ICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB0aGlzLl9ldmVudHNbdHlwZV0gPSBbXTtcclxuXHQgICAgaWYgKCFpc0FycmF5KHRoaXMuX2V2ZW50c1t0eXBlXSkpIHtcclxuXHQgICAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcclxuXHQgICAgfVxyXG5cdCAgICByZXR1cm4gdGhpcy5fZXZlbnRzW3R5cGVdO1xyXG5cdCAgfTtcclxuXHRcclxuXHQgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuXHQgICAgcmV0dXJuIHRoaXMubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDtcclxuXHQgIH07XHJcblx0XHJcblx0ICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyc0FueSA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdCAgICBpZih0aGlzLl9hbGwpIHtcclxuXHQgICAgICByZXR1cm4gdGhpcy5fYWxsO1xyXG5cdCAgICB9XHJcblx0ICAgIGVsc2Uge1xyXG5cdCAgICAgIHJldHVybiBbXTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgfTtcclxuXHRcclxuXHQgIGlmICh0cnVlKSB7XHJcblx0ICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHtcclxuXHQgICAgICByZXR1cm4gRXZlbnRFbWl0dGVyO1xyXG5cdCAgICB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xyXG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuXHQgICAgLy8gQ29tbW9uSlNcclxuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XHJcblx0ICB9XHJcblx0ICBlbHNlIHtcclxuXHQgICAgLy8gQnJvd3NlciBnbG9iYWwuXHJcblx0ICAgIHdpbmRvdy5FdmVudEVtaXR0ZXIyID0gRXZlbnRFbWl0dGVyO1xyXG5cdCAgfVxyXG5cdH0oKTtcclxuXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogRmlsZVNhdmVyLmpzXG5cdCAqIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxuXHQgKiAxLjEuMjAxNTA3MTZcblx0ICpcblx0ICogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuXHQgKiBMaWNlbnNlOiBYMTEvTUlUXG5cdCAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG5cdCAqL1xuXHRcblx0LypnbG9iYWwgc2VsZiAqL1xuXHQvKmpzbGludCBiaXR3aXNlOiB0cnVlLCBpbmRlbnQ6IDQsIGxheGJyZWFrOiB0cnVlLCBsYXhjb21tYTogdHJ1ZSwgc21hcnR0YWJzOiB0cnVlLCBwbHVzcGx1czogdHJ1ZSAqL1xuXHRcblx0LyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9GaWxlU2F2ZXIuanMgKi9cblx0XG5cdHZhciBzYXZlQXMgPSBzYXZlQXMgfHwgKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcInVzZSBzdHJpY3RcIjtcblx0XHQvLyBJRSA8MTAgaXMgZXhwbGljaXRseSB1bnN1cHBvcnRlZFxuXHRcdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIC9NU0lFIFsxLTldXFwuLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhclxuXHRcdFx0ICBkb2MgPSB2aWV3LmRvY3VtZW50XG5cdFx0XHQgIC8vIG9ubHkgZ2V0IFVSTCB3aGVuIG5lY2Vzc2FyeSBpbiBjYXNlIEJsb2IuanMgaGFzbid0IG92ZXJyaWRkZW4gaXQgeWV0XG5cdFx0XHQsIGdldF9VUkwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XG5cdFx0XHR9XG5cdFx0XHQsIHNhdmVfbGluayA9IGRvYy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsIFwiYVwiKVxuXHRcdFx0LCBjYW5fdXNlX3NhdmVfbGluayA9IFwiZG93bmxvYWRcIiBpbiBzYXZlX2xpbmtcblx0XHRcdCwgY2xpY2sgPSBmdW5jdGlvbihub2RlKSB7XG5cdFx0XHRcdHZhciBldmVudCA9IG5ldyBNb3VzZUV2ZW50KFwiY2xpY2tcIik7XG5cdFx0XHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdFx0XHR9XG5cdFx0XHQsIHdlYmtpdF9yZXFfZnMgPSB2aWV3LndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtXG5cdFx0XHQsIHJlcV9mcyA9IHZpZXcucmVxdWVzdEZpbGVTeXN0ZW0gfHwgd2Via2l0X3JlcV9mcyB8fCB2aWV3Lm1velJlcXVlc3RGaWxlU3lzdGVtXG5cdFx0XHQsIHRocm93X291dHNpZGUgPSBmdW5jdGlvbihleCkge1xuXHRcdFx0XHQodmlldy5zZXRJbW1lZGlhdGUgfHwgdmlldy5zZXRUaW1lb3V0KShmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR0aHJvdyBleDtcblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9XG5cdFx0XHQsIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiXG5cdFx0XHQsIGZzX21pbl9zaXplID0gMFxuXHRcdFx0Ly8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzUyOTcjYzcgYW5kXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9GaWxlU2F2ZXIuanMvY29tbWl0LzQ4NTkzMGEjY29tbWl0Y29tbWVudC04NzY4MDQ3XG5cdFx0XHQvLyBmb3IgdGhlIHJlYXNvbmluZyBiZWhpbmQgdGhlIHRpbWVvdXQgYW5kIHJldm9jYXRpb24gZmxvd1xuXHRcdFx0LCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQgPSA1MDAgLy8gaW4gbXNcblx0XHRcdCwgcmV2b2tlID0gZnVuY3Rpb24oZmlsZSkge1xuXHRcdFx0XHR2YXIgcmV2b2tlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIikgeyAvLyBmaWxlIGlzIGFuIG9iamVjdCBVUkxcblx0XHRcdFx0XHRcdGdldF9VUkwoKS5yZXZva2VPYmplY3RVUkwoZmlsZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHsgLy8gZmlsZSBpcyBhIEZpbGVcblx0XHRcdFx0XHRcdGZpbGUucmVtb3ZlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAodmlldy5jaHJvbWUpIHtcblx0XHRcdFx0XHRyZXZva2VyKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXZva2VyLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQsIGRpc3BhdGNoID0gZnVuY3Rpb24oZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHtcblx0XHRcdFx0ZXZlbnRfdHlwZXMgPSBbXS5jb25jYXQoZXZlbnRfdHlwZXMpO1xuXHRcdFx0XHR2YXIgaSA9IGV2ZW50X3R5cGVzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHRcdHZhciBsaXN0ZW5lciA9IGZpbGVzYXZlcltcIm9uXCIgKyBldmVudF90eXBlc1tpXV07XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRsaXN0ZW5lci5jYWxsKGZpbGVzYXZlciwgZXZlbnQgfHwgZmlsZXNhdmVyKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGV4KSB7XG5cdFx0XHRcdFx0XHRcdHRocm93X291dHNpZGUoZXgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0LCBhdXRvX2JvbSA9IGZ1bmN0aW9uKGJsb2IpIHtcblx0XHRcdFx0Ly8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcblx0XHRcdFx0aWYgKC9eXFxzKig/OnRleHRcXC9cXFMqfGFwcGxpY2F0aW9uXFwveG1sfFxcUypcXC9cXFMqXFwreG1sKVxccyo7LipjaGFyc2V0XFxzKj1cXHMqdXRmLTgvaS50ZXN0KGJsb2IudHlwZSkpIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IEJsb2IoW1wiXFx1ZmVmZlwiLCBibG9iXSwge3R5cGU6IGJsb2IudHlwZX0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBibG9iO1xuXHRcdFx0fVxuXHRcdFx0LCBGaWxlU2F2ZXIgPSBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdFx0YmxvYiA9IGF1dG9fYm9tKGJsb2IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIEZpcnN0IHRyeSBhLmRvd25sb2FkLCB0aGVuIHdlYiBmaWxlc3lzdGVtLCB0aGVuIG9iamVjdCBVUkxzXG5cdFx0XHRcdHZhclxuXHRcdFx0XHRcdCAgZmlsZXNhdmVyID0gdGhpc1xuXHRcdFx0XHRcdCwgdHlwZSA9IGJsb2IudHlwZVxuXHRcdFx0XHRcdCwgYmxvYl9jaGFuZ2VkID0gZmFsc2Vcblx0XHRcdFx0XHQsIG9iamVjdF91cmxcblx0XHRcdFx0XHQsIHRhcmdldF92aWV3XG5cdFx0XHRcdFx0LCBkaXNwYXRjaF9hbGwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGRpc3BhdGNoKGZpbGVzYXZlciwgXCJ3cml0ZXN0YXJ0IHByb2dyZXNzIHdyaXRlIHdyaXRlZW5kXCIuc3BsaXQoXCIgXCIpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gb24gYW55IGZpbGVzeXMgZXJyb3JzIHJldmVydCB0byBzYXZpbmcgd2l0aCBvYmplY3QgVVJMc1xuXHRcdFx0XHRcdCwgZnNfZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdC8vIGRvbid0IGNyZWF0ZSBtb3JlIG9iamVjdCBVUkxzIHRoYW4gbmVlZGVkXG5cdFx0XHRcdFx0XHRpZiAoYmxvYl9jaGFuZ2VkIHx8ICFvYmplY3RfdXJsKSB7XG5cdFx0XHRcdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKHRhcmdldF92aWV3KSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dmFyIG5ld190YWIgPSB2aWV3Lm9wZW4ob2JqZWN0X3VybCwgXCJfYmxhbmtcIik7XG5cdFx0XHRcdFx0XHRcdGlmIChuZXdfdGFiID09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc2FmYXJpICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly9BcHBsZSBkbyBub3QgYWxsb3cgd2luZG93Lm9wZW4sIHNlZSBodHRwOi8vYml0Lmx5LzFrWmZmUklcblx0XHRcdFx0XHRcdFx0XHR2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcblx0XHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0LCBhYm9ydGFibGUgPSBmdW5jdGlvbihmdW5jKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChmaWxlc2F2ZXIucmVhZHlTdGF0ZSAhPT0gZmlsZXNhdmVyLkRPTkUpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQsIGNyZWF0ZV9pZl9ub3RfZm91bmQgPSB7Y3JlYXRlOiB0cnVlLCBleGNsdXNpdmU6IGZhbHNlfVxuXHRcdFx0XHRcdCwgc2xpY2Vcblx0XHRcdFx0O1xuXHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXHRcdFx0XHRpZiAoIW5hbWUpIHtcblx0XHRcdFx0XHRuYW1lID0gXCJkb3dubG9hZFwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjYW5fdXNlX3NhdmVfbGluaykge1xuXHRcdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRcdHNhdmVfbGluay5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHRzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRjbGljayhzYXZlX2xpbmspO1xuXHRcdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0XHRyZXZva2Uob2JqZWN0X3VybCk7XG5cdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBPYmplY3QgYW5kIHdlYiBmaWxlc3lzdGVtIFVSTHMgaGF2ZSBhIHByb2JsZW0gc2F2aW5nIGluIEdvb2dsZSBDaHJvbWUgd2hlblxuXHRcdFx0XHQvLyB2aWV3ZWQgaW4gYSB0YWIsIHNvIEkgZm9yY2Ugc2F2ZSB3aXRoIGFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVxuXHRcdFx0XHQvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD05MTE1OFxuXHRcdFx0XHQvLyBVcGRhdGU6IEdvb2dsZSBlcnJhbnRseSBjbG9zZWQgOTExNTgsIEkgc3VibWl0dGVkIGl0IGFnYWluOlxuXHRcdFx0XHQvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzg5NjQyXG5cdFx0XHRcdGlmICh2aWV3LmNocm9tZSAmJiB0eXBlICYmIHR5cGUgIT09IGZvcmNlX3NhdmVhYmxlX3R5cGUpIHtcblx0XHRcdFx0XHRzbGljZSA9IGJsb2Iuc2xpY2UgfHwgYmxvYi53ZWJraXRTbGljZTtcblx0XHRcdFx0XHRibG9iID0gc2xpY2UuY2FsbChibG9iLCAwLCBibG9iLnNpemUsIGZvcmNlX3NhdmVhYmxlX3R5cGUpO1xuXHRcdFx0XHRcdGJsb2JfY2hhbmdlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gU2luY2UgSSBjYW4ndCBiZSBzdXJlIHRoYXQgdGhlIGd1ZXNzZWQgbWVkaWEgdHlwZSB3aWxsIHRyaWdnZXIgYSBkb3dubG9hZFxuXHRcdFx0XHQvLyBpbiBXZWJLaXQsIEkgYXBwZW5kIC5kb3dubG9hZCB0byB0aGUgZmlsZW5hbWUuXG5cdFx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD02NTQ0MFxuXHRcdFx0XHRpZiAod2Via2l0X3JlcV9mcyAmJiBuYW1lICE9PSBcImRvd25sb2FkXCIpIHtcblx0XHRcdFx0XHRuYW1lICs9IFwiLmRvd25sb2FkXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHR5cGUgPT09IGZvcmNlX3NhdmVhYmxlX3R5cGUgfHwgd2Via2l0X3JlcV9mcykge1xuXHRcdFx0XHRcdHRhcmdldF92aWV3ID0gdmlldztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIXJlcV9mcykge1xuXHRcdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZzX21pbl9zaXplICs9IGJsb2Iuc2l6ZTtcblx0XHRcdFx0cmVxX2ZzKHZpZXcuVEVNUE9SQVJZLCBmc19taW5fc2l6ZSwgYWJvcnRhYmxlKGZ1bmN0aW9uKGZzKSB7XG5cdFx0XHRcdFx0ZnMucm9vdC5nZXREaXJlY3RvcnkoXCJzYXZlZFwiLCBjcmVhdGVfaWZfbm90X2ZvdW5kLCBhYm9ydGFibGUoZnVuY3Rpb24oZGlyKSB7XG5cdFx0XHRcdFx0XHR2YXIgc2F2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRkaXIuZ2V0RmlsZShuYW1lLCBjcmVhdGVfaWZfbm90X2ZvdW5kLCBhYm9ydGFibGUoZnVuY3Rpb24oZmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdGZpbGUuY3JlYXRlV3JpdGVyKGFib3J0YWJsZShmdW5jdGlvbih3cml0ZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHdyaXRlci5vbndyaXRlZW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9IGZpbGUudG9VUkwoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGlzcGF0Y2goZmlsZXNhdmVyLCBcIndyaXRlZW5kXCIsIGV2ZW50KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV2b2tlKGZpbGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdHdyaXRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IHdyaXRlci5lcnJvcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVycm9yLmNvZGUgIT09IGVycm9yLkFCT1JUX0VSUikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgYWJvcnRcIi5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR3cml0ZXJbXCJvblwiICsgZXZlbnRdID0gZmlsZXNhdmVyW1wib25cIiArIGV2ZW50XTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0d3JpdGVyLndyaXRlKGJsb2IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLmFib3J0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHdyaXRlci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLldSSVRJTkc7XG5cdFx0XHRcdFx0XHRcdFx0fSksIGZzX2Vycm9yKTtcblx0XHRcdFx0XHRcdFx0fSksIGZzX2Vycm9yKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRkaXIuZ2V0RmlsZShuYW1lLCB7Y3JlYXRlOiBmYWxzZX0sIGFib3J0YWJsZShmdW5jdGlvbihmaWxlKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGRlbGV0ZSBmaWxlIGlmIGl0IGFscmVhZHkgZXhpc3RzXG5cdFx0XHRcdFx0XHRcdGZpbGUucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdHNhdmUoKTtcblx0XHRcdFx0XHRcdH0pLCBhYm9ydGFibGUoZnVuY3Rpb24oZXgpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGV4LmNvZGUgPT09IGV4Lk5PVF9GT1VORF9FUlIpIHtcblx0XHRcdFx0XHRcdFx0XHRzYXZlKCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZnNfZXJyb3IoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdH0pLCBmc19lcnJvcik7XG5cdFx0XHRcdH0pLCBmc19lcnJvcik7XG5cdFx0XHR9XG5cdFx0XHQsIEZTX3Byb3RvID0gRmlsZVNhdmVyLnByb3RvdHlwZVxuXHRcdFx0LCBzYXZlQXMgPSBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0XHRyZXR1cm4gbmV3IEZpbGVTYXZlcihibG9iLCBuYW1lLCBub19hdXRvX2JvbSk7XG5cdFx0XHR9XG5cdFx0O1xuXHRcdC8vIElFIDEwKyAobmF0aXZlIHNhdmVBcylcblx0XHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYikge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0XHRibG9iID0gYXV0b19ib20oYmxvYik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUgfHwgXCJkb3dubG9hZFwiKTtcblx0XHRcdH07XG5cdFx0fVxuXHRcblx0XHRGU19wcm90by5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGZpbGVzYXZlciA9IHRoaXM7XG5cdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0ZGlzcGF0Y2goZmlsZXNhdmVyLCBcImFib3J0XCIpO1xuXHRcdH07XG5cdFx0RlNfcHJvdG8ucmVhZHlTdGF0ZSA9IEZTX3Byb3RvLklOSVQgPSAwO1xuXHRcdEZTX3Byb3RvLldSSVRJTkcgPSAxO1xuXHRcdEZTX3Byb3RvLkRPTkUgPSAyO1xuXHRcblx0XHRGU19wcm90by5lcnJvciA9XG5cdFx0RlNfcHJvdG8ub253cml0ZXN0YXJ0ID1cblx0XHRGU19wcm90by5vbnByb2dyZXNzID1cblx0XHRGU19wcm90by5vbndyaXRlID1cblx0XHRGU19wcm90by5vbmFib3J0ID1cblx0XHRGU19wcm90by5vbmVycm9yID1cblx0XHRGU19wcm90by5vbndyaXRlZW5kID1cblx0XHRcdG51bGw7XG5cdFxuXHRcdHJldHVybiBzYXZlQXM7XG5cdH0oXG5cdFx0ICAgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZlxuXHRcdHx8IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93XG5cdFx0fHwgdGhpcy5jb250ZW50XG5cdCkpO1xuXHQvLyBgc2VsZmAgaXMgdW5kZWZpbmVkIGluIEZpcmVmb3ggZm9yIEFuZHJvaWQgY29udGVudCBzY3JpcHQgY29udGV4dFxuXHQvLyB3aGlsZSBgdGhpc2AgaXMgbnNJQ29udGVudEZyYW1lTWVzc2FnZU1hbmFnZXJcblx0Ly8gd2l0aCBhbiBhdHRyaWJ1dGUgYGNvbnRlbnRgIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHdpbmRvd1xuXHRcblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0ICBtb2R1bGUuZXhwb3J0cy5zYXZlQXMgPSBzYXZlQXM7XG5cdH0gZWxzZSBpZiAoKFwiZnVuY3Rpb25cIiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KSAhPT0gbnVsbCkgJiYgKF9fd2VicGFja19yZXF1aXJlX18oMzYpICE9IG51bGwpKSB7XG5cdCAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gc2F2ZUFzO1xuXHQgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0fVxuXG5cbi8qKiovIH0pLFxuLyogMzUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIik7IH07XHJcblxuXG4vKioqLyB9KSxcbi8qIDM2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKF9fd2VicGFja19hbWRfb3B0aW9uc19fKSB7bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIHt9KSlcblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiFcblx0ICogVW5pZHJhZ2dlciB2Mi4zLjBcblx0ICogRHJhZ2dhYmxlIGJhc2UgY2xhc3Ncblx0ICogTUlUIGxpY2Vuc2Vcblx0ICovXG5cdFxuXHQvKmpzaGludCBicm93c2VyOiB0cnVlLCB1bnVzZWQ6IHRydWUsIHVuZGVmOiB0cnVlLCBzdHJpY3Q6IHRydWUgKi9cblx0XG5cdCggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcblx0ICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cblx0ICAvKmpzaGludCBzdHJpY3Q6IGZhbHNlICovIC8qZ2xvYmFscyBkZWZpbmUsIG1vZHVsZSwgcmVxdWlyZSAqL1xuXHRcblx0ICBpZiAoIHRydWUgKSB7XG5cdCAgICAvLyBBTURcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygzOClcblx0ICAgIF0sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oIFVuaXBvaW50ZXIgKSB7XG5cdCAgICAgIHJldHVybiBmYWN0b3J5KCB3aW5kb3csIFVuaXBvaW50ZXIgKTtcblx0ICAgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0ICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuXHQgICAgLy8gQ29tbW9uSlNcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcblx0ICAgICAgd2luZG93LFxuXHQgICAgICByZXF1aXJlKCd1bmlwb2ludGVyJylcblx0ICAgICk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG5cdCAgICB3aW5kb3cuVW5pZHJhZ2dlciA9IGZhY3RvcnkoXG5cdCAgICAgIHdpbmRvdyxcblx0ICAgICAgd2luZG93LlVuaXBvaW50ZXJcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0fSggd2luZG93LCBmdW5jdGlvbiBmYWN0b3J5KCB3aW5kb3csIFVuaXBvaW50ZXIgKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBVbmlkcmFnZ2VyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cdFxuXHRmdW5jdGlvbiBVbmlkcmFnZ2VyKCkge31cblx0XG5cdC8vIGluaGVyaXQgVW5pcG9pbnRlciAmIEV2RW1pdHRlclxuXHR2YXIgcHJvdG8gPSBVbmlkcmFnZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFVuaXBvaW50ZXIucHJvdG90eXBlICk7XG5cdFxuXHQvLyAtLS0tLSBiaW5kIHN0YXJ0IC0tLS0tIC8vXG5cdFxuXHRwcm90by5iaW5kSGFuZGxlcyA9IGZ1bmN0aW9uKCkge1xuXHQgIHRoaXMuX2JpbmRIYW5kbGVzKCB0cnVlICk7XG5cdH07XG5cdFxuXHRwcm90by51bmJpbmRIYW5kbGVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5fYmluZEhhbmRsZXMoIGZhbHNlICk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIG9yIHJlbW92ZSBzdGFydCBldmVudFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQWRkXG5cdCAqL1xuXHRwcm90by5fYmluZEhhbmRsZXMgPSBmdW5jdGlvbiggaXNBZGQgKSB7XG5cdCAgLy8gbXVuZ2UgaXNBZGQsIGRlZmF1bHQgdG8gdHJ1ZVxuXHQgIGlzQWRkID0gaXNBZGQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBpc0FkZDtcblx0ICAvLyBiaW5kIGVhY2ggaGFuZGxlXG5cdCAgdmFyIGJpbmRNZXRob2QgPSBpc0FkZCA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdyZW1vdmVFdmVudExpc3RlbmVyJztcblx0ICB2YXIgdG91Y2hBY3Rpb24gPSBpc0FkZCA/IHRoaXMuX3RvdWNoQWN0aW9uVmFsdWUgOiAnJztcblx0ICBmb3IgKCB2YXIgaT0wOyBpIDwgdGhpcy5oYW5kbGVzLmxlbmd0aDsgaSsrICkge1xuXHQgICAgdmFyIGhhbmRsZSA9IHRoaXMuaGFuZGxlc1tpXTtcblx0ICAgIHRoaXMuX2JpbmRTdGFydEV2ZW50KCBoYW5kbGUsIGlzQWRkICk7XG5cdCAgICBoYW5kbGVbIGJpbmRNZXRob2QgXSggJ2NsaWNrJywgdGhpcyApO1xuXHQgICAgLy8gdG91Y2gtYWN0aW9uOiBub25lIHRvIG92ZXJyaWRlIGJyb3dzZXIgdG91Y2ggZ2VzdHVyZXMuIG1ldGFmaXp6eS9mbGlja2l0eSM1NDBcblx0ICAgIGlmICggd2luZG93LlBvaW50ZXJFdmVudCApIHtcblx0ICAgICAgaGFuZGxlLnN0eWxlLnRvdWNoQWN0aW9uID0gdG91Y2hBY3Rpb247XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gcHJvdG90eXBlIHNvIGl0IGNhbiBiZSBvdmVyd3JpdGVhYmxlIGJ5IEZsaWNraXR5XG5cdHByb3RvLl90b3VjaEFjdGlvblZhbHVlID0gJ25vbmUnO1xuXHRcblx0Ly8gLS0tLS0gc3RhcnQgZXZlbnQgLS0tLS0gLy9cblx0XG5cdC8qKlxuXHQgKiBwb2ludGVyIHN0YXJ0XG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RXZlbnQgb3IgVG91Y2h9IHBvaW50ZXJcblx0ICovXG5cdHByb3RvLnBvaW50ZXJEb3duID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHZhciBpc09rYXkgPSB0aGlzLm9rYXlQb2ludGVyRG93biggZXZlbnQgKTtcblx0ICBpZiAoICFpc09rYXkgKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIC8vIHRyYWNrIHN0YXJ0IGV2ZW50IHBvc2l0aW9uXG5cdCAgdGhpcy5wb2ludGVyRG93blBvaW50ZXIgPSBwb2ludGVyO1xuXHRcblx0ICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgIHRoaXMucG9pbnRlckRvd25CbHVyKCk7XG5cdCAgLy8gYmluZCBtb3ZlIGFuZCBlbmQgZXZlbnRzXG5cdCAgdGhpcy5fYmluZFBvc3RTdGFydEV2ZW50cyggZXZlbnQgKTtcblx0ICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJEb3duJywgWyBldmVudCwgcG9pbnRlciBdICk7XG5cdH07XG5cdFxuXHQvLyBub2RlcyB0aGF0IGhhdmUgdGV4dCBmaWVsZHNcblx0dmFyIGN1cnNvck5vZGVzID0ge1xuXHQgIFRFWFRBUkVBOiB0cnVlLFxuXHQgIElOUFVUOiB0cnVlLFxuXHQgIFNFTEVDVDogdHJ1ZSxcblx0ICBPUFRJT046IHRydWUsXG5cdH07XG5cdFxuXHQvLyBpbnB1dCB0eXBlcyB0aGF0IGRvIG5vdCBoYXZlIHRleHQgZmllbGRzXG5cdHZhciBjbGlja1R5cGVzID0ge1xuXHQgIHJhZGlvOiB0cnVlLFxuXHQgIGNoZWNrYm94OiB0cnVlLFxuXHQgIGJ1dHRvbjogdHJ1ZSxcblx0ICBzdWJtaXQ6IHRydWUsXG5cdCAgaW1hZ2U6IHRydWUsXG5cdCAgZmlsZTogdHJ1ZSxcblx0fTtcblx0XG5cdC8vIGRpc21pc3MgaW5wdXRzIHdpdGggdGV4dCBmaWVsZHMuIGZsaWNraXR5IzQwMywgZmxpY2tpdHkjNDA0XG5cdHByb3RvLm9rYXlQb2ludGVyRG93biA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0ICB2YXIgaXNDdXJzb3JOb2RlID0gY3Vyc29yTm9kZXNbIGV2ZW50LnRhcmdldC5ub2RlTmFtZSBdO1xuXHQgIHZhciBpc0NsaWNrVHlwZSA9IGNsaWNrVHlwZXNbIGV2ZW50LnRhcmdldC50eXBlIF07XG5cdCAgdmFyIGlzT2theSA9ICFpc0N1cnNvck5vZGUgfHwgaXNDbGlja1R5cGU7XG5cdCAgaWYgKCAhaXNPa2F5ICkge1xuXHQgICAgdGhpcy5fcG9pbnRlclJlc2V0KCk7XG5cdCAgfVxuXHQgIHJldHVybiBpc09rYXk7XG5cdH07XG5cdFxuXHQvLyBrbHVkZ2UgdG8gYmx1ciBwcmV2aW91c2x5IGZvY3VzZWQgaW5wdXRcblx0cHJvdG8ucG9pbnRlckRvd25CbHVyID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGZvY3VzZWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHQgIC8vIGRvIG5vdCBibHVyIGJvZHkgZm9yIElFMTAsIG1ldGFmaXp6eS9mbGlja2l0eSMxMTdcblx0ICB2YXIgY2FuQmx1ciA9IGZvY3VzZWQgJiYgZm9jdXNlZC5ibHVyICYmIGZvY3VzZWQgIT0gZG9jdW1lbnQuYm9keTtcblx0ICBpZiAoIGNhbkJsdXIgKSB7XG5cdCAgICBmb2N1c2VkLmJsdXIoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyAtLS0tLSBtb3ZlIGV2ZW50IC0tLS0tIC8vXG5cdFxuXHQvKipcblx0ICogZHJhZyBtb3ZlXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RXZlbnQgb3IgVG91Y2h9IHBvaW50ZXJcblx0ICovXG5cdHByb3RvLnBvaW50ZXJNb3ZlID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHZhciBtb3ZlVmVjdG9yID0gdGhpcy5fZHJhZ1BvaW50ZXJNb3ZlKCBldmVudCwgcG9pbnRlciApO1xuXHQgIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlck1vdmUnLCBbIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yIF0gKTtcblx0ICB0aGlzLl9kcmFnTW92ZSggZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgKTtcblx0fTtcblx0XG5cdC8vIGJhc2UgcG9pbnRlciBtb3ZlIGxvZ2ljXG5cdHByb3RvLl9kcmFnUG9pbnRlck1vdmUgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG5cdCAgdmFyIG1vdmVWZWN0b3IgPSB7XG5cdCAgICB4OiBwb2ludGVyLnBhZ2VYIC0gdGhpcy5wb2ludGVyRG93blBvaW50ZXIucGFnZVgsXG5cdCAgICB5OiBwb2ludGVyLnBhZ2VZIC0gdGhpcy5wb2ludGVyRG93blBvaW50ZXIucGFnZVlcblx0ICB9O1xuXHQgIC8vIHN0YXJ0IGRyYWcgaWYgcG9pbnRlciBoYXMgbW92ZWQgZmFyIGVub3VnaCB0byBzdGFydCBkcmFnXG5cdCAgaWYgKCAhdGhpcy5pc0RyYWdnaW5nICYmIHRoaXMuaGFzRHJhZ1N0YXJ0ZWQoIG1vdmVWZWN0b3IgKSApIHtcblx0ICAgIHRoaXMuX2RyYWdTdGFydCggZXZlbnQsIHBvaW50ZXIgKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1vdmVWZWN0b3I7XG5cdH07XG5cdFxuXHQvLyBjb25kaXRpb24gaWYgcG9pbnRlciBoYXMgbW92ZWQgZmFyIGVub3VnaCB0byBzdGFydCBkcmFnXG5cdHByb3RvLmhhc0RyYWdTdGFydGVkID0gZnVuY3Rpb24oIG1vdmVWZWN0b3IgKSB7XG5cdCAgcmV0dXJuIE1hdGguYWJzKCBtb3ZlVmVjdG9yLnggKSA+IDMgfHwgTWF0aC5hYnMoIG1vdmVWZWN0b3IueSApID4gMztcblx0fTtcblx0XG5cdC8vIC0tLS0tIGVuZCBldmVudCAtLS0tLSAvL1xuXHRcblx0LyoqXG5cdCAqIHBvaW50ZXIgdXBcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnRcblx0ICogQHBhcmFtIHtFdmVudCBvciBUb3VjaH0gcG9pbnRlclxuXHQgKi9cblx0cHJvdG8ucG9pbnRlclVwID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlclVwJywgWyBldmVudCwgcG9pbnRlciBdICk7XG5cdCAgdGhpcy5fZHJhZ1BvaW50ZXJVcCggZXZlbnQsIHBvaW50ZXIgKTtcblx0fTtcblx0XG5cdHByb3RvLl9kcmFnUG9pbnRlclVwID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIGlmICggdGhpcy5pc0RyYWdnaW5nICkge1xuXHQgICAgdGhpcy5fZHJhZ0VuZCggZXZlbnQsIHBvaW50ZXIgKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gcG9pbnRlciBkaWRuJ3QgbW92ZSBlbm91Z2ggZm9yIGRyYWcgdG8gc3RhcnRcblx0ICAgIHRoaXMuX3N0YXRpY0NsaWNrKCBldmVudCwgcG9pbnRlciApO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGRyYWcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblx0XG5cdC8vIGRyYWdTdGFydFxuXHRwcm90by5fZHJhZ1N0YXJ0ID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHRoaXMuaXNEcmFnZ2luZyA9IHRydWU7XG5cdCAgLy8gcHJldmVudCBjbGlja3Ncblx0ICB0aGlzLmlzUHJldmVudGluZ0NsaWNrcyA9IHRydWU7XG5cdCAgdGhpcy5kcmFnU3RhcnQoIGV2ZW50LCBwb2ludGVyICk7XG5cdH07XG5cdFxuXHRwcm90by5kcmFnU3RhcnQgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG5cdCAgdGhpcy5lbWl0RXZlbnQoICdkcmFnU3RhcnQnLCBbIGV2ZW50LCBwb2ludGVyIF0gKTtcblx0fTtcblx0XG5cdC8vIGRyYWdNb3ZlXG5cdHByb3RvLl9kcmFnTW92ZSA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciwgbW92ZVZlY3RvciApIHtcblx0ICAvLyBkbyBub3QgZHJhZyBpZiBub3QgZHJhZ2dpbmcgeWV0XG5cdCAgaWYgKCAhdGhpcy5pc0RyYWdnaW5nICkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgdGhpcy5kcmFnTW92ZSggZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgKTtcblx0fTtcblx0XG5cdHByb3RvLmRyYWdNb3ZlID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yICkge1xuXHQgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgdGhpcy5lbWl0RXZlbnQoICdkcmFnTW92ZScsIFsgZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgXSApO1xuXHR9O1xuXHRcblx0Ly8gZHJhZ0VuZFxuXHRwcm90by5fZHJhZ0VuZCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcblx0ICAvLyBzZXQgZmxhZ3Ncblx0ICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcblx0ICAvLyByZS1lbmFibGUgY2xpY2tpbmcgYXN5bmNcblx0ICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0ICAgIGRlbGV0ZSB0aGlzLmlzUHJldmVudGluZ0NsaWNrcztcblx0ICB9LmJpbmQoIHRoaXMgKSApO1xuXHRcblx0ICB0aGlzLmRyYWdFbmQoIGV2ZW50LCBwb2ludGVyICk7XG5cdH07XG5cdFxuXHRwcm90by5kcmFnRW5kID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHRoaXMuZW1pdEV2ZW50KCAnZHJhZ0VuZCcsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xuXHR9O1xuXHRcblx0Ly8gLS0tLS0gb25jbGljayAtLS0tLSAvL1xuXHRcblx0Ly8gaGFuZGxlIGFsbCBjbGlja3MgYW5kIHByZXZlbnQgY2xpY2tzIHdoZW4gZHJhZ2dpbmdcblx0cHJvdG8ub25jbGljayA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0ICBpZiAoIHRoaXMuaXNQcmV2ZW50aW5nQ2xpY2tzICkge1xuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyAtLS0tLSBzdGF0aWNDbGljayAtLS0tLSAvL1xuXHRcblx0Ly8gdHJpZ2dlcmVkIGFmdGVyIHBvaW50ZXIgZG93biAmIHVwIHdpdGggbm8vdGlueSBtb3ZlbWVudFxuXHRwcm90by5fc3RhdGljQ2xpY2sgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG5cdCAgLy8gaWdub3JlIGVtdWxhdGVkIG1vdXNlIHVwIGNsaWNrc1xuXHQgIGlmICggdGhpcy5pc0lnbm9yaW5nTW91c2VVcCAmJiBldmVudC50eXBlID09ICdtb3VzZXVwJyApIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIHRoaXMuc3RhdGljQ2xpY2soIGV2ZW50LCBwb2ludGVyICk7XG5cdFxuXHQgIC8vIHNldCBmbGFnIGZvciBlbXVsYXRlZCBjbGlja3MgMzAwbXMgYWZ0ZXIgdG91Y2hlbmRcblx0ICBpZiAoIGV2ZW50LnR5cGUgIT0gJ21vdXNldXAnICkge1xuXHQgICAgdGhpcy5pc0lnbm9yaW5nTW91c2VVcCA9IHRydWU7XG5cdCAgICAvLyByZXNldCBmbGFnIGFmdGVyIDMwMG1zXG5cdCAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0ICAgICAgZGVsZXRlIHRoaXMuaXNJZ25vcmluZ01vdXNlVXA7XG5cdCAgICB9LmJpbmQoIHRoaXMgKSwgNDAwICk7XG5cdCAgfVxuXHR9O1xuXHRcblx0cHJvdG8uc3RhdGljQ2xpY2sgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG5cdCAgdGhpcy5lbWl0RXZlbnQoICdzdGF0aWNDbGljaycsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xuXHR9O1xuXHRcblx0Ly8gLS0tLS0gdXRpbHMgLS0tLS0gLy9cblx0XG5cdFVuaWRyYWdnZXIuZ2V0UG9pbnRlclBvaW50ID0gVW5pcG9pbnRlci5nZXRQb2ludGVyUG9pbnQ7XG5cdFxuXHQvLyAtLS0tLSAgLS0tLS0gLy9cblx0XG5cdHJldHVybiBVbmlkcmFnZ2VyO1xuXHRcblx0fSkpO1xuXG5cbi8qKiovIH0pLFxuLyogMzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohXG5cdCAqIFVuaXBvaW50ZXIgdjIuMy4wXG5cdCAqIGJhc2UgY2xhc3MgZm9yIGRvaW5nIG9uZSB0aGluZyB3aXRoIHBvaW50ZXIgZXZlbnRcblx0ICogTUlUIGxpY2Vuc2Vcblx0ICovXG5cdFxuXHQvKmpzaGludCBicm93c2VyOiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlLCBzdHJpY3Q6IHRydWUgKi9cblx0XG5cdCggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcblx0ICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cblx0ICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqLyAvKmdsb2JhbCBkZWZpbmUsIG1vZHVsZSwgcmVxdWlyZSAqL1xuXHQgIGlmICggdHJ1ZSApIHtcblx0ICAgIC8vIEFNRFxuXHQgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW1xuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KVxuXHQgICAgXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbiggRXZFbWl0dGVyICkge1xuXHQgICAgICByZXR1cm4gZmFjdG9yeSggd2luZG93LCBFdkVtaXR0ZXIgKTtcblx0ICAgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0ICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuXHQgICAgLy8gQ29tbW9uSlNcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcblx0ICAgICAgd2luZG93LFxuXHQgICAgICByZXF1aXJlKCdldi1lbWl0dGVyJylcblx0ICAgICk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG5cdCAgICB3aW5kb3cuVW5pcG9pbnRlciA9IGZhY3RvcnkoXG5cdCAgICAgIHdpbmRvdyxcblx0ICAgICAgd2luZG93LkV2RW1pdHRlclxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHR9KCB3aW5kb3csIGZ1bmN0aW9uIGZhY3RvcnkoIHdpbmRvdywgRXZFbWl0dGVyICkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRmdW5jdGlvbiBVbmlwb2ludGVyKCkge31cblx0XG5cdC8vIGluaGVyaXQgRXZFbWl0dGVyXG5cdHZhciBwcm90byA9IFVuaXBvaW50ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZFbWl0dGVyLnByb3RvdHlwZSApO1xuXHRcblx0cHJvdG8uYmluZFN0YXJ0RXZlbnQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0ICB0aGlzLl9iaW5kU3RhcnRFdmVudCggZWxlbSwgdHJ1ZSApO1xuXHR9O1xuXHRcblx0cHJvdG8udW5iaW5kU3RhcnRFdmVudCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQgIHRoaXMuX2JpbmRTdGFydEV2ZW50KCBlbGVtLCBmYWxzZSApO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBvciByZW1vdmUgc3RhcnQgZXZlbnRcblx0ICogQHBhcmFtIHtCb29sZWFufSBpc0FkZCAtIHJlbW92ZSBpZiBmYWxzZXlcblx0ICovXG5cdHByb3RvLl9iaW5kU3RhcnRFdmVudCA9IGZ1bmN0aW9uKCBlbGVtLCBpc0FkZCApIHtcblx0ICAvLyBtdW5nZSBpc0FkZCwgZGVmYXVsdCB0byB0cnVlXG5cdCAgaXNBZGQgPSBpc0FkZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGlzQWRkO1xuXHQgIHZhciBiaW5kTWV0aG9kID0gaXNBZGQgPyAnYWRkRXZlbnRMaXN0ZW5lcicgOiAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG5cdFxuXHQgIC8vIGRlZmF1bHQgdG8gbW91c2UgZXZlbnRzXG5cdCAgdmFyIHN0YXJ0RXZlbnQgPSAnbW91c2Vkb3duJztcblx0ICBpZiAoIHdpbmRvdy5Qb2ludGVyRXZlbnQgKSB7XG5cdCAgICAvLyBQb2ludGVyIEV2ZW50c1xuXHQgICAgc3RhcnRFdmVudCA9ICdwb2ludGVyZG93bic7XG5cdCAgfSBlbHNlIGlmICggJ29udG91Y2hzdGFydCcgaW4gd2luZG93ICkge1xuXHQgICAgLy8gVG91Y2ggRXZlbnRzLiBpT1MgU2FmYXJpXG5cdCAgICBzdGFydEV2ZW50ID0gJ3RvdWNoc3RhcnQnO1xuXHQgIH1cblx0ICBlbGVtWyBiaW5kTWV0aG9kIF0oIHN0YXJ0RXZlbnQsIHRoaXMgKTtcblx0fTtcblx0XG5cdC8vIHRyaWdnZXIgaGFuZGxlciBtZXRob2RzIGZvciBldmVudHNcblx0cHJvdG8uaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgdmFyIG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlO1xuXHQgIGlmICggdGhpc1sgbWV0aG9kIF0gKSB7XG5cdCAgICB0aGlzWyBtZXRob2QgXSggZXZlbnQgKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyByZXR1cm5zIHRoZSB0b3VjaCB0aGF0IHdlJ3JlIGtlZXBpbmcgdHJhY2sgb2Zcblx0cHJvdG8uZ2V0VG91Y2ggPSBmdW5jdGlvbiggdG91Y2hlcyApIHtcblx0ICBmb3IgKCB2YXIgaT0wOyBpIDwgdG91Y2hlcy5sZW5ndGg7IGkrKyApIHtcblx0ICAgIHZhciB0b3VjaCA9IHRvdWNoZXNbaV07XG5cdCAgICBpZiAoIHRvdWNoLmlkZW50aWZpZXIgPT0gdGhpcy5wb2ludGVySWRlbnRpZmllciApIHtcblx0ICAgICAgcmV0dXJuIHRvdWNoO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8vIC0tLS0tIHN0YXJ0IGV2ZW50IC0tLS0tIC8vXG5cdFxuXHRwcm90by5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0ICAvLyBkaXNtaXNzIGNsaWNrcyBmcm9tIHJpZ2h0IG9yIG1pZGRsZSBidXR0b25zXG5cdCAgdmFyIGJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjtcblx0ICBpZiAoIGJ1dHRvbiAmJiAoIGJ1dHRvbiAhPT0gMCAmJiBidXR0b24gIT09IDEgKSApIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdGhpcy5fcG9pbnRlckRvd24oIGV2ZW50LCBldmVudCApO1xuXHR9O1xuXHRcblx0cHJvdG8ub250b3VjaHN0YXJ0ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHQgIHRoaXMuX3BvaW50ZXJEb3duKCBldmVudCwgZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0gKTtcblx0fTtcblx0XG5cdHByb3RvLm9ucG9pbnRlcmRvd24gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgdGhpcy5fcG9pbnRlckRvd24oIGV2ZW50LCBldmVudCApO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHBvaW50ZXIgc3RhcnRcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnRcblx0ICogQHBhcmFtIHtFdmVudCBvciBUb3VjaH0gcG9pbnRlclxuXHQgKi9cblx0cHJvdG8uX3BvaW50ZXJEb3duID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIC8vIGRpc21pc3MgcmlnaHQgY2xpY2sgYW5kIG90aGVyIHBvaW50ZXJzXG5cdCAgLy8gYnV0dG9uID0gMCBpcyBva2F5LCAxLTQgbm90XG5cdCAgaWYgKCBldmVudC5idXR0b24gfHwgdGhpcy5pc1BvaW50ZXJEb3duICkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgdGhpcy5pc1BvaW50ZXJEb3duID0gdHJ1ZTtcblx0ICAvLyBzYXZlIHBvaW50ZXIgaWRlbnRpZmllciB0byBtYXRjaCB1cCB0b3VjaCBldmVudHNcblx0ICB0aGlzLnBvaW50ZXJJZGVudGlmaWVyID0gcG9pbnRlci5wb2ludGVySWQgIT09IHVuZGVmaW5lZCA/XG5cdCAgICAvLyBwb2ludGVySWQgZm9yIHBvaW50ZXIgZXZlbnRzLCB0b3VjaC5pbmRlbnRpZmllciBmb3IgdG91Y2ggZXZlbnRzXG5cdCAgICBwb2ludGVyLnBvaW50ZXJJZCA6IHBvaW50ZXIuaWRlbnRpZmllcjtcblx0XG5cdCAgdGhpcy5wb2ludGVyRG93biggZXZlbnQsIHBvaW50ZXIgKTtcblx0fTtcblx0XG5cdHByb3RvLnBvaW50ZXJEb3duID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHRoaXMuX2JpbmRQb3N0U3RhcnRFdmVudHMoIGV2ZW50ICk7XG5cdCAgdGhpcy5lbWl0RXZlbnQoICdwb2ludGVyRG93bicsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xuXHR9O1xuXHRcblx0Ly8gaGFzaCBvZiBldmVudHMgdG8gYmUgYm91bmQgYWZ0ZXIgc3RhcnQgZXZlbnRcblx0dmFyIHBvc3RTdGFydEV2ZW50cyA9IHtcblx0ICBtb3VzZWRvd246IFsgJ21vdXNlbW92ZScsICdtb3VzZXVwJyBdLFxuXHQgIHRvdWNoc3RhcnQ6IFsgJ3RvdWNobW92ZScsICd0b3VjaGVuZCcsICd0b3VjaGNhbmNlbCcgXSxcblx0ICBwb2ludGVyZG93bjogWyAncG9pbnRlcm1vdmUnLCAncG9pbnRlcnVwJywgJ3BvaW50ZXJjYW5jZWwnIF0sXG5cdH07XG5cdFxuXHRwcm90by5fYmluZFBvc3RTdGFydEV2ZW50cyA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0ICBpZiAoICFldmVudCApIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgLy8gZ2V0IHByb3BlciBldmVudHMgdG8gbWF0Y2ggc3RhcnQgZXZlbnRcblx0ICB2YXIgZXZlbnRzID0gcG9zdFN0YXJ0RXZlbnRzWyBldmVudC50eXBlIF07XG5cdCAgLy8gYmluZCBldmVudHMgdG8gbm9kZVxuXHQgIGV2ZW50cy5mb3JFYWNoKCBmdW5jdGlvbiggZXZlbnROYW1lICkge1xuXHQgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgdGhpcyApO1xuXHQgIH0sIHRoaXMgKTtcblx0ICAvLyBzYXZlIHRoZXNlIGFyZ3VtZW50c1xuXHQgIHRoaXMuX2JvdW5kUG9pbnRlckV2ZW50cyA9IGV2ZW50cztcblx0fTtcblx0XG5cdHByb3RvLl91bmJpbmRQb3N0U3RhcnRFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0ICAvLyBjaGVjayBmb3IgX2JvdW5kRXZlbnRzLCBpbiBjYXNlIGRyYWdFbmQgdHJpZ2dlcmVkIHR3aWNlIChvbGQgSUU4IGJ1Zylcblx0ICBpZiAoICF0aGlzLl9ib3VuZFBvaW50ZXJFdmVudHMgKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHRoaXMuX2JvdW5kUG9pbnRlckV2ZW50cy5mb3JFYWNoKCBmdW5jdGlvbiggZXZlbnROYW1lICkge1xuXHQgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgdGhpcyApO1xuXHQgIH0sIHRoaXMgKTtcblx0XG5cdCAgZGVsZXRlIHRoaXMuX2JvdW5kUG9pbnRlckV2ZW50cztcblx0fTtcblx0XG5cdC8vIC0tLS0tIG1vdmUgZXZlbnQgLS0tLS0gLy9cblx0XG5cdHByb3RvLm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHQgIHRoaXMuX3BvaW50ZXJNb3ZlKCBldmVudCwgZXZlbnQgKTtcblx0fTtcblx0XG5cdHByb3RvLm9ucG9pbnRlcm1vdmUgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgaWYgKCBldmVudC5wb2ludGVySWQgPT0gdGhpcy5wb2ludGVySWRlbnRpZmllciApIHtcblx0ICAgIHRoaXMuX3BvaW50ZXJNb3ZlKCBldmVudCwgZXZlbnQgKTtcblx0ICB9XG5cdH07XG5cdFxuXHRwcm90by5vbnRvdWNobW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0ICB2YXIgdG91Y2ggPSB0aGlzLmdldFRvdWNoKCBldmVudC5jaGFuZ2VkVG91Y2hlcyApO1xuXHQgIGlmICggdG91Y2ggKSB7XG5cdCAgICB0aGlzLl9wb2ludGVyTW92ZSggZXZlbnQsIHRvdWNoICk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHBvaW50ZXIgbW92ZVxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKiBAcGFyYW0ge0V2ZW50IG9yIFRvdWNofSBwb2ludGVyXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRwcm90by5fcG9pbnRlck1vdmUgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG5cdCAgdGhpcy5wb2ludGVyTW92ZSggZXZlbnQsIHBvaW50ZXIgKTtcblx0fTtcblx0XG5cdC8vIHB1YmxpY1xuXHRwcm90by5wb2ludGVyTW92ZSA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcblx0ICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJNb3ZlJywgWyBldmVudCwgcG9pbnRlciBdICk7XG5cdH07XG5cdFxuXHQvLyAtLS0tLSBlbmQgZXZlbnQgLS0tLS0gLy9cblx0XG5cdFxuXHRwcm90by5vbm1vdXNldXAgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgdGhpcy5fcG9pbnRlclVwKCBldmVudCwgZXZlbnQgKTtcblx0fTtcblx0XG5cdHByb3RvLm9ucG9pbnRlcnVwID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHQgIGlmICggZXZlbnQucG9pbnRlcklkID09IHRoaXMucG9pbnRlcklkZW50aWZpZXIgKSB7XG5cdCAgICB0aGlzLl9wb2ludGVyVXAoIGV2ZW50LCBldmVudCApO1xuXHQgIH1cblx0fTtcblx0XG5cdHByb3RvLm9udG91Y2hlbmQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgdmFyIHRvdWNoID0gdGhpcy5nZXRUb3VjaCggZXZlbnQuY2hhbmdlZFRvdWNoZXMgKTtcblx0ICBpZiAoIHRvdWNoICkge1xuXHQgICAgdGhpcy5fcG9pbnRlclVwKCBldmVudCwgdG91Y2ggKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogcG9pbnRlciB1cFxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKiBAcGFyYW0ge0V2ZW50IG9yIFRvdWNofSBwb2ludGVyXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRwcm90by5fcG9pbnRlclVwID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHRoaXMuX3BvaW50ZXJEb25lKCk7XG5cdCAgdGhpcy5wb2ludGVyVXAoIGV2ZW50LCBwb2ludGVyICk7XG5cdH07XG5cdFxuXHQvLyBwdWJsaWNcblx0cHJvdG8ucG9pbnRlclVwID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlclVwJywgWyBldmVudCwgcG9pbnRlciBdICk7XG5cdH07XG5cdFxuXHQvLyAtLS0tLSBwb2ludGVyIGRvbmUgLS0tLS0gLy9cblx0XG5cdC8vIHRyaWdnZXJlZCBvbiBwb2ludGVyIHVwICYgcG9pbnRlciBjYW5jZWxcblx0cHJvdG8uX3BvaW50ZXJEb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5fcG9pbnRlclJlc2V0KCk7XG5cdCAgdGhpcy5fdW5iaW5kUG9zdFN0YXJ0RXZlbnRzKCk7XG5cdCAgdGhpcy5wb2ludGVyRG9uZSgpO1xuXHR9O1xuXHRcblx0cHJvdG8uX3BvaW50ZXJSZXNldCA9IGZ1bmN0aW9uKCkge1xuXHQgIC8vIHJlc2V0IHByb3BlcnRpZXNcblx0ICB0aGlzLmlzUG9pbnRlckRvd24gPSBmYWxzZTtcblx0ICBkZWxldGUgdGhpcy5wb2ludGVySWRlbnRpZmllcjtcblx0fTtcblx0XG5cdHByb3RvLnBvaW50ZXJEb25lID0gbm9vcDtcblx0XG5cdC8vIC0tLS0tIHBvaW50ZXIgY2FuY2VsIC0tLS0tIC8vXG5cdFxuXHRwcm90by5vbnBvaW50ZXJjYW5jZWwgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgaWYgKCBldmVudC5wb2ludGVySWQgPT0gdGhpcy5wb2ludGVySWRlbnRpZmllciApIHtcblx0ICAgIHRoaXMuX3BvaW50ZXJDYW5jZWwoIGV2ZW50LCBldmVudCApO1xuXHQgIH1cblx0fTtcblx0XG5cdHByb3RvLm9udG91Y2hjYW5jZWwgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgdmFyIHRvdWNoID0gdGhpcy5nZXRUb3VjaCggZXZlbnQuY2hhbmdlZFRvdWNoZXMgKTtcblx0ICBpZiAoIHRvdWNoICkge1xuXHQgICAgdGhpcy5fcG9pbnRlckNhbmNlbCggZXZlbnQsIHRvdWNoICk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHBvaW50ZXIgY2FuY2VsXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RXZlbnQgb3IgVG91Y2h9IHBvaW50ZXJcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHByb3RvLl9wb2ludGVyQ2FuY2VsID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuXHQgIHRoaXMuX3BvaW50ZXJEb25lKCk7XG5cdCAgdGhpcy5wb2ludGVyQ2FuY2VsKCBldmVudCwgcG9pbnRlciApO1xuXHR9O1xuXHRcblx0Ly8gcHVibGljXG5cdHByb3RvLnBvaW50ZXJDYW5jZWwgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG5cdCAgdGhpcy5lbWl0RXZlbnQoICdwb2ludGVyQ2FuY2VsJywgWyBldmVudCwgcG9pbnRlciBdICk7XG5cdH07XG5cdFxuXHQvLyAtLS0tLSAgLS0tLS0gLy9cblx0XG5cdC8vIHV0aWxpdHkgZnVuY3Rpb24gZm9yIGdldHRpbmcgeC95IGNvb3JkcyBmcm9tIGV2ZW50XG5cdFVuaXBvaW50ZXIuZ2V0UG9pbnRlclBvaW50ID0gZnVuY3Rpb24oIHBvaW50ZXIgKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHg6IHBvaW50ZXIucGFnZVgsXG5cdCAgICB5OiBwb2ludGVyLnBhZ2VZXG5cdCAgfTtcblx0fTtcblx0XG5cdC8vIC0tLS0tICAtLS0tLSAvL1xuXHRcblx0cmV0dXJuIFVuaXBvaW50ZXI7XG5cdFxuXHR9KSk7XG5cblxuLyoqKi8gfSksXG4vKiAzOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qKlxuXHQgKiBFdkVtaXR0ZXIgdjEuMS4wXG5cdCAqIExpbCcgZXZlbnQgZW1pdHRlclxuXHQgKiBNSVQgTGljZW5zZVxuXHQgKi9cblx0XG5cdC8qIGpzaGludCB1bnVzZWQ6IHRydWUsIHVuZGVmOiB0cnVlLCBzdHJpY3Q6IHRydWUgKi9cblx0XG5cdCggZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcblx0ICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cblx0ICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqLyAvKiBnbG9iYWxzIGRlZmluZSwgbW9kdWxlLCB3aW5kb3cgKi9cblx0ICBpZiAoIHRydWUgKSB7XG5cdCAgICAvLyBBTUQgLSBSZXF1aXJlSlNcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID8gKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSkpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgIH0gZWxzZSBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG5cdCAgICAvLyBDb21tb25KUyAtIEJyb3dzZXJpZnksIFdlYnBhY2tcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBCcm93c2VyIGdsb2JhbHNcblx0ICAgIGdsb2JhbC5FdkVtaXR0ZXIgPSBmYWN0b3J5KCk7XG5cdCAgfVxuXHRcblx0fSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCkge1xuXHRcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRmdW5jdGlvbiBFdkVtaXR0ZXIoKSB7fVxuXHRcblx0dmFyIHByb3RvID0gRXZFbWl0dGVyLnByb3RvdHlwZTtcblx0XG5cdHByb3RvLm9uID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG5cdCAgaWYgKCAhZXZlbnROYW1lIHx8ICFsaXN0ZW5lciApIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgLy8gc2V0IGV2ZW50cyBoYXNoXG5cdCAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcblx0ICAvLyBzZXQgbGlzdGVuZXJzIGFycmF5XG5cdCAgdmFyIGxpc3RlbmVycyA9IGV2ZW50c1sgZXZlbnROYW1lIF0gPSBldmVudHNbIGV2ZW50TmFtZSBdIHx8IFtdO1xuXHQgIC8vIG9ubHkgYWRkIG9uY2Vcblx0ICBpZiAoIGxpc3RlbmVycy5pbmRleE9mKCBsaXN0ZW5lciApID09IC0xICkge1xuXHQgICAgbGlzdGVuZXJzLnB1c2goIGxpc3RlbmVyICk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdHByb3RvLm9uY2UgPSBmdW5jdGlvbiggZXZlbnROYW1lLCBsaXN0ZW5lciApIHtcblx0ICBpZiAoICFldmVudE5hbWUgfHwgIWxpc3RlbmVyICkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyBhZGQgZXZlbnRcblx0ICB0aGlzLm9uKCBldmVudE5hbWUsIGxpc3RlbmVyICk7XG5cdCAgLy8gc2V0IG9uY2UgZmxhZ1xuXHQgIC8vIHNldCBvbmNlRXZlbnRzIGhhc2hcblx0ICB2YXIgb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgPSB0aGlzLl9vbmNlRXZlbnRzIHx8IHt9O1xuXHQgIC8vIHNldCBvbmNlTGlzdGVuZXJzIG9iamVjdFxuXHQgIHZhciBvbmNlTGlzdGVuZXJzID0gb25jZUV2ZW50c1sgZXZlbnROYW1lIF0gPSBvbmNlRXZlbnRzWyBldmVudE5hbWUgXSB8fCB7fTtcblx0ICAvLyBzZXQgZmxhZ1xuXHQgIG9uY2VMaXN0ZW5lcnNbIGxpc3RlbmVyIF0gPSB0cnVlO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdHByb3RvLm9mZiA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGxpc3RlbmVyICkge1xuXHQgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzWyBldmVudE5hbWUgXTtcblx0ICBpZiAoICFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGggKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKCBsaXN0ZW5lciApO1xuXHQgIGlmICggaW5kZXggIT0gLTEgKSB7XG5cdCAgICBsaXN0ZW5lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRwcm90by5lbWl0RXZlbnQgPSBmdW5jdGlvbiggZXZlbnROYW1lLCBhcmdzICkge1xuXHQgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzWyBldmVudE5hbWUgXTtcblx0ICBpZiAoICFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGggKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIC8vIGNvcHkgb3ZlciB0byBhdm9pZCBpbnRlcmZlcmVuY2UgaWYgLm9mZigpIGluIGxpc3RlbmVyXG5cdCAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLnNsaWNlKDApO1xuXHQgIGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHQgIC8vIG9uY2Ugc3R1ZmZcblx0ICB2YXIgb25jZUxpc3RlbmVycyA9IHRoaXMuX29uY2VFdmVudHMgJiYgdGhpcy5fb25jZUV2ZW50c1sgZXZlbnROYW1lIF07XG5cdFxuXHQgIGZvciAoIHZhciBpPTA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKysgKSB7XG5cdCAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV1cblx0ICAgIHZhciBpc09uY2UgPSBvbmNlTGlzdGVuZXJzICYmIG9uY2VMaXN0ZW5lcnNbIGxpc3RlbmVyIF07XG5cdCAgICBpZiAoIGlzT25jZSApIHtcblx0ICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVyXG5cdCAgICAgIC8vIHJlbW92ZSBiZWZvcmUgdHJpZ2dlciB0byBwcmV2ZW50IHJlY3Vyc2lvblxuXHQgICAgICB0aGlzLm9mZiggZXZlbnROYW1lLCBsaXN0ZW5lciApO1xuXHQgICAgICAvLyB1bnNldCBvbmNlIGZsYWdcblx0ICAgICAgZGVsZXRlIG9uY2VMaXN0ZW5lcnNbIGxpc3RlbmVyIF07XG5cdCAgICB9XG5cdCAgICAvLyB0cmlnZ2VyIGxpc3RlbmVyXG5cdCAgICBsaXN0ZW5lci5hcHBseSggdGhpcywgYXJncyApO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRwcm90by5hbGxPZmYgPSBmdW5jdGlvbigpIHtcblx0ICBkZWxldGUgdGhpcy5fZXZlbnRzO1xuXHQgIGRlbGV0ZSB0aGlzLl9vbmNlRXZlbnRzO1xuXHR9O1xuXHRcblx0cmV0dXJuIEV2RW1pdHRlcjtcblx0XG5cdH0pKTtcblxuXG4vKioqLyB9KSxcbi8qIDQwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvLyBpcy5qcyAwLjguMFxuXHQvLyBBdXRob3I6IEFyYXMgQXRhc2F5Z2luXG5cdFxuXHQvLyBBTUQgd2l0aCBnbG9iYWwsIE5vZGUsIG9yIGdsb2JhbFxuXHQ7KGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0ICAgIGlmKHRydWUpIHtcblx0ICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdCAgICAgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAvLyBBbHNvIGNyZWF0ZSBhIGdsb2JhbCBpbiBjYXNlIHNvbWUgc2NyaXB0c1xuXHQgICAgICAgICAgICAvLyB0aGF0IGFyZSBsb2FkZWQgc3RpbGwgYXJlIGxvb2tpbmcgZm9yXG5cdCAgICAgICAgICAgIC8vIGEgZ2xvYmFsIGV2ZW4gd2hlbiBhbiBBTUQgbG9hZGVyIGlzIGluIHVzZS5cblx0ICAgICAgICAgICAgcmV0dXJuIChyb290LmlzID0gZmFjdG9yeSgpKTtcblx0ICAgICAgICB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgICAgfSBlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuXHQgICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG5cdCAgICAgICAgLy8gbGlrZSBOb2RlLlxuXHQgICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuXHQgICAgICAgIHJvb3QuaXMgPSBmYWN0b3J5KCk7XG5cdCAgICB9XG5cdH0gKHRoaXMsIGZ1bmN0aW9uKCkge1xuXHRcblx0ICAgIC8vIEJhc2VsaW5lXG5cdCAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcblx0ICAgIHZhciByb290ID0gdGhpcyB8fCBnbG9iYWw7XG5cdCAgICB2YXIgcHJldmlvdXNJcyA9IHJvb3QuaXM7XG5cdFxuXHQgICAgLy8gZGVmaW5lICdpcycgb2JqZWN0IGFuZCBjdXJyZW50IHZlcnNpb25cblx0ICAgIHZhciBpcyA9IHt9O1xuXHQgICAgaXMuVkVSU0lPTiA9ICcwLjguMCc7XG5cdFxuXHQgICAgLy8gZGVmaW5lIGludGVyZmFjZXNcblx0ICAgIGlzLm5vdCA9IHt9O1xuXHQgICAgaXMuYWxsID0ge307XG5cdCAgICBpcy5hbnkgPSB7fTtcblx0XG5cdCAgICAvLyBjYWNoZSBzb21lIG1ldGhvZHMgdG8gY2FsbCBsYXRlciBvblxuXHQgICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0ICAgIHZhciBhcnJheVNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXHQgICAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdCAgICAvLyBoZWxwZXIgZnVuY3Rpb24gd2hpY2ggcmV2ZXJzZXMgdGhlIHNlbnNlIG9mIHByZWRpY2F0ZSByZXN1bHRcblx0ICAgIGZ1bmN0aW9uIG5vdChmdW5jKSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gIWZ1bmMuYXBwbHkobnVsbCwgYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gaGVscGVyIGZ1bmN0aW9uIHdoaWNoIGNhbGwgcHJlZGljYXRlIGZ1bmN0aW9uIHBlciBwYXJhbWV0ZXIgYW5kIHJldHVybiB0cnVlIGlmIGFsbCBwYXNzXG5cdCAgICBmdW5jdGlvbiBhbGwoZnVuYykge1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBhcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHBhcmFtZXRlcnMubGVuZ3RoO1xuXHQgICAgICAgICAgICBpZihsZW5ndGggPT09IDEgJiYgaXMuYXJyYXkocGFyYW1ldGVyc1swXSkpIHsgICAgLy8gc3VwcG9ydCBhcnJheVxuXHQgICAgICAgICAgICAgICAgcGFyYW1ldGVycyA9IHBhcmFtZXRlcnNbMF07XG5cdCAgICAgICAgICAgICAgICBsZW5ndGggPSBwYXJhbWV0ZXJzLmxlbmd0aDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIWZ1bmMuY2FsbChudWxsLCBwYXJhbWV0ZXJzW2ldKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGhlbHBlciBmdW5jdGlvbiB3aGljaCBjYWxsIHByZWRpY2F0ZSBmdW5jdGlvbiBwZXIgcGFyYW1ldGVyIGFuZCByZXR1cm4gdHJ1ZSBpZiBhbnkgcGFzc1xuXHQgICAgZnVuY3Rpb24gYW55KGZ1bmMpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzID0gYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgIHZhciBsZW5ndGggPSBwYXJhbWV0ZXJzLmxlbmd0aDtcblx0ICAgICAgICAgICAgaWYobGVuZ3RoID09PSAxICYmIGlzLmFycmF5KHBhcmFtZXRlcnNbMF0pKSB7ICAgIC8vIHN1cHBvcnQgYXJyYXlcblx0ICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzWzBdO1xuXHQgICAgICAgICAgICAgICAgbGVuZ3RoID0gcGFyYW1ldGVycy5sZW5ndGg7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGZ1bmMuY2FsbChudWxsLCBwYXJhbWV0ZXJzW2ldKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFR5cGUgY2hlY2tzXG5cdCAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgQXJndW1lbnRzP1xuXHQgICAgaXMuYXJndW1lbnRzID0gZnVuY3Rpb24odmFsdWUpIHsgICAgLy8gZmFsbGJhY2sgY2hlY2sgaXMgZm9yIElFXG5cdCAgICAgICAgcmV0dXJuIGlzLm5vdC5udWxsKHZhbHVlKSAmJiAodG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFyZ3VtZW50c10nIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmICdjYWxsZWUnIGluIHZhbHVlKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgQXJyYXk/XG5cdCAgICBpcy5hcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHsgICAgLy8gY2hlY2sgbmF0aXZlIGlzQXJyYXkgZmlyc3Rcblx0ICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgQm9vbGVhbj9cblx0ICAgIGlzLmJvb2xlYW4gPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEJvb2xlYW5dJztcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBEYXRlIE9iamVjdD9cblx0ICAgIGlzLmRhdGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIEVycm9yIG9iamVjdD9cblx0ICAgIGlzLmVycm9yID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEVycm9yXSc7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgZnVuY3Rpb24/XG5cdCAgICBpcy5mdW5jdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7ICAgIC8vIGZhbGxiYWNrIGNoZWNrIGlzIGZvciBJRVxuXHQgICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgTmFOP1xuXHQgICAgaXMubmFuID0gZnVuY3Rpb24odmFsdWUpIHsgICAgLy8gTmFOIGlzIG51bWJlciA6KSBBbHNvIGl0IGlzIHRoZSBvbmx5IHZhbHVlIHdoaWNoIGRvZXMgbm90IGVxdWFsIGl0c2VsZlxuXHQgICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgbnVsbD9cblx0ICAgIGlzLm51bGwgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBudW1iZXI/XG5cdCAgICBpcy5udW1iZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiBpcy5ub3QubmFuKHZhbHVlKSAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgb2JqZWN0P1xuXHQgICAgaXMub2JqZWN0ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICAgICAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlID09PSAnb2JqZWN0JyAmJiAhIXZhbHVlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBnaXZlbiB2YWx1ZSBhIHB1cmUgSlNPTiBvYmplY3Q/XG5cdCAgICBpcy5qc29uID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIFJlZ0V4cD9cblx0ICAgIGlzLnJlZ2V4cCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBSZWdFeHBdJztcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYXJlIGdpdmVuIHZhbHVlcyBzYW1lIHR5cGU/XG5cdCAgICAvLyBwcmV2ZW50IE5hTiwgTnVtYmVyIHNhbWUgdHlwZSBjaGVja1xuXHQgICAgaXMuc2FtZVR5cGUgPSBmdW5jdGlvbih2YWx1ZTEsIHZhbHVlMikge1xuXHQgICAgICAgIGlmKGlzLm5hbih2YWx1ZTEpIHx8IGlzLm5hbih2YWx1ZTIpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBpcy5uYW4odmFsdWUxKSA9PT0gaXMubmFuKHZhbHVlMik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlMSkgPT09IHRvU3RyaW5nLmNhbGwodmFsdWUyKTtcblx0ICAgIH07XG5cdCAgICAvLyBzYW1lVHlwZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgaXMuc2FtZVR5cGUuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIFN0cmluZz9cblx0ICAgIGlzLnN0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBTdHJpbmddJztcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBDaGFyP1xuXHQgICAgaXMuY2hhciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLnN0cmluZyh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAxO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIHVuZGVmaW5lZD9cblx0ICAgIGlzLnVuZGVmaW5lZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlID09PSB2b2lkIDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIFByZXNlbmNlIGNoZWNrc1xuXHQgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XG5cdCAgICAvL2lzIGEgZ2l2ZW4gdmFsdWUgZW1wdHk/IE9iamVjdHMsIGFycmF5cywgc3RyaW5nc1xuXHQgICAgaXMuZW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIGlmKGlzLm9iamVjdCh2YWx1ZSkpe1xuXHQgICAgICAgICAgICB2YXIgbnVtID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpLmxlbmd0aDtcblx0ICAgICAgICAgICAgaWYobnVtID09PSAwIHx8IChudW0gPT09IDEgJiYgaXMuYXJyYXkodmFsdWUpKSB8fCAobnVtID09PSAyICYmIGlzLmFyZ3VtZW50cyh2YWx1ZSkpKXtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09ICcnO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBleGlzdHk/XG5cdCAgICBpcy5leGlzdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIHRydXRoeT9cblx0ICAgIGlzLnRydXRoeSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLmV4aXN0eSh2YWx1ZSkgJiYgdmFsdWUgIT09IGZhbHNlICYmIGlzLm5vdC5uYW4odmFsdWUpICYmIHZhbHVlICE9PSBcIlwiICYmIHZhbHVlICE9PSAwO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIGZhbHN5P1xuXHQgICAgaXMuZmFsc3kgPSBub3QoaXMudHJ1dGh5KTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIHNwYWNlP1xuXHQgICAgLy8gaG9yaXphbnRhbCB0YWI6IDksIGxpbmUgZmVlZDogMTAsIHZlcnRpY2FsIHRhYjogMTEsIGZvcm0gZmVlZDogMTIsIGNhcnJpYWdlIHJldHVybjogMTMsIHNwYWNlOiAzMlxuXHQgICAgaXMuc3BhY2UgPSAgZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICBpZihpcy5jaGFyKHZhbHVlKSkge1xuXHQgICAgICAgICAgICB2YXIgY2hhcmFjdGVyQ29kZSA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG5cdCAgICAgICAgICAgIHJldHVybiAoY2hhcmFjdGVyQ29kZSA+ICA4ICYmIGNoYXJhY3RlckNvZGUgPCAxNCkgfHwgY2hhcmFjdGVyQ29kZSA9PT0gMzI7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQXJpdGhtZXRpYyBjaGVja3Ncblx0ICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdFxuXHQgICAgLy8gYXJlIGdpdmVuIHZhbHVlcyBlcXVhbD8gc3VwcG9ydHMgbnVtYmVycywgc3RyaW5ncywgcmVnZXhwcywgYm9vbGVhbnNcblx0ICAgIC8vIFRPRE86IEFkZCBvYmplY3QgYW5kIGFycmF5IHN1cHBvcnRcblx0ICAgIGlzLmVxdWFsID0gZnVuY3Rpb24odmFsdWUxLCB2YWx1ZTIpIHtcblx0ICAgICAgICAvLyBjaGVjayAwIGFuZCAtMCBlcXVpdHkgd2l0aCBJbmZpbml0eSBhbmQgLUluZmluaXR5XG5cdCAgICAgICAgaWYoaXMuYWxsLm51bWJlcih2YWx1ZTEsIHZhbHVlMikpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHZhbHVlMSA9PT0gdmFsdWUyICYmIDEgLyB2YWx1ZTEgPT09IDEgLyB2YWx1ZTI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGNoZWNrIHJlZ2V4cHMgYXMgc3RyaW5ncyB0b29cblx0ICAgICAgICBpZihpcy5hbGwuc3RyaW5nKHZhbHVlMSwgdmFsdWUyKSB8fCBpcy5hbGwucmVnZXhwKHZhbHVlMSwgdmFsdWUyKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gJycgKyB2YWx1ZTEgPT09ICcnICsgdmFsdWUyO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZihpcy5hbGwuYm9vbGVhbih2YWx1ZTEsIHZhbHVlMikpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHZhbHVlMSA9PT0gdmFsdWUyO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgLy8gZXF1YWwgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLmVxdWFsLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBudW1iZXIgZXZlbj9cblx0ICAgIGlzLmV2ZW4gPSBmdW5jdGlvbihudW1iKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLm51bWJlcihudW1iKSAmJiBudW1iICUgMiA9PT0gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBudW1iZXIgb2RkP1xuXHQgICAgaXMub2RkID0gZnVuY3Rpb24obnVtYikge1xuXHQgICAgICAgIHJldHVybiBpcy5udW1iZXIobnVtYikgJiYgbnVtYiAlIDIgPT09IDE7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIHBvc2l0aXZlP1xuXHQgICAgaXMucG9zaXRpdmUgPSBmdW5jdGlvbihudW1iKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLm51bWJlcihudW1iKSAmJiBudW1iID4gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBudW1iZXIgbmVnYXRpdmU/XG5cdCAgICBpcy5uZWdhdGl2ZSA9IGZ1bmN0aW9uKG51bWIpIHtcblx0ICAgICAgICByZXR1cm4gaXMubnVtYmVyKG51bWIpICYmIG51bWIgPCAwO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIG51bWJlciBhYm92ZSBtaW5pbXVtIHBhcmFtZXRlcj9cblx0ICAgIGlzLmFib3ZlID0gZnVuY3Rpb24obnVtYiwgbWluKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLmFsbC5udW1iZXIobnVtYiwgbWluKSAmJiBudW1iID4gbWluO1xuXHQgICAgfTtcblx0ICAgIC8vIGFib3ZlIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICBpcy5hYm92ZS5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGFib3ZlIG1heGltdW0gcGFyYW1ldGVyP1xuXHQgICAgaXMudW5kZXIgPSBmdW5jdGlvbihudW1iLCBtYXgpIHtcblx0ICAgICAgICByZXR1cm4gaXMuYWxsLm51bWJlcihudW1iLCBtYXgpICYmIG51bWIgPCBtYXg7XG5cdCAgICB9O1xuXHQgICAgLy8gbGVhc3QgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLnVuZGVyLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBudW1iZXIgd2l0aGluIG1pbmltdW0gYW5kIG1heGltdW0gcGFyYW1ldGVycz9cblx0ICAgIGlzLndpdGhpbiA9IGZ1bmN0aW9uKG51bWIsIG1pbiwgbWF4KSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLmFsbC5udW1iZXIobnVtYiwgbWluLCBtYXgpICYmIG51bWIgPiBtaW4gJiYgbnVtYiA8IG1heDtcblx0ICAgIH07XG5cdCAgICAvLyB3aXRoaW4gbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLndpdGhpbi5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGRlY2ltYWw/XG5cdCAgICBpcy5kZWNpbWFsID0gZnVuY3Rpb24obnVtYikge1xuXHQgICAgICAgIHJldHVybiBpcy5udW1iZXIobnVtYikgJiYgbnVtYiAlIDEgIT09IDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGludGVnZXI/XG5cdCAgICBpcy5pbnRlZ2VyID0gZnVuY3Rpb24obnVtYikge1xuXHQgICAgICAgIHJldHVybiBpcy5udW1iZXIobnVtYikgJiYgbnVtYiAlIDEgPT09IDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGZpbml0ZT9cblx0ICAgIGlzLmZpbml0ZSA9IGlzRmluaXRlIHx8IGZ1bmN0aW9uKG51bWIpIHtcblx0ICAgICAgICByZXR1cm4gbnVtYiAhPT0gSW5maW5pdHkgJiYgbnVtYiAhPT0gLUluZmluaXR5ICYmIGlzLm5vdC5uYW4obnVtYik7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGluZmluaXRlP1xuXHQgICAgaXMuaW5maW5pdGUgPSBub3QoaXMuZmluaXRlKTtcblx0XG5cdCAgICAvLyBSZWdleHAgY2hlY2tzXG5cdCAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHQgICAgLy8gU3RldmVuIExldml0aGFuLCBKYW4gR295dmFlcnRzOiBSZWd1bGFyIEV4cHJlc3Npb25zIENvb2tib29rXG5cdCAgICAvLyBTY290dCBHb256YWxlejogRW1haWwgYWRkcmVzcyB2YWxpZGF0aW9uXG5cdFxuXHQgICAgLy8gZXBwUGhvbmUgbWF0Y2ggZXh0ZW5zaWJsZSBwcm92aXNpb25pbmcgcHJvdG9jb2wgZm9ybWF0XG5cdCAgICAvLyBuYW5wUGhvbmUgbWF0Y2ggbm9ydGggYW1lcmljYW4gbnVtYmVyIHBsYW4gZm9ybWF0XG5cdCAgICAvLyBkYXRlU3RyaW5nIG1hdGNoIG0vZC95eSBhbmQgbW0vZGQveXl5eSwgYWxsb3dpbmcgYW55IGNvbWJpbmF0aW9uIG9mIG9uZSBvciB0d28gZGlnaXRzIGZvciB0aGUgZGF5IGFuZCBtb250aCwgYW5kIHR3byBvciBmb3VyIGRpZ2l0cyBmb3IgdGhlIHllYXJcblx0ICAgIC8vIHRpbWUgbWF0Y2ggaG91cnMsIG1pbnV0ZXMsIGFuZCBzZWNvbmRzLCAyNC1ob3VyIGNsb2NrXG5cdCAgICB2YXIgcmVnZXhwcyA9IHtcblx0ICAgICAgICB1cmw6IC9eKD86KD86aHR0cHM/fGZ0cCk6XFwvXFwvKT8oPzooPyEoPzoxMHwxMjcpKD86XFwuXFxkezEsM30pezN9KSg/ISg/OjE2OVxcLjI1NHwxOTJcXC4xNjgpKD86XFwuXFxkezEsM30pezJ9KSg/ITE3MlxcLig/OjFbNi05XXwyXFxkfDNbMC0xXSkoPzpcXC5cXGR7MSwzfSl7Mn0pKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswMV1cXGR8MjJbMC0zXSkoPzpcXC4oPzoxP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKSl7Mn0oPzpcXC4oPzpbMS05XVxcZD98MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC00XSkpfCg/Oig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldLSopKlthLXpcXHUwMGExLVxcdWZmZmYwLTldKykoPzpcXC4oPzpbYS16XFx1MDBhMS1cXHVmZmZmMC05XS0qKSpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSspKig/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfSkpKSg/OjpcXGR7Miw1fSk/KD86XFwvXFxTKik/JC9pLFxuXHQgICAgICAgIGVtYWlsOiAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2ksXG5cdCAgICAgICAgY3JlZGl0Q2FyZDogL14oPzooNFswLTldezEyfSg/OlswLTldezN9KT8pfCg1WzEtNV1bMC05XXsxNH0pfCg2KD86MDExfDVbMC05XXsyfSlbMC05XXsxMn0pfCgzWzQ3XVswLTldezEzfSl8KDMoPzowWzAtNV18WzY4XVswLTldKVswLTldezExfSl8KCg/OjIxMzF8MTgwMHwzNVswLTldezN9KVswLTldezExfSkpJC8sXG5cdCAgICAgICAgYWxwaGFOdW1lcmljOiAvXltBLVphLXowLTldKyQvLFxuXHQgICAgICAgIHRpbWVTdHJpbmc6IC9eKDJbMC0zXXxbMDFdP1swLTldKTooWzAtNV0/WzAtOV0pOihbMC01XT9bMC05XSkkLyxcblx0ICAgICAgICBkYXRlU3RyaW5nOiAvXigxWzAtMl18MD9bMS05XSlcXC8oM1swMV18WzEyXVswLTldfDA/WzEtOV0pXFwvKD86WzAtOV17Mn0pP1swLTldezJ9JC8sXG5cdCAgICAgICAgdXNaaXBDb2RlOiAvXlswLTldezV9KD86LVswLTldezR9KT8kLyxcblx0ICAgICAgICBjYVBvc3RhbENvZGU6IC9eKD8hLipbREZJT1FVXSlbQS1WWFldWzAtOV1bQS1aXVxccz9bMC05XVtBLVpdWzAtOV0kLyxcblx0ICAgICAgICB1a1Bvc3RDb2RlOiAvXltBLVpdezEsMn1bMC05UkNITlFdWzAtOUEtWl0/XFxzP1swLTldW0FCRC1ISkxOUC1VVy1aXXsyfSR8XltBLVpdezJ9LT9bMC05XXs0fSQvLFxuXHQgICAgICAgIG5hbnBQaG9uZTogL15cXCg/KFswLTldezN9KVxcKT9bLS4gXT8oWzAtOV17M30pWy0uIF0/KFswLTldezR9KSQvLFxuXHQgICAgICAgIGVwcFBob25lOiAvXlxcK1swLTldezEsM31cXC5bMC05XXs0LDE0fSg/OnguKyk/JC8sXG5cdCAgICAgICAgc29jaWFsU2VjdXJpdHlOdW1iZXI6IC9eKD8hMDAwfDY2NilbMC04XVswLTldezJ9LSg/ITAwKVswLTldezJ9LSg/ITAwMDApWzAtOV17NH0kLyxcblx0ICAgICAgICBhZmZpcm1hdGl2ZTogL14oPzoxfHQoPzpydWUpP3x5KD86ZXMpP3xvayg/OmF5KT8pJC8sXG5cdCAgICAgICAgaGV4YWRlY2ltYWw6IC9eWzAtOWEtZkEtRl0rJC8sXG5cdCAgICAgICAgaGV4Q29sb3I6IC9eIz8oWzAtOWEtZkEtRl17M318WzAtOWEtZkEtRl17Nn0pJC8sXG5cdCAgICAgICAgaXB2NDogL14oPzooPzpcXGR8WzEtOV1cXGR8MVxcZHsyfXwyWzAtNF1cXGR8MjVbMC01XSlcXC4pezN9KD86XFxkfFsxLTldXFxkfDFcXGR7Mn18MlswLTRdXFxkfDI1WzAtNV0pJC8sXG5cdCAgICAgICAgaXB2NjogL14oKFthLXpBLVpdfFthLXpBLVpdW2EtekEtWjAtOVxcLV0qW2EtekEtWjAtOV0pXFwuKSooW0EtWmEtel18W0EtWmEtel1bQS1aYS16MC05XFwtXSpbQS1aYS16MC05XSkkfF5cXHMqKCgoWzAtOUEtRmEtZl17MSw0fTopezd9KFswLTlBLUZhLWZdezEsNH18OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezZ9KDpbMC05QS1GYS1mXXsxLDR9fCgoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7NX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSwyfSl8OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7NH0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSwzfSl8KCg6WzAtOUEtRmEtZl17MSw0fSk/OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezN9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNH0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsMn06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Mn0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw1fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwzfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsxfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDZ9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDR9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCg6KCgoOlswLTlBLUZhLWZdezEsNH0pezEsN30pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNX06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSkpKCUuKyk/XFxzKiQvLFxuXHQgICAgICAgIGlwOiAvXigoWzAtOV18WzEtOV1bMC05XXwxWzAtOV17Mn18MlswLTRdWzAtOV18MjVbMC01XSlcXC4pezN9KFswLTldfFsxLTldWzAtOV18MVswLTldezJ9fDJbMC00XVswLTldfDI1WzAtNV0pJHxeKChbYS16QS1aXXxbYS16QS1aXVthLXpBLVowLTlcXC1dKlthLXpBLVowLTldKVxcLikqKFtBLVphLXpdfFtBLVphLXpdW0EtWmEtejAtOVxcLV0qW0EtWmEtejAtOV0pJHxeXFxzKigoKFswLTlBLUZhLWZdezEsNH06KXs3fShbMC05QS1GYS1mXXsxLDR9fDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSg6WzAtOUEtRmEtZl17MSw0fXwoKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezV9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsMn0pfDooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezR9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsM30pfCgoOlswLTlBLUZhLWZdezEsNH0pPzooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXszfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDR9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDJ9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezJ9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNX0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsM306KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7MX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw2fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw0fTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoOigoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDd9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDV9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpKSglLispP1xccyokL1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBjcmVhdGUgcmVnZXhwIGNoZWNrcyBtZXRob2RzIGZyb20gJ3JlZ2V4cCcgb2JqZWN0XG5cdCAgICBmb3IodmFyIHJlZ2V4cCBpbiByZWdleHBzKSB7XG5cdCAgICAgICAgaWYocmVnZXhwcy5oYXNPd25Qcm9wZXJ0eShyZWdleHApKSB7XG5cdCAgICAgICAgICAgIHJlZ2V4cENoZWNrKHJlZ2V4cCwgcmVnZXhwcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJlZ2V4cENoZWNrKHJlZ2V4cCwgcmVnZXhwcykge1xuXHQgICAgICAgIGlzW3JlZ2V4cF0gPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVnZXhwc1tyZWdleHBdLnRlc3QodmFsdWUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU3RyaW5nIGNoZWNrc1xuXHQgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHN0cmluZyBpbmNsdWRlIHBhcmFtZXRlciBzdWJzdHJpbmc/XG5cdCAgICBpcy5pbmNsdWRlID0gZnVuY3Rpb24oc3RyLCBzdWJzdHIpIHtcblx0ICAgICAgICByZXR1cm4gc3RyLmluZGV4T2Yoc3Vic3RyKSA+IC0xO1xuXHQgICAgfTtcblx0ICAgIC8vIGluY2x1ZGUgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLmluY2x1ZGUuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHN0cmluZyBhbGwgdXBwZXJjYXNlP1xuXHQgICAgaXMudXBwZXJDYXNlID0gZnVuY3Rpb24oc3RyKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLnN0cmluZyhzdHIpICYmIHN0ciA9PT0gc3RyLnRvVXBwZXJDYXNlKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gc3RyaW5nIGFsbCBsb3dlcmNhc2U/XG5cdCAgICBpcy5sb3dlckNhc2UgPSBmdW5jdGlvbihzdHIpIHtcblx0ICAgICAgICByZXR1cm4gaXMuc3RyaW5nKHN0cikgJiYgc3RyID09PSBzdHIudG9Mb3dlckNhc2UoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgc3RyaW5nIHN0YXJ0IHdpdGggYSBnaXZlbiBzdGFydFdpdGggcGFyYW1ldGVyP1xuXHQgICAgaXMuc3RhcnRXaXRoID0gZnVuY3Rpb24oc3RyLCBzdGFydFdpdGgpIHtcblx0ICAgICAgICByZXR1cm4gaXMuc3RyaW5nKHN0cikgJiYgc3RyLmluZGV4T2Yoc3RhcnRXaXRoKSA9PT0gMDtcblx0ICAgIH07XG5cdCAgICAvLyBzdGFydFdpdGggbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLnN0YXJ0V2l0aC5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgIC8vIGlzIHN0cmluZyBlbmQgd2l0aCBhIGdpdmVuIGVuZFdpdGggcGFyYW1ldGVyP1xuXHQgICAgaXMuZW5kV2l0aCA9IGZ1bmN0aW9uKHN0ciwgZW5kV2l0aCkge1xuXHQgICAgICAgIHJldHVybiBpcy5zdHJpbmcoc3RyKSAmJiBzdHIuaW5kZXhPZihlbmRXaXRoKSA+IC0xICYmIHN0ci5pbmRleE9mKGVuZFdpdGgpID09PSBzdHIubGVuZ3RoIC0gIGVuZFdpdGgubGVuZ3RoO1xuXHQgICAgfTtcblx0ICAgIC8vIGVuZFdpdGggbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLmVuZFdpdGguYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIHN0cmluZyBvciBzZW50ZW5jZSBjYXBpdGFsaXplZD9cblx0ICAgIGlzLmNhcGl0YWxpemVkID0gZnVuY3Rpb24oc3RyKSB7XG5cdCAgICAgICAgaWYoaXMubm90LnN0cmluZyhzdHIpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHdvcmRzID0gc3RyLnNwbGl0KCcgJyk7XG5cdCAgICAgICAgdmFyIGNhcGl0YWxpemVkID0gW107XG5cdCAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGNhcGl0YWxpemVkLnB1c2god29yZHNbaV1bMF0gPT09IHdvcmRzW2ldWzBdLnRvVXBwZXJDYXNlKCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gaXMuYWxsLnRydXRoeS5hcHBseShudWxsLCBjYXBpdGFsaXplZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gc3RyaW5nIHBhbGluZHJvbWU/XG5cdCAgICBpcy5wYWxpbmRyb21lID0gZnVuY3Rpb24oc3RyKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLnN0cmluZyhzdHIpICYmIHN0ciA9PSBzdHIuc3BsaXQoJycpLnJldmVyc2UoKS5qb2luKCcnKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gVGltZSBjaGVja3Ncblx0ICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdFxuXHQgICAgdmFyIGRheXMgPSBbJ3N1bmRheScsICdtb25kYXknLCAndHVlc2RheScsICd3ZWRuZXNkYXknLCAndGh1cnNkYXknLCAnZnJpZGF5JywgJ3NhdHVyZGF5J107XG5cdCAgICB2YXIgbW9udGhzID0gWydqYW51YXJ5JywgJ2ZlYnJ1YXJ5JywgJ21hcmNoJywgJ2FwcmlsJywgJ21heScsICdqdW5lJywgJ2p1bHknLCAnYXVndXN0JywgJ3NlcHRlbWJlcicsICdvY3RvYmVyJywgJ25vdmVtYmVyJywgJ2RlY2VtYmVyJ107XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIGluZGljYXRlIHRvZGF5P1xuXHQgICAgaXMudG9kYXkgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcblx0ICAgICAgICB2YXIgdG9kYXlTdHJpbmcgPSBub3cudG9EYXRlU3RyaW5nKCk7XG5cdCAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBvYmoudG9EYXRlU3RyaW5nKCkgPT09IHRvZGF5U3RyaW5nO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW5kaWNhdGUgeWVzdGVyZGF5P1xuXHQgICAgaXMueWVzdGVyZGF5ID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgdmFyIHllc3RlcmRheVN0cmluZyA9IG5ldyBEYXRlKG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSAxKSkudG9EYXRlU3RyaW5nKCk7XG5cdCAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBvYmoudG9EYXRlU3RyaW5nKCkgPT09IHllc3RlcmRheVN0cmluZztcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIGluZGljYXRlIHRvbW9ycm93P1xuXHQgICAgaXMudG9tb3Jyb3cgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcblx0ICAgICAgICB2YXIgdG9tb3Jyb3dTdHJpbmcgPSBuZXcgRGF0ZShub3cuc2V0RGF0ZShub3cuZ2V0RGF0ZSgpICsgMSkpLnRvRGF0ZVN0cmluZygpO1xuXHQgICAgICAgIHJldHVybiBpcy5kYXRlKG9iaikgJiYgb2JqLnRvRGF0ZVN0cmluZygpID09PSB0b21vcnJvd1N0cmluZztcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIHBhc3Q/XG5cdCAgICBpcy5wYXN0ID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBvYmouZ2V0VGltZSgpIDwgbm93LmdldFRpbWUoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIGZ1dHVyZT9cblx0ICAgIGlzLmZ1dHVyZSA9IG5vdChpcy5wYXN0KTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGVzIGRheSBlcXVhbCBnaXZlbiBkYXlTdHJpbmcgcGFyYW1ldGVyP1xuXHQgICAgaXMuZGF5ID0gZnVuY3Rpb24ob2JqLCBkYXlTdHJpbmcpIHtcblx0ICAgICAgICByZXR1cm4gaXMuZGF0ZShvYmopICYmIGRheVN0cmluZy50b0xvd2VyQ2FzZSgpID09PSBkYXlzW29iai5nZXREYXkoKV07XG5cdCAgICB9O1xuXHQgICAgLy8gZGF5IG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICBpcy5kYXkuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGVzIG1vbnRoIGVxdWFsIGdpdmVuIG1vbnRoU3RyaW5nIHBhcmFtZXRlcj9cblx0ICAgIGlzLm1vbnRoID0gZnVuY3Rpb24ob2JqLCBtb250aFN0cmluZykge1xuXHQgICAgICAgIHJldHVybiBpcy5kYXRlKG9iaikgJiYgbW9udGhTdHJpbmcudG9Mb3dlckNhc2UoKSA9PT0gbW9udGhzW29iai5nZXRNb250aCgpXTtcblx0ICAgIH07XG5cdCAgICAvLyBtb250aCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgaXMubW9udGguYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGVzIHllYXIgZXF1YWwgZ2l2ZW4geWVhciBwYXJhbWV0ZXI/XG5cdCAgICBpcy55ZWFyID0gZnVuY3Rpb24ob2JqLCB5ZWFyKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBpcy5udW1iZXIoeWVhcikgJiYgeWVhciA9PT0gb2JqLmdldEZ1bGxZZWFyKCk7XG5cdCAgICB9O1xuXHQgICAgLy8geWVhciBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgaXMueWVhci5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgIC8vIGlzIHRoZSBnaXZlbiB5ZWFyIGEgbGVhcCB5ZWFyP1xuXHQgICAgaXMubGVhcFllYXIgPSBmdW5jdGlvbih5ZWFyKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLm51bWJlcih5ZWFyKSAmJiAoKHllYXIgJSA0ID09PSAwICYmIHllYXIgJSAxMDAgIT09IDApIHx8IHllYXIgJSA0MDAgPT09IDApO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGUgd2Vla2VuZD9cblx0ICAgIC8vIDY6IFNhdHVyZGF5LCAwOiBTdW5kYXlcblx0ICAgIGlzLndlZWtlbmQgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgICByZXR1cm4gaXMuZGF0ZShvYmopICYmIChvYmouZ2V0RGF5KCkgPT09IDYgfHwgb2JqLmdldERheSgpID09PSAwKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIHdlZWtkYXk/XG5cdCAgICBpcy53ZWVrZGF5ID0gbm90KGlzLndlZWtlbmQpO1xuXHRcblx0ICAgIC8vIGlzIGRhdGUgd2l0aGluIGdpdmVuIHJhbmdlP1xuXHQgICAgaXMuaW5EYXRlUmFuZ2UgPSBmdW5jdGlvbihvYmosIHN0YXJ0T2JqLCBlbmRPYmopIHtcblx0ICAgICAgICBpZihpcy5ub3QuZGF0ZShvYmopIHx8IGlzLm5vdC5kYXRlKHN0YXJ0T2JqKSB8fCBpcy5ub3QuZGF0ZShlbmRPYmopKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGdpdmVuRGF0ZSA9IG9iai5nZXRUaW1lKCk7XG5cdCAgICAgICAgdmFyIHN0YXJ0ID0gc3RhcnRPYmouZ2V0VGltZSgpO1xuXHQgICAgICAgIHZhciBlbmQgPSBlbmRPYmouZ2V0VGltZSgpO1xuXHQgICAgICAgIHJldHVybiBnaXZlbkRhdGUgPiBzdGFydCAmJiBnaXZlbkRhdGUgPCBlbmQ7XG5cdCAgICB9O1xuXHQgICAgLy8gaW5EYXRlUmFuZ2UgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLmluRGF0ZVJhbmdlLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIGluIGxhc3Qgd2VlayByYW5nZT9cblx0ICAgIGlzLmluTGFzdFdlZWsgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgICByZXR1cm4gaXMuaW5EYXRlUmFuZ2Uob2JqLCBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgLSA3KSksIG5ldyBEYXRlKCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbGFzdCBtb250aCByYW5nZT9cblx0ICAgIGlzLmluTGFzdE1vbnRoID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUobmV3IERhdGUoKS5zZXRNb250aChuZXcgRGF0ZSgpLmdldE1vbnRoKCkgLSAxKSksIG5ldyBEYXRlKCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbGFzdCB5ZWFyIHJhbmdlP1xuXHQgICAgaXMuaW5MYXN0WWVhciA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICAgIHJldHVybiBpcy5pbkRhdGVSYW5nZShvYmosIG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RnVsbFllYXIobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gMSkpLCBuZXcgRGF0ZSgpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIGluIG5leHQgd2VlayByYW5nZT9cblx0ICAgIGlzLmluTmV4dFdlZWsgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgICByZXR1cm4gaXMuaW5EYXRlUmFuZ2Uob2JqLCBuZXcgRGF0ZSgpLCBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbmV4dCBtb250aCByYW5nZT9cblx0ICAgIGlzLmluTmV4dE1vbnRoID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUoKSwgbmV3IERhdGUobmV3IERhdGUoKS5zZXRNb250aChuZXcgRGF0ZSgpLmdldE1vbnRoKCkgKyAxKSkpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbmV4dCB5ZWFyIHJhbmdlP1xuXHQgICAgaXMuaW5OZXh0WWVhciA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICAgIHJldHVybiBpcy5pbkRhdGVSYW5nZShvYmosIG5ldyBEYXRlKCksIG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RnVsbFllYXIobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgMSkpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBkYXRlIGluIHRoZSBwYXJhbWV0ZXIgcXVhcnRlcj9cblx0ICAgIGlzLnF1YXJ0ZXJPZlllYXIgPSBmdW5jdGlvbihvYmosIHF1YXJ0ZXJOdW1iZXIpIHtcblx0ICAgICAgICByZXR1cm4gaXMuZGF0ZShvYmopICYmIGlzLm51bWJlcihxdWFydGVyTnVtYmVyKSAmJiBxdWFydGVyTnVtYmVyID09PSBNYXRoLmZsb29yKChvYmouZ2V0TW9udGgoKSArIDMpIC8gMyk7XG5cdCAgICB9O1xuXHQgICAgLy8gcXVhcnRlck9mWWVhciBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgaXMucXVhcnRlck9mWWVhci5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gZGF0ZSBpbiBkYXlsaWdodCBzYXZpbmcgdGltZT9cblx0ICAgIGlzLmRheUxpZ2h0U2F2aW5nVGltZSA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICAgIHZhciBqYW51YXJ5ID0gbmV3IERhdGUob2JqLmdldEZ1bGxZZWFyKCksIDAsIDEpO1xuXHQgICAgICAgIHZhciBqdWx5ID0gbmV3IERhdGUob2JqLmdldEZ1bGxZZWFyKCksIDYsIDEpO1xuXHQgICAgICAgIHZhciBzdGRUaW1lem9uZU9mZnNldCA9IE1hdGgubWF4KGphbnVhcnkuZ2V0VGltZXpvbmVPZmZzZXQoKSwganVseS5nZXRUaW1lem9uZU9mZnNldCgpKTtcblx0ICAgICAgICByZXR1cm4gb2JqLmdldFRpbWV6b25lT2Zmc2V0KCkgPCBzdGRUaW1lem9uZU9mZnNldDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gRW52aXJvbm1lbnQgY2hlY2tzXG5cdCAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcblx0ICAgIC8vIGNoZWNrIGlmIGxpYnJhcnkgaXMgdXNlZCBhcyBhIE5vZGUuanMgbW9kdWxlXG5cdCAgICBpZih0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXHRcblx0ICAgICAgICAvLyBzdG9yZSBuYXZpZ2F0b3IgcHJvcGVydGllcyB0byB1c2UgbGF0ZXJcblx0ICAgICAgICB2YXIgdXNlckFnZW50ID0gJ25hdmlnYXRvcicgaW4gd2luZG93ICYmICd1c2VyQWdlbnQnIGluIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgfHwgJyc7XG5cdCAgICAgICAgdmFyIHZlbmRvciA9ICduYXZpZ2F0b3InIGluIHdpbmRvdyAmJiAndmVuZG9yJyBpbiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnZlbmRvci50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuXHQgICAgICAgIHZhciBhcHBWZXJzaW9uID0gJ25hdmlnYXRvcicgaW4gd2luZG93ICYmICdhcHBWZXJzaW9uJyBpbiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24udG9Mb3dlckNhc2UoKSB8fCAnJztcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBicm93c2VyIGNocm9tZT9cblx0ICAgICAgICBpcy5jaHJvbWUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIC9jaHJvbWV8Y2hyb21pdW0vaS50ZXN0KHVzZXJBZ2VudCkgJiYgL2dvb2dsZSBpbmMvLnRlc3QodmVuZG9yKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIGNocm9tZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLmNocm9tZS5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgICAgICAvLyBpcyBjdXJyZW50IGJyb3dzZXIgZmlyZWZveD9cblx0ICAgICAgICBpcy5maXJlZm94ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAvZmlyZWZveC9pLnRlc3QodXNlckFnZW50KTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIGZpcmVmb3ggbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy5maXJlZm94LmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBlZGdlP1xuXHQgICAgICAgIGlzLmVkZ2UgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIC9lZGdlL2kudGVzdCh1c2VyQWdlbnQpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gZWRnZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLmVkZ2UuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBicm93c2VyIGludGVybmV0IGV4cGxvcmVyP1xuXHQgICAgICAgIC8vIHBhcmFtZXRlciBpcyBvcHRpb25hbFxuXHQgICAgICAgIGlzLmllID0gZnVuY3Rpb24odmVyc2lvbikge1xuXHQgICAgICAgICAgICBpZighdmVyc2lvbikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIC9tc2llL2kudGVzdCh1c2VyQWdlbnQpIHx8IFwiQWN0aXZlWE9iamVjdFwiIGluIHdpbmRvdztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZih2ZXJzaW9uID49IDExKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gXCJBY3RpdmVYT2JqZWN0XCIgaW4gd2luZG93O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCdtc2llICcgKyB2ZXJzaW9uKS50ZXN0KHVzZXJBZ2VudCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyBpZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLmllLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBvcGVyYT9cblx0ICAgICAgICBpcy5vcGVyYSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gL15PcGVyYVxcLy8udGVzdCh1c2VyQWdlbnQpIHx8IC8vIE9wZXJhIDEyIGFuZCBvbGRlciB2ZXJzaW9uc1xuXHQgICAgICAgICAgICAgICAgL1xceDIwT1BSXFwvLy50ZXN0KHVzZXJBZ2VudCk7IC8vIE9wZXJhIDE1K1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gb3BlcmEgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy5vcGVyYS5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgICAgICAvLyBpcyBjdXJyZW50IGJyb3dzZXIgc2FmYXJpP1xuXHQgICAgICAgIGlzLnNhZmFyaSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gL3NhZmFyaS9pLnRlc3QodXNlckFnZW50KSAmJiAvYXBwbGUgY29tcHV0ZXIvaS50ZXN0KHZlbmRvcik7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyBzYWZhcmkgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy5zYWZhcmkuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgaW9zP1xuXHQgICAgICAgIGlzLmlvcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gaXMuaXBob25lKCkgfHwgaXMuaXBhZCgpIHx8IGlzLmlwb2QoKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIGlvcyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLmlvcy5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgICAgICAvLyBpcyBjdXJyZW50IGRldmljZSBpcGhvbmU/XG5cdCAgICAgICAgaXMuaXBob25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAvaXBob25lL2kudGVzdCh1c2VyQWdlbnQpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gaXBob25lIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMuaXBob25lLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIGlwYWQ/XG5cdCAgICAgICAgaXMuaXBhZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gL2lwYWQvaS50ZXN0KHVzZXJBZ2VudCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyBpcGFkIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMuaXBhZC5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgICAgICAvLyBpcyBjdXJyZW50IGRldmljZSBpcG9kP1xuXHQgICAgICAgIGlzLmlwb2QgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIC9pcG9kL2kudGVzdCh1c2VyQWdlbnQpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gaXBvZCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLmlwb2QuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgYW5kcm9pZD9cblx0ICAgICAgICBpcy5hbmRyb2lkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAvYW5kcm9pZC9pLnRlc3QodXNlckFnZW50KTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIGFuZHJvaWQgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy5hbmRyb2lkLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIGFuZHJvaWQgcGhvbmU/XG5cdCAgICAgICAgaXMuYW5kcm9pZFBob25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAvYW5kcm9pZC9pLnRlc3QodXNlckFnZW50KSAmJiAvbW9iaWxlL2kudGVzdCh1c2VyQWdlbnQpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gYW5kcm9pZFBob25lIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMuYW5kcm9pZFBob25lLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIGFuZHJvaWQgdGFibGV0P1xuXHQgICAgICAgIGlzLmFuZHJvaWRUYWJsZXQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIC9hbmRyb2lkL2kudGVzdCh1c2VyQWdlbnQpICYmICEvbW9iaWxlL2kudGVzdCh1c2VyQWdlbnQpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gYW5kcm9pZFRhYmxldCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLmFuZHJvaWRUYWJsZXQuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgYmxhY2tiZXJyeT9cblx0ICAgICAgICBpcy5ibGFja2JlcnJ5ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodXNlckFnZW50KSB8fCAvQkIxMC9pLnRlc3QodXNlckFnZW50KTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIGJsYWNrYmVycnkgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy5ibGFja2JlcnJ5LmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIGRlc2t0b3A/XG5cdCAgICAgICAgaXMuZGVza3RvcCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gaXMubm90Lm1vYmlsZSgpICYmIGlzLm5vdC50YWJsZXQoKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIGRlc2t0b3AgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy5kZXNrdG9wLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgb3BlcmF0aW5nIHN5c3RlbSBsaW51eD9cblx0ICAgICAgICBpcy5saW51eCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gL2xpbnV4L2kudGVzdChhcHBWZXJzaW9uKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIGxpbnV4IG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMubGludXguYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBvcGVyYXRpbmcgc3lzdGVtIG1hYz9cblx0ICAgICAgICBpcy5tYWMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIC9tYWMvaS50ZXN0KGFwcFZlcnNpb24pO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gbWFjIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMubWFjLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgb3BlcmF0aW5nIHN5c3RlbSB3aW5kb3dzP1xuXHQgICAgICAgIGlzLndpbmRvd3MgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIC93aW4vaS50ZXN0KGFwcFZlcnNpb24pO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gd2luZG93cyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLndpbmRvd3MuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2Ugd2luZG93cyBwaG9uZT9cblx0ICAgICAgICBpcy53aW5kb3dzUGhvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlzLndpbmRvd3MoKSAmJiAvcGhvbmUvaS50ZXN0KHVzZXJBZ2VudCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyB3aW5kb3dzUGhvbmUgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy53aW5kb3dzUGhvbmUuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2Ugd2luZG93cyB0YWJsZXQ/XG5cdCAgICAgICAgaXMud2luZG93c1RhYmxldCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gaXMud2luZG93cygpICYmIGlzLm5vdC53aW5kb3dzUGhvbmUoKSAmJiAvdG91Y2gvaS50ZXN0KHVzZXJBZ2VudCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyB3aW5kb3dzVGFibGV0IG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMud2luZG93c1RhYmxldC5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgICAgICAvLyBpcyBjdXJyZW50IGRldmljZSBtb2JpbGU/XG5cdCAgICAgICAgaXMubW9iaWxlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBpcy5pcGhvbmUoKSB8fCBpcy5pcG9kKCkgfHwgaXMuYW5kcm9pZFBob25lKCkgfHwgaXMuYmxhY2tiZXJyeSgpIHx8IGlzLndpbmRvd3NQaG9uZSgpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gbW9iaWxlIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMubW9iaWxlLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIHRhYmxldD9cblx0ICAgICAgICBpcy50YWJsZXQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlzLmlwYWQoKSB8fCBpcy5hbmRyb2lkVGFibGV0KCkgfHwgaXMud2luZG93c1RhYmxldCgpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gdGFibGV0IG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMudGFibGV0LmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgc3RhdGUgb25saW5lP1xuXHQgICAgICAgIGlzLm9ubGluZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm9uTGluZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIG9ubGluZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgICAgIGlzLm9ubGluZS5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgICAgICAvLyBpcyBjdXJyZW50IHN0YXRlIG9mZmxpbmU/XG5cdCAgICAgICAgaXMub2ZmbGluZSA9IG5vdChpcy5vbmxpbmUpO1xuXHQgICAgICAgIC8vIG9mZmxpbmUgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgICAgICBpcy5vZmZsaW5lLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIHN1cHBvcnRzIHRvdWNoP1xuXHQgICAgICAgIGlzLnRvdWNoRGV2aWNlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwnRG9jdW1lbnRUb3VjaCcgaW4gd2luZG93ICYmIGRvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaDtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIHRvdWNoRGV2aWNlIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG5cdCAgICAgICAgaXMudG91Y2hEZXZpY2UuYXBpID0gWydub3QnXTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBPYmplY3QgY2hlY2tzXG5cdCAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcblx0ICAgIC8vIGhhcyBhIGdpdmVuIG9iamVjdCBnb3QgcGFyYW1ldGVyaXplZCBjb3VudCBwcm9wZXJ0eT9cblx0ICAgIGlzLnByb3BlcnR5Q291bnQgPSBmdW5jdGlvbihvYmosIGNvdW50KSB7XG5cdCAgICAgICAgaWYoIWlzLm9iamVjdChvYmopIHx8ICFpcy5udW1iZXIoY291bnQpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYoT2JqZWN0LmtleXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSBjb3VudDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBbXSxcblx0ICAgICAgICAgICAgcHJvcGVydHk7XG5cdCAgICAgICAgZm9yKHByb3BlcnR5IGluIG9iaikge1xuXHQgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3BlcnR5KSkge1xuXHQgICAgICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKHByb3BlcnR5KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gcHJvcGVydGllcy5sZW5ndGggPT09IGNvdW50O1xuXHQgICAgfTtcblx0ICAgIC8vIHByb3BlcnR5Q291bnQgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcblx0ICAgIGlzLnByb3BlcnR5Q291bnQuYXBpID0gWydub3QnXTtcblx0XG5cdCAgICAvLyBpcyBnaXZlbiBvYmplY3QgaGFzIHBhcmFtZXRlcml6ZWQgcHJvcGVydHk/XG5cdCAgICBpcy5wcm9wZXJ0eURlZmluZWQgPSBmdW5jdGlvbihvYmosIHByb3BlcnR5KSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLm9iamVjdChvYmopICYmIGlzLnN0cmluZyhwcm9wZXJ0eSkgJiYgcHJvcGVydHkgaW4gb2JqO1xuXHQgICAgfTtcblx0ICAgIC8vIHByb3BlcnR5RGVmaW5lZCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgaXMucHJvcGVydHlEZWZpbmVkLmFwaSA9IFsnbm90J107XG5cdFxuXHQgICAgLy8gaXMgYSBnaXZlbiBvYmplY3Qgd2luZG93P1xuXHQgICAgLy8gc2V0SW50ZXJ2YWwgbWV0aG9kIGlzIG9ubHkgYXZhaWxhYmxlIGZvciB3aW5kb3cgb2JqZWN0XG5cdCAgICBpcy53aW5kb3dPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgJ3NldEludGVydmFsJyBpbiBvYmo7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gb2JqZWN0IGEgRE9NIG5vZGU/XG5cdCAgICBpcy5kb21Ob2RlID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzLm9iamVjdChvYmopICYmIG9iai5ub2RlVHlwZSA+IDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEFycmF5IGNoZWNrc1xuXHQgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XG5cdCAgICAvLyBpcyBhIGdpdmVuIGl0ZW0gaW4gYW4gYXJyYXk/XG5cdCAgICBpcy5pbkFycmF5ID0gZnVuY3Rpb24odmFsLCBhcnIpe1xuXHQgICAgICAgIGlmKGlzLm5vdC5hcnJheShhcnIpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBpZiAoYXJyW2ldID09PSB2YWwpIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgLy8gaW5BcnJheSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuXHQgICAgaXMuaW5BcnJheS5hcGkgPSBbJ25vdCddO1xuXHRcblx0ICAgIC8vIGlzIGEgZ2l2ZW4gYXJyYXkgc29ydGVkP1xuXHQgICAgaXMuc29ydGVkID0gZnVuY3Rpb24oYXJyKSB7XG5cdCAgICAgICAgaWYoaXMubm90LmFycmF5KGFycikpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlmKGFycltpXSA+IGFycltpICsgMV0pIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEFQSVxuXHQgICAgLy8gU2V0ICdub3QnLCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlcyB0byBtZXRob2RzIGJhc2VkIG9uIHRoZWlyIGFwaSBwcm9wZXJ0eVxuXHQgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XG5cdCAgICBmdW5jdGlvbiBzZXRJbnRlcmZhY2VzKCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gaXM7XG5cdCAgICAgICAgZm9yKHZhciBvcHRpb24gaW4gb3B0aW9ucykge1xuXHQgICAgICAgICAgICBpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIG9wdGlvbikgJiYgaXMuZnVuY3Rpb24ob3B0aW9uc1tvcHRpb25dKSkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGludGVyZmFjZXMgPSBvcHRpb25zW29wdGlvbl0uYXBpIHx8IFsnbm90JywgJ2FsbCcsICdhbnknXTtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50ZXJmYWNlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmKGludGVyZmFjZXNbaV0gPT09ICdub3QnKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlzLm5vdFtvcHRpb25dID0gbm90KGlzW29wdGlvbl0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBpZihpbnRlcmZhY2VzW2ldID09PSAnYWxsJykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpcy5hbGxbb3B0aW9uXSA9IGFsbChpc1tvcHRpb25dKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgaWYoaW50ZXJmYWNlc1tpXSA9PT0gJ2FueScpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaXMuYW55W29wdGlvbl0gPSBhbnkoaXNbb3B0aW9uXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgc2V0SW50ZXJmYWNlcygpO1xuXHRcblx0ICAgIC8vIENvbmZpZ3VyYXRpb24gbWV0aG9kc1xuXHQgICAgLy8gSW50ZW50aW9uYWxseSBhZGRlZCBhZnRlciBzZXRJbnRlcmZhY2VzIGZ1bmN0aW9uXG5cdCAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcblx0ICAgIC8vIHNldCBvcHRpb25hbCByZWdleHBzIHRvIG1ldGhvZHMgaWYgeW91IHRoaW5rIHRoZXkgc3Vja1xuXHQgICAgaXMuc2V0UmVnZXhwID0gZnVuY3Rpb24ocmVnZXhwLCByZWdleHBOYW1lKSB7XG5cdCAgICAgICAgZm9yKHZhciByIGluIHJlZ2V4cHMpIHtcblx0ICAgICAgICAgICAgaWYoaGFzT3duUHJvcGVydHkuY2FsbChyZWdleHBzLCByKSAmJiAocmVnZXhwTmFtZSA9PT0gcikpIHtcblx0ICAgICAgICAgICAgICAgIHJlZ2V4cHNbcl0gPSByZWdleHA7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGNoYW5nZSBuYW1lc3BhY2Ugb2YgbGlicmFyeSB0byBwcmV2ZW50IG5hbWUgY29sbGlzaW9uc1xuXHQgICAgLy8gdmFyIHByZWZlcnJlZE5hbWUgPSBpcy5zZXROYW1lc3BhY2UoKTtcblx0ICAgIC8vIHByZWZlcnJlZE5hbWUub2RkKDMpO1xuXHQgICAgLy8gPT4gdHJ1ZVxuXHQgICAgaXMuc2V0TmFtZXNwYWNlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcm9vdC5pcyA9IHByZXZpb3VzSXM7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBpcztcblx0fSkpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9KSxcbi8qIDQxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdHZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHR2YXIgaXNBcnJheSA9IGZ1bmN0aW9uIGlzQXJyYXkoYXJyKSB7XG5cdFx0aWYgKHR5cGVvZiBBcnJheS5pc0FycmF5ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIHRvU3RyLmNhbGwoYXJyKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fTtcblx0XG5cdHZhciBpc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0XHRpZiAoIW9iaiB8fCB0b1N0ci5jYWxsKG9iaikgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHR2YXIgaGFzT3duQ29uc3RydWN0b3IgPSBoYXNPd24uY2FsbChvYmosICdjb25zdHJ1Y3RvcicpO1xuXHRcdHZhciBoYXNJc1Byb3RvdHlwZU9mID0gb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgJiYgaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgJ2lzUHJvdG90eXBlT2YnKTtcblx0XHQvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0XG5cdFx0aWYgKG9iai5jb25zdHJ1Y3RvciAmJiAhaGFzT3duQ29uc3RydWN0b3IgJiYgIWhhc0lzUHJvdG90eXBlT2YpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdC8vIE93biBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhdGVkIGZpcnN0bHksIHNvIHRvIHNwZWVkIHVwLFxuXHRcdC8vIGlmIGxhc3Qgb25lIGlzIG93biwgdGhlbiBhbGwgcHJvcGVydGllcyBhcmUgb3duLlxuXHRcdHZhciBrZXk7XG5cdFx0Zm9yIChrZXkgaW4gb2JqKSB7IC8qKi8gfVxuXHRcblx0XHRyZXR1cm4gdHlwZW9mIGtleSA9PT0gJ3VuZGVmaW5lZCcgfHwgaGFzT3duLmNhbGwob2JqLCBrZXkpO1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBleHRlbmQoKSB7XG5cdFx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lO1xuXHRcdHZhciB0YXJnZXQgPSBhcmd1bWVudHNbMF07XG5cdFx0dmFyIGkgPSAxO1xuXHRcdHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuXHRcdHZhciBkZWVwID0gZmFsc2U7XG5cdFxuXHRcdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0XHRpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRkZWVwID0gdGFyZ2V0O1xuXHRcdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzFdIHx8IHt9O1xuXHRcdFx0Ly8gc2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdFx0aSA9IDI7XG5cdFx0fVxuXHRcdGlmICh0YXJnZXQgPT0gbnVsbCB8fCAodHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldCAhPT0gJ2Z1bmN0aW9uJykpIHtcblx0XHRcdHRhcmdldCA9IHt9O1xuXHRcdH1cblx0XG5cdFx0Zm9yICg7IGkgPCBsZW5ndGg7ICsraSkge1xuXHRcdFx0b3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdGlmIChvcHRpb25zICE9IG51bGwpIHtcblx0XHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0XHRmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuXHRcdFx0XHRcdHNyYyA9IHRhcmdldFtuYW1lXTtcblx0XHRcdFx0XHRjb3B5ID0gb3B0aW9uc1tuYW1lXTtcblx0XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuXHRcdFx0XHRcdGlmICh0YXJnZXQgIT09IGNvcHkpIHtcblx0XHRcdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRcdFx0aWYgKGRlZXAgJiYgY29weSAmJiAoaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBpc0FycmF5KGNvcHkpKSkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvcHlJc0FycmF5KSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtuYW1lXSA9IGV4dGVuZChkZWVwLCBjbG9uZSwgY29weSk7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgY29weSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0W25hbWVdID0gY29weTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdFx0cmV0dXJuIHRhcmdldDtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikge3ZhciBjbG9uZSA9IChmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gX2luc3RhbmNlb2Yob2JqLCB0eXBlKSB7XG5cdCAgcmV0dXJuIHR5cGUgIT0gbnVsbCAmJiBvYmogaW5zdGFuY2VvZiB0eXBlO1xuXHR9XG5cdFxuXHR2YXIgbmF0aXZlTWFwO1xuXHR0cnkge1xuXHQgIG5hdGl2ZU1hcCA9IE1hcDtcblx0fSBjYXRjaChfKSB7XG5cdCAgLy8gbWF5YmUgYSByZWZlcmVuY2UgZXJyb3IgYmVjYXVzZSBubyBgTWFwYC4gR2l2ZSBpdCBhIGR1bW15IHZhbHVlIHRoYXQgbm9cblx0ICAvLyB2YWx1ZSB3aWxsIGV2ZXIgYmUgYW4gaW5zdGFuY2VvZi5cblx0ICBuYXRpdmVNYXAgPSBmdW5jdGlvbigpIHt9O1xuXHR9XG5cdFxuXHR2YXIgbmF0aXZlU2V0O1xuXHR0cnkge1xuXHQgIG5hdGl2ZVNldCA9IFNldDtcblx0fSBjYXRjaChfKSB7XG5cdCAgbmF0aXZlU2V0ID0gZnVuY3Rpb24oKSB7fTtcblx0fVxuXHRcblx0dmFyIG5hdGl2ZVByb21pc2U7XG5cdHRyeSB7XG5cdCAgbmF0aXZlUHJvbWlzZSA9IFByb21pc2U7XG5cdH0gY2F0Y2goXykge1xuXHQgIG5hdGl2ZVByb21pc2UgPSBmdW5jdGlvbigpIHt9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2xvbmVzIChjb3BpZXMpIGFuIE9iamVjdCB1c2luZyBkZWVwIGNvcHlpbmcuXG5cdCAqXG5cdCAqIFRoaXMgZnVuY3Rpb24gc3VwcG9ydHMgY2lyY3VsYXIgcmVmZXJlbmNlcyBieSBkZWZhdWx0LCBidXQgaWYgeW91IGFyZSBjZXJ0YWluXG5cdCAqIHRoZXJlIGFyZSBubyBjaXJjdWxhciByZWZlcmVuY2VzIGluIHlvdXIgb2JqZWN0LCB5b3UgY2FuIHNhdmUgc29tZSBDUFUgdGltZVxuXHQgKiBieSBjYWxsaW5nIGNsb25lKG9iaiwgZmFsc2UpLlxuXHQgKlxuXHQgKiBDYXV0aW9uOiBpZiBgY2lyY3VsYXJgIGlzIGZhbHNlIGFuZCBgcGFyZW50YCBjb250YWlucyBjaXJjdWxhciByZWZlcmVuY2VzLFxuXHQgKiB5b3VyIHByb2dyYW0gbWF5IGVudGVyIGFuIGluZmluaXRlIGxvb3AgYW5kIGNyYXNoLlxuXHQgKlxuXHQgKiBAcGFyYW0gYHBhcmVudGAgLSB0aGUgb2JqZWN0IHRvIGJlIGNsb25lZFxuXHQgKiBAcGFyYW0gYGNpcmN1bGFyYCAtIHNldCB0byB0cnVlIGlmIHRoZSBvYmplY3QgdG8gYmUgY2xvbmVkIG1heSBjb250YWluXG5cdCAqICAgIGNpcmN1bGFyIHJlZmVyZW5jZXMuIChvcHRpb25hbCAtIHRydWUgYnkgZGVmYXVsdClcblx0ICogQHBhcmFtIGBkZXB0aGAgLSBzZXQgdG8gYSBudW1iZXIgaWYgdGhlIG9iamVjdCBpcyBvbmx5IHRvIGJlIGNsb25lZCB0b1xuXHQgKiAgICBhIHBhcnRpY3VsYXIgZGVwdGguIChvcHRpb25hbCAtIGRlZmF1bHRzIHRvIEluZmluaXR5KVxuXHQgKiBAcGFyYW0gYHByb3RvdHlwZWAgLSBzZXRzIHRoZSBwcm90b3R5cGUgdG8gYmUgdXNlZCB3aGVuIGNsb25pbmcgYW4gb2JqZWN0LlxuXHQgKiAgICAob3B0aW9uYWwgLSBkZWZhdWx0cyB0byBwYXJlbnQgcHJvdG90eXBlKS5cblx0ICogQHBhcmFtIGBpbmNsdWRlTm9uRW51bWVyYWJsZWAgLSBzZXQgdG8gdHJ1ZSBpZiB0aGUgbm9uLWVudW1lcmFibGUgcHJvcGVydGllc1xuXHQgKiAgICBzaG91bGQgYmUgY2xvbmVkIGFzIHdlbGwuIE5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMgb24gdGhlIHByb3RvdHlwZVxuXHQgKiAgICBjaGFpbiB3aWxsIGJlIGlnbm9yZWQuIChvcHRpb25hbCAtIGZhbHNlIGJ5IGRlZmF1bHQpXG5cdCovXG5cdGZ1bmN0aW9uIGNsb25lKHBhcmVudCwgY2lyY3VsYXIsIGRlcHRoLCBwcm90b3R5cGUsIGluY2x1ZGVOb25FbnVtZXJhYmxlKSB7XG5cdCAgaWYgKHR5cGVvZiBjaXJjdWxhciA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGRlcHRoID0gY2lyY3VsYXIuZGVwdGg7XG5cdCAgICBwcm90b3R5cGUgPSBjaXJjdWxhci5wcm90b3R5cGU7XG5cdCAgICBpbmNsdWRlTm9uRW51bWVyYWJsZSA9IGNpcmN1bGFyLmluY2x1ZGVOb25FbnVtZXJhYmxlO1xuXHQgICAgY2lyY3VsYXIgPSBjaXJjdWxhci5jaXJjdWxhcjtcblx0ICB9XG5cdCAgLy8gbWFpbnRhaW4gdHdvIGFycmF5cyBmb3IgY2lyY3VsYXIgcmVmZXJlbmNlcywgd2hlcmUgY29ycmVzcG9uZGluZyBwYXJlbnRzXG5cdCAgLy8gYW5kIGNoaWxkcmVuIGhhdmUgdGhlIHNhbWUgaW5kZXhcblx0ICB2YXIgYWxsUGFyZW50cyA9IFtdO1xuXHQgIHZhciBhbGxDaGlsZHJlbiA9IFtdO1xuXHRcblx0ICB2YXIgdXNlQnVmZmVyID0gdHlwZW9mIEJ1ZmZlciAhPSAndW5kZWZpbmVkJztcblx0XG5cdCAgaWYgKHR5cGVvZiBjaXJjdWxhciA9PSAndW5kZWZpbmVkJylcblx0ICAgIGNpcmN1bGFyID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHR5cGVvZiBkZXB0aCA9PSAndW5kZWZpbmVkJylcblx0ICAgIGRlcHRoID0gSW5maW5pdHk7XG5cdFxuXHQgIC8vIHJlY3Vyc2UgdGhpcyBmdW5jdGlvbiBzbyB3ZSBkb24ndCByZXNldCBhbGxQYXJlbnRzIGFuZCBhbGxDaGlsZHJlblxuXHQgIGZ1bmN0aW9uIF9jbG9uZShwYXJlbnQsIGRlcHRoKSB7XG5cdCAgICAvLyBjbG9uaW5nIG51bGwgYWx3YXlzIHJldHVybnMgbnVsbFxuXHQgICAgaWYgKHBhcmVudCA9PT0gbnVsbClcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdFxuXHQgICAgaWYgKGRlcHRoID09PSAwKVxuXHQgICAgICByZXR1cm4gcGFyZW50O1xuXHRcblx0ICAgIHZhciBjaGlsZDtcblx0ICAgIHZhciBwcm90bztcblx0ICAgIGlmICh0eXBlb2YgcGFyZW50ICE9ICdvYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBwYXJlbnQ7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKF9pbnN0YW5jZW9mKHBhcmVudCwgbmF0aXZlTWFwKSkge1xuXHQgICAgICBjaGlsZCA9IG5ldyBuYXRpdmVNYXAoKTtcblx0ICAgIH0gZWxzZSBpZiAoX2luc3RhbmNlb2YocGFyZW50LCBuYXRpdmVTZXQpKSB7XG5cdCAgICAgIGNoaWxkID0gbmV3IG5hdGl2ZVNldCgpO1xuXHQgICAgfSBlbHNlIGlmIChfaW5zdGFuY2VvZihwYXJlbnQsIG5hdGl2ZVByb21pc2UpKSB7XG5cdCAgICAgIGNoaWxkID0gbmV3IG5hdGl2ZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIHBhcmVudC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgICByZXNvbHZlKF9jbG9uZSh2YWx1ZSwgZGVwdGggLSAxKSk7XG5cdCAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG5cdCAgICAgICAgICByZWplY3QoX2Nsb25lKGVyciwgZGVwdGggLSAxKSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGlmIChjbG9uZS5fX2lzQXJyYXkocGFyZW50KSkge1xuXHQgICAgICBjaGlsZCA9IFtdO1xuXHQgICAgfSBlbHNlIGlmIChjbG9uZS5fX2lzUmVnRXhwKHBhcmVudCkpIHtcblx0ICAgICAgY2hpbGQgPSBuZXcgUmVnRXhwKHBhcmVudC5zb3VyY2UsIF9fZ2V0UmVnRXhwRmxhZ3MocGFyZW50KSk7XG5cdCAgICAgIGlmIChwYXJlbnQubGFzdEluZGV4KSBjaGlsZC5sYXN0SW5kZXggPSBwYXJlbnQubGFzdEluZGV4O1xuXHQgICAgfSBlbHNlIGlmIChjbG9uZS5fX2lzRGF0ZShwYXJlbnQpKSB7XG5cdCAgICAgIGNoaWxkID0gbmV3IERhdGUocGFyZW50LmdldFRpbWUoKSk7XG5cdCAgICB9IGVsc2UgaWYgKHVzZUJ1ZmZlciAmJiBCdWZmZXIuaXNCdWZmZXIocGFyZW50KSkge1xuXHQgICAgICBjaGlsZCA9IG5ldyBCdWZmZXIocGFyZW50Lmxlbmd0aCk7XG5cdCAgICAgIHBhcmVudC5jb3B5KGNoaWxkKTtcblx0ICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgfSBlbHNlIGlmIChfaW5zdGFuY2VvZihwYXJlbnQsIEVycm9yKSkge1xuXHQgICAgICBjaGlsZCA9IE9iamVjdC5jcmVhdGUocGFyZW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmICh0eXBlb2YgcHJvdG90eXBlID09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGFyZW50KTtcblx0ICAgICAgICBjaGlsZCA9IE9iamVjdC5jcmVhdGUocHJvdG8pO1xuXHQgICAgICB9XG5cdCAgICAgIGVsc2Uge1xuXHQgICAgICAgIGNoaWxkID0gT2JqZWN0LmNyZWF0ZShwcm90b3R5cGUpO1xuXHQgICAgICAgIHByb3RvID0gcHJvdG90eXBlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGNpcmN1bGFyKSB7XG5cdCAgICAgIHZhciBpbmRleCA9IGFsbFBhcmVudHMuaW5kZXhPZihwYXJlbnQpO1xuXHRcblx0ICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG5cdCAgICAgICAgcmV0dXJuIGFsbENoaWxkcmVuW2luZGV4XTtcblx0ICAgICAgfVxuXHQgICAgICBhbGxQYXJlbnRzLnB1c2gocGFyZW50KTtcblx0ICAgICAgYWxsQ2hpbGRyZW4ucHVzaChjaGlsZCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKF9pbnN0YW5jZW9mKHBhcmVudCwgbmF0aXZlTWFwKSkge1xuXHQgICAgICBwYXJlbnQuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgdmFyIGtleUNoaWxkID0gX2Nsb25lKGtleSwgZGVwdGggLSAxKTtcblx0ICAgICAgICB2YXIgdmFsdWVDaGlsZCA9IF9jbG9uZSh2YWx1ZSwgZGVwdGggLSAxKTtcblx0ICAgICAgICBjaGlsZC5zZXQoa2V5Q2hpbGQsIHZhbHVlQ2hpbGQpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIGlmIChfaW5zdGFuY2VvZihwYXJlbnQsIG5hdGl2ZVNldCkpIHtcblx0ICAgICAgcGFyZW50LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICB2YXIgZW50cnlDaGlsZCA9IF9jbG9uZSh2YWx1ZSwgZGVwdGggLSAxKTtcblx0ICAgICAgICBjaGlsZC5hZGQoZW50cnlDaGlsZCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGZvciAodmFyIGkgaW4gcGFyZW50KSB7XG5cdCAgICAgIHZhciBhdHRycztcblx0ICAgICAgaWYgKHByb3RvKSB7XG5cdCAgICAgICAgYXR0cnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGF0dHJzICYmIGF0dHJzLnNldCA9PSBudWxsKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRbaV0gPSBfY2xvbmUocGFyZW50W2ldLCBkZXB0aCAtIDEpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG5cdCAgICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhwYXJlbnQpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAvLyBEb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IGNsb25pbmcgYSBzeW1ib2wgYmVjYXVzZSBpdCBpcyBhIHByaW1pdGl2ZSxcblx0ICAgICAgICAvLyBsaWtlIGEgbnVtYmVyIG9yIHN0cmluZy5cblx0ICAgICAgICB2YXIgc3ltYm9sID0gc3ltYm9sc1tpXTtcblx0ICAgICAgICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocGFyZW50LCBzeW1ib2wpO1xuXHQgICAgICAgIGlmIChkZXNjcmlwdG9yICYmICFkZXNjcmlwdG9yLmVudW1lcmFibGUgJiYgIWluY2x1ZGVOb25FbnVtZXJhYmxlKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2hpbGRbc3ltYm9sXSA9IF9jbG9uZShwYXJlbnRbc3ltYm9sXSwgZGVwdGggLSAxKTtcblx0ICAgICAgICBpZiAoIWRlc2NyaXB0b3IuZW51bWVyYWJsZSkge1xuXHQgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoaWxkLCBzeW1ib2wsIHtcblx0ICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2Vcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChpbmNsdWRlTm9uRW51bWVyYWJsZSkge1xuXHQgICAgICB2YXIgYWxsUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHBhcmVudCk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsUHJvcGVydHlOYW1lcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBhbGxQcm9wZXJ0eU5hbWVzW2ldO1xuXHQgICAgICAgIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwYXJlbnQsIHByb3BlcnR5TmFtZSk7XG5cdCAgICAgICAgaWYgKGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5lbnVtZXJhYmxlKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2hpbGRbcHJvcGVydHlOYW1lXSA9IF9jbG9uZShwYXJlbnRbcHJvcGVydHlOYW1lXSwgZGVwdGggLSAxKTtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2hpbGQsIHByb3BlcnR5TmFtZSwge1xuXHQgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBjaGlsZDtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBfY2xvbmUocGFyZW50LCBkZXB0aCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgZmxhdCBjbG9uZSB1c2luZyBwcm90b3R5cGUsIGFjY2VwdHMgb25seSBvYmplY3RzLCB1c2VmdWxsIGZvciBwcm9wZXJ0eVxuXHQgKiBvdmVycmlkZSBvbiBGTEFUIGNvbmZpZ3VyYXRpb24gb2JqZWN0IChubyBuZXN0ZWQgcHJvcHMpLlxuXHQgKlxuXHQgKiBVU0UgV0lUSCBDQVVUSU9OISBUaGlzIG1heSBub3QgYmVoYXZlIGFzIHlvdSB3aXNoIGlmIHlvdSBkbyBub3Qga25vdyBob3cgdGhpc1xuXHQgKiB3b3Jrcy5cblx0ICovXG5cdGNsb25lLmNsb25lUHJvdG90eXBlID0gZnVuY3Rpb24gY2xvbmVQcm90b3R5cGUocGFyZW50KSB7XG5cdCAgaWYgKHBhcmVudCA9PT0gbnVsbClcblx0ICAgIHJldHVybiBudWxsO1xuXHRcblx0ICB2YXIgYyA9IGZ1bmN0aW9uICgpIHt9O1xuXHQgIGMucHJvdG90eXBlID0gcGFyZW50O1xuXHQgIHJldHVybiBuZXcgYygpO1xuXHR9O1xuXHRcblx0Ly8gcHJpdmF0ZSB1dGlsaXR5IGZ1bmN0aW9uc1xuXHRcblx0ZnVuY3Rpb24gX19vYmpUb1N0cihvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXHRjbG9uZS5fX29ialRvU3RyID0gX19vYmpUb1N0cjtcblx0XG5cdGZ1bmN0aW9uIF9faXNEYXRlKG8pIHtcblx0ICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIF9fb2JqVG9TdHIobykgPT09ICdbb2JqZWN0IERhdGVdJztcblx0fVxuXHRjbG9uZS5fX2lzRGF0ZSA9IF9faXNEYXRlO1xuXHRcblx0ZnVuY3Rpb24gX19pc0FycmF5KG8pIHtcblx0ICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIF9fb2JqVG9TdHIobykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH1cblx0Y2xvbmUuX19pc0FycmF5ID0gX19pc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gX19pc1JlZ0V4cChvKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiBfX29ialRvU3RyKG8pID09PSAnW29iamVjdCBSZWdFeHBdJztcblx0fVxuXHRjbG9uZS5fX2lzUmVnRXhwID0gX19pc1JlZ0V4cDtcblx0XG5cdGZ1bmN0aW9uIF9fZ2V0UmVnRXhwRmxhZ3MocmUpIHtcblx0ICB2YXIgZmxhZ3MgPSAnJztcblx0ICBpZiAocmUuZ2xvYmFsKSBmbGFncyArPSAnZyc7XG5cdCAgaWYgKHJlLmlnbm9yZUNhc2UpIGZsYWdzICs9ICdpJztcblx0ICBpZiAocmUubXVsdGlsaW5lKSBmbGFncyArPSAnbSc7XG5cdCAgcmV0dXJuIGZsYWdzO1xuXHR9XG5cdGNsb25lLl9fZ2V0UmVnRXhwRmxhZ3MgPSBfX2dldFJlZ0V4cEZsYWdzO1xuXHRcblx0cmV0dXJuIGNsb25lO1xuXHR9KSgpO1xuXHRcblx0aWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBjbG9uZTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNDMpLkJ1ZmZlcikpXG5cbi8qKiovIH0pLFxuLyogNDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7LyohXG5cdCAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuXHQgKlxuXHQgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cblx0ICogQGxpY2Vuc2UgIE1JVFxuXHQgKi9cblx0LyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0XG5cdCd1c2Ugc3RyaWN0J1xuXHRcblx0dmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpXG5cdHZhciBpZWVlNzU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSlcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHRcblx0ZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcblx0ZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuXHRleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblx0XG5cdC8qKlxuXHQgKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuXHQgKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuXHQgKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG5cdCAqXG5cdCAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcblx0ICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuXHQgKlxuXHQgKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG5cdCAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuXHQgKlxuXHQgKiBOb3RlOlxuXHQgKlxuXHQgKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuXHQgKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG5cdCAqXG5cdCAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuXHQgKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cdFxuXHQgKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuXHQgKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cblx0ICovXG5cdEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuXHQgID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblx0XG5cdC8qXG5cdCAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cblx0ICovXG5cdGV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXHRcblx0ZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcblx0ICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuXHQgICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcblx0ICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuXHQgICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcblx0ICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICAgID8gMHg3ZmZmZmZmZlxuXHQgICAgOiAweDNmZmZmZmZmXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7XG5cdCAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcblx0ICB9XG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2Vcblx0ICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG5cdCAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuXHQgICAgaWYgKHRoYXQgPT09IG51bGwpIHtcblx0ICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuXHQgICAgfVxuXHQgICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcblx0ICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZlxuXHQgKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG5cdCAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG5cdCAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuXG5cdCAqXG5cdCAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG5cdCAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0ICB9XG5cdFxuXHQgIC8vIENvbW1vbiBjYXNlLlxuXHQgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuXHQgICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoXG5cdCAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuXHQgICAgICApXG5cdCAgICB9XG5cdCAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuXHQgIH1cblx0ICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0QnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cdFxuXHQvLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cblx0QnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuXHQgIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgcmV0dXJuIGFyclxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdCAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG5cdCAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuXHQgKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG5cdCAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuXHQgKiBCdWZmZXIuZnJvbShidWZmZXIpXG5cdCAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuXHQgKiovXG5cdEJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG5cdCAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcblx0ICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcblx0ICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG5cdCAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcblx0ICAgICAgdmFsdWU6IG51bGwsXG5cdCAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcblx0ICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcblx0ICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG5cdCAgYXNzZXJ0U2l6ZShzaXplKVxuXHQgIGlmIChzaXplIDw9IDApIHtcblx0ICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcblx0ICB9XG5cdCAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcblx0ICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcblx0ICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cblx0ICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG5cdCAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG5cdCAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuXHQgKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG5cdCAqKi9cblx0QnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuXHQgIGFzc2VydFNpemUoc2l6ZSlcblx0ICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG5cdCAgICAgIHRoYXRbaV0gPSAwXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuXHQgKiAqL1xuXHRCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxuXHR9XG5cdC8qKlxuXHQgKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cblx0ICovXG5cdEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG5cdCAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG5cdCAgICBlbmNvZGluZyA9ICd1dGY4J1xuXHQgIH1cblx0XG5cdCAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcblx0ICB9XG5cdFxuXHQgIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuXHQgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXHRcblx0ICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXHRcblx0ICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcblx0ICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuXHQgICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cblx0ICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxuXHQgICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuXHQgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuXHQgIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXHRcblx0ICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcblx0ICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG5cdCAgfVxuXHRcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuXHQgICAgdGhhdCA9IGFycmF5XG5cdCAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuXHQgICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuXHQgICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG5cdCAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblx0XG5cdCAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIHRoYXRcblx0ICAgIH1cblx0XG5cdCAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG5cdCAgICByZXR1cm4gdGhhdFxuXHQgIH1cblx0XG5cdCAgaWYgKG9iaikge1xuXHQgICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcblx0ICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuXHQgICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuXHQgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSlcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcblx0ICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cblx0ICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcblx0ICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuXHQgIH1cblx0ICByZXR1cm4gbGVuZ3RoIHwgMFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcblx0ICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcblx0ICAgIGxlbmd0aCA9IDBcblx0ICB9XG5cdCAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxuXHR9XG5cdFxuXHRCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuXHQgIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG5cdH1cblx0XG5cdEJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cdFxuXHQgIHZhciB4ID0gYS5sZW5ndGhcblx0ICB2YXIgeSA9IGIubGVuZ3RoXG5cdFxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuXHQgICAgICB4ID0gYVtpXVxuXHQgICAgICB5ID0gYltpXVxuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSByZXR1cm4gLTFcblx0ICBpZiAoeSA8IHgpIHJldHVybiAxXG5cdCAgcmV0dXJuIDBcblx0fVxuXHRcblx0QnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuXHQgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG5cdCAgICBjYXNlICdoZXgnOlxuXHQgICAgY2FzZSAndXRmOCc6XG5cdCAgICBjYXNlICd1dGYtOCc6XG5cdCAgICBjYXNlICdhc2NpaSc6XG5cdCAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICBjYXNlICd1Y3MyJzpcblx0ICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcblx0ICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG5cdCAgfVxuXHRcblx0ICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcblx0ICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcblx0ICB9XG5cdFxuXHQgIHZhciBpXG5cdCAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBsZW5ndGggPSAwXG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuXHQgICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxuXHQgIHZhciBwb3MgPSAwXG5cdCAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcblx0ICAgIHZhciBidWYgPSBsaXN0W2ldXG5cdCAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG5cdCAgICB9XG5cdCAgICBidWYuY29weShidWZmZXIsIHBvcylcblx0ICAgIHBvcyArPSBidWYubGVuZ3RoXG5cdCAgfVxuXHQgIHJldHVybiBidWZmZXJcblx0fVxuXHRcblx0ZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHQgICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG5cdCAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXHQgIH1cblx0XG5cdCAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXHRcblx0ICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBsZW5cblx0ICAgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG5cdCAgICAgIGNhc2UgJ3VjczInOlxuXHQgICAgICBjYXNlICd1Y3MtMic6XG5cdCAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgICBjYXNlICd1dGYtMTZsZSc6XG5cdCAgICAgICAgcmV0dXJuIGxlbiAqIDJcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gbGVuID4+PiAxXG5cdCAgICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0QnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cdFxuXHRmdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2Vcblx0XG5cdCAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG5cdCAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblx0XG5cdCAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG5cdCAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuXHQgIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG5cdCAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG5cdCAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCA9IDBcblx0ICB9XG5cdCAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcblx0ICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuXHQgIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gJydcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuXHQgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPD0gMCkge1xuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHRcblx0ICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuXHQgIGVuZCA+Pj49IDBcblx0ICBzdGFydCA+Pj49IDBcblx0XG5cdCAgaWYgKGVuZCA8PSBzdGFydCkge1xuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB3aGlsZSAodHJ1ZSkge1xuXHQgICAgc3dpdGNoIChlbmNvZGluZykge1xuXHQgICAgICBjYXNlICdoZXgnOlxuXHQgICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICdhc2NpaSc6XG5cdCAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2xhdGluMSc6XG5cdCAgICAgIGNhc2UgJ2JpbmFyeSc6XG5cdCAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG5cdC8vIEJ1ZmZlciBpbnN0YW5jZXMuXG5cdEJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXHRcblx0ZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuXHQgIHZhciBpID0gYltuXVxuXHQgIGJbbl0gPSBiW21dXG5cdCAgYlttXSA9IGlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIGlmIChsZW4gJSAyICE9PSAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG5cdCAgICBzd2FwKHRoaXMsIGksIGkgKyAxKVxuXHQgIH1cblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKGxlbiAlIDQgIT09IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcblx0ICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIGlmIChsZW4gJSA4ICE9PSAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG5cdCAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuXHQgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcblx0ICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuXHQgIH1cblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuXHQgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcblx0ICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG5cdCAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuXHQgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuXHQgIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcblx0ICB2YXIgc3RyID0gJydcblx0ICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuXHQgIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcblx0ICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG5cdCAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG5cdCAgfVxuXHQgIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG5cdCAgfVxuXHRcblx0ICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgc3RhcnQgPSAwXG5cdCAgfVxuXHQgIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcblx0ICB9XG5cdCAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB0aGlzU3RhcnQgPSAwXG5cdCAgfVxuXHQgIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuXHQgIH1cblx0XG5cdCAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4Jylcblx0ICB9XG5cdFxuXHQgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcblx0ICAgIHJldHVybiAwXG5cdCAgfVxuXHQgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuXHQgICAgcmV0dXJuIC0xXG5cdCAgfVxuXHQgIGlmIChzdGFydCA+PSBlbmQpIHtcblx0ICAgIHJldHVybiAxXG5cdCAgfVxuXHRcblx0ICBzdGFydCA+Pj49IDBcblx0ICBlbmQgPj4+PSAwXG5cdCAgdGhpc1N0YXJ0ID4+Pj0gMFxuXHQgIHRoaXNFbmQgPj4+PSAwXG5cdFxuXHQgIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cdFxuXHQgIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuXHQgIHZhciB5ID0gZW5kIC0gc3RhcnRcblx0ICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblx0XG5cdCAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG5cdCAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuXHQgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG5cdCAgICAgIHggPSB0aGlzQ29weVtpXVxuXHQgICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSByZXR1cm4gLTFcblx0ICBpZiAoeSA8IHgpIHJldHVybiAxXG5cdCAgcmV0dXJuIDBcblx0fVxuXHRcblx0Ly8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuXHQvLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuXHQvL1xuXHQvLyBBcmd1bWVudHM6XG5cdC8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG5cdC8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG5cdC8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuXHQvLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuXHQvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuXHRmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcblx0ICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcblx0ICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cdFxuXHQgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG5cdCAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG5cdCAgICBieXRlT2Zmc2V0ID0gMFxuXHQgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcblx0ICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG5cdCAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcblx0ICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuXHQgIH1cblx0ICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuXG5cdCAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG5cdCAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcblx0ICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuXHQgIH1cblx0XG5cdCAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcblx0ICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuXHQgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcblx0ICAgIGlmIChkaXIpIHJldHVybiAtMVxuXHQgICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcblx0ICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG5cdCAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuXHQgICAgZWxzZSByZXR1cm4gLTFcblx0ICB9XG5cdFxuXHQgIC8vIE5vcm1hbGl6ZSB2YWxcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG5cdCAgfVxuXHRcblx0ICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuXHQgICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuXHQgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIC0xXG5cdCAgICB9XG5cdCAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuXHQgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuXHQgICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG5cdCAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgaWYgKGRpcikge1xuXHQgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuXHQgIH1cblx0XG5cdCAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuXHQgIHZhciBpbmRleFNpemUgPSAxXG5cdCAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcblx0ICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXHRcblx0ICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG5cdCAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuXHQgICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcblx0ICAgICAgICByZXR1cm4gLTFcblx0ICAgICAgfVxuXHQgICAgICBpbmRleFNpemUgPSAyXG5cdCAgICAgIGFyckxlbmd0aCAvPSAyXG5cdCAgICAgIHZhbExlbmd0aCAvPSAyXG5cdCAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG5cdCAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG5cdCAgICAgIHJldHVybiBidWZbaV1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgaVxuXHQgIGlmIChkaXIpIHtcblx0ICAgIHZhciBmb3VuZEluZGV4ID0gLTFcblx0ICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG5cdCAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuXHQgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcblx0ICAgICAgICBmb3VuZEluZGV4ID0gLTFcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuXHQgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuXHQgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuXHQgICAgICAgICAgZm91bmQgPSBmYWxzZVxuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuXHQgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcblx0ICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuXHQgIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG5cdCAgaWYgKCFsZW5ndGgpIHtcblx0ICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuXHQgIH0gZWxzZSB7XG5cdCAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuXHQgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuXHQgICAgICBsZW5ndGggPSByZW1haW5pbmdcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG5cdCAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblx0XG5cdCAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcblx0ICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcblx0ICB9XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuXHQgICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcblx0ICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuXHQgICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG5cdCAgfVxuXHQgIHJldHVybiBpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuXHQgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG5cdCAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBlbmNvZGluZyA9ICd1dGY4J1xuXHQgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcblx0ICAgIG9mZnNldCA9IDBcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblx0ICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBlbmNvZGluZyA9IG9mZnNldFxuXHQgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcblx0ICAgIG9mZnNldCA9IDBcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuXHQgIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuXHQgICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcblx0ICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuXHQgICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG5cdCAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuXHQgICAgfVxuXHQgIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKFxuXHQgICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG5cdCAgICApXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcblx0ICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblx0XG5cdCAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICBjYXNlICd1dGYtOCc6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuXHQgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogJ0J1ZmZlcicsXG5cdCAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdCAgdmFyIHJlcyA9IFtdXG5cdFxuXHQgIHZhciBpID0gc3RhcnRcblx0ICB3aGlsZSAoaSA8IGVuZCkge1xuXHQgICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuXHQgICAgdmFyIGNvZGVQb2ludCA9IG51bGxcblx0ICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuXHQgICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcblx0ICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG5cdCAgICAgIDogMVxuXHRcblx0ICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcblx0ICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXHRcblx0ICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcblx0ICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG5cdCAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcblx0ICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cblx0ICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cblx0ICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG5cdCAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcblx0ICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuXHQgICAgICBjb2RlUG9pbnQgPSAweEZGRkRcblx0ICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG5cdCAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG5cdCAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG5cdCAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcblx0ICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcblx0ICAgIH1cblx0XG5cdCAgICByZXMucHVzaChjb2RlUG9pbnQpXG5cdCAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2Vcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxuXHR9XG5cdFxuXHQvLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcblx0Ly8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuXHQvLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG5cdHZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXHRcblx0ZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG5cdCAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG5cdCAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuXHQgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG5cdCAgfVxuXHRcblx0ICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgdmFyIGkgPSAwXG5cdCAgd2hpbGUgKGkgPCBsZW4pIHtcblx0ICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuXHQgICAgICBTdHJpbmcsXG5cdCAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcblx0ICAgIClcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cdFxuXHQgIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cdFxuXHQgIHZhciBvdXQgPSAnJ1xuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuXHQgIH1cblx0ICByZXR1cm4gb3V0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuXHQgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgc3RhcnQgPSB+fnN0YXJ0XG5cdCAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXHRcblx0ICBpZiAoc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCArPSBsZW5cblx0ICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuXHQgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcblx0ICAgIHN0YXJ0ID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgMCkge1xuXHQgICAgZW5kICs9IGxlblxuXHQgICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcblx0ICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuXHQgICAgZW5kID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cdFxuXHQgIHZhciBuZXdCdWZcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcblx0ICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG5cdCAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcblx0ICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3QnVmXG5cdH1cblx0XG5cdC8qXG5cdCAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcblx0ICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcblx0ICB9XG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHQgIH1cblx0XG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gdGhpc1tvZmZzZXRdXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuXHQgICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG5cdCAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuXHQgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuXHQgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG5cdCAgICB0aGlzW29mZnNldCArIDNdKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcblx0ICB9XG5cdCAgbXVsICo9IDB4ODBcblx0XG5cdCAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGhcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cblx0ICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcblx0ICB9XG5cdCAgbXVsICo9IDB4ODBcblx0XG5cdCAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuXHQgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcblx0ICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcblx0ICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG5cdCAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDNdKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG5cdCAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuXHQgIH1cblx0XG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG5cdCAgdmFyIG11bCA9IDFcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG5cdCAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cdFxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IDBcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSAwXG5cdCAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG5cdCAgICAgIHN1YiA9IDFcblx0ICAgIH1cblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXHRcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuXHQgIH1cblx0XG5cdCAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIHN1YiA9IDBcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuXHQgICAgICBzdWIgPSAxXG5cdCAgICB9XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG5cdCAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcblx0ICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuXHQgIH1cblx0ICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcblx0ICB9XG5cdCAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG5cdCAgcmV0dXJuIG9mZnNldCArIDhcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcblx0fVxuXHRcblx0Ly8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuXHRCdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG5cdCAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG5cdCAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuXHQgIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcblx0ICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcblx0ICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblx0XG5cdCAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG5cdCAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG5cdCAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cdFxuXHQgIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcblx0ICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG5cdCAgfVxuXHQgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcblx0ICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblx0XG5cdCAgLy8gQXJlIHdlIG9vYj9cblx0ICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG5cdCAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuXHQgIH1cblx0XG5cdCAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG5cdCAgdmFyIGlcblx0XG5cdCAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG5cdCAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcblx0ICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuXHQgICAgICB0YXJnZXQsXG5cdCAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcblx0ICAgICAgdGFyZ2V0U3RhcnRcblx0ICAgIClcblx0ICB9XG5cdFxuXHQgIHJldHVybiBsZW5cblx0fVxuXHRcblx0Ly8gVXNhZ2U6XG5cdC8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuXHQvLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcblx0Ly8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5cdEJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcblx0ICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuXHQgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgZW5jb2RpbmcgPSBzdGFydFxuXHQgICAgICBzdGFydCA9IDBcblx0ICAgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgZW5jb2RpbmcgPSBlbmRcblx0ICAgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICAgIH1cblx0ICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcblx0ICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcblx0ICAgICAgICB2YWwgPSBjb2RlXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICB2YWwgPSB2YWwgJiAyNTVcblx0ICB9XG5cdFxuXHQgIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuXHQgIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuXHQgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblx0XG5cdCAgaWYgKCF2YWwpIHZhbCA9IDBcblx0XG5cdCAgdmFyIGlcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcblx0ICAgICAgdGhpc1tpXSA9IHZhbFxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuXHQgICAgICA/IHZhbFxuXHQgICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcblx0ICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG5cdCAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHQvLyBIRUxQRVIgRlVOQ1RJT05TXG5cdC8vID09PT09PT09PT09PT09PT1cblx0XG5cdHZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXHRcblx0ZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuXHQgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuXHQgIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcblx0ICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG5cdCAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcblx0ICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3Rcblx0ICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcblx0ICAgIHN0ciA9IHN0ciArICc9J1xuXHQgIH1cblx0ICByZXR1cm4gc3RyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuXHQgIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b0hleCAobikge1xuXHQgIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuXHQgIHJldHVybiBuLnRvU3RyaW5nKDE2KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuXHQgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcblx0ICB2YXIgY29kZVBvaW50XG5cdCAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcblx0ICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblx0ICB2YXIgYnl0ZXMgPSBbXVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG5cdCAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXHRcblx0ICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcblx0ICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG5cdCAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAgIC8vIG5vIGxlYWQgeWV0XG5cdCAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuXHQgICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdmFsaWQgbGVhZFxuXHQgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblx0XG5cdCAgICAgICAgY29udGludWVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuXHQgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG5cdCAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXHQgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG5cdCAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcblx0ICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgfVxuXHRcblx0ICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cdFxuXHQgICAgLy8gZW5jb2RlIHV0Zjhcblx0ICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG5cdCAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcblx0ICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuXHQgICAgICApXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuXHQgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50Jylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBieXRlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuXHQgIHZhciBieXRlQXJyYXkgPSBbXVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG5cdCAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cblx0ICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcblx0ICB9XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuXHQgIHZhciBjLCBoaSwgbG9cblx0ICB2YXIgYnl0ZUFycmF5ID0gW11cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuXHQgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdFxuXHQgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG5cdCAgICBoaSA9IGMgPj4gOFxuXHQgICAgbG8gPSBjICUgMjU2XG5cdCAgICBieXRlQXJyYXkucHVzaChsbylcblx0ICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcblx0ICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0ICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcblx0ICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuXHQgIH1cblx0ICByZXR1cm4gaVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc25hbiAodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSksXG4vKiA0NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0J1xuXHRcblx0ZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXHRcblx0dmFyIGxvb2t1cCA9IFtdXG5cdHZhciByZXZMb29rdXAgPSBbXVxuXHR2YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cdFxuXHR2YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuXHRmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuXHQgIGxvb2t1cFtpXSA9IGNvZGVbaV1cblx0ICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcblx0fVxuXHRcblx0Ly8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuXHQvLyBTZWU6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jhc2U2NCNVUkxfYXBwbGljYXRpb25zXG5cdHJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxuXHRyZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblx0XG5cdGZ1bmN0aW9uIGdldExlbnMgKGI2NCkge1xuXHQgIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdFxuXHQgIGlmIChsZW4gJSA0ID4gMCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Jylcblx0ICB9XG5cdFxuXHQgIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuXHQgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2JlYXRnYW1taXQvYmFzZTY0LWpzL2lzc3Vlcy80MlxuXHQgIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKCc9Jylcblx0ICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXHRcblx0ICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gdmFsaWRMZW4gPT09IGxlblxuXHQgICAgPyAwXG5cdCAgICA6IDQgLSAodmFsaWRMZW4gJSA0KVxuXHRcblx0ICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG5cdH1cblx0XG5cdC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHRmdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHtcblx0ICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuXHQgIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cblx0ICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXVxuXHQgIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlblxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfYnl0ZUxlbmd0aCAoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSB7XG5cdCAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcblx0ICB2YXIgdG1wXG5cdCAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NClcblx0ICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG5cdCAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cblx0XG5cdCAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblx0XG5cdCAgdmFyIGN1ckJ5dGUgPSAwXG5cdFxuXHQgIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcblx0ICB2YXIgbGVuID0gcGxhY2VIb2xkZXJzTGVuID4gMFxuXHQgICAgPyB2YWxpZExlbiAtIDRcblx0ICAgIDogdmFsaWRMZW5cblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuXHQgICAgdG1wID1cblx0ICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHxcblx0ICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8XG5cdCAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8XG5cdCAgICAgIHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG5cdCAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuXHQgICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuXHQgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG5cdCAgfVxuXHRcblx0ICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAyKSB7XG5cdCAgICB0bXAgPVxuXHQgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8XG5cdCAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuXHQgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG5cdCAgfVxuXHRcblx0ICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7XG5cdCAgICB0bXAgPVxuXHQgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfFxuXHQgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfFxuXHQgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcblx0ICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcblx0ICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGFyclxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuXHQgIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gK1xuXHQgICAgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICtcblx0ICAgIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICtcblx0ICAgIGxvb2t1cFtudW0gJiAweDNGXVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgdG1wXG5cdCAgdmFyIG91dHB1dCA9IFtdXG5cdCAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcblx0ICAgIHRtcCA9XG5cdCAgICAgICgodWludDhbaV0gPDwgMTYpICYgMHhGRjAwMDApICtcblx0ICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICtcblx0ICAgICAgKHVpbnQ4W2kgKyAyXSAmIDB4RkYpXG5cdCAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcblx0ICB9XG5cdCAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuXHQgIHZhciB0bXBcblx0ICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG5cdCAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdCAgdmFyIHBhcnRzID0gW11cblx0ICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblx0XG5cdCAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcblx0ICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsoXG5cdCAgICAgIHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aClcblx0ICAgICkpXG5cdCAgfVxuXHRcblx0ICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG5cdCAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcblx0ICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG5cdCAgICBwYXJ0cy5wdXNoKFxuXHQgICAgICBsb29rdXBbdG1wID4+IDJdICtcblx0ICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG5cdCAgICAgICc9PSdcblx0ICAgIClcblx0ICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcblx0ICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArIHVpbnQ4W2xlbiAtIDFdXG5cdCAgICBwYXJ0cy5wdXNoKFxuXHQgICAgICBsb29rdXBbdG1wID4+IDEwXSArXG5cdCAgICAgIGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl0gK1xuXHQgICAgICBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdICtcblx0ICAgICAgJz0nXG5cdCAgICApXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcGFydHMuam9pbignJylcblx0fVxuXG5cbi8qKiovIH0pLFxuLyogNDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtXG5cdCAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuXHQgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG5cdCAgdmFyIG5CaXRzID0gLTdcblx0ICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG5cdCAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG5cdCAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblx0XG5cdCAgaSArPSBkXG5cdFxuXHQgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgcyA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBlTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXHRcblx0ICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuXHQgIGUgPj49ICgtbkJpdHMpXG5cdCAgbkJpdHMgKz0gbUxlblxuXHQgIGZvciAoOyBuQml0cyA+IDA7IG0gPSAobSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblx0XG5cdCAgaWYgKGUgPT09IDApIHtcblx0ICAgIGUgPSAxIC0gZUJpYXNcblx0ICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcblx0ICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICBlID0gZSAtIGVCaWFzXG5cdCAgfVxuXHQgIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG5cdH1cblx0XG5cdGV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcblx0ICB2YXIgZSwgbSwgY1xuXHQgIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcblx0ICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuXHQgIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuXHQgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcblx0ICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG5cdCAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG5cdCAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblx0XG5cdCAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblx0XG5cdCAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcblx0ICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuXHQgICAgZSA9IGVNYXhcblx0ICB9IGVsc2Uge1xuXHQgICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG5cdCAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG5cdCAgICAgIGUtLVxuXHQgICAgICBjICo9IDJcblx0ICAgIH1cblx0ICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuXHQgICAgICB2YWx1ZSArPSBydCAvIGNcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuXHQgICAgfVxuXHQgICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG5cdCAgICAgIGUrK1xuXHQgICAgICBjIC89IDJcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcblx0ICAgICAgbSA9IDBcblx0ICAgICAgZSA9IGVNYXhcblx0ICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcblx0ICAgICAgbSA9ICgodmFsdWUgKiBjKSAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcblx0ICAgICAgZSA9IGUgKyBlQmlhc1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICAgIGUgPSAwXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXHRcblx0ICBlID0gKGUgPDwgbUxlbikgfCBtXG5cdCAgZUxlbiArPSBtTGVuXG5cdCAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXHRcblx0ICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcblx0fVxuXG5cbi8qKiovIH0pLFxuLyogNDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcIm5hbWVcIjpcImxyYy1tYWtlclwiLFwidmVyc2lvblwiOlwiMC4yLjJcIixcImRlc2NyaXB0aW9uXCI6XCJscmMgbWFrZXJcIixcIm1haW5cIjpcImluZGV4LmpzXCIsXCJzY3JpcHRzXCI6e1widGVzdFwiOlwibnBtIHJ1biBsaW50XCIsXCJsaW50XCI6XCJlc2xpbnQgLS1mb3JtYXQgJ25vZGVfbW9kdWxlcy9lc2xpbnQtZnJpZW5kbHktZm9ybWF0dGVyJyAtLWV4dCBqcyx2dWUgd2VicGFjay5jb25maWcuanMgc3JjXCIsXCJkZXZcIjpcIndlYnBhY2stZGV2LXNlcnZlciAtLWhvc3Q9JzAuMC4wLjAnIC0tcHJvZ3Jlc3MgLS1jb2xvcnMgLS1pbmxpbmUgLS1ob3QgLS1vdXRwdXQtcHVibGljLXBhdGg9Jy9hc3NldHMvJ1wiLFwiYnVpbGRcIjpcIm5wbSBydW4gYnVpbGQ6Y2xlYW4gJiYgbnBtIHJ1biBidWlsZDp3ZWJwYWNrICYmIG5wbSBydW4gYnVpbGQ6dmlld1wiLFwiYnVpbGQ6Y2xlYW5cIjpcInJtIC1yZiBidWlsZFwiLFwiYnVpbGQ6dmlld1wiOlwiIGNwIGluZGV4Lmh0bWwgYnVpbGQvaW5kZXguaHRtbFwiLFwiYnVpbGQ6d2VicGFja1wiOlwid2VicGFjayAtLW9wdGltaXplLW1pbmltaXplIC0tb3V0cHV0LXB1YmxpYy1wYXRoPScuL2Fzc2V0cy8nXCIsXCJkZXBsb3lcIjpcIm5wbSBydW4gYnVpbGQgJiYgZ2gtcGFnZXMgLWQgYnVpbGRcIn0sXCJrZXl3b3Jkc1wiOltcImxyY1wiXSxcImF1dGhvclwiOlwiV2Vpcm9uZyBYdSA8d2Vpcm9uZ3h1LnJhaWRvdUBnbWFpbC5jb20+XCIsXCJob21lcGFnZVwiOlwiaHR0cHM6Ly9naXRodWIuY29tL3dlaXJvbmd4dS9scmMtbWFrZXJcIixcInJlcG9zaXRvcnlcIjp7XCJ0eXBlXCI6XCJnaXRcIixcInVybFwiOlwiaHR0cHM6Ly9naXRodWIuY29tL3dlaXJvbmd4dS9scmMtbWFrZXIuZ2l0XCJ9LFwib25saW5lUGFnZVwiOlwiaHR0cHM6Ly93ZWlyb25neHUuZ2l0aHViLmlvL2xyYy1tYWtlci9cIixcImJ1Z3NcIjpcImh0dHBzOi8vZ2l0aHViLmNvbS93ZWlyb25neHUvbHJjLW1ha2VyL2lzc3Vlc1wiLFwibGljZW5zZVwiOlwiTUlUXCIsXCJkZXZEZXBlbmRlbmNpZXNcIjp7XCJhdXRvcHJlZml4ZXJcIjpcIl42LjUuM1wiLFwiYmFiZWwtY29yZVwiOlwiXjYuNy42XCIsXCJiYWJlbC1lc2xpbnRcIjpcIl43LjEuMVwiLFwiYmFiZWwtaGVscGVyLXZ1ZS1qc3gtbWVyZ2UtcHJvcHNcIjpcIl4yLjAuMlwiLFwiYmFiZWwtbG9hZGVyXCI6XCJeNi4yLjhcIixcImJhYmVsLXBsdWdpbi1zeW50YXgtanN4XCI6XCJeNi4xOC4wXCIsXCJiYWJlbC1wbHVnaW4tdHJhbnNmb3JtLXZ1ZS1qc3hcIjpcIl4zLjIuMFwiLFwiYmFiZWwtcHJlc2V0LWxhdGVzdFwiOlwiXjYuMTYuMFwiLFwiYmFiZWwtcHJlc2V0LXN0YWdlLTBcIjpcIl42LjE2LjBcIixcImNzcy1sb2FkZXJcIjpcIl4wLjI2LjBcIixcImVzbGludFwiOlwiXjMuMTAuMlwiLFwiZXNsaW50LWNvbmZpZy1zdGFuZGFyZFwiOlwiXjYuMi4xXCIsXCJlc2xpbnQtZnJpZW5kbHktZm9ybWF0dGVyXCI6XCJeMi4wLjZcIixcImVzbGludC1sb2FkZXJcIjpcIl4xLjMuMFwiLFwiZXNsaW50LXBsdWdpbi1odG1sXCI6XCJeMS43LjBcIixcImVzbGludC1wbHVnaW4tcHJvbWlzZVwiOlwiXjMuNC4wXCIsXCJlc2xpbnQtcGx1Z2luLXN0YW5kYXJkXCI6XCJeMi4wLjFcIixcImZpbGUtbG9hZGVyXCI6XCJeMC45LjBcIixcImdoLXBhZ2VzXCI6XCJeMC4xMi4wXCIsXCJqc29uLWxvYWRlclwiOlwiXjAuNS40XCIsXCJub2RlLXNhc3NcIjpcIl4zLjEzLjBcIixcInJlc29sdmUtdXJsLWxvYWRlclwiOlwiXjEuNi4wXCIsXCJzYXNzLWxvYWRlclwiOlwiXjQuMC4yXCIsXCJ1cmwtbG9hZGVyXCI6XCJeMC41LjdcIixcInZ1ZS1sb2FkZXJcIjpcIl4xMC4wLjFcIixcInZ1ZS10ZW1wbGF0ZS1jb21waWxlclwiOlwiXjIuMS4zXCIsXCJ3ZWJwYWNrXCI6XCJeMS4xMi4xNVwiLFwid2VicGFjay1kZXYtc2VydmVyXCI6XCJeMS4xNC4xXCIsXCJ5YW1sLWxvYWRlclwiOlwiXjAuNC4wXCJ9LFwiZGVwZW5kZW5jaWVzXCI6e1wiY2xvbmVcIjpcIl4yLjEuMFwiLFwiZXZlbnRlbWl0dGVyMlwiOlwiXjIuMi4xXCIsXCJleHRlbmRcIjpcIl4zLjAuMFwiLFwiZmlsZXNhdmVyLmpzXCI6XCJeMC4yLjBcIixcImxyYy1raXRcIjpcIl4wLjIuMFwiLFwidW5pZHJhZ2dlclwiOlwiXjIuMS4wXCIsXCJ2dWVcIjpcIl4yLjEuM1wiLFwidnVlLWkxOG5cIjpcIl41LjAuM1wifX1cblxuLyoqKi8gfSksXG4vKiA0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG5cdCAgcmV0dXJuIF9jKCdkaXYnLCB7XG5cdCAgICByZWY6IFwiYmFyXCIsXG5cdCAgICBzdGF0aWNDbGFzczogXCJiYXJcIixcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogX3ZtLmNsaWNrXG5cdCAgICB9XG5cdCAgfSwgW19jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJ3cmFwXCJcblx0ICB9LCBbX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcInZhbHVlXCIsXG5cdCAgICBzdHlsZTogKHtcblx0ICAgICAgd2lkdGg6IF92bS5zZWxmVmFsdWUgKiAxMDAgKyAnJSdcblx0ICAgIH0pXG5cdCAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcblx0ICAgIHJlZjogXCJ0aHVtYlwiLFxuXHQgICAgc3RhdGljQ2xhc3M6IFwidGh1bWJcIixcblx0ICAgIHN0eWxlOiAoe1xuXHQgICAgICBsZWZ0OiBfdm0uc2VsZlZhbHVlICogMTAwICsgJyUnXG5cdCAgICB9KVxuXHQgIH0pXSlcblx0fSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG4vKioqLyB9KSxcbi8qIDQ5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdC8qIHN0eWxlcyAqL1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHRcblx0dmFyIENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpKFxuXHQgIC8qIHNjcmlwdCAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNTIpLFxuXHQgIC8qIHRlbXBsYXRlICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg1NCksXG5cdCAgLyogc2NvcGVJZCAqL1xuXHQgIG51bGwsXG5cdCAgLyogY3NzTW9kdWxlcyAqL1xuXHQgIG51bGxcblx0KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogNTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCIzMWQ5MGNlNlwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA1MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJcIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogNTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdHZhciBfY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblx0XG5cdHZhciBfY2FjaGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2FjaGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHJlbWFpbjogX2NhY2hlMi5kZWZhdWx0LnRpbWVSZW1haW5cblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIGR1cmF0aW9uOiB7XG5cdCAgICAgIGRlZmF1bHQ6IDAsXG5cdCAgICAgIHR5cGU6IE51bWJlclxuXHQgICAgfSxcblx0ICAgIGN1cnJlbnRUaW1lOiB7XG5cdCAgICAgIGRlZmF1bHQ6IDAsXG5cdCAgICAgIHR5cGU6IE51bWJlclxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZmlsdGVyczoge1xuXHQgICAgdGltZTogZnVuY3Rpb24gdGltZSh0aW1lc3RhbXApIHtcblx0ICAgICAgcmV0dXJuICgwLCBfdXRpbHMudGltZXN0YW1wMnRpbWVzdHIpKHRpbWVzdGFtcCwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICB3YXRjaDoge1xuXHQgICAgcmVtYWluOiBmdW5jdGlvbiByZW1haW4odmFsKSB7XG5cdCAgICAgIF9jYWNoZTIuZGVmYXVsdC50aW1lUmVtYWluID0gdmFsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA1MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0dmFyIGNhY2hlTWFwID0ge1xuXHQgIGxyY0Zvcm1hdDoge30sXG5cdCAgbHlyaWM6IHt9LFxuXHQgIGVkaXRpbmc6IHtcblx0ICAgIGRlZmF1bHQ6IHRydWVcblx0ICB9LFxuXHQgIGx5cmljQXJyYXk6IHtcblx0ICAgIGRlZmF1bHQ6IFtdXG5cdCAgfSxcblx0ICB0aW1lUmVtYWluOiB7XG5cdCAgICBkZWZhdWx0OiBmYWxzZVxuXHQgIH0sXG5cdCAgdXNlck5hbWU6IHtcblx0ICAgIGRlZmF1bHQ6ICcnXG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGNhY2hlT2JqID0ge307XG5cdE9iamVjdC5rZXlzKGNhY2hlTWFwKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG5cdCAgdmFyIGNvbmZpZyA9IGNhY2hlTWFwW3Byb3BdO1xuXHQgIGNhY2hlT2JqW3Byb3BdID0gX3V0aWxzLmNhY2hlLmdldChjb25maWcubmFtZSB8fCBwcm9wLCBjb25maWcuZGVmYXVsdCB8fCAnJyk7XG5cdH0pO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbmV3IFByb3h5KGNhY2hlT2JqLCB7XG5cdCAgc2V0OiBmdW5jdGlvbiBzZXQob2JqLCBwcm9wLCB2YWx1ZSkge1xuXHQgICAgdmFyIGNvbmZpZyA9IGNhY2hlTWFwW3Byb3BdO1xuXHQgICAgX3V0aWxzLmNhY2hlLnNldChjb25maWcubmFtZSB8fCBwcm9wLCB2YWx1ZSk7XG5cdCAgICBvYmpbcHJvcF0gPSB2YWx1ZTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0pLFxuLyogNTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2JywgW19jKCdzcGFuJywge1xuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0ucmVtYWluID0gIV92bS5yZW1haW5cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFsoX3ZtLnJlbWFpbikgPyBbX3ZtLl92KFwiXFxuICAgICAgLVwiICsgX3ZtLl9zKF92bS5fZihcInRpbWVcIikoKF92bS5kdXJhdGlvbiAtIF92bS5jdXJyZW50VGltZSkpKSArIFwiXFxuICAgIFwiKV0gOiBbX3ZtLl92KFwiXFxuICAgICAgXCIgKyBfdm0uX3MoX3ZtLl9mKFwidGltZVwiKShfdm0uY3VycmVudFRpbWUpKSArIFwiXFxuICAgIFwiKV1dLCAyKSwgX3ZtLl92KFwiXFxuICAvIFwiICsgX3ZtLl9zKF92bS5fZihcInRpbWVcIikoX3ZtLmR1cmF0aW9uKSkgKyBcIlxcblwiKV0pXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiA1NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG5cdCAgcmV0dXJuIF9jKCdkaXYnLCB7XG5cdCAgICBkaXJlY3RpdmVzOiBbe1xuXHQgICAgICBuYW1lOiBcInNob3dcIixcblx0ICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcblx0ICAgICAgdmFsdWU6IChfdm0uc3JjLmxlbmd0aCksXG5cdCAgICAgIGV4cHJlc3Npb246IFwic3JjLmxlbmd0aFwiXG5cdCAgICB9XSxcblx0ICAgIHN0YXRpY0NsYXNzOiBcInJvb3RcIixcblx0ICAgIGNsYXNzOiB7XG5cdCAgICAgIG1vYmlsZTogX3ZtLmlzTW9iaWxlXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJtb3VzZW92ZXJcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgX3ZtLmhvdmVyID0gdHJ1ZVxuXHQgICAgICB9LFxuXHQgICAgICBcIm1vdXNlbGVhdmVcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgX3ZtLmhvdmVyID0gZmFsc2Vcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFtfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwicGxheWVyXCJcblx0ICB9LCBbX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImN0cmwtYnRuXCIsXG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInRpdGxlXCI6IFwiW1NQQUNFXVwiXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0ucGF1c2VkID0gIV92bS5wYXVzZWRcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFsoX3ZtLnBhdXNlZCkgPyBfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tcGxheVwiXG5cdCAgfSkgOiBfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tcGF1c2VcIlxuXHQgIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJjdHJsLWJ0blwiLFxuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJ0aXRsZVwiOiBcIltMRUZUXVwiXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0uJGVtaXQoJ2JhY2t3YXJkJylcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFtfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tYmFja3dhcmRcIlxuXHQgIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJjdHJsLWJ0blwiLFxuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJ0aXRsZVwiOiBcIltSSUdIVF1cIlxuXHQgICAgfSxcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgX3ZtLiRlbWl0KCdmb3J3YXJkJylcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFtfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tZm9yd2FyZFwiXG5cdCAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3JhbmdlJywge1xuXHQgICAgcmVmOiBcIm11c2ljUmFuZ2VcIixcblx0ICAgIHN0YXRpY0NsYXNzOiBcInJhbmdlIG11c2ljXCIsXG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInZhbHVlXCI6IF92bS5wcm9jZXNzXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJzZWVrXCI6IF92bS5zZWVrXG5cdCAgICB9XG5cdCAgfSksIF92bS5fdihcIiBcIiksICghX3ZtLmlzTW9iaWxlKSA/IF9jKCd0aW1lLXBhbmVsJywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJkdXJhdGlvblwiOiBfdm0uZHVyYXRpb24sXG5cdCAgICAgIFwiY3VycmVudC10aW1lXCI6IF92bS5jdXJyZW50VGltZVxuXHQgICAgfVxuXHQgIH0pIDogX3ZtLl9lKCldLCAxKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3RyYW5zaXRpb24nLCB7XG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcIm5hbWVcIjogXCJwbGF5ZXItbW9yZVwiXG5cdCAgICB9XG5cdCAgfSwgW19jKCdkaXYnLCB7XG5cdCAgICBkaXJlY3RpdmVzOiBbe1xuXHQgICAgICBuYW1lOiBcInNob3dcIixcblx0ICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcblx0ICAgICAgdmFsdWU6IChfdm0uaXNNb2JpbGUgfHwgX3ZtLmhvdmVyKSxcblx0ICAgICAgZXhwcmVzc2lvbjogXCJpc01vYmlsZSB8fCBob3ZlclwiXG5cdCAgICB9XSxcblx0ICAgIHN0YXRpY0NsYXNzOiBcIm1vcmVcIlxuXHQgIH0sIFsoX3ZtLmlzTW9iaWxlKSA/IF9jKCd0aW1lLXBhbmVsJywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJkdXJhdGlvblwiOiBfdm0uZHVyYXRpb24sXG5cdCAgICAgIFwiY3VycmVudC10aW1lXCI6IF92bS5jdXJyZW50VGltZVxuXHQgICAgfVxuXHQgIH0pIDogX3ZtLl9lKCksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJzb3VuZFwiXG5cdCAgfSwgW19jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJjdHJsLWJ0blwiLFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0ubXV0ZWQgPSAhX3ZtLm11dGVkXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCBbKF92bS5tdXRlZCB8fCBfdm0udm9sdW1lID09IDApID8gX2MoJ2knLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJpY29uLXZvbHVtZS1vZmZcIlxuXHQgIH0pIDogX2MoJ2knLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJpY29uLXZvbHVtZS11cFwiXG5cdCAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3JhbmdlJywge1xuXHQgICAgcmVmOiBcInNvdW5kUmFuZ2VcIixcblx0ICAgIHN0YXRpY0NsYXNzOiBcInJhbmdlIHZvbHVtZVwiLFxuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJ2YWx1ZVwiOiBfdm0udm9sdW1lXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJzZWVrXCI6IF92bS52b2x1bWVTZWVrLFxuXHQgICAgICBcImRyYWctc2Vla1wiOiBfdm0udm9sdW1lU2Vla1xuXHQgICAgfVxuXHQgIH0pXSwgMSldLCAxKV0pXSwgMSlcblx0fSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG4vKioqLyB9KSxcbi8qIDU2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdC8qIHN0eWxlcyAqL1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KVxuXHRcblx0dmFyIENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpKFxuXHQgIC8qIHNjcmlwdCAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNTkpLFxuXHQgIC8qIHRlbXBsYXRlICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg3NyksXG5cdCAgLyogc2NvcGVJZCAqL1xuXHQgIFwiZGF0YS12LTNmYjQ0MWJjXCIsXG5cdCAgLyogY3NzTW9kdWxlcyAqL1xuXHQgIG51bGxcblx0KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogNTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCIxNWRkNTUyYlwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA1OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJ1bC5seXJpY3NbZGF0YS12LTNmYjQ0MWJjXXtsaXN0LXN0eWxlLXR5cGU6bm9uZTttYXJnaW46MDtwYWRkaW5nOjA7YmFja2dyb3VuZC1jb2xvcjojZjFmMWYxfXVsLmx5cmljcz5saVtkYXRhLXYtM2ZiNDQxYmNde21pbi1oZWlnaHQ6NDBweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojMmE3MmJiO3BhZGRpbmc6MTBweCAwfXVsLmx5cmljcz5saS5jdXJbZGF0YS12LTNmYjQ0MWJjXXtjb2xvcjojMmE3MmJiO3RleHQtc2hhZG93OjFweCAxcHggMXB4ICNhYWE7YmFja2dyb3VuZC1jb2xvcjojZmJmYmZifXVsLmx5cmljcz5saTpob3ZlciAuY29uY2VhbFtkYXRhLXYtM2ZiNDQxYmNde2Rpc3BsYXk6aW5saW5lLWJsb2NrfXVsLmx5cmljcz5saSAuY29uY2VhbFtkYXRhLXYtM2ZiNDQxYmNde2Rpc3BsYXk6bm9uZX11bC5seXJpY3M+bGkuZGl2aXNpb25bZGF0YS12LTNmYjQ0MWJjXSx1bC5seXJpY3M+bGkudW5zb3J0ZWRbZGF0YS12LTNmYjQ0MWJjXXtiYWNrZ3JvdW5kLWNvbG9yOiNmMWYxZjF9dWwubHlyaWNzPmxpLmRpdmlzaW9uW2RhdGEtdi0zZmI0NDFiY117ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO21pbi1oZWlnaHQ6YXV0bztwYWRkaW5nOjJweCAwO2ZvbnQtc2l6ZToxMnB4O3RleHQtYWxpZ246Y2VudGVyfXVsLmx5cmljcy5lZGl0aW5nPmxpW2RhdGEtdi0zZmI0NDFiY117cGFkZGluZzowO2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4fXVsLmx5cmljcy5lZGl0aW5nPmxpLmRpdmlzaW9uW2RhdGEtdi0zZmI0NDFiY117ZGlzcGxheTpibG9jaztwYWRkaW5nOjRweCAwfXVsLmx5cmljcy5lZGl0aW5nPmxpIC50aW1lc3RhbXBbZGF0YS12LTNmYjQ0MWJjXXtjb2xvcjojN2M5ZmJiO3dpZHRoOjYwcHg7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6XFxcIi5cXFwifXVsLmx5cmljcy5lZGl0aW5nPmxpIC5jb250ZW50W2RhdGEtdi0zZmI0NDFiY117LW1zLWZsZXg6MTtmbGV4OjF9dWwubHlyaWNzLmVkaXRpbmc+bGkgLmljb24tYnRuW2RhdGEtdi0zZmI0NDFiY117cGFkZGluZy1sZWZ0OjRweDtwYWRkaW5nLXJpZ2h0OjRweH11bC5seXJpY3MuZWRpdGluZz5saSAuY29udGVudFtkYXRhLXYtM2ZiNDQxYmNdLHVsLmx5cmljcy5lZGl0aW5nPmxpIC5pY29uLWJ0bltkYXRhLXYtM2ZiNDQxYmNdLHVsLmx5cmljcy5lZGl0aW5nPmxpIC50aW1lc3RhbXBbZGF0YS12LTNmYjQ0MWJjXXtwYWRkaW5nLXRvcDoxMHB4O3BhZGRpbmctYm90dG9tOjEwcHh9dWwubHlyaWNzLmVkaXRpbmc+bGkgaW5wdXRbZGF0YS12LTNmYjQ0MWJjXXt0ZXh0LWFsaWduOmNlbnRlcjtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNkMGRhZTR9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDU5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2xyY0tpdCA9IF9fd2VicGFja19yZXF1aXJlX18oNjApO1xuXHRcblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0dmFyIF9jYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuXHRcblx0dmFyIF9jYWNoZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jYWNoZSk7XG5cdFxuXHR2YXIgX3RtZW51ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSk7XG5cdFxuXHR2YXIgX3RtZW51MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RtZW51KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH0gLy9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaW5kZXg6IC0xLFxuXHQgICAgICBlZGl0aW5nSW5kZXg6IC0xLFxuXHQgICAgICBlZGl0aW5nVGV4dEluZGV4OiAtMSxcblx0ICAgICAgc2Nyb2xsZXI6IG51bGxcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIHJ1bm5lcjoge1xuXHQgICAgICB0eXBlOiBfbHJjS2l0LlJ1bm5lcixcblx0ICAgICAgZGVmYXVsdDogbmV3IF9scmNLaXQuUnVubmVyKClcblx0ICAgIH0sXG5cdCAgICBwbGF5dG86IHtcblx0ICAgICAgdHlwZTogRnVuY3Rpb24sXG5cdCAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkge31cblx0ICAgIH0sXG5cdCAgICBlZGl0aW5nOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IF9jYWNoZTIuZGVmYXVsdC5lZGl0aW5nXG5cdCAgICB9LFxuXHQgICAgbHlyaWNBcnJheToge1xuXHQgICAgICB0eXBlOiBBcnJheSxcblx0ICAgICAgZGVmYXVsdDogW11cblx0ICAgIH1cblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIGVkaXRNZW51OiBmdW5jdGlvbiBlZGl0TWVudShpbmRleCkge1xuXHQgICAgICAvLyBUT0RPXG5cdCAgICB9LFxuXHQgICAgZXhpdEVkaXQ6IGZ1bmN0aW9uIGV4aXRFZGl0KCkge1xuXHQgICAgICB0aGlzLmVkaXRpbmdJbmRleCA9IC0xO1xuXHQgICAgICB0aGlzLmVkaXRpbmdUZXh0SW5kZXggPSAtMTtcblx0ICAgICAgdGhpcy4kZW1pdCgndXBkYXRlJyk7XG5cdCAgICB9LFxuXHQgICAgZWRpdDogZnVuY3Rpb24gZWRpdChpbmRleCkge1xuXHQgICAgICB0aGlzLmVkaXRpbmdJbmRleCA9IGluZGV4O1xuXHQgICAgfSxcblx0ICAgIGVkaXRUZXh0OiBmdW5jdGlvbiBlZGl0VGV4dChpbmRleCkge1xuXHQgICAgICB0aGlzLmVkaXRpbmdUZXh0SW5kZXggPSBpbmRleDtcblx0ICAgICAgdGhpcy4kZW1pdCgndXBkYXRlJyk7XG5cdCAgICB9LFxuXHQgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoaW5kZXgpIHtcblx0ICAgICAgdGhpcy5ydW5uZXIubHJjLmx5cmljcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnKTtcblx0ICAgIH0sXG5cdCAgICByZW1vdmVUZXh0OiBmdW5jdGlvbiByZW1vdmVUZXh0KGluZGV4KSB7XG5cdCAgICAgIHRoaXMubHlyaWNBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnKTtcblx0ICAgIH0sXG5cdCAgICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChpbmRleCkge1xuXHQgICAgICB0aGlzLnJ1bm5lci5scmMubHlyaWNzLnNwbGljZShpbmRleCArIDEsIDAsIHtcblx0ICAgICAgICB0aW1lc3RhbXA6IHRoaXMucnVubmVyLmxyYy5seXJpY3NbaW5kZXhdLnRpbWVzdGFtcCxcblx0ICAgICAgICBjb250ZW50OiB0aGlzLnJ1bm5lci5scmMubHlyaWNzW2luZGV4XS5jb250ZW50XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnKTtcblx0ICAgIH0sXG5cdCAgICBpbnNlcnRUZXh0OiBmdW5jdGlvbiBpbnNlcnRUZXh0KGluZGV4KSB7XG5cdCAgICAgIHRoaXMubHlyaWNBcnJheS5zcGxpY2UoaW5kZXggKyAxLCAwLCB0aGlzLmx5cmljQXJyYXlbaW5kZXhdKTtcblx0ICAgICAgdGhpcy4kZW1pdCgndXBkYXRlJyk7XG5cdCAgICB9LFxuXHQgICAgcmVtb3ZlVGltZXN0YW1wOiBmdW5jdGlvbiByZW1vdmVUaW1lc3RhbXAoaW5kZXgpIHtcblx0ICAgICAgdmFyIF9seXJpY0FycmF5O1xuXHRcblx0ICAgICAgdmFyIGx5cmljcyA9IHRoaXMucnVubmVyLmxyYy5seXJpY3M7XG5cdCAgICAgIHZhciByZW1vdmVMeXJpY3MgPSBseXJpY3Muc3BsaWNlKGluZGV4LCBseXJpY3MubGVuZ3RoIC0gaW5kZXgpLm1hcChmdW5jdGlvbiAobHlyaWMpIHtcblx0ICAgICAgICByZXR1cm4gbHlyaWMuY29udGVudDtcblx0ICAgICAgfSk7XG5cdCAgICAgIChfbHlyaWNBcnJheSA9IHRoaXMubHlyaWNBcnJheSkuc3BsaWNlLmFwcGx5KF9seXJpY0FycmF5LCBbMCwgMF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZW1vdmVMeXJpY3MpKSk7XG5cdCAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZScpO1xuXHQgICAgfSxcblx0ICAgIHNldFRpbWVzdGFtcDogZnVuY3Rpb24gc2V0VGltZXN0YW1wKGluZGV4KSB7XG5cdCAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMuJHBhcmVudC4kcmVmcy5wbGF5ZXIuY3VycmVudFRpbWU7XG5cdCAgICAgIGlmIChjdXJyZW50VGltZSAhPT0gMCkge1xuXHQgICAgICAgIHRoaXMucnVubmVyLmxyYy5seXJpY3NbaW5kZXhdLnRpbWVzdGFtcCA9IGN1cnJlbnRUaW1lO1xuXHQgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZScpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgc2V0VGltZXN0YW1wVGV4dDogZnVuY3Rpb24gc2V0VGltZXN0YW1wVGV4dChpbmRleCkge1xuXHQgICAgICB2YXIgY3VycmVudFRpbWUgPSB0aGlzLiRwYXJlbnQuJHJlZnMucGxheWVyLmN1cnJlbnRUaW1lO1xuXHQgICAgICBpZiAoY3VycmVudFRpbWUgIT09IDAgJiYgdGhpcy5seXJpY0FycmF5Lmxlbmd0aCkge1xuXHQgICAgICAgIHRoaXMucnVubmVyLmxyYy5seXJpY3MucHVzaCh7XG5cdCAgICAgICAgICB0aW1lc3RhbXA6IGN1cnJlbnRUaW1lLFxuXHQgICAgICAgICAgY29udGVudDogdGhpcy5seXJpY0FycmF5W2luZGV4XVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlVGV4dChpbmRleCk7XG5cdCAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlJyk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBzY3JvbGxUb0N1cnJlbnRMeXJpYzogZnVuY3Rpb24gc2Nyb2xsVG9DdXJyZW50THlyaWMoKSB7XG5cdCAgICAgIHZhciBmb3JjZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG5cdFxuXHQgICAgICB2YXIgcm9vdCA9IHRoaXMuJGVsO1xuXHQgICAgICB2YXIgY3VyID0gcm9vdC5xdWVyeVNlbGVjdG9yKCcuY3VyJyk7XG5cdCAgICAgIGlmIChjdXIpIHtcblx0ICAgICAgICB2YXIgaGVpZ2h0ID0gcm9vdC5jbGllbnRIZWlnaHQ7XG5cdCAgICAgICAgdmFyIHRvcCA9IGN1ci5vZmZzZXRUb3AgLSBoZWlnaHQgLyAyO1xuXHQgICAgICAgIHRoaXMuc2Nyb2xsZXIuc2Nyb2xsVG8odG9wLCBmb3JjZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHQgIGZpbHRlcnM6IHtcblx0ICAgIHRpbWU6IF91dGlscy50aW1lc3RhbXAydGltZXN0clxuXHQgIH0sXG5cdCAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy4kb24oJ3RpbWV1cGRhdGUnLCBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG5cdCAgICAgIF90aGlzLnJ1bm5lci50aW1lVXBkYXRlKHRpbWVzdGFtcCk7XG5cdCAgICAgIF90aGlzLmluZGV4ID0gX3RoaXMucnVubmVyLmN1ckluZGV4KCk7XG5cdCAgICAgIF90aGlzLnNjcm9sbFRvQ3VycmVudEx5cmljKCk7XG5cdCAgICB9KS4kb24oJ3VwZGF0ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMucnVubmVyLmxyY1VwZGF0ZSgpO1xuXHQgICAgICBfdGhpcy4kQXBwLmxyY0Zvcm1hdCA9IF90aGlzLnJ1bm5lci5scmMudG9TdHJpbmcoKTtcblx0ICAgICAgX3RoaXMuJEFwcC5seXJpY0FycmF5ID0gX3RoaXMubHlyaWNBcnJheTtcblx0ICAgIH0pLiRvbigncHJldmx5cmljJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBfdGhpcy5yZW1vdmVUaW1lc3RhbXAoX3RoaXMucnVubmVyLmxyYy5seXJpY3MubGVuZ3RoIC0gMSk7XG5cdCAgICB9KS4kb24oJ25leHRseXJpYycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMuc2V0VGltZXN0YW1wVGV4dCgwKTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHtcblx0ICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMuc2Nyb2xsZXIgPSBuZXcgX3V0aWxzLlNjcm9sbGVyKHRoaXMuJGVsKTtcblx0XG5cdCAgICBfdXRpbHMuZ2xvYmFsS2V5ZG93bi5vbihbJ2VudGVyJywgJ2VzY2FwZSddLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfdGhpczIuZWRpdGluZykge1xuXHQgICAgICAgIF90aGlzMi5leGl0RWRpdCgpO1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSkub24oJ2Fycm93dXAnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfdGhpczIuZWRpdGluZykge1xuXHQgICAgICAgIF90aGlzMi4kZW1pdCgncHJldmx5cmljJyk7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9KS5vbignYXJyb3dkb3duJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX3RoaXMyLmVkaXRpbmcpIHtcblx0ICAgICAgICBfdGhpczIuJGVtaXQoJ25leHRseXJpYycpO1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSxcblx0XG5cdCAgd2F0Y2g6IHtcblx0ICAgIGVkaXRpbmc6IGZ1bmN0aW9uIGVkaXRpbmcoKSB7XG5cdCAgICAgIGlmICghdGhpcy5lZGl0aW5nKSB7XG5cdCAgICAgICAgdGhpcy5leGl0RWRpdCgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBUbWVudTogX3RtZW51Mi5kZWZhdWx0XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDYwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuUnVubmVyID0gZXhwb3J0cy5McmMgPSBleHBvcnRzLkxpbmVQYXJzZXIgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX2xpbmVQYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcblx0XG5cdHZhciBfbGluZVBhcnNlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW5lUGFyc2VyKTtcblx0XG5cdHZhciBfbHJjID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7XG5cdFxuXHR2YXIgX2xyYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9scmMpO1xuXHRcblx0dmFyIF9ydW5uZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0XG5cdHZhciBfcnVubmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3J1bm5lcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5MaW5lUGFyc2VyID0gX2xpbmVQYXJzZXIyLmRlZmF1bHQ7XG5cdGV4cG9ydHMuTHJjID0gX2xyYzIuZGVmYXVsdDtcblx0ZXhwb3J0cy5SdW5uZXIgPSBfcnVubmVyMi5kZWZhdWx0O1xuXG4vKioqLyB9KSxcbi8qIDYxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBMaW5lUGFyc2VyID0gZnVuY3Rpb24gKCkge1xuXHQgIF9jcmVhdGVDbGFzcyhMaW5lUGFyc2VyLCBudWxsLCBbe1xuXHQgICAga2V5OiAncGFyc2VUYWdzJyxcblx0XG5cdCAgICAvLyBtYXRjaCBgW3RpOiBUaGUgVGl0bGVdYFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlVGFncyhsaW5lKSB7XG5cdCAgICAgIGxpbmUgPSBsaW5lLnRyaW0oKTtcblx0ICAgICAgdmFyIG1hdGNocyA9IExpbmVQYXJzZXIuVEFHU19SRUdFWFAuZXhlYyhsaW5lKTtcblx0ICAgICAgdmFyIHRhZyA9IG1hdGNoc1swXTtcblx0ICAgICAgdmFyIGNvbnRlbnQgPSBsaW5lLnN1YnN0cih0YWcubGVuZ3RoKTtcblx0ICAgICAgcmV0dXJuIFt0YWcuc2xpY2UoMSwgLTEpLnNwbGl0KC9cXF1cXHMqXFxbLyksIGNvbnRlbnRdO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogbGluZSBwYXJzZSBscmMgb2YgdGltZXN0YW1wXG5cdCAgICAgKiBAZXhhbXBsZVxuXHQgICAgICogdmFyIGxwID0gbmV3IExpbmVQYXJzZXIoJ1t0aTogU29uZyB0aXRsZV0nKVxuXHQgICAgICogbHAudHlwZSA9PT0gTGluZVBhcnNlci5UWVBFLklORk9cblx0ICAgICAqIGxwLmtleSA9PT0gJ3RpJ1xuXHQgICAgICogbHAudmFsdWUgPT09ICdTb25nIHRpdGxlJ1xuXHQgICAgICpcblx0ICAgICAqIHZhciBscCA9IG5ldyBMaW5lUGFyc2VyKCdbMTA6MTAuMTBdaGVsbG8nKVxuXHQgICAgICogbHAudHlwZSA9PT0gTGluZVBhcnNlci5UWVBFLlRJTUVcblx0ICAgICAqIGxwLnRpbWVzdGFtcHMgPT09IFsxMCo2MCsxMC4xMF1cblx0ICAgICAqIGxwLmNvbnRlbnQgPT09ICdoZWxsbydcblx0ICAgICAqIEBjb25zdHJ1Y3RzXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGluZVxuXHQgICAgICovXG5cdFxuXHQgICAgLy8gbWF0Y2ggYFs1MTI6MzQuMV0gbHlyaWMgY29udGVudGBcblx0XG5cdCAgICAvLyBtYXRjaCBgWzEyOjMwLjFdWzEyOjMwLjJdYFxuXHRcblx0ICB9XSk7XG5cdFxuXHQgIGZ1bmN0aW9uIExpbmVQYXJzZXIobGluZSkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpbmVQYXJzZXIpO1xuXHRcblx0ICAgIHRoaXMudHlwZSA9IExpbmVQYXJzZXIuVFlQRS5JTlZBTElEO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBfTGluZVBhcnNlciRwYXJzZVRhZ3MgPSBMaW5lUGFyc2VyLnBhcnNlVGFncyhsaW5lKTtcblx0XG5cdCAgICAgIHZhciBfTGluZVBhcnNlciRwYXJzZVRhZ3MyID0gX3NsaWNlZFRvQXJyYXkoX0xpbmVQYXJzZXIkcGFyc2VUYWdzLCAyKTtcblx0XG5cdCAgICAgIHZhciB0YWdzID0gX0xpbmVQYXJzZXIkcGFyc2VUYWdzMlswXTtcblx0ICAgICAgdmFyIGNvbnRlbnQgPSBfTGluZVBhcnNlciRwYXJzZVRhZ3MyWzFdO1xuXHRcblx0ICAgICAgaWYgKExpbmVQYXJzZXIuVElNRV9SRUdFWFAudGVzdCh0YWdzWzBdKSkge1xuXHQgICAgICAgIHRoaXMucGFyc2VBc1RpbWUodGFncywgY29udGVudCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoTGluZVBhcnNlci5JTkZPX1JFR0VYUC50ZXN0KHRhZ3NbMF0pKSB7XG5cdCAgICAgICAgdGhpcy5wYXJzZUFzSW5mbyh0YWdzWzBdKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnR5cGUgPSBMaW5lUGFyc2VyLlRZUEUuSU5WQUxJRDtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0aGlzLnR5cGUgPSBMaW5lUGFyc2VyLlRZUEUuSU5WQUxJRDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhMaW5lUGFyc2VyLCBbe1xuXHQgICAga2V5OiAncGFyc2VBc1RpbWUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlQXNUaW1lKHRhZ3MsIGNvbnRlbnQpIHtcblx0ICAgICAgdmFyIHRpbWVzdGFtcHMgPSBbXTtcblx0ICAgICAgdGFncy5mb3JFYWNoKGZ1bmN0aW9uICh0YWcpIHtcblx0ICAgICAgICB2YXIgbWF0Y2hzID0gTGluZVBhcnNlci5USU1FX1JFR0VYUC5leGVjKHRhZyk7XG5cdCAgICAgICAgdmFyIG1pbnV0ZXMgPSBwYXJzZUZsb2F0KG1hdGNoc1sxXSk7XG5cdCAgICAgICAgdmFyIHNlY29uZHMgPSBwYXJzZUZsb2F0KG1hdGNoc1syXS5yZXBsYWNlKC9cXHMrL2csICcnKS5yZXBsYWNlKCc6JywgJy4nKSk7XG5cdCAgICAgICAgdGltZXN0YW1wcy5wdXNoKG1pbnV0ZXMgKiA2MCArIHNlY29uZHMpO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy50aW1lc3RhbXBzID0gdGltZXN0YW1wcztcblx0ICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudC50cmltKCk7XG5cdCAgICAgIHRoaXMudHlwZSA9IExpbmVQYXJzZXIuVFlQRS5USU1FO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlQXNJbmZvJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZUFzSW5mbyh0YWcpIHtcblx0ICAgICAgdmFyIG1hdGNocyA9IExpbmVQYXJzZXIuSU5GT19SRUdFWFAuZXhlYyh0YWcpO1xuXHQgICAgICB0aGlzLmtleSA9IG1hdGNoc1sxXS50cmltKCk7XG5cdCAgICAgIHRoaXMudmFsdWUgPSBtYXRjaHNbMl0udHJpbSgpO1xuXHQgICAgICB0aGlzLnR5cGUgPSBMaW5lUGFyc2VyLlRZUEUuSU5GTztcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBMaW5lUGFyc2VyO1xuXHR9KCk7XG5cdFxuXHRMaW5lUGFyc2VyLlRBR1NfUkVHRVhQID0gL14oXFxbLitcXF0pKy87XG5cdExpbmVQYXJzZXIuSU5GT19SRUdFWFAgPSAvXlxccyooXFx3KylcXHMqOiguKikkLztcblx0TGluZVBhcnNlci5USU1FX1JFR0VYUCA9IC9eXFxzKihcXGQrKVxccyo6XFxzKihcXGQrKFxccypbXFwuOl1cXHMqXFxkKyk/KVxccyokLztcblx0TGluZVBhcnNlci5UWVBFID0ge1xuXHQgIElOVkFMSUQ6IDAsXG5cdCAgSU5GTzogMSxcblx0ICBUSU1FOiAyXG5cdH07XG5cdGV4cG9ydHMuZGVmYXVsdCA9IExpbmVQYXJzZXI7XG5cbi8qKiovIH0pLFxuLyogNjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2lzX2pzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHR2YXIgX2lzX2pzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzX2pzKTtcblx0XG5cdHZhciBfbGluZVBhcnNlciA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpO1xuXHRcblx0dmFyIF9saW5lUGFyc2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpbmVQYXJzZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgTHJjID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIExyYygpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMcmMpO1xuXHRcblx0ICAgIHRoaXMuaW5mbyA9IHt9O1xuXHQgICAgdGhpcy5seXJpY3MgPSBbXTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhMcmMsIFt7XG5cdCAgICBrZXk6ICdvZmZzZXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9mZnNldChvZmZzZXRUaW1lKSB7XG5cdCAgICAgIHRoaXMubHlyaWNzLmZvckVhY2goZnVuY3Rpb24gKGx5cmljKSB7XG5cdCAgICAgICAgbHlyaWMudGltZXN0YW1wICs9IG9mZnNldFRpbWU7XG5cdCAgICAgICAgaWYgKGx5cmljLnRpbWVzdGFtcCA8IDApIHtcblx0ICAgICAgICAgIGx5cmljLnRpbWVzdGFtcCA9IDA7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIGdldCBscmMgdGV4dFxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IG9wdHMgb3B0aW9uc1xuXHQgICAgICogQHBhcmFtIHtib29sZWFufSBvcHRzLmNvbWJpbmUgbHlyaWNzIGNvbWJpbmUgYnkgc2FtZSBjb250ZW50XG5cdCAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdHMuc29ydCBseXJpY3Mgc29ydCBieSB0aW1lc3RhbXBcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLmxpbmVGb3JtYXQgbmV3bGluZSBmb3JtYXRcblx0ICAgICAqIEByZXR1cm4ge3N0cmluZ31cblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICd0b1N0cmluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdCAgICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICBvcHRzLmNvbWJpbmUgPSAnY29tYmluZScgaW4gb3B0cyA/IG9wdHMuY29tYmluZSA6IHRydWU7XG5cdCAgICAgIG9wdHMubGluZUZvcm1hdCA9ICdsaW5lRm9ybWF0JyBpbiBvcHRzID8gb3B0cy5saW5lRm9ybWF0IDogJ1xcclxcbic7XG5cdCAgICAgIG9wdHMuc29ydCA9ICdzb3J0JyBpbiBvcHRzID8gb3B0cy5zb3J0IDogdHJ1ZTtcblx0ICAgICAgdmFyIGxpbmVzID0gW10sXG5cdCAgICAgICAgICBseXJpY3NNYXAgPSB7fSxcblx0ICAgICAgICAgIGx5cmljc0xpc3QgPSBbXTtcblx0XG5cdCAgICAgIC8vIGdlbmVyYXRlIGluZm9cblx0ICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuaW5mbykge1xuXHQgICAgICAgIGxpbmVzLnB1c2goJ1snICsga2V5ICsgJzonICsgdGhpcy5pbmZvW2tleV0gKyAnXScpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAob3B0cy5jb21iaW5lKSB7XG5cdCAgICAgICAgLy8gdW5pcXVlbmVzc1xuXHQgICAgICAgIHRoaXMubHlyaWNzLmZvckVhY2goZnVuY3Rpb24gKGx5cmljKSB7XG5cdCAgICAgICAgICBpZiAobHlyaWMuY29udGVudCBpbiBseXJpY3NNYXApIHtcblx0ICAgICAgICAgICAgbHlyaWNzTWFwW2x5cmljLmNvbnRlbnRdLnB1c2gobHlyaWMudGltZXN0YW1wKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGx5cmljc01hcFtseXJpYy5jb250ZW50XSA9IFtseXJpYy50aW1lc3RhbXBdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIC8vIHNvcnRlZFxuXHQgICAgICAgIGZvciAodmFyIGNvbnRlbnQgaW4gbHlyaWNzTWFwKSB7XG5cdCAgICAgICAgICBpZiAob3B0cy5zb3J0KSB7XG5cdCAgICAgICAgICAgIGx5cmljc01hcFtjb250ZW50XS5zb3J0KCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBseXJpY3NMaXN0LnB1c2goe1xuXHQgICAgICAgICAgICB0aW1lc3RhbXBzOiBseXJpY3NNYXBbY29udGVudF0sXG5cdCAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKG9wdHMuc29ydCkge1xuXHQgICAgICAgICAgbHlyaWNzTGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBhLnRpbWVzdGFtcHNbMF0gLSBiLnRpbWVzdGFtcHNbMF07XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGdlbmVyYXRlIGx5cmljc1xuXHQgICAgICAgIGx5cmljc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAobHlyaWMpIHtcblx0ICAgICAgICAgIGxpbmVzLnB1c2goJ1snICsgbHlyaWMudGltZXN0YW1wcy5tYXAoZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuXHQgICAgICAgICAgICByZXR1cm4gTHJjLnRpbWVzdGFtcFRvU3RyaW5nKHRpbWVzdGFtcCk7XG5cdCAgICAgICAgICB9KS5qb2luKCddWycpICsgJ10nICsgKGx5cmljLmNvbnRlbnQgfHwgJycpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmx5cmljcy5mb3JFYWNoKGZ1bmN0aW9uIChseXJpYykge1xuXHQgICAgICAgICAgbGluZXMucHVzaCgnWycgKyBMcmMudGltZXN0YW1wVG9TdHJpbmcobHlyaWMudGltZXN0YW1wKSArICddJyArIChseXJpYy5jb250ZW50IHx8ICcnKSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBsaW5lcy5qb2luKG9wdHMubGluZUZvcm1hdCk7XG5cdCAgICB9XG5cdCAgfV0sIFt7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcGFyc2UgbHJjIHRleHQgYW5kIHJldHVybiBhIExyYyBvYmplY3Rcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG5cdCAgICAgKiBAcmV0dXJuIHtMcmN9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XG5cdCAgICAgIHZhciBseXJpY3MgPSBbXTtcblx0ICAgICAgdmFyIGluZm8gPSB7fTtcblx0ICAgICAgdGV4dC5zcGxpdCgvXFxyXFxufFtcXG5cXHJdL2cpLm1hcChmdW5jdGlvbiAobGluZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgX2xpbmVQYXJzZXIyLmRlZmF1bHQobGluZSk7XG5cdCAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcblx0ICAgICAgICBzd2l0Y2ggKGxpbmUudHlwZSkge1xuXHQgICAgICAgICAgY2FzZSBfbGluZVBhcnNlcjIuZGVmYXVsdC5UWVBFLklORk86XG5cdCAgICAgICAgICAgIGluZm9bbGluZS5rZXldID0gbGluZS52YWx1ZTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICBjYXNlIF9saW5lUGFyc2VyMi5kZWZhdWx0LlRZUEUuVElNRTpcblx0ICAgICAgICAgICAgbGluZS50aW1lc3RhbXBzLmZvckVhY2goZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuXHQgICAgICAgICAgICAgIGx5cmljcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuXHQgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5jb250ZW50XG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHZhciBscmMgPSBuZXcgdGhpcygpO1xuXHQgICAgICBscmMubHlyaWNzID0gbHlyaWNzO1xuXHQgICAgICBscmMuaW5mbyA9IGluZm87XG5cdCAgICAgIHJldHVybiBscmM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2hlY2tMeXJpY09iamVjdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tMeXJpY09iamVjdChseXJpYykge1xuXHQgICAgICByZXR1cm4gX2lzX2pzMi5kZWZhdWx0Lm9iamVjdChseXJpYykgJiYgJ3RpbWVzdGFtcCcgaW4gbHlyaWMgJiYgX2lzX2pzMi5kZWZhdWx0Lm51bWJlcihseXJpYy50aW1lc3RhbXApICYmICdjb250ZW50JyBpbiBseXJpYyAmJiBfaXNfanMyLmRlZmF1bHQuc3RyaW5nKGx5cmljLmNvbnRlbnQpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhZFplcm8nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhZFplcm8obnVtKSB7XG5cdCAgICAgIHZhciBzaXplID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gMiA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdCAgICAgIGlmIChfaXNfanMyLmRlZmF1bHQubnVtYmVyKG51bSkpIHtcblx0ICAgICAgICBudW0gPSBudW0udG9TdHJpbmcoKTtcblx0ICAgICAgfVxuXHQgICAgICB3aGlsZSAobnVtLnNwbGl0KCcuJylbMF0ubGVuZ3RoIDwgc2l6ZSkge1xuXHQgICAgICAgIG51bSA9ICcwJyArIG51bTtcblx0ICAgICAgfXJldHVybiBudW07XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBnZXQgbHJjIHRpbWUgc3RyaW5nXG5cdCAgICAgKiBAZXhhbXBsZVxuXHQgICAgICogTHJjLnRpbWVzdGFtcFRvU3RyaW5nKDE0My41NClcblx0ICAgICAqIC8vIHJldHVybiAnMDI6MjMuNTQnOlxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVzdGFtcCBzZWNvbmQgdGltZXN0YW1wXG5cdCAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAndGltZXN0YW1wVG9TdHJpbmcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVzdGFtcFRvU3RyaW5nKHRpbWVzdGFtcCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5wYWRaZXJvKHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKSkgKyAnOicgKyB0aGlzLnBhZFplcm8oKHRpbWVzdGFtcCAlIDYwKS50b0ZpeGVkKDIpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBMcmM7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IExyYztcblxuLyoqKi8gfSksXG4vKiA2MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfbHJjID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7XG5cdFxuXHR2YXIgX2xyYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9scmMpO1xuXHRcblx0dmFyIF9jbG9uZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHRcblx0dmFyIF9jbG9uZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbG9uZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBSdW5uZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtMcmN9IGxyY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBSdW5uZXIoKSB7XG5cdCAgICB2YXIgbHJjID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gbmV3IF9scmMyLmRlZmF1bHQoKSA6IGFyZ3VtZW50c1swXTtcblx0ICAgIHZhciBvZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzFdO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSdW5uZXIpO1xuXHRcblx0ICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuXHQgICAgdGhpcy5fY3VycmVudEluZGV4ID0gLTE7XG5cdCAgICB0aGlzLnNldExyYyhscmMpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogIEBwYXJhbSB7THJjfSBscmNcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhSdW5uZXIsIFt7XG5cdCAgICBrZXk6ICdzZXRMcmMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldExyYyhscmMpIHtcblx0ICAgICAgdGhpcy5scmMgPSAoMCwgX2Nsb25lMi5kZWZhdWx0KShscmMpO1xuXHQgICAgICB0aGlzLmxyY1VwZGF0ZSgpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2xyY1VwZGF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gbHJjVXBkYXRlKCkge1xuXHQgICAgICBpZiAodGhpcy5vZmZzZXQpIHtcblx0ICAgICAgICB0aGlzLl9vZmZzZXRBbGlnbigpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX3NvcnQoKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfb2Zmc2V0QWxpZ24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9vZmZzZXRBbGlnbigpIHtcblx0ICAgICAgaWYgKCdvZmZzZXQnIGluIHRoaXMubHJjLmluZm8pIHtcblx0ICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQodGhpcy5scmMuaW5mby5vZmZzZXQpIC8gMTAwMDtcblx0ICAgICAgICBpZiAoIWlzTmFOKG9mZnNldCkpIHtcblx0ICAgICAgICAgIHRoaXMubHJjLm9mZnNldChvZmZzZXQpO1xuXHQgICAgICAgICAgZGVsZXRlIHRoaXMubHJjLmluZm8ub2Zmc2V0O1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19zb3J0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfc29ydCgpIHtcblx0ICAgICAgdGhpcy5scmMubHlyaWNzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgICByZXR1cm4gYS50aW1lc3RhbXAgLSBiLnRpbWVzdGFtcDtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAgQHBhcmFtIHtudW1iZXJ9IHRpbWVzdGFtcFxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3RpbWVVcGRhdGUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVVcGRhdGUodGltZXN0YW1wKSB7XG5cdCAgICAgIGlmICh0aGlzLl9jdXJyZW50SW5kZXggPj0gdGhpcy5scmMubHlyaWNzLmxlbmd0aCkge1xuXHQgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRleCA9IHRoaXMubHJjLmx5cmljcy5sZW5ndGggLSAxO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoaXMuX2N1cnJlbnRJbmRleCA8IC0xKSB7XG5cdCAgICAgICAgdGhpcy5fY3VycmVudEluZGV4ID0gLTE7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fY3VycmVudEluZGV4ID0gdGhpcy5fZmluZEluZGV4KHRpbWVzdGFtcCwgdGhpcy5fY3VycmVudEluZGV4KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfZmluZEluZGV4Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfZmluZEluZGV4KHRpbWVzdGFtcCwgc3RhcnRJbmRleCkge1xuXHQgICAgICB2YXIgY3VyRnJvbnRUaW1lc3RhbXAgPSBzdGFydEluZGV4ID09IC0xID8gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIDogdGhpcy5scmMubHlyaWNzW3N0YXJ0SW5kZXhdLnRpbWVzdGFtcDtcblx0XG5cdCAgICAgIHZhciBjdXJCYWNrVGltZXN0YW1wID0gc3RhcnRJbmRleCA9PSB0aGlzLmxyYy5seXJpY3MubGVuZ3RoIC0gMSA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IHRoaXMubHJjLmx5cmljc1tzdGFydEluZGV4ICsgMV0udGltZXN0YW1wO1xuXHRcblx0ICAgICAgaWYgKHRpbWVzdGFtcCA8IGN1ckZyb250VGltZXN0YW1wKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRJbmRleCh0aW1lc3RhbXAsIHN0YXJ0SW5kZXggLSAxKTtcblx0ICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPT09IGN1ckJhY2tUaW1lc3RhbXApIHtcblx0ICAgICAgICBpZiAoY3VyQmFja1RpbWVzdGFtcCA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG5cdCAgICAgICAgICByZXR1cm4gc3RhcnRJbmRleDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHN0YXJ0SW5kZXggKyAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPiBjdXJCYWNrVGltZXN0YW1wKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRJbmRleCh0aW1lc3RhbXAsIHN0YXJ0SW5kZXggKyAxKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gc3RhcnRJbmRleDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldEluZm8nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluZm8oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmxyYy5pbmZvO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldEx5cmljcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0THlyaWNzKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5scmMubHlyaWNzO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogIEByZXR1cm4ge09iamVjdH0geycnfVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldEx5cmljJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMeXJpYygpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdGhpcy5jdXJJbmRleCgpIDogYXJndW1lbnRzWzBdO1xuXHRcblx0ICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPD0gdGhpcy5scmMubHlyaWNzLmxlbmd0aCAtIDEpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5scmMubHlyaWNzW2luZGV4XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZGV4IG5vdCBleGlzdCcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY3VySW5kZXgnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGN1ckluZGV4KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fY3VycmVudEluZGV4O1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2N1ckx5cmljJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjdXJMeXJpYygpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZ2V0THlyaWMoKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSdW5uZXI7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJ1bm5lcjtcblxuLyoqKi8gfSksXG4vKiA2NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIpIHt2YXIgY2xvbmUgPSAoZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBDbG9uZXMgKGNvcGllcykgYW4gT2JqZWN0IHVzaW5nIGRlZXAgY29weWluZy5cblx0ICpcblx0ICogVGhpcyBmdW5jdGlvbiBzdXBwb3J0cyBjaXJjdWxhciByZWZlcmVuY2VzIGJ5IGRlZmF1bHQsIGJ1dCBpZiB5b3UgYXJlIGNlcnRhaW5cblx0ICogdGhlcmUgYXJlIG5vIGNpcmN1bGFyIHJlZmVyZW5jZXMgaW4geW91ciBvYmplY3QsIHlvdSBjYW4gc2F2ZSBzb21lIENQVSB0aW1lXG5cdCAqIGJ5IGNhbGxpbmcgY2xvbmUob2JqLCBmYWxzZSkuXG5cdCAqXG5cdCAqIENhdXRpb246IGlmIGBjaXJjdWxhcmAgaXMgZmFsc2UgYW5kIGBwYXJlbnRgIGNvbnRhaW5zIGNpcmN1bGFyIHJlZmVyZW5jZXMsXG5cdCAqIHlvdXIgcHJvZ3JhbSBtYXkgZW50ZXIgYW4gaW5maW5pdGUgbG9vcCBhbmQgY3Jhc2guXG5cdCAqXG5cdCAqIEBwYXJhbSBgcGFyZW50YCAtIHRoZSBvYmplY3QgdG8gYmUgY2xvbmVkXG5cdCAqIEBwYXJhbSBgY2lyY3VsYXJgIC0gc2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdCB0byBiZSBjbG9uZWQgbWF5IGNvbnRhaW5cblx0ICogICAgY2lyY3VsYXIgcmVmZXJlbmNlcy4gKG9wdGlvbmFsIC0gdHJ1ZSBieSBkZWZhdWx0KVxuXHQgKiBAcGFyYW0gYGRlcHRoYCAtIHNldCB0byBhIG51bWJlciBpZiB0aGUgb2JqZWN0IGlzIG9ubHkgdG8gYmUgY2xvbmVkIHRvXG5cdCAqICAgIGEgcGFydGljdWxhciBkZXB0aC4gKG9wdGlvbmFsIC0gZGVmYXVsdHMgdG8gSW5maW5pdHkpXG5cdCAqIEBwYXJhbSBgcHJvdG90eXBlYCAtIHNldHMgdGhlIHByb3RvdHlwZSB0byBiZSB1c2VkIHdoZW4gY2xvbmluZyBhbiBvYmplY3QuXG5cdCAqICAgIChvcHRpb25hbCAtIGRlZmF1bHRzIHRvIHBhcmVudCBwcm90b3R5cGUpLlxuXHQqL1xuXHRmdW5jdGlvbiBjbG9uZShwYXJlbnQsIGNpcmN1bGFyLCBkZXB0aCwgcHJvdG90eXBlKSB7XG5cdCAgdmFyIGZpbHRlcjtcblx0ICBpZiAodHlwZW9mIGNpcmN1bGFyID09PSAnb2JqZWN0Jykge1xuXHQgICAgZGVwdGggPSBjaXJjdWxhci5kZXB0aDtcblx0ICAgIHByb3RvdHlwZSA9IGNpcmN1bGFyLnByb3RvdHlwZTtcblx0ICAgIGZpbHRlciA9IGNpcmN1bGFyLmZpbHRlcjtcblx0ICAgIGNpcmN1bGFyID0gY2lyY3VsYXIuY2lyY3VsYXJcblx0ICB9XG5cdCAgLy8gbWFpbnRhaW4gdHdvIGFycmF5cyBmb3IgY2lyY3VsYXIgcmVmZXJlbmNlcywgd2hlcmUgY29ycmVzcG9uZGluZyBwYXJlbnRzXG5cdCAgLy8gYW5kIGNoaWxkcmVuIGhhdmUgdGhlIHNhbWUgaW5kZXhcblx0ICB2YXIgYWxsUGFyZW50cyA9IFtdO1xuXHQgIHZhciBhbGxDaGlsZHJlbiA9IFtdO1xuXHRcblx0ICB2YXIgdXNlQnVmZmVyID0gdHlwZW9mIEJ1ZmZlciAhPSAndW5kZWZpbmVkJztcblx0XG5cdCAgaWYgKHR5cGVvZiBjaXJjdWxhciA9PSAndW5kZWZpbmVkJylcblx0ICAgIGNpcmN1bGFyID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHR5cGVvZiBkZXB0aCA9PSAndW5kZWZpbmVkJylcblx0ICAgIGRlcHRoID0gSW5maW5pdHk7XG5cdFxuXHQgIC8vIHJlY3Vyc2UgdGhpcyBmdW5jdGlvbiBzbyB3ZSBkb24ndCByZXNldCBhbGxQYXJlbnRzIGFuZCBhbGxDaGlsZHJlblxuXHQgIGZ1bmN0aW9uIF9jbG9uZShwYXJlbnQsIGRlcHRoKSB7XG5cdCAgICAvLyBjbG9uaW5nIG51bGwgYWx3YXlzIHJldHVybnMgbnVsbFxuXHQgICAgaWYgKHBhcmVudCA9PT0gbnVsbClcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdFxuXHQgICAgaWYgKGRlcHRoID09IDApXG5cdCAgICAgIHJldHVybiBwYXJlbnQ7XG5cdFxuXHQgICAgdmFyIGNoaWxkO1xuXHQgICAgdmFyIHByb3RvO1xuXHQgICAgaWYgKHR5cGVvZiBwYXJlbnQgIT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIHBhcmVudDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY2xvbmUuX19pc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgY2hpbGQgPSBbXTtcblx0ICAgIH0gZWxzZSBpZiAoY2xvbmUuX19pc1JlZ0V4cChwYXJlbnQpKSB7XG5cdCAgICAgIGNoaWxkID0gbmV3IFJlZ0V4cChwYXJlbnQuc291cmNlLCBfX2dldFJlZ0V4cEZsYWdzKHBhcmVudCkpO1xuXHQgICAgICBpZiAocGFyZW50Lmxhc3RJbmRleCkgY2hpbGQubGFzdEluZGV4ID0gcGFyZW50Lmxhc3RJbmRleDtcblx0ICAgIH0gZWxzZSBpZiAoY2xvbmUuX19pc0RhdGUocGFyZW50KSkge1xuXHQgICAgICBjaGlsZCA9IG5ldyBEYXRlKHBhcmVudC5nZXRUaW1lKCkpO1xuXHQgICAgfSBlbHNlIGlmICh1c2VCdWZmZXIgJiYgQnVmZmVyLmlzQnVmZmVyKHBhcmVudCkpIHtcblx0ICAgICAgaWYgKEJ1ZmZlci5hbGxvY1Vuc2FmZSkge1xuXHQgICAgICAgIC8vIE5vZGUuanMgPj0gNC41LjBcblx0ICAgICAgICBjaGlsZCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShwYXJlbnQubGVuZ3RoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBPbGRlciBOb2RlLmpzIHZlcnNpb25zXG5cdCAgICAgICAgY2hpbGQgPSBuZXcgQnVmZmVyKHBhcmVudC5sZW5ndGgpO1xuXHQgICAgICB9XG5cdCAgICAgIHBhcmVudC5jb3B5KGNoaWxkKTtcblx0ICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKHR5cGVvZiBwcm90b3R5cGUgPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwYXJlbnQpO1xuXHQgICAgICAgIGNoaWxkID0gT2JqZWN0LmNyZWF0ZShwcm90byk7XG5cdCAgICAgIH1cblx0ICAgICAgZWxzZSB7XG5cdCAgICAgICAgY2hpbGQgPSBPYmplY3QuY3JlYXRlKHByb3RvdHlwZSk7XG5cdCAgICAgICAgcHJvdG8gPSBwcm90b3R5cGU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY2lyY3VsYXIpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gYWxsUGFyZW50cy5pbmRleE9mKHBhcmVudCk7XG5cdFxuXHQgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcblx0ICAgICAgICByZXR1cm4gYWxsQ2hpbGRyZW5baW5kZXhdO1xuXHQgICAgICB9XG5cdCAgICAgIGFsbFBhcmVudHMucHVzaChwYXJlbnQpO1xuXHQgICAgICBhbGxDaGlsZHJlbi5wdXNoKGNoaWxkKTtcblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKHZhciBpIGluIHBhcmVudCkge1xuXHQgICAgICB2YXIgYXR0cnM7XG5cdCAgICAgIGlmIChwcm90bykge1xuXHQgICAgICAgIGF0dHJzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgaSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChhdHRycyAmJiBhdHRycy5zZXQgPT0gbnVsbCkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGNoaWxkW2ldID0gX2Nsb25lKHBhcmVudFtpXSwgZGVwdGggLSAxKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gY2hpbGQ7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gX2Nsb25lKHBhcmVudCwgZGVwdGgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2ltcGxlIGZsYXQgY2xvbmUgdXNpbmcgcHJvdG90eXBlLCBhY2NlcHRzIG9ubHkgb2JqZWN0cywgdXNlZnVsbCBmb3IgcHJvcGVydHlcblx0ICogb3ZlcnJpZGUgb24gRkxBVCBjb25maWd1cmF0aW9uIG9iamVjdCAobm8gbmVzdGVkIHByb3BzKS5cblx0ICpcblx0ICogVVNFIFdJVEggQ0FVVElPTiEgVGhpcyBtYXkgbm90IGJlaGF2ZSBhcyB5b3Ugd2lzaCBpZiB5b3UgZG8gbm90IGtub3cgaG93IHRoaXNcblx0ICogd29ya3MuXG5cdCAqL1xuXHRjbG9uZS5jbG9uZVByb3RvdHlwZSA9IGZ1bmN0aW9uIGNsb25lUHJvdG90eXBlKHBhcmVudCkge1xuXHQgIGlmIChwYXJlbnQgPT09IG51bGwpXG5cdCAgICByZXR1cm4gbnVsbDtcblx0XG5cdCAgdmFyIGMgPSBmdW5jdGlvbiAoKSB7fTtcblx0ICBjLnByb3RvdHlwZSA9IHBhcmVudDtcblx0ICByZXR1cm4gbmV3IGMoKTtcblx0fTtcblx0XG5cdC8vIHByaXZhdGUgdXRpbGl0eSBmdW5jdGlvbnNcblx0XG5cdGZ1bmN0aW9uIF9fb2JqVG9TdHIobykge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG5cdH07XG5cdGNsb25lLl9fb2JqVG9TdHIgPSBfX29ialRvU3RyO1xuXHRcblx0ZnVuY3Rpb24gX19pc0RhdGUobykge1xuXHQgIHJldHVybiB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiYgX19vYmpUb1N0cihvKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9O1xuXHRjbG9uZS5fX2lzRGF0ZSA9IF9faXNEYXRlO1xuXHRcblx0ZnVuY3Rpb24gX19pc0FycmF5KG8pIHtcblx0ICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIF9fb2JqVG9TdHIobykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH07XG5cdGNsb25lLl9faXNBcnJheSA9IF9faXNBcnJheTtcblx0XG5cdGZ1bmN0aW9uIF9faXNSZWdFeHAobykge1xuXHQgIHJldHVybiB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiYgX19vYmpUb1N0cihvKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH07XG5cdGNsb25lLl9faXNSZWdFeHAgPSBfX2lzUmVnRXhwO1xuXHRcblx0ZnVuY3Rpb24gX19nZXRSZWdFeHBGbGFncyhyZSkge1xuXHQgIHZhciBmbGFncyA9ICcnO1xuXHQgIGlmIChyZS5nbG9iYWwpIGZsYWdzICs9ICdnJztcblx0ICBpZiAocmUuaWdub3JlQ2FzZSkgZmxhZ3MgKz0gJ2knO1xuXHQgIGlmIChyZS5tdWx0aWxpbmUpIGZsYWdzICs9ICdtJztcblx0ICByZXR1cm4gZmxhZ3M7XG5cdH07XG5cdGNsb25lLl9fZ2V0UmVnRXhwRmxhZ3MgPSBfX2dldFJlZ0V4cEZsYWdzO1xuXHRcblx0cmV0dXJuIGNsb25lO1xuXHR9KSgpO1xuXHRcblx0aWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBjbG9uZTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNDMpLkJ1ZmZlcikpXG5cbi8qKiovIH0pLFxuLyogNjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0Lyogc3R5bGVzICovXG5cdF9fd2VicGFja19yZXF1aXJlX18oNjYpXG5cdF9fd2VicGFja19yZXF1aXJlX18oNjgpXG5cdFxuXHR2YXIgQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykoXG5cdCAgLyogc2NyaXB0ICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg3MCksXG5cdCAgLyogdGVtcGxhdGUgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KSxcblx0ICAvKiBzY29wZUlkICovXG5cdCAgXCJkYXRhLXYtMGJjMWQ4NWNcIixcblx0ICAvKiBjc3NNb2R1bGVzICovXG5cdCAgbnVsbFxuXHQpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA2NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KShcIjAwNmUwODNjXCIsIGNvbnRlbnQsIHRydWUpO1xuXG4vKioqLyB9KSxcbi8qIDY3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcInNwYW5bZGF0YS12LTBiYzFkODVjXXtwb3NpdGlvbjpyZWxhdGl2ZX1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogNjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCJkZmIyMjM2MFwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA2OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubWVudXtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjpyZWxhdGl2ZX0ubWVudSB1bHtsaXN0LXN0eWxlLXR5cGU6bm9uZTttYXJnaW46MDtwYWRkaW5nOjB9Lm1lbnUgdWwgbGl7d2hpdGUtc3BhY2U6bm93cmFwO2hlaWdodDoyNXB4O2xpbmUtaGVpZ2h0OjI1cHg7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6I2ZmZjtjb2xvcjojMmE3MmJiO2N1cnNvcjpwb2ludGVyfS5tZW51IHVsIGxpOmhvdmVye2NvbG9yOiMyYTcyYmI7YmFja2dyb3VuZC1jb2xvcjojZThlMWUxfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA3MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90b29sdGlwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdFxuXHR2YXIgX3Rvb2x0aXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdG9vbHRpcCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBkaXI6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIFRvb2x0aXA6IF90b29sdGlwMi5kZWZhdWx0XG5cdCAgfVxuXHR9OyAvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXG4vKioqLyB9KSxcbi8qIDcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdC8qIHN0eWxlcyAqL1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKVxuXHRcblx0dmFyIENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpKFxuXHQgIC8qIHNjcmlwdCAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNzQpLFxuXHQgIC8qIHRlbXBsYXRlICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg3NSksXG5cdCAgLyogc2NvcGVJZCAqL1xuXHQgIG51bGwsXG5cdCAgLyogY3NzTW9kdWxlcyAqL1xuXHQgIG51bGxcblx0KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogNzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCIxYmMyY2VkNVwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA3MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudG9vbHRpcCAud3JhcHtwYWRkaW5nOjhweDtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzJhNzJiYjtib3JkZXItcmFkaXVzOjhweDtib3gtc2hhZG93Oi41cHggLjVweCAzcHggLjVweCAjY2NjfS50b29sdGlwIC53cmFwIC5hcnJvd3twb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDowO2hlaWdodDowO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG99LnRvb2x0aXAgLndyYXAgLmFycm93LmxlZnR7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6LTE2cHg7Ym9yZGVyOjhweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDo4cHggc29saWQgI2ZmZn0udG9vbHRpcCAud3JhcCAuYXJyb3cucmlnaHR7dG9wOjA7Ym90dG9tOjA7bGVmdDotMTZweDtib3JkZXI6OHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yaWdodDo4cHggc29saWQgI2ZmZn0udG9vbHRpcCAud3JhcCAuYXJyb3cudG9we2xlZnQ6MDtyaWdodDowO2JvdHRvbTotMTZweDtib3JkZXI6OHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci10b3A6OHB4IHNvbGlkICNmZmZ9LnRvb2x0aXAgLndyYXAgLmFycm93LmJvdHRvbXtsZWZ0OjA7cmlnaHQ6MDt0b3A6LTE2cHg7Ym9yZGVyOjhweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItYm90dG9tOjhweCBzb2xpZCAjZmZmfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA3NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0dmFyIF9leHRlbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdHZhciBfZXh0ZW5kMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgc3R5bGU6IHtcblx0ICAgICAgICB0b3A6IDAsXG5cdCAgICAgICAgbGVmdDogMCxcblx0ICAgICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJ1xuXHQgICAgICB9LFxuXHQgICAgICBzaG93OiBmYWxzZSxcblx0ICAgICAgZGlyOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBwcm9wczoge1xuXHQgICAgZW50ZXJEZWxheToge1xuXHQgICAgICB0eXBlOiBOdW1iZXIsXG5cdCAgICAgIGRlZmF1bHQ6IDAuMVxuXHQgICAgfSxcblx0ICAgIGxlYXZlRGVsYXk6IHtcblx0ICAgICAgdHlwZTogTnVtYmVyLFxuXHQgICAgICBkZWZhdWx0OiAwLjVcblx0ICAgIH0sXG5cdCAgICB0YXJnZXQ6IHtcblx0ICAgICAgdHlwZTogRWxlbWVudCxcblx0ICAgICAgZGVmYXVsdDogbnVsbFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMudGFyZ2V0ICE9PSBudWxsID8gdGhpcy50YXJnZXQgOiB0aGlzLiRlbDtcblx0ICAgIHZhciB0bHBQb3MgPSBuZXcgX3V0aWxzLlRvb2x0aXBQb3NpdGlvbihwYXJlbnQsIHRoaXMuJHJlZnMud3JhcCk7XG5cdCAgICB2YXIgYXJyb3dTcGFjZSA9IDEwO1xuXHRcblx0ICAgIHZhciBkaG92ZXIgPSBuZXcgX3V0aWxzLkRlbGF5SG92ZXIocGFyZW50LCB7XG5cdCAgICAgIGVudGVyRGVsYXk6IHRoaXMuZW50ZXJEZWxheSxcblx0ICAgICAgbGVhdmVEZWxheTogdGhpcy5sZWF2ZURlbGF5XG5cdCAgICB9KTtcblx0ICAgIGRob3Zlci5ob3ZlcihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBwb3MgPSB0bHBQb3MucG9zaXRpb24oKTtcblx0ICAgICAgX3RoaXMuZGlyID0gcG9zLmRpcjtcblx0ICAgICAgc3dpdGNoIChfdGhpcy5kaXIpIHtcblx0ICAgICAgICBjYXNlICdsZWZ0Jzpcblx0ICAgICAgICAgICgwLCBfZXh0ZW5kMi5kZWZhdWx0KShfdGhpcy5zdHlsZSwge1xuXHQgICAgICAgICAgICB0b3A6IHBvcy5yZWN0LnRvcCArICdweCcsXG5cdCAgICAgICAgICAgIGxlZnQ6IHBvcy5yZWN0LmxlZnQgLSBhcnJvd1NwYWNlICsgJ3B4J1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlICdyaWdodCc6XG5cdCAgICAgICAgICAoMCwgX2V4dGVuZDIuZGVmYXVsdCkoX3RoaXMuc3R5bGUsIHtcblx0ICAgICAgICAgICAgdG9wOiBwb3MucmVjdC50b3AgKyAncHgnLFxuXHQgICAgICAgICAgICBsZWZ0OiBwb3MucmVjdC5sZWZ0ICsgYXJyb3dTcGFjZSArICdweCdcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAndG9wJzpcblx0ICAgICAgICAgICgwLCBfZXh0ZW5kMi5kZWZhdWx0KShfdGhpcy5zdHlsZSwge1xuXHQgICAgICAgICAgICB0b3A6IHBvcy5yZWN0LnRvcCAtIGFycm93U3BhY2UgKyAncHgnLFxuXHQgICAgICAgICAgICBsZWZ0OiBwb3MucmVjdC5sZWZ0ICsgJ3B4J1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlICdib3R0b20nOlxuXHQgICAgICAgICAgKDAsIF9leHRlbmQyLmRlZmF1bHQpKF90aGlzLnN0eWxlLCB7XG5cdCAgICAgICAgICAgIHRvcDogcG9zLnJlY3QudG9wICsgYXJyb3dTcGFjZSArICdweCcsXG5cdCAgICAgICAgICAgIGxlZnQ6IHBvcy5yZWN0LmxlZnQgKyAncHgnXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIGNhc2UgZmFsc2U6XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgX3RoaXMuc2hvdyA9IHRydWU7XG5cdCAgICB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLnNob3cgPSBmYWxzZTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIHdhdGNoOiB7XG5cdCAgICBzaG93OiB7XG5cdCAgICAgIGltbWVkaWF0ZTogdHJ1ZSxcblx0ICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICB0aGlzLnN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLnNob3cgPyAndmlzaWJsZScgOiAnaGlkZGVuJztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG5cdCAgcmV0dXJuIF9jKCdzcGFuJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwidG9vbHRpcFwiXG5cdCAgfSwgW192bS5fdChcInRhcmdldFwiKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcblx0ICAgIHJlZjogXCJ3cmFwXCIsXG5cdCAgICBzdGF0aWNDbGFzczogXCJ3cmFwXCIsXG5cdCAgICBzdHlsZTogKF92bS5zdHlsZSlcblx0ICB9LCBbX2MoJ2RpdicsIHtcblx0ICAgIGNsYXNzOiAnYXJyb3cgJyArIF92bS5kaXJcblx0ICB9KSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImNvbnRlbnRcIlxuXHQgIH0sIFtfdm0uX3QoXCJjb250ZW50XCIpXSwgMildKV0sIDIpXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiA3NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG5cdCAgcmV0dXJuIF9jKCdkaXYnLCB7XG5cdCAgICByZWY6IFwibWVudVwiLFxuXHQgICAgc3RhdGljQ2xhc3M6IFwibWVudVwiXG5cdCAgfSwgW19jKCd0b29sdGlwJywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJkaXJcIjogX3ZtLmRpcixcblx0ICAgICAgXCJ0YXJnZXRcIjogX3ZtLiRyZWZzLm1lbnUsXG5cdCAgICAgIFwiZW50ZXItZGVsYXlcIjogMFxuXHQgICAgfVxuXHQgIH0sIFtfYygnZGl2Jywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJzbG90XCI6IFwidGFyZ2V0XCJcblx0ICAgIH0sXG5cdCAgICBzbG90OiBcInRhcmdldFwiXG5cdCAgfSwgW192bS5fdChcInRhcmdldFwiKV0sIDIpLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJzbG90XCI6IFwiY29udGVudFwiXG5cdCAgICB9LFxuXHQgICAgc2xvdDogXCJjb250ZW50XCJcblx0ICB9LCBbX3ZtLl90KFwibGlzdFwiKV0sIDIpXSldLCAxKVxuXHR9LHN0YXRpY1JlbmRlckZuczogW119XG5cbi8qKiovIH0pLFxuLyogNzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiAoX3ZtLmVkaXRpbmcpID8gX2MoJ3VsJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiZWRpdGluZyBseXJpY3NcIlxuXHQgIH0sIFtfdm0uX2woKF92bS5ydW5uZXIubHJjLmx5cmljcyksIGZ1bmN0aW9uKGx5cmljLCBpKSB7XG5cdCAgICByZXR1cm4gX2MoJ2xpJywge1xuXHQgICAgICBjbGFzczoge1xuXHQgICAgICAgIGN1cjogaSA9PSBfdm0uaW5kZXhcblx0ICAgICAgfSxcblx0ICAgICAgYXR0cnM6IHtcblx0ICAgICAgICBcInRpdGxlXCI6IGx5cmljLnRpbWVzdGFtcFxuXHQgICAgICB9LFxuXHQgICAgICBvbjoge1xuXHQgICAgICAgIFwiZGJsY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgICBfdm0uZWRpdChpKVxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgXCJjb250ZXh0bWVudVwiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgX3ZtLmVkaXRNZW51KGkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCBbKF92bS5lZGl0aW5nSW5kZXggPT0gaSkgPyBbX2MoJ2lucHV0Jywge1xuXHQgICAgICBkaXJlY3RpdmVzOiBbe1xuXHQgICAgICAgIG5hbWU6IFwibW9kZWxcIixcblx0ICAgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcblx0ICAgICAgICB2YWx1ZTogKGx5cmljLnRpbWVzdGFtcCksXG5cdCAgICAgICAgZXhwcmVzc2lvbjogXCJseXJpYy50aW1lc3RhbXBcIlxuXHQgICAgICB9XSxcblx0ICAgICAgc3RhdGljQ2xhc3M6IFwidGltZXN0YW1wXCIsXG5cdCAgICAgIGF0dHJzOiB7XG5cdCAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiXG5cdCAgICAgIH0sXG5cdCAgICAgIGRvbVByb3BzOiB7XG5cdCAgICAgICAgXCJ2YWx1ZVwiOiAobHlyaWMudGltZXN0YW1wKVxuXHQgICAgICB9LFxuXHQgICAgICBvbjoge1xuXHQgICAgICAgIFwia2V5ZG93blwiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAgIGlmICghKCdidXR0b24nIGluICRldmVudCkgJiYgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcImVudGVyXCIsIDEzLCAkZXZlbnQua2V5LCBcIkVudGVyXCIpKSB7IHJldHVybiBudWxsOyB9XG5cdCAgICAgICAgICByZXR1cm4gX3ZtLmV4aXRFZGl0KCRldmVudClcblx0ICAgICAgICB9LFxuXHQgICAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgICBfdm0uJHNldChseXJpYywgXCJ0aW1lc3RhbXBcIiwgJGV2ZW50LnRhcmdldC52YWx1ZSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygnaW5wdXQnLCB7XG5cdCAgICAgIGRpcmVjdGl2ZXM6IFt7XG5cdCAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuXHQgICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuXHQgICAgICAgIHZhbHVlOiAobHlyaWMuY29udGVudCksXG5cdCAgICAgICAgZXhwcmVzc2lvbjogXCJseXJpYy5jb250ZW50XCJcblx0ICAgICAgfV0sXG5cdCAgICAgIHN0YXRpY0NsYXNzOiBcImNvbnRlbnRcIixcblx0ICAgICAgYXR0cnM6IHtcblx0ICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCJcblx0ICAgICAgfSxcblx0ICAgICAgZG9tUHJvcHM6IHtcblx0ICAgICAgICBcInZhbHVlXCI6IChseXJpYy5jb250ZW50KVxuXHQgICAgICB9LFxuXHQgICAgICBvbjoge1xuXHQgICAgICAgIFwia2V5ZG93blwiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAgIGlmICghKCdidXR0b24nIGluICRldmVudCkgJiYgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcImVudGVyXCIsIDEzLCAkZXZlbnQua2V5LCBcIkVudGVyXCIpKSB7IHJldHVybiBudWxsOyB9XG5cdCAgICAgICAgICByZXR1cm4gX3ZtLmV4aXRFZGl0KCRldmVudClcblx0ICAgICAgICB9LFxuXHQgICAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgICBfdm0uJHNldChseXJpYywgXCJjb250ZW50XCIsICRldmVudC50YXJnZXQudmFsdWUpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KV0gOiBbX2MoJ2RpdicsIHtcblx0ICAgICAgc3RhdGljQ2xhc3M6IFwidGltZXN0YW1wXCJcblx0ICAgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS5fZihcInRpbWVcIikobHlyaWMudGltZXN0YW1wKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICAgIHN0YXRpY0NsYXNzOiBcImNvbnRlbnRcIlxuXHQgICAgfSwgW192bS5fdihfdm0uX3MobHlyaWMuY29udGVudCkpXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICAgIHN0YXRpY0NsYXNzOiBcImljb24tYnRuIGNvbmNlYWxcIlxuXHQgICAgfSwgW19jKCd0bWVudScsIFtfYygnZGl2Jywge1xuXHQgICAgICBhdHRyczoge1xuXHQgICAgICAgIFwic2xvdFwiOiBcInRhcmdldFwiXG5cdCAgICAgIH0sXG5cdCAgICAgIHNsb3Q6IFwidGFyZ2V0XCJcblx0ICAgIH0sIFtfYygnaScsIHtcblx0ICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1lbGxpcHNpcy12ZXJ0XCJcblx0ICAgIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCd1bCcsIHtcblx0ICAgICAgYXR0cnM6IHtcblx0ICAgICAgICBcInNsb3RcIjogXCJsaXN0XCJcblx0ICAgICAgfSxcblx0ICAgICAgc2xvdDogXCJsaXN0XCJcblx0ICAgIH0sIFtfYygnbGknLCB7XG5cdCAgICAgIG9uOiB7XG5cdCAgICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAgIF92bS5yZW1vdmVUaW1lc3RhbXAoaSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIFtfYygnaScsIHtcblx0ICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1jYW5jZWxcIlxuXHQgICAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ2x5cmljX2VkaXRvci5yZW1vdmVfdGltZXN0YW1wJykpICsgXCJcXG4gICAgICAgICAgICBcIildKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2xpJywge1xuXHQgICAgICBvbjoge1xuXHQgICAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgICBfdm0uZWRpdChpKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwgW19jKCdpJywge1xuXHQgICAgICBzdGF0aWNDbGFzczogXCJpY29uLWVkaXRcIlxuXHQgICAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ2x5cmljX2VkaXRvci5lZGl0JykpICsgXCJcXG4gICAgICAgICAgICBcIildKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2xpJywge1xuXHQgICAgICBvbjoge1xuXHQgICAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgICBfdm0uaW5zZXJ0KGkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCBbX2MoJ2knLCB7XG5cdCAgICAgIHN0YXRpY0NsYXNzOiBcImljb24tcGx1c1wiXG5cdCAgICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLmFkZCcpKSArIFwiXFxuICAgICAgICAgICAgXCIpXSksIF92bS5fdihcIiBcIiksIF9jKCdsaScsIHtcblx0ICAgICAgb246IHtcblx0ICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgICAgX3ZtLnJlbW92ZShpKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwgW19jKCdpJywge1xuXHQgICAgICBzdGF0aWNDbGFzczogXCJpY29uLXRyYXNoXCJcblx0ICAgIH0pLCBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KCdseXJpY19lZGl0b3IucmVtb3ZlJykpICsgXCJcXG4gICAgICAgICAgICBcIildKV0pXSldLCAxKV1dLCAyKVxuXHQgIH0pLCBfdm0uX3YoXCIgXCIpLCAoX3ZtLmx5cmljQXJyYXkubGVuZ3RoKSA/IF9jKCdsaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImRpdmlzaW9uXCJcblx0ICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ2x5cmljX2VkaXRvci5mb2xsb3dpbmdfdW5zb3J0ZWQnKSkpXSkgOiBfdm0uX2UoKSwgX3ZtLl92KFwiIFwiKSwgX3ZtLl9sKChfdm0ubHlyaWNBcnJheSksIGZ1bmN0aW9uKGx5cmljLCBpKSB7XG5cdCAgICByZXR1cm4gX2MoJ2xpJywge1xuXHQgICAgICBzdGF0aWNDbGFzczogXCJ1bnNvcnRlZFwiLFxuXHQgICAgICBhdHRyczoge1xuXHQgICAgICAgIFwidHJhY2stYnlcIjogXCJpXCJcblx0ICAgICAgfSxcblx0ICAgICAgb246IHtcblx0ICAgICAgICBcImRibGNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgICAgX3ZtLmVkaXRUZXh0KGkpXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBcImNvbnRleHRtZW51XCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgICBfdm0uZWRpdE1lbnUoaSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIFsoX3ZtLmVkaXRpbmdUZXh0SW5kZXggPT0gaSkgPyBbX2MoJ2lucHV0Jywge1xuXHQgICAgICBkaXJlY3RpdmVzOiBbe1xuXHQgICAgICAgIG5hbWU6IFwibW9kZWxcIixcblx0ICAgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcblx0ICAgICAgICB2YWx1ZTogKF92bS5seXJpY0FycmF5W2ldKSxcblx0ICAgICAgICBleHByZXNzaW9uOiBcImx5cmljQXJyYXlbaV1cIlxuXHQgICAgICB9XSxcblx0ICAgICAgc3RhdGljQ2xhc3M6IFwiY29udGVudFwiLFxuXHQgICAgICBhdHRyczoge1xuXHQgICAgICAgIFwidHlwZVwiOiBcInRleHRcIlxuXHQgICAgICB9LFxuXHQgICAgICBkb21Qcm9wczoge1xuXHQgICAgICAgIFwidmFsdWVcIjogKF92bS5seXJpY0FycmF5W2ldKVxuXHQgICAgICB9LFxuXHQgICAgICBvbjoge1xuXHQgICAgICAgIFwia2V5ZG93blwiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAgIGlmICghKCdidXR0b24nIGluICRldmVudCkgJiYgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcImVudGVyXCIsIDEzLCAkZXZlbnQua2V5LCBcIkVudGVyXCIpKSB7IHJldHVybiBudWxsOyB9XG5cdCAgICAgICAgICByZXR1cm4gX3ZtLmV4aXRFZGl0KCRldmVudClcblx0ICAgICAgICB9LFxuXHQgICAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgICBfdm0uJHNldChfdm0ubHlyaWNBcnJheSwgaSwgJGV2ZW50LnRhcmdldC52YWx1ZSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pXSA6IFtfYygnZGl2Jywge1xuXHQgICAgICBzdGF0aWNDbGFzczogXCJjb250ZW50XCJcblx0ICAgIH0sIFtfdm0uX3YoX3ZtLl9zKGx5cmljKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcblx0ICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1idG4gY29uY2VhbFwiXG5cdCAgICB9LCBbX2MoJ3RtZW51JywgW19jKCdkaXYnLCB7XG5cdCAgICAgIGF0dHJzOiB7XG5cdCAgICAgICAgXCJzbG90XCI6IFwidGFyZ2V0XCJcblx0ICAgICAgfSxcblx0ICAgICAgc2xvdDogXCJ0YXJnZXRcIlxuXHQgICAgfSwgW19jKCdpJywge1xuXHQgICAgICBzdGF0aWNDbGFzczogXCJpY29uLWVsbGlwc2lzLXZlcnRcIlxuXHQgICAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3VsJywge1xuXHQgICAgICBhdHRyczoge1xuXHQgICAgICAgIFwic2xvdFwiOiBcImxpc3RcIlxuXHQgICAgICB9LFxuXHQgICAgICBzbG90OiBcImxpc3RcIlxuXHQgICAgfSwgW19jKCdsaScsIHtcblx0ICAgICAgb246IHtcblx0ICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgICAgX3ZtLmVkaXRUZXh0KGkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCBbX2MoJ2knLCB7XG5cdCAgICAgIHN0YXRpY0NsYXNzOiBcImljb24tZWRpdFwiXG5cdCAgICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLmVkaXQnKSkgKyBcIlxcbiAgICAgICAgICAgIFwiKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbGknLCB7XG5cdCAgICAgIG9uOiB7XG5cdCAgICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAgIF92bS5pbnNlcnRUZXh0KGkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCBbX2MoJ2knLCB7XG5cdCAgICAgIHN0YXRpY0NsYXNzOiBcImljb24tcGx1c1wiXG5cdCAgICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLmFkZCcpKSArIFwiXFxuICAgICAgICAgICAgXCIpXSksIF92bS5fdihcIiBcIiksIF9jKCdsaScsIHtcblx0ICAgICAgb246IHtcblx0ICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgICAgX3ZtLnJlbW92ZVRleHQoaSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIFtfYygnaScsIHtcblx0ICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi10cmFzaFwiXG5cdCAgICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLnJlbW92ZScpKSArIFwiXFxuICAgICAgICAgICAgXCIpXSldKV0pXSwgMSldXSwgMilcblx0ICB9KV0sIDIpIDogX2MoJ3VsJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwibHlyaWNzXCJcblx0ICB9LCBbX3ZtLl9sKChfdm0ucnVubmVyLmxyYy5seXJpY3MpLCBmdW5jdGlvbihseXJpYywgaSkge1xuXHQgICAgcmV0dXJuIF9jKCdsaScsIHtcblx0ICAgICAgY2xhc3M6IHtcblx0ICAgICAgICBjdXI6IGkgPT0gX3ZtLmluZGV4XG5cdCAgICAgIH0sXG5cdCAgICAgIGF0dHJzOiB7XG5cdCAgICAgICAgXCJ0aXRsZVwiOiBseXJpYy50aW1lc3RhbXBcblx0ICAgICAgfSxcblx0ICAgICAgb246IHtcblx0ICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgICAgX3ZtLnBsYXl0byhseXJpYy50aW1lc3RhbXApXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCBbX3ZtLl92KFwiXFxuICAgIFwiICsgX3ZtLl9zKGx5cmljLmNvbnRlbnQpICsgXCJcXG4gIFwiKV0pXG5cdCAgfSksIF92bS5fdihcIiBcIiksIChfdm0ubHlyaWNBcnJheS5sZW5ndGgpID8gX2MoJ2xpJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiZGl2aXNpb25cIlxuXHQgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLmZvbGxvd2luZ191bnNvcnRlZCcpKSldKSA6IF92bS5fZSgpLCBfdm0uX3YoXCIgXCIpLCBfdm0uX2woKF92bS5seXJpY0FycmF5KSwgZnVuY3Rpb24obHlyaWMsIGkpIHtcblx0ICAgIHJldHVybiBfYygnbGknLCB7XG5cdCAgICAgIHN0YXRpY0NsYXNzOiBcInVuc29ydGVkXCIsXG5cdCAgICAgIGF0dHJzOiB7XG5cdCAgICAgICAgXCJ0cmFjay1ieVwiOiBcImlcIlxuXHQgICAgICB9XG5cdCAgICB9LCBbX3ZtLl92KFwiXFxuICAgIFwiICsgX3ZtLl9zKGx5cmljKSArIFwiXFxuICBcIildKVxuXHQgIH0pXSwgMilcblx0fSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG4vKioqLyB9KSxcbi8qIDc4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdC8qIHN0eWxlcyAqL1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKVxuXHRcblx0dmFyIENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpKFxuXHQgIC8qIHNjcmlwdCAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oODMpLFxuXHQgIC8qIHRlbXBsYXRlICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg5OCksXG5cdCAgLyogc2NvcGVJZCAqL1xuXHQgIFwiZGF0YS12LTcyZDI5ZTcwXCIsXG5cdCAgLyogY3NzTW9kdWxlcyAqL1xuXHQgIG51bGxcblx0KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogNzkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCIzMTY1N2M0OVwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA4MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubW9kYWwgLmZvb3RlciAuYnRuLWdyb3VwW2RhdGEtdi03MmQyOWU3MF06YWZ0ZXIsLm1vZGFsIC5oZWFkZXJbZGF0YS12LTcyZDI5ZTcwXTphZnRlcntjb250ZW50OlxcXCIgXFxcIjtkaXNwbGF5OnRhYmxlO2NsZWFyOmJvdGh9LmNvdmVyW2RhdGEtdi03MmQyOWU3MF17cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNyk7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt6LWluZGV4OjEwMDA7b3ZlcmZsb3c6YXV0b30ubW9kYWxbZGF0YS12LTcyZDI5ZTcwXXtwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46MzBweCBhdXRvO2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjhweDtvdmVyZmxvdzpoaWRkZW59Lm1vZGFsLmxnW2RhdGEtdi03MmQyOWU3MF17d2lkdGg6NTAlfS5tb2RhbC5tZFtkYXRhLXYtNzJkMjllNzBde3dpZHRoOjcwJX0ubW9kYWwuc21bZGF0YS12LTcyZDI5ZTcwXXt3aWR0aDo5MCV9Lm1vZGFsIC5ib2R5W2RhdGEtdi03MmQyOWU3MF0sLm1vZGFsIC5mb290ZXJbZGF0YS12LTcyZDI5ZTcwXSwubW9kYWwgLmhlYWRlcltkYXRhLXYtNzJkMjllNzBde3BhZGRpbmctbGVmdDoxNHB4O3BhZGRpbmctcmlnaHQ6MTRweH0ubW9kYWwgLmJvZHlbZGF0YS12LTcyZDI5ZTcwXSwubW9kYWwgLmhlYWRlcltkYXRhLXYtNzJkMjllNzBde3BhZGRpbmctdG9wOjE0cHg7cGFkZGluZy1ib3R0b206MTRweH0ubW9kYWwgLmZvb3RlcltkYXRhLXYtNzJkMjllNzBdLC5tb2RhbCAuaGVhZGVyW2RhdGEtdi03MmQyOWU3MF17Y29sb3I6IzJhNzJiYn0ubW9kYWwgLmhlYWRlcltkYXRhLXYtNzJkMjllNzBde2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlNWU1ZTU7Zm9udC13ZWlnaHQ6Ym9sZGVyfS5tb2RhbCAuaGVhZGVyIC5pY29uLWNhbmNlbFtkYXRhLXYtNzJkMjllNzBde2Zsb2F0OnJpZ2h0O2N1cnNvcjpwb2ludGVyfS5tb2RhbCAuZm9vdGVyW2RhdGEtdi03MmQyOWU3MF17Ym9yZGVyLXRvcDoxcHggc29saWQgI2U1ZTVlNX0ubW9kYWwgLmZvb3RlciAuYnRuLWdyb3VwIC5idG5bZGF0YS12LTcyZDI5ZTcwXXtmbG9hdDpyaWdodDtib3JkZXItcmFkaXVzOjA7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtjb2xvcjojMmE3MmJiO3BhZGRpbmc6OHB4IDEwcHh9Lm1vZGFsIC5mb290ZXIgLmJ0bi1ncm91cCAuYnRuW2RhdGEtdi03MmQyOWU3MF06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4xKX1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogODEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCI3NzQ5ZDJjNlwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA4MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubW9kYWwgaDN7bWFyZ2luOjEwcHggMH0ubW9kYWwgdGV4dGFyZWF7d2lkdGg6MTAwJTtib3JkZXI6MXB4IHNvbGlkICNkNmQ2ZDY7Ym9yZGVyLXJhZGl1czo1cHg7bWluLWhlaWdodDozMDBweDttYXJnaW46MTBweCAwfS5tb2RhbCBwe21hcmdpbjowfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA4MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgLy9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0XG5cdHZhciBfdnVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfdnVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZSk7XG5cdFxuXHR2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHR2YXIgX2hlbHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTtcblx0XG5cdHZhciBfaGVscDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxwKTtcblx0XG5cdHZhciBfbHJjRm9ybWF0VXBsb2FkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7XG5cdFxuXHR2YXIgX2xyY0Zvcm1hdFVwbG9hZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9scmNGb3JtYXRVcGxvYWQpO1xuXHRcblx0dmFyIF9seXJpY1VwbG9hZCA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpO1xuXHRcblx0dmFyIF9seXJpY1VwbG9hZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9seXJpY1VwbG9hZCk7XG5cdFxuXHR2YXIgX2xyY1NhdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblx0XG5cdHZhciBfbHJjU2F2ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9scmNTYXZlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgQ09NUE9ORU5UUyA9IHtcblx0ICAnaGVscCc6IF9oZWxwMi5kZWZhdWx0LFxuXHQgICdscmMtZm9ybWF0LXVwbG9hZCc6IF9scmNGb3JtYXRVcGxvYWQyLmRlZmF1bHQsXG5cdCAgJ2x5cmljLXVwbG9hZCc6IF9seXJpY1VwbG9hZDIuZGVmYXVsdCxcblx0ICAnbHJjLXNhdmUnOiBfbHJjU2F2ZTIuZGVmYXVsdFxuXHR9O1xuXHRcblx0d2luZG93Lk1DID0gW107XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHRpdGxlOiAnTW9kYWwnLFxuXHQgICAgICBzaXplOiAnbWQnLFxuXHQgICAgICBjb25maXJtOiBmYWxzZSxcblx0ICAgICAgbW9kYWxOYW1lOiAnJyxcblx0ICAgICAgbW9kYWxDb21wb25lbnQ6IG51bGwsXG5cdCAgICAgIGlzU2hvdzogZmFsc2UsXG5cdCAgICAgIGNvdmVyU2hvdzogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgbWV0aG9kczoge1xuXHQgICAgc2hvdzogZnVuY3Rpb24gc2hvdyhtb2RhbE5hbWUpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5jb3ZlclNob3cgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMubW9kYWxOYW1lID0gbW9kYWxOYW1lO1xuXHQgICAgICAgIF90aGlzLm1vZGFsQ29tcG9uZW50ID0gbmV3IF92dWUyLmRlZmF1bHQoX2V4dGVuZHMoe30sIENPTVBPTkVOVFNbX3RoaXMubW9kYWxOYW1lXSkpO1xuXHQgICAgICAgIF90aGlzLm1vZGFsQ29tcG9uZW50LiRtb3VudChfdGhpcy4kcmVmcy5tb2RhbFdyYXBwZXIpO1xuXHRcblx0ICAgICAgICBpZiAoX3RoaXMubW9kYWxDb21wb25lbnQudGl0bGUpIHtcblx0ICAgICAgICAgIF90aGlzLnRpdGxlID0gX3RoaXMubW9kYWxDb21wb25lbnQudGl0bGU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChfdGhpcy5tb2RhbENvbXBvbmVudC5zaXplKSB7XG5cdCAgICAgICAgICBfdGhpcy50aXRsZSA9IF90aGlzLm1vZGFsQ29tcG9uZW50LnNpemU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChfdGhpcy5tb2RhbENvbXBvbmVudC5jb25maXJtKSB7XG5cdCAgICAgICAgICBfdGhpcy5jb25maXJtID0gX3RoaXMubW9kYWxDb21wb25lbnQuY29uZmlybTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHQgICAgb2s6IGZ1bmN0aW9uIG9rKCkge1xuXHQgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xuXHQgICAgICB0aGlzLm1vZGFsQ29tcG9uZW50LiRlbWl0KCdvaycpO1xuXHQgICAgICB0aGlzLm1vZGFsQ29tcG9uZW50LiRkZXN0cm95KCk7XG5cdCAgICB9LFxuXHQgICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XG5cdCAgICAgIHRoaXMubW9kYWxDb21wb25lbnQuJGVtaXQoJ2NhbmNlbCcpO1xuXHQgICAgICB0aGlzLm1vZGFsQ29tcG9uZW50LiRkZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge1xuXHQgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgX3V0aWxzLmdsb2JhbEtleWRvd24ub24oJ2VzY2FwZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF90aGlzMi5pc1Nob3cpIHtcblx0ICAgICAgICBfdGhpczIuY2FuY2VsKCk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEhlbHA6IF9oZWxwMi5kZWZhdWx0LFxuXHQgICAgTHJjRm9ybWF0VXBsb2FkOiBfbHJjRm9ybWF0VXBsb2FkMi5kZWZhdWx0LFxuXHQgICAgTHlyaWNVcGxvYWQ6IF9seXJpY1VwbG9hZDIuZGVmYXVsdCxcblx0ICAgIExyY1NhdmU6IF9scmNTYXZlMi5kZWZhdWx0XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDg0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdC8qIHN0eWxlcyAqL1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KVxuXHRcblx0dmFyIENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpKFxuXHQgIC8qIHNjcmlwdCAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oODcpLFxuXHQgIC8qIHRlbXBsYXRlICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg4OCksXG5cdCAgLyogc2NvcGVJZCAqL1xuXHQgIFwiZGF0YS12LWE2NTgzNmRhXCIsXG5cdCAgLyogY3NzTW9kdWxlcyAqL1xuXHQgIG51bGxcblx0KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogODUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nik7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkoXCI1ZmNkZjRlMlwiLCBjb250ZW50LCB0cnVlKTtcblxuLyoqKi8gfSksXG4vKiA4NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaGVscFtkYXRhLXYtYTY1ODM2ZGFde2NvbG9yOiMzMzN9LmhlbHAgYVtkYXRhLXYtYTY1ODM2ZGFdLC5oZWxwIGgzW2RhdGEtdi1hNjU4MzZkYV0sLmhlbHAgaDRbZGF0YS12LWE2NTgzNmRhXXtjb2xvcjojMmE3MmJifS5oZWxwIGgzW2RhdGEtdi1hNjU4MzZkYV17bWFyZ2luOjVweCAwfS5oZWxwIGg0W2RhdGEtdi1hNjU4MzZkYV17bWFyZ2luOjB9LmhlbHAgYVtkYXRhLXYtYTY1ODM2ZGFde2ZvbnQtd2VpZ2h0OmJvbGRlcn0uaGVscCB1bFtkYXRhLXYtYTY1ODM2ZGFde2xpc3Qtc3R5bGUtdHlwZTpub25lO3BhZGRpbmc6MCAwIDAgMjBweH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogODcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcGFja2FnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHRcblx0dmFyIF9wYWNrYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhY2thZ2UpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgUEtHOiBfcGFja2FnZTIuZGVmYXVsdCxcblx0ICAgICAgdGl0bGU6IHRoaXMuJHQoJ21vZGFsLmhlbHAudGl0bGUnKVxuXHQgICAgfTtcblx0ICB9XG5cdH07IC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cbi8qKiovIH0pLFxuLyogODggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiaGVscFwiXG5cdCAgfSwgW19jKCdoMycsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5zaG9ydGN1dF9rZXknKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCdoNCcsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5wbGF5X2NvbnRyb2wudGl0bGUnKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCd1bCcsIFtfYygnbGknLCBbX2MoJ3N0cm9uZycsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5wbGF5X2NvbnRyb2wubGVmdF9rZXknKSkgKyBcIjpcIildKSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5wbGF5X2NvbnRyb2wuYmFja3dhcmQnKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCdsaScsIFtfYygnc3Ryb25nJywgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5oZWxwLnBsYXlfY29udHJvbC5yaWdodF9rZXknKSkgKyBcIjpcIildKSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5wbGF5X2NvbnRyb2wuZm9yd2FyZCcpKSldKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnaDQnLCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAubWFrZV9scmMudGl0bGUnKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCd1bCcsIFtfYygnbGknLCBbX2MoJ3N0cm9uZycsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5tYWtlX2xyYy51cF9rZXknKSkgKyBcIjpcIildKSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5tYWtlX2xyYy5wcmV2X2x5cmljJykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbGknLCBbX2MoJ3N0cm9uZycsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5tYWtlX2xyYy5kb3duX2tleScpKSArIFwiOlwiKV0pLCBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KCdtb2RhbC5oZWxwLm1ha2VfbHJjLm5leHRfbHlyaWMnKSkpXSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImxpbmtcIlxuXHQgIH0sIFtfYygnYScsIHtcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwiaHJlZlwiOiBfdm0uUEtHLmhvbWVwYWdlLFxuXHQgICAgICBcInRhcmdldFwiOiBcIl9ibGFua1wiXG5cdCAgICB9XG5cdCAgfSwgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5oZWxwLnNvdXJjZV9jb2RlJykpICsgXCI6IGdpdGh1YlwiKV0pXSldKVxuXHR9LHN0YXRpY1JlbmRlckZuczogW119XG5cbi8qKiovIH0pLFxuLyogODkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykoXG5cdCAgLyogc2NyaXB0ICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg5MCksXG5cdCAgLyogdGVtcGxhdGUgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKSxcblx0ICAvKiBzY29wZUlkICovXG5cdCAgbnVsbCxcblx0ICAvKiBjc3NNb2R1bGVzICovXG5cdCAgbnVsbFxuXHQpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA5MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF91cGxvYWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdHZhciBfdXBsb2FkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VwbG9hZCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB0aXRsZTogdGhpcy4kdCgnbW9kYWwubHJjX2Zvcm1hdF91cGxvYWQudGl0bGUnKSxcblx0ICAgICAgbHlyaWM6ICcnLFxuXHQgICAgICBjb25maXJtOiB0cnVlXG5cdCAgICB9O1xuXHQgIH0sXG5cdCAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5seXJpYyA9IHRoaXMuJEFwcC5scmNGb3JtYXQ7XG5cdCAgICB0aGlzLiRvbignb2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLiRBcHAubHJjRm9ybWF0ID0gX3RoaXMubHlyaWM7XG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZChseXJpYykge1xuXHQgICAgICB0aGlzLmx5cmljID0gbHlyaWM7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBVcGxvYWQ6IF91cGxvYWQyLmRlZmF1bHRcblx0ICB9XG5cdH07IC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cbi8qKiovIH0pLFxuLyogOTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2JywgW19jKCdwJywgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5scmNfZm9ybWF0X3VwbG9hZC5kZXNjcmlwdGlvbicpKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3RleHRhcmVhJywge1xuXHQgICAgZGlyZWN0aXZlczogW3tcblx0ICAgICAgbmFtZTogXCJtb2RlbFwiLFxuXHQgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcblx0ICAgICAgdmFsdWU6IChfdm0ubHlyaWMpLFxuXHQgICAgICBleHByZXNzaW9uOiBcImx5cmljXCJcblx0ICAgIH1dLFxuXHQgICAgZG9tUHJvcHM6IHtcblx0ICAgICAgXCJ2YWx1ZVwiOiAoX3ZtLmx5cmljKVxuXHQgICAgfSxcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7IHJldHVybjsgfVxuXHQgICAgICAgIF92bS5seXJpYyA9ICRldmVudC50YXJnZXQudmFsdWVcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygndXBsb2FkJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiYnRuXCIsXG5cdCAgICBvbjoge1xuXHQgICAgICBcInVwbG9hZFwiOiBfdm0udXBsb2FkXG5cdCAgICB9XG5cdCAgfSwgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5scmNfZm9ybWF0X3VwbG9hZC51cGxvYWQnKSkpXSldLCAxKVxuXHR9LHN0YXRpY1JlbmRlckZuczogW119XG5cbi8qKiovIH0pLFxuLyogOTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykoXG5cdCAgLyogc2NyaXB0ICovXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg5MyksXG5cdCAgLyogdGVtcGxhdGUgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KSxcblx0ICAvKiBzY29wZUlkICovXG5cdCAgbnVsbCxcblx0ICAvKiBjc3NNb2R1bGVzICovXG5cdCAgbnVsbFxuXHQpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA5MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF91cGxvYWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdHZhciBfdXBsb2FkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VwbG9hZCk7XG5cdFxuXHR2YXIgX2NhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdFxuXHR2YXIgX2NhY2hlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NhY2hlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB0aXRsZTogdGhpcy4kdCgnbW9kYWwubHlyaWNfdXBsb2FkLnRpdGxlJyksXG5cdCAgICAgIGx5cmljOiBfY2FjaGUyLmRlZmF1bHQubHlyaWMsXG5cdCAgICAgIGNvbmZpcm06IHRydWVcblx0ICAgIH07XG5cdCAgfSxcblx0ICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB0aGlzLiRvbignb2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLiRBcHAubHlyaWNBcnJheSA9IF90aGlzLmx5cmljLnNwbGl0KC9cXHJcXG58W1xcblxccl0vZyk7XG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZChseXJpYykge1xuXHQgICAgICB0aGlzLmx5cmljID0gbHlyaWM7XG5cdCAgICB9XG5cdCAgfSxcblx0ICB3YXRjaDoge1xuXHQgICAgbHlyaWM6IGZ1bmN0aW9uIGx5cmljKHZhbCkge1xuXHQgICAgICBfY2FjaGUyLmRlZmF1bHQubHlyaWMgPSB2YWw7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBVcGxvYWQ6IF91cGxvYWQyLmRlZmF1bHRcblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogOTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2JywgW19jKCdwJywgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5seXJpY191cGxvYWQuZGVzY3JpcHRpb24nKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCd0ZXh0YXJlYScsIHtcblx0ICAgIGRpcmVjdGl2ZXM6IFt7XG5cdCAgICAgIG5hbWU6IFwibW9kZWxcIixcblx0ICAgICAgcmF3TmFtZTogXCJ2LW1vZGVsXCIsXG5cdCAgICAgIHZhbHVlOiAoX3ZtLmx5cmljKSxcblx0ICAgICAgZXhwcmVzc2lvbjogXCJseXJpY1wiXG5cdCAgICB9XSxcblx0ICAgIGRvbVByb3BzOiB7XG5cdCAgICAgIFwidmFsdWVcIjogKF92bS5seXJpYylcblx0ICAgIH0sXG5cdCAgICBvbjoge1xuXHQgICAgICBcImlucHV0XCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgeyByZXR1cm47IH1cblx0ICAgICAgICBfdm0ubHlyaWMgPSAkZXZlbnQudGFyZ2V0LnZhbHVlXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3VwbG9hZCcsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImJ0blwiLFxuXHQgICAgb246IHtcblx0ICAgICAgXCJ1cGxvYWRcIjogX3ZtLnVwbG9hZFxuXHQgICAgfVxuXHQgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHlyaWNfdXBsb2FkLnVwbG9hZCcpKSldKV0sIDEpXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiA5NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KShcblx0ICAvKiBzY3JpcHQgKi9cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSxcblx0ICAvKiB0ZW1wbGF0ZSAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oOTcpLFxuXHQgIC8qIHNjb3BlSWQgKi9cblx0ICBudWxsLFxuXHQgIC8qIGNzc01vZHVsZXMgKi9cblx0ICBudWxsXG5cdClcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ29tcG9uZW50LmV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDk2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHR2YXIgX2NhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdFxuXHR2YXIgX2NhY2hlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NhY2hlKTtcblx0XG5cdHZhciBfcGFja2FnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHRcblx0dmFyIF9wYWNrYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhY2thZ2UpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdGl0bGU6IHRoaXMuJHQoJ21vZGFsLmxyY19mb3JtYXRfc2F2ZS50aXRsZScpLFxuXHQgICAgICBseXJpYzogJycsXG5cdCAgICAgIHVzZXJOYW1lOiBfY2FjaGUyLmRlZmF1bHQudXNlck5hbWUsXG5cdCAgICAgIHNhdmVPcHRpb25zOiB7XG5cdCAgICAgICAgY29tYmluZTogdHJ1ZSxcblx0ICAgICAgICBsaW5lRm9ybWF0OiAnXFxyXFxuJyxcblx0ICAgICAgICBzb3J0OiB0cnVlXG5cdCAgICAgIH0sXG5cdCAgICAgIGluZm9GaWVsZHM6IFt7XG5cdCAgICAgICAga2V5OiAndGknLFxuXHQgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuZmllbGRzLnNvbmdfdGl0bGUnKVxuXHQgICAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnYXInLFxuXHQgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuZmllbGRzLmFydGlzdCcpXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdhbCcsXG5cdCAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ21vZGFsLmxyY19mb3JtYXRfc2F2ZS5maWVsZHMuYWxidW0nKVxuXHQgICAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnYXUnLFxuXHQgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuZmllbGRzLnNvbmd0ZXh0X2NyZWF0b3InKVxuXHQgICAgICB9XSxcblx0ICAgICAgaW5mbzoge31cblx0ICAgIH07XG5cdCAgfSxcblx0ICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB0aGlzLnJ1bm5lciA9IHRoaXMuJEFwcC5ydW5uZXI7XG5cdCAgICB2YXIgcGxheWVyID0gdGhpcy4kQXBwLiRyZWZzLnBsYXllcjtcblx0ICAgIHZhciBpbmZvID0ge307XG5cdFxuXHQgICAgdGhpcy5pbmZvRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG5cdCAgICAgIGlmIChmaWVsZC5rZXkgaW4gX3RoaXMucnVubmVyLmxyYy5pbmZvKSB7XG5cdCAgICAgICAgaW5mb1tmaWVsZC5rZXldID0gX3RoaXMucnVubmVyLmxyYy5pbmZvW2ZpZWxkLmtleV07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaW5mb1tmaWVsZC5rZXldID0gJyc7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgaWYgKHBsYXllci5kdXJhdGlvbikge1xuXHQgICAgICBpbmZvLmxlbmd0aCA9ICgwLCBfdXRpbHMudGltZXN0YW1wMnRpbWVzdHIpKHBsYXllci5kdXJhdGlvbik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy51c2VyTmFtZSkge1xuXHQgICAgICBpbmZvLmJ5ID0gdGhpcy51c2VyTmFtZTtcblx0ICAgIH1cblx0ICAgIGluZm8ucmUgPSBfcGFja2FnZTIuZGVmYXVsdC5uYW1lICsgJyAoJyArIF9wYWNrYWdlMi5kZWZhdWx0Lm9ubGluZVBhZ2UgKyAnKSc7XG5cdCAgICBpbmZvLnZlID0gX3BhY2thZ2UyLmRlZmF1bHQudmVyc2lvbjtcblx0XG5cdCAgICB0aGlzLmluZm8gPSBpbmZvO1xuXHRcblx0ICAgIHRoaXMubHlyaWNVcGRhdGUoKTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkge1xuXHQgICAgICAoMCwgX3V0aWxzLnNhdmVMcmMpKHRoaXMucnVubmVyLmxyYy50b1N0cmluZyh0aGlzLnNhdmVPcHRpb25zKSwgdGhpcy5ydW5uZXIubHJjLmluZm8udGkgfHwgJ2x5cmljJyk7XG5cdCAgICB9LFxuXHQgICAgaW5mb1VwZGF0ZTogZnVuY3Rpb24gaW5mb1VwZGF0ZSgpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuaW5mbykge1xuXHQgICAgICAgIGlmICh0aGlzLmluZm9ba2V5XS5sZW5ndGggIT09IDApIHtcblx0ICAgICAgICAgIHRoaXMucnVubmVyLmxyYy5pbmZvW2tleV0gPSB0aGlzLmluZm9ba2V5XTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZGVsZXRlIHRoaXMucnVubmVyLmxyYy5pbmZvW2tleV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMubHlyaWNVcGRhdGUoKTtcblx0ICAgIH0sXG5cdCAgICBseXJpY1VwZGF0ZTogZnVuY3Rpb24gbHlyaWNVcGRhdGUoKSB7XG5cdCAgICAgIHRoaXMubHlyaWMgPSB0aGlzLnJ1bm5lci5scmMudG9TdHJpbmcodGhpcy5zYXZlT3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICB3YXRjaDoge1xuXHQgICAgdXNlck5hbWU6IGZ1bmN0aW9uIHVzZXJOYW1lKG5hbWUpIHtcblx0ICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ2J5JywgbmFtZSk7XG5cdCAgICAgIF9jYWNoZTIuZGVmYXVsdC51c2VyTmFtZSA9IG5hbWU7XG5cdCAgICB9LFxuXHQgICAgbHlyaWM6IGZ1bmN0aW9uIGx5cmljKCkge1xuXHQgICAgICB0aGlzLiRBcHAubHJjRm9ybWF0ID0gdGhpcy5seXJpYztcblx0ICAgIH0sXG5cdFxuXHQgICAgc2F2ZU9wdGlvbnM6IHtcblx0ICAgICAgZGVlcDogdHJ1ZSxcblx0ICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICB0aGlzLmx5cmljVXBkYXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBpbmZvOiB7XG5cdCAgICAgIGRlZXA6IHRydWUsXG5cdCAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG5cdCAgICAgICAgdGhpcy5pbmZvVXBkYXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07IC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cbi8qKiovIH0pLFxuLyogOTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2JywgW19jKCdoMycsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLmluZm9fdGl0bGUnKSkpXSksIF92bS5fdihcIiBcIiksIF92bS5fbCgoX3ZtLmluZm9GaWVsZHMpLCBmdW5jdGlvbihmaWVsZCkge1xuXHQgICAgcmV0dXJuIChmaWVsZC5sYWJlbCkgPyBfYygnZGl2Jywge1xuXHQgICAgICBzdGF0aWNDbGFzczogXCJmb3JtLWdyb3VwXCJcblx0ICAgIH0sIFtfYygnbGFiZWwnLCB7XG5cdCAgICAgIGF0dHJzOiB7XG5cdCAgICAgICAgXCJmb3JcIjogJ2luZm8tJyArIGZpZWxkLmtleVxuXHQgICAgICB9LFxuXHQgICAgICBkb21Qcm9wczoge1xuXHQgICAgICAgIFwidGV4dENvbnRlbnRcIjogX3ZtLl9zKGZpZWxkLmxhYmVsKVxuXHQgICAgICB9XG5cdCAgICB9KSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2lucHV0Jywge1xuXHQgICAgICBkaXJlY3RpdmVzOiBbe1xuXHQgICAgICAgIG5hbWU6IFwibW9kZWxcIixcblx0ICAgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcblx0ICAgICAgICB2YWx1ZTogKF92bS5pbmZvW2ZpZWxkLmtleV0pLFxuXHQgICAgICAgIGV4cHJlc3Npb246IFwiaW5mb1tmaWVsZC5rZXldXCJcblx0ICAgICAgfV0sXG5cdCAgICAgIGF0dHJzOiB7XG5cdCAgICAgICAgXCJpZFwiOiAnaW5mby0nICsgZmllbGQua2V5LFxuXHQgICAgICAgIFwidHlwZVwiOiBcInRleHRcIlxuXHQgICAgICB9LFxuXHQgICAgICBkb21Qcm9wczoge1xuXHQgICAgICAgIFwidmFsdWVcIjogKF92bS5pbmZvW2ZpZWxkLmtleV0pXG5cdCAgICAgIH0sXG5cdCAgICAgIG9uOiB7XG5cdCAgICAgICAgXCJpbnB1dFwiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgeyByZXR1cm47IH1cblx0ICAgICAgICAgIF92bS4kc2V0KF92bS5pbmZvLCBmaWVsZC5rZXksICRldmVudC50YXJnZXQudmFsdWUpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KV0pIDogX3ZtLl9lKClcblx0ICB9KSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImZvcm0tZ3JvdXBcIlxuXHQgIH0sIFtfYygnbGFiZWwnLCB7XG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcImZvclwiOiBcImluZm8tYnlcIlxuXHQgICAgfVxuXHQgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLmZpZWxkcy5scmNfY3JlYXRvcicpKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2lucHV0Jywge1xuXHQgICAgZGlyZWN0aXZlczogW3tcblx0ICAgICAgbmFtZTogXCJtb2RlbFwiLFxuXHQgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcblx0ICAgICAgdmFsdWU6IChfdm0udXNlck5hbWUpLFxuXHQgICAgICBleHByZXNzaW9uOiBcInVzZXJOYW1lXCJcblx0ICAgIH1dLFxuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJpZFwiOiBcImluZm8tYnlcIixcblx0ICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiXG5cdCAgICB9LFxuXHQgICAgZG9tUHJvcHM6IHtcblx0ICAgICAgXCJ2YWx1ZVwiOiAoX3ZtLnVzZXJOYW1lKVxuXHQgICAgfSxcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7IHJldHVybjsgfVxuXHQgICAgICAgIF92bS51c2VyTmFtZSA9ICRldmVudC50YXJnZXQudmFsdWVcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCdoMycsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLnNhdmVfdGl0bGUnKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCd0ZXh0YXJlYScsIFtfdm0uX3YoX3ZtLl9zKF92bS5seXJpYykpXSksIF92bS5fdihcIiBcIiksIF9jKCdsYWJlbCcsIFtfdm0uX3YoXCJcXG4gICAgXCIgKyBfdm0uX3MoX3ZtLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuY29tYmluZScpKSArIFwiXFxuICAgIFwiKSwgX2MoJ2lucHV0Jywge1xuXHQgICAgZGlyZWN0aXZlczogW3tcblx0ICAgICAgbmFtZTogXCJtb2RlbFwiLFxuXHQgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcblx0ICAgICAgdmFsdWU6IChfdm0uc2F2ZU9wdGlvbnMuY29tYmluZSksXG5cdCAgICAgIGV4cHJlc3Npb246IFwic2F2ZU9wdGlvbnMuY29tYmluZVwiXG5cdCAgICB9XSxcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwidHlwZVwiOiBcImNoZWNrYm94XCJcblx0ICAgIH0sXG5cdCAgICBkb21Qcm9wczoge1xuXHQgICAgICBcImNoZWNrZWRcIjogQXJyYXkuaXNBcnJheShfdm0uc2F2ZU9wdGlvbnMuY29tYmluZSkgPyBfdm0uX2koX3ZtLnNhdmVPcHRpb25zLmNvbWJpbmUsIG51bGwpID4gLTEgOiAoX3ZtLnNhdmVPcHRpb25zLmNvbWJpbmUpXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjaGFuZ2VcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgdmFyICQkYSA9IF92bS5zYXZlT3B0aW9ucy5jb21iaW5lLFxuXHQgICAgICAgICAgJCRlbCA9ICRldmVudC50YXJnZXQsXG5cdCAgICAgICAgICAkJGMgPSAkJGVsLmNoZWNrZWQgPyAodHJ1ZSkgOiAoZmFsc2UpO1xuXHQgICAgICAgIGlmIChBcnJheS5pc0FycmF5KCQkYSkpIHtcblx0ICAgICAgICAgIHZhciAkJHYgPSBudWxsLFxuXHQgICAgICAgICAgICAkJGkgPSBfdm0uX2koJCRhLCAkJHYpO1xuXHQgICAgICAgICAgaWYgKCQkZWwuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICAkJGkgPCAwICYmIChfdm0uJHNldChfdm0uc2F2ZU9wdGlvbnMsIFwiY29tYmluZVwiLCAkJGEuY29uY2F0KFskJHZdKSkpXG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAkJGkgPiAtMSAmJiAoX3ZtLiRzZXQoX3ZtLnNhdmVPcHRpb25zLCBcImNvbWJpbmVcIiwgJCRhLnNsaWNlKDAsICQkaSkuY29uY2F0KCQkYS5zbGljZSgkJGkgKyAxKSkpKVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfdm0uJHNldChfdm0uc2F2ZU9wdGlvbnMsIFwiY29tYmluZVwiLCAkJGMpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImJ0blwiLFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBfdm0uc2F2ZVxuXHQgICAgfVxuXHQgIH0sIFtfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tZG93bmxvYWRcIlxuXHQgIH0pLCBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuZG93bmxvYWQnKSkgKyBcIlxcbiAgXCIpXSldLCAyKVxuXHR9LHN0YXRpY1JlbmRlckZuczogW119XG5cbi8qKiovIH0pLFxuLyogOTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2Jywge1xuXHQgICAgY2xhc3M6IHtcblx0ICAgICAgY292ZXI6IF92bS5jb3ZlclNob3dcblx0ICAgIH0sXG5cdCAgICBvbjoge1xuXHQgICAgICBcImNsaWNrXCI6IF92bS5jYW5jZWxcblx0ICAgIH1cblx0ICB9LCBbX2MoJ3RyYW5zaXRpb24nLCB7XG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcIm5hbWVcIjogXCJtb2RhbFwiXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJhZnRlci1sZWF2ZVwiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0uY292ZXJTaG93ID0gZmFsc2Vcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFsoX3ZtLmlzU2hvdykgPyBfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwibW9kYWxcIixcblx0ICAgIGNsYXNzOiBbX3ZtLnNpemVdLFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCBbX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImhlYWRlclwiXG5cdCAgfSwgW192bS5fdihcIlxcbiAgICAgICAgXCIgKyBfdm0uX3MoX3ZtLnRpdGxlKSArIFwiXFxuICAgICAgICBcIiksIF9jKCdpJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1jYW5jZWxcIixcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogX3ZtLmNhbmNlbFxuXHQgICAgfVxuXHQgIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJib2R5XCJcblx0ICB9LCBbX2MoJ2RpdicsIHtcblx0ICAgIHJlZjogXCJtb2RhbFdyYXBwZXJcIlxuXHQgIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJmb290ZXJcIlxuXHQgIH0sIFsoX3ZtLmNvbmZpcm0pID8gX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImJ0bi1ncm91cFwiXG5cdCAgfSwgW19jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJidG5cIixcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogX3ZtLm9rXG5cdCAgICB9XG5cdCAgfSwgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5idXR0b24ub2snKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJidG5cIixcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogX3ZtLmNhbmNlbFxuXHQgICAgfVxuXHQgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwuYnV0dG9uLmNhbmNlbCcpKSldKV0pIDogX3ZtLl9lKCldKV0pIDogX3ZtLl9lKCldKV0sIDEpXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiA5OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHQvKiBzdHlsZXMgKi9cblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTAyKVxuXHRcblx0dmFyIENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpKFxuXHQgIC8qIHNjcmlwdCAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMTA0KSxcblx0ICAvKiB0ZW1wbGF0ZSAqL1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMTA1KSxcblx0ICAvKiBzY29wZUlkICovXG5cdCAgXCJkYXRhLXYtYTM3MzM2NjBcIixcblx0ICAvKiBjc3NNb2R1bGVzICovXG5cdCAgbnVsbFxuXHQpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxMDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpKFwiMWMzYjVkODVcIiwgY29udGVudCwgdHJ1ZSk7XG5cbi8qKiovIH0pLFxuLyogMTAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi50YXJnZXRbZGF0YS12LWEzNzMzNjYwXXtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjotOHB4O3BhZGRpbmc6OHB4fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxMDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDMpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpKFwiMWI2OTI0NzFcIiwgY29udGVudCwgdHJ1ZSk7XG5cbi8qKiovIH0pLFxuLyogMTAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5uYXYtbWVudSAud3JhcHtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwMDtib3gtc2hhZG93OjRweCA0cHggM3B4IC0ycHggI2NjY30ubmF2LW1lbnUgLndyYXAgdWx7bGlzdC1zdHlsZS10eXBlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO2JhY2tncm91bmQtY29sb3I6IzIxNTk5MX0ubmF2LW1lbnUgLndyYXAgdWwgbGl7cGFkZGluZzowIDVweDtjdXJzb3I6cG9pbnRlcjtsaW5lLWhlaWdodDozMHB4O2ZvbnQtc2l6ZToxMnB4fS5uYXYtbWVudSAud3JhcCB1bCBsaTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMxNzNmNjh9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDEwNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBkaXI6IGZhbHNlLFxuXHQgICAgICBzdHlsZToge1xuXHQgICAgICAgIHRvcDogMCxcblx0ICAgICAgICBsZWZ0OiAwXG5cdCAgICAgIH0sXG5cdCAgICAgIHNob3c6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICBlbnRlckRlbGF5OiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMC4xXG5cdCAgICB9LFxuXHQgICAgbGVhdmVEZWxheToge1xuXHQgICAgICB0eXBlOiBOdW1iZXIsXG5cdCAgICAgIGRlZmF1bHQ6IDAuNVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIG1lbnUgPSB0aGlzLiRyZWZzLm1lbnU7XG5cdCAgICB2YXIgZGhvdmVyID0gbmV3IF91dGlscy5EZWxheUhvdmVyKG1lbnUsIHtcblx0ICAgICAgZW50ZXJEZWxheTogdGhpcy5lbnRlckRlbGF5LFxuXHQgICAgICBsZWF2ZURlbGF5OiB0aGlzLmxlYXZlRGVsYXlcblx0ICAgIH0pO1xuXHQgICAgZGhvdmVyLmhvdmVyKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMuc2hvdyA9IHRydWU7XG5cdCAgICB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLnNob3cgPSBmYWxzZTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRlbDtcblx0ICAgIHRoaXMuc3R5bGUudG9wID0gcGFyZW50LnN0eWxlLmNsaWVudEhlaWdodDtcblx0ICB9XG5cdH07IC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cbi8qKiovIH0pLFxuLyogMTA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcblx0ICByZXR1cm4gX2MoJ2RpdicsIHtcblx0ICAgIHJlZjogXCJtZW51XCIsXG5cdCAgICBzdGF0aWNDbGFzczogXCJuYXYtbWVudVwiXG5cdCAgfSwgW19jKCdzcGFuJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwidGFyZ2V0XCJcblx0ICB9LCBbX3ZtLl90KFwidGFyZ2V0XCIpXSwgMiksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBkaXJlY3RpdmVzOiBbe1xuXHQgICAgICBuYW1lOiBcInNob3dcIixcblx0ICAgICAgcmF3TmFtZTogXCJ2LXNob3dcIixcblx0ICAgICAgdmFsdWU6IChfdm0uc2hvdyksXG5cdCAgICAgIGV4cHJlc3Npb246IFwic2hvd1wiXG5cdCAgICB9XSxcblx0ICAgIHN0YXRpY0NsYXNzOiBcIndyYXBcIixcblx0ICAgIHN0eWxlOiAoX3ZtLnN0eWxlKVxuXHQgIH0sIFtfdm0uX3QoXCJsaXN0XCIpXSwgMildKVxuXHR9LHN0YXRpY1JlbmRlckZuczogW119XG5cbi8qKiovIH0pLFxuLyogMTA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcblx0ICByZXR1cm4gX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImFwcFwiXG5cdCAgfSwgW19jKCdoZWFkZXInLCBbX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImxlZnRcIlxuXHQgIH0sIFtfYygnbmF2LW1lbnUnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJtZW51LWl0ZW1cIixcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwidGl0bGVcIjogX3ZtLiR0KCdidXR0b24udXBsb2FkJylcblx0ICAgIH1cblx0ICB9LCBbX2MoJ2RpdicsIHtcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwic2xvdFwiOiBcInRhcmdldFwiXG5cdCAgICB9LFxuXHQgICAgc2xvdDogXCJ0YXJnZXRcIlxuXHQgIH0sIFtfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tdXBsb2FkXCJcblx0ICB9KV0pLCBfdm0uX3YoXCIgXCIpLCBfYygndWwnLCB7XG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInNsb3RcIjogXCJsaXN0XCJcblx0ICAgIH0sXG5cdCAgICBzbG90OiBcImxpc3RcIlxuXHQgIH0sIFtfYygnbGknLCB7XG5cdCAgICBvbjoge1xuXHQgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgIF92bS4kcmVmcy5tb2RhbHMuc2hvdygnbHJjLWZvcm1hdC11cGxvYWQnKVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwgW19jKCdpJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi11cGxvYWRcIlxuXHQgIH0pLCBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KCdtZW51LnVwbG9hZC5scmMnKSkgKyBcIlxcbiAgICAgICAgICBcIildKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2xpJywge1xuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0uJHJlZnMubW9kYWxzLnNob3coJ2x5cmljLXVwbG9hZCcpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCBbX2MoJ2knLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJpY29uLXVwbG9hZFwiXG5cdCAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ21lbnUudXBsb2FkLmx5cmljJykpICsgXCJcXG4gICAgICAgICAgXCIpXSksIF92bS5fdihcIiBcIiksIF9jKCdsaScsIFtfYygndXBsb2FkJywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJhY2NlcHRcIjogXCJhdWRpby8qXCIsXG5cdCAgICAgIFwicmVhZC1mb3JtYXRcIjogXCJ1cmxcIlxuXHQgICAgfSxcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwidXBsb2FkXCI6IF92bS51cGxvYWRNdXNpY1xuXHQgICAgfVxuXHQgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbWVudS51cGxvYWQubXVzaWMnKSkpXSldLCAxKV0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJtZW51LWl0ZW1cIixcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwidGl0bGVcIjogX3ZtLiR0KCdidXR0b24uc2F2ZScpXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0uJHJlZnMubW9kYWxzLnNob3coJ2xyYy1zYXZlJylcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFtfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tc2F2ZVwiXG5cdCAgfSldKV0sIDEpLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwicmlnaHRcIlxuXHQgIH0sIFtfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwibWVudS1pdGVtXCIsXG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInRpdGxlXCI6IF92bS5lZGl0aW5nID8gX3ZtLiR0KCdidXR0b24uY2xvc2VfZWRpdCcpIDogX3ZtLiR0KCdidXR0b24ub3Blbl9lZGl0Jylcblx0ICAgIH0sXG5cdCAgICBvbjoge1xuXHQgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgIF92bS5lZGl0aW5nID0gIV92bS5lZGl0aW5nXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCBbKF92bS5lZGl0aW5nKSA/IFtfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24tY2FuY2VsXCJcblx0ICB9KV0gOiBbX2MoJ2knLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJpY29uLWVkaXRcIlxuXHQgIH0pXV0sIDIpLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwibWVudS1pdGVtXCIsXG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInRpdGxlXCI6IF92bS4kdCgnYnV0dG9uLmhlbHAnKVxuXHQgICAgfSxcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgX3ZtLiRyZWZzLm1vZGFscy5zaG93KCdoZWxwJylcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFtfYygnaScsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImljb24taGVscC1jaXJjbGVkXCJcblx0ICB9KV0pXSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3BsYXllcicsIHtcblx0ICAgIHJlZjogXCJwbGF5ZXJcIixcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwic3JjXCI6IF92bS5tdXNpY1VybFxuXHQgICAgfSxcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwidGltZXVwZGF0ZVwiOiBfdm0udGltZXVwZGF0ZVxuXHQgICAgfVxuXHQgIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbHlyaWMtZWRpdG9yJywge1xuXHQgICAgcmVmOiBcImx5cmljXCIsXG5cdCAgICBzdGF0aWNDbGFzczogXCJseXJpYy1lZGl0b3JcIixcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwiZWRpdGluZ1wiOiBfdm0uZWRpdGluZyxcblx0ICAgICAgXCJydW5uZXJcIjogX3ZtLnJ1bm5lcixcblx0ICAgICAgXCJseXJpYy1hcnJheVwiOiBfdm0ubHlyaWNBcnJheSxcblx0ICAgICAgXCJwbGF5dG9cIjogX3ZtLnBsYXl0b1xuXHQgICAgfVxuXHQgIH0sIFtfdm0uX3YoXCJcXG4gICAgbHlyaWMgZWRpdG9yXFxuICBcIildKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2Zvb3RlcicsIFtfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwibGVmdFwiXG5cdCAgfSwgW19jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJtZW51LWl0ZW1cIixcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogX3ZtLnJlbW92ZUx5cmljXG5cdCAgICB9XG5cdCAgfSwgW19jKCdpJywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi10cmFzaFwiXG5cdCAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ2J1dHRvbi5yZW1vdmVfbHlyaWMnKSkgKyBcIlxcbiAgICAgIFwiKV0pXSksIF92bS5fdihcIiBcIiksIChfdm0uZWRpdGluZykgPyBfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwicmlnaHRcIlxuXHQgIH0sIFtfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwibWVudS1pdGVtXCIsXG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInRpdGxlXCI6IFwiW1VQXVwiXG5cdCAgICB9LFxuXHQgICAgb246IHtcblx0ICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgICAgICBfdm0uJHJlZnMubHlyaWMuJGVtaXQoJ3ByZXZseXJpYycpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ2J1dHRvbi5wcmV2X2x5cmljJykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwibWVudS1pdGVtXCIsXG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcInRpdGxlXCI6IFwiW0RPV05dXCJcblx0ICAgIH0sXG5cdCAgICBvbjoge1xuXHQgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgIF92bS4kcmVmcy5seXJpYy4kZW1pdCgnbmV4dGx5cmljJylcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnYnV0dG9uLm5leHRfbHlyaWMnKSkpXSldKSA6IF92bS5fZSgpXSksIF92bS5fdihcIiBcIiksIF9jKCdtb2RhbHMnLCB7XG5cdCAgICByZWY6IFwibW9kYWxzXCJcblx0ICB9KV0sIDEpXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiAxMDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3Z1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3Z1ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92dWUpO1xuXHRcblx0dmFyIF92dWVJMThuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpO1xuXHRcblx0dmFyIF92dWVJMThuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZUkxOG4pO1xuXHRcblx0dmFyIF9sb2NhbGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpO1xuXHRcblx0dmFyIF9sb2NhbGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvY2FsZXMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBsYW5nID0gKG5hdmlnYXRvci5sYW5ndWFnZSB8fCBuYXZpZ2F0b3IudXNlckxhbmd1YWdlIHx8ICdlbicpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG5cdFxuXHRpZiAoIShsYW5nIGluIF9sb2NhbGVzMi5kZWZhdWx0KSkge1xuXHQgIGlmIChsYW5nLmluZGV4T2YoJy0nKSA+PSAwKSB7XG5cdCAgICBsYW5nID0gbGFuZy5zcGxpdCgnLScpWzBdO1xuXHQgIH1cblx0fVxuXHRcblx0X3Z1ZTIuZGVmYXVsdC51c2UoX3Z1ZUkxOG4yLmRlZmF1bHQpO1xuXHRcblx0X3Z1ZTIuZGVmYXVsdC5jb25maWcubGFuZyA9IGxhbmc7XG5cdF92dWUyLmRlZmF1bHQubG9jYWxlKGxhbmcsIF9sb2NhbGVzMi5kZWZhdWx0W2xhbmddKTtcblxuLyoqKi8gfSksXG4vKiAxMDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qIVxuXHQgKiB2dWUtaTE4biB2NS4wLjMgXG5cdCAqIChjKSAyMDE3IGthenV5YSBrYXdhZ3VjaGlcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIHdhcm5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuXHQgKiBAcGFyYW0ge0Vycm9yfSBbZXJyXVxuXHQgKlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHdhcm4gKG1zZywgZXJyKSB7XG5cdCAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG5cdCAgICBjb25zb2xlLndhcm4oJ1t2dWUtaTE4bl0gJyArIG1zZyk7XG5cdCAgICBpZiAoZXJyKSB7XG5cdCAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2spO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIEFzc2V0ID0gZnVuY3Rpb24gKFZ1ZSwgbGFuZ1ZNKSB7XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgb3IgcmV0cmlldmUgYSBnbG9iYWwgbG9jYWxlIGRlZmluaXRpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICAgKiBAcGFyYW0ge09iamVjdCB8IEZ1bmN0aW9uIHwgUHJvbWlzZX0gZGVmaW5pdGlvblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5sb2NhbGUgPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24sIGNiKSB7XG5cdCAgICBpZiAoZGVmaW5pdGlvbiA9PT0gdW5kZWZpbmVkKSB7IC8vIGdldHRlclxuXHQgICAgICByZXR1cm4gbGFuZ1ZNLmxvY2FsZXNbaWRdXG5cdCAgICB9IGVsc2UgeyAvLyBzZXR0ZXJcblx0ICAgICAgaWYgKGRlZmluaXRpb24gPT09IG51bGwpIHtcblx0ICAgICAgICBsYW5nVk0ubG9jYWxlc1tpZF0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgZGVsZXRlIGxhbmdWTS5sb2NhbGVzW2lkXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZXRMb2NhbGUoaWQsIGRlZmluaXRpb24sIGZ1bmN0aW9uIChsb2NhbGUpIHtcblx0ICAgICAgICAgIGlmIChsb2NhbGUpIHtcblx0ICAgICAgICAgICAgbGFuZ1ZNLiRzZXQobGFuZ1ZNLmxvY2FsZXMsIGlkLCBsb2NhbGUpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgd2FybignZmFpbGVkIHNldCBgJyArIGlkICsgJ2AgbG9jYWxlJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjYiAmJiBjYigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiBzZXRMb2NhbGUgKGlkLCBkZWZpbml0aW9uLCBjYikge1xuXHQgIGlmICh0eXBlb2YgZGVmaW5pdGlvbiA9PT0gJ29iamVjdCcpIHsgLy8gc3luY1xuXHQgICAgY2IoZGVmaW5pdGlvbik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBmdXR1cmUgPSBkZWZpbml0aW9uLmNhbGwodGhpcyk7XG5cdCAgICBpZiAodHlwZW9mIGZ1dHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBpZiAoZnV0dXJlLnJlc29sdmVkKSB7XG5cdCAgICAgICAgLy8gY2FjaGVkXG5cdCAgICAgICAgY2IoZnV0dXJlLnJlc29sdmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChmdXR1cmUucmVxdWVzdGVkKSB7XG5cdCAgICAgICAgLy8gcG9vbCBjYWxsYmFja3Ncblx0ICAgICAgICBmdXR1cmUucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmdXR1cmUucmVxdWVzdGVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgY2JzID0gZnV0dXJlLnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuXHQgICAgICAgIGZ1dHVyZShmdW5jdGlvbiAobG9jYWxlKSB7IC8vIHJlc29sdmVcblx0ICAgICAgICAgIGZ1dHVyZS5yZXNvbHZlZCA9IGxvY2FsZTtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBjYnNbaV0obG9jYWxlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbiAoKSB7IC8vIHJlamVjdFxuXHQgICAgICAgICAgY2IoKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1Byb21pc2UoZnV0dXJlKSkgeyAvLyBwcm9taXNlXG5cdCAgICAgIGZ1dHVyZS50aGVuKGZ1bmN0aW9uIChsb2NhbGUpIHsgLy8gcmVzb2x2ZVxuXHQgICAgICAgIGNiKGxvY2FsZSk7XG5cdCAgICAgIH0sIGZ1bmN0aW9uICgpIHsgLy8gcmVqZWN0XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0ICAgICAgICBjYigpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUHJvbWlzZSAocCkge1xuXHQgIHJldHVybiBwICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbidcblx0fVxuXHRcblx0dmFyIE92ZXJyaWRlID0gZnVuY3Rpb24gKFZ1ZSwgbGFuZ1ZNKSB7XG5cdCAgLy8gb3ZlcnJpZGUgX2luaXRcblx0ICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICBpbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XG5cdFxuXHQgICAgaWYgKCF0aGlzLiRwYXJlbnQpIHsgLy8gcm9vdFxuXHQgICAgICB0aGlzLl8kbGFuZyA9IGxhbmdWTTtcblx0ICAgICAgdGhpcy5fbGFuZ1Vud2F0Y2ggPSB0aGlzLl8kbGFuZy4kd2F0Y2goJyRkYXRhJywgZnVuY3Rpb24gKHZhbCwgb2xkKSB7XG5cdCAgICAgICAgdGhpcyQxLiRmb3JjZVVwZGF0ZSgpO1xuXHQgICAgICB9LCB7IGRlZXA6IHRydWUgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLy8gb3ZlcnJpZGUgX2Rlc3Ryb3lcblx0ICB2YXIgZGVzdHJveSA9IFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3k7XG5cdCAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghdGhpcy4kcGFyZW50ICYmIHRoaXMuX2xhbmdVbndhdGNoKSB7XG5cdCAgICAgIHRoaXMuX2xhbmdVbndhdGNoKCk7XG5cdCAgICAgIHRoaXMuX2xhbmdVbndhdGNoID0gbnVsbDtcblx0ICAgICAgdGhpcy5fJGxhbmcgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIGRlc3Ryb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE9ic2VydmVyXG5cdCAqL1xuXHRcblx0dmFyIFdhdGNoZXI7XG5cdC8qKlxuXHQgKiBnZXRXYXRjaGVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcmV0dXJuIHtXYXRjaGVyfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFdhdGNoZXIgKHZtKSB7XG5cdCAgaWYgKCFXYXRjaGVyKSB7XG5cdCAgICB2YXIgdW53YXRjaCA9IHZtLiR3YXRjaCgnX193YXRjaGVyX18nLCBmdW5jdGlvbiAoYSkge30pO1xuXHQgICAgV2F0Y2hlciA9IHZtLl93YXRjaGVyc1swXS5jb25zdHJ1Y3Rvcjtcblx0ICAgIHVud2F0Y2goKTtcblx0ICB9XG5cdCAgcmV0dXJuIFdhdGNoZXJcblx0fVxuXHRcblx0dmFyIERlcDtcblx0LyoqXG5cdCAqIGdldERlcFxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHJldHVybiB7RGVwfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldERlcCAodm0pIHtcblx0ICBpZiAoIURlcCAmJiB2bSAmJiB2bS5fZGF0YSAmJiB2bS5fZGF0YS5fX29iX18gJiYgdm0uX2RhdGEuX19vYl9fLmRlcCkge1xuXHQgICAgRGVwID0gdm0uX2RhdGEuX19vYl9fLmRlcC5jb25zdHJ1Y3Rvcjtcblx0ICB9XG5cdCAgcmV0dXJuIERlcFxuXHR9XG5cdFxuXHQvKipcblx0ICogdXRpbGl0ZXNcblx0ICovXG5cdFxuXHQvKipcblx0ICogaXNOaWxcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHJldHVybiBCb29sZWFuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc05pbCAodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZFxuXHR9XG5cdFxuXHQvKipcblx0ICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4XG5cdCAqIEByZXR1cm4gRnVuY3Rpb25cblx0ICovXG5cdGZ1bmN0aW9uIGJpbmQgKGZuLCBjdHgpIHtcblx0ICBmdW5jdGlvbiBib3VuZEZuIChhKSB7XG5cdCAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICByZXR1cm4gbFxuXHQgICAgICA/IGwgPiAxXG5cdCAgICAgICAgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cylcblx0ICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKVxuXHQgICAgICA6IGZuLmNhbGwoY3R4KVxuXHQgIH1cblx0ICAvLyByZWNvcmQgb3JpZ2luYWwgZm4gbGVuZ3RoXG5cdCAgYm91bmRGbi5fbGVuZ3RoID0gZm4ubGVuZ3RoO1xuXHQgIHJldHVybiBib3VuZEZuXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcblx0ICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuXHQgKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHJldHVybiBCb29sZWFuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCAob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuXHQgKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEByZXR1cm4gQm9vbGVhblxuXHQgKi9cblx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0dmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblx0ZnVuY3Rpb24gaXNQbGFpbk9iamVjdCAob2JqKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklOR1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcmV0dXJuIEJvb2xlYW5cblx0ICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdGZ1bmN0aW9uIGhhc093biAob2JqLCBrZXkpIHtcblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcblx0fVxuXHRcblx0dmFyIGZhbGxiYWNrOyAvLyBmYWxsYmFjayBsYW5nXG5cdHZhciBtaXNzaW5nSGFuZGxlciA9IG51bGw7IC8vIG1pc3NpbmcgaGFuZGxlclxuXHR2YXIgaTE4bkZvcm1hdHRlciA9IG51bGw7IC8vIGN1c3RvbSBmb3JtYXR0ZXJcblx0XG5cdHZhciBDb25maWcgPSBmdW5jdGlvbiAoVnVlLCBsYW5nVk0sIGxhbmcpIHtcblx0ICB2YXIgV2F0Y2hlciA9IGdldFdhdGNoZXIobGFuZ1ZNKTtcblx0ICB2YXIgRGVwID0gZ2V0RGVwKGxhbmdWTSk7XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlciAoZ2V0dGVyLCBvd25lcikge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG5cdCAgICAgIGxhenk6IHRydWVcblx0ICAgIH0pO1xuXHRcblx0ICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlciAoKSB7XG5cdCAgICAgIHdhdGNoZXIuZGlydHkgJiYgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuXHQgICAgICBEZXAgJiYgRGVwLnRhcmdldCAmJiB3YXRjaGVyLmRlcGVuZCgpO1xuXHQgICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gZGVmaW5lIFZ1ZS5jb25maWcubGFuZyBjb25maWdyYXRpb25cblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLmNvbmZpZywgJ2xhbmcnLCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gbGFuZ1ZNLmxhbmcgfSwgbGFuZ1ZNKSxcblx0ICAgIHNldDogYmluZChmdW5jdGlvbiAodmFsKSB7IGxhbmdWTS5sYW5nID0gdmFsOyB9LCBsYW5nVk0pXG5cdCAgfSk7XG5cdFxuXHQgIC8vIGRlZmluZSBWdWUuY29uZmlnLmZhbGxiYWNrTGFuZyBjb25maWdyYXRpb25cblx0ICBmYWxsYmFjayA9IGxhbmc7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5jb25maWcsICdmYWxsYmFja0xhbmcnLCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxsYmFjayB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7IGZhbGxiYWNrID0gdmFsOyB9XG5cdCAgfSk7XG5cdFxuXHQgIC8vIGRlZmluZSBWdWUuY29uZmlnLm1pc3NpbmdIYW5kbGVyIGNvbmZpZ3JhdGlvblxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUuY29uZmlnLCAnbWlzc2luZ0hhbmRsZXInLCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtaXNzaW5nSGFuZGxlciB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7IG1pc3NpbmdIYW5kbGVyID0gdmFsOyB9XG5cdCAgfSk7XG5cdFxuXHQgIC8vIGRlZmluZSBWdWUuY29uZmlnLmkxOEZvcm1hdHRlciBjb25maWdyYXRpb25cblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLmNvbmZpZywgJ2kxOG5Gb3JtYXR0ZXInLCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpMThuRm9ybWF0dGVyIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHsgaTE4bkZvcm1hdHRlciA9IHZhbDsgfVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqICBTdHJpbmcgZm9ybWF0IHRlbXBsYXRlXG5cdCAqICAtIEluc3BpcmVkOlxuXHQgKiAgICBodHRwczovL2dpdGh1Yi5jb20vTWF0dC1Fc2NoL3N0cmluZy10ZW1wbGF0ZS9pbmRleC5qc1xuXHQgKi9cblx0XG5cdHZhciBSRV9OQVJHUyA9IC8oJXwpXFx7KFswLTlhLXpBLVpfXSspXFx9L2c7XG5cdFxuXHRcblx0dmFyIEZvcm1hdCA9IGZ1bmN0aW9uIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiB0ZW1wbGF0ZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuXHQgICAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3Ncblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHRlbXBsYXRlIChzdHJpbmcpIHtcblx0ICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxO1xuXHQgICAgd2hpbGUgKCBsZW4tLSA+IDAgKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuICsgMSBdO1xuXHRcblx0ICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgYXJncyA9IGFyZ3NbMF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhcmdzID0ge307XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFhcmdzIHx8ICFhcmdzLmhhc093blByb3BlcnR5KSB7XG5cdCAgICAgIGFyZ3MgPSB7fTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoUkVfTkFSR1MsIGZ1bmN0aW9uIChtYXRjaCwgcHJlZml4LCBpLCBpbmRleCkge1xuXHQgICAgICB2YXIgcmVzdWx0O1xuXHRcblx0ICAgICAgaWYgKHN0cmluZ1tpbmRleCAtIDFdID09PSAneycgJiZcblx0ICAgICAgICBzdHJpbmdbaW5kZXggKyBtYXRjaC5sZW5ndGhdID09PSAnfScpIHtcblx0ICAgICAgICByZXR1cm4gaVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdCA9IGhhc093bihhcmdzLCBpKSA/IGFyZ3NbaV0gOiBtYXRjaDtcblx0ICAgICAgICBpZiAoaXNOaWwocmVzdWx0KSkge1xuXHQgICAgICAgICAgcmV0dXJuICcnXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gcmVzdWx0XG5cdCAgICAgIH1cblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGVtcGxhdGVcblx0fTtcblx0XG5cdC8qKlxuXHQgKiAgUGF0aCBwYWVyc2VyXG5cdCAqICAtIEluc3BpcmVkOlxuXHQgKiAgICBWdWUuanMgUGF0aCBwYXJzZXJcblx0ICovXG5cdFxuXHQvLyBjYWNoZVxuXHR2YXIgcGF0aENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdC8vIGFjdGlvbnNcblx0dmFyIEFQUEVORCA9IDA7XG5cdHZhciBQVVNIID0gMTtcblx0dmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XG5cdHZhciBQVVNIX1NVQl9QQVRIID0gMztcblx0XG5cdC8vIHN0YXRlc1xuXHR2YXIgQkVGT1JFX1BBVEggPSAwO1xuXHR2YXIgSU5fUEFUSCA9IDE7XG5cdHZhciBCRUZPUkVfSURFTlQgPSAyO1xuXHR2YXIgSU5fSURFTlQgPSAzO1xuXHR2YXIgSU5fU1VCX1BBVEggPSA0O1xuXHR2YXIgSU5fU0lOR0xFX1FVT1RFID0gNTtcblx0dmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG5cdHZhciBBRlRFUl9QQVRIID0gNztcblx0dmFyIEVSUk9SID0gODtcblx0XG5cdHZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcblx0ICAnd3MnOiBbSU5fUEFUSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0lERU5UXSA9IHtcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ251bWJlcic6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgUFVTSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG5cdCAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcblx0ICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcblx0ICBcIidcIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcblx0ICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XG5cdGZ1bmN0aW9uIGlzTGl0ZXJhbCAoZXhwKSB7XG5cdCAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKVxuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmcgfCBmYWxzZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzdHJpcFF1b3RlcyAoc3RyKSB7XG5cdCAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcblx0ICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcblx0ICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KVxuXHQgICAgPyBzdHIuc2xpY2UoMSwgLTEpXG5cdCAgICA6IHN0clxuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGEgY2hhcmFjdGVyIGluIGEga2V5cGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtDaGFyfSBjaFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUgKGNoKSB7XG5cdCAgaWYgKGNoID09PSB1bmRlZmluZWQpIHsgcmV0dXJuICdlb2YnIH1cblx0XG5cdCAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXHRcblx0ICBzd2l0Y2ggKGNvZGUpIHtcblx0ICAgIGNhc2UgMHg1QjogLy8gW1xuXHQgICAgY2FzZSAweDVEOiAvLyBdXG5cdCAgICBjYXNlIDB4MkU6IC8vIC5cblx0ICAgIGNhc2UgMHgyMjogLy8gXCJcblx0ICAgIGNhc2UgMHgyNzogLy8gJ1xuXHQgICAgY2FzZSAweDMwOiAvLyAwXG5cdCAgICAgIHJldHVybiBjaFxuXHRcblx0ICAgIGNhc2UgMHg1RjogLy8gX1xuXHQgICAgY2FzZSAweDI0OiAvLyAkXG5cdCAgICBjYXNlIDB4MkQ6IC8vIC1cblx0ICAgICAgcmV0dXJuICdpZGVudCdcblx0XG5cdCAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG5cdCAgICBjYXNlIDB4MDk6IC8vIFRhYlxuXHQgICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG5cdCAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuXHQgICAgY2FzZSAweEEwOiAgLy8gTm8tYnJlYWsgc3BhY2Vcblx0ICAgIGNhc2UgMHhGRUZGOiAgLy8gQnl0ZSBPcmRlciBNYXJrXG5cdCAgICBjYXNlIDB4MjAyODogIC8vIExpbmUgU2VwYXJhdG9yXG5cdCAgICBjYXNlIDB4MjAyOTogIC8vIFBhcmFncmFwaCBTZXBhcmF0b3Jcblx0ICAgICAgcmV0dXJuICd3cydcblx0ICB9XG5cdFxuXHQgIC8vIGEteiwgQS1aXG5cdCAgaWYgKChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBKSB8fCAoY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkpIHtcblx0ICAgIHJldHVybiAnaWRlbnQnXG5cdCAgfVxuXHRcblx0ICAvLyAxLTlcblx0ICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkgeyByZXR1cm4gJ251bWJlcicgfVxuXHRcblx0ICByZXR1cm4gJ2Vsc2UnXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcblx0ICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxuXHQgKiBkeW5hbWljIGluZGljYXRvciAoKikuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRTdWJQYXRoIChwYXRoKSB7XG5cdCAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcblx0ICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuXHQgIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7IHJldHVybiBmYWxzZSB9XG5cdFxuXHQgIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWRcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2UgKHBhdGgpIHtcblx0ICB2YXIga2V5cyA9IFtdO1xuXHQgIHZhciBpbmRleCA9IC0xO1xuXHQgIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG5cdCAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgdmFyIGMsIG5ld0NoYXIsIGtleSwgdHlwZSwgdHJhbnNpdGlvbiwgYWN0aW9uLCB0eXBlTWFwO1xuXHRcblx0ICB2YXIgYWN0aW9ucyA9IFtdO1xuXHRcblx0ICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICBrZXkgPSB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleSA9IG5ld0NoYXI7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrZXkgKz0gbmV3Q2hhcjtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIHN1YlBhdGhEZXB0aCsrO1xuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuXHQgICAgICBzdWJQYXRoRGVwdGgtLTtcblx0ICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcblx0ICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBhY3Rpb25zW1BVU0hdKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUgKCkge1xuXHQgICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuXHQgICAgaWYgKChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiKSB8fFxuXHQgICAgICAobW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSkge1xuXHQgICAgICBpbmRleCsrO1xuXHQgICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG5cdCAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuXHQgICAgaW5kZXgrKztcblx0ICAgIGMgPSBwYXRoW2luZGV4XTtcblx0XG5cdCAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG5cdCAgICAgIGNvbnRpbnVlXG5cdCAgICB9XG5cdFxuXHQgICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcblx0ICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xuXHQgICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXHRcblx0ICAgIGlmICh0cmFuc2l0aW9uID09PSBFUlJPUikge1xuXHQgICAgICByZXR1cm4gLy8gcGFyc2UgZXJyb3Jcblx0ICAgIH1cblx0XG5cdCAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcblx0ICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XG5cdCAgICBpZiAoYWN0aW9uKSB7XG5cdCAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuXHQgICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkXG5cdCAgICAgICAgPyBjXG5cdCAgICAgICAgOiBuZXdDaGFyO1xuXHQgICAgICBpZiAoYWN0aW9uKCkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAobW9kZSA9PT0gQUZURVJfUEFUSCkge1xuXHQgICAgICBrZXlzLnJhdyA9IHBhdGg7XG5cdCAgICAgIHJldHVybiBrZXlzXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuXHQgIHZhciBoaXQgPSBwYXRoQ2FjaGVbcGF0aF07XG5cdCAgaWYgKCFoaXQpIHtcblx0ICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xuXHQgICAgaWYgKGhpdCkge1xuXHQgICAgICBwYXRoQ2FjaGVbcGF0aF0gPSBoaXQ7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBoaXRcblx0fVxuXHRcblx0dmFyIFBhdGggPSBmdW5jdGlvbiAoVnVlKSB7XG5cdCAgZnVuY3Rpb24gZW1wdHkgKHRhcmdldCkge1xuXHQgICAgaWYgKHRhcmdldCA9PT0gbnVsbCB8fCB0YXJnZXQgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdHJ1ZSB9XG5cdFxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuXHQgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA+IDApIHsgcmV0dXJuIGZhbHNlIH1cblx0ICAgICAgaWYgKHRhcmdldC5sZW5ndGggPT09IDApIHsgcmV0dXJuIHRydWUgfVxuXHQgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHRhcmdldCkpIHtcblx0ICAgICAgLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWNvbnN0ICovXG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB0YXJnZXQpIHtcblx0ICAgICAgICBpZiAoaGFzT3duKHRhcmdldCwga2V5KSkgeyByZXR1cm4gZmFsc2UgfVxuXHQgICAgICB9XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgcHJlZmVyLWNvbnN0ICovXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRydWVcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCB2YWx1ZSBmcm9tIHBhdGggc3RyaW5nXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgKiBAcmV0dXJuIHZhbHVlXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGdldFZhbHVlIChvYmosIHBhdGgpIHtcblx0ICAgIGlmICghaXNPYmplY3Qob2JqKSkgeyByZXR1cm4gbnVsbCB9XG5cdFxuXHQgICAgdmFyIHBhdGhzID0gcGFyc2VQYXRoKHBhdGgpO1xuXHQgICAgaWYgKGVtcHR5KHBhdGhzKSkgeyByZXR1cm4gbnVsbCB9XG5cdFxuXHQgICAgdmFyIGxlbmd0aCA9IHBhdGhzLmxlbmd0aDtcblx0ICAgIHZhciByZXQgPSBudWxsO1xuXHQgICAgdmFyIGxhc3QgPSBvYmo7XG5cdCAgICB2YXIgaSA9IDA7XG5cdCAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBsYXN0W3BhdGhzW2ldXTtcblx0ICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBsYXN0ID0gbnVsbDtcblx0ICAgICAgICBicmVha1xuXHQgICAgICB9XG5cdCAgICAgIGxhc3QgPSB2YWx1ZTtcblx0ICAgICAgaSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldCA9IGxhc3Q7XG5cdCAgICByZXR1cm4gcmV0XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZ2V0VmFsdWVcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBleHRlbmRcblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IFZ1ZVxuXHQgKiBAcmV0dXJuIHtWdWV9XG5cdCAqL1xuXHRcblx0dmFyIEV4dGVuZCA9IGZ1bmN0aW9uIChWdWUpIHtcblx0ICB2YXIgZm9ybWF0ID0gRm9ybWF0KFZ1ZSk7XG5cdCAgdmFyIGdldFZhbHVlID0gUGF0aChWdWUpO1xuXHRcblx0ICBmdW5jdGlvbiBwYXJzZUFyZ3MgKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cdFxuXHQgICAgdmFyIGxhbmcgPSBWdWUuY29uZmlnLmxhbmc7XG5cdCAgICB2YXIgZmFsbGJhY2sgPSBWdWUuY29uZmlnLmZhbGxiYWNrTGFuZztcblx0XG5cdCAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgaWYgKGlzT2JqZWN0KGFyZ3NbMF0pIHx8IEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcblx0ICAgICAgICBhcmdzID0gYXJnc1swXTtcblx0ICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBsYW5nID0gYXJnc1swXTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgbGFuZyA9IGFyZ3NbMF07XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGlzT2JqZWN0KGFyZ3NbMV0pIHx8IEFycmF5LmlzQXJyYXkoYXJnc1sxXSkpIHtcblx0ICAgICAgICBhcmdzID0gYXJnc1sxXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7IGxhbmc6IGxhbmcsIGZhbGxiYWNrOiBmYWxsYmFjaywgcGFyYW1zOiBhcmdzIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGV4aXN0IChsb2NhbGUsIGtleSkge1xuXHQgICAgaWYgKCFsb2NhbGUgfHwgIWtleSkgeyByZXR1cm4gZmFsc2UgfVxuXHQgICAgcmV0dXJuICFpc05pbChnZXRWYWx1ZShsb2NhbGUsIGtleSkpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnRlcnBvbGF0ZSAobG9jYWxlLCBrZXksIGFyZ3MpIHtcblx0ICAgIGlmICghbG9jYWxlKSB7IHJldHVybiBudWxsIH1cblx0XG5cdCAgICB2YXIgdmFsID0gZ2V0VmFsdWUobG9jYWxlLCBrZXkpO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkgeyByZXR1cm4gdmFsIH1cblx0ICAgIGlmIChpc05pbCh2YWwpKSB7IHZhbCA9IGxvY2FsZVtrZXldOyB9XG5cdCAgICBpZiAoaXNOaWwodmFsKSkgeyByZXR1cm4gbnVsbCB9XG5cdCAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHsgd2FybihcIlZhbHVlIG9mIGtleSAnXCIgKyBrZXkgKyBcIicgaXMgbm90IGEgc3RyaW5nIVwiKTsgcmV0dXJuIG51bGwgfVxuXHRcblx0ICAgIC8vIENoZWNrIGZvciB0aGUgZXhpc3RhbmNlIG9mIGxpbmtzIHdpdGhpbiB0aGUgdHJhbnNsYXRlZCBzdHJpbmdcblx0ICAgIGlmICh2YWwuaW5kZXhPZignQDonKSA+PSAwKSB7XG5cdCAgICAgIC8vIE1hdGNoIGFsbCB0aGUgbGlua3Mgd2l0aGluIHRoZSBsb2NhbFxuXHQgICAgICAvLyBXZSBhcmUgZ29pbmcgdG8gcmVwbGFjZSBlYWNoIG9mXG5cdCAgICAgIC8vIHRoZW0gd2l0aCBpdHMgdHJhbnNsYXRpb25cblx0ICAgICAgdmFyIG1hdGNoZXMgPSB2YWwubWF0Y2goLyhAOltcXHd8Ll0rKS9nKTtcblx0ICAgICAgZm9yICh2YXIgaWR4IGluIG1hdGNoZXMpIHtcblx0ICAgICAgICB2YXIgbGluayA9IG1hdGNoZXNbaWR4XTtcblx0ICAgICAgICAvLyBSZW1vdmUgdGhlIGxlYWRpbmcgQDpcblx0ICAgICAgICB2YXIgbGlua1BsYWNlaG9sZGVyID0gbGluay5zdWJzdHIoMik7XG5cdCAgICAgICAgLy8gVHJhbnNsYXRlIHRoZSBsaW5rXG5cdCAgICAgICAgdmFyIHRyYW5zbGF0ZWRzdHJpbmcgPSBpbnRlcnBvbGF0ZShsb2NhbGUsIGxpbmtQbGFjZWhvbGRlciwgYXJncyk7XG5cdCAgICAgICAgLy8gUmVwbGFjZSB0aGUgbGluayB3aXRoIHRoZSB0cmFuc2xhdGVkIHN0cmluZ1xuXHQgICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKGxpbmssIHRyYW5zbGF0ZWRzdHJpbmcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuICFhcmdzXG5cdCAgICAgID8gdmFsXG5cdCAgICAgIDogVnVlLmNvbmZpZy5pMThuRm9ybWF0dGVyXG5cdCAgICAgICAgPyBWdWUuY29uZmlnLmkxOG5Gb3JtYXR0ZXIuYXBwbHkobnVsbCwgW3ZhbF0uY29uY2F0KGFyZ3MpKVxuXHQgICAgICAgIDogZm9ybWF0KHZhbCwgYXJncylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYW5zbGF0ZSAoZ2V0dGVyLCBsYW5nLCBmYWxsYmFjaywga2V5LCBwYXJhbXMpIHtcblx0ICAgIHZhciByZXMgPSBudWxsO1xuXHQgICAgcmVzID0gaW50ZXJwb2xhdGUoZ2V0dGVyKGxhbmcpLCBrZXksIHBhcmFtcyk7XG5cdCAgICBpZiAoIWlzTmlsKHJlcykpIHsgcmV0dXJuIHJlcyB9XG5cdFxuXHQgICAgcmVzID0gaW50ZXJwb2xhdGUoZ2V0dGVyKGZhbGxiYWNrKSwga2V5LCBwYXJhbXMpO1xuXHQgICAgaWYgKCFpc05pbChyZXMpKSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybignRmFsbCBiYWNrIHRvIHRyYW5zbGF0ZSB0aGUga2V5cGF0aCBcIicgKyBrZXkgKyAnXCIgd2l0aCBcIicgK1xuXHQgICAgICAgICAgZmFsbGJhY2sgKyAnXCIgbGFuZ3VhZ2UuJyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlc1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIG51bGxcblx0ICAgIH1cblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiB3YXJuRGVmYXVsdCAobGFuZywga2V5LCB2bSwgcmVzdWx0KSB7XG5cdCAgICBpZiAoIWlzTmlsKHJlc3VsdCkpIHsgcmV0dXJuIHJlc3VsdCB9XG5cdCAgICBpZiAoVnVlLmNvbmZpZy5taXNzaW5nSGFuZGxlcikge1xuXHQgICAgICBWdWUuY29uZmlnLm1pc3NpbmdIYW5kbGVyLmFwcGx5KG51bGwsIFtsYW5nLCBrZXksIHZtXSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0Nhbm5vdCB0cmFuc2xhdGUgdGhlIHZhbHVlIG9mIGtleXBhdGggXCInICsga2V5ICsgJ1wiLiAnICtcblx0ICAgICAgICAgICdVc2UgdGhlIHZhbHVlIG9mIGtleXBhdGggYXMgZGVmYXVsdCcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4ga2V5XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBnZXRBc3NldExvY2FsZSAobGFuZykge1xuXHQgICAgcmV0dXJuIFZ1ZS5sb2NhbGUobGFuZylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGdldENvbXBvbmVudExvY2FsZSAobGFuZykge1xuXHQgICAgcmV0dXJuIHRoaXMuJG9wdGlvbnMubG9jYWxlc1tsYW5nXVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZ2V0T2xkQ2hvaWNlSW5kZXhGaXhlZCAoY2hvaWNlKSB7XG5cdCAgICByZXR1cm4gY2hvaWNlID8gY2hvaWNlID4gMSA/IDEgOiAwIDogMVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZ2V0Q2hvaWNlSW5kZXggKGNob2ljZSwgY2hvaWNlc0xlbmd0aCkge1xuXHQgICAgY2hvaWNlID0gTWF0aC5hYnMoY2hvaWNlKTtcblx0XG5cdCAgICBpZiAoY2hvaWNlc0xlbmd0aCA9PT0gMikgeyByZXR1cm4gZ2V0T2xkQ2hvaWNlSW5kZXhGaXhlZChjaG9pY2UpIH1cblx0XG5cdCAgICByZXR1cm4gY2hvaWNlID8gTWF0aC5taW4oY2hvaWNlLCAyKSA6IDBcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZldGNoQ2hvaWNlIChsb2NhbGUsIGNob2ljZSkge1xuXHQgICAgaWYgKCFsb2NhbGUgJiYgdHlwZW9mIGxvY2FsZSAhPT0gJ3N0cmluZycpIHsgcmV0dXJuIG51bGwgfVxuXHQgICAgdmFyIGNob2ljZXMgPSBsb2NhbGUuc3BsaXQoJ3wnKTtcblx0XG5cdCAgICBjaG9pY2UgPSBnZXRDaG9pY2VJbmRleChjaG9pY2UsIGNob2ljZXMubGVuZ3RoKTtcblx0ICAgIGlmICghY2hvaWNlc1tjaG9pY2VdKSB7IHJldHVybiBsb2NhbGUgfVxuXHQgICAgcmV0dXJuIGNob2ljZXNbY2hvaWNlXS50cmltKClcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFZ1ZS50XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICogQHBhcmFtIHtBcnJheX0gLi4uYXJnc1xuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcblx0ICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDEgXTtcblx0XG5cdCAgICBpZiAoIWtleSkgeyByZXR1cm4gJycgfVxuXHQgICAgdmFyIHJlZiA9IHBhcnNlQXJncy5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuXHQgICAgdmFyIGxhbmcgPSByZWYubGFuZztcblx0ICAgIHZhciBmYWxsYmFjayA9IHJlZi5mYWxsYmFjaztcblx0ICAgIHZhciBwYXJhbXMgPSByZWYucGFyYW1zO1xuXHQgICAgcmV0dXJuIHdhcm5EZWZhdWx0KGxhbmcsIGtleSwgbnVsbCwgdHJhbnNsYXRlKGdldEFzc2V0TG9jYWxlLCBsYW5nLCBmYWxsYmFjaywga2V5LCBwYXJhbXMpKVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFZ1ZS50Y1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gY2hvaWNlXG5cdCAgICogQHBhcmFtIHtBcnJheX0gLi4uYXJnc1xuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnRjID0gZnVuY3Rpb24gKGtleSwgY2hvaWNlKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcblx0ICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDIgXTtcblx0XG5cdCAgICByZXR1cm4gZmV0Y2hDaG9pY2UoVnVlLnQuYXBwbHkoVnVlLCBbIGtleSBdLmNvbmNhdCggYXJncyApKSwgY2hvaWNlKVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFZ1ZS50ZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3Ncblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBWdWUudGUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcblx0ICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDEgXTtcblx0XG5cdCAgICB2YXIgcmVmID0gcGFyc2VBcmdzLmFwcGx5KHZvaWQgMCwgYXJncyk7XG5cdCAgICB2YXIgbGFuZyA9IHJlZi5sYW5nO1xuXHQgICAgcmV0dXJuIGV4aXN0KGdldEFzc2V0TG9jYWxlKGxhbmcpLCBrZXkpXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogJHRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcGFyYW0ge0FycmF5fSAuLi5hcmdzXG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiR0ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG5cdCAgICB3aGlsZSAoIGxlbi0tID4gMCApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gKyAxIF07XG5cdFxuXHQgICAgaWYgKCFrZXkpIHsgcmV0dXJuICcnIH1cblx0ICAgIHZhciByZWYgPSBwYXJzZUFyZ3MuYXBwbHkodm9pZCAwLCBhcmdzKTtcblx0ICAgIHZhciBsYW5nID0gcmVmLmxhbmc7XG5cdCAgICB2YXIgZmFsbGJhY2sgPSByZWYuZmFsbGJhY2s7XG5cdCAgICB2YXIgcGFyYW1zID0gcmVmLnBhcmFtcztcblx0ICAgIHZhciByZXMgPSBudWxsO1xuXHQgICAgaWYgKHRoaXMuJG9wdGlvbnMubG9jYWxlcykge1xuXHQgICAgICByZXMgPSB0cmFuc2xhdGUoXG5cdCAgICAgICAgYmluZChnZXRDb21wb25lbnRMb2NhbGUsIHRoaXMpLCBsYW5nLCBmYWxsYmFjaywga2V5LCBwYXJhbXNcblx0ICAgICAgKTtcblx0ICAgICAgaWYgKHJlcykgeyByZXR1cm4gcmVzIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB3YXJuRGVmYXVsdChsYW5nLCBrZXksIHRoaXMsIHRyYW5zbGF0ZShnZXRBc3NldExvY2FsZSwgbGFuZywgZmFsbGJhY2ssIGtleSwgcGFyYW1zKSlcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAkdGNcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IGNob2ljZVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3Ncblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHRjID0gZnVuY3Rpb24gKGtleSwgY2hvaWNlKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcblx0ICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDIgXTtcblx0XG5cdCAgICBpZiAodHlwZW9mIGNob2ljZSAhPT0gJ251bWJlcicgJiYgdHlwZW9mIGNob2ljZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgcmV0dXJuIGtleVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZldGNoQ2hvaWNlKChyZWYgPSB0aGlzKS4kdC5hcHBseShyZWYsIFsga2V5IF0uY29uY2F0KCBhcmdzICkpLCBjaG9pY2UpXG5cdCAgICB2YXIgcmVmO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICR0ZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3Ncblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgICAqXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHRlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG5cdCAgICB3aGlsZSAoIGxlbi0tID4gMCApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gKyAxIF07XG5cdFxuXHQgICAgdmFyIHJlZiA9IHBhcnNlQXJncy5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuXHQgICAgdmFyIGxhbmcgPSByZWYubGFuZztcblx0ICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXHQgICAgaWYgKHRoaXMuJG9wdGlvbnMubG9jYWxlcykgeyAvLyBleGlzdCBjb21wb25lbnQgbG9jYWxlXG5cdCAgICAgIGZvdW5kID0gZXhpc3QoYmluZChnZXRDb21wb25lbnRMb2NhbGUpKGxhbmcpLCBrZXkpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFmb3VuZCkge1xuXHQgICAgICBmb3VuZCA9IGV4aXN0KGdldEFzc2V0TG9jYWxlKGxhbmcpLCBrZXkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZvdW5kXG5cdCAgfTtcblx0XG5cdCAgVnVlLm1peGluKHtcblx0ICAgIGNvbXB1dGVkOiB7XG5cdCAgICAgICRsYW5nOiBmdW5jdGlvbiAkbGFuZyAoKSB7XG5cdCAgICAgICAgcmV0dXJuIFZ1ZS5jb25maWcubGFuZ1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBWdWVcblx0fTtcblx0XG5cdHZhciBsYW5nVk07IC8vIHNpbmdsZXRvblxuXHRcblx0XG5cdC8qKlxuXHQgKiBwbHVnaW5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IFZ1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBsdWdpbiAoVnVlLCBvcHRzKSB7XG5cdCAgaWYgKCBvcHRzID09PSB2b2lkIDAgKSBvcHRzID0ge307XG5cdFxuXHQgIHZhciB2ZXJzaW9uID0gKFZ1ZS52ZXJzaW9uICYmIE51bWJlcihWdWUudmVyc2lvbi5zcGxpdCgnLicpWzBdKSkgfHwgLTE7XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHBsdWdpbi5pbnN0YWxsZWQpIHtcblx0ICAgIHdhcm4oJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB2ZXJzaW9uIDwgMikge1xuXHQgICAgd2FybigoXCJ2dWUtaTE4biAoXCIgKyAocGx1Z2luLnZlcnNpb24pICsgXCIpIG5lZWQgdG8gdXNlIFZ1ZSAyLjAgb3IgbGF0ZXIgKFZ1ZTogXCIgKyAoVnVlLnZlcnNpb24pICsgXCIpLlwiKSk7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHZhciBsYW5nID0gJ2VuJztcblx0ICBzZXR1cExhbmdWTShWdWUsIGxhbmcpO1xuXHRcblx0ICBBc3NldChWdWUsIGxhbmdWTSk7XG5cdCAgT3ZlcnJpZGUoVnVlLCBsYW5nVk0pO1xuXHQgIENvbmZpZyhWdWUsIGxhbmdWTSwgbGFuZyk7XG5cdCAgRXh0ZW5kKFZ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldHVwTGFuZ1ZNIChWdWUsIGxhbmcpIHtcblx0ICB2YXIgc2lsZW50ID0gVnVlLmNvbmZpZy5zaWxlbnQ7XG5cdCAgVnVlLmNvbmZpZy5zaWxlbnQgPSB0cnVlO1xuXHQgIGlmICghbGFuZ1ZNKSB7XG5cdCAgICBsYW5nVk0gPSBuZXcgVnVlKHsgZGF0YTogeyBsYW5nOiBsYW5nLCBsb2NhbGVzOiB7fSB9IH0pO1xuXHQgIH1cblx0ICBWdWUuY29uZmlnLnNpbGVudCA9IHNpbGVudDtcblx0fVxuXHRcblx0cGx1Z2luLnZlcnNpb24gPSAnX19WRVJTSU9OX18nO1xuXHRcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcblx0ICB3aW5kb3cuVnVlLnVzZShwbHVnaW4pO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHBsdWdpbjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSksXG4vKiAxMDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIGxvY2FsZXMgPSB7fTtbJ2VuJywgJ3poJ10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgbG9jYWxlc1trZXldID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTApKFwiLi9cIiArIGtleSk7XG5cdH0pO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbG9jYWxlcztcblxuLyoqKi8gfSksXG4vKiAxMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWFwID0ge1xuXHRcdFwiLi9lblwiOiAxMTEsXG5cdFx0XCIuL2VuLnltbFwiOiAxMTEsXG5cdFx0XCIuL2luZGV4XCI6IDEwOSxcblx0XHRcIi4vaW5kZXguanNcIjogMTA5LFxuXHRcdFwiLi96aFwiOiAxMTIsXG5cdFx0XCIuL3poLnltbFwiOiAxMTJcblx0fTtcblx0ZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18od2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkpO1xuXHR9O1xuXHRmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdFx0cmV0dXJuIG1hcFtyZXFdIHx8IChmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJy5cIikgfSgpKTtcblx0fTtcblx0d2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0XHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcblx0fTtcblx0d2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcblx0bW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcblx0d2VicGFja0NvbnRleHQuaWQgPSAxMTA7XG5cblxuLyoqKi8gfSksXG4vKiAxMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcImJ1dHRvblwiOntcInVwbG9hZFwiOlwidXBsb2FkXCIsXCJzYXZlXCI6XCJzYXZlXCIsXCJjbG9zZV9lZGl0XCI6XCJjbG9zZSBlZGl0XCIsXCJvcGVuX2VkaXRcIjpcIm9wZW4gZWRpdFwiLFwiaGVscFwiOlwiaGVscFwiLFwibHJjX2luZm9cIjpcImluZm9cIixcInJlbW92ZV9seXJpY1wiOlwicmVtb3ZlIGx5cmljXCIsXCJwcmV2X2x5cmljXCI6XCJwcmV2IGx5cmljXCIsXCJuZXh0X2x5cmljXCI6XCJuZXh0IGx5cmljXCJ9LFwibWVudVwiOntcInVwbG9hZFwiOntcImxyY1wiOlwiTFJDIGZvcm1hdCBseXJpY1wiLFwibHlyaWNcIjpcImx5cmljIHRleHRcIixcIm11c2ljXCI6XCJtdXNpY1wifX0sXCJtb2RhbFwiOntcImxyY19mb3JtYXRfc2F2ZVwiOntcInRpdGxlXCI6XCJMeXJpY3MgU2F2ZVwiLFwiaW5mb190aXRsZVwiOlwiTHlyaWNzIEluZm9cIixcImZpZWxkc1wiOntcInNvbmdfdGl0bGVcIjpcIlNvbmUgVGl0bGVcIixcImFydGlzdFwiOlwiQXJ0aXN0XCIsXCJhbGJ1bVwiOlwiQWxidW1cIixcInNvbmd0ZXh0X2NyZWF0b3JcIjpcIlNvbmd0ZXh0IENyZWF0b3JcIixcImxyY19jcmVhdG9yXCI6XCJMUkMgQ3JlYXRvclwifSxcInNhdmVfdGl0bGVcIjpcIkx5cmljc1wiLFwiY29tYmluZVwiOlwiY29tYmluZSBseXJpY3NcIixcImRvd25sb2FkXCI6XCJseXJpY3MgZmlsZSBkb3dubG9hZFwifSxcImxyY19mb3JtYXRfdXBsb2FkXCI6e1widGl0bGVcIjpcIlVwbG9hZCBMUkMgRm9ybWF0XCIsXCJkZXNjcmlwdGlvblwiOlwiVXBsb2FkIHRpbWVzdGFtcGVkIGx5cmljc1wiLFwidXBsb2FkXCI6XCJSZWFkIGZyb20gZmlsZVwifSxcImx5cmljX3VwbG9hZFwiOntcInRpdGxlXCI6XCJVcGxvYWQgVGV4dCBMeXJpY3NcIixcImRlc2NyaXB0aW9uXCI6XCJQbGFpbiBUZXh0IGx5cmljcywgbHlyaWNzIGRpdmlkZWQgYnkgYSBuZXdsaW5lXCIsXCJ1cGxvYWRcIjpcIlJlYWQgZnJvbSBmaWxlXCJ9LFwiaGVscFwiOntcInRpdGxlXCI6XCJIZWxwXCIsXCJzaG9ydGN1dF9rZXlcIjpcInNob3J0Y3V0IGtleVwiLFwicGxheV9jb250cm9sXCI6e1widGl0bGVcIjpcInBsYXkgY29udHJvbFwiLFwibGVmdF9rZXlcIjpcIjxMZWZ0PlwiLFwicmlnaHRfa2V5XCI6XCI8UmlnaHQ+XCIsXCJiYWNrd2FyZFwiOlwiYmFja3dhcmRcIixcImZvcndhcmRcIjpcImZvcndhcmRcIn0sXCJtYWtlX2xyY1wiOntcInRpdGxlXCI6XCJtYWtlIGxyY1wiLFwidXBfa2V5XCI6XCI8VXA+XCIsXCJkb3duX2tleVwiOlwiPERvd24+XCIsXCJwcmV2X2x5cmljXCI6XCJwcmV2IGx5cmljXCIsXCJuZXh0X2x5cmljXCI6XCJuZXh0IGx5cmljXCJ9LFwic291cmNlX2NvZGVcIjpcInNvdXJjZSBjb2RlXCJ9LFwiYnV0dG9uXCI6e1wib2tcIjpcIm9rXCIsXCJjYW5jZWxcIjpcImNhbmNlbFwifX0sXCJseXJpY19lZGl0b3JcIjp7XCJlZGl0XCI6XCJlZGl0XCIsXCJhZGRcIjpcImFkZFwiLFwicmVtb3ZlXCI6XCJyZW1vdmVcIixcInJlbW92ZV90aW1lc3RhbXBcIjpcInJlbW92ZSB0aW1lc3RhbXBcIixcInBsYXlfdG9fdGhpc19seXJpY1wiOlwicGxheSB0byB0aGlzIGx5cmljXCIsXCJmb2xsb3dpbmdfdW5zb3J0ZWRcIjpcIlRoZSBmb2xsb3dpbmcgdW5zb3J0ZWRcIn19XG5cbi8qKiovIH0pLFxuLyogMTEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XCJidXR0b25cIjp7XCJ1cGxvYWRcIjpcIuS4iuS8oFwiLFwic2F2ZVwiOlwi5L+d5a2YXCIsXCJjbG9zZV9lZGl0XCI6XCLlhbPpl63nvJbovpFcIixcIm9wZW5fZWRpdFwiOlwi5omT5byA57yW6L6RXCIsXCJoZWxwXCI6XCLluK7liqlcIixcImxyY19pbmZvXCI6XCLkv6Hmga9cIixcInJlbW92ZV9seXJpY1wiOlwi5riF6Zmk5q2M6K+NXCIsXCJwcmV2X2x5cmljXCI6XCLkuIrkuIDmnaHmrYzor41cIixcIm5leHRfbHlyaWNcIjpcIuS4i+S4gOadoeatjOivjVwifSxcIm1lbnVcIjp7XCJ1cGxvYWRcIjp7XCJscmNcIjpcIkxSQ+agvOW8j+atjOivjVwiLFwibHlyaWNcIjpcIuatjOivjeaWh+acrFwiLFwibXVzaWNcIjpcIumfs+S5kFwifX0sXCJtb2RhbFwiOntcImxyY19mb3JtYXRfc2F2ZVwiOntcInRpdGxlXCI6XCLkv53lrZjmrYzor41cIixcImluZm9fdGl0bGVcIjpcIuatjOivjeS/oeaBr1wiLFwiZmllbGRzXCI6e1wic29uZ190aXRsZVwiOlwi5q2M5ZCNXCIsXCJhcnRpc3RcIjpcIuiJuuacr+WutlwiLFwiYWxidW1cIjpcIuS4k+i+kVwiLFwic29uZ3RleHRfY3JlYXRvclwiOlwi5q2M6K+N5L2c6ICFXCIsXCJscmNfY3JlYXRvclwiOlwiTFJDIOWIm+W7uuiAhVwifSxcInNhdmVfdGl0bGVcIjpcIuatjOivjVwiLFwiY29tYmluZVwiOlwi5ZCI5bm25q2M6K+NXCIsXCJkb3dubG9hZFwiOlwi5LiL6L295q2M6K+N5paH5Lu2XCJ9LFwibHJjX2Zvcm1hdF91cGxvYWRcIjp7XCJ0aXRsZVwiOlwi5LiK5LygTFJD5qC85byP5paH5pysXCIsXCJkZXNjcmlwdGlvblwiOlwi5LiK5Lyg5bey57uP5YyF5ZCr5pe26Ze05oiz55qE5q2M6K+NXCIsXCJ1cGxvYWRcIjpcIuS7juaWh+S7tuivu+WPllwifSxcImx5cmljX3VwbG9hZFwiOntcInRpdGxlXCI6XCLkuIrkvKDmrYzor43mlofmnKxcIixcImRlc2NyaXB0aW9uXCI6XCLnuq/mlofmnKzmrYzor43vvIznlKjmjaLooYzlr7nmrYzor43liJLliIZcIixcInVwbG9hZFwiOlwi5LuO5paH5Lu26K+75Y+WXCJ9LFwiaGVscFwiOntcInRpdGxlXCI6XCLluK7liqlcIixcInNob3J0Y3V0X2tleVwiOlwi5b+r5o236ZSuXCIsXCJwbGF5X2NvbnRyb2xcIjp7XCJ0aXRsZVwiOlwi5pKt5pS+5o6n5Yi2XCIsXCJsZWZ0X2tleVwiOlwiPExlZnQ+XCIsXCJyaWdodF9rZXlcIjpcIjxSaWdodD5cIixcImJhY2t3YXJkXCI6XCLlkI7pgIBcIixcImZvcndhcmRcIjpcIuWJjei/m1wifSxcIm1ha2VfbHJjXCI6e1widGl0bGVcIjpcIuWItuS9nOatjOivjVwiLFwidXBfa2V5XCI6XCI8VXA+XCIsXCJkb3duX2tleVwiOlwiPERvd24+XCIsXCJwcmV2X2x5cmljXCI6XCLkuIrkuIDmnaHmrYzor41cIixcIm5leHRfbHlyaWNcIjpcIuS4i+S4gOadoeatjOivjVwifSxcInNvdXJjZV9jb2RlXCI6XCLmupDnoIFcIn0sXCJidXR0b25cIjp7XCJva1wiOlwi56Gu6K6kXCIsXCJjYW5jZWxcIjpcIuWPlua2iFwifX0sXCJseXJpY19lZGl0b3JcIjp7XCJlZGl0XCI6XCLnvJbovpFcIixcImFkZFwiOlwi5re75YqgXCIsXCJyZW1vdmVcIjpcIuWIoOmZpFwiLFwicmVtb3ZlX3RpbWVzdGFtcFwiOlwi5Yig6Zmk5pe26Ze06L20XCIsXCJwbGF5X3RvX3RoaXNfbHlyaWNcIjpcIuaSreaUvuWIsOi/meadoeatjOivjVwiLFwiZm9sbG93aW5nX3Vuc29ydGVkXCI6XCLku6XkuIvmnKrmjpLluo9cIn19XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbWFpbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi4vYXNzZXRzL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDA2MWQ3MzNhNjFmZTViNWY5MGZhIiwiaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXG5pbXBvcnQgQXBwIGZyb20gJy4vYXBwJ1xuaW1wb3J0ICcuL2kxOG4nXG5cbmxldCByb290ID0gbmV3IFZ1ZSh7XG4gIGVsOiAnI2FwcCcsXG4gIHJlbmRlciAoaCkge1xuICAgIHJldHVybiBoKEFwcCwge3JlZjogJ2FwcCd9KVxuICB9LFxufSlcblxuVnVlLnByb3RvdHlwZS4kQXBwID0gcm9vdC4kcmVmcy5hcHBcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL21haW4uanMiLCIvKiFcbiAqIFZ1ZS5qcyB2Mi41LjE2XG4gKiAoYykgMjAxNC0yMDE4IEV2YW4gWW91XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLyogICovXG5cbnZhciBlbXB0eU9iamVjdCA9IE9iamVjdC5mcmVlemUoe30pO1xuXG4vLyB0aGVzZSBoZWxwZXJzIHByb2R1Y2VzIGJldHRlciB2bSBjb2RlIGluIEpTIGVuZ2luZXMgZHVlIHRvIHRoZWlyXG4vLyBleHBsaWNpdG5lc3MgYW5kIGZ1bmN0aW9uIGlubGluaW5nXG5mdW5jdGlvbiBpc1VuZGVmICh2KSB7XG4gIHJldHVybiB2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbFxufVxuXG5mdW5jdGlvbiBpc0RlZiAodikge1xuICByZXR1cm4gdiAhPT0gdW5kZWZpbmVkICYmIHYgIT09IG51bGxcbn1cblxuZnVuY3Rpb24gaXNUcnVlICh2KSB7XG4gIHJldHVybiB2ID09PSB0cnVlXG59XG5cbmZ1bmN0aW9uIGlzRmFsc2UgKHYpIHtcbiAgcmV0dXJuIHYgPT09IGZhbHNlXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdmFsdWUgaXMgcHJpbWl0aXZlXG4gKi9cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlICh2YWx1ZSkge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8XG4gICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgdHlwZW9mIHZhbHVlID09PSAnc3ltYm9sJyB8fFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nXG4gIClcbn1cblxuLyoqXG4gKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcbiAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcbiAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QgKG9iaikge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnXG59XG5cbi8qKlxuICogR2V0IHRoZSByYXcgdHlwZSBzdHJpbmcgb2YgYSB2YWx1ZSBlLmcuIFtvYmplY3QgT2JqZWN0XVxuICovXG52YXIgX3RvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gdG9SYXdUeXBlICh2YWx1ZSkge1xuICByZXR1cm4gX3RvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKVxufVxuXG4vKipcbiAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcbiAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QgKG9iaikge1xuICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSdcbn1cblxuZnVuY3Rpb24gaXNSZWdFeHAgKHYpIHtcbiAgcmV0dXJuIF90b1N0cmluZy5jYWxsKHYpID09PSAnW29iamVjdCBSZWdFeHBdJ1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHZhbCBpcyBhIHZhbGlkIGFycmF5IGluZGV4LlxuICovXG5mdW5jdGlvbiBpc1ZhbGlkQXJyYXlJbmRleCAodmFsKSB7XG4gIHZhciBuID0gcGFyc2VGbG9hdChTdHJpbmcodmFsKSk7XG4gIHJldHVybiBuID49IDAgJiYgTWF0aC5mbG9vcihuKSA9PT0gbiAmJiBpc0Zpbml0ZSh2YWwpXG59XG5cbi8qKlxuICogQ29udmVydCBhIHZhbHVlIHRvIGEgc3RyaW5nIHRoYXQgaXMgYWN0dWFsbHkgcmVuZGVyZWQuXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nICh2YWwpIHtcbiAgcmV0dXJuIHZhbCA9PSBudWxsXG4gICAgPyAnJ1xuICAgIDogdHlwZW9mIHZhbCA9PT0gJ29iamVjdCdcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCBudWxsLCAyKVxuICAgICAgOiBTdHJpbmcodmFsKVxufVxuXG4vKipcbiAqIENvbnZlcnQgYSBpbnB1dCB2YWx1ZSB0byBhIG51bWJlciBmb3IgcGVyc2lzdGVuY2UuXG4gKiBJZiB0aGUgY29udmVyc2lvbiBmYWlscywgcmV0dXJuIG9yaWdpbmFsIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIgKHZhbCkge1xuICB2YXIgbiA9IHBhcnNlRmxvYXQodmFsKTtcbiAgcmV0dXJuIGlzTmFOKG4pID8gdmFsIDogblxufVxuXG4vKipcbiAqIE1ha2UgYSBtYXAgYW5kIHJldHVybiBhIGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhIGtleVxuICogaXMgaW4gdGhhdCBtYXAuXG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAgKFxuICBzdHIsXG4gIGV4cGVjdHNMb3dlckNhc2Vcbikge1xuICB2YXIgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGxpc3QgPSBzdHIuc3BsaXQoJywnKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgbWFwW2xpc3RbaV1dID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZXhwZWN0c0xvd2VyQ2FzZVxuICAgID8gZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXTsgfVxuICAgIDogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbF07IH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHRhZyBpcyBhIGJ1aWx0LWluIHRhZy5cbiAqL1xudmFyIGlzQnVpbHRJblRhZyA9IG1ha2VNYXAoJ3Nsb3QsY29tcG9uZW50JywgdHJ1ZSk7XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBhdHRyaWJ1dGUgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUuXG4gKi9cbnZhciBpc1Jlc2VydmVkQXR0cmlidXRlID0gbWFrZU1hcCgna2V5LHJlZixzbG90LHNsb3Qtc2NvcGUsaXMnKTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaXRlbSBmcm9tIGFuIGFycmF5XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZSAoYXJyLCBpdGVtKSB7XG4gIGlmIChhcnIubGVuZ3RoKSB7XG4gICAgdmFyIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHJldHVybiBhcnIuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZnVuY3Rpb24gaGFzT3duIChvYmosIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjYWNoZWQgdmVyc2lvbiBvZiBhIHB1cmUgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNhY2hlZCAoZm4pIHtcbiAgdmFyIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcmV0dXJuIChmdW5jdGlvbiBjYWNoZWRGbiAoc3RyKSB7XG4gICAgdmFyIGhpdCA9IGNhY2hlW3N0cl07XG4gICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpXG4gIH0pXG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsaW1pdGVkIHN0cmluZy5cbiAqL1xudmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG52YXIgY2FtZWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgZnVuY3Rpb24gKF8sIGMpIHsgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJzsgfSlcbn0pO1xuXG4vKipcbiAqIENhcGl0YWxpemUgYSBzdHJpbmcuXG4gKi9cbnZhciBjYXBpdGFsaXplID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKVxufSk7XG5cbi8qKlxuICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAqL1xudmFyIGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcbnZhciBoeXBoZW5hdGUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICctJDEnKS50b0xvd2VyQ2FzZSgpXG59KTtcblxuLyoqXG4gKiBTaW1wbGUgYmluZCBwb2x5ZmlsbCBmb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IHN1cHBvcnQgaXQuLi4gZS5nLlxuICogUGhhbnRvbUpTIDEueC4gVGVjaG5pY2FsbHkgd2UgZG9uJ3QgbmVlZCB0aGlzIGFueW1vcmUgc2luY2UgbmF0aXZlIGJpbmQgaXNcbiAqIG5vdyBtb3JlIHBlcmZvcm1hbnQgaW4gbW9zdCBicm93c2VycywgYnV0IHJlbW92aW5nIGl0IHdvdWxkIGJlIGJyZWFraW5nIGZvclxuICogY29kZSB0aGF0IHdhcyBhYmxlIHRvIHJ1biBpbiBQaGFudG9tSlMgMS54LCBzbyB0aGlzIG11c3QgYmUga2VwdCBmb3JcbiAqIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICovXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBwb2x5ZmlsbEJpbmQgKGZuLCBjdHgpIHtcbiAgZnVuY3Rpb24gYm91bmRGbiAoYSkge1xuICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICByZXR1cm4gbFxuICAgICAgPyBsID4gMVxuICAgICAgICA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKVxuICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKVxuICAgICAgOiBmbi5jYWxsKGN0eClcbiAgfVxuXG4gIGJvdW5kRm4uX2xlbmd0aCA9IGZuLmxlbmd0aDtcbiAgcmV0dXJuIGJvdW5kRm5cbn1cblxuZnVuY3Rpb24gbmF0aXZlQmluZCAoZm4sIGN0eCkge1xuICByZXR1cm4gZm4uYmluZChjdHgpXG59XG5cbnZhciBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRcbiAgPyBuYXRpdmVCaW5kXG4gIDogcG9seWZpbGxCaW5kO1xuXG4vKipcbiAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuICovXG5mdW5jdGlvbiB0b0FycmF5IChsaXN0LCBzdGFydCkge1xuICBzdGFydCA9IHN0YXJ0IHx8IDA7XG4gIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcbiAgd2hpbGUgKGktLSkge1xuICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbi8qKlxuICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBleHRlbmQgKHRvLCBfZnJvbSkge1xuICBmb3IgKHZhciBrZXkgaW4gX2Zyb20pIHtcbiAgICB0b1trZXldID0gX2Zyb21ba2V5XTtcbiAgfVxuICByZXR1cm4gdG9cbn1cblxuLyoqXG4gKiBNZXJnZSBhbiBBcnJheSBvZiBPYmplY3RzIGludG8gYSBzaW5nbGUgT2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCAoYXJyKSB7XG4gIHZhciByZXMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYXJyW2ldKSB7XG4gICAgICBleHRlbmQocmVzLCBhcnJbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogUGVyZm9ybSBubyBvcGVyYXRpb24uXG4gKiBTdHViYmluZyBhcmdzIHRvIG1ha2UgRmxvdyBoYXBweSB3aXRob3V0IGxlYXZpbmcgdXNlbGVzcyB0cmFuc3BpbGVkIGNvZGVcbiAqIHdpdGggLi4ucmVzdCAoaHR0cHM6Ly9mbG93Lm9yZy9ibG9nLzIwMTcvMDUvMDcvU3RyaWN0LUZ1bmN0aW9uLUNhbGwtQXJpdHkvKVxuICovXG5mdW5jdGlvbiBub29wIChhLCBiLCBjKSB7fVxuXG4vKipcbiAqIEFsd2F5cyByZXR1cm4gZmFsc2UuXG4gKi9cbnZhciBubyA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7IHJldHVybiBmYWxzZTsgfTtcblxuLyoqXG4gKiBSZXR1cm4gc2FtZSB2YWx1ZVxuICovXG52YXIgaWRlbnRpdHkgPSBmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHN0YXRpYyBrZXlzIHN0cmluZyBmcm9tIGNvbXBpbGVyIG1vZHVsZXMuXG4gKi9cblxuXG4vKipcbiAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuICovXG5mdW5jdGlvbiBsb29zZUVxdWFsIChhLCBiKSB7XG4gIGlmIChhID09PSBiKSB7IHJldHVybiB0cnVlIH1cbiAgdmFyIGlzT2JqZWN0QSA9IGlzT2JqZWN0KGEpO1xuICB2YXIgaXNPYmplY3RCID0gaXNPYmplY3QoYik7XG4gIGlmIChpc09iamVjdEEgJiYgaXNPYmplY3RCKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBpc0FycmF5QSA9IEFycmF5LmlzQXJyYXkoYSk7XG4gICAgICB2YXIgaXNBcnJheUIgPSBBcnJheS5pc0FycmF5KGIpO1xuICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7XG4gICAgICAgIHJldHVybiBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgYS5ldmVyeShmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGUsIGJbaV0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKCFpc0FycmF5QSAmJiAhaXNBcnJheUIpIHtcbiAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xuICAgICAgICByZXR1cm4ga2V5c0EubGVuZ3RoID09PSBrZXlzQi5sZW5ndGggJiYga2V5c0EuZXZlcnkoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSBlbHNlIGlmICghaXNPYmplY3RBICYmICFpc09iamVjdEIpIHtcbiAgICByZXR1cm4gU3RyaW5nKGEpID09PSBTdHJpbmcoYilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBsb29zZUluZGV4T2YgKGFyciwgdmFsKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7IHJldHVybiBpIH1cbiAgfVxuICByZXR1cm4gLTFcbn1cblxuLyoqXG4gKiBFbnN1cmUgYSBmdW5jdGlvbiBpcyBjYWxsZWQgb25seSBvbmNlLlxuICovXG5mdW5jdGlvbiBvbmNlIChmbikge1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgU1NSX0FUVFIgPSAnZGF0YS1zZXJ2ZXItcmVuZGVyZWQnO1xuXG52YXIgQVNTRVRfVFlQRVMgPSBbXG4gICdjb21wb25lbnQnLFxuICAnZGlyZWN0aXZlJyxcbiAgJ2ZpbHRlcidcbl07XG5cbnZhciBMSUZFQ1lDTEVfSE9PS1MgPSBbXG4gICdiZWZvcmVDcmVhdGUnLFxuICAnY3JlYXRlZCcsXG4gICdiZWZvcmVNb3VudCcsXG4gICdtb3VudGVkJyxcbiAgJ2JlZm9yZVVwZGF0ZScsXG4gICd1cGRhdGVkJyxcbiAgJ2JlZm9yZURlc3Ryb3knLFxuICAnZGVzdHJveWVkJyxcbiAgJ2FjdGl2YXRlZCcsXG4gICdkZWFjdGl2YXRlZCcsXG4gICdlcnJvckNhcHR1cmVkJ1xuXTtcblxuLyogICovXG5cbnZhciBjb25maWcgPSAoe1xuICAvKipcbiAgICogT3B0aW9uIG1lcmdlIHN0cmF0ZWdpZXMgKHVzZWQgaW4gY29yZS91dGlsL29wdGlvbnMpXG4gICAqL1xuICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKi9cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogU2hvdyBwcm9kdWN0aW9uIG1vZGUgdGlwIG1lc3NhZ2Ugb24gYm9vdD9cbiAgICovXG4gIHByb2R1Y3Rpb25UaXA6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIGRldnRvb2xzXG4gICAqL1xuICBkZXZ0b29sczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcblxuICAvKipcbiAgICogV2hldGhlciB0byByZWNvcmQgcGVyZlxuICAgKi9cbiAgcGVyZm9ybWFuY2U6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBFcnJvciBoYW5kbGVyIGZvciB3YXRjaGVyIGVycm9yc1xuICAgKi9cbiAgZXJyb3JIYW5kbGVyOiBudWxsLFxuXG4gIC8qKlxuICAgKiBXYXJuIGhhbmRsZXIgZm9yIHdhdGNoZXIgd2FybnNcbiAgICovXG4gIHdhcm5IYW5kbGVyOiBudWxsLFxuXG4gIC8qKlxuICAgKiBJZ25vcmUgY2VydGFpbiBjdXN0b20gZWxlbWVudHNcbiAgICovXG4gIGlnbm9yZWRFbGVtZW50czogW10sXG5cbiAgLyoqXG4gICAqIEN1c3RvbSB1c2VyIGtleSBhbGlhc2VzIGZvciB2LW9uXG4gICAqL1xuICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAga2V5Q29kZXM6IE9iamVjdC5jcmVhdGUobnVsbCksXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdGFnIGlzIHJlc2VydmVkIHNvIHRoYXQgaXQgY2Fubm90IGJlIHJlZ2lzdGVyZWQgYXMgYVxuICAgKiBjb21wb25lbnQuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uXG4gICAqL1xuICBpc1Jlc2VydmVkVGFnOiBubyxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gYXR0cmlidXRlIGlzIHJlc2VydmVkIHNvIHRoYXQgaXQgY2Fubm90IGJlIHVzZWQgYXMgYSBjb21wb25lbnRcbiAgICogcHJvcC4gVGhpcyBpcyBwbGF0Zm9ybS1kZXBlbmRlbnQgYW5kIG1heSBiZSBvdmVyd3JpdHRlbi5cbiAgICovXG4gIGlzUmVzZXJ2ZWRBdHRyOiBubyxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB0YWcgaXMgYW4gdW5rbm93biBlbGVtZW50LlxuICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuXG4gICAqL1xuICBpc1Vua25vd25FbGVtZW50OiBubyxcblxuICAvKipcbiAgICogR2V0IHRoZSBuYW1lc3BhY2Ugb2YgYW4gZWxlbWVudFxuICAgKi9cbiAgZ2V0VGFnTmFtZXNwYWNlOiBub29wLFxuXG4gIC8qKlxuICAgKiBQYXJzZSB0aGUgcmVhbCB0YWcgbmFtZSBmb3IgdGhlIHNwZWNpZmljIHBsYXRmb3JtLlxuICAgKi9cbiAgcGFyc2VQbGF0Zm9ybVRhZ05hbWU6IGlkZW50aXR5LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgbXVzdCBiZSBib3VuZCB1c2luZyBwcm9wZXJ0eSwgZS5nLiB2YWx1ZVxuICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuXG4gICAqL1xuICBtdXN0VXNlUHJvcDogbm8sXG5cbiAgLyoqXG4gICAqIEV4cG9zZWQgZm9yIGxlZ2FjeSByZWFzb25zXG4gICAqL1xuICBfbGlmZWN5Y2xlSG9va3M6IExJRkVDWUNMRV9IT09LU1xufSlcblxuLyogICovXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG4gKi9cbmZ1bmN0aW9uIGlzUmVzZXJ2ZWQgKHN0cikge1xuICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcbiAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1RlxufVxuXG4vKipcbiAqIERlZmluZSBhIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBkZWYgKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgdmFsdWU6IHZhbCxcbiAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG4vKipcbiAqIFBhcnNlIHNpbXBsZSBwYXRoLlxuICovXG52YXIgYmFpbFJFID0gL1teXFx3LiRdLztcbmZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuICBpZiAoYmFpbFJFLnRlc3QocGF0aCkpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7XG4gIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFvYmopIHsgcmV0dXJuIH1cbiAgICAgIG9iaiA9IG9ialtzZWdtZW50c1tpXV07XG4gICAgfVxuICAgIHJldHVybiBvYmpcbiAgfVxufVxuXG4vKiAgKi9cblxuLy8gY2FuIHdlIHVzZSBfX3Byb3RvX18/XG52YXIgaGFzUHJvdG8gPSAnX19wcm90b19fJyBpbiB7fTtcblxuLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xudmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xudmFyIGluV2VleCA9IHR5cGVvZiBXWEVudmlyb25tZW50ICE9PSAndW5kZWZpbmVkJyAmJiAhIVdYRW52aXJvbm1lbnQucGxhdGZvcm07XG52YXIgd2VleFBsYXRmb3JtID0gaW5XZWV4ICYmIFdYRW52aXJvbm1lbnQucGxhdGZvcm0udG9Mb3dlckNhc2UoKTtcbnZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xudmFyIGlzSUUgPSBVQSAmJiAvbXNpZXx0cmlkZW50Ly50ZXN0KFVBKTtcbnZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xudmFyIGlzRWRnZSA9IFVBICYmIFVBLmluZGV4T2YoJ2VkZ2UvJykgPiAwO1xudmFyIGlzQW5kcm9pZCA9IChVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwKSB8fCAod2VleFBsYXRmb3JtID09PSAnYW5kcm9pZCcpO1xudmFyIGlzSU9TID0gKFVBICYmIC9pcGhvbmV8aXBhZHxpcG9kfGlvcy8udGVzdChVQSkpIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdpb3MnKTtcbnZhciBpc0Nocm9tZSA9IFVBICYmIC9jaHJvbWVcXC9cXGQrLy50ZXN0KFVBKSAmJiAhaXNFZGdlO1xuXG4vLyBGaXJlZm94IGhhcyBhIFwid2F0Y2hcIiBmdW5jdGlvbiBvbiBPYmplY3QucHJvdG90eXBlLi4uXG52YXIgbmF0aXZlV2F0Y2ggPSAoe30pLndhdGNoO1xuXG52YXIgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7XG5pZiAoaW5Ccm93c2VyKSB7XG4gIHRyeSB7XG4gICAgdmFyIG9wdHMgPSB7fTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3B0cywgJ3Bhc3NpdmUnLCAoe1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pKTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzI4NVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0LXBhc3NpdmUnLCBudWxsLCBvcHRzKTtcbiAgfSBjYXRjaCAoZSkge31cbn1cblxuLy8gdGhpcyBuZWVkcyB0byBiZSBsYXp5LWV2YWxlZCBiZWNhdXNlIHZ1ZSBtYXkgYmUgcmVxdWlyZWQgYmVmb3JlXG4vLyB2dWUtc2VydmVyLXJlbmRlcmVyIGNhbiBzZXQgVlVFX0VOVlxudmFyIF9pc1NlcnZlcjtcbnZhciBpc1NlcnZlclJlbmRlcmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKF9pc1NlcnZlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFpbkJyb3dzZXIgJiYgIWluV2VleCAmJiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZGV0ZWN0IHByZXNlbmNlIG9mIHZ1ZS1zZXJ2ZXItcmVuZGVyZXIgYW5kIGF2b2lkXG4gICAgICAvLyBXZWJwYWNrIHNoaW1taW5nIHRoZSBwcm9jZXNzXG4gICAgICBfaXNTZXJ2ZXIgPSBnbG9iYWxbJ3Byb2Nlc3MnXS5lbnYuVlVFX0VOViA9PT0gJ3NlcnZlcic7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9pc1NlcnZlciA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gX2lzU2VydmVyXG59O1xuXG4vLyBkZXRlY3QgZGV2dG9vbHNcbnZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGlzTmF0aXZlIChDdG9yKSB7XG4gIHJldHVybiB0eXBlb2YgQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoQ3Rvci50b1N0cmluZygpKVxufVxuXG52YXIgaGFzU3ltYm9sID1cbiAgdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoU3ltYm9sKSAmJlxuICB0eXBlb2YgUmVmbGVjdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUmVmbGVjdC5vd25LZXlzKTtcblxudmFyIF9TZXQ7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8gLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5pZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoU2V0KSkge1xuICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cbiAgX1NldCA9IFNldDtcbn0gZWxzZSB7XG4gIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cbiAgX1NldCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2V0ICgpIHtcbiAgICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG4gICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiBoYXMgKGtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gPT09IHRydWVcbiAgICB9O1xuICAgIFNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChrZXkpIHtcbiAgICAgIHRoaXMuc2V0W2tleV0gPSB0cnVlO1xuICAgIH07XG4gICAgU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNldDtcbiAgfSgpKTtcbn1cblxuLyogICovXG5cbnZhciB3YXJuID0gbm9vcDtcbnZhciB0aXAgPSBub29wO1xudmFyIGdlbmVyYXRlQ29tcG9uZW50VHJhY2UgPSAobm9vcCk7IC8vIHdvcmsgYXJvdW5kIGZsb3cgY2hlY2tcbnZhciBmb3JtYXRDb21wb25lbnROYW1lID0gKG5vb3ApO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcbiAgdmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKShcXHcpL2c7XG4gIHZhciBjbGFzc2lmeSA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0clxuICAgIC5yZXBsYWNlKGNsYXNzaWZ5UkUsIGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLnRvVXBwZXJDYXNlKCk7IH0pXG4gICAgLnJlcGxhY2UoL1stX10vZywgJycpOyB9O1xuXG4gIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuICAgIHZhciB0cmFjZSA9IHZtID8gZ2VuZXJhdGVDb21wb25lbnRUcmFjZSh2bSkgOiAnJztcblxuICAgIGlmIChjb25maWcud2FybkhhbmRsZXIpIHtcbiAgICAgIGNvbmZpZy53YXJuSGFuZGxlci5jYWxsKG51bGwsIG1zZywgdm0sIHRyYWNlKTtcbiAgICB9IGVsc2UgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkge1xuICAgICAgY29uc29sZS5lcnJvcigoXCJbVnVlIHdhcm5dOiBcIiArIG1zZyArIHRyYWNlKSk7XG4gICAgfVxuICB9O1xuXG4gIHRpcCA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG4gICAgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkge1xuICAgICAgY29uc29sZS53YXJuKFwiW1Z1ZSB0aXBdOiBcIiArIG1zZyArIChcbiAgICAgICAgdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnXG4gICAgICApKTtcbiAgICB9XG4gIH07XG5cbiAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSwgaW5jbHVkZUZpbGUpIHtcbiAgICBpZiAodm0uJHJvb3QgPT09IHZtKSB7XG4gICAgICByZXR1cm4gJzxSb290PidcbiAgICB9XG4gICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygdm0gPT09ICdmdW5jdGlvbicgJiYgdm0uY2lkICE9IG51bGxcbiAgICAgID8gdm0ub3B0aW9uc1xuICAgICAgOiB2bS5faXNWdWVcbiAgICAgICAgPyB2bS4kb3B0aW9ucyB8fCB2bS5jb25zdHJ1Y3Rvci5vcHRpb25zXG4gICAgICAgIDogdm0gfHwge307XG4gICAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy5fY29tcG9uZW50VGFnO1xuICAgIHZhciBmaWxlID0gb3B0aW9ucy5fX2ZpbGU7XG4gICAgaWYgKCFuYW1lICYmIGZpbGUpIHtcbiAgICAgIHZhciBtYXRjaCA9IGZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwudnVlJC8pO1xuICAgICAgbmFtZSA9IG1hdGNoICYmIG1hdGNoWzFdO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAobmFtZSA/IChcIjxcIiArIChjbGFzc2lmeShuYW1lKSkgKyBcIj5cIikgOiBcIjxBbm9ueW1vdXM+XCIpICtcbiAgICAgIChmaWxlICYmIGluY2x1ZGVGaWxlICE9PSBmYWxzZSA/IChcIiBhdCBcIiArIGZpbGUpIDogJycpXG4gICAgKVxuICB9O1xuXG4gIHZhciByZXBlYXQgPSBmdW5jdGlvbiAoc3RyLCBuKSB7XG4gICAgdmFyIHJlcyA9ICcnO1xuICAgIHdoaWxlIChuKSB7XG4gICAgICBpZiAobiAlIDIgPT09IDEpIHsgcmVzICs9IHN0cjsgfVxuICAgICAgaWYgKG4gPiAxKSB7IHN0ciArPSBzdHI7IH1cbiAgICAgIG4gPj49IDE7XG4gICAgfVxuICAgIHJldHVybiByZXNcbiAgfTtcblxuICBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgaWYgKHZtLl9pc1Z1ZSAmJiB2bS4kcGFyZW50KSB7XG4gICAgICB2YXIgdHJlZSA9IFtdO1xuICAgICAgdmFyIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA9IDA7XG4gICAgICB3aGlsZSAodm0pIHtcbiAgICAgICAgaWYgKHRyZWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciBsYXN0ID0gdHJlZVt0cmVlLmxlbmd0aCAtIDFdO1xuICAgICAgICAgIGlmIChsYXN0LmNvbnN0cnVjdG9yID09PSB2bS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlKys7XG4gICAgICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID4gMCkge1xuICAgICAgICAgICAgdHJlZVt0cmVlLmxlbmd0aCAtIDFdID0gW2xhc3QsIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZV07XG4gICAgICAgICAgICBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmVlLnB1c2godm0pO1xuICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gJ1xcblxcbmZvdW5kIGluXFxuXFxuJyArIHRyZWVcbiAgICAgICAgLm1hcChmdW5jdGlvbiAodm0sIGkpIHsgcmV0dXJuIChcIlwiICsgKGkgPT09IDAgPyAnLS0tPiAnIDogcmVwZWF0KCcgJywgNSArIGkgKiAyKSkgKyAoQXJyYXkuaXNBcnJheSh2bSlcbiAgICAgICAgICAgID8gKChmb3JtYXRDb21wb25lbnROYW1lKHZtWzBdKSkgKyBcIi4uLiAoXCIgKyAodm1bMV0pICsgXCIgcmVjdXJzaXZlIGNhbGxzKVwiKVxuICAgICAgICAgICAgOiBmb3JtYXRDb21wb25lbnROYW1lKHZtKSkpOyB9KVxuICAgICAgICAuam9pbignXFxuJylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcIlxcblxcbihmb3VuZCBpbiBcIiArIChmb3JtYXRDb21wb25lbnROYW1lKHZtKSkgKyBcIilcIilcbiAgICB9XG4gIH07XG59XG5cbi8qICAqL1xuXG5cbnZhciB1aWQgPSAwO1xuXG4vKipcbiAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cbiAqL1xudmFyIERlcCA9IGZ1bmN0aW9uIERlcCAoKSB7XG4gIHRoaXMuaWQgPSB1aWQrKztcbiAgdGhpcy5zdWJzID0gW107XG59O1xuXG5EZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIGFkZFN1YiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG59O1xuXG5EZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIHJlbW92ZVN1YiAoc3ViKSB7XG4gIHJlbW92ZSh0aGlzLnN1YnMsIHN1Yik7XG59O1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uIGRlcGVuZCAoKSB7XG4gIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG4gIH1cbn07XG5cbkRlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5ICgpIHtcbiAgLy8gc3RhYmlsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSB0aGlzLnN1YnMuc2xpY2UoKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHN1YnNbaV0udXBkYXRlKCk7XG4gIH1cbn07XG5cbi8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cbi8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcbi8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuRGVwLnRhcmdldCA9IG51bGw7XG52YXIgdGFyZ2V0U3RhY2sgPSBbXTtcblxuZnVuY3Rpb24gcHVzaFRhcmdldCAoX3RhcmdldCkge1xuICBpZiAoRGVwLnRhcmdldCkgeyB0YXJnZXRTdGFjay5wdXNoKERlcC50YXJnZXQpOyB9XG4gIERlcC50YXJnZXQgPSBfdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBwb3BUYXJnZXQgKCkge1xuICBEZXAudGFyZ2V0ID0gdGFyZ2V0U3RhY2sucG9wKCk7XG59XG5cbi8qICAqL1xuXG52YXIgVk5vZGUgPSBmdW5jdGlvbiBWTm9kZSAoXG4gIHRhZyxcbiAgZGF0YSxcbiAgY2hpbGRyZW4sXG4gIHRleHQsXG4gIGVsbSxcbiAgY29udGV4dCxcbiAgY29tcG9uZW50T3B0aW9ucyxcbiAgYXN5bmNGYWN0b3J5XG4pIHtcbiAgdGhpcy50YWcgPSB0YWc7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgdGhpcy5lbG0gPSBlbG07XG4gIHRoaXMubnMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMuZm5Db250ZXh0ID0gdW5kZWZpbmVkO1xuICB0aGlzLmZuT3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5mblNjb3BlSWQgPSB1bmRlZmluZWQ7XG4gIHRoaXMua2V5ID0gZGF0YSAmJiBkYXRhLmtleTtcbiAgdGhpcy5jb21wb25lbnRPcHRpb25zID0gY29tcG9uZW50T3B0aW9ucztcbiAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7XG4gIHRoaXMucmF3ID0gZmFsc2U7XG4gIHRoaXMuaXNTdGF0aWMgPSBmYWxzZTtcbiAgdGhpcy5pc1Jvb3RJbnNlcnQgPSB0cnVlO1xuICB0aGlzLmlzQ29tbWVudCA9IGZhbHNlO1xuICB0aGlzLmlzQ2xvbmVkID0gZmFsc2U7XG4gIHRoaXMuaXNPbmNlID0gZmFsc2U7XG4gIHRoaXMuYXN5bmNGYWN0b3J5ID0gYXN5bmNGYWN0b3J5O1xuICB0aGlzLmFzeW5jTWV0YSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5pc0FzeW5jUGxhY2Vob2xkZXIgPSBmYWxzZTtcbn07XG5cbnZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IGNoaWxkOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cbi8vIERFUFJFQ0FURUQ6IGFsaWFzIGZvciBjb21wb25lbnRJbnN0YW5jZSBmb3IgYmFja3dhcmRzIGNvbXBhdC5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5wcm90b3R5cGVBY2Nlc3NvcnMuY2hpbGQuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZVxufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFZOb2RlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cbnZhciBjcmVhdGVFbXB0eVZOb2RlID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgaWYgKCB0ZXh0ID09PSB2b2lkIDAgKSB0ZXh0ID0gJyc7XG5cbiAgdmFyIG5vZGUgPSBuZXcgVk5vZGUoKTtcbiAgbm9kZS50ZXh0ID0gdGV4dDtcbiAgbm9kZS5pc0NvbW1lbnQgPSB0cnVlO1xuICByZXR1cm4gbm9kZVxufTtcblxuZnVuY3Rpb24gY3JlYXRlVGV4dFZOb2RlICh2YWwpIHtcbiAgcmV0dXJuIG5ldyBWTm9kZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBTdHJpbmcodmFsKSlcbn1cblxuLy8gb3B0aW1pemVkIHNoYWxsb3cgY2xvbmVcbi8vIHVzZWQgZm9yIHN0YXRpYyBub2RlcyBhbmQgc2xvdCBub2RlcyBiZWNhdXNlIHRoZXkgbWF5IGJlIHJldXNlZCBhY3Jvc3Ncbi8vIG11bHRpcGxlIHJlbmRlcnMsIGNsb25pbmcgdGhlbSBhdm9pZHMgZXJyb3JzIHdoZW4gRE9NIG1hbmlwdWxhdGlvbnMgcmVseVxuLy8gb24gdGhlaXIgZWxtIHJlZmVyZW5jZS5cbmZ1bmN0aW9uIGNsb25lVk5vZGUgKHZub2RlKSB7XG4gIHZhciBjbG9uZWQgPSBuZXcgVk5vZGUoXG4gICAgdm5vZGUudGFnLFxuICAgIHZub2RlLmRhdGEsXG4gICAgdm5vZGUuY2hpbGRyZW4sXG4gICAgdm5vZGUudGV4dCxcbiAgICB2bm9kZS5lbG0sXG4gICAgdm5vZGUuY29udGV4dCxcbiAgICB2bm9kZS5jb21wb25lbnRPcHRpb25zLFxuICAgIHZub2RlLmFzeW5jRmFjdG9yeVxuICApO1xuICBjbG9uZWQubnMgPSB2bm9kZS5ucztcbiAgY2xvbmVkLmlzU3RhdGljID0gdm5vZGUuaXNTdGF0aWM7XG4gIGNsb25lZC5rZXkgPSB2bm9kZS5rZXk7XG4gIGNsb25lZC5pc0NvbW1lbnQgPSB2bm9kZS5pc0NvbW1lbnQ7XG4gIGNsb25lZC5mbkNvbnRleHQgPSB2bm9kZS5mbkNvbnRleHQ7XG4gIGNsb25lZC5mbk9wdGlvbnMgPSB2bm9kZS5mbk9wdGlvbnM7XG4gIGNsb25lZC5mblNjb3BlSWQgPSB2bm9kZS5mblNjb3BlSWQ7XG4gIGNsb25lZC5pc0Nsb25lZCA9IHRydWU7XG4gIHJldHVybiBjbG9uZWRcbn1cblxuLypcbiAqIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aFxuICogZHluYW1pY2FsbHkgYWNjZXNzaW5nIG1ldGhvZHMgb24gQXJyYXkgcHJvdG90eXBlXG4gKi9cblxudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG52YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKTtcblxudmFyIG1ldGhvZHNUb1BhdGNoID0gW1xuICAncHVzaCcsXG4gICdwb3AnLFxuICAnc2hpZnQnLFxuICAndW5zaGlmdCcsXG4gICdzcGxpY2UnLFxuICAnc29ydCcsXG4gICdyZXZlcnNlJ1xuXTtcblxuLyoqXG4gKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcbiAqL1xubWV0aG9kc1RvUGF0Y2guZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvciAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuICAgIHZhciBpbnNlcnRlZDtcbiAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgY2FzZSAncHVzaCc6XG4gICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3BsaWNlJzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuICAgICAgICBicmVha1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIHsgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTsgfVxuICAgIC8vIG5vdGlmeSBjaGFuZ2VcbiAgICBvYi5kZXAubm90aWZ5KCk7XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9KTtcbn0pO1xuXG4vKiAgKi9cblxudmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cbi8qKlxuICogSW4gc29tZSBjYXNlcyB3ZSBtYXkgd2FudCB0byBkaXNhYmxlIG9ic2VydmF0aW9uIGluc2lkZSBhIGNvbXBvbmVudCdzXG4gKiB1cGRhdGUgY29tcHV0YXRpb24uXG4gKi9cbnZhciBzaG91bGRPYnNlcnZlID0gdHJ1ZTtcblxuZnVuY3Rpb24gdG9nZ2xlT2JzZXJ2aW5nICh2YWx1ZSkge1xuICBzaG91bGRPYnNlcnZlID0gdmFsdWU7XG59XG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBpcyBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG4gKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0aGUgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoIHVwZGF0ZXMuXG4gKi9cbnZhciBPYnNlcnZlciA9IGZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkge1xuICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuICB0aGlzLnZtQ291bnQgPSAwO1xuICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90b1xuICAgICAgPyBwcm90b0F1Z21lbnRcbiAgICAgIDogY29weUF1Z21lbnQ7XG4gICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpO1xuICB9XG59O1xuXG4vKipcbiAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG4gKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cbiAqL1xuT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiB3YWxrIChvYmopIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBkZWZpbmVSZWFjdGl2ZShvYmosIGtleXNbaV0pO1xuICB9XG59O1xuXG4vKipcbiAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuICovXG5PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gb2JzZXJ2ZUFycmF5IChpdGVtcykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuICB9XG59O1xuXG4vLyBoZWxwZXJzXG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cbiAqL1xuZnVuY3Rpb24gcHJvdG9BdWdtZW50ICh0YXJnZXQsIHNyYywga2V5cykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG59XG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG4gKiBoaWRkZW4gcHJvcGVydGllcy5cbiAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGNvcHlBdWdtZW50ICh0YXJnZXQsIHNyYywga2V5cykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqL1xuZnVuY3Rpb24gb2JzZXJ2ZSAodmFsdWUsIGFzUm9vdERhdGEpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWUgaW5zdGFuY2VvZiBWTm9kZSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBvYjtcbiAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG4gICAgb2IgPSB2YWx1ZS5fX29iX187XG4gIH0gZWxzZSBpZiAoXG4gICAgc2hvdWxkT2JzZXJ2ZSAmJlxuICAgICFpc1NlcnZlclJlbmRlcmluZygpICYmXG4gICAgKEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJlxuICAgIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmXG4gICAgIXZhbHVlLl9pc1Z1ZVxuICApIHtcbiAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG4gIH1cbiAgaWYgKGFzUm9vdERhdGEgJiYgb2IpIHtcbiAgICBvYi52bUNvdW50Kys7XG4gIH1cbiAgcmV0dXJuIG9iXG59XG5cbi8qKlxuICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuICovXG5mdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZSAoXG4gIG9iaixcbiAga2V5LFxuICB2YWwsXG4gIGN1c3RvbVNldHRlcixcbiAgc2hhbGxvd1xuKSB7XG4gIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cbiAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcbiAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcbiAgaWYgKCFnZXR0ZXIgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIHZhbCA9IG9ialtrZXldO1xuICB9XG4gIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cbiAgdmFyIGNoaWxkT2IgPSAhc2hhbGxvdyAmJiBvYnNlcnZlKHZhbCk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIGRlcC5kZXBlbmQoKTtcbiAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGRlcGVuZEFycmF5KHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlciAobmV3VmFsKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlICovXG4gICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSB8fCAobmV3VmFsICE9PSBuZXdWYWwgJiYgdmFsdWUgIT09IHZhbHVlKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tc2VsZi1jb21wYXJlICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjdXN0b21TZXR0ZXIpIHtcbiAgICAgICAgY3VzdG9tU2V0dGVyKCk7XG4gICAgICB9XG4gICAgICBpZiAoc2V0dGVyKSB7XG4gICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9IG5ld1ZhbDtcbiAgICAgIH1cbiAgICAgIGNoaWxkT2IgPSAhc2hhbGxvdyAmJiBvYnNlcnZlKG5ld1ZhbCk7XG4gICAgICBkZXAubm90aWZ5KCk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBTZXQgYSBwcm9wZXJ0eSBvbiBhbiBvYmplY3QuIEFkZHMgdGhlIG5ldyBwcm9wZXJ0eSBhbmRcbiAqIHRyaWdnZXJzIGNoYW5nZSBub3RpZmljYXRpb24gaWYgdGhlIHByb3BlcnR5IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QuXG4gKi9cbmZ1bmN0aW9uIHNldCAodGFyZ2V0LCBrZXksIHZhbCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgIChpc1VuZGVmKHRhcmdldCkgfHwgaXNQcmltaXRpdmUodGFyZ2V0KSlcbiAgKSB7XG4gICAgd2FybigoXCJDYW5ub3Qgc2V0IHJlYWN0aXZlIHByb3BlcnR5IG9uIHVuZGVmaW5lZCwgbnVsbCwgb3IgcHJpbWl0aXZlIHZhbHVlOiBcIiArICgodGFyZ2V0KSkpKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHtcbiAgICB0YXJnZXQubGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwga2V5KTtcbiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSwgdmFsKTtcbiAgICByZXR1cm4gdmFsXG4gIH1cbiAgaWYgKGtleSBpbiB0YXJnZXQgJiYgIShrZXkgaW4gT2JqZWN0LnByb3RvdHlwZSkpIHtcbiAgICB0YXJnZXRba2V5XSA9IHZhbDtcbiAgICByZXR1cm4gdmFsXG4gIH1cbiAgdmFyIG9iID0gKHRhcmdldCkuX19vYl9fO1xuICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCAob2IgJiYgb2Iudm1Db3VudCkpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAnQXZvaWQgYWRkaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMgdG8gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArXG4gICAgICAnYXQgcnVudGltZSAtIGRlY2xhcmUgaXQgdXBmcm9udCBpbiB0aGUgZGF0YSBvcHRpb24uJ1xuICAgICk7XG4gICAgcmV0dXJuIHZhbFxuICB9XG4gIGlmICghb2IpIHtcbiAgICB0YXJnZXRba2V5XSA9IHZhbDtcbiAgICByZXR1cm4gdmFsXG4gIH1cbiAgZGVmaW5lUmVhY3RpdmUob2IudmFsdWUsIGtleSwgdmFsKTtcbiAgb2IuZGVwLm5vdGlmeSgpO1xuICByZXR1cm4gdmFsXG59XG5cbi8qKlxuICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cbiAqL1xuZnVuY3Rpb24gZGVsICh0YXJnZXQsIGtleSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgIChpc1VuZGVmKHRhcmdldCkgfHwgaXNQcmltaXRpdmUodGFyZ2V0KSlcbiAgKSB7XG4gICAgd2FybigoXCJDYW5ub3QgZGVsZXRlIHJlYWN0aXZlIHByb3BlcnR5IG9uIHVuZGVmaW5lZCwgbnVsbCwgb3IgcHJpbWl0aXZlIHZhbHVlOiBcIiArICgodGFyZ2V0KSkpKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHtcbiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSk7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIG9iID0gKHRhcmdldCkuX19vYl9fO1xuICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCAob2IgJiYgb2Iudm1Db3VudCkpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAnQXZvaWQgZGVsZXRpbmcgcHJvcGVydGllcyBvbiBhIFZ1ZSBpbnN0YW5jZSBvciBpdHMgcm9vdCAkZGF0YSAnICtcbiAgICAgICctIGp1c3Qgc2V0IGl0IHRvIG51bGwuJ1xuICAgICk7XG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKCFoYXNPd24odGFyZ2V0LCBrZXkpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgZGVsZXRlIHRhcmdldFtrZXldO1xuICBpZiAoIW9iKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgb2IuZGVwLm5vdGlmeSgpO1xufVxuXG4vKipcbiAqIENvbGxlY3QgZGVwZW5kZW5jaWVzIG9uIGFycmF5IGVsZW1lbnRzIHdoZW4gdGhlIGFycmF5IGlzIHRvdWNoZWQsIHNpbmNlXG4gKiB3ZSBjYW5ub3QgaW50ZXJjZXB0IGFycmF5IGVsZW1lbnQgYWNjZXNzIGxpa2UgcHJvcGVydHkgZ2V0dGVycy5cbiAqL1xuZnVuY3Rpb24gZGVwZW5kQXJyYXkgKHZhbHVlKSB7XG4gIGZvciAodmFyIGUgPSAodm9pZCAwKSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBlID0gdmFsdWVbaV07XG4gICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHtcbiAgICAgIGRlcGVuZEFycmF5KGUpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG4gKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG4gKi9cbnZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzO1xuXG4vKipcbiAqIE9wdGlvbnMgd2l0aCByZXN0cmljdGlvbnNcbiAqL1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgc3RyYXRzLmVsID0gc3RyYXRzLnByb3BzRGF0YSA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkLCB2bSwga2V5KSB7XG4gICAgaWYgKCF2bSkge1xuICAgICAgd2FybihcbiAgICAgICAgXCJvcHRpb24gXFxcIlwiICsga2V5ICsgXCJcXFwiIGNhbiBvbmx5IGJlIHVzZWQgZHVyaW5nIGluc3RhbmNlIFwiICtcbiAgICAgICAgJ2NyZWF0aW9uIHdpdGggdGhlIGBuZXdgIGtleXdvcmQuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRTdHJhdChwYXJlbnQsIGNoaWxkKVxuICB9O1xufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuICovXG5mdW5jdGlvbiBtZXJnZURhdGEgKHRvLCBmcm9tKSB7XG4gIGlmICghZnJvbSkgeyByZXR1cm4gdG8gfVxuICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcbiAgICB0b1ZhbCA9IHRvW2tleV07XG4gICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcbiAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh0b1ZhbCkgJiYgaXNQbGFpbk9iamVjdChmcm9tVmFsKSkge1xuICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvXG59XG5cbi8qKlxuICogRGF0YVxuICovXG5mdW5jdGlvbiBtZXJnZURhdGFPckZuIChcbiAgcGFyZW50VmFsLFxuICBjaGlsZFZhbCxcbiAgdm1cbikge1xuICBpZiAoIXZtKSB7XG4gICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnNcbiAgICBpZiAoIWNoaWxkVmFsKSB7XG4gICAgICByZXR1cm4gcGFyZW50VmFsXG4gICAgfVxuICAgIGlmICghcGFyZW50VmFsKSB7XG4gICAgICByZXR1cm4gY2hpbGRWYWxcbiAgICB9XG4gICAgLy8gd2hlbiBwYXJlbnRWYWwgJiBjaGlsZFZhbCBhcmUgYm90aCBwcmVzZW50LFxuICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuICAgIC8vIGNoZWNrIGlmIHBhcmVudFZhbCBpcyBhIGZ1bmN0aW9uIGhlcmUgYmVjYXVzZVxuICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4gKCkge1xuICAgICAgcmV0dXJuIG1lcmdlRGF0YShcbiAgICAgICAgdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh0aGlzLCB0aGlzKSA6IGNoaWxkVmFsLFxuICAgICAgICB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodGhpcywgdGhpcykgOiBwYXJlbnRWYWxcbiAgICAgIClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuICgpIHtcbiAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG4gICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gY2hpbGRWYWwuY2FsbCh2bSwgdm0pXG4gICAgICAgIDogY2hpbGRWYWw7XG4gICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gcGFyZW50VmFsLmNhbGwodm0sIHZtKVxuICAgICAgICA6IHBhcmVudFZhbDtcbiAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsLFxuICB2bVxuKSB7XG4gIGlmICghdm0pIHtcbiAgICBpZiAoY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgICdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgK1xuICAgICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICtcbiAgICAgICAgJ2RlZmluaXRpb25zLicsXG4gICAgICAgIHZtXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gcGFyZW50VmFsXG4gICAgfVxuICAgIHJldHVybiBtZXJnZURhdGFPckZuKHBhcmVudFZhbCwgY2hpbGRWYWwpXG4gIH1cblxuICByZXR1cm4gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSlcbn07XG5cbi8qKlxuICogSG9va3MgYW5kIHByb3BzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5mdW5jdGlvbiBtZXJnZUhvb2sgKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsXG4pIHtcbiAgcmV0dXJuIGNoaWxkVmFsXG4gICAgPyBwYXJlbnRWYWxcbiAgICAgID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbClcbiAgICAgIDogQXJyYXkuaXNBcnJheShjaGlsZFZhbClcbiAgICAgICAgPyBjaGlsZFZhbFxuICAgICAgICA6IFtjaGlsZFZhbF1cbiAgICA6IHBhcmVudFZhbFxufVxuXG5MSUZFQ1lDTEVfSE9PS1MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuICBzdHJhdHNbaG9va10gPSBtZXJnZUhvb2s7XG59KTtcblxuLyoqXG4gKiBBc3NldHNcbiAqXG4gKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG4gKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG4gKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VBc3NldHMgKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsLFxuICB2bSxcbiAga2V5XG4pIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuICBpZiAoY2hpbGRWYWwpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGFzc2VydE9iamVjdFR5cGUoa2V5LCBjaGlsZFZhbCwgdm0pO1xuICAgIHJldHVybiBleHRlbmQocmVzLCBjaGlsZFZhbClcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmVzXG4gIH1cbn1cblxuQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcbn0pO1xuXG4vKipcbiAqIFdhdGNoZXJzLlxuICpcbiAqIFdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcbiAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuICovXG5zdHJhdHMud2F0Y2ggPSBmdW5jdGlvbiAoXG4gIHBhcmVudFZhbCxcbiAgY2hpbGRWYWwsXG4gIHZtLFxuICBrZXlcbikge1xuICAvLyB3b3JrIGFyb3VuZCBGaXJlZm94J3MgT2JqZWN0LnByb3RvdHlwZS53YXRjaC4uLlxuICBpZiAocGFyZW50VmFsID09PSBuYXRpdmVXYXRjaCkgeyBwYXJlbnRWYWwgPSB1bmRlZmluZWQ7IH1cbiAgaWYgKGNoaWxkVmFsID09PSBuYXRpdmVXYXRjaCkgeyBjaGlsZFZhbCA9IHVuZGVmaW5lZDsgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFjaGlsZFZhbCkgeyByZXR1cm4gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCkgfVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydE9iamVjdFR5cGUoa2V5LCBjaGlsZFZhbCwgdm0pO1xuICB9XG4gIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9XG4gIHZhciByZXQgPSB7fTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZm9yICh2YXIga2V5JDEgaW4gY2hpbGRWYWwpIHtcbiAgICB2YXIgcGFyZW50ID0gcmV0W2tleSQxXTtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXkkMV07XG4gICAgaWYgKHBhcmVudCAmJiAhQXJyYXkuaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgcmV0W2tleSQxXSA9IHBhcmVudFxuICAgICAgPyBwYXJlbnQuY29uY2F0KGNoaWxkKVxuICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkKSA/IGNoaWxkIDogW2NoaWxkXTtcbiAgfVxuICByZXR1cm4gcmV0XG59O1xuXG4vKipcbiAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG4gKi9cbnN0cmF0cy5wcm9wcyA9XG5zdHJhdHMubWV0aG9kcyA9XG5zdHJhdHMuaW5qZWN0ID1cbnN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChcbiAgcGFyZW50VmFsLFxuICBjaGlsZFZhbCxcbiAgdm0sXG4gIGtleVxuKSB7XG4gIGlmIChjaGlsZFZhbCAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0T2JqZWN0VHlwZShrZXksIGNoaWxkVmFsLCB2bSk7XG4gIH1cbiAgaWYgKCFwYXJlbnRWYWwpIHsgcmV0dXJuIGNoaWxkVmFsIH1cbiAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gIGlmIChjaGlsZFZhbCkgeyBleHRlbmQocmV0LCBjaGlsZFZhbCk7IH1cbiAgcmV0dXJuIHJldFxufTtcbnN0cmF0cy5wcm92aWRlID0gbWVyZ2VEYXRhT3JGbjtcblxuLyoqXG4gKiBEZWZhdWx0IHN0cmF0ZWd5LlxuICovXG52YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWRcbiAgICA/IHBhcmVudFZhbFxuICAgIDogY2hpbGRWYWxcbn07XG5cbi8qKlxuICogVmFsaWRhdGUgY29tcG9uZW50IG5hbWVzXG4gKi9cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50cyAob3B0aW9ucykge1xuICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jb21wb25lbnRzKSB7XG4gICAgdmFsaWRhdGVDb21wb25lbnROYW1lKGtleSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lIChuYW1lKSB7XG4gIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG4gICAgd2FybihcbiAgICAgICdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArXG4gICAgICAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgdGhlIGh5cGhlbiwgJyArXG4gICAgICAnYW5kIG11c3Qgc3RhcnQgd2l0aCBhIGxldHRlci4nXG4gICAgKTtcbiAgfVxuICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGNvbmZpZy5pc1Jlc2VydmVkVGFnKG5hbWUpKSB7XG4gICAgd2FybihcbiAgICAgICdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgK1xuICAgICAgJ2lkOiAnICsgbmFtZVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcbiAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzIChvcHRpb25zLCB2bSkge1xuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICBpZiAoIXByb3BzKSB7IHJldHVybiB9XG4gIHZhciByZXMgPSB7fTtcbiAgdmFyIGksIHZhbCwgbmFtZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMpKSB7XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBuYW1lID0gY2FtZWxpemUodmFsKTtcbiAgICAgICAgcmVzW25hbWVdID0geyB0eXBlOiBudWxsIH07XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybigncHJvcHMgbXVzdCBiZSBzdHJpbmdzIHdoZW4gdXNpbmcgYXJyYXkgc3ludGF4LicpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuICAgICAgdmFsID0gcHJvcHNba2V5XTtcbiAgICAgIG5hbWUgPSBjYW1lbGl6ZShrZXkpO1xuICAgICAgcmVzW25hbWVdID0gaXNQbGFpbk9iamVjdCh2YWwpXG4gICAgICAgID8gdmFsXG4gICAgICAgIDogeyB0eXBlOiB2YWwgfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm4oXG4gICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwicHJvcHNcXFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsIFwiICtcbiAgICAgIFwiYnV0IGdvdCBcIiArICh0b1Jhd1R5cGUocHJvcHMpKSArIFwiLlwiLFxuICAgICAgdm1cbiAgICApO1xuICB9XG4gIG9wdGlvbnMucHJvcHMgPSByZXM7XG59XG5cbi8qKlxuICogTm9ybWFsaXplIGFsbCBpbmplY3Rpb25zIGludG8gT2JqZWN0LWJhc2VkIGZvcm1hdFxuICovXG5mdW5jdGlvbiBub3JtYWxpemVJbmplY3QgKG9wdGlvbnMsIHZtKSB7XG4gIHZhciBpbmplY3QgPSBvcHRpb25zLmluamVjdDtcbiAgaWYgKCFpbmplY3QpIHsgcmV0dXJuIH1cbiAgdmFyIG5vcm1hbGl6ZWQgPSBvcHRpb25zLmluamVjdCA9IHt9O1xuICBpZiAoQXJyYXkuaXNBcnJheShpbmplY3QpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmplY3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5vcm1hbGl6ZWRbaW5qZWN0W2ldXSA9IHsgZnJvbTogaW5qZWN0W2ldIH07XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QoaW5qZWN0KSkge1xuICAgIGZvciAodmFyIGtleSBpbiBpbmplY3QpIHtcbiAgICAgIHZhciB2YWwgPSBpbmplY3Rba2V5XTtcbiAgICAgIG5vcm1hbGl6ZWRba2V5XSA9IGlzUGxhaW5PYmplY3QodmFsKVxuICAgICAgICA/IGV4dGVuZCh7IGZyb206IGtleSB9LCB2YWwpXG4gICAgICAgIDogeyBmcm9tOiB2YWwgfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm4oXG4gICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwiaW5qZWN0XFxcIjogZXhwZWN0ZWQgYW4gQXJyYXkgb3IgYW4gT2JqZWN0LCBcIiArXG4gICAgICBcImJ1dCBnb3QgXCIgKyAodG9SYXdUeXBlKGluamVjdCkpICsgXCIuXCIsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgcmF3IGZ1bmN0aW9uIGRpcmVjdGl2ZXMgaW50byBvYmplY3QgZm9ybWF0LlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzIChvcHRpb25zKSB7XG4gIHZhciBkaXJzID0gb3B0aW9ucy5kaXJlY3RpdmVzO1xuICBpZiAoZGlycykge1xuICAgIGZvciAodmFyIGtleSBpbiBkaXJzKSB7XG4gICAgICB2YXIgZGVmID0gZGlyc1trZXldO1xuICAgICAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZGlyc1trZXldID0geyBiaW5kOiBkZWYsIHVwZGF0ZTogZGVmIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydE9iamVjdFR5cGUgKG5hbWUsIHZhbHVlLCB2bSkge1xuICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgd2FybihcbiAgICAgIFwiSW52YWxpZCB2YWx1ZSBmb3Igb3B0aW9uIFxcXCJcIiArIG5hbWUgKyBcIlxcXCI6IGV4cGVjdGVkIGFuIE9iamVjdCwgXCIgK1xuICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgXCIuXCIsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG4gKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuICovXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMgKFxuICBwYXJlbnQsXG4gIGNoaWxkLFxuICB2bVxuKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgY2hlY2tDb21wb25lbnRzKGNoaWxkKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY2hpbGQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjaGlsZCA9IGNoaWxkLm9wdGlvbnM7XG4gIH1cblxuICBub3JtYWxpemVQcm9wcyhjaGlsZCwgdm0pO1xuICBub3JtYWxpemVJbmplY3QoY2hpbGQsIHZtKTtcbiAgbm9ybWFsaXplRGlyZWN0aXZlcyhjaGlsZCk7XG4gIHZhciBleHRlbmRzRnJvbSA9IGNoaWxkLmV4dGVuZHM7XG4gIGlmIChleHRlbmRzRnJvbSkge1xuICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGV4dGVuZHNGcm9tLCB2bSk7XG4gIH1cbiAgaWYgKGNoaWxkLm1peGlucykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQubWl4aW5zW2ldLCB2bSk7XG4gICAgfVxuICB9XG4gIHZhciBvcHRpb25zID0ge307XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIHBhcmVudCkge1xuICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgfVxuICBmb3IgKGtleSBpbiBjaGlsZCkge1xuICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBtZXJnZUZpZWxkIChrZXkpIHtcbiAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG4gICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuICB9XG4gIHJldHVybiBvcHRpb25zXG59XG5cbi8qKlxuICogUmVzb2x2ZSBhbiBhc3NldC5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuICovXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQgKFxuICBvcHRpb25zLFxuICB0eXBlLFxuICBpZCxcbiAgd2Fybk1pc3Npbmdcbikge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcbiAgLy8gY2hlY2sgbG9jYWwgcmVnaXN0cmF0aW9uIHZhcmlhdGlvbnMgZmlyc3RcbiAgaWYgKGhhc093bihhc3NldHMsIGlkKSkgeyByZXR1cm4gYXNzZXRzW2lkXSB9XG4gIHZhciBjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKTtcbiAgaWYgKGhhc093bihhc3NldHMsIGNhbWVsaXplZElkKSkgeyByZXR1cm4gYXNzZXRzW2NhbWVsaXplZElkXSB9XG4gIHZhciBQYXNjYWxDYXNlSWQgPSBjYXBpdGFsaXplKGNhbWVsaXplZElkKTtcbiAgaWYgKGhhc093bihhc3NldHMsIFBhc2NhbENhc2VJZCkpIHsgcmV0dXJuIGFzc2V0c1tQYXNjYWxDYXNlSWRdIH1cbiAgLy8gZmFsbGJhY2sgdG8gcHJvdG90eXBlIGNoYWluXG4gIHZhciByZXMgPSBhc3NldHNbaWRdIHx8IGFzc2V0c1tjYW1lbGl6ZWRJZF0gfHwgYXNzZXRzW1Bhc2NhbENhc2VJZF07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICB3YXJuKFxuICAgICAgJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcCAoXG4gIGtleSxcbiAgcHJvcE9wdGlvbnMsXG4gIHByb3BzRGF0YSxcbiAgdm1cbikge1xuICB2YXIgcHJvcCA9IHByb3BPcHRpb25zW2tleV07XG4gIHZhciBhYnNlbnQgPSAhaGFzT3duKHByb3BzRGF0YSwga2V5KTtcbiAgdmFyIHZhbHVlID0gcHJvcHNEYXRhW2tleV07XG4gIC8vIGJvb2xlYW4gY2FzdGluZ1xuICB2YXIgYm9vbGVhbkluZGV4ID0gZ2V0VHlwZUluZGV4KEJvb2xlYW4sIHByb3AudHlwZSk7XG4gIGlmIChib29sZWFuSW5kZXggPiAtMSkge1xuICAgIGlmIChhYnNlbnQgJiYgIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG4gICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSBoeXBoZW5hdGUoa2V5KSkge1xuICAgICAgLy8gb25seSBjYXN0IGVtcHR5IHN0cmluZyAvIHNhbWUgbmFtZSB0byBib29sZWFuIGlmXG4gICAgICAvLyBib29sZWFuIGhhcyBoaWdoZXIgcHJpb3JpdHlcbiAgICAgIHZhciBzdHJpbmdJbmRleCA9IGdldFR5cGVJbmRleChTdHJpbmcsIHByb3AudHlwZSk7XG4gICAgICBpZiAoc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4KSB7XG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gY2hlY2sgZGVmYXVsdCB2YWx1ZVxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCwga2V5KTtcbiAgICAvLyBzaW5jZSB0aGUgZGVmYXVsdCB2YWx1ZSBpcyBhIGZyZXNoIGNvcHksXG4gICAgLy8gbWFrZSBzdXJlIHRvIG9ic2VydmUgaXQuXG4gICAgdmFyIHByZXZTaG91bGRPYnNlcnZlID0gc2hvdWxkT2JzZXJ2ZTtcbiAgICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG4gICAgb2JzZXJ2ZSh2YWx1ZSk7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKHByZXZTaG91bGRPYnNlcnZlKTtcbiAgfVxuICBpZiAoXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgIC8vIHNraXAgdmFsaWRhdGlvbiBmb3Igd2VleCByZWN5Y2xlLWxpc3QgY2hpbGQgY29tcG9uZW50IHByb3BzXG4gICAgIShmYWxzZSAmJiBpc09iamVjdCh2YWx1ZSkgJiYgKCdAYmluZGluZycgaW4gdmFsdWUpKVxuICApIHtcbiAgICBhc3NlcnRQcm9wKHByb3AsIGtleSwgdmFsdWUsIHZtLCBhYnNlbnQpO1xuICB9XG4gIHJldHVybiB2YWx1ZVxufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG4gKi9cbmZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUgKHZtLCBwcm9wLCBrZXkpIHtcbiAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuICBpZiAoIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG4gIHZhciBkZWYgPSBwcm9wLmRlZmF1bHQ7XG4gIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaXNPYmplY3QoZGVmKSkge1xuICAgIHdhcm4oXG4gICAgICAnSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wIFwiJyArIGtleSArICdcIjogJyArXG4gICAgICAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArXG4gICAgICAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbiAgLy8gdGhlIHJhdyBwcm9wIHZhbHVlIHdhcyBhbHNvIHVuZGVmaW5lZCBmcm9tIHByZXZpb3VzIHJlbmRlcixcbiAgLy8gcmV0dXJuIHByZXZpb3VzIGRlZmF1bHQgdmFsdWUgdG8gYXZvaWQgdW5uZWNlc3Nhcnkgd2F0Y2hlciB0cmlnZ2VyXG4gIGlmICh2bSAmJiB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgJiZcbiAgICB2bS4kb3B0aW9ucy5wcm9wc0RhdGFba2V5XSA9PT0gdW5kZWZpbmVkICYmXG4gICAgdm0uX3Byb3BzW2tleV0gIT09IHVuZGVmaW5lZFxuICApIHtcbiAgICByZXR1cm4gdm0uX3Byb3BzW2tleV1cbiAgfVxuICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICAvLyBhIHZhbHVlIGlzIEZ1bmN0aW9uIGlmIGl0cyBwcm90b3R5cGUgaXMgZnVuY3Rpb24gZXZlbiBhY3Jvc3MgZGlmZmVyZW50IGV4ZWN1dGlvbiBjb250ZXh0XG4gIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIGdldFR5cGUocHJvcC50eXBlKSAhPT0gJ0Z1bmN0aW9uJ1xuICAgID8gZGVmLmNhbGwodm0pXG4gICAgOiBkZWZcbn1cblxuLyoqXG4gKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFByb3AgKFxuICBwcm9wLFxuICBuYW1lLFxuICB2YWx1ZSxcbiAgdm0sXG4gIGFic2VudFxuKSB7XG4gIGlmIChwcm9wLnJlcXVpcmVkICYmIGFic2VudCkge1xuICAgIHdhcm4oXG4gICAgICAnTWlzc2luZyByZXF1aXJlZCBwcm9wOiBcIicgKyBuYW1lICsgJ1wiJyxcbiAgICAgIHZtXG4gICAgKTtcbiAgICByZXR1cm5cbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcHJvcC5yZXF1aXJlZCkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciB0eXBlID0gcHJvcC50eXBlO1xuICB2YXIgdmFsaWQgPSAhdHlwZSB8fCB0eXBlID09PSB0cnVlO1xuICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICBpZiAodHlwZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgdHlwZSA9IFt0eXBlXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUgfHwgJycpO1xuICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG4gICAgfVxuICB9XG4gIGlmICghdmFsaWQpIHtcbiAgICB3YXJuKFxuICAgICAgXCJJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIuXCIgK1xuICAgICAgXCIgRXhwZWN0ZWQgXCIgKyAoZXhwZWN0ZWRUeXBlcy5tYXAoY2FwaXRhbGl6ZSkuam9pbignLCAnKSkgK1xuICAgICAgXCIsIGdvdCBcIiArICh0b1Jhd1R5cGUodmFsdWUpKSArIFwiLlwiLFxuICAgICAgdm1cbiAgICApO1xuICAgIHJldHVyblxuICB9XG4gIHZhciB2YWxpZGF0b3IgPSBwcm9wLnZhbGlkYXRvcjtcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgd2FybihcbiAgICAgICAgJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgbmFtZSArICdcIi4nLFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHNpbXBsZUNoZWNrUkUgPSAvXihTdHJpbmd8TnVtYmVyfEJvb2xlYW58RnVuY3Rpb258U3ltYm9sKSQvO1xuXG5mdW5jdGlvbiBhc3NlcnRUeXBlICh2YWx1ZSwgdHlwZSkge1xuICB2YXIgdmFsaWQ7XG4gIHZhciBleHBlY3RlZFR5cGUgPSBnZXRUeXBlKHR5cGUpO1xuICBpZiAoc2ltcGxlQ2hlY2tSRS50ZXN0KGV4cGVjdGVkVHlwZSkpIHtcbiAgICB2YXIgdCA9IHR5cGVvZiB2YWx1ZTtcbiAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIGZvciBwcmltaXRpdmUgd3JhcHBlciBvYmplY3RzXG4gICAgaWYgKCF2YWxpZCAmJiB0ID09PSAnb2JqZWN0Jykge1xuICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ09iamVjdCcpIHtcbiAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ0FycmF5Jykge1xuICAgIHZhbGlkID0gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdmFsaWQsXG4gICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcbiAgfVxufVxuXG4vKipcbiAqIFVzZSBmdW5jdGlvbiBzdHJpbmcgbmFtZSB0byBjaGVjayBidWlsdC1pbiB0eXBlcyxcbiAqIGJlY2F1c2UgYSBzaW1wbGUgZXF1YWxpdHkgY2hlY2sgd2lsbCBmYWlsIHdoZW4gcnVubmluZ1xuICogYWNyb3NzIGRpZmZlcmVudCB2bXMgLyBpZnJhbWVzLlxuICovXG5mdW5jdGlvbiBnZXRUeXBlIChmbikge1xuICB2YXIgbWF0Y2ggPSBmbiAmJiBmbi50b1N0cmluZygpLm1hdGNoKC9eXFxzKmZ1bmN0aW9uIChcXHcrKS8pO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnXG59XG5cbmZ1bmN0aW9uIGlzU2FtZVR5cGUgKGEsIGIpIHtcbiAgcmV0dXJuIGdldFR5cGUoYSkgPT09IGdldFR5cGUoYilcbn1cblxuZnVuY3Rpb24gZ2V0VHlwZUluZGV4ICh0eXBlLCBleHBlY3RlZFR5cGVzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShleHBlY3RlZFR5cGVzKSkge1xuICAgIHJldHVybiBpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXMsIHR5cGUpID8gMCA6IC0xXG4gIH1cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGV4cGVjdGVkVHlwZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzW2ldLCB0eXBlKSkge1xuICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBoYW5kbGVFcnJvciAoZXJyLCB2bSwgaW5mbykge1xuICBpZiAodm0pIHtcbiAgICB2YXIgY3VyID0gdm07XG4gICAgd2hpbGUgKChjdXIgPSBjdXIuJHBhcmVudCkpIHtcbiAgICAgIHZhciBob29rcyA9IGN1ci4kb3B0aW9ucy5lcnJvckNhcHR1cmVkO1xuICAgICAgaWYgKGhvb2tzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGNhcHR1cmUgPSBob29rc1tpXS5jYWxsKGN1ciwgZXJyLCB2bSwgaW5mbykgPT09IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGNhcHR1cmUpIHsgcmV0dXJuIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnbG9iYWxIYW5kbGVFcnJvcihlLCBjdXIsICdlcnJvckNhcHR1cmVkIGhvb2snKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2xvYmFsSGFuZGxlRXJyb3IoZXJyLCB2bSwgaW5mbyk7XG59XG5cbmZ1bmN0aW9uIGdsb2JhbEhhbmRsZUVycm9yIChlcnIsIHZtLCBpbmZvKSB7XG4gIGlmIChjb25maWcuZXJyb3JIYW5kbGVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBjb25maWcuZXJyb3JIYW5kbGVyLmNhbGwobnVsbCwgZXJyLCB2bSwgaW5mbylcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dFcnJvcihlLCBudWxsLCAnY29uZmlnLmVycm9ySGFuZGxlcicpO1xuICAgIH1cbiAgfVxuICBsb2dFcnJvcihlcnIsIHZtLCBpbmZvKTtcbn1cblxuZnVuY3Rpb24gbG9nRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuKChcIkVycm9yIGluIFwiICsgaW5mbyArIFwiOiBcXFwiXCIgKyAoZXJyLnRvU3RyaW5nKCkpICsgXCJcXFwiXCIpLCB2bSk7XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKChpbkJyb3dzZXIgfHwgaW5XZWV4KSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgZXJyXG4gIH1cbn1cblxuLyogICovXG4vKiBnbG9iYWxzIE1lc3NhZ2VDaGFubmVsICovXG5cbnZhciBjYWxsYmFja3MgPSBbXTtcbnZhciBwZW5kaW5nID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGZsdXNoQ2FsbGJhY2tzICgpIHtcbiAgcGVuZGluZyA9IGZhbHNlO1xuICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICBjYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb3BpZXNbaV0oKTtcbiAgfVxufVxuXG4vLyBIZXJlIHdlIGhhdmUgYXN5bmMgZGVmZXJyaW5nIHdyYXBwZXJzIHVzaW5nIGJvdGggbWljcm90YXNrcyBhbmQgKG1hY3JvKSB0YXNrcy5cbi8vIEluIDwgMi40IHdlIHVzZWQgbWljcm90YXNrcyBldmVyeXdoZXJlLCBidXQgdGhlcmUgYXJlIHNvbWUgc2NlbmFyaW9zIHdoZXJlXG4vLyBtaWNyb3Rhc2tzIGhhdmUgdG9vIGhpZ2ggYSBwcmlvcml0eSBhbmQgZmlyZSBpbiBiZXR3ZWVuIHN1cHBvc2VkbHlcbi8vIHNlcXVlbnRpYWwgZXZlbnRzIChlLmcuICM0NTIxLCAjNjY5MCkgb3IgZXZlbiBiZXR3ZWVuIGJ1YmJsaW5nIG9mIHRoZSBzYW1lXG4vLyBldmVudCAoIzY1NjYpLiBIb3dldmVyLCB1c2luZyAobWFjcm8pIHRhc2tzIGV2ZXJ5d2hlcmUgYWxzbyBoYXMgc3VidGxlIHByb2JsZW1zXG4vLyB3aGVuIHN0YXRlIGlzIGNoYW5nZWQgcmlnaHQgYmVmb3JlIHJlcGFpbnQgKGUuZy4gIzY4MTMsIG91dC1pbiB0cmFuc2l0aW9ucykuXG4vLyBIZXJlIHdlIHVzZSBtaWNyb3Rhc2sgYnkgZGVmYXVsdCwgYnV0IGV4cG9zZSBhIHdheSB0byBmb3JjZSAobWFjcm8pIHRhc2sgd2hlblxuLy8gbmVlZGVkIChlLmcuIGluIGV2ZW50IGhhbmRsZXJzIGF0dGFjaGVkIGJ5IHYtb24pLlxudmFyIG1pY3JvVGltZXJGdW5jO1xudmFyIG1hY3JvVGltZXJGdW5jO1xudmFyIHVzZU1hY3JvVGFzayA9IGZhbHNlO1xuXG4vLyBEZXRlcm1pbmUgKG1hY3JvKSB0YXNrIGRlZmVyIGltcGxlbWVudGF0aW9uLlxuLy8gVGVjaG5pY2FsbHkgc2V0SW1tZWRpYXRlIHNob3VsZCBiZSB0aGUgaWRlYWwgY2hvaWNlLCBidXQgaXQncyBvbmx5IGF2YWlsYWJsZVxuLy8gaW4gSUUuIFRoZSBvbmx5IHBvbHlmaWxsIHRoYXQgY29uc2lzdGVudGx5IHF1ZXVlcyB0aGUgY2FsbGJhY2sgYWZ0ZXIgYWxsIERPTVxuLy8gZXZlbnRzIHRyaWdnZXJlZCBpbiB0aGUgc2FtZSBsb29wIGlzIGJ5IHVzaW5nIE1lc3NhZ2VDaGFubmVsLlxuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoc2V0SW1tZWRpYXRlKSkge1xuICBtYWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICBzZXRJbW1lZGlhdGUoZmx1c2hDYWxsYmFja3MpO1xuICB9O1xufSBlbHNlIGlmICh0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnICYmIChcbiAgaXNOYXRpdmUoTWVzc2FnZUNoYW5uZWwpIHx8XG4gIC8vIFBoYW50b21KU1xuICBNZXNzYWdlQ2hhbm5lbC50b1N0cmluZygpID09PSAnW29iamVjdCBNZXNzYWdlQ2hhbm5lbENvbnN0cnVjdG9yXSdcbikpIHtcbiAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgdmFyIHBvcnQgPSBjaGFubmVsLnBvcnQyO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoQ2FsbGJhY2tzO1xuICBtYWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICBwb3J0LnBvc3RNZXNzYWdlKDEpO1xuICB9O1xufSBlbHNlIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgbWFjcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2V0VGltZW91dChmbHVzaENhbGxiYWNrcywgMCk7XG4gIH07XG59XG5cbi8vIERldGVybWluZSBtaWNyb3Rhc2sgZGVmZXIgaW1wbGVtZW50YXRpb24uXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCwgJGZsb3ctZGlzYWJsZS1saW5lICovXG5pZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFByb21pc2UpKSB7XG4gIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIG1pY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgIHAudGhlbihmbHVzaENhbGxiYWNrcyk7XG4gICAgLy8gaW4gcHJvYmxlbWF0aWMgVUlXZWJWaWV3cywgUHJvbWlzZS50aGVuIGRvZXNuJ3QgY29tcGxldGVseSBicmVhaywgYnV0XG4gICAgLy8gaXQgY2FuIGdldCBzdHVjayBpbiBhIHdlaXJkIHN0YXRlIHdoZXJlIGNhbGxiYWNrcyBhcmUgcHVzaGVkIGludG8gdGhlXG4gICAgLy8gbWljcm90YXNrIHF1ZXVlIGJ1dCB0aGUgcXVldWUgaXNuJ3QgYmVpbmcgZmx1c2hlZCwgdW50aWwgdGhlIGJyb3dzZXJcbiAgICAvLyBuZWVkcyB0byBkbyBzb21lIG90aGVyIHdvcmssIGUuZy4gaGFuZGxlIGEgdGltZXIuIFRoZXJlZm9yZSB3ZSBjYW5cbiAgICAvLyBcImZvcmNlXCIgdGhlIG1pY3JvdGFzayBxdWV1ZSB0byBiZSBmbHVzaGVkIGJ5IGFkZGluZyBhbiBlbXB0eSB0aW1lci5cbiAgICBpZiAoaXNJT1MpIHsgc2V0VGltZW91dChub29wKTsgfVxuICB9O1xufSBlbHNlIHtcbiAgLy8gZmFsbGJhY2sgdG8gbWFjcm9cbiAgbWljcm9UaW1lckZ1bmMgPSBtYWNyb1RpbWVyRnVuYztcbn1cblxuLyoqXG4gKiBXcmFwIGEgZnVuY3Rpb24gc28gdGhhdCBpZiBhbnkgY29kZSBpbnNpZGUgdHJpZ2dlcnMgc3RhdGUgY2hhbmdlLFxuICogdGhlIGNoYW5nZXMgYXJlIHF1ZXVlZCB1c2luZyBhIChtYWNybykgdGFzayBpbnN0ZWFkIG9mIGEgbWljcm90YXNrLlxuICovXG5mdW5jdGlvbiB3aXRoTWFjcm9UYXNrIChmbikge1xuICByZXR1cm4gZm4uX3dpdGhUYXNrIHx8IChmbi5fd2l0aFRhc2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdXNlTWFjcm9UYXNrID0gdHJ1ZTtcbiAgICB2YXIgcmVzID0gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB1c2VNYWNyb1Rhc2sgPSBmYWxzZTtcbiAgICByZXR1cm4gcmVzXG4gIH0pXG59XG5cbmZ1bmN0aW9uIG5leHRUaWNrIChjYiwgY3R4KSB7XG4gIHZhciBfcmVzb2x2ZTtcbiAgY2FsbGJhY2tzLnB1c2goZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2IuY2FsbChjdHgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBoYW5kbGVFcnJvcihlLCBjdHgsICduZXh0VGljaycpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoX3Jlc29sdmUpIHtcbiAgICAgIF9yZXNvbHZlKGN0eCk7XG4gICAgfVxuICB9KTtcbiAgaWYgKCFwZW5kaW5nKSB7XG4gICAgcGVuZGluZyA9IHRydWU7XG4gICAgaWYgKHVzZU1hY3JvVGFzaykge1xuICAgICAgbWFjcm9UaW1lckZ1bmMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWljcm9UaW1lckZ1bmMoKTtcbiAgICB9XG4gIH1cbiAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gIGlmICghY2IgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICBfcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgfSlcbiAgfVxufVxuXG4vKiAgKi9cblxuLyogbm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IHBsYXkgd2VsbCB3aXRoIFByb3h5ICovXG5cbnZhciBpbml0UHJveHk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBhbGxvd2VkR2xvYmFscyA9IG1ha2VNYXAoXG4gICAgJ0luZmluaXR5LHVuZGVmaW5lZCxOYU4saXNGaW5pdGUsaXNOYU4sJyArXG4gICAgJ3BhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksZW5jb2RlVVJJQ29tcG9uZW50LCcgK1xuICAgICdNYXRoLE51bWJlcixEYXRlLEFycmF5LE9iamVjdCxCb29sZWFuLFN0cmluZyxSZWdFeHAsTWFwLFNldCxKU09OLEludGwsJyArXG4gICAgJ3JlcXVpcmUnIC8vIGZvciBXZWJwYWNrL0Jyb3dzZXJpZnlcbiAgKTtcblxuICB2YXIgd2Fybk5vblByZXNlbnQgPSBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcbiAgICB3YXJuKFxuICAgICAgXCJQcm9wZXJ0eSBvciBtZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIG5vdCBkZWZpbmVkIG9uIHRoZSBpbnN0YW5jZSBidXQgXCIgK1xuICAgICAgJ3JlZmVyZW5jZWQgZHVyaW5nIHJlbmRlci4gTWFrZSBzdXJlIHRoYXQgdGhpcyBwcm9wZXJ0eSBpcyByZWFjdGl2ZSwgJyArXG4gICAgICAnZWl0aGVyIGluIHRoZSBkYXRhIG9wdGlvbiwgb3IgZm9yIGNsYXNzLWJhc2VkIGNvbXBvbmVudHMsIGJ5ICcgK1xuICAgICAgJ2luaXRpYWxpemluZyB0aGUgcHJvcGVydHkuICcgK1xuICAgICAgJ1NlZTogaHR0cHM6Ly92dWVqcy5vcmcvdjIvZ3VpZGUvcmVhY3Rpdml0eS5odG1sI0RlY2xhcmluZy1SZWFjdGl2ZS1Qcm9wZXJ0aWVzLicsXG4gICAgICB0YXJnZXRcbiAgICApO1xuICB9O1xuXG4gIHZhciBoYXNQcm94eSA9XG4gICAgdHlwZW9mIFByb3h5ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShQcm94eSk7XG5cbiAgaWYgKGhhc1Byb3h5KSB7XG4gICAgdmFyIGlzQnVpbHRJbk1vZGlmaWVyID0gbWFrZU1hcCgnc3RvcCxwcmV2ZW50LHNlbGYsY3RybCxzaGlmdCxhbHQsbWV0YSxleGFjdCcpO1xuICAgIGNvbmZpZy5rZXlDb2RlcyA9IG5ldyBQcm94eShjb25maWcua2V5Q29kZXMsIHtcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGlzQnVpbHRJbk1vZGlmaWVyKGtleSkpIHtcbiAgICAgICAgICB3YXJuKChcIkF2b2lkIG92ZXJ3cml0aW5nIGJ1aWx0LWluIG1vZGlmaWVyIGluIGNvbmZpZy5rZXlDb2RlczogLlwiICsga2V5KSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB2YXIgaGFzSGFuZGxlciA9IHtcbiAgICBoYXM6IGZ1bmN0aW9uIGhhcyAodGFyZ2V0LCBrZXkpIHtcbiAgICAgIHZhciBoYXMgPSBrZXkgaW4gdGFyZ2V0O1xuICAgICAgdmFyIGlzQWxsb3dlZCA9IGFsbG93ZWRHbG9iYWxzKGtleSkgfHwga2V5LmNoYXJBdCgwKSA9PT0gJ18nO1xuICAgICAgaWYgKCFoYXMgJiYgIWlzQWxsb3dlZCkge1xuICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzIHx8ICFpc0FsbG93ZWRcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdldEhhbmRsZXIgPSB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQgKHRhcmdldCwga2V5KSB7XG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYgIShrZXkgaW4gdGFyZ2V0KSkge1xuICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFyZ2V0W2tleV1cbiAgICB9XG4gIH07XG5cbiAgaW5pdFByb3h5ID0gZnVuY3Rpb24gaW5pdFByb3h5ICh2bSkge1xuICAgIGlmIChoYXNQcm94eSkge1xuICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3h5IGhhbmRsZXIgdG8gdXNlXG4gICAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zO1xuICAgICAgdmFyIGhhbmRsZXJzID0gb3B0aW9ucy5yZW5kZXIgJiYgb3B0aW9ucy5yZW5kZXIuX3dpdGhTdHJpcHBlZFxuICAgICAgICA/IGdldEhhbmRsZXJcbiAgICAgICAgOiBoYXNIYW5kbGVyO1xuICAgICAgdm0uX3JlbmRlclByb3h5ID0gbmV3IFByb3h5KHZtLCBoYW5kbGVycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZtLl9yZW5kZXJQcm94eSA9IHZtO1xuICAgIH1cbiAgfTtcbn1cblxuLyogICovXG5cbnZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcbiAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG4gKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZSAodmFsKSB7XG4gIF90cmF2ZXJzZSh2YWwsIHNlZW5PYmplY3RzKTtcbiAgc2Vlbk9iamVjdHMuY2xlYXIoKTtcbn1cblxuZnVuY3Rpb24gX3RyYXZlcnNlICh2YWwsIHNlZW4pIHtcbiAgdmFyIGksIGtleXM7XG4gIHZhciBpc0EgPSBBcnJheS5pc0FycmF5KHZhbCk7XG4gIGlmICgoIWlzQSAmJiAhaXNPYmplY3QodmFsKSkgfHwgT2JqZWN0LmlzRnJvemVuKHZhbCkgfHwgdmFsIGluc3RhbmNlb2YgVk5vZGUpIHtcbiAgICByZXR1cm5cbiAgfVxuICBpZiAodmFsLl9fb2JfXykge1xuICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBzZWVuLmFkZChkZXBJZCk7XG4gIH1cbiAgaWYgKGlzQSkge1xuICAgIGkgPSB2YWwubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHsgX3RyYXZlcnNlKHZhbFtpXSwgc2Vlbik7IH1cbiAgfSBlbHNlIHtcbiAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkgeyBfdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTsgfVxuICB9XG59XG5cbnZhciBtYXJrO1xudmFyIG1lYXN1cmU7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBwZXJmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChcbiAgICBwZXJmICYmXG4gICAgcGVyZi5tYXJrICYmXG4gICAgcGVyZi5tZWFzdXJlICYmXG4gICAgcGVyZi5jbGVhck1hcmtzICYmXG4gICAgcGVyZi5jbGVhck1lYXN1cmVzXG4gICkge1xuICAgIG1hcmsgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiBwZXJmLm1hcmsodGFnKTsgfTtcbiAgICBtZWFzdXJlID0gZnVuY3Rpb24gKG5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpIHtcbiAgICAgIHBlcmYubWVhc3VyZShuYW1lLCBzdGFydFRhZywgZW5kVGFnKTtcbiAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XG4gICAgICBwZXJmLmNsZWFyTWFya3MoZW5kVGFnKTtcbiAgICAgIHBlcmYuY2xlYXJNZWFzdXJlcyhuYW1lKTtcbiAgICB9O1xuICB9XG59XG5cbi8qICAqL1xuXG52YXIgbm9ybWFsaXplRXZlbnQgPSBjYWNoZWQoZnVuY3Rpb24gKG5hbWUpIHtcbiAgdmFyIHBhc3NpdmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyYnO1xuICBuYW1lID0gcGFzc2l2ZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lO1xuICB2YXIgb25jZSQkMSA9IG5hbWUuY2hhckF0KDApID09PSAnfic7IC8vIFByZWZpeGVkIGxhc3QsIGNoZWNrZWQgZmlyc3RcbiAgbmFtZSA9IG9uY2UkJDEgPyBuYW1lLnNsaWNlKDEpIDogbmFtZTtcbiAgdmFyIGNhcHR1cmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyEnO1xuICBuYW1lID0gY2FwdHVyZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lO1xuICByZXR1cm4ge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgb25jZTogb25jZSQkMSxcbiAgICBjYXB0dXJlOiBjYXB0dXJlLFxuICAgIHBhc3NpdmU6IHBhc3NpdmVcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUZuSW52b2tlciAoZm5zKSB7XG4gIGZ1bmN0aW9uIGludm9rZXIgKCkge1xuICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50cztcblxuICAgIHZhciBmbnMgPSBpbnZva2VyLmZucztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbnMpKSB7XG4gICAgICB2YXIgY2xvbmVkID0gZm5zLnNsaWNlKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsb25lZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjbG9uZWRbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzJDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZXR1cm4gaGFuZGxlciByZXR1cm4gdmFsdWUgZm9yIHNpbmdsZSBoYW5kbGVyc1xuICAgICAgcmV0dXJuIGZucy5hcHBseShudWxsLCBhcmd1bWVudHMpXG4gICAgfVxuICB9XG4gIGludm9rZXIuZm5zID0gZm5zO1xuICByZXR1cm4gaW52b2tlclxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaXN0ZW5lcnMgKFxuICBvbixcbiAgb2xkT24sXG4gIGFkZCxcbiAgcmVtb3ZlJCQxLFxuICB2bVxuKSB7XG4gIHZhciBuYW1lLCBkZWYsIGN1ciwgb2xkLCBldmVudDtcbiAgZm9yIChuYW1lIGluIG9uKSB7XG4gICAgZGVmID0gY3VyID0gb25bbmFtZV07XG4gICAgb2xkID0gb2xkT25bbmFtZV07XG4gICAgZXZlbnQgPSBub3JtYWxpemVFdmVudChuYW1lKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNVbmRlZihjdXIpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgIFwiSW52YWxpZCBoYW5kbGVyIGZvciBldmVudCBcXFwiXCIgKyAoZXZlbnQubmFtZSkgKyBcIlxcXCI6IGdvdCBcIiArIFN0cmluZyhjdXIpLFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkKSkge1xuICAgICAgaWYgKGlzVW5kZWYoY3VyLmZucykpIHtcbiAgICAgICAgY3VyID0gb25bbmFtZV0gPSBjcmVhdGVGbkludm9rZXIoY3VyKTtcbiAgICAgIH1cbiAgICAgIGFkZChldmVudC5uYW1lLCBjdXIsIGV2ZW50Lm9uY2UsIGV2ZW50LmNhcHR1cmUsIGV2ZW50LnBhc3NpdmUsIGV2ZW50LnBhcmFtcyk7XG4gICAgfSBlbHNlIGlmIChjdXIgIT09IG9sZCkge1xuICAgICAgb2xkLmZucyA9IGN1cjtcbiAgICAgIG9uW25hbWVdID0gb2xkO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gb2xkT24pIHtcbiAgICBpZiAoaXNVbmRlZihvbltuYW1lXSkpIHtcbiAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQobmFtZSk7XG4gICAgICByZW1vdmUkJDEoZXZlbnQubmFtZSwgb2xkT25bbmFtZV0sIGV2ZW50LmNhcHR1cmUpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gbWVyZ2VWTm9kZUhvb2sgKGRlZiwgaG9va0tleSwgaG9vaykge1xuICBpZiAoZGVmIGluc3RhbmNlb2YgVk5vZGUpIHtcbiAgICBkZWYgPSBkZWYuZGF0YS5ob29rIHx8IChkZWYuZGF0YS5ob29rID0ge30pO1xuICB9XG4gIHZhciBpbnZva2VyO1xuICB2YXIgb2xkSG9vayA9IGRlZltob29rS2V5XTtcblxuICBmdW5jdGlvbiB3cmFwcGVkSG9vayAoKSB7XG4gICAgaG9vay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIC8vIGltcG9ydGFudDogcmVtb3ZlIG1lcmdlZCBob29rIHRvIGVuc3VyZSBpdCdzIGNhbGxlZCBvbmx5IG9uY2VcbiAgICAvLyBhbmQgcHJldmVudCBtZW1vcnkgbGVha1xuICAgIHJlbW92ZShpbnZva2VyLmZucywgd3JhcHBlZEhvb2spO1xuICB9XG5cbiAgaWYgKGlzVW5kZWYob2xkSG9vaykpIHtcbiAgICAvLyBubyBleGlzdGluZyBob29rXG4gICAgaW52b2tlciA9IGNyZWF0ZUZuSW52b2tlcihbd3JhcHBlZEhvb2tdKTtcbiAgfSBlbHNlIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNEZWYob2xkSG9vay5mbnMpICYmIGlzVHJ1ZShvbGRIb29rLm1lcmdlZCkpIHtcbiAgICAgIC8vIGFscmVhZHkgYSBtZXJnZWQgaW52b2tlclxuICAgICAgaW52b2tlciA9IG9sZEhvb2s7XG4gICAgICBpbnZva2VyLmZucy5wdXNoKHdyYXBwZWRIb29rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZXhpc3RpbmcgcGxhaW4gaG9va1xuICAgICAgaW52b2tlciA9IGNyZWF0ZUZuSW52b2tlcihbb2xkSG9vaywgd3JhcHBlZEhvb2tdKTtcbiAgICB9XG4gIH1cblxuICBpbnZva2VyLm1lcmdlZCA9IHRydWU7XG4gIGRlZltob29rS2V5XSA9IGludm9rZXI7XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhIChcbiAgZGF0YSxcbiAgQ3RvcixcbiAgdGFnXG4pIHtcbiAgLy8gd2UgYXJlIG9ubHkgZXh0cmFjdGluZyByYXcgdmFsdWVzIGhlcmUuXG4gIC8vIHZhbGlkYXRpb24gYW5kIGRlZmF1bHQgdmFsdWVzIGFyZSBoYW5kbGVkIGluIHRoZSBjaGlsZFxuICAvLyBjb21wb25lbnQgaXRzZWxmLlxuICB2YXIgcHJvcE9wdGlvbnMgPSBDdG9yLm9wdGlvbnMucHJvcHM7XG4gIGlmIChpc1VuZGVmKHByb3BPcHRpb25zKSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciByZXMgPSB7fTtcbiAgdmFyIGF0dHJzID0gZGF0YS5hdHRycztcbiAgdmFyIHByb3BzID0gZGF0YS5wcm9wcztcbiAgaWYgKGlzRGVmKGF0dHJzKSB8fCBpc0RlZihwcm9wcykpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHtcbiAgICAgIHZhciBhbHRLZXkgPSBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhciBrZXlJbkxvd2VyQ2FzZSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAga2V5ICE9PSBrZXlJbkxvd2VyQ2FzZSAmJlxuICAgICAgICAgIGF0dHJzICYmIGhhc093bihhdHRycywga2V5SW5Mb3dlckNhc2UpXG4gICAgICAgICkge1xuICAgICAgICAgIHRpcChcbiAgICAgICAgICAgIFwiUHJvcCBcXFwiXCIgKyBrZXlJbkxvd2VyQ2FzZSArIFwiXFxcIiBpcyBwYXNzZWQgdG8gY29tcG9uZW50IFwiICtcbiAgICAgICAgICAgIChmb3JtYXRDb21wb25lbnROYW1lKHRhZyB8fCBDdG9yKSkgKyBcIiwgYnV0IHRoZSBkZWNsYXJlZCBwcm9wIG5hbWUgaXNcIiArXG4gICAgICAgICAgICBcIiBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuIFwiICtcbiAgICAgICAgICAgIFwiTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgY2FtZWxDYXNlZCBcIiArXG4gICAgICAgICAgICBcInByb3BzIG5lZWQgdG8gdXNlIHRoZWlyIGtlYmFiLWNhc2UgZXF1aXZhbGVudHMgd2hlbiB1c2luZyBpbi1ET00gXCIgK1xuICAgICAgICAgICAgXCJ0ZW1wbGF0ZXMuIFlvdSBzaG91bGQgcHJvYmFibHkgdXNlIFxcXCJcIiArIGFsdEtleSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGtleSArIFwiXFxcIi5cIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNoZWNrUHJvcChyZXMsIHByb3BzLCBrZXksIGFsdEtleSwgdHJ1ZSkgfHxcbiAgICAgIGNoZWNrUHJvcChyZXMsIGF0dHJzLCBrZXksIGFsdEtleSwgZmFsc2UpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGNoZWNrUHJvcCAoXG4gIHJlcyxcbiAgaGFzaCxcbiAga2V5LFxuICBhbHRLZXksXG4gIHByZXNlcnZlXG4pIHtcbiAgaWYgKGlzRGVmKGhhc2gpKSB7XG4gICAgaWYgKGhhc093bihoYXNoLCBrZXkpKSB7XG4gICAgICByZXNba2V5XSA9IGhhc2hba2V5XTtcbiAgICAgIGlmICghcHJlc2VydmUpIHtcbiAgICAgICAgZGVsZXRlIGhhc2hba2V5XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIGlmIChoYXNPd24oaGFzaCwgYWx0S2V5KSkge1xuICAgICAgcmVzW2tleV0gPSBoYXNoW2FsdEtleV07XG4gICAgICBpZiAoIXByZXNlcnZlKSB7XG4gICAgICAgIGRlbGV0ZSBoYXNoW2FsdEtleV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyogICovXG5cbi8vIFRoZSB0ZW1wbGF0ZSBjb21waWxlciBhdHRlbXB0cyB0byBtaW5pbWl6ZSB0aGUgbmVlZCBmb3Igbm9ybWFsaXphdGlvbiBieVxuLy8gc3RhdGljYWxseSBhbmFseXppbmcgdGhlIHRlbXBsYXRlIGF0IGNvbXBpbGUgdGltZS5cbi8vXG4vLyBGb3IgcGxhaW4gSFRNTCBtYXJrdXAsIG5vcm1hbGl6YXRpb24gY2FuIGJlIGNvbXBsZXRlbHkgc2tpcHBlZCBiZWNhdXNlIHRoZVxuLy8gZ2VuZXJhdGVkIHJlbmRlciBmdW5jdGlvbiBpcyBndWFyYW50ZWVkIHRvIHJldHVybiBBcnJheTxWTm9kZT4uIFRoZXJlIGFyZVxuLy8gdHdvIGNhc2VzIHdoZXJlIGV4dHJhIG5vcm1hbGl6YXRpb24gaXMgbmVlZGVkOlxuXG4vLyAxLiBXaGVuIHRoZSBjaGlsZHJlbiBjb250YWlucyBjb21wb25lbnRzIC0gYmVjYXVzZSBhIGZ1bmN0aW9uYWwgY29tcG9uZW50XG4vLyBtYXkgcmV0dXJuIGFuIEFycmF5IGluc3RlYWQgb2YgYSBzaW5nbGUgcm9vdC4gSW4gdGhpcyBjYXNlLCBqdXN0IGEgc2ltcGxlXG4vLyBub3JtYWxpemF0aW9uIGlzIG5lZWRlZCAtIGlmIGFueSBjaGlsZCBpcyBhbiBBcnJheSwgd2UgZmxhdHRlbiB0aGUgd2hvbGVcbi8vIHRoaW5nIHdpdGggQXJyYXkucHJvdG90eXBlLmNvbmNhdC4gSXQgaXMgZ3VhcmFudGVlZCB0byBiZSBvbmx5IDEtbGV2ZWwgZGVlcFxuLy8gYmVjYXVzZSBmdW5jdGlvbmFsIGNvbXBvbmVudHMgYWxyZWFkeSBub3JtYWxpemUgdGhlaXIgb3duIGNoaWxkcmVuLlxuZnVuY3Rpb24gc2ltcGxlTm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbltpXSkpIHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBjaGlsZHJlbilcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNoaWxkcmVuXG59XG5cbi8vIDIuIFdoZW4gdGhlIGNoaWxkcmVuIGNvbnRhaW5zIGNvbnN0cnVjdHMgdGhhdCBhbHdheXMgZ2VuZXJhdGVkIG5lc3RlZCBBcnJheXMsXG4vLyBlLmcuIDx0ZW1wbGF0ZT4sIDxzbG90Piwgdi1mb3IsIG9yIHdoZW4gdGhlIGNoaWxkcmVuIGlzIHByb3ZpZGVkIGJ5IHVzZXJcbi8vIHdpdGggaGFuZC13cml0dGVuIHJlbmRlciBmdW5jdGlvbnMgLyBKU1guIEluIHN1Y2ggY2FzZXMgYSBmdWxsIG5vcm1hbGl6YXRpb25cbi8vIGlzIG5lZWRlZCB0byBjYXRlciB0byBhbGwgcG9zc2libGUgdHlwZXMgb2YgY2hpbGRyZW4gdmFsdWVzLlxuZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7XG4gIHJldHVybiBpc1ByaW1pdGl2ZShjaGlsZHJlbilcbiAgICA/IFtjcmVhdGVUZXh0Vk5vZGUoY2hpbGRyZW4pXVxuICAgIDogQXJyYXkuaXNBcnJheShjaGlsZHJlbilcbiAgICAgID8gbm9ybWFsaXplQXJyYXlDaGlsZHJlbihjaGlsZHJlbilcbiAgICAgIDogdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGlzVGV4dE5vZGUgKG5vZGUpIHtcbiAgcmV0dXJuIGlzRGVmKG5vZGUpICYmIGlzRGVmKG5vZGUudGV4dCkgJiYgaXNGYWxzZShub2RlLmlzQ29tbWVudClcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXlDaGlsZHJlbiAoY2hpbGRyZW4sIG5lc3RlZEluZGV4KSB7XG4gIHZhciByZXMgPSBbXTtcbiAgdmFyIGksIGMsIGxhc3RJbmRleCwgbGFzdDtcbiAgZm9yIChpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgYyA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChpc1VuZGVmKGMpIHx8IHR5cGVvZiBjID09PSAnYm9vbGVhbicpIHsgY29udGludWUgfVxuICAgIGxhc3RJbmRleCA9IHJlcy5sZW5ndGggLSAxO1xuICAgIGxhc3QgPSByZXNbbGFzdEluZGV4XTtcbiAgICAvLyAgbmVzdGVkXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYykpIHtcbiAgICAgIGlmIChjLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYyA9IG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oYywgKChuZXN0ZWRJbmRleCB8fCAnJykgKyBcIl9cIiArIGkpKTtcbiAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuICAgICAgICBpZiAoaXNUZXh0Tm9kZShjWzBdKSAmJiBpc1RleHROb2RlKGxhc3QpKSB7XG4gICAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgKGNbMF0pLnRleHQpO1xuICAgICAgICAgIGMuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXMucHVzaC5hcHBseShyZXMsIGMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNQcmltaXRpdmUoYykpIHtcbiAgICAgIGlmIChpc1RleHROb2RlKGxhc3QpKSB7XG4gICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXNcbiAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgZm9yIFNTUiBoeWRyYXRpb24gYmVjYXVzZSB0ZXh0IG5vZGVzIGFyZVxuICAgICAgICAvLyBlc3NlbnRpYWxseSBtZXJnZWQgd2hlbiByZW5kZXJlZCB0byBIVE1MIHN0cmluZ3NcbiAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYyk7XG4gICAgICB9IGVsc2UgaWYgKGMgIT09ICcnKSB7XG4gICAgICAgIC8vIGNvbnZlcnQgcHJpbWl0aXZlIHRvIHZub2RlXG4gICAgICAgIHJlcy5wdXNoKGNyZWF0ZVRleHRWTm9kZShjKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc1RleHROb2RlKGMpICYmIGlzVGV4dE5vZGUobGFzdCkpIHtcbiAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyBjLnRleHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGVmYXVsdCBrZXkgZm9yIG5lc3RlZCBhcnJheSBjaGlsZHJlbiAobGlrZWx5IGdlbmVyYXRlZCBieSB2LWZvcilcbiAgICAgICAgaWYgKGlzVHJ1ZShjaGlsZHJlbi5faXNWTGlzdCkgJiZcbiAgICAgICAgICBpc0RlZihjLnRhZykgJiZcbiAgICAgICAgICBpc1VuZGVmKGMua2V5KSAmJlxuICAgICAgICAgIGlzRGVmKG5lc3RlZEluZGV4KSkge1xuICAgICAgICAgIGMua2V5ID0gXCJfX3ZsaXN0XCIgKyBuZXN0ZWRJbmRleCArIFwiX1wiICsgaSArIFwiX19cIjtcbiAgICAgICAgfVxuICAgICAgICByZXMucHVzaChjKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZW5zdXJlQ3RvciAoY29tcCwgYmFzZSkge1xuICBpZiAoXG4gICAgY29tcC5fX2VzTW9kdWxlIHx8XG4gICAgKGhhc1N5bWJvbCAmJiBjb21wW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKVxuICApIHtcbiAgICBjb21wID0gY29tcC5kZWZhdWx0O1xuICB9XG4gIHJldHVybiBpc09iamVjdChjb21wKVxuICAgID8gYmFzZS5leHRlbmQoY29tcClcbiAgICA6IGNvbXBcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXN5bmNQbGFjZWhvbGRlciAoXG4gIGZhY3RvcnksXG4gIGRhdGEsXG4gIGNvbnRleHQsXG4gIGNoaWxkcmVuLFxuICB0YWdcbikge1xuICB2YXIgbm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTtcbiAgbm9kZS5hc3luY0ZhY3RvcnkgPSBmYWN0b3J5O1xuICBub2RlLmFzeW5jTWV0YSA9IHsgZGF0YTogZGF0YSwgY29udGV4dDogY29udGV4dCwgY2hpbGRyZW46IGNoaWxkcmVuLCB0YWc6IHRhZyB9O1xuICByZXR1cm4gbm9kZVxufVxuXG5mdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnQgKFxuICBmYWN0b3J5LFxuICBiYXNlQ3RvcixcbiAgY29udGV4dFxuKSB7XG4gIGlmIChpc1RydWUoZmFjdG9yeS5lcnJvcikgJiYgaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7XG4gICAgcmV0dXJuIGZhY3RvcnkuZXJyb3JDb21wXG4gIH1cblxuICBpZiAoaXNEZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcbiAgICByZXR1cm4gZmFjdG9yeS5yZXNvbHZlZFxuICB9XG5cbiAgaWYgKGlzVHJ1ZShmYWN0b3J5LmxvYWRpbmcpICYmIGlzRGVmKGZhY3RvcnkubG9hZGluZ0NvbXApKSB7XG4gICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ0NvbXBcbiAgfVxuXG4gIGlmIChpc0RlZihmYWN0b3J5LmNvbnRleHRzKSkge1xuICAgIC8vIGFscmVhZHkgcGVuZGluZ1xuICAgIGZhY3RvcnkuY29udGV4dHMucHVzaChjb250ZXh0KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY29udGV4dHMgPSBmYWN0b3J5LmNvbnRleHRzID0gW2NvbnRleHRdO1xuICAgIHZhciBzeW5jID0gdHJ1ZTtcblxuICAgIHZhciBmb3JjZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29udGV4dHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnRleHRzW2ldLiRmb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlcykge1xuICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSBlbnN1cmVDdG9yKHJlcywgYmFzZUN0b3IpO1xuICAgICAgLy8gaW52b2tlIGNhbGxiYWNrcyBvbmx5IGlmIHRoaXMgaXMgbm90IGEgc3luY2hyb25vdXMgcmVzb2x2ZVxuICAgICAgLy8gKGFzeW5jIHJlc29sdmVzIGFyZSBzaGltbWVkIGFzIHN5bmNocm9ub3VzIGR1cmluZyBTU1IpXG4gICAgICBpZiAoIXN5bmMpIHtcbiAgICAgICAgZm9yY2VSZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciByZWplY3QgPSBvbmNlKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICAgXCJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQ6IFwiICsgKFN0cmluZyhmYWN0b3J5KSkgK1xuICAgICAgICAocmVhc29uID8gKFwiXFxuUmVhc29uOiBcIiArIHJlYXNvbikgOiAnJylcbiAgICAgICk7XG4gICAgICBpZiAoaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7XG4gICAgICAgIGZhY3RvcnkuZXJyb3IgPSB0cnVlO1xuICAgICAgICBmb3JjZVJlbmRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHJlcyA9IGZhY3RvcnkocmVzb2x2ZSwgcmVqZWN0KTtcblxuICAgIGlmIChpc09iamVjdChyZXMpKSB7XG4gICAgICBpZiAodHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vICgpID0+IFByb21pc2VcbiAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcbiAgICAgICAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzRGVmKHJlcy5jb21wb25lbnQpICYmIHR5cGVvZiByZXMuY29tcG9uZW50LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmVzLmNvbXBvbmVudC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cbiAgICAgICAgaWYgKGlzRGVmKHJlcy5lcnJvcikpIHtcbiAgICAgICAgICBmYWN0b3J5LmVycm9yQ29tcCA9IGVuc3VyZUN0b3IocmVzLmVycm9yLCBiYXNlQ3Rvcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNEZWYocmVzLmxvYWRpbmcpKSB7XG4gICAgICAgICAgZmFjdG9yeS5sb2FkaW5nQ29tcCA9IGVuc3VyZUN0b3IocmVzLmxvYWRpbmcsIGJhc2VDdG9yKTtcbiAgICAgICAgICBpZiAocmVzLmRlbGF5ID09PSAwKSB7XG4gICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkgJiYgaXNVbmRlZihmYWN0b3J5LmVycm9yKSkge1xuICAgICAgICAgICAgICAgIGZhY3RvcnkubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yY2VSZW5kZXIoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcmVzLmRlbGF5IHx8IDIwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmKHJlcy50aW1lb3V0KSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbidcbiAgICAgICAgICAgICAgICAgID8gKFwidGltZW91dCAoXCIgKyAocmVzLnRpbWVvdXQpICsgXCJtcylcIilcbiAgICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHJlcy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHN5bmMgPSBmYWxzZTtcbiAgICAvLyByZXR1cm4gaW4gY2FzZSByZXNvbHZlZCBzeW5jaHJvbm91c2x5XG4gICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ1xuICAgICAgPyBmYWN0b3J5LmxvYWRpbmdDb21wXG4gICAgICA6IGZhY3RvcnkucmVzb2x2ZWRcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaXNBc3luY1BsYWNlaG9sZGVyIChub2RlKSB7XG4gIHJldHVybiBub2RlLmlzQ29tbWVudCAmJiBub2RlLmFzeW5jRmFjdG9yeVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZCAoY2hpbGRyZW4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGMgPSBjaGlsZHJlbltpXTtcbiAgICAgIGlmIChpc0RlZihjKSAmJiAoaXNEZWYoYy5jb21wb25lbnRPcHRpb25zKSB8fCBpc0FzeW5jUGxhY2Vob2xkZXIoYykpKSB7XG4gICAgICAgIHJldHVybiBjXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qICAqL1xuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdEV2ZW50cyAodm0pIHtcbiAgdm0uX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZtLl9oYXNIb29rRXZlbnQgPSBmYWxzZTtcbiAgLy8gaW5pdCBwYXJlbnQgYXR0YWNoZWQgZXZlbnRzXG4gIHZhciBsaXN0ZW5lcnMgPSB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuICBpZiAobGlzdGVuZXJzKSB7XG4gICAgdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzKHZtLCBsaXN0ZW5lcnMpO1xuICB9XG59XG5cbnZhciB0YXJnZXQ7XG5cbmZ1bmN0aW9uIGFkZCAoZXZlbnQsIGZuLCBvbmNlKSB7XG4gIGlmIChvbmNlKSB7XG4gICAgdGFyZ2V0LiRvbmNlKGV2ZW50LCBmbik7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LiRvbihldmVudCwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSQxIChldmVudCwgZm4pIHtcbiAgdGFyZ2V0LiRvZmYoZXZlbnQsIGZuKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzIChcbiAgdm0sXG4gIGxpc3RlbmVycyxcbiAgb2xkTGlzdGVuZXJzXG4pIHtcbiAgdGFyZ2V0ID0gdm07XG4gIHVwZGF0ZUxpc3RlbmVycyhsaXN0ZW5lcnMsIG9sZExpc3RlbmVycyB8fCB7fSwgYWRkLCByZW1vdmUkMSwgdm0pO1xuICB0YXJnZXQgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcbiAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGV2ZW50Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzJDEuJG9uKGV2ZW50W2ldLCBmbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICh2bS5fZXZlbnRzW2V2ZW50XSB8fCAodm0uX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuICAgICAgLy8gb3B0aW1pemUgaG9vazpldmVudCBjb3N0IGJ5IHVzaW5nIGEgYm9vbGVhbiBmbGFnIG1hcmtlZCBhdCByZWdpc3RyYXRpb25cbiAgICAgIC8vIGluc3RlYWQgb2YgYSBoYXNoIGxvb2t1cFxuICAgICAgaWYgKGhvb2tSRS50ZXN0KGV2ZW50KSkge1xuICAgICAgICB2bS5faGFzSG9va0V2ZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZtXG4gIH07XG5cbiAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGZ1bmN0aW9uIG9uICgpIHtcbiAgICAgIHZtLiRvZmYoZXZlbnQsIG9uKTtcbiAgICAgIGZuLmFwcGx5KHZtLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBvbi5mbiA9IGZuO1xuICAgIHZtLiRvbihldmVudCwgb24pO1xuICAgIHJldHVybiB2bVxuICB9O1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgLy8gYWxsXG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIHJldHVybiB2bVxuICAgIH1cbiAgICAvLyBhcnJheSBvZiBldmVudHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZXZlbnQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMkMS4kb2ZmKGV2ZW50W2ldLCBmbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm1cbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgICB2YXIgY2JzID0gdm0uX2V2ZW50c1tldmVudF07XG4gICAgaWYgKCFjYnMpIHtcbiAgICAgIHJldHVybiB2bVxuICAgIH1cbiAgICBpZiAoIWZuKSB7XG4gICAgICB2bS5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG4gICAgICByZXR1cm4gdm1cbiAgICB9XG4gICAgaWYgKGZuKSB7XG4gICAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG4gICAgICB2YXIgY2I7XG4gICAgICB2YXIgaSQxID0gY2JzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpJDEtLSkge1xuICAgICAgICBjYiA9IGNic1tpJDFdO1xuICAgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgICAgIGNicy5zcGxpY2UoaSQxLCAxKTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2bVxuICB9O1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxvd2VyQ2FzZUV2ZW50ICE9PSBldmVudCAmJiB2bS5fZXZlbnRzW2xvd2VyQ2FzZUV2ZW50XSkge1xuICAgICAgICB0aXAoXG4gICAgICAgICAgXCJFdmVudCBcXFwiXCIgKyBsb3dlckNhc2VFdmVudCArIFwiXFxcIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCBcIiArXG4gICAgICAgICAgKGZvcm1hdENvbXBvbmVudE5hbWUodm0pKSArIFwiIGJ1dCB0aGUgaGFuZGxlciBpcyByZWdpc3RlcmVkIGZvciBcXFwiXCIgKyBldmVudCArIFwiXFxcIi4gXCIgK1xuICAgICAgICAgIFwiTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgeW91IGNhbm5vdCB1c2UgXCIgK1xuICAgICAgICAgIFwidi1vbiB0byBsaXN0ZW4gdG8gY2FtZWxDYXNlIGV2ZW50cyB3aGVuIHVzaW5nIGluLURPTSB0ZW1wbGF0ZXMuIFwiICtcbiAgICAgICAgICBcIllvdSBzaG91bGQgcHJvYmFibHkgdXNlIFxcXCJcIiArIChoeXBoZW5hdGUoZXZlbnQpKSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGV2ZW50ICsgXCJcXFwiLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBjYnMgPSB2bS5fZXZlbnRzW2V2ZW50XTtcbiAgICBpZiAoY2JzKSB7XG4gICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2JzW2ldLmFwcGx5KHZtLCBhcmdzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAoXCJldmVudCBoYW5kbGVyIGZvciBcXFwiXCIgKyBldmVudCArIFwiXFxcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZtXG4gIH07XG59XG5cbi8qICAqL1xuXG5cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIHJhdyBjaGlsZHJlbiBWTm9kZXMgaW50byBhIHNsb3Qgb2JqZWN0LlxuICovXG5mdW5jdGlvbiByZXNvbHZlU2xvdHMgKFxuICBjaGlsZHJlbixcbiAgY29udGV4dFxuKSB7XG4gIHZhciBzbG90cyA9IHt9O1xuICBpZiAoIWNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIHNsb3RzXG4gIH1cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICB2YXIgZGF0YSA9IGNoaWxkLmRhdGE7XG4gICAgLy8gcmVtb3ZlIHNsb3QgYXR0cmlidXRlIGlmIHRoZSBub2RlIGlzIHJlc29sdmVkIGFzIGEgVnVlIHNsb3Qgbm9kZVxuICAgIGlmIChkYXRhICYmIGRhdGEuYXR0cnMgJiYgZGF0YS5hdHRycy5zbG90KSB7XG4gICAgICBkZWxldGUgZGF0YS5hdHRycy5zbG90O1xuICAgIH1cbiAgICAvLyBuYW1lZCBzbG90cyBzaG91bGQgb25seSBiZSByZXNwZWN0ZWQgaWYgdGhlIHZub2RlIHdhcyByZW5kZXJlZCBpbiB0aGVcbiAgICAvLyBzYW1lIGNvbnRleHQuXG4gICAgaWYgKChjaGlsZC5jb250ZXh0ID09PSBjb250ZXh0IHx8IGNoaWxkLmZuQ29udGV4dCA9PT0gY29udGV4dCkgJiZcbiAgICAgIGRhdGEgJiYgZGF0YS5zbG90ICE9IG51bGxcbiAgICApIHtcbiAgICAgIHZhciBuYW1lID0gZGF0YS5zbG90O1xuICAgICAgdmFyIHNsb3QgPSAoc2xvdHNbbmFtZV0gfHwgKHNsb3RzW25hbWVdID0gW10pKTtcbiAgICAgIGlmIChjaGlsZC50YWcgPT09ICd0ZW1wbGF0ZScpIHtcbiAgICAgICAgc2xvdC5wdXNoLmFwcGx5KHNsb3QsIGNoaWxkLmNoaWxkcmVuIHx8IFtdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsb3QucHVzaChjaGlsZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIChzbG90cy5kZWZhdWx0IHx8IChzbG90cy5kZWZhdWx0ID0gW10pKS5wdXNoKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgLy8gaWdub3JlIHNsb3RzIHRoYXQgY29udGFpbnMgb25seSB3aGl0ZXNwYWNlXG4gIGZvciAodmFyIG5hbWUkMSBpbiBzbG90cykge1xuICAgIGlmIChzbG90c1tuYW1lJDFdLmV2ZXJ5KGlzV2hpdGVzcGFjZSkpIHtcbiAgICAgIGRlbGV0ZSBzbG90c1tuYW1lJDFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2xvdHNcbn1cblxuZnVuY3Rpb24gaXNXaGl0ZXNwYWNlIChub2RlKSB7XG4gIHJldHVybiAobm9kZS5pc0NvbW1lbnQgJiYgIW5vZGUuYXN5bmNGYWN0b3J5KSB8fCBub2RlLnRleHQgPT09ICcgJ1xufVxuXG5mdW5jdGlvbiByZXNvbHZlU2NvcGVkU2xvdHMgKFxuICBmbnMsIC8vIHNlZSBmbG93L3Zub2RlXG4gIHJlc1xuKSB7XG4gIHJlcyA9IHJlcyB8fCB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbnNbaV0pKSB7XG4gICAgICByZXNvbHZlU2NvcGVkU2xvdHMoZm5zW2ldLCByZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNbZm5zW2ldLmtleV0gPSBmbnNbaV0uZm47XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyogICovXG5cbnZhciBhY3RpdmVJbnN0YW5jZSA9IG51bGw7XG52YXIgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGluaXRMaWZlY3ljbGUgKHZtKSB7XG4gIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7XG5cbiAgLy8gbG9jYXRlIGZpcnN0IG5vbi1hYnN0cmFjdCBwYXJlbnRcbiAgdmFyIHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuICBpZiAocGFyZW50ICYmICFvcHRpb25zLmFic3RyYWN0KSB7XG4gICAgd2hpbGUgKHBhcmVudC4kb3B0aW9ucy5hYnN0cmFjdCAmJiBwYXJlbnQuJHBhcmVudCkge1xuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICAgIHBhcmVudC4kY2hpbGRyZW4ucHVzaCh2bSk7XG4gIH1cblxuICB2bS4kcGFyZW50ID0gcGFyZW50O1xuICB2bS4kcm9vdCA9IHBhcmVudCA/IHBhcmVudC4kcm9vdCA6IHZtO1xuXG4gIHZtLiRjaGlsZHJlbiA9IFtdO1xuICB2bS4kcmVmcyA9IHt9O1xuXG4gIHZtLl93YXRjaGVyID0gbnVsbDtcbiAgdm0uX2luYWN0aXZlID0gbnVsbDtcbiAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7XG4gIHZtLl9pc01vdW50ZWQgPSBmYWxzZTtcbiAgdm0uX2lzRGVzdHJveWVkID0gZmFsc2U7XG4gIHZtLl9pc0JlaW5nRGVzdHJveWVkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcbiAgVnVlLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKHZub2RlLCBoeWRyYXRpbmcpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmICh2bS5faXNNb3VudGVkKSB7XG4gICAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZVVwZGF0ZScpO1xuICAgIH1cbiAgICB2YXIgcHJldkVsID0gdm0uJGVsO1xuICAgIHZhciBwcmV2Vm5vZGUgPSB2bS5fdm5vZGU7XG4gICAgdmFyIHByZXZBY3RpdmVJbnN0YW5jZSA9IGFjdGl2ZUluc3RhbmNlO1xuICAgIGFjdGl2ZUluc3RhbmNlID0gdm07XG4gICAgdm0uX3Zub2RlID0gdm5vZGU7XG4gICAgLy8gVnVlLnByb3RvdHlwZS5fX3BhdGNoX18gaXMgaW5qZWN0ZWQgaW4gZW50cnkgcG9pbnRzXG4gICAgLy8gYmFzZWQgb24gdGhlIHJlbmRlcmluZyBiYWNrZW5kIHVzZWQuXG4gICAgaWYgKCFwcmV2Vm5vZGUpIHtcbiAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG4gICAgICB2bS4kZWwgPSB2bS5fX3BhdGNoX18oXG4gICAgICAgIHZtLiRlbCwgdm5vZGUsIGh5ZHJhdGluZywgZmFsc2UgLyogcmVtb3ZlT25seSAqLyxcbiAgICAgICAgdm0uJG9wdGlvbnMuX3BhcmVudEVsbSxcbiAgICAgICAgdm0uJG9wdGlvbnMuX3JlZkVsbVxuICAgICAgKTtcbiAgICAgIC8vIG5vIG5lZWQgZm9yIHRoZSByZWYgbm9kZXMgYWZ0ZXIgaW5pdGlhbCBwYXRjaFxuICAgICAgLy8gdGhpcyBwcmV2ZW50cyBrZWVwaW5nIGEgZGV0YWNoZWQgRE9NIHRyZWUgaW4gbWVtb3J5ICgjNTg1MSlcbiAgICAgIHZtLiRvcHRpb25zLl9wYXJlbnRFbG0gPSB2bS4kb3B0aW9ucy5fcmVmRWxtID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlc1xuICAgICAgdm0uJGVsID0gdm0uX19wYXRjaF9fKHByZXZWbm9kZSwgdm5vZGUpO1xuICAgIH1cbiAgICBhY3RpdmVJbnN0YW5jZSA9IHByZXZBY3RpdmVJbnN0YW5jZTtcbiAgICAvLyB1cGRhdGUgX192dWVfXyByZWZlcmVuY2VcbiAgICBpZiAocHJldkVsKSB7XG4gICAgICBwcmV2RWwuX192dWVfXyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh2bS4kZWwpIHtcbiAgICAgIHZtLiRlbC5fX3Z1ZV9fID0gdm07XG4gICAgfVxuICAgIC8vIGlmIHBhcmVudCBpcyBhbiBIT0MsIHVwZGF0ZSBpdHMgJGVsIGFzIHdlbGxcbiAgICBpZiAodm0uJHZub2RlICYmIHZtLiRwYXJlbnQgJiYgdm0uJHZub2RlID09PSB2bS4kcGFyZW50Ll92bm9kZSkge1xuICAgICAgdm0uJHBhcmVudC4kZWwgPSB2bS4kZWw7XG4gICAgfVxuICAgIC8vIHVwZGF0ZWQgaG9vayBpcyBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlciB0byBlbnN1cmUgdGhhdCBjaGlsZHJlbiBhcmVcbiAgICAvLyB1cGRhdGVkIGluIGEgcGFyZW50J3MgdXBkYXRlZCBob29rLlxuICB9O1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKHZtLl93YXRjaGVyKSB7XG4gICAgICB2bS5fd2F0Y2hlci51cGRhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmICh2bS5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlRGVzdHJveScpO1xuICAgIHZtLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudFxuICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdm0uJG9wdGlvbnMuYWJzdHJhY3QpIHtcbiAgICAgIHJlbW92ZShwYXJlbnQuJGNoaWxkcmVuLCB2bSk7XG4gICAgfVxuICAgIC8vIHRlYXJkb3duIHdhdGNoZXJzXG4gICAgaWYgKHZtLl93YXRjaGVyKSB7XG4gICAgICB2bS5fd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgICB2YXIgaSA9IHZtLl93YXRjaGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdm0uX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG4gICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG4gICAgaWYgKHZtLl9kYXRhLl9fb2JfXykge1xuICAgICAgdm0uX2RhdGEuX19vYl9fLnZtQ291bnQtLTtcbiAgICB9XG4gICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG4gICAgdm0uX2lzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAvLyBpbnZva2UgZGVzdHJveSBob29rcyBvbiBjdXJyZW50IHJlbmRlcmVkIHRyZWVcbiAgICB2bS5fX3BhdGNoX18odm0uX3Zub2RlLCBudWxsKTtcbiAgICAvLyBmaXJlIGRlc3Ryb3llZCBob29rXG4gICAgY2FsbEhvb2sodm0sICdkZXN0cm95ZWQnKTtcbiAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuICAgIHZtLiRvZmYoKTtcbiAgICAvLyByZW1vdmUgX192dWVfXyByZWZlcmVuY2VcbiAgICBpZiAodm0uJGVsKSB7XG4gICAgICB2bS4kZWwuX192dWVfXyA9IG51bGw7XG4gICAgfVxuICAgIC8vIHJlbGVhc2UgY2lyY3VsYXIgcmVmZXJlbmNlICgjNjc1OSlcbiAgICBpZiAodm0uJHZub2RlKSB7XG4gICAgICB2bS4kdm5vZGUucGFyZW50ID0gbnVsbDtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1vdW50Q29tcG9uZW50IChcbiAgdm0sXG4gIGVsLFxuICBoeWRyYXRpbmdcbikge1xuICB2bS4kZWwgPSBlbDtcbiAgaWYgKCF2bS4kb3B0aW9ucy5yZW5kZXIpIHtcbiAgICB2bS4kb3B0aW9ucy5yZW5kZXIgPSBjcmVhdGVFbXB0eVZOb2RlO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICgodm0uJG9wdGlvbnMudGVtcGxhdGUgJiYgdm0uJG9wdGlvbnMudGVtcGxhdGUuY2hhckF0KDApICE9PSAnIycpIHx8XG4gICAgICAgIHZtLiRvcHRpb25zLmVsIHx8IGVsKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgJ1lvdSBhcmUgdXNpbmcgdGhlIHJ1bnRpbWUtb25seSBidWlsZCBvZiBWdWUgd2hlcmUgdGhlIHRlbXBsYXRlICcgK1xuICAgICAgICAgICdjb21waWxlciBpcyBub3QgYXZhaWxhYmxlLiBFaXRoZXIgcHJlLWNvbXBpbGUgdGhlIHRlbXBsYXRlcyBpbnRvICcgK1xuICAgICAgICAgICdyZW5kZXIgZnVuY3Rpb25zLCBvciB1c2UgdGhlIGNvbXBpbGVyLWluY2x1ZGVkIGJ1aWxkLicsXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgJ0ZhaWxlZCB0byBtb3VudCBjb21wb25lbnQ6IHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbiBub3QgZGVmaW5lZC4nLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNhbGxIb29rKHZtLCAnYmVmb3JlTW91bnQnKTtcblxuICB2YXIgdXBkYXRlQ29tcG9uZW50O1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcbiAgICB1cGRhdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbmFtZSA9IHZtLl9uYW1lO1xuICAgICAgdmFyIGlkID0gdm0uX3VpZDtcbiAgICAgIHZhciBzdGFydFRhZyA9IFwidnVlLXBlcmYtc3RhcnQ6XCIgKyBpZDtcbiAgICAgIHZhciBlbmRUYWcgPSBcInZ1ZS1wZXJmLWVuZDpcIiArIGlkO1xuXG4gICAgICBtYXJrKHN0YXJ0VGFnKTtcbiAgICAgIHZhciB2bm9kZSA9IHZtLl9yZW5kZXIoKTtcbiAgICAgIG1hcmsoZW5kVGFnKTtcbiAgICAgIG1lYXN1cmUoKFwidnVlIFwiICsgbmFtZSArIFwiIHJlbmRlclwiKSwgc3RhcnRUYWcsIGVuZFRhZyk7XG5cbiAgICAgIG1hcmsoc3RhcnRUYWcpO1xuICAgICAgdm0uX3VwZGF0ZSh2bm9kZSwgaHlkcmF0aW5nKTtcbiAgICAgIG1hcmsoZW5kVGFnKTtcbiAgICAgIG1lYXN1cmUoKFwidnVlIFwiICsgbmFtZSArIFwiIHBhdGNoXCIpLCBzdGFydFRhZywgZW5kVGFnKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHVwZGF0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLl91cGRhdGUodm0uX3JlbmRlcigpLCBoeWRyYXRpbmcpO1xuICAgIH07XG4gIH1cblxuICAvLyB3ZSBzZXQgdGhpcyB0byB2bS5fd2F0Y2hlciBpbnNpZGUgdGhlIHdhdGNoZXIncyBjb25zdHJ1Y3RvclxuICAvLyBzaW5jZSB0aGUgd2F0Y2hlcidzIGluaXRpYWwgcGF0Y2ggbWF5IGNhbGwgJGZvcmNlVXBkYXRlIChlLmcuIGluc2lkZSBjaGlsZFxuICAvLyBjb21wb25lbnQncyBtb3VudGVkIGhvb2spLCB3aGljaCByZWxpZXMgb24gdm0uX3dhdGNoZXIgYmVpbmcgYWxyZWFkeSBkZWZpbmVkXG4gIG5ldyBXYXRjaGVyKHZtLCB1cGRhdGVDb21wb25lbnQsIG5vb3AsIG51bGwsIHRydWUgLyogaXNSZW5kZXJXYXRjaGVyICovKTtcbiAgaHlkcmF0aW5nID0gZmFsc2U7XG5cbiAgLy8gbWFudWFsbHkgbW91bnRlZCBpbnN0YW5jZSwgY2FsbCBtb3VudGVkIG9uIHNlbGZcbiAgLy8gbW91bnRlZCBpcyBjYWxsZWQgZm9yIHJlbmRlci1jcmVhdGVkIGNoaWxkIGNvbXBvbmVudHMgaW4gaXRzIGluc2VydGVkIGhvb2tcbiAgaWYgKHZtLiR2bm9kZSA9PSBudWxsKSB7XG4gICAgdm0uX2lzTW91bnRlZCA9IHRydWU7XG4gICAgY2FsbEhvb2sodm0sICdtb3VudGVkJyk7XG4gIH1cbiAgcmV0dXJuIHZtXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNoaWxkQ29tcG9uZW50IChcbiAgdm0sXG4gIHByb3BzRGF0YSxcbiAgbGlzdGVuZXJzLFxuICBwYXJlbnRWbm9kZSxcbiAgcmVuZGVyQ2hpbGRyZW5cbikge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IHRydWU7XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgd2hldGhlciBjb21wb25lbnQgaGFzIHNsb3QgY2hpbGRyZW5cbiAgLy8gd2UgbmVlZCB0byBkbyB0aGlzIGJlZm9yZSBvdmVyd3JpdGluZyAkb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW5cbiAgdmFyIGhhc0NoaWxkcmVuID0gISEoXG4gICAgcmVuZGVyQ2hpbGRyZW4gfHwgICAgICAgICAgICAgICAvLyBoYXMgbmV3IHN0YXRpYyBzbG90c1xuICAgIHZtLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiB8fCAgLy8gaGFzIG9sZCBzdGF0aWMgc2xvdHNcbiAgICBwYXJlbnRWbm9kZS5kYXRhLnNjb3BlZFNsb3RzIHx8IC8vIGhhcyBuZXcgc2NvcGVkIHNsb3RzXG4gICAgdm0uJHNjb3BlZFNsb3RzICE9PSBlbXB0eU9iamVjdCAvLyBoYXMgb2xkIHNjb3BlZCBzbG90c1xuICApO1xuXG4gIHZtLiRvcHRpb25zLl9wYXJlbnRWbm9kZSA9IHBhcmVudFZub2RlO1xuICB2bS4kdm5vZGUgPSBwYXJlbnRWbm9kZTsgLy8gdXBkYXRlIHZtJ3MgcGxhY2Vob2xkZXIgbm9kZSB3aXRob3V0IHJlLXJlbmRlclxuXG4gIGlmICh2bS5fdm5vZGUpIHsgLy8gdXBkYXRlIGNoaWxkIHRyZWUncyBwYXJlbnRcbiAgICB2bS5fdm5vZGUucGFyZW50ID0gcGFyZW50Vm5vZGU7XG4gIH1cbiAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuID0gcmVuZGVyQ2hpbGRyZW47XG5cbiAgLy8gdXBkYXRlICRhdHRycyBhbmQgJGxpc3RlbmVycyBoYXNoXG4gIC8vIHRoZXNlIGFyZSBhbHNvIHJlYWN0aXZlIHNvIHRoZXkgbWF5IHRyaWdnZXIgY2hpbGQgdXBkYXRlIGlmIHRoZSBjaGlsZFxuICAvLyB1c2VkIHRoZW0gZHVyaW5nIHJlbmRlclxuICB2bS4kYXR0cnMgPSBwYXJlbnRWbm9kZS5kYXRhLmF0dHJzIHx8IGVtcHR5T2JqZWN0O1xuICB2bS4kbGlzdGVuZXJzID0gbGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0O1xuXG4gIC8vIHVwZGF0ZSBwcm9wc1xuICBpZiAocHJvcHNEYXRhICYmIHZtLiRvcHRpb25zLnByb3BzKSB7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTtcbiAgICB2YXIgcHJvcHMgPSB2bS5fcHJvcHM7XG4gICAgdmFyIHByb3BLZXlzID0gdm0uJG9wdGlvbnMuX3Byb3BLZXlzIHx8IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBwcm9wS2V5c1tpXTtcbiAgICAgIHZhciBwcm9wT3B0aW9ucyA9IHZtLiRvcHRpb25zLnByb3BzOyAvLyB3dGYgZmxvdz9cbiAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhLCB2bSk7XG4gICAgfVxuICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcbiAgICAvLyBrZWVwIGEgY29weSBvZiByYXcgcHJvcHNEYXRhXG4gICAgdm0uJG9wdGlvbnMucHJvcHNEYXRhID0gcHJvcHNEYXRhO1xuICB9XG5cbiAgLy8gdXBkYXRlIGxpc3RlbmVyc1xuICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3Q7XG4gIHZhciBvbGRMaXN0ZW5lcnMgPSB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuICB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuICB1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnModm0sIGxpc3RlbmVycywgb2xkTGlzdGVuZXJzKTtcblxuICAvLyByZXNvbHZlIHNsb3RzICsgZm9yY2UgdXBkYXRlIGlmIGhhcyBjaGlsZHJlblxuICBpZiAoaGFzQ2hpbGRyZW4pIHtcbiAgICB2bS4kc2xvdHMgPSByZXNvbHZlU2xvdHMocmVuZGVyQ2hpbGRyZW4sIHBhcmVudFZub2RlLmNvbnRleHQpO1xuICAgIHZtLiRmb3JjZVVwZGF0ZSgpO1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0luSW5hY3RpdmVUcmVlICh2bSkge1xuICB3aGlsZSAodm0gJiYgKHZtID0gdm0uJHBhcmVudCkpIHtcbiAgICBpZiAodm0uX2luYWN0aXZlKSB7IHJldHVybiB0cnVlIH1cbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gYWN0aXZhdGVDaGlsZENvbXBvbmVudCAodm0sIGRpcmVjdCkge1xuICBpZiAoZGlyZWN0KSB7XG4gICAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7XG4gICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gIH0gZWxzZSBpZiAodm0uX2RpcmVjdEluYWN0aXZlKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKHZtLl9pbmFjdGl2ZSB8fCB2bS5faW5hY3RpdmUgPT09IG51bGwpIHtcbiAgICB2bS5faW5hY3RpdmUgPSBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLiRjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO1xuICAgIH1cbiAgICBjYWxsSG9vayh2bSwgJ2FjdGl2YXRlZCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCAodm0sIGRpcmVjdCkge1xuICBpZiAoZGlyZWN0KSB7XG4gICAgdm0uX2RpcmVjdEluYWN0aXZlID0gdHJ1ZTtcbiAgICBpZiAoaXNJbkluYWN0aXZlVHJlZSh2bSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICBpZiAoIXZtLl9pbmFjdGl2ZSkge1xuICAgIHZtLl9pbmFjdGl2ZSA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS4kY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO1xuICAgIH1cbiAgICBjYWxsSG9vayh2bSwgJ2RlYWN0aXZhdGVkJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsbEhvb2sgKHZtLCBob29rKSB7XG4gIC8vICM3NTczIGRpc2FibGUgZGVwIGNvbGxlY3Rpb24gd2hlbiBpbnZva2luZyBsaWZlY3ljbGUgaG9va3NcbiAgcHVzaFRhcmdldCgpO1xuICB2YXIgaGFuZGxlcnMgPSB2bS4kb3B0aW9uc1tob29rXTtcbiAgaWYgKGhhbmRsZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodm0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKGhvb2sgKyBcIiBob29rXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKHZtLl9oYXNIb29rRXZlbnQpIHtcbiAgICB2bS4kZW1pdCgnaG9vazonICsgaG9vayk7XG4gIH1cbiAgcG9wVGFyZ2V0KCk7XG59XG5cbi8qICAqL1xuXG5cbnZhciBNQVhfVVBEQVRFX0NPVU5UID0gMTAwO1xuXG52YXIgcXVldWUgPSBbXTtcbnZhciBhY3RpdmF0ZWRDaGlsZHJlbiA9IFtdO1xudmFyIGhhcyA9IHt9O1xudmFyIGNpcmN1bGFyID0ge307XG52YXIgd2FpdGluZyA9IGZhbHNlO1xudmFyIGZsdXNoaW5nID0gZmFsc2U7XG52YXIgaW5kZXggPSAwO1xuXG4vKipcbiAqIFJlc2V0IHRoZSBzY2hlZHVsZXIncyBzdGF0ZS5cbiAqL1xuZnVuY3Rpb24gcmVzZXRTY2hlZHVsZXJTdGF0ZSAoKSB7XG4gIGluZGV4ID0gcXVldWUubGVuZ3RoID0gYWN0aXZhdGVkQ2hpbGRyZW4ubGVuZ3RoID0gMDtcbiAgaGFzID0ge307XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgY2lyY3VsYXIgPSB7fTtcbiAgfVxuICB3YWl0aW5nID0gZmx1c2hpbmcgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cbiAqL1xuZnVuY3Rpb24gZmx1c2hTY2hlZHVsZXJRdWV1ZSAoKSB7XG4gIGZsdXNoaW5nID0gdHJ1ZTtcbiAgdmFyIHdhdGNoZXIsIGlkO1xuXG4gIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLlxuICAvLyBUaGlzIGVuc3VyZXMgdGhhdDpcbiAgLy8gMS4gQ29tcG9uZW50cyBhcmUgdXBkYXRlZCBmcm9tIHBhcmVudCB0byBjaGlsZC4gKGJlY2F1c2UgcGFyZW50IGlzIGFsd2F5c1xuICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQpXG4gIC8vIDIuIEEgY29tcG9uZW50J3MgdXNlciB3YXRjaGVycyBhcmUgcnVuIGJlZm9yZSBpdHMgcmVuZGVyIHdhdGNoZXIgKGJlY2F1c2VcbiAgLy8gICAgdXNlciB3YXRjaGVycyBhcmUgY3JlYXRlZCBiZWZvcmUgdGhlIHJlbmRlciB3YXRjaGVyKVxuICAvLyAzLiBJZiBhIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQgZHVyaW5nIGEgcGFyZW50IGNvbXBvbmVudCdzIHdhdGNoZXIgcnVuLFxuICAvLyAgICBpdHMgd2F0Y2hlcnMgY2FuIGJlIHNraXBwZWQuXG4gIHF1ZXVlLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuaWQgLSBiLmlkOyB9KTtcblxuICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcbiAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG4gIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHF1ZXVlLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIHdhdGNoZXIgPSBxdWV1ZVtpbmRleF07XG4gICAgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGhhc1tpZF0gPSBudWxsO1xuICAgIHdhdGNoZXIucnVuKCk7XG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICBpZiAoY2lyY3VsYXJbaWRdID4gTUFYX1VQREFURV9DT1VOVCkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgICdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgJyArIChcbiAgICAgICAgICAgIHdhdGNoZXIudXNlclxuICAgICAgICAgICAgICA/IChcImluIHdhdGNoZXIgd2l0aCBleHByZXNzaW9uIFxcXCJcIiArICh3YXRjaGVyLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpXG4gICAgICAgICAgICAgIDogXCJpbiBhIGNvbXBvbmVudCByZW5kZXIgZnVuY3Rpb24uXCJcbiAgICAgICAgICApLFxuICAgICAgICAgIHdhdGNoZXIudm1cbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBrZWVwIGNvcGllcyBvZiBwb3N0IHF1ZXVlcyBiZWZvcmUgcmVzZXR0aW5nIHN0YXRlXG4gIHZhciBhY3RpdmF0ZWRRdWV1ZSA9IGFjdGl2YXRlZENoaWxkcmVuLnNsaWNlKCk7XG4gIHZhciB1cGRhdGVkUXVldWUgPSBxdWV1ZS5zbGljZSgpO1xuXG4gIHJlc2V0U2NoZWR1bGVyU3RhdGUoKTtcblxuICAvLyBjYWxsIGNvbXBvbmVudCB1cGRhdGVkIGFuZCBhY3RpdmF0ZWQgaG9va3NcbiAgY2FsbEFjdGl2YXRlZEhvb2tzKGFjdGl2YXRlZFF1ZXVlKTtcbiAgY2FsbFVwZGF0ZWRIb29rcyh1cGRhdGVkUXVldWUpO1xuXG4gIC8vIGRldnRvb2wgaG9va1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsbFVwZGF0ZWRIb29rcyAocXVldWUpIHtcbiAgdmFyIGkgPSBxdWV1ZS5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuICAgIHZhciB2bSA9IHdhdGNoZXIudm07XG4gICAgaWYgKHZtLl93YXRjaGVyID09PSB3YXRjaGVyICYmIHZtLl9pc01vdW50ZWQpIHtcbiAgICAgIGNhbGxIb29rKHZtLCAndXBkYXRlZCcpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFF1ZXVlIGEga2VwdC1hbGl2ZSBjb21wb25lbnQgdGhhdCB3YXMgYWN0aXZhdGVkIGR1cmluZyBwYXRjaC5cbiAqIFRoZSBxdWV1ZSB3aWxsIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgZW50aXJlIHRyZWUgaGFzIGJlZW4gcGF0Y2hlZC5cbiAqL1xuZnVuY3Rpb24gcXVldWVBY3RpdmF0ZWRDb21wb25lbnQgKHZtKSB7XG4gIC8vIHNldHRpbmcgX2luYWN0aXZlIHRvIGZhbHNlIGhlcmUgc28gdGhhdCBhIHJlbmRlciBmdW5jdGlvbiBjYW5cbiAgLy8gcmVseSBvbiBjaGVja2luZyB3aGV0aGVyIGl0J3MgaW4gYW4gaW5hY3RpdmUgdHJlZSAoZS5nLiByb3V0ZXItdmlldylcbiAgdm0uX2luYWN0aXZlID0gZmFsc2U7XG4gIGFjdGl2YXRlZENoaWxkcmVuLnB1c2godm0pO1xufVxuXG5mdW5jdGlvbiBjYWxsQWN0aXZhdGVkSG9va3MgKHF1ZXVlKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICBxdWV1ZVtpXS5faW5hY3RpdmUgPSB0cnVlO1xuICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQocXVldWVbaV0sIHRydWUgLyogdHJ1ZSAqLyk7XG4gIH1cbn1cblxuLyoqXG4gKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG4gKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cbiAqL1xuZnVuY3Rpb24gcXVldWVXYXRjaGVyICh3YXRjaGVyKSB7XG4gIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICBoYXNbaWRdID0gdHJ1ZTtcbiAgICBpZiAoIWZsdXNoaW5nKSB7XG4gICAgICBxdWV1ZS5wdXNoKHdhdGNoZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiBhbHJlYWR5IGZsdXNoaW5nLCBzcGxpY2UgdGhlIHdhdGNoZXIgYmFzZWQgb24gaXRzIGlkXG4gICAgICAvLyBpZiBhbHJlYWR5IHBhc3QgaXRzIGlkLCBpdCB3aWxsIGJlIHJ1biBuZXh0IGltbWVkaWF0ZWx5LlxuICAgICAgdmFyIGkgPSBxdWV1ZS5sZW5ndGggLSAxO1xuICAgICAgd2hpbGUgKGkgPiBpbmRleCAmJiBxdWV1ZVtpXS5pZCA+IHdhdGNoZXIuaWQpIHtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgICAgcXVldWUuc3BsaWNlKGkgKyAxLCAwLCB3YXRjaGVyKTtcbiAgICB9XG4gICAgLy8gcXVldWUgdGhlIGZsdXNoXG4gICAgaWYgKCF3YWl0aW5nKSB7XG4gICAgICB3YWl0aW5nID0gdHJ1ZTtcbiAgICAgIG5leHRUaWNrKGZsdXNoU2NoZWR1bGVyUXVldWUpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxudmFyIHVpZCQxID0gMDtcblxuLyoqXG4gKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcbiAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cbiAqL1xudmFyIFdhdGNoZXIgPSBmdW5jdGlvbiBXYXRjaGVyIChcbiAgdm0sXG4gIGV4cE9yRm4sXG4gIGNiLFxuICBvcHRpb25zLFxuICBpc1JlbmRlcldhdGNoZXJcbikge1xuICB0aGlzLnZtID0gdm07XG4gIGlmIChpc1JlbmRlcldhdGNoZXIpIHtcbiAgICB2bS5fd2F0Y2hlciA9IHRoaXM7XG4gIH1cbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gIC8vIG9wdGlvbnNcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRlZXAgPSAhIW9wdGlvbnMuZGVlcDtcbiAgICB0aGlzLnVzZXIgPSAhIW9wdGlvbnMudXNlcjtcbiAgICB0aGlzLmxhenkgPSAhIW9wdGlvbnMubGF6eTtcbiAgICB0aGlzLnN5bmMgPSAhIW9wdGlvbnMuc3luYztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmRlZXAgPSB0aGlzLnVzZXIgPSB0aGlzLmxhenkgPSB0aGlzLnN5bmMgPSBmYWxzZTtcbiAgfVxuICB0aGlzLmNiID0gY2I7XG4gIHRoaXMuaWQgPSArK3VpZCQxOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG4gIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcbiAgdGhpcy5kZXBzID0gW107XG4gIHRoaXMubmV3RGVwcyA9IFtdO1xuICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5leHByZXNzaW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJ1xuICAgID8gZXhwT3JGbi50b1N0cmluZygpXG4gICAgOiAnJztcbiAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyXG4gIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmdldHRlciA9IHBhcnNlUGF0aChleHBPckZuKTtcbiAgICBpZiAoIXRoaXMuZ2V0dGVyKSB7XG4gICAgICB0aGlzLmdldHRlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICBcIkZhaWxlZCB3YXRjaGluZyBwYXRoOiBcXFwiXCIgKyBleHBPckZuICsgXCJcXFwiIFwiICtcbiAgICAgICAgJ1dhdGNoZXIgb25seSBhY2NlcHRzIHNpbXBsZSBkb3QtZGVsaW1pdGVkIHBhdGhzLiAnICtcbiAgICAgICAgJ0ZvciBmdWxsIGNvbnRyb2wsIHVzZSBhIGZ1bmN0aW9uIGluc3RlYWQuJyxcbiAgICAgICAgdm1cbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenlcbiAgICA/IHVuZGVmaW5lZFxuICAgIDogdGhpcy5nZXQoKTtcbn07XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuICovXG5XYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKCkge1xuICBwdXNoVGFyZ2V0KHRoaXMpO1xuICB2YXIgdmFsdWU7XG4gIHZhciB2bSA9IHRoaXMudm07XG4gIHRyeSB7XG4gICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHZtLCB2bSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAodGhpcy51c2VyKSB7XG4gICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKFwiZ2V0dGVyIGZvciB3YXRjaGVyIFxcXCJcIiArICh0aGlzLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcbiAgICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcbiAgICBpZiAodGhpcy5kZWVwKSB7XG4gICAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gICAgfVxuICAgIHBvcFRhcmdldCgpO1xuICAgIHRoaXMuY2xlYW51cERlcHMoKTtcbiAgfVxuICByZXR1cm4gdmFsdWVcbn07XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gYWRkRGVwIChkZXApIHtcbiAgdmFyIGlkID0gZGVwLmlkO1xuICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcbiAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG4gICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG4gICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuICovXG5XYXRjaGVyLnByb3RvdHlwZS5jbGVhbnVwRGVwcyA9IGZ1bmN0aW9uIGNsZWFudXBEZXBzICgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgZGVwID0gdGhpcyQxLmRlcHNbaV07XG4gICAgaWYgKCF0aGlzJDEubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG4gICAgICBkZXAucmVtb3ZlU3ViKHRoaXMkMSk7XG4gICAgfVxuICB9XG4gIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcbiAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gIHRtcCA9IHRoaXMuZGVwcztcbiAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICh0aGlzLmxhenkpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgfSBlbHNlIGlmICh0aGlzLnN5bmMpIHtcbiAgICB0aGlzLnJ1bigpO1xuICB9IGVsc2Uge1xuICAgIHF1ZXVlV2F0Y2hlcih0aGlzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTY2hlZHVsZXIgam9iIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBzY2hlZHVsZXIuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIHJ1biAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gICAgaWYgKFxuICAgICAgdmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuICAgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuICAgICAgLy8gaGF2ZSBtdXRhdGVkLlxuICAgICAgaXNPYmplY3QodmFsdWUpIHx8XG4gICAgICB0aGlzLmRlZXBcbiAgICApIHtcbiAgICAgIC8vIHNldCBuZXcgdmFsdWVcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICBpZiAodGhpcy51c2VyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBoYW5kbGVFcnJvcihlLCB0aGlzLnZtLCAoXCJjYWxsYmFjayBmb3Igd2F0Y2hlciBcXFwiXCIgKyAodGhpcy5leHByZXNzaW9uKSArIFwiXFxcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG4gKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gZXZhbHVhdGUgKCkge1xuICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcbiAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB0aGlzJDEuZGVwc1tpXS5kZXBlbmQoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YnNjcmliZXIgbGlzdC5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiB0ZWFyZG93biAoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcbiAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgcmVtb3ZlKHRoaXMudm0uX3dhdGNoZXJzLCB0aGlzKTtcbiAgICB9XG4gICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMkMS5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzJDEpO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB9XG59O1xuXG4vKiAgKi9cblxudmFyIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbiA9IHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlLFxuICBnZXQ6IG5vb3AsXG4gIHNldDogbm9vcFxufTtcblxuZnVuY3Rpb24gcHJveHkgKHRhcmdldCwgc291cmNlS2V5LCBrZXkpIHtcbiAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IGZ1bmN0aW9uIHByb3h5R2V0dGVyICgpIHtcbiAgICByZXR1cm4gdGhpc1tzb3VyY2VLZXldW2tleV1cbiAgfTtcbiAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uIHByb3h5U2V0dGVyICh2YWwpIHtcbiAgICB0aGlzW3NvdXJjZUtleV1ba2V5XSA9IHZhbDtcbiAgfTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiBpbml0U3RhdGUgKHZtKSB7XG4gIHZtLl93YXRjaGVycyA9IFtdO1xuICB2YXIgb3B0cyA9IHZtLiRvcHRpb25zO1xuICBpZiAob3B0cy5wcm9wcykgeyBpbml0UHJvcHModm0sIG9wdHMucHJvcHMpOyB9XG4gIGlmIChvcHRzLm1ldGhvZHMpIHsgaW5pdE1ldGhvZHModm0sIG9wdHMubWV0aG9kcyk7IH1cbiAgaWYgKG9wdHMuZGF0YSkge1xuICAgIGluaXREYXRhKHZtKTtcbiAgfSBlbHNlIHtcbiAgICBvYnNlcnZlKHZtLl9kYXRhID0ge30sIHRydWUgLyogYXNSb290RGF0YSAqLyk7XG4gIH1cbiAgaWYgKG9wdHMuY29tcHV0ZWQpIHsgaW5pdENvbXB1dGVkKHZtLCBvcHRzLmNvbXB1dGVkKTsgfVxuICBpZiAob3B0cy53YXRjaCAmJiBvcHRzLndhdGNoICE9PSBuYXRpdmVXYXRjaCkge1xuICAgIGluaXRXYXRjaCh2bSwgb3B0cy53YXRjaCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdFByb3BzICh2bSwgcHJvcHNPcHRpb25zKSB7XG4gIHZhciBwcm9wc0RhdGEgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgfHwge307XG4gIHZhciBwcm9wcyA9IHZtLl9wcm9wcyA9IHt9O1xuICAvLyBjYWNoZSBwcm9wIGtleXMgc28gdGhhdCBmdXR1cmUgcHJvcHMgdXBkYXRlcyBjYW4gaXRlcmF0ZSB1c2luZyBBcnJheVxuICAvLyBpbnN0ZWFkIG9mIGR5bmFtaWMgb2JqZWN0IGtleSBlbnVtZXJhdGlvbi5cbiAgdmFyIGtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgPSBbXTtcbiAgdmFyIGlzUm9vdCA9ICF2bS4kcGFyZW50O1xuICAvLyByb290IGluc3RhbmNlIHByb3BzIHNob3VsZCBiZSBjb252ZXJ0ZWRcbiAgaWYgKCFpc1Jvb3QpIHtcbiAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuICB9XG4gIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7XG4gICAga2V5cy5wdXNoKGtleSk7XG4gICAgdmFyIHZhbHVlID0gdmFsaWRhdGVQcm9wKGtleSwgcHJvcHNPcHRpb25zLCBwcm9wc0RhdGEsIHZtKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgaHlwaGVuYXRlZEtleSA9IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgaWYgKGlzUmVzZXJ2ZWRBdHRyaWJ1dGUoaHlwaGVuYXRlZEtleSkgfHxcbiAgICAgICAgICBjb25maWcuaXNSZXNlcnZlZEF0dHIoaHlwaGVuYXRlZEtleSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAoXCJcXFwiXCIgKyBoeXBoZW5hdGVkS2V5ICsgXCJcXFwiIGlzIGEgcmVzZXJ2ZWQgYXR0cmlidXRlIGFuZCBjYW5ub3QgYmUgdXNlZCBhcyBjb21wb25lbnQgcHJvcC5cIiksXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGRlZmluZVJlYWN0aXZlKHByb3BzLCBrZXksIHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS4kcGFyZW50ICYmICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQpIHtcbiAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgXCJBdm9pZCBtdXRhdGluZyBhIHByb3AgZGlyZWN0bHkgc2luY2UgdGhlIHZhbHVlIHdpbGwgYmUgXCIgK1xuICAgICAgICAgICAgXCJvdmVyd3JpdHRlbiB3aGVuZXZlciB0aGUgcGFyZW50IGNvbXBvbmVudCByZS1yZW5kZXJzLiBcIiArXG4gICAgICAgICAgICBcIkluc3RlYWQsIHVzZSBhIGRhdGEgb3IgY29tcHV0ZWQgcHJvcGVydHkgYmFzZWQgb24gdGhlIHByb3AncyBcIiArXG4gICAgICAgICAgICBcInZhbHVlLiBQcm9wIGJlaW5nIG11dGF0ZWQ6IFxcXCJcIiArIGtleSArIFwiXFxcIlwiLFxuICAgICAgICAgICAgdm1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmaW5lUmVhY3RpdmUocHJvcHMsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICAvLyBzdGF0aWMgcHJvcHMgYXJlIGFscmVhZHkgcHJveGllZCBvbiB0aGUgY29tcG9uZW50J3MgcHJvdG90eXBlXG4gICAgLy8gZHVyaW5nIFZ1ZS5leHRlbmQoKS4gV2Ugb25seSBuZWVkIHRvIHByb3h5IHByb3BzIGRlZmluZWQgYXRcbiAgICAvLyBpbnN0YW50aWF0aW9uIGhlcmUuXG4gICAgaWYgKCEoa2V5IGluIHZtKSkge1xuICAgICAgcHJveHkodm0sIFwiX3Byb3BzXCIsIGtleSk7XG4gICAgfVxuICB9O1xuXG4gIGZvciAodmFyIGtleSBpbiBwcm9wc09wdGlvbnMpIGxvb3AoIGtleSApO1xuICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGluaXREYXRhICh2bSkge1xuICB2YXIgZGF0YSA9IHZtLiRvcHRpb25zLmRhdGE7XG4gIGRhdGEgPSB2bS5fZGF0YSA9IHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nXG4gICAgPyBnZXREYXRhKGRhdGEsIHZtKVxuICAgIDogZGF0YSB8fCB7fTtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgZGF0YSA9IHt9O1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdDpcXG4nICtcbiAgICAgICdodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9jb21wb25lbnRzLmh0bWwjZGF0YS1NdXN0LUJlLWEtRnVuY3Rpb24nLFxuICAgICAgdm1cbiAgICApO1xuICB9XG4gIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2VcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7XG4gIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAobWV0aG9kcyAmJiBoYXNPd24obWV0aG9kcywga2V5KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIChcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgZGF0YSBwcm9wZXJ0eS5cIiksXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywga2V5KSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICBcIlRoZSBkYXRhIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiBpcyBhbHJlYWR5IGRlY2xhcmVkIGFzIGEgcHJvcC4gXCIgK1xuICAgICAgICBcIlVzZSBwcm9wIGRlZmF1bHQgdmFsdWUgaW5zdGVhZC5cIixcbiAgICAgICAgdm1cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICBwcm94eSh2bSwgXCJfZGF0YVwiLCBrZXkpO1xuICAgIH1cbiAgfVxuICAvLyBvYnNlcnZlIGRhdGFcbiAgb2JzZXJ2ZShkYXRhLCB0cnVlIC8qIGFzUm9vdERhdGEgKi8pO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhIChkYXRhLCB2bSkge1xuICAvLyAjNzU3MyBkaXNhYmxlIGRlcCBjb2xsZWN0aW9uIHdoZW4gaW52b2tpbmcgZGF0YSBnZXR0ZXJzXG4gIHB1c2hUYXJnZXQoKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZGF0YS5jYWxsKHZtLCB2bSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIGhhbmRsZUVycm9yKGUsIHZtLCBcImRhdGEoKVwiKTtcbiAgICByZXR1cm4ge31cbiAgfSBmaW5hbGx5IHtcbiAgICBwb3BUYXJnZXQoKTtcbiAgfVxufVxuXG52YXIgY29tcHV0ZWRXYXRjaGVyT3B0aW9ucyA9IHsgbGF6eTogdHJ1ZSB9O1xuXG5mdW5jdGlvbiBpbml0Q29tcHV0ZWQgKHZtLCBjb21wdXRlZCkge1xuICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgdmFyIHdhdGNoZXJzID0gdm0uX2NvbXB1dGVkV2F0Y2hlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAvLyBjb21wdXRlZCBwcm9wZXJ0aWVzIGFyZSBqdXN0IGdldHRlcnMgZHVyaW5nIFNTUlxuICB2YXIgaXNTU1IgPSBpc1NlcnZlclJlbmRlcmluZygpO1xuXG4gIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcbiAgICB2YXIgZ2V0dGVyID0gdHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicgPyB1c2VyRGVmIDogdXNlckRlZi5nZXQ7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0dGVyID09IG51bGwpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIChcIkdldHRlciBpcyBtaXNzaW5nIGZvciBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuXCIpLFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzU1NSKSB7XG4gICAgICAvLyBjcmVhdGUgaW50ZXJuYWwgd2F0Y2hlciBmb3IgdGhlIGNvbXB1dGVkIHByb3BlcnR5LlxuICAgICAgd2F0Y2hlcnNba2V5XSA9IG5ldyBXYXRjaGVyKFxuICAgICAgICB2bSxcbiAgICAgICAgZ2V0dGVyIHx8IG5vb3AsXG4gICAgICAgIG5vb3AsXG4gICAgICAgIGNvbXB1dGVkV2F0Y2hlck9wdGlvbnNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gY29tcG9uZW50LWRlZmluZWQgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWxyZWFkeSBkZWZpbmVkIG9uIHRoZVxuICAgIC8vIGNvbXBvbmVudCBwcm90b3R5cGUuIFdlIG9ubHkgbmVlZCB0byBkZWZpbmUgY29tcHV0ZWQgcHJvcGVydGllcyBkZWZpbmVkXG4gICAgLy8gYXQgaW5zdGFudGlhdGlvbiBoZXJlLlxuICAgIGlmICghKGtleSBpbiB2bSkpIHtcbiAgICAgIGRlZmluZUNvbXB1dGVkKHZtLCBrZXksIHVzZXJEZWYpO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKGtleSBpbiB2bS4kZGF0YSkge1xuICAgICAgICB3YXJuKChcIlRoZSBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgYWxyZWFkeSBkZWZpbmVkIGluIGRhdGEuXCIpLCB2bSk7XG4gICAgICB9IGVsc2UgaWYgKHZtLiRvcHRpb25zLnByb3BzICYmIGtleSBpbiB2bS4kb3B0aW9ucy5wcm9wcykge1xuICAgICAgICB3YXJuKChcIlRoZSBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcC5cIiksIHZtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmaW5lQ29tcHV0ZWQgKFxuICB0YXJnZXQsXG4gIGtleSxcbiAgdXNlckRlZlxuKSB7XG4gIHZhciBzaG91bGRDYWNoZSA9ICFpc1NlcnZlclJlbmRlcmluZygpO1xuICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gc2hvdWxkQ2FjaGVcbiAgICAgID8gY3JlYXRlQ29tcHV0ZWRHZXR0ZXIoa2V5KVxuICAgICAgOiB1c2VyRGVmO1xuICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBub29wO1xuICB9IGVsc2Uge1xuICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSB1c2VyRGVmLmdldFxuICAgICAgPyBzaG91bGRDYWNoZSAmJiB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZVxuICAgICAgICA/IGNyZWF0ZUNvbXB1dGVkR2V0dGVyKGtleSlcbiAgICAgICAgOiB1c2VyRGVmLmdldFxuICAgICAgOiBub29wO1xuICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSB1c2VyRGVmLnNldFxuICAgICAgPyB1c2VyRGVmLnNldFxuICAgICAgOiBub29wO1xuICB9XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID09PSBub29wKSB7XG4gICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIChcIkNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiB3YXMgYXNzaWduZWQgdG8gYnV0IGl0IGhhcyBubyBzZXR0ZXIuXCIpLFxuICAgICAgICB0aGlzXG4gICAgICApO1xuICAgIH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wdXRlZEdldHRlciAoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlciAoKSB7XG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl9jb21wdXRlZFdhdGNoZXJzICYmIHRoaXMuX2NvbXB1dGVkV2F0Y2hlcnNba2V5XTtcbiAgICBpZiAod2F0Y2hlcikge1xuICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcbiAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRNZXRob2RzICh2bSwgbWV0aG9kcykge1xuICB2YXIgcHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wcztcbiAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKG1ldGhvZHNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgaW4gdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uLiBcIiArXG4gICAgICAgICAgXCJEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P1wiLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAocHJvcHMgJiYgaGFzT3duKHByb3BzLCBrZXkpKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgKFwiTWV0aG9kIFxcXCJcIiArIGtleSArIFwiXFxcIiBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQgYXMgYSBwcm9wLlwiKSxcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKChrZXkgaW4gdm0pICYmIGlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwiTWV0aG9kIFxcXCJcIiArIGtleSArIFwiXFxcIiBjb25mbGljdHMgd2l0aCBhbiBleGlzdGluZyBWdWUgaW5zdGFuY2UgbWV0aG9kLiBcIiArXG4gICAgICAgICAgXCJBdm9pZCBkZWZpbmluZyBjb21wb25lbnQgbWV0aG9kcyB0aGF0IHN0YXJ0IHdpdGggXyBvciAkLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHZtW2tleV0gPSBtZXRob2RzW2tleV0gPT0gbnVsbCA/IG5vb3AgOiBiaW5kKG1ldGhvZHNba2V5XSwgdm0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRXYXRjaCAodm0sIHdhdGNoKSB7XG4gIGZvciAodmFyIGtleSBpbiB3YXRjaCkge1xuICAgIHZhciBoYW5kbGVyID0gd2F0Y2hba2V5XTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVyKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNyZWF0ZVdhdGNoZXIodm0sIGtleSwgaGFuZGxlcltpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNyZWF0ZVdhdGNoZXIodm0sIGtleSwgaGFuZGxlcik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVdhdGNoZXIgKFxuICB2bSxcbiAgZXhwT3JGbixcbiAgaGFuZGxlcixcbiAgb3B0aW9uc1xuKSB7XG4gIGlmIChpc1BsYWluT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgb3B0aW9ucyA9IGhhbmRsZXI7XG4gICAgaGFuZGxlciA9IGhhbmRsZXIuaGFuZGxlcjtcbiAgfVxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgaGFuZGxlciA9IHZtW2hhbmRsZXJdO1xuICB9XG4gIHJldHVybiB2bS4kd2F0Y2goZXhwT3JGbiwgaGFuZGxlciwgb3B0aW9ucylcbn1cblxuZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG4gIC8vIGZsb3cgc29tZWhvdyBoYXMgcHJvYmxlbXMgd2l0aCBkaXJlY3RseSBkZWNsYXJlZCBkZWZpbml0aW9uIG9iamVjdFxuICAvLyB3aGVuIHVzaW5nIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgc28gd2UgaGF2ZSB0byBwcm9jZWR1cmFsbHkgYnVpbGQgdXBcbiAgLy8gdGhlIG9iamVjdCBoZXJlLlxuICB2YXIgZGF0YURlZiA9IHt9O1xuICBkYXRhRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2RhdGEgfTtcbiAgdmFyIHByb3BzRGVmID0ge307XG4gIHByb3BzRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX3Byb3BzIH07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgZGF0YURlZi5zZXQgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgICAgd2FybihcbiAgICAgICAgJ0F2b2lkIHJlcGxhY2luZyBpbnN0YW5jZSByb290ICRkYXRhLiAnICtcbiAgICAgICAgJ1VzZSBuZXN0ZWQgZGF0YSBwcm9wZXJ0aWVzIGluc3RlYWQuJyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICB9O1xuICAgIHByb3BzRGVmLnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdhcm4oXCIkcHJvcHMgaXMgcmVhZG9ubHkuXCIsIHRoaXMpO1xuICAgIH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIGRhdGFEZWYpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRwcm9wcycsIHByb3BzRGVmKTtcblxuICBWdWUucHJvdG90eXBlLiRzZXQgPSBzZXQ7XG4gIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGRlbDtcblxuICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChcbiAgICBleHBPckZuLFxuICAgIGNiLFxuICAgIG9wdGlvbnNcbiAgKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAoaXNQbGFpbk9iamVjdChjYikpIHtcbiAgICAgIHJldHVybiBjcmVhdGVXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucylcbiAgICB9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgb3B0aW9ucy51c2VyID0gdHJ1ZTtcbiAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbiAoKSB7XG4gICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9O1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdFByb3ZpZGUgKHZtKSB7XG4gIHZhciBwcm92aWRlID0gdm0uJG9wdGlvbnMucHJvdmlkZTtcbiAgaWYgKHByb3ZpZGUpIHtcbiAgICB2bS5fcHJvdmlkZWQgPSB0eXBlb2YgcHJvdmlkZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyBwcm92aWRlLmNhbGwodm0pXG4gICAgICA6IHByb3ZpZGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdEluamVjdGlvbnMgKHZtKSB7XG4gIHZhciByZXN1bHQgPSByZXNvbHZlSW5qZWN0KHZtLiRvcHRpb25zLmluamVjdCwgdm0pO1xuICBpZiAocmVzdWx0KSB7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTtcbiAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKHZtLCBrZXksIHJlc3VsdFtrZXldLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2FybihcbiAgICAgICAgICAgIFwiQXZvaWQgbXV0YXRpbmcgYW4gaW5qZWN0ZWQgdmFsdWUgZGlyZWN0bHkgc2luY2UgdGhlIGNoYW5nZXMgd2lsbCBiZSBcIiArXG4gICAgICAgICAgICBcIm92ZXJ3cml0dGVuIHdoZW5ldmVyIHRoZSBwcm92aWRlZCBjb21wb25lbnQgcmUtcmVuZGVycy4gXCIgK1xuICAgICAgICAgICAgXCJpbmplY3Rpb24gYmVpbmcgbXV0YXRlZDogXFxcIlwiICsga2V5ICsgXCJcXFwiXCIsXG4gICAgICAgICAgICB2bVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUodm0sIGtleSwgcmVzdWx0W2tleV0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlSW5qZWN0IChpbmplY3QsIHZtKSB7XG4gIGlmIChpbmplY3QpIHtcbiAgICAvLyBpbmplY3QgaXMgOmFueSBiZWNhdXNlIGZsb3cgaXMgbm90IHNtYXJ0IGVub3VnaCB0byBmaWd1cmUgb3V0IGNhY2hlZFxuICAgIHZhciByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBrZXlzID0gaGFzU3ltYm9sXG4gICAgICA/IFJlZmxlY3Qub3duS2V5cyhpbmplY3QpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGluamVjdCwga2V5KS5lbnVtZXJhYmxlXG4gICAgICB9KVxuICAgICAgOiBPYmplY3Qua2V5cyhpbmplY3QpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciBwcm92aWRlS2V5ID0gaW5qZWN0W2tleV0uZnJvbTtcbiAgICAgIHZhciBzb3VyY2UgPSB2bTtcbiAgICAgIHdoaWxlIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5fcHJvdmlkZWQgJiYgaGFzT3duKHNvdXJjZS5fcHJvdmlkZWQsIHByb3ZpZGVLZXkpKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2UuX3Byb3ZpZGVkW3Byb3ZpZGVLZXldO1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgc291cmNlID0gc291cmNlLiRwYXJlbnQ7XG4gICAgICB9XG4gICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIGluamVjdFtrZXldKSB7XG4gICAgICAgICAgdmFyIHByb3ZpZGVEZWZhdWx0ID0gaW5qZWN0W2tleV0uZGVmYXVsdDtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHR5cGVvZiBwcm92aWRlRGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgPyBwcm92aWRlRGVmYXVsdC5jYWxsKHZtKVxuICAgICAgICAgICAgOiBwcm92aWRlRGVmYXVsdDtcbiAgICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgd2FybigoXCJJbmplY3Rpb24gXFxcIlwiICsga2V5ICsgXCJcXFwiIG5vdCBmb3VuZFwiKSwgdm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIHYtZm9yIGxpc3RzLlxuICovXG5mdW5jdGlvbiByZW5kZXJMaXN0IChcbiAgdmFsLFxuICByZW5kZXJcbikge1xuICB2YXIgcmV0LCBpLCBsLCBrZXlzLCBrZXk7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkgfHwgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXQgPSBuZXcgQXJyYXkodmFsLmxlbmd0aCk7XG4gICAgZm9yIChpID0gMCwgbCA9IHZhbC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHJldFtpXSA9IHJlbmRlcih2YWxbaV0sIGkpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHJldCA9IG5ldyBBcnJheSh2YWwpO1xuICAgIGZvciAoaSA9IDA7IGkgPCB2YWw7IGkrKykge1xuICAgICAgcmV0W2ldID0gcmVuZGVyKGkgKyAxLCBpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XG4gICAgZm9yIChpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgcmV0W2ldID0gcmVuZGVyKHZhbFtrZXldLCBrZXksIGkpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNEZWYocmV0KSkge1xuICAgIChyZXQpLl9pc1ZMaXN0ID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbi8qICAqL1xuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgPHNsb3Q+XG4gKi9cbmZ1bmN0aW9uIHJlbmRlclNsb3QgKFxuICBuYW1lLFxuICBmYWxsYmFjayxcbiAgcHJvcHMsXG4gIGJpbmRPYmplY3Rcbikge1xuICB2YXIgc2NvcGVkU2xvdEZuID0gdGhpcy4kc2NvcGVkU2xvdHNbbmFtZV07XG4gIHZhciBub2RlcztcbiAgaWYgKHNjb3BlZFNsb3RGbikgeyAvLyBzY29wZWQgc2xvdFxuICAgIHByb3BzID0gcHJvcHMgfHwge307XG4gICAgaWYgKGJpbmRPYmplY3QpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc09iamVjdChiaW5kT2JqZWN0KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgICdzbG90IHYtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0JyxcbiAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBwcm9wcyA9IGV4dGVuZChleHRlbmQoe30sIGJpbmRPYmplY3QpLCBwcm9wcyk7XG4gICAgfVxuICAgIG5vZGVzID0gc2NvcGVkU2xvdEZuKHByb3BzKSB8fCBmYWxsYmFjaztcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xvdE5vZGVzID0gdGhpcy4kc2xvdHNbbmFtZV07XG4gICAgLy8gd2FybiBkdXBsaWNhdGUgc2xvdCB1c2FnZVxuICAgIGlmIChzbG90Tm9kZXMpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHNsb3ROb2Rlcy5fcmVuZGVyZWQpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcIkR1cGxpY2F0ZSBwcmVzZW5jZSBvZiBzbG90IFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgZm91bmQgaW4gdGhlIHNhbWUgcmVuZGVyIHRyZWUgXCIgK1xuICAgICAgICAgIFwiLSB0aGlzIHdpbGwgbGlrZWx5IGNhdXNlIHJlbmRlciBlcnJvcnMuXCIsXG4gICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgc2xvdE5vZGVzLl9yZW5kZXJlZCA9IHRydWU7XG4gICAgfVxuICAgIG5vZGVzID0gc2xvdE5vZGVzIHx8IGZhbGxiYWNrO1xuICB9XG5cbiAgdmFyIHRhcmdldCA9IHByb3BzICYmIHByb3BzLnNsb3Q7XG4gIGlmICh0YXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7IHNsb3Q6IHRhcmdldCB9LCBub2RlcylcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbm9kZXNcbiAgfVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIGZpbHRlcnNcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUZpbHRlciAoaWQpIHtcbiAgcmV0dXJuIHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGlkLCB0cnVlKSB8fCBpZGVudGl0eVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaXNLZXlOb3RNYXRjaCAoZXhwZWN0LCBhY3R1YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZXhwZWN0KSkge1xuICAgIHJldHVybiBleHBlY3QuaW5kZXhPZihhY3R1YWwpID09PSAtMVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBleHBlY3QgIT09IGFjdHVhbFxuICB9XG59XG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIGNoZWNraW5nIGtleUNvZGVzIGZyb20gY29uZmlnLlxuICogZXhwb3NlZCBhcyBWdWUucHJvdG90eXBlLl9rXG4gKiBwYXNzaW5nIGluIGV2ZW50S2V5TmFtZSBhcyBsYXN0IGFyZ3VtZW50IHNlcGFyYXRlbHkgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqL1xuZnVuY3Rpb24gY2hlY2tLZXlDb2RlcyAoXG4gIGV2ZW50S2V5Q29kZSxcbiAga2V5LFxuICBidWlsdEluS2V5Q29kZSxcbiAgZXZlbnRLZXlOYW1lLFxuICBidWlsdEluS2V5TmFtZVxuKSB7XG4gIHZhciBtYXBwZWRLZXlDb2RlID0gY29uZmlnLmtleUNvZGVzW2tleV0gfHwgYnVpbHRJbktleUNvZGU7XG4gIGlmIChidWlsdEluS2V5TmFtZSAmJiBldmVudEtleU5hbWUgJiYgIWNvbmZpZy5rZXlDb2Rlc1trZXldKSB7XG4gICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2goYnVpbHRJbktleU5hbWUsIGV2ZW50S2V5TmFtZSlcbiAgfSBlbHNlIGlmIChtYXBwZWRLZXlDb2RlKSB7XG4gICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2gobWFwcGVkS2V5Q29kZSwgZXZlbnRLZXlDb2RlKVxuICB9IGVsc2UgaWYgKGV2ZW50S2V5TmFtZSkge1xuICAgIHJldHVybiBoeXBoZW5hdGUoZXZlbnRLZXlOYW1lKSAhPT0ga2V5XG4gIH1cbn1cblxuLyogICovXG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIG1lcmdpbmcgdi1iaW5kPVwib2JqZWN0XCIgaW50byBhIFZOb2RlJ3MgZGF0YS5cbiAqL1xuZnVuY3Rpb24gYmluZE9iamVjdFByb3BzIChcbiAgZGF0YSxcbiAgdGFnLFxuICB2YWx1ZSxcbiAgYXNQcm9wLFxuICBpc1N5bmNcbikge1xuICBpZiAodmFsdWUpIHtcbiAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICAndi1iaW5kIHdpdGhvdXQgYXJndW1lbnQgZXhwZWN0cyBhbiBPYmplY3Qgb3IgQXJyYXkgdmFsdWUnLFxuICAgICAgICB0aGlzXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB0b09iamVjdCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICB2YXIgaGFzaDtcbiAgICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBrZXkgPT09ICdjbGFzcycgfHxcbiAgICAgICAgICBrZXkgPT09ICdzdHlsZScgfHxcbiAgICAgICAgICBpc1Jlc2VydmVkQXR0cmlidXRlKGtleSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgaGFzaCA9IGRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHR5cGUgPSBkYXRhLmF0dHJzICYmIGRhdGEuYXR0cnMudHlwZTtcbiAgICAgICAgICBoYXNoID0gYXNQcm9wIHx8IGNvbmZpZy5tdXN0VXNlUHJvcCh0YWcsIHR5cGUsIGtleSlcbiAgICAgICAgICAgID8gZGF0YS5kb21Qcm9wcyB8fCAoZGF0YS5kb21Qcm9wcyA9IHt9KVxuICAgICAgICAgICAgOiBkYXRhLmF0dHJzIHx8IChkYXRhLmF0dHJzID0ge30pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGtleSBpbiBoYXNoKSkge1xuICAgICAgICAgIGhhc2hba2V5XSA9IHZhbHVlW2tleV07XG5cbiAgICAgICAgICBpZiAoaXNTeW5jKSB7XG4gICAgICAgICAgICB2YXIgb24gPSBkYXRhLm9uIHx8IChkYXRhLm9uID0ge30pO1xuICAgICAgICAgICAgb25bKFwidXBkYXRlOlwiICsga2V5KV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7XG4gICAgICAgICAgICAgIHZhbHVlW2tleV0gPSAkZXZlbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSBsb29wKCBrZXkgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGFcbn1cblxuLyogICovXG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyBzdGF0aWMgdHJlZXMuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclN0YXRpYyAoXG4gIGluZGV4LFxuICBpc0luRm9yXG4pIHtcbiAgdmFyIGNhY2hlZCA9IHRoaXMuX3N0YXRpY1RyZWVzIHx8ICh0aGlzLl9zdGF0aWNUcmVlcyA9IFtdKTtcbiAgdmFyIHRyZWUgPSBjYWNoZWRbaW5kZXhdO1xuICAvLyBpZiBoYXMgYWxyZWFkeS1yZW5kZXJlZCBzdGF0aWMgdHJlZSBhbmQgbm90IGluc2lkZSB2LWZvcixcbiAgLy8gd2UgY2FuIHJldXNlIHRoZSBzYW1lIHRyZWUuXG4gIGlmICh0cmVlICYmICFpc0luRm9yKSB7XG4gICAgcmV0dXJuIHRyZWVcbiAgfVxuICAvLyBvdGhlcndpc2UsIHJlbmRlciBhIGZyZXNoIHRyZWUuXG4gIHRyZWUgPSBjYWNoZWRbaW5kZXhdID0gdGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbaW5kZXhdLmNhbGwoXG4gICAgdGhpcy5fcmVuZGVyUHJveHksXG4gICAgbnVsbCxcbiAgICB0aGlzIC8vIGZvciByZW5kZXIgZm5zIGdlbmVyYXRlZCBmb3IgZnVuY3Rpb25hbCBjb21wb25lbnQgdGVtcGxhdGVzXG4gICk7XG4gIG1hcmtTdGF0aWModHJlZSwgKFwiX19zdGF0aWNfX1wiICsgaW5kZXgpLCBmYWxzZSk7XG4gIHJldHVybiB0cmVlXG59XG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIHYtb25jZS5cbiAqIEVmZmVjdGl2ZWx5IGl0IG1lYW5zIG1hcmtpbmcgdGhlIG5vZGUgYXMgc3RhdGljIHdpdGggYSB1bmlxdWUga2V5LlxuICovXG5mdW5jdGlvbiBtYXJrT25jZSAoXG4gIHRyZWUsXG4gIGluZGV4LFxuICBrZXlcbikge1xuICBtYXJrU3RhdGljKHRyZWUsIChcIl9fb25jZV9fXCIgKyBpbmRleCArIChrZXkgPyAoXCJfXCIgKyBrZXkpIDogXCJcIikpLCB0cnVlKTtcbiAgcmV0dXJuIHRyZWVcbn1cblxuZnVuY3Rpb24gbWFya1N0YXRpYyAoXG4gIHRyZWUsXG4gIGtleSxcbiAgaXNPbmNlXG4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodHJlZSkpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0cmVlW2ldICYmIHR5cGVvZiB0cmVlW2ldICE9PSAnc3RyaW5nJykge1xuICAgICAgICBtYXJrU3RhdGljTm9kZSh0cmVlW2ldLCAoa2V5ICsgXCJfXCIgKyBpKSwgaXNPbmNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbWFya1N0YXRpY05vZGUodHJlZSwga2V5LCBpc09uY2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcmtTdGF0aWNOb2RlIChub2RlLCBrZXksIGlzT25jZSkge1xuICBub2RlLmlzU3RhdGljID0gdHJ1ZTtcbiAgbm9kZS5rZXkgPSBrZXk7XG4gIG5vZGUuaXNPbmNlID0gaXNPbmNlO1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gYmluZE9iamVjdExpc3RlbmVycyAoZGF0YSwgdmFsdWUpIHtcbiAgaWYgKHZhbHVlKSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICAndi1vbiB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IHZhbHVlJyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG9uID0gZGF0YS5vbiA9IGRhdGEub24gPyBleHRlbmQoe30sIGRhdGEub24pIDoge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gb25ba2V5XTtcbiAgICAgICAgdmFyIG91cnMgPSB2YWx1ZVtrZXldO1xuICAgICAgICBvbltrZXldID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIG91cnMpIDogb3VycztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGFcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGluc3RhbGxSZW5kZXJIZWxwZXJzICh0YXJnZXQpIHtcbiAgdGFyZ2V0Ll9vID0gbWFya09uY2U7XG4gIHRhcmdldC5fbiA9IHRvTnVtYmVyO1xuICB0YXJnZXQuX3MgPSB0b1N0cmluZztcbiAgdGFyZ2V0Ll9sID0gcmVuZGVyTGlzdDtcbiAgdGFyZ2V0Ll90ID0gcmVuZGVyU2xvdDtcbiAgdGFyZ2V0Ll9xID0gbG9vc2VFcXVhbDtcbiAgdGFyZ2V0Ll9pID0gbG9vc2VJbmRleE9mO1xuICB0YXJnZXQuX20gPSByZW5kZXJTdGF0aWM7XG4gIHRhcmdldC5fZiA9IHJlc29sdmVGaWx0ZXI7XG4gIHRhcmdldC5fayA9IGNoZWNrS2V5Q29kZXM7XG4gIHRhcmdldC5fYiA9IGJpbmRPYmplY3RQcm9wcztcbiAgdGFyZ2V0Ll92ID0gY3JlYXRlVGV4dFZOb2RlO1xuICB0YXJnZXQuX2UgPSBjcmVhdGVFbXB0eVZOb2RlO1xuICB0YXJnZXQuX3UgPSByZXNvbHZlU2NvcGVkU2xvdHM7XG4gIHRhcmdldC5fZyA9IGJpbmRPYmplY3RMaXN0ZW5lcnM7XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCAoXG4gIGRhdGEsXG4gIHByb3BzLFxuICBjaGlsZHJlbixcbiAgcGFyZW50LFxuICBDdG9yXG4pIHtcbiAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7XG4gIC8vIGVuc3VyZSB0aGUgY3JlYXRlRWxlbWVudCBmdW5jdGlvbiBpbiBmdW5jdGlvbmFsIGNvbXBvbmVudHNcbiAgLy8gZ2V0cyBhIHVuaXF1ZSBjb250ZXh0IC0gdGhpcyBpcyBuZWNlc3NhcnkgZm9yIGNvcnJlY3QgbmFtZWQgc2xvdCBjaGVja1xuICB2YXIgY29udGV4dFZtO1xuICBpZiAoaGFzT3duKHBhcmVudCwgJ191aWQnKSkge1xuICAgIGNvbnRleHRWbSA9IE9iamVjdC5jcmVhdGUocGFyZW50KTtcbiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICBjb250ZXh0Vm0uX29yaWdpbmFsID0gcGFyZW50O1xuICB9IGVsc2Uge1xuICAgIC8vIHRoZSBjb250ZXh0IHZtIHBhc3NlZCBpbiBpcyBhIGZ1bmN0aW9uYWwgY29udGV4dCBhcyB3ZWxsLlxuICAgIC8vIGluIHRoaXMgY2FzZSB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBhcmUgYWJsZSB0byBnZXQgYSBob2xkIHRvIHRoZVxuICAgIC8vIHJlYWwgY29udGV4dCBpbnN0YW5jZS5cbiAgICBjb250ZXh0Vm0gPSBwYXJlbnQ7XG4gICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgcGFyZW50ID0gcGFyZW50Ll9vcmlnaW5hbDtcbiAgfVxuICB2YXIgaXNDb21waWxlZCA9IGlzVHJ1ZShvcHRpb25zLl9jb21waWxlZCk7XG4gIHZhciBuZWVkTm9ybWFsaXphdGlvbiA9ICFpc0NvbXBpbGVkO1xuXG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5saXN0ZW5lcnMgPSBkYXRhLm9uIHx8IGVtcHR5T2JqZWN0O1xuICB0aGlzLmluamVjdGlvbnMgPSByZXNvbHZlSW5qZWN0KG9wdGlvbnMuaW5qZWN0LCBwYXJlbnQpO1xuICB0aGlzLnNsb3RzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZVNsb3RzKGNoaWxkcmVuLCBwYXJlbnQpOyB9O1xuXG4gIC8vIHN1cHBvcnQgZm9yIGNvbXBpbGVkIGZ1bmN0aW9uYWwgdGVtcGxhdGVcbiAgaWYgKGlzQ29tcGlsZWQpIHtcbiAgICAvLyBleHBvc2luZyAkb3B0aW9ucyBmb3IgcmVuZGVyU3RhdGljKClcbiAgICB0aGlzLiRvcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyBwcmUtcmVzb2x2ZSBzbG90cyBmb3IgcmVuZGVyU2xvdCgpXG4gICAgdGhpcy4kc2xvdHMgPSB0aGlzLnNsb3RzKCk7XG4gICAgdGhpcy4kc2NvcGVkU2xvdHMgPSBkYXRhLnNjb3BlZFNsb3RzIHx8IGVtcHR5T2JqZWN0O1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuX3Njb3BlSWQpIHtcbiAgICB0aGlzLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHtcbiAgICAgIHZhciB2bm9kZSA9IGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7XG4gICAgICBpZiAodm5vZGUgJiYgIUFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG4gICAgICAgIHZub2RlLmZuU2NvcGVJZCA9IG9wdGlvbnMuX3Njb3BlSWQ7XG4gICAgICAgIHZub2RlLmZuQ29udGV4dCA9IHBhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2bm9kZVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KGNvbnRleHRWbSwgYSwgYiwgYywgZCwgbmVlZE5vcm1hbGl6YXRpb24pOyB9O1xuICB9XG59XG5cbmluc3RhbGxSZW5kZXJIZWxwZXJzKEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0LnByb3RvdHlwZSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uYWxDb21wb25lbnQgKFxuICBDdG9yLFxuICBwcm9wc0RhdGEsXG4gIGRhdGEsXG4gIGNvbnRleHRWbSxcbiAgY2hpbGRyZW5cbikge1xuICB2YXIgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucztcbiAgdmFyIHByb3BzID0ge307XG4gIHZhciBwcm9wT3B0aW9ucyA9IG9wdGlvbnMucHJvcHM7XG4gIGlmIChpc0RlZihwcm9wT3B0aW9ucykpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHtcbiAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhIHx8IGVtcHR5T2JqZWN0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGlzRGVmKGRhdGEuYXR0cnMpKSB7IG1lcmdlUHJvcHMocHJvcHMsIGRhdGEuYXR0cnMpOyB9XG4gICAgaWYgKGlzRGVmKGRhdGEucHJvcHMpKSB7IG1lcmdlUHJvcHMocHJvcHMsIGRhdGEucHJvcHMpOyB9XG4gIH1cblxuICB2YXIgcmVuZGVyQ29udGV4dCA9IG5ldyBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dChcbiAgICBkYXRhLFxuICAgIHByb3BzLFxuICAgIGNoaWxkcmVuLFxuICAgIGNvbnRleHRWbSxcbiAgICBDdG9yXG4gICk7XG5cbiAgdmFyIHZub2RlID0gb3B0aW9ucy5yZW5kZXIuY2FsbChudWxsLCByZW5kZXJDb250ZXh0Ll9jLCByZW5kZXJDb250ZXh0KTtcblxuICBpZiAodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkge1xuICAgIHJldHVybiBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0KHZub2RlLCBkYXRhLCByZW5kZXJDb250ZXh0LnBhcmVudCwgb3B0aW9ucylcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkge1xuICAgIHZhciB2bm9kZXMgPSBub3JtYWxpemVDaGlsZHJlbih2bm9kZSkgfHwgW107XG4gICAgdmFyIHJlcyA9IG5ldyBBcnJheSh2bm9kZXMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgcmVzW2ldID0gY2xvbmVBbmRNYXJrRnVuY3Rpb25hbFJlc3VsdCh2bm9kZXNbaV0sIGRhdGEsIHJlbmRlckNvbnRleHQucGFyZW50LCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsb25lQW5kTWFya0Z1bmN0aW9uYWxSZXN1bHQgKHZub2RlLCBkYXRhLCBjb250ZXh0Vm0sIG9wdGlvbnMpIHtcbiAgLy8gIzc4MTcgY2xvbmUgbm9kZSBiZWZvcmUgc2V0dGluZyBmbkNvbnRleHQsIG90aGVyd2lzZSBpZiB0aGUgbm9kZSBpcyByZXVzZWRcbiAgLy8gKGUuZy4gaXQgd2FzIGZyb20gYSBjYWNoZWQgbm9ybWFsIHNsb3QpIHRoZSBmbkNvbnRleHQgY2F1c2VzIG5hbWVkIHNsb3RzXG4gIC8vIHRoYXQgc2hvdWxkIG5vdCBiZSBtYXRjaGVkIHRvIG1hdGNoLlxuICB2YXIgY2xvbmUgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgY2xvbmUuZm5Db250ZXh0ID0gY29udGV4dFZtO1xuICBjbG9uZS5mbk9wdGlvbnMgPSBvcHRpb25zO1xuICBpZiAoZGF0YS5zbG90KSB7XG4gICAgKGNsb25lLmRhdGEgfHwgKGNsb25lLmRhdGEgPSB7fSkpLnNsb3QgPSBkYXRhLnNsb3Q7XG4gIH1cbiAgcmV0dXJuIGNsb25lXG59XG5cbmZ1bmN0aW9uIG1lcmdlUHJvcHMgKHRvLCBmcm9tKSB7XG4gIGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG4gICAgdG9bY2FtZWxpemUoa2V5KV0gPSBmcm9tW2tleV07XG4gIH1cbn1cblxuLyogICovXG5cblxuXG5cbi8vIFJlZ2lzdGVyIHRoZSBjb21wb25lbnQgaG9vayB0byB3ZWV4IG5hdGl2ZSByZW5kZXIgZW5naW5lLlxuLy8gVGhlIGhvb2sgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgbmF0aXZlLCBub3QgamF2YXNjcmlwdC5cblxuXG4vLyBVcGRhdGVzIHRoZSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50IHRvIHdlZXggbmF0aXZlIHJlbmRlciBlbmdpbmUuXG5cbi8qICAqL1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vSGFua3MxMDEwMC93ZWV4LW5hdGl2ZS1kaXJlY3RpdmUvdHJlZS9tYXN0ZXIvY29tcG9uZW50XG5cbi8vIGxpc3RlbmluZyBvbiBuYXRpdmUgY2FsbGJhY2tcblxuLyogICovXG5cbi8qICAqL1xuXG4vLyBpbmxpbmUgaG9va3MgdG8gYmUgaW52b2tlZCBvbiBjb21wb25lbnQgVk5vZGVzIGR1cmluZyBwYXRjaFxudmFyIGNvbXBvbmVudFZOb2RlSG9va3MgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQgKFxuICAgIHZub2RlLFxuICAgIGh5ZHJhdGluZyxcbiAgICBwYXJlbnRFbG0sXG4gICAgcmVmRWxtXG4gICkge1xuICAgIGlmIChcbiAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmXG4gICAgICAhdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkICYmXG4gICAgICB2bm9kZS5kYXRhLmtlZXBBbGl2ZVxuICAgICkge1xuICAgICAgLy8ga2VwdC1hbGl2ZSBjb21wb25lbnRzLCB0cmVhdCBhcyBhIHBhdGNoXG4gICAgICB2YXIgbW91bnRlZE5vZGUgPSB2bm9kZTsgLy8gd29yayBhcm91bmQgZmxvd1xuICAgICAgY29tcG9uZW50Vk5vZGVIb29rcy5wcmVwYXRjaChtb3VudGVkTm9kZSwgbW91bnRlZE5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY2hpbGQgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlRm9yVm5vZGUoXG4gICAgICAgIHZub2RlLFxuICAgICAgICBhY3RpdmVJbnN0YW5jZSxcbiAgICAgICAgcGFyZW50RWxtLFxuICAgICAgICByZWZFbG1cbiAgICAgICk7XG4gICAgICBjaGlsZC4kbW91bnQoaHlkcmF0aW5nID8gdm5vZGUuZWxtIDogdW5kZWZpbmVkLCBoeWRyYXRpbmcpO1xuICAgIH1cbiAgfSxcblxuICBwcmVwYXRjaDogZnVuY3Rpb24gcHJlcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSkge1xuICAgIHZhciBvcHRpb25zID0gdm5vZGUuY29tcG9uZW50T3B0aW9ucztcbiAgICB2YXIgY2hpbGQgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IG9sZFZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuICAgIHVwZGF0ZUNoaWxkQ29tcG9uZW50KFxuICAgICAgY2hpbGQsXG4gICAgICBvcHRpb25zLnByb3BzRGF0YSwgLy8gdXBkYXRlZCBwcm9wc1xuICAgICAgb3B0aW9ucy5saXN0ZW5lcnMsIC8vIHVwZGF0ZWQgbGlzdGVuZXJzXG4gICAgICB2bm9kZSwgLy8gbmV3IHBhcmVudCB2bm9kZVxuICAgICAgb3B0aW9ucy5jaGlsZHJlbiAvLyBuZXcgY2hpbGRyZW5cbiAgICApO1xuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0ICh2bm9kZSkge1xuICAgIHZhciBjb250ZXh0ID0gdm5vZGUuY29udGV4dDtcbiAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZTtcbiAgICBpZiAoIWNvbXBvbmVudEluc3RhbmNlLl9pc01vdW50ZWQpIHtcbiAgICAgIGNvbXBvbmVudEluc3RhbmNlLl9pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgY2FsbEhvb2soY29tcG9uZW50SW5zdGFuY2UsICdtb3VudGVkJyk7XG4gICAgfVxuICAgIGlmICh2bm9kZS5kYXRhLmtlZXBBbGl2ZSkge1xuICAgICAgaWYgKGNvbnRleHQuX2lzTW91bnRlZCkge1xuICAgICAgICAvLyB2dWUtcm91dGVyIzEyMTJcbiAgICAgICAgLy8gRHVyaW5nIHVwZGF0ZXMsIGEga2VwdC1hbGl2ZSBjb21wb25lbnQncyBjaGlsZCBjb21wb25lbnRzIG1heVxuICAgICAgICAvLyBjaGFuZ2UsIHNvIGRpcmVjdGx5IHdhbGtpbmcgdGhlIHRyZWUgaGVyZSBtYXkgY2FsbCBhY3RpdmF0ZWQgaG9va3NcbiAgICAgICAgLy8gb24gaW5jb3JyZWN0IGNoaWxkcmVuLiBJbnN0ZWFkIHdlIHB1c2ggdGhlbSBpbnRvIGEgcXVldWUgd2hpY2ggd2lsbFxuICAgICAgICAvLyBiZSBwcm9jZXNzZWQgYWZ0ZXIgdGhlIHdob2xlIHBhdGNoIHByb2Nlc3MgZW5kZWQuXG4gICAgICAgIHF1ZXVlQWN0aXZhdGVkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHRydWUgLyogZGlyZWN0ICovKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSAodm5vZGUpIHtcbiAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZTtcbiAgICBpZiAoIWNvbXBvbmVudEluc3RhbmNlLl9pc0Rlc3Ryb3llZCkge1xuICAgICAgaWYgKCF2bm9kZS5kYXRhLmtlZXBBbGl2ZSkge1xuICAgICAgICBjb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCB0cnVlIC8qIGRpcmVjdCAqLyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG52YXIgaG9va3NUb01lcmdlID0gT2JqZWN0LmtleXMoY29tcG9uZW50Vk5vZGVIb29rcyk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudCAoXG4gIEN0b3IsXG4gIGRhdGEsXG4gIGNvbnRleHQsXG4gIGNoaWxkcmVuLFxuICB0YWdcbikge1xuICBpZiAoaXNVbmRlZihDdG9yKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGJhc2VDdG9yID0gY29udGV4dC4kb3B0aW9ucy5fYmFzZTtcblxuICAvLyBwbGFpbiBvcHRpb25zIG9iamVjdDogdHVybiBpdCBpbnRvIGEgY29uc3RydWN0b3JcbiAgaWYgKGlzT2JqZWN0KEN0b3IpKSB7XG4gICAgQ3RvciA9IGJhc2VDdG9yLmV4dGVuZChDdG9yKTtcbiAgfVxuXG4gIC8vIGlmIGF0IHRoaXMgc3RhZ2UgaXQncyBub3QgYSBjb25zdHJ1Y3RvciBvciBhbiBhc3luYyBjb21wb25lbnQgZmFjdG9yeSxcbiAgLy8gcmVqZWN0LlxuICBpZiAodHlwZW9mIEN0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybigoXCJJbnZhbGlkIENvbXBvbmVudCBkZWZpbml0aW9uOiBcIiArIChTdHJpbmcoQ3RvcikpKSwgY29udGV4dCk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG5cbiAgLy8gYXN5bmMgY29tcG9uZW50XG4gIHZhciBhc3luY0ZhY3Rvcnk7XG4gIGlmIChpc1VuZGVmKEN0b3IuY2lkKSkge1xuICAgIGFzeW5jRmFjdG9yeSA9IEN0b3I7XG4gICAgQ3RvciA9IHJlc29sdmVBc3luY0NvbXBvbmVudChhc3luY0ZhY3RvcnksIGJhc2VDdG9yLCBjb250ZXh0KTtcbiAgICBpZiAoQ3RvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyByZXR1cm4gYSBwbGFjZWhvbGRlciBub2RlIGZvciBhc3luYyBjb21wb25lbnQsIHdoaWNoIGlzIHJlbmRlcmVkXG4gICAgICAvLyBhcyBhIGNvbW1lbnQgbm9kZSBidXQgcHJlc2VydmVzIGFsbCB0aGUgcmF3IGluZm9ybWF0aW9uIGZvciB0aGUgbm9kZS5cbiAgICAgIC8vIHRoZSBpbmZvcm1hdGlvbiB3aWxsIGJlIHVzZWQgZm9yIGFzeW5jIHNlcnZlci1yZW5kZXJpbmcgYW5kIGh5ZHJhdGlvbi5cbiAgICAgIHJldHVybiBjcmVhdGVBc3luY1BsYWNlaG9sZGVyKFxuICAgICAgICBhc3luY0ZhY3RvcnksXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGNoaWxkcmVuLFxuICAgICAgICB0YWdcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBkYXRhID0gZGF0YSB8fCB7fTtcblxuICAvLyByZXNvbHZlIGNvbnN0cnVjdG9yIG9wdGlvbnMgaW4gY2FzZSBnbG9iYWwgbWl4aW5zIGFyZSBhcHBsaWVkIGFmdGVyXG4gIC8vIGNvbXBvbmVudCBjb25zdHJ1Y3RvciBjcmVhdGlvblxuICByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3IpO1xuXG4gIC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBkYXRhIGludG8gcHJvcHMgJiBldmVudHNcbiAgaWYgKGlzRGVmKGRhdGEubW9kZWwpKSB7XG4gICAgdHJhbnNmb3JtTW9kZWwoQ3Rvci5vcHRpb25zLCBkYXRhKTtcbiAgfVxuXG4gIC8vIGV4dHJhY3QgcHJvcHNcbiAgdmFyIHByb3BzRGF0YSA9IGV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEoZGF0YSwgQ3RvciwgdGFnKTtcblxuICAvLyBmdW5jdGlvbmFsIGNvbXBvbmVudFxuICBpZiAoaXNUcnVlKEN0b3Iub3B0aW9ucy5mdW5jdGlvbmFsKSkge1xuICAgIHJldHVybiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50KEN0b3IsIHByb3BzRGF0YSwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4pXG4gIH1cblxuICAvLyBleHRyYWN0IGxpc3RlbmVycywgc2luY2UgdGhlc2UgbmVlZHMgdG8gYmUgdHJlYXRlZCBhc1xuICAvLyBjaGlsZCBjb21wb25lbnQgbGlzdGVuZXJzIGluc3RlYWQgb2YgRE9NIGxpc3RlbmVyc1xuICB2YXIgbGlzdGVuZXJzID0gZGF0YS5vbjtcbiAgLy8gcmVwbGFjZSB3aXRoIGxpc3RlbmVycyB3aXRoIC5uYXRpdmUgbW9kaWZpZXJcbiAgLy8gc28gaXQgZ2V0cyBwcm9jZXNzZWQgZHVyaW5nIHBhcmVudCBjb21wb25lbnQgcGF0Y2guXG4gIGRhdGEub24gPSBkYXRhLm5hdGl2ZU9uO1xuXG4gIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmFic3RyYWN0KSkge1xuICAgIC8vIGFic3RyYWN0IGNvbXBvbmVudHMgZG8gbm90IGtlZXAgYW55dGhpbmdcbiAgICAvLyBvdGhlciB0aGFuIHByb3BzICYgbGlzdGVuZXJzICYgc2xvdFxuXG4gICAgLy8gd29yayBhcm91bmQgZmxvd1xuICAgIHZhciBzbG90ID0gZGF0YS5zbG90O1xuICAgIGRhdGEgPSB7fTtcbiAgICBpZiAoc2xvdCkge1xuICAgICAgZGF0YS5zbG90ID0gc2xvdDtcbiAgICB9XG4gIH1cblxuICAvLyBpbnN0YWxsIGNvbXBvbmVudCBtYW5hZ2VtZW50IGhvb2tzIG9udG8gdGhlIHBsYWNlaG9sZGVyIG5vZGVcbiAgaW5zdGFsbENvbXBvbmVudEhvb2tzKGRhdGEpO1xuXG4gIC8vIHJldHVybiBhIHBsYWNlaG9sZGVyIHZub2RlXG4gIHZhciBuYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgdGFnO1xuICB2YXIgdm5vZGUgPSBuZXcgVk5vZGUoXG4gICAgKFwidnVlLWNvbXBvbmVudC1cIiArIChDdG9yLmNpZCkgKyAobmFtZSA/IChcIi1cIiArIG5hbWUpIDogJycpKSxcbiAgICBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0LFxuICAgIHsgQ3RvcjogQ3RvciwgcHJvcHNEYXRhOiBwcm9wc0RhdGEsIGxpc3RlbmVyczogbGlzdGVuZXJzLCB0YWc6IHRhZywgY2hpbGRyZW46IGNoaWxkcmVuIH0sXG4gICAgYXN5bmNGYWN0b3J5XG4gICk7XG5cbiAgLy8gV2VleCBzcGVjaWZpYzogaW52b2tlIHJlY3ljbGUtbGlzdCBvcHRpbWl6ZWQgQHJlbmRlciBmdW5jdGlvbiBmb3JcbiAgLy8gZXh0cmFjdGluZyBjZWxsLXNsb3QgdGVtcGxhdGUuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5rczEwMTAwL3dlZXgtbmF0aXZlLWRpcmVjdGl2ZS90cmVlL21hc3Rlci9jb21wb25lbnRcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIHJldHVybiB2bm9kZVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlIChcbiAgdm5vZGUsIC8vIHdlIGtub3cgaXQncyBNb3VudGVkQ29tcG9uZW50Vk5vZGUgYnV0IGZsb3cgZG9lc24ndFxuICBwYXJlbnQsIC8vIGFjdGl2ZUluc3RhbmNlIGluIGxpZmVjeWNsZSBzdGF0ZVxuICBwYXJlbnRFbG0sXG4gIHJlZkVsbVxuKSB7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIF9pc0NvbXBvbmVudDogdHJ1ZSxcbiAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICBfcGFyZW50Vm5vZGU6IHZub2RlLFxuICAgIF9wYXJlbnRFbG06IHBhcmVudEVsbSB8fCBudWxsLFxuICAgIF9yZWZFbG06IHJlZkVsbSB8fCBudWxsXG4gIH07XG4gIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZSByZW5kZXIgZnVuY3Rpb25zXG4gIHZhciBpbmxpbmVUZW1wbGF0ZSA9IHZub2RlLmRhdGEuaW5saW5lVGVtcGxhdGU7XG4gIGlmIChpc0RlZihpbmxpbmVUZW1wbGF0ZSkpIHtcbiAgICBvcHRpb25zLnJlbmRlciA9IGlubGluZVRlbXBsYXRlLnJlbmRlcjtcbiAgICBvcHRpb25zLnN0YXRpY1JlbmRlckZucyA9IGlubGluZVRlbXBsYXRlLnN0YXRpY1JlbmRlckZucztcbiAgfVxuICByZXR1cm4gbmV3IHZub2RlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBpbnN0YWxsQ29tcG9uZW50SG9va3MgKGRhdGEpIHtcbiAgdmFyIGhvb2tzID0gZGF0YS5ob29rIHx8IChkYXRhLmhvb2sgPSB7fSk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3NUb01lcmdlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGhvb2tzVG9NZXJnZVtpXTtcbiAgICBob29rc1trZXldID0gY29tcG9uZW50Vk5vZGVIb29rc1trZXldO1xuICB9XG59XG5cbi8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBpbmZvICh2YWx1ZSBhbmQgY2FsbGJhY2spIGludG9cbi8vIHByb3AgYW5kIGV2ZW50IGhhbmRsZXIgcmVzcGVjdGl2ZWx5LlxuZnVuY3Rpb24gdHJhbnNmb3JtTW9kZWwgKG9wdGlvbnMsIGRhdGEpIHtcbiAgdmFyIHByb3AgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLnByb3ApIHx8ICd2YWx1ZSc7XG4gIHZhciBldmVudCA9IChvcHRpb25zLm1vZGVsICYmIG9wdGlvbnMubW9kZWwuZXZlbnQpIHx8ICdpbnB1dCc7KGRhdGEucHJvcHMgfHwgKGRhdGEucHJvcHMgPSB7fSkpW3Byb3BdID0gZGF0YS5tb2RlbC52YWx1ZTtcbiAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTtcbiAgaWYgKGlzRGVmKG9uW2V2ZW50XSkpIHtcbiAgICBvbltldmVudF0gPSBbZGF0YS5tb2RlbC5jYWxsYmFja10uY29uY2F0KG9uW2V2ZW50XSk7XG4gIH0gZWxzZSB7XG4gICAgb25bZXZlbnRdID0gZGF0YS5tb2RlbC5jYWxsYmFjaztcbiAgfVxufVxuXG4vKiAgKi9cblxudmFyIFNJTVBMRV9OT1JNQUxJWkUgPSAxO1xudmFyIEFMV0FZU19OT1JNQUxJWkUgPSAyO1xuXG4vLyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBwcm92aWRpbmcgYSBtb3JlIGZsZXhpYmxlIGludGVyZmFjZVxuLy8gd2l0aG91dCBnZXR0aW5nIHllbGxlZCBhdCBieSBmbG93XG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50IChcbiAgY29udGV4dCxcbiAgdGFnLFxuICBkYXRhLFxuICBjaGlsZHJlbixcbiAgbm9ybWFsaXphdGlvblR5cGUsXG4gIGFsd2F5c05vcm1hbGl6ZVxuKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGRhdGEpIHx8IGlzUHJpbWl0aXZlKGRhdGEpKSB7XG4gICAgbm9ybWFsaXphdGlvblR5cGUgPSBjaGlsZHJlbjtcbiAgICBjaGlsZHJlbiA9IGRhdGE7XG4gICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoaXNUcnVlKGFsd2F5c05vcm1hbGl6ZSkpIHtcbiAgICBub3JtYWxpemF0aW9uVHlwZSA9IEFMV0FZU19OT1JNQUxJWkU7XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVFbGVtZW50KGNvbnRleHQsIHRhZywgZGF0YSwgY2hpbGRyZW4sIG5vcm1hbGl6YXRpb25UeXBlKVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlRWxlbWVudCAoXG4gIGNvbnRleHQsXG4gIHRhZyxcbiAgZGF0YSxcbiAgY2hpbGRyZW4sXG4gIG5vcm1hbGl6YXRpb25UeXBlXG4pIHtcbiAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKChkYXRhKS5fX29iX18pKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgXCJBdm9pZCB1c2luZyBvYnNlcnZlZCBkYXRhIG9iamVjdCBhcyB2bm9kZSBkYXRhOiBcIiArIChKU09OLnN0cmluZ2lmeShkYXRhKSkgKyBcIlxcblwiICtcbiAgICAgICdBbHdheXMgY3JlYXRlIGZyZXNoIHZub2RlIGRhdGEgb2JqZWN0cyBpbiBlYWNoIHJlbmRlciEnLFxuICAgICAgY29udGV4dFxuICAgICk7XG4gICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKVxuICB9XG4gIC8vIG9iamVjdCBzeW50YXggaW4gdi1iaW5kXG4gIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihkYXRhLmlzKSkge1xuICAgIHRhZyA9IGRhdGEuaXM7XG4gIH1cbiAgaWYgKCF0YWcpIHtcbiAgICAvLyBpbiBjYXNlIG9mIGNvbXBvbmVudCA6aXMgc2V0IHRvIGZhbHN5IHZhbHVlXG4gICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKVxuICB9XG4gIC8vIHdhcm4gYWdhaW5zdCBub24tcHJpbWl0aXZlIGtleVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgIGlzRGVmKGRhdGEpICYmIGlzRGVmKGRhdGEua2V5KSAmJiAhaXNQcmltaXRpdmUoZGF0YS5rZXkpXG4gICkge1xuICAgIHtcbiAgICAgIHdhcm4oXG4gICAgICAgICdBdm9pZCB1c2luZyBub24tcHJpbWl0aXZlIHZhbHVlIGFzIGtleSwgJyArXG4gICAgICAgICd1c2Ugc3RyaW5nL251bWJlciB2YWx1ZSBpbnN0ZWFkLicsXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIC8vIHN1cHBvcnQgc2luZ2xlIGZ1bmN0aW9uIGNoaWxkcmVuIGFzIGRlZmF1bHQgc2NvcGVkIHNsb3RcbiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pICYmXG4gICAgdHlwZW9mIGNoaWxkcmVuWzBdID09PSAnZnVuY3Rpb24nXG4gICkge1xuICAgIGRhdGEgPSBkYXRhIHx8IHt9O1xuICAgIGRhdGEuc2NvcGVkU2xvdHMgPSB7IGRlZmF1bHQ6IGNoaWxkcmVuWzBdIH07XG4gICAgY2hpbGRyZW4ubGVuZ3RoID0gMDtcbiAgfVxuICBpZiAobm9ybWFsaXphdGlvblR5cGUgPT09IEFMV0FZU19OT1JNQUxJWkUpIHtcbiAgICBjaGlsZHJlbiA9IG5vcm1hbGl6ZUNoaWxkcmVuKGNoaWxkcmVuKTtcbiAgfSBlbHNlIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gU0lNUExFX05PUk1BTElaRSkge1xuICAgIGNoaWxkcmVuID0gc2ltcGxlTm9ybWFsaXplQ2hpbGRyZW4oY2hpbGRyZW4pO1xuICB9XG4gIHZhciB2bm9kZSwgbnM7XG4gIGlmICh0eXBlb2YgdGFnID09PSAnc3RyaW5nJykge1xuICAgIHZhciBDdG9yO1xuICAgIG5zID0gKGNvbnRleHQuJHZub2RlICYmIGNvbnRleHQuJHZub2RlLm5zKSB8fCBjb25maWcuZ2V0VGFnTmFtZXNwYWNlKHRhZyk7XG4gICAgaWYgKGNvbmZpZy5pc1Jlc2VydmVkVGFnKHRhZykpIHtcbiAgICAgIC8vIHBsYXRmb3JtIGJ1aWx0LWluIGVsZW1lbnRzXG4gICAgICB2bm9kZSA9IG5ldyBWTm9kZShcbiAgICAgICAgY29uZmlnLnBhcnNlUGxhdGZvcm1UYWdOYW1lKHRhZyksIGRhdGEsIGNoaWxkcmVuLFxuICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29udGV4dFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGlzRGVmKEN0b3IgPSByZXNvbHZlQXNzZXQoY29udGV4dC4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSkge1xuICAgICAgLy8gY29tcG9uZW50XG4gICAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudChDdG9yLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbiwgdGFnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdW5rbm93biBvciB1bmxpc3RlZCBuYW1lc3BhY2VkIGVsZW1lbnRzXG4gICAgICAvLyBjaGVjayBhdCBydW50aW1lIGJlY2F1c2UgaXQgbWF5IGdldCBhc3NpZ25lZCBhIG5hbWVzcGFjZSB3aGVuIGl0c1xuICAgICAgLy8gcGFyZW50IG5vcm1hbGl6ZXMgY2hpbGRyZW5cbiAgICAgIHZub2RlID0gbmV3IFZOb2RlKFxuICAgICAgICB0YWcsIGRhdGEsIGNoaWxkcmVuLFxuICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29udGV4dFxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gZGlyZWN0IGNvbXBvbmVudCBvcHRpb25zIC8gY29uc3RydWN0b3JcbiAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudCh0YWcsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcbiAgICByZXR1cm4gdm5vZGVcbiAgfSBlbHNlIGlmIChpc0RlZih2bm9kZSkpIHtcbiAgICBpZiAoaXNEZWYobnMpKSB7IGFwcGx5TlModm5vZGUsIG5zKTsgfVxuICAgIGlmIChpc0RlZihkYXRhKSkgeyByZWdpc3RlckRlZXBCaW5kaW5ncyhkYXRhKTsgfVxuICAgIHJldHVybiB2bm9kZVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKClcbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseU5TICh2bm9kZSwgbnMsIGZvcmNlKSB7XG4gIHZub2RlLm5zID0gbnM7XG4gIGlmICh2bm9kZS50YWcgPT09ICdmb3JlaWduT2JqZWN0Jykge1xuICAgIC8vIHVzZSBkZWZhdWx0IG5hbWVzcGFjZSBpbnNpZGUgZm9yZWlnbk9iamVjdFxuICAgIG5zID0gdW5kZWZpbmVkO1xuICAgIGZvcmNlID0gdHJ1ZTtcbiAgfVxuICBpZiAoaXNEZWYodm5vZGUuY2hpbGRyZW4pKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IHZub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgaWYgKGlzRGVmKGNoaWxkLnRhZykgJiYgKFxuICAgICAgICBpc1VuZGVmKGNoaWxkLm5zKSB8fCAoaXNUcnVlKGZvcmNlKSAmJiBjaGlsZC50YWcgIT09ICdzdmcnKSkpIHtcbiAgICAgICAgYXBwbHlOUyhjaGlsZCwgbnMsIGZvcmNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gcmVmICM1MzE4XG4vLyBuZWNlc3NhcnkgdG8gZW5zdXJlIHBhcmVudCByZS1yZW5kZXIgd2hlbiBkZWVwIGJpbmRpbmdzIGxpa2UgOnN0eWxlIGFuZFxuLy8gOmNsYXNzIGFyZSB1c2VkIG9uIHNsb3Qgbm9kZXNcbmZ1bmN0aW9uIHJlZ2lzdGVyRGVlcEJpbmRpbmdzIChkYXRhKSB7XG4gIGlmIChpc09iamVjdChkYXRhLnN0eWxlKSkge1xuICAgIHRyYXZlcnNlKGRhdGEuc3R5bGUpO1xuICB9XG4gIGlmIChpc09iamVjdChkYXRhLmNsYXNzKSkge1xuICAgIHRyYXZlcnNlKGRhdGEuY2xhc3MpO1xuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBpbml0UmVuZGVyICh2bSkge1xuICB2bS5fdm5vZGUgPSBudWxsOyAvLyB0aGUgcm9vdCBvZiB0aGUgY2hpbGQgdHJlZVxuICB2bS5fc3RhdGljVHJlZXMgPSBudWxsOyAvLyB2LW9uY2UgY2FjaGVkIHRyZWVzXG4gIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7XG4gIHZhciBwYXJlbnRWbm9kZSA9IHZtLiR2bm9kZSA9IG9wdGlvbnMuX3BhcmVudFZub2RlOyAvLyB0aGUgcGxhY2Vob2xkZXIgbm9kZSBpbiBwYXJlbnQgdHJlZVxuICB2YXIgcmVuZGVyQ29udGV4dCA9IHBhcmVudFZub2RlICYmIHBhcmVudFZub2RlLmNvbnRleHQ7XG4gIHZtLiRzbG90cyA9IHJlc29sdmVTbG90cyhvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiwgcmVuZGVyQ29udGV4dCk7XG4gIHZtLiRzY29wZWRTbG90cyA9IGVtcHR5T2JqZWN0O1xuICAvLyBiaW5kIHRoZSBjcmVhdGVFbGVtZW50IGZuIHRvIHRoaXMgaW5zdGFuY2VcbiAgLy8gc28gdGhhdCB3ZSBnZXQgcHJvcGVyIHJlbmRlciBjb250ZXh0IGluc2lkZSBpdC5cbiAgLy8gYXJncyBvcmRlcjogdGFnLCBkYXRhLCBjaGlsZHJlbiwgbm9ybWFsaXphdGlvblR5cGUsIGFsd2F5c05vcm1hbGl6ZVxuICAvLyBpbnRlcm5hbCB2ZXJzaW9uIGlzIHVzZWQgYnkgcmVuZGVyIGZ1bmN0aW9ucyBjb21waWxlZCBmcm9tIHRlbXBsYXRlc1xuICB2bS5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KHZtLCBhLCBiLCBjLCBkLCBmYWxzZSk7IH07XG4gIC8vIG5vcm1hbGl6YXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgZm9yIHRoZSBwdWJsaWMgdmVyc2lvbiwgdXNlZCBpblxuICAvLyB1c2VyLXdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9ucy5cbiAgdm0uJGNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgdHJ1ZSk7IH07XG5cbiAgLy8gJGF0dHJzICYgJGxpc3RlbmVycyBhcmUgZXhwb3NlZCBmb3IgZWFzaWVyIEhPQyBjcmVhdGlvbi5cbiAgLy8gdGhleSBuZWVkIHRvIGJlIHJlYWN0aXZlIHNvIHRoYXQgSE9DcyB1c2luZyB0aGVtIGFyZSBhbHdheXMgdXBkYXRlZFxuICB2YXIgcGFyZW50RGF0YSA9IHBhcmVudFZub2RlICYmIHBhcmVudFZub2RlLmRhdGE7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgJyRhdHRycycsIHBhcmVudERhdGEgJiYgcGFyZW50RGF0YS5hdHRycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkge1xuICAgICAgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCAmJiB3YXJuKFwiJGF0dHJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG4gICAgfSwgdHJ1ZSk7XG4gICAgZGVmaW5lUmVhY3RpdmUodm0sICckbGlzdGVuZXJzJywgb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oXCIkbGlzdGVuZXJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG4gICAgfSwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgZGVmaW5lUmVhY3RpdmUodm0sICckYXR0cnMnLCBwYXJlbnREYXRhICYmIHBhcmVudERhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3QsIG51bGwsIHRydWUpO1xuICAgIGRlZmluZVJlYWN0aXZlKHZtLCAnJGxpc3RlbmVycycsIG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyB8fCBlbXB0eU9iamVjdCwgbnVsbCwgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyTWl4aW4gKFZ1ZSkge1xuICAvLyBpbnN0YWxsIHJ1bnRpbWUgY29udmVuaWVuY2UgaGVscGVyc1xuICBpbnN0YWxsUmVuZGVySGVscGVycyhWdWUucHJvdG90eXBlKTtcblxuICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBuZXh0VGljayhmbiwgdGhpcylcbiAgfTtcblxuICBWdWUucHJvdG90eXBlLl9yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2YXIgcmVmID0gdm0uJG9wdGlvbnM7XG4gICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7XG4gICAgdmFyIF9wYXJlbnRWbm9kZSA9IHJlZi5fcGFyZW50Vm5vZGU7XG5cbiAgICAvLyByZXNldCBfcmVuZGVyZWQgZmxhZyBvbiBzbG90cyBmb3IgZHVwbGljYXRlIHNsb3QgY2hlY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgZm9yICh2YXIga2V5IGluIHZtLiRzbG90cykge1xuICAgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICAgICAgdm0uJHNsb3RzW2tleV0uX3JlbmRlcmVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKF9wYXJlbnRWbm9kZSkge1xuICAgICAgdm0uJHNjb3BlZFNsb3RzID0gX3BhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHMgfHwgZW1wdHlPYmplY3Q7XG4gICAgfVxuXG4gICAgLy8gc2V0IHBhcmVudCB2bm9kZS4gdGhpcyBhbGxvd3MgcmVuZGVyIGZ1bmN0aW9ucyB0byBoYXZlIGFjY2Vzc1xuICAgIC8vIHRvIHRoZSBkYXRhIG9uIHRoZSBwbGFjZWhvbGRlciBub2RlLlxuICAgIHZtLiR2bm9kZSA9IF9wYXJlbnRWbm9kZTtcbiAgICAvLyByZW5kZXIgc2VsZlxuICAgIHZhciB2bm9kZTtcbiAgICB0cnkge1xuICAgICAgdm5vZGUgPSByZW5kZXIuY2FsbCh2bS5fcmVuZGVyUHJveHksIHZtLiRjcmVhdGVFbGVtZW50KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJyZW5kZXJcIik7XG4gICAgICAvLyByZXR1cm4gZXJyb3IgcmVuZGVyIHJlc3VsdCxcbiAgICAgIC8vIG9yIHByZXZpb3VzIHZub2RlIHRvIHByZXZlbnQgcmVuZGVyIGVycm9yIGNhdXNpbmcgYmxhbmsgY29tcG9uZW50XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKHZtLiRvcHRpb25zLnJlbmRlckVycm9yKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZub2RlID0gdm0uJG9wdGlvbnMucmVuZGVyRXJyb3IuY2FsbCh2bS5fcmVuZGVyUHJveHksIHZtLiRjcmVhdGVFbGVtZW50LCBlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJyZW5kZXJFcnJvclwiKTtcbiAgICAgICAgICAgIHZub2RlID0gdm0uX3Zub2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bm9kZSA9IHZtLl92bm9kZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHJldHVybiBlbXB0eSB2bm9kZSBpbiBjYXNlIHRoZSByZW5kZXIgZnVuY3Rpb24gZXJyb3JlZCBvdXRcbiAgICBpZiAoISh2bm9kZSBpbnN0YW5jZW9mIFZOb2RlKSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAnTXVsdGlwbGUgcm9vdCBub2RlcyByZXR1cm5lZCBmcm9tIHJlbmRlciBmdW5jdGlvbi4gUmVuZGVyIGZ1bmN0aW9uICcgK1xuICAgICAgICAgICdzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHJvb3Qgbm9kZS4nLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2bm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTtcbiAgICB9XG4gICAgLy8gc2V0IHBhcmVudFxuICAgIHZub2RlLnBhcmVudCA9IF9wYXJlbnRWbm9kZTtcbiAgICByZXR1cm4gdm5vZGVcbiAgfTtcbn1cblxuLyogICovXG5cbnZhciB1aWQkMyA9IDA7XG5cbmZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG4gIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgLy8gYSB1aWRcbiAgICB2bS5fdWlkID0gdWlkJDMrKztcblxuICAgIHZhciBzdGFydFRhZywgZW5kVGFnO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG4gICAgICBzdGFydFRhZyA9IFwidnVlLXBlcmYtc3RhcnQ6XCIgKyAodm0uX3VpZCk7XG4gICAgICBlbmRUYWcgPSBcInZ1ZS1wZXJmLWVuZDpcIiArICh2bS5fdWlkKTtcbiAgICAgIG1hcmsoc3RhcnRUYWcpO1xuICAgIH1cblxuICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG4gICAgdm0uX2lzVnVlID0gdHJ1ZTtcbiAgICAvLyBtZXJnZSBvcHRpb25zXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5faXNDb21wb25lbnQpIHtcbiAgICAgIC8vIG9wdGltaXplIGludGVybmFsIGNvbXBvbmVudCBpbnN0YW50aWF0aW9uXG4gICAgICAvLyBzaW5jZSBkeW5hbWljIG9wdGlvbnMgbWVyZ2luZyBpcyBwcmV0dHkgc2xvdywgYW5kIG5vbmUgb2YgdGhlXG4gICAgICAvLyBpbnRlcm5hbCBjb21wb25lbnQgb3B0aW9ucyBuZWVkcyBzcGVjaWFsIHRyZWF0bWVudC5cbiAgICAgIGluaXRJbnRlcm5hbENvbXBvbmVudCh2bSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZtLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKFxuICAgICAgICByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKHZtLmNvbnN0cnVjdG9yKSxcbiAgICAgICAgb3B0aW9ucyB8fCB7fSxcbiAgICAgICAgdm1cbiAgICAgICk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGluaXRQcm94eSh2bSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZtLl9yZW5kZXJQcm94eSA9IHZtO1xuICAgIH1cbiAgICAvLyBleHBvc2UgcmVhbCBzZWxmXG4gICAgdm0uX3NlbGYgPSB2bTtcbiAgICBpbml0TGlmZWN5Y2xlKHZtKTtcbiAgICBpbml0RXZlbnRzKHZtKTtcbiAgICBpbml0UmVuZGVyKHZtKTtcbiAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZUNyZWF0ZScpO1xuICAgIGluaXRJbmplY3Rpb25zKHZtKTsgLy8gcmVzb2x2ZSBpbmplY3Rpb25zIGJlZm9yZSBkYXRhL3Byb3BzXG4gICAgaW5pdFN0YXRlKHZtKTtcbiAgICBpbml0UHJvdmlkZSh2bSk7IC8vIHJlc29sdmUgcHJvdmlkZSBhZnRlciBkYXRhL3Byb3BzXG4gICAgY2FsbEhvb2sodm0sICdjcmVhdGVkJyk7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuICAgICAgdm0uX25hbWUgPSBmb3JtYXRDb21wb25lbnROYW1lKHZtLCBmYWxzZSk7XG4gICAgICBtYXJrKGVuZFRhZyk7XG4gICAgICBtZWFzdXJlKChcInZ1ZSBcIiArICh2bS5fbmFtZSkgKyBcIiBpbml0XCIpLCBzdGFydFRhZywgZW5kVGFnKTtcbiAgICB9XG5cbiAgICBpZiAodm0uJG9wdGlvbnMuZWwpIHtcbiAgICAgIHZtLiRtb3VudCh2bS4kb3B0aW9ucy5lbCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBpbml0SW50ZXJuYWxDb21wb25lbnQgKHZtLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gdm0uJG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKHZtLmNvbnN0cnVjdG9yLm9wdGlvbnMpO1xuICAvLyBkb2luZyB0aGlzIGJlY2F1c2UgaXQncyBmYXN0ZXIgdGhhbiBkeW5hbWljIGVudW1lcmF0aW9uLlxuICB2YXIgcGFyZW50Vm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTtcbiAgb3B0cy5wYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgb3B0cy5fcGFyZW50Vm5vZGUgPSBwYXJlbnRWbm9kZTtcbiAgb3B0cy5fcGFyZW50RWxtID0gb3B0aW9ucy5fcGFyZW50RWxtO1xuICBvcHRzLl9yZWZFbG0gPSBvcHRpb25zLl9yZWZFbG07XG5cbiAgdmFyIHZub2RlQ29tcG9uZW50T3B0aW9ucyA9IHBhcmVudFZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG4gIG9wdHMucHJvcHNEYXRhID0gdm5vZGVDb21wb25lbnRPcHRpb25zLnByb3BzRGF0YTtcbiAgb3B0cy5fcGFyZW50TGlzdGVuZXJzID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmxpc3RlbmVycztcbiAgb3B0cy5fcmVuZGVyQ2hpbGRyZW4gPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW47XG4gIG9wdHMuX2NvbXBvbmVudFRhZyA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy50YWc7XG5cbiAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgb3B0cy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICBvcHRzLnN0YXRpY1JlbmRlckZucyA9IG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMgKEN0b3IpIHtcbiAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7XG4gIGlmIChDdG9yLnN1cGVyKSB7XG4gICAgdmFyIHN1cGVyT3B0aW9ucyA9IHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvci5zdXBlcik7XG4gICAgdmFyIGNhY2hlZFN1cGVyT3B0aW9ucyA9IEN0b3Iuc3VwZXJPcHRpb25zO1xuICAgIGlmIChzdXBlck9wdGlvbnMgIT09IGNhY2hlZFN1cGVyT3B0aW9ucykge1xuICAgICAgLy8gc3VwZXIgb3B0aW9uIGNoYW5nZWQsXG4gICAgICAvLyBuZWVkIHRvIHJlc29sdmUgbmV3IG9wdGlvbnMuXG4gICAgICBDdG9yLnN1cGVyT3B0aW9ucyA9IHN1cGVyT3B0aW9ucztcbiAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbGF0ZS1tb2RpZmllZC9hdHRhY2hlZCBvcHRpb25zICgjNDk3NilcbiAgICAgIHZhciBtb2RpZmllZE9wdGlvbnMgPSByZXNvbHZlTW9kaWZpZWRPcHRpb25zKEN0b3IpO1xuICAgICAgLy8gdXBkYXRlIGJhc2UgZXh0ZW5kIG9wdGlvbnNcbiAgICAgIGlmIChtb2RpZmllZE9wdGlvbnMpIHtcbiAgICAgICAgZXh0ZW5kKEN0b3IuZXh0ZW5kT3B0aW9ucywgbW9kaWZpZWRPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoc3VwZXJPcHRpb25zLCBDdG9yLmV4dGVuZE9wdGlvbnMpO1xuICAgICAgaWYgKG9wdGlvbnMubmFtZSkge1xuICAgICAgICBvcHRpb25zLmNvbXBvbmVudHNbb3B0aW9ucy5uYW1lXSA9IEN0b3I7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvcHRpb25zXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVNb2RpZmllZE9wdGlvbnMgKEN0b3IpIHtcbiAgdmFyIG1vZGlmaWVkO1xuICB2YXIgbGF0ZXN0ID0gQ3Rvci5vcHRpb25zO1xuICB2YXIgZXh0ZW5kZWQgPSBDdG9yLmV4dGVuZE9wdGlvbnM7XG4gIHZhciBzZWFsZWQgPSBDdG9yLnNlYWxlZE9wdGlvbnM7XG4gIGZvciAodmFyIGtleSBpbiBsYXRlc3QpIHtcbiAgICBpZiAobGF0ZXN0W2tleV0gIT09IHNlYWxlZFtrZXldKSB7XG4gICAgICBpZiAoIW1vZGlmaWVkKSB7IG1vZGlmaWVkID0ge307IH1cbiAgICAgIG1vZGlmaWVkW2tleV0gPSBkZWR1cGUobGF0ZXN0W2tleV0sIGV4dGVuZGVkW2tleV0sIHNlYWxlZFtrZXldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1vZGlmaWVkXG59XG5cbmZ1bmN0aW9uIGRlZHVwZSAobGF0ZXN0LCBleHRlbmRlZCwgc2VhbGVkKSB7XG4gIC8vIGNvbXBhcmUgbGF0ZXN0IGFuZCBzZWFsZWQgdG8gZW5zdXJlIGxpZmVjeWNsZSBob29rcyB3b24ndCBiZSBkdXBsaWNhdGVkXG4gIC8vIGJldHdlZW4gbWVyZ2VzXG4gIGlmIChBcnJheS5pc0FycmF5KGxhdGVzdCkpIHtcbiAgICB2YXIgcmVzID0gW107XG4gICAgc2VhbGVkID0gQXJyYXkuaXNBcnJheShzZWFsZWQpID8gc2VhbGVkIDogW3NlYWxlZF07XG4gICAgZXh0ZW5kZWQgPSBBcnJheS5pc0FycmF5KGV4dGVuZGVkKSA/IGV4dGVuZGVkIDogW2V4dGVuZGVkXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhdGVzdC5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gcHVzaCBvcmlnaW5hbCBvcHRpb25zIGFuZCBub3Qgc2VhbGVkIG9wdGlvbnMgdG8gZXhjbHVkZSBkdXBsaWNhdGVkIG9wdGlvbnNcbiAgICAgIGlmIChleHRlbmRlZC5pbmRleE9mKGxhdGVzdFtpXSkgPj0gMCB8fCBzZWFsZWQuaW5kZXhPZihsYXRlc3RbaV0pIDwgMCkge1xuICAgICAgICByZXMucHVzaChsYXRlc3RbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxhdGVzdFxuICB9XG59XG5cbmZ1bmN0aW9uIFZ1ZSAob3B0aW9ucykge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICEodGhpcyBpbnN0YW5jZW9mIFZ1ZSlcbiAgKSB7XG4gICAgd2FybignVnVlIGlzIGEgY29uc3RydWN0b3IgYW5kIHNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgYG5ld2Aga2V5d29yZCcpO1xuICB9XG4gIHRoaXMuX2luaXQob3B0aW9ucyk7XG59XG5cbmluaXRNaXhpbihWdWUpO1xuc3RhdGVNaXhpbihWdWUpO1xuZXZlbnRzTWl4aW4oVnVlKTtcbmxpZmVjeWNsZU1peGluKFZ1ZSk7XG5yZW5kZXJNaXhpbihWdWUpO1xuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdFVzZSAoVnVlKSB7XG4gIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgdmFyIGluc3RhbGxlZFBsdWdpbnMgPSAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyB8fCAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyA9IFtdKSk7XG4gICAgaWYgKGluc3RhbGxlZFBsdWdpbnMuaW5kZXhPZihwbHVnaW4pID4gLTEpIHtcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcGx1Z2luID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICAgIGluc3RhbGxlZFBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgIHJldHVybiB0aGlzXG4gIH07XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBpbml0TWl4aW4kMSAoVnVlKSB7XG4gIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIHRoaXMub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLm9wdGlvbnMsIG1peGluKTtcbiAgICByZXR1cm4gdGhpc1xuICB9O1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdEV4dGVuZCAoVnVlKSB7XG4gIC8qKlxuICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcbiAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cbiAgICovXG4gIFZ1ZS5jaWQgPSAwO1xuICB2YXIgY2lkID0gMTtcblxuICAvKipcbiAgICogQ2xhc3MgaW5oZXJpdGFuY2VcbiAgICovXG4gIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuICAgIHZhciBTdXBlciA9IHRoaXM7XG4gICAgdmFyIFN1cGVySWQgPSBTdXBlci5jaWQ7XG4gICAgdmFyIGNhY2hlZEN0b3JzID0gZXh0ZW5kT3B0aW9ucy5fQ3RvciB8fCAoZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IHt9KTtcbiAgICBpZiAoY2FjaGVkQ3RvcnNbU3VwZXJJZF0pIHtcbiAgICAgIHJldHVybiBjYWNoZWRDdG9yc1tTdXBlcklkXVxuICAgIH1cblxuICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lKSB7XG4gICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIFN1YiA9IGZ1bmN0aW9uIFZ1ZUNvbXBvbmVudCAob3B0aW9ucykge1xuICAgICAgdGhpcy5faW5pdChvcHRpb25zKTtcbiAgICB9O1xuICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YjtcbiAgICBTdWIuY2lkID0gY2lkKys7XG4gICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoXG4gICAgICBTdXBlci5vcHRpb25zLFxuICAgICAgZXh0ZW5kT3B0aW9uc1xuICAgICk7XG4gICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cbiAgICAvLyBGb3IgcHJvcHMgYW5kIGNvbXB1dGVkIHByb3BlcnRpZXMsIHdlIGRlZmluZSB0aGUgcHJveHkgZ2V0dGVycyBvblxuICAgIC8vIHRoZSBWdWUgaW5zdGFuY2VzIGF0IGV4dGVuc2lvbiB0aW1lLCBvbiB0aGUgZXh0ZW5kZWQgcHJvdG90eXBlLiBUaGlzXG4gICAgLy8gYXZvaWRzIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBjYWxscyBmb3IgZWFjaCBpbnN0YW5jZSBjcmVhdGVkLlxuICAgIGlmIChTdWIub3B0aW9ucy5wcm9wcykge1xuICAgICAgaW5pdFByb3BzJDEoU3ViKTtcbiAgICB9XG4gICAgaWYgKFN1Yi5vcHRpb25zLmNvbXB1dGVkKSB7XG4gICAgICBpbml0Q29tcHV0ZWQkMShTdWIpO1xuICAgIH1cblxuICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uL21peGluL3BsdWdpbiB1c2FnZVxuICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgU3ViLm1peGluID0gU3VwZXIubWl4aW47XG4gICAgU3ViLnVzZSA9IFN1cGVyLnVzZTtcblxuICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcbiAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG4gICAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG4gICAgfSk7XG4gICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuICAgIH1cblxuICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIHN1cGVyIG9wdGlvbnMgYXQgZXh0ZW5zaW9uIHRpbWUuXG4gICAgLy8gbGF0ZXIgYXQgaW5zdGFudGlhdGlvbiB3ZSBjYW4gY2hlY2sgaWYgU3VwZXIncyBvcHRpb25zIGhhdmVcbiAgICAvLyBiZWVuIHVwZGF0ZWQuXG4gICAgU3ViLnN1cGVyT3B0aW9ucyA9IFN1cGVyLm9wdGlvbnM7XG4gICAgU3ViLmV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zO1xuICAgIFN1Yi5zZWFsZWRPcHRpb25zID0gZXh0ZW5kKHt9LCBTdWIub3B0aW9ucyk7XG5cbiAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuICAgIGNhY2hlZEN0b3JzW1N1cGVySWRdID0gU3ViO1xuICAgIHJldHVybiBTdWJcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW5pdFByb3BzJDEgKENvbXApIHtcbiAgdmFyIHByb3BzID0gQ29tcC5vcHRpb25zLnByb3BzO1xuICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcbiAgICBwcm94eShDb21wLnByb3RvdHlwZSwgXCJfcHJvcHNcIiwga2V5KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0Q29tcHV0ZWQkMSAoQ29tcCkge1xuICB2YXIgY29tcHV0ZWQgPSBDb21wLm9wdGlvbnMuY29tcHV0ZWQ7XG4gIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgIGRlZmluZUNvbXB1dGVkKENvbXAucHJvdG90eXBlLCBrZXksIGNvbXB1dGVkW2tleV0pO1xuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBpbml0QXNzZXRSZWdpc3RlcnMgKFZ1ZSkge1xuICAvKipcbiAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzLlxuICAgKi9cbiAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChcbiAgICAgIGlkLFxuICAgICAgZGVmaW5pdGlvblxuICAgICkge1xuICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdHlwZSA9PT0gJ2NvbXBvbmVudCcpIHtcbiAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gZGVmaW5pdGlvbi5uYW1lIHx8IGlkO1xuICAgICAgICAgIGRlZmluaXRpb24gPSB0aGlzLm9wdGlvbnMuX2Jhc2UuZXh0ZW5kKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnZGlyZWN0aXZlJyAmJiB0eXBlb2YgZGVmaW5pdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRlZmluaXRpb24gPSB7IGJpbmQ6IGRlZmluaXRpb24sIHVwZGF0ZTogZGVmaW5pdGlvbiB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblxuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZSAob3B0cykge1xuICByZXR1cm4gb3B0cyAmJiAob3B0cy5DdG9yLm9wdGlvbnMubmFtZSB8fCBvcHRzLnRhZylcbn1cblxuZnVuY3Rpb24gbWF0Y2hlcyAocGF0dGVybiwgbmFtZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLmluZGV4T2YobmFtZSkgPiAtMVxuICB9IGVsc2UgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KCcsJykuaW5kZXhPZihuYW1lKSA+IC0xXG4gIH0gZWxzZSBpZiAoaXNSZWdFeHAocGF0dGVybikpIHtcbiAgICByZXR1cm4gcGF0dGVybi50ZXN0KG5hbWUpXG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIHBydW5lQ2FjaGUgKGtlZXBBbGl2ZUluc3RhbmNlLCBmaWx0ZXIpIHtcbiAgdmFyIGNhY2hlID0ga2VlcEFsaXZlSW5zdGFuY2UuY2FjaGU7XG4gIHZhciBrZXlzID0ga2VlcEFsaXZlSW5zdGFuY2Uua2V5cztcbiAgdmFyIF92bm9kZSA9IGtlZXBBbGl2ZUluc3RhbmNlLl92bm9kZTtcbiAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG4gICAgdmFyIGNhY2hlZE5vZGUgPSBjYWNoZVtrZXldO1xuICAgIGlmIChjYWNoZWROb2RlKSB7XG4gICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY2FjaGVkTm9kZS5jb21wb25lbnRPcHRpb25zKTtcbiAgICAgIGlmIChuYW1lICYmICFmaWx0ZXIobmFtZSkpIHtcbiAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXksIGtleXMsIF92bm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeSAoXG4gIGNhY2hlLFxuICBrZXksXG4gIGtleXMsXG4gIGN1cnJlbnRcbikge1xuICB2YXIgY2FjaGVkJCQxID0gY2FjaGVba2V5XTtcbiAgaWYgKGNhY2hlZCQkMSAmJiAoIWN1cnJlbnQgfHwgY2FjaGVkJCQxLnRhZyAhPT0gY3VycmVudC50YWcpKSB7XG4gICAgY2FjaGVkJCQxLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7XG4gIH1cbiAgY2FjaGVba2V5XSA9IG51bGw7XG4gIHJlbW92ZShrZXlzLCBrZXkpO1xufVxuXG52YXIgcGF0dGVyblR5cGVzID0gW1N0cmluZywgUmVnRXhwLCBBcnJheV07XG5cbnZhciBLZWVwQWxpdmUgPSB7XG4gIG5hbWU6ICdrZWVwLWFsaXZlJyxcbiAgYWJzdHJhY3Q6IHRydWUsXG5cbiAgcHJvcHM6IHtcbiAgICBpbmNsdWRlOiBwYXR0ZXJuVHlwZXMsXG4gICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLFxuICAgIG1heDogW1N0cmluZywgTnVtYmVyXVxuICB9LFxuXG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQgKCkge1xuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMua2V5cyA9IFtdO1xuICB9LFxuXG4gIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkICgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIGZvciAodmFyIGtleSBpbiB0aGlzJDEuY2FjaGUpIHtcbiAgICAgIHBydW5lQ2FjaGVFbnRyeSh0aGlzJDEuY2FjaGUsIGtleSwgdGhpcyQxLmtleXMpO1xuICAgIH1cbiAgfSxcblxuICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkICgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHRoaXMuJHdhdGNoKCdpbmNsdWRlJywgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBtYXRjaGVzKHZhbCwgbmFtZSk7IH0pO1xuICAgIH0pO1xuICAgIHRoaXMuJHdhdGNoKCdleGNsdWRlJywgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiAhbWF0Y2hlcyh2YWwsIG5hbWUpOyB9KTtcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgdmFyIHNsb3QgPSB0aGlzLiRzbG90cy5kZWZhdWx0O1xuICAgIHZhciB2bm9kZSA9IGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoc2xvdCk7XG4gICAgdmFyIGNvbXBvbmVudE9wdGlvbnMgPSB2bm9kZSAmJiB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuICAgIGlmIChjb21wb25lbnRPcHRpb25zKSB7XG4gICAgICAvLyBjaGVjayBwYXR0ZXJuXG4gICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50T3B0aW9ucyk7XG4gICAgICB2YXIgcmVmID0gdGhpcztcbiAgICAgIHZhciBpbmNsdWRlID0gcmVmLmluY2x1ZGU7XG4gICAgICB2YXIgZXhjbHVkZSA9IHJlZi5leGNsdWRlO1xuICAgICAgaWYgKFxuICAgICAgICAvLyBub3QgaW5jbHVkZWRcbiAgICAgICAgKGluY2x1ZGUgJiYgKCFuYW1lIHx8ICFtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKSkgfHxcbiAgICAgICAgLy8gZXhjbHVkZWRcbiAgICAgICAgKGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB2bm9kZVxuICAgICAgfVxuXG4gICAgICB2YXIgcmVmJDEgPSB0aGlzO1xuICAgICAgdmFyIGNhY2hlID0gcmVmJDEuY2FjaGU7XG4gICAgICB2YXIga2V5cyA9IHJlZiQxLmtleXM7XG4gICAgICB2YXIga2V5ID0gdm5vZGUua2V5ID09IG51bGxcbiAgICAgICAgLy8gc2FtZSBjb25zdHJ1Y3RvciBtYXkgZ2V0IHJlZ2lzdGVyZWQgYXMgZGlmZmVyZW50IGxvY2FsIGNvbXBvbmVudHNcbiAgICAgICAgLy8gc28gY2lkIGFsb25lIGlzIG5vdCBlbm91Z2ggKCMzMjY5KVxuICAgICAgICA/IGNvbXBvbmVudE9wdGlvbnMuQ3Rvci5jaWQgKyAoY29tcG9uZW50T3B0aW9ucy50YWcgPyAoXCI6OlwiICsgKGNvbXBvbmVudE9wdGlvbnMudGFnKSkgOiAnJylcbiAgICAgICAgOiB2bm9kZS5rZXk7XG4gICAgICBpZiAoY2FjaGVba2V5XSkge1xuICAgICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IGNhY2hlW2tleV0uY29tcG9uZW50SW5zdGFuY2U7XG4gICAgICAgIC8vIG1ha2UgY3VycmVudCBrZXkgZnJlc2hlc3RcbiAgICAgICAgcmVtb3ZlKGtleXMsIGtleSk7XG4gICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FjaGVba2V5XSA9IHZub2RlO1xuICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgLy8gcHJ1bmUgb2xkZXN0IGVudHJ5XG4gICAgICAgIGlmICh0aGlzLm1heCAmJiBrZXlzLmxlbmd0aCA+IHBhcnNlSW50KHRoaXMubWF4KSkge1xuICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5c1swXSwga2V5cywgdGhpcy5fdm5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlIHx8IChzbG90ICYmIHNsb3RbMF0pXG4gIH1cbn1cblxudmFyIGJ1aWx0SW5Db21wb25lbnRzID0ge1xuICBLZWVwQWxpdmU6IEtlZXBBbGl2ZVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdEdsb2JhbEFQSSAoVnVlKSB7XG4gIC8vIGNvbmZpZ1xuICB2YXIgY29uZmlnRGVmID0ge307XG4gIGNvbmZpZ0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25maWc7IH07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgY29uZmlnRGVmLnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgICdEbyBub3QgcmVwbGFjZSB0aGUgVnVlLmNvbmZpZyBvYmplY3QsIHNldCBpbmRpdmlkdWFsIGZpZWxkcyBpbnN0ZWFkLidcbiAgICAgICk7XG4gICAgfTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLCAnY29uZmlnJywgY29uZmlnRGVmKTtcblxuICAvLyBleHBvc2VkIHV0aWwgbWV0aG9kcy5cbiAgLy8gTk9URTogdGhlc2UgYXJlIG5vdCBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIHB1YmxpYyBBUEkgLSBhdm9pZCByZWx5aW5nIG9uXG4gIC8vIHRoZW0gdW5sZXNzIHlvdSBhcmUgYXdhcmUgb2YgdGhlIHJpc2suXG4gIFZ1ZS51dGlsID0ge1xuICAgIHdhcm46IHdhcm4sXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgbWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG4gICAgZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlXG4gIH07XG5cbiAgVnVlLnNldCA9IHNldDtcbiAgVnVlLmRlbGV0ZSA9IGRlbDtcbiAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbiAgVnVlLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgVnVlLm9wdGlvbnNbdHlwZSArICdzJ10gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9KTtcblxuICAvLyB0aGlzIGlzIHVzZWQgdG8gaWRlbnRpZnkgdGhlIFwiYmFzZVwiIGNvbnN0cnVjdG9yIHRvIGV4dGVuZCBhbGwgcGxhaW4tb2JqZWN0XG4gIC8vIGNvbXBvbmVudHMgd2l0aCBpbiBXZWV4J3MgbXVsdGktaW5zdGFuY2Ugc2NlbmFyaW9zLlxuICBWdWUub3B0aW9ucy5fYmFzZSA9IFZ1ZTtcblxuICBleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgYnVpbHRJbkNvbXBvbmVudHMpO1xuXG4gIGluaXRVc2UoVnVlKTtcbiAgaW5pdE1peGluJDEoVnVlKTtcbiAgaW5pdEV4dGVuZChWdWUpO1xuICBpbml0QXNzZXRSZWdpc3RlcnMoVnVlKTtcbn1cblxuaW5pdEdsb2JhbEFQSShWdWUpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRpc1NlcnZlcicsIHtcbiAgZ2V0OiBpc1NlcnZlclJlbmRlcmluZ1xufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJHNzckNvbnRleHQnLCB7XG4gIGdldDogZnVuY3Rpb24gZ2V0ICgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybiB0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5zc3JDb250ZXh0XG4gIH1cbn0pO1xuXG4vLyBleHBvc2UgRnVuY3Rpb25hbFJlbmRlckNvbnRleHQgZm9yIHNzciBydW50aW1lIGhlbHBlciBpbnN0YWxsYXRpb25cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsICdGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCcsIHtcbiAgdmFsdWU6IEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0XG59KTtcblxuVnVlLnZlcnNpb24gPSAnMi41LjE2JztcblxuLyogICovXG5cbi8vIHRoZXNlIGFyZSByZXNlcnZlZCBmb3Igd2ViIGJlY2F1c2UgdGhleSBhcmUgZGlyZWN0bHkgY29tcGlsZWQgYXdheVxuLy8gZHVyaW5nIHRlbXBsYXRlIGNvbXBpbGF0aW9uXG52YXIgaXNSZXNlcnZlZEF0dHIgPSBtYWtlTWFwKCdzdHlsZSxjbGFzcycpO1xuXG4vLyBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHVzaW5nIHByb3BzIGZvciBiaW5kaW5nXG52YXIgYWNjZXB0VmFsdWUgPSBtYWtlTWFwKCdpbnB1dCx0ZXh0YXJlYSxvcHRpb24sc2VsZWN0LHByb2dyZXNzJyk7XG52YXIgbXVzdFVzZVByb3AgPSBmdW5jdGlvbiAodGFnLCB0eXBlLCBhdHRyKSB7XG4gIHJldHVybiAoXG4gICAgKGF0dHIgPT09ICd2YWx1ZScgJiYgYWNjZXB0VmFsdWUodGFnKSkgJiYgdHlwZSAhPT0gJ2J1dHRvbicgfHxcbiAgICAoYXR0ciA9PT0gJ3NlbGVjdGVkJyAmJiB0YWcgPT09ICdvcHRpb24nKSB8fFxuICAgIChhdHRyID09PSAnY2hlY2tlZCcgJiYgdGFnID09PSAnaW5wdXQnKSB8fFxuICAgIChhdHRyID09PSAnbXV0ZWQnICYmIHRhZyA9PT0gJ3ZpZGVvJylcbiAgKVxufTtcblxudmFyIGlzRW51bWVyYXRlZEF0dHIgPSBtYWtlTWFwKCdjb250ZW50ZWRpdGFibGUsZHJhZ2dhYmxlLHNwZWxsY2hlY2snKTtcblxudmFyIGlzQm9vbGVhbkF0dHIgPSBtYWtlTWFwKFxuICAnYWxsb3dmdWxsc2NyZWVuLGFzeW5jLGF1dG9mb2N1cyxhdXRvcGxheSxjaGVja2VkLGNvbXBhY3QsY29udHJvbHMsZGVjbGFyZSwnICtcbiAgJ2RlZmF1bHQsZGVmYXVsdGNoZWNrZWQsZGVmYXVsdG11dGVkLGRlZmF1bHRzZWxlY3RlZCxkZWZlcixkaXNhYmxlZCwnICtcbiAgJ2VuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsJyArXG4gICdtdXRlZCxub2hyZWYsbm9yZXNpemUsbm9zaGFkZSxub3ZhbGlkYXRlLG5vd3JhcCxvcGVuLHBhdXNlb25leGl0LHJlYWRvbmx5LCcgK1xuICAncmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLHNlbGVjdGVkLHNvcnRhYmxlLHRyYW5zbGF0ZSwnICtcbiAgJ3RydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUnXG4pO1xuXG52YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcblxudmFyIGlzWGxpbmsgPSBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gbmFtZS5jaGFyQXQoNSkgPT09ICc6JyAmJiBuYW1lLnNsaWNlKDAsIDUpID09PSAneGxpbmsnXG59O1xuXG52YXIgZ2V0WGxpbmtQcm9wID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIGlzWGxpbmsobmFtZSkgPyBuYW1lLnNsaWNlKDYsIG5hbWUubGVuZ3RoKSA6ICcnXG59O1xuXG52YXIgaXNGYWxzeUF0dHJWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gZmFsc2Vcbn07XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBnZW5DbGFzc0ZvclZub2RlICh2bm9kZSkge1xuICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG4gIHZhciBwYXJlbnROb2RlID0gdm5vZGU7XG4gIHZhciBjaGlsZE5vZGUgPSB2bm9kZTtcbiAgd2hpbGUgKGlzRGVmKGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHtcbiAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlO1xuICAgIGlmIChjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEpIHtcbiAgICAgIGRhdGEgPSBtZXJnZUNsYXNzRGF0YShjaGlsZE5vZGUuZGF0YSwgZGF0YSk7XG4gICAgfVxuICB9XG4gIHdoaWxlIChpc0RlZihwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnQpKSB7XG4gICAgaWYgKHBhcmVudE5vZGUgJiYgcGFyZW50Tm9kZS5kYXRhKSB7XG4gICAgICBkYXRhID0gbWVyZ2VDbGFzc0RhdGEoZGF0YSwgcGFyZW50Tm9kZS5kYXRhKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlbmRlckNsYXNzKGRhdGEuc3RhdGljQ2xhc3MsIGRhdGEuY2xhc3MpXG59XG5cbmZ1bmN0aW9uIG1lcmdlQ2xhc3NEYXRhIChjaGlsZCwgcGFyZW50KSB7XG4gIHJldHVybiB7XG4gICAgc3RhdGljQ2xhc3M6IGNvbmNhdChjaGlsZC5zdGF0aWNDbGFzcywgcGFyZW50LnN0YXRpY0NsYXNzKSxcbiAgICBjbGFzczogaXNEZWYoY2hpbGQuY2xhc3MpXG4gICAgICA/IFtjaGlsZC5jbGFzcywgcGFyZW50LmNsYXNzXVxuICAgICAgOiBwYXJlbnQuY2xhc3NcbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJDbGFzcyAoXG4gIHN0YXRpY0NsYXNzLFxuICBkeW5hbWljQ2xhc3Ncbikge1xuICBpZiAoaXNEZWYoc3RhdGljQ2xhc3MpIHx8IGlzRGVmKGR5bmFtaWNDbGFzcykpIHtcbiAgICByZXR1cm4gY29uY2F0KHN0YXRpY0NsYXNzLCBzdHJpbmdpZnlDbGFzcyhkeW5hbWljQ2xhc3MpKVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJldHVybiAnJ1xufVxuXG5mdW5jdGlvbiBjb25jYXQgKGEsIGIpIHtcbiAgcmV0dXJuIGEgPyBiID8gKGEgKyAnICcgKyBiKSA6IGEgOiAoYiB8fCAnJylcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5Q2xhc3MgKHZhbHVlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBzdHJpbmdpZnlBcnJheSh2YWx1ZSlcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmeU9iamVjdCh2YWx1ZSlcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJldHVybiAnJ1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlBcnJheSAodmFsdWUpIHtcbiAgdmFyIHJlcyA9ICcnO1xuICB2YXIgc3RyaW5naWZpZWQ7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKGlzRGVmKHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5Q2xhc3ModmFsdWVbaV0pKSAmJiBzdHJpbmdpZmllZCAhPT0gJycpIHtcbiAgICAgIGlmIChyZXMpIHsgcmVzICs9ICcgJzsgfVxuICAgICAgcmVzICs9IHN0cmluZ2lmaWVkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeU9iamVjdCAodmFsdWUpIHtcbiAgdmFyIHJlcyA9ICcnO1xuICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICBpZiAodmFsdWVba2V5XSkge1xuICAgICAgaWYgKHJlcykgeyByZXMgKz0gJyAnOyB9XG4gICAgICByZXMgKz0ga2V5O1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qICAqL1xuXG52YXIgbmFtZXNwYWNlTWFwID0ge1xuICBzdmc6ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXG4gIG1hdGg6ICdodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MJ1xufTtcblxudmFyIGlzSFRNTFRhZyA9IG1ha2VNYXAoXG4gICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSwnICtcbiAgJ2FkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbiwnICtcbiAgJ2RpdixkZCxkbCxkdCxmaWdjYXB0aW9uLGZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLCcgK1xuICAnYSxiLGFiYnIsYmRpLGJkbyxicixjaXRlLGNvZGUsZGF0YSxkZm4sZW0saSxrYmQsbWFyayxxLHJwLHJ0LHJ0YyxydWJ5LCcgK1xuICAncyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sJyArXG4gICdlbWJlZCxvYmplY3QscGFyYW0sc291cmNlLGNhbnZhcyxzY3JpcHQsbm9zY3JpcHQsZGVsLGlucywnICtcbiAgJ2NhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLHRoLHRyLCcgK1xuICAnYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbiwnICtcbiAgJ291dHB1dCxwcm9ncmVzcyxzZWxlY3QsdGV4dGFyZWEsJyArXG4gICdkZXRhaWxzLGRpYWxvZyxtZW51LG1lbnVpdGVtLHN1bW1hcnksJyArXG4gICdjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290J1xuKTtcblxuLy8gdGhpcyBtYXAgaXMgaW50ZW50aW9uYWxseSBzZWxlY3RpdmUsIG9ubHkgY292ZXJpbmcgU1ZHIGVsZW1lbnRzIHRoYXQgbWF5XG4vLyBjb250YWluIGNoaWxkIGVsZW1lbnRzLlxudmFyIGlzU1ZHID0gbWFrZU1hcChcbiAgJ3N2ZyxhbmltYXRlLGNpcmNsZSxjbGlwcGF0aCxjdXJzb3IsZGVmcyxkZXNjLGVsbGlwc2UsZmlsdGVyLGZvbnQtZmFjZSwnICtcbiAgJ2ZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLCcgK1xuICAncG9seWdvbixwb2x5bGluZSxyZWN0LHN3aXRjaCxzeW1ib2wsdGV4dCx0ZXh0cGF0aCx0c3Bhbix1c2UsdmlldycsXG4gIHRydWVcbik7XG5cblxuXG52YXIgaXNSZXNlcnZlZFRhZyA9IGZ1bmN0aW9uICh0YWcpIHtcbiAgcmV0dXJuIGlzSFRNTFRhZyh0YWcpIHx8IGlzU1ZHKHRhZylcbn07XG5cbmZ1bmN0aW9uIGdldFRhZ05hbWVzcGFjZSAodGFnKSB7XG4gIGlmIChpc1NWRyh0YWcpKSB7XG4gICAgcmV0dXJuICdzdmcnXG4gIH1cbiAgLy8gYmFzaWMgc3VwcG9ydCBmb3IgTWF0aE1MXG4gIC8vIG5vdGUgaXQgZG9lc24ndCBzdXBwb3J0IG90aGVyIE1hdGhNTCBlbGVtZW50cyBiZWluZyBjb21wb25lbnQgcm9vdHNcbiAgaWYgKHRhZyA9PT0gJ21hdGgnKSB7XG4gICAgcmV0dXJuICdtYXRoJ1xuICB9XG59XG5cbnZhciB1bmtub3duRWxlbWVudENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmZ1bmN0aW9uIGlzVW5rbm93bkVsZW1lbnQgKHRhZykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFpbkJyb3dzZXIpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIGlmIChpc1Jlc2VydmVkVGFnKHRhZykpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICB0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gIT0gbnVsbCkge1xuICAgIHJldHVybiB1bmtub3duRWxlbWVudENhY2hlW3RhZ11cbiAgfVxuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG4gICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAoXG4gICAgICBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fFxuICAgICAgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudFxuICAgICkpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpKVxuICB9XG59XG5cbnZhciBpc1RleHRJbnB1dFR5cGUgPSBtYWtlTWFwKCd0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCcpO1xuXG4vKiAgKi9cblxuLyoqXG4gKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cbiAqL1xuZnVuY3Rpb24gcXVlcnkgKGVsKSB7XG4gIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgaWYgKCFzZWxlY3RlZCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICAnQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIGVsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgfVxuICAgIHJldHVybiBzZWxlY3RlZFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBlbFxuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50JDEgKHRhZ05hbWUsIHZub2RlKSB7XG4gIHZhciBlbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICBpZiAodGFnTmFtZSAhPT0gJ3NlbGVjdCcpIHtcbiAgICByZXR1cm4gZWxtXG4gIH1cbiAgLy8gZmFsc2Ugb3IgbnVsbCB3aWxsIHJlbW92ZSB0aGUgYXR0cmlidXRlIGJ1dCB1bmRlZmluZWQgd2lsbCBub3RcbiAgaWYgKHZub2RlLmRhdGEgJiYgdm5vZGUuZGF0YS5hdHRycyAmJiB2bm9kZS5kYXRhLmF0dHJzLm11bHRpcGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbG0uc2V0QXR0cmlidXRlKCdtdWx0aXBsZScsICdtdWx0aXBsZScpO1xuICB9XG4gIHJldHVybiBlbG1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudE5TIChuYW1lc3BhY2UsIHRhZ05hbWUpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2VNYXBbbmFtZXNwYWNlXSwgdGFnTmFtZSlcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGV4dE5vZGUgKHRleHQpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnQgKHRleHQpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQodGV4dClcbn1cblxuZnVuY3Rpb24gaW5zZXJ0QmVmb3JlIChwYXJlbnROb2RlLCBuZXdOb2RlLCByZWZlcmVuY2VOb2RlKSB7XG4gIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDaGlsZCAobm9kZSwgY2hpbGQpIHtcbiAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZENoaWxkIChub2RlLCBjaGlsZCkge1xuICBub2RlLmFwcGVuZENoaWxkKGNoaWxkKTtcbn1cblxuZnVuY3Rpb24gcGFyZW50Tm9kZSAobm9kZSkge1xuICByZXR1cm4gbm9kZS5wYXJlbnROb2RlXG59XG5cbmZ1bmN0aW9uIG5leHRTaWJsaW5nIChub2RlKSB7XG4gIHJldHVybiBub2RlLm5leHRTaWJsaW5nXG59XG5cbmZ1bmN0aW9uIHRhZ05hbWUgKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUudGFnTmFtZVxufVxuXG5mdW5jdGlvbiBzZXRUZXh0Q29udGVudCAobm9kZSwgdGV4dCkge1xuICBub2RlLnRleHRDb250ZW50ID0gdGV4dDtcbn1cblxuZnVuY3Rpb24gc2V0U3R5bGVTY29wZSAobm9kZSwgc2NvcGVJZCkge1xuICBub2RlLnNldEF0dHJpYnV0ZShzY29wZUlkLCAnJyk7XG59XG5cblxudmFyIG5vZGVPcHMgPSBPYmplY3QuZnJlZXplKHtcblx0Y3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCQxLFxuXHRjcmVhdGVFbGVtZW50TlM6IGNyZWF0ZUVsZW1lbnROUyxcblx0Y3JlYXRlVGV4dE5vZGU6IGNyZWF0ZVRleHROb2RlLFxuXHRjcmVhdGVDb21tZW50OiBjcmVhdGVDb21tZW50LFxuXHRpbnNlcnRCZWZvcmU6IGluc2VydEJlZm9yZSxcblx0cmVtb3ZlQ2hpbGQ6IHJlbW92ZUNoaWxkLFxuXHRhcHBlbmRDaGlsZDogYXBwZW5kQ2hpbGQsXG5cdHBhcmVudE5vZGU6IHBhcmVudE5vZGUsXG5cdG5leHRTaWJsaW5nOiBuZXh0U2libGluZyxcblx0dGFnTmFtZTogdGFnTmFtZSxcblx0c2V0VGV4dENvbnRlbnQ6IHNldFRleHRDb250ZW50LFxuXHRzZXRTdHlsZVNjb3BlOiBzZXRTdHlsZVNjb3BlXG59KTtcblxuLyogICovXG5cbnZhciByZWYgPSB7XG4gIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlIChfLCB2bm9kZSkge1xuICAgIHJlZ2lzdGVyUmVmKHZub2RlKTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUgKG9sZFZub2RlLCB2bm9kZSkge1xuICAgIGlmIChvbGRWbm9kZS5kYXRhLnJlZiAhPT0gdm5vZGUuZGF0YS5yZWYpIHtcbiAgICAgIHJlZ2lzdGVyUmVmKG9sZFZub2RlLCB0cnVlKTtcbiAgICAgIHJlZ2lzdGVyUmVmKHZub2RlKTtcbiAgICB9XG4gIH0sXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3kgKHZub2RlKSB7XG4gICAgcmVnaXN0ZXJSZWYodm5vZGUsIHRydWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyUmVmICh2bm9kZSwgaXNSZW1vdmFsKSB7XG4gIHZhciBrZXkgPSB2bm9kZS5kYXRhLnJlZjtcbiAgaWYgKCFpc0RlZihrZXkpKSB7IHJldHVybiB9XG5cbiAgdmFyIHZtID0gdm5vZGUuY29udGV4dDtcbiAgdmFyIHJlZiA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlIHx8IHZub2RlLmVsbTtcbiAgdmFyIHJlZnMgPSB2bS4kcmVmcztcbiAgaWYgKGlzUmVtb3ZhbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJlZnNba2V5XSkpIHtcbiAgICAgIHJlbW92ZShyZWZzW2tleV0sIHJlZik7XG4gICAgfSBlbHNlIGlmIChyZWZzW2tleV0gPT09IHJlZikge1xuICAgICAgcmVmc1trZXldID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAodm5vZGUuZGF0YS5yZWZJbkZvcikge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlZnNba2V5XSkpIHtcbiAgICAgICAgcmVmc1trZXldID0gW3JlZl07XG4gICAgICB9IGVsc2UgaWYgKHJlZnNba2V5XS5pbmRleE9mKHJlZikgPCAwKSB7XG4gICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuICAgICAgICByZWZzW2tleV0ucHVzaChyZWYpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWZzW2tleV0gPSByZWY7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVmlydHVhbCBET00gcGF0Y2hpbmcgYWxnb3JpdGhtIGJhc2VkIG9uIFNuYWJiZG9tIGJ5XG4gKiBTaW1vbiBGcmlpcyBWaW5kdW0gKEBwYWxkZXBpbmQpXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9wYWxkZXBpbmQvc25hYmJkb20vYmxvYi9tYXN0ZXIvTElDRU5TRVxuICpcbiAqIG1vZGlmaWVkIGJ5IEV2YW4gWW91IChAeXl4OTkwODAzKVxuICpcbiAqIE5vdCB0eXBlLWNoZWNraW5nIHRoaXMgYmVjYXVzZSB0aGlzIGZpbGUgaXMgcGVyZi1jcml0aWNhbCBhbmQgdGhlIGNvc3RcbiAqIG9mIG1ha2luZyBmbG93IHVuZGVyc3RhbmQgaXQgaXMgbm90IHdvcnRoIGl0LlxuICovXG5cbnZhciBlbXB0eU5vZGUgPSBuZXcgVk5vZGUoJycsIHt9LCBbXSk7XG5cbnZhciBob29rcyA9IFsnY3JlYXRlJywgJ2FjdGl2YXRlJywgJ3VwZGF0ZScsICdyZW1vdmUnLCAnZGVzdHJveSddO1xuXG5mdW5jdGlvbiBzYW1lVm5vZGUgKGEsIGIpIHtcbiAgcmV0dXJuIChcbiAgICBhLmtleSA9PT0gYi5rZXkgJiYgKFxuICAgICAgKFxuICAgICAgICBhLnRhZyA9PT0gYi50YWcgJiZcbiAgICAgICAgYS5pc0NvbW1lbnQgPT09IGIuaXNDb21tZW50ICYmXG4gICAgICAgIGlzRGVmKGEuZGF0YSkgPT09IGlzRGVmKGIuZGF0YSkgJiZcbiAgICAgICAgc2FtZUlucHV0VHlwZShhLCBiKVxuICAgICAgKSB8fCAoXG4gICAgICAgIGlzVHJ1ZShhLmlzQXN5bmNQbGFjZWhvbGRlcikgJiZcbiAgICAgICAgYS5hc3luY0ZhY3RvcnkgPT09IGIuYXN5bmNGYWN0b3J5ICYmXG4gICAgICAgIGlzVW5kZWYoYi5hc3luY0ZhY3RvcnkuZXJyb3IpXG4gICAgICApXG4gICAgKVxuICApXG59XG5cbmZ1bmN0aW9uIHNhbWVJbnB1dFR5cGUgKGEsIGIpIHtcbiAgaWYgKGEudGFnICE9PSAnaW5wdXQnKSB7IHJldHVybiB0cnVlIH1cbiAgdmFyIGk7XG4gIHZhciB0eXBlQSA9IGlzRGVmKGkgPSBhLmRhdGEpICYmIGlzRGVmKGkgPSBpLmF0dHJzKSAmJiBpLnR5cGU7XG4gIHZhciB0eXBlQiA9IGlzRGVmKGkgPSBiLmRhdGEpICYmIGlzRGVmKGkgPSBpLmF0dHJzKSAmJiBpLnR5cGU7XG4gIHJldHVybiB0eXBlQSA9PT0gdHlwZUIgfHwgaXNUZXh0SW5wdXRUeXBlKHR5cGVBKSAmJiBpc1RleHRJbnB1dFR5cGUodHlwZUIpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUtleVRvT2xkSWR4IChjaGlsZHJlbiwgYmVnaW5JZHgsIGVuZElkeCkge1xuICB2YXIgaSwga2V5O1xuICB2YXIgbWFwID0ge307XG4gIGZvciAoaSA9IGJlZ2luSWR4OyBpIDw9IGVuZElkeDsgKytpKSB7XG4gICAga2V5ID0gY2hpbGRyZW5baV0ua2V5O1xuICAgIGlmIChpc0RlZihrZXkpKSB7IG1hcFtrZXldID0gaTsgfVxuICB9XG4gIHJldHVybiBtYXBcbn1cblxuZnVuY3Rpb24gY3JlYXRlUGF0Y2hGdW5jdGlvbiAoYmFja2VuZCkge1xuICB2YXIgaSwgajtcbiAgdmFyIGNicyA9IHt9O1xuXG4gIHZhciBtb2R1bGVzID0gYmFja2VuZC5tb2R1bGVzO1xuICB2YXIgbm9kZU9wcyA9IGJhY2tlbmQubm9kZU9wcztcblxuICBmb3IgKGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyArK2kpIHtcbiAgICBjYnNbaG9va3NbaV1dID0gW107XG4gICAgZm9yIChqID0gMDsgaiA8IG1vZHVsZXMubGVuZ3RoOyArK2opIHtcbiAgICAgIGlmIChpc0RlZihtb2R1bGVzW2pdW2hvb2tzW2ldXSkpIHtcbiAgICAgICAgY2JzW2hvb2tzW2ldXS5wdXNoKG1vZHVsZXNbal1baG9va3NbaV1dKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlbXB0eU5vZGVBdCAoZWxtKSB7XG4gICAgcmV0dXJuIG5ldyBWTm9kZShub2RlT3BzLnRhZ05hbWUoZWxtKS50b0xvd2VyQ2FzZSgpLCB7fSwgW10sIHVuZGVmaW5lZCwgZWxtKVxuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlUm1DYiAoY2hpbGRFbG0sIGxpc3RlbmVycykge1xuICAgIGZ1bmN0aW9uIHJlbW92ZSAoKSB7XG4gICAgICBpZiAoLS1yZW1vdmUubGlzdGVuZXJzID09PSAwKSB7XG4gICAgICAgIHJlbW92ZU5vZGUoY2hpbGRFbG0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZW1vdmUubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuICAgIHJldHVybiByZW1vdmVcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZU5vZGUgKGVsKSB7XG4gICAgdmFyIHBhcmVudCA9IG5vZGVPcHMucGFyZW50Tm9kZShlbCk7XG4gICAgLy8gZWxlbWVudCBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gcmVtb3ZlZCBkdWUgdG8gdi1odG1sIC8gdi10ZXh0XG4gICAgaWYgKGlzRGVmKHBhcmVudCkpIHtcbiAgICAgIG5vZGVPcHMucmVtb3ZlQ2hpbGQocGFyZW50LCBlbCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCQkMSAodm5vZGUsIGluVlByZSkge1xuICAgIHJldHVybiAoXG4gICAgICAhaW5WUHJlICYmXG4gICAgICAhdm5vZGUubnMgJiZcbiAgICAgICEoXG4gICAgICAgIGNvbmZpZy5pZ25vcmVkRWxlbWVudHMubGVuZ3RoICYmXG4gICAgICAgIGNvbmZpZy5pZ25vcmVkRWxlbWVudHMuc29tZShmdW5jdGlvbiAoaWdub3JlKSB7XG4gICAgICAgICAgcmV0dXJuIGlzUmVnRXhwKGlnbm9yZSlcbiAgICAgICAgICAgID8gaWdub3JlLnRlc3Qodm5vZGUudGFnKVxuICAgICAgICAgICAgOiBpZ25vcmUgPT09IHZub2RlLnRhZ1xuICAgICAgICB9KVxuICAgICAgKSAmJlxuICAgICAgY29uZmlnLmlzVW5rbm93bkVsZW1lbnQodm5vZGUudGFnKVxuICAgIClcbiAgfVxuXG4gIHZhciBjcmVhdGluZ0VsbUluVlByZSA9IDA7XG5cbiAgZnVuY3Rpb24gY3JlYXRlRWxtIChcbiAgICB2bm9kZSxcbiAgICBpbnNlcnRlZFZub2RlUXVldWUsXG4gICAgcGFyZW50RWxtLFxuICAgIHJlZkVsbSxcbiAgICBuZXN0ZWQsXG4gICAgb3duZXJBcnJheSxcbiAgICBpbmRleFxuICApIHtcbiAgICBpZiAoaXNEZWYodm5vZGUuZWxtKSAmJiBpc0RlZihvd25lckFycmF5KSkge1xuICAgICAgLy8gVGhpcyB2bm9kZSB3YXMgdXNlZCBpbiBhIHByZXZpb3VzIHJlbmRlciFcbiAgICAgIC8vIG5vdyBpdCdzIHVzZWQgYXMgYSBuZXcgbm9kZSwgb3ZlcndyaXRpbmcgaXRzIGVsbSB3b3VsZCBjYXVzZVxuICAgICAgLy8gcG90ZW50aWFsIHBhdGNoIGVycm9ycyBkb3duIHRoZSByb2FkIHdoZW4gaXQncyB1c2VkIGFzIGFuIGluc2VydGlvblxuICAgICAgLy8gcmVmZXJlbmNlIG5vZGUuIEluc3RlYWQsIHdlIGNsb25lIHRoZSBub2RlIG9uLWRlbWFuZCBiZWZvcmUgY3JlYXRpbmdcbiAgICAgIC8vIGFzc29jaWF0ZWQgRE9NIGVsZW1lbnQgZm9yIGl0LlxuICAgICAgdm5vZGUgPSBvd25lckFycmF5W2luZGV4XSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgIH1cblxuICAgIHZub2RlLmlzUm9vdEluc2VydCA9ICFuZXN0ZWQ7IC8vIGZvciB0cmFuc2l0aW9uIGVudGVyIGNoZWNrXG4gICAgaWYgKGNyZWF0ZUNvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcbiAgICB2YXIgdGFnID0gdm5vZGUudGFnO1xuICAgIGlmIChpc0RlZih0YWcpKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnByZSkge1xuICAgICAgICAgIGNyZWF0aW5nRWxtSW5WUHJlKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVW5rbm93bkVsZW1lbnQkJDEodm5vZGUsIGNyZWF0aW5nRWxtSW5WUHJlKSkge1xuICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAnVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArXG4gICAgICAgICAgICAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArXG4gICAgICAgICAgICAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nLFxuICAgICAgICAgICAgdm5vZGUuY29udGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdm5vZGUuZWxtID0gdm5vZGUubnNcbiAgICAgICAgPyBub2RlT3BzLmNyZWF0ZUVsZW1lbnROUyh2bm9kZS5ucywgdGFnKVxuICAgICAgICA6IG5vZGVPcHMuY3JlYXRlRWxlbWVudCh0YWcsIHZub2RlKTtcbiAgICAgIHNldFNjb3BlKHZub2RlKTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICB7XG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7XG4gICAgICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBkYXRhICYmIGRhdGEucHJlKSB7XG4gICAgICAgIGNyZWF0aW5nRWxtSW5WUHJlLS07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1RydWUodm5vZGUuaXNDb21tZW50KSkge1xuICAgICAgdm5vZGUuZWxtID0gbm9kZU9wcy5jcmVhdGVDb21tZW50KHZub2RlLnRleHQpO1xuICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2bm9kZS5lbG0gPSBub2RlT3BzLmNyZWF0ZVRleHROb2RlKHZub2RlLnRleHQpO1xuICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pIHtcbiAgICB2YXIgaSA9IHZub2RlLmRhdGE7XG4gICAgaWYgKGlzRGVmKGkpKSB7XG4gICAgICB2YXIgaXNSZWFjdGl2YXRlZCA9IGlzRGVmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSAmJiBpLmtlZXBBbGl2ZTtcbiAgICAgIGlmIChpc0RlZihpID0gaS5ob29rKSAmJiBpc0RlZihpID0gaS5pbml0KSkge1xuICAgICAgICBpKHZub2RlLCBmYWxzZSAvKiBoeWRyYXRpbmcgKi8sIHBhcmVudEVsbSwgcmVmRWxtKTtcbiAgICAgIH1cbiAgICAgIC8vIGFmdGVyIGNhbGxpbmcgdGhlIGluaXQgaG9vaywgaWYgdGhlIHZub2RlIGlzIGEgY2hpbGQgY29tcG9uZW50XG4gICAgICAvLyBpdCBzaG91bGQndmUgY3JlYXRlZCBhIGNoaWxkIGluc3RhbmNlIGFuZCBtb3VudGVkIGl0LiB0aGUgY2hpbGRcbiAgICAgIC8vIGNvbXBvbmVudCBhbHNvIGhhcyBzZXQgdGhlIHBsYWNlaG9sZGVyIHZub2RlJ3MgZWxtLlxuICAgICAgLy8gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0IHJldHVybiB0aGUgZWxlbWVudCBhbmQgYmUgZG9uZS5cbiAgICAgIGlmIChpc0RlZih2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgaWYgKGlzVHJ1ZShpc1JlYWN0aXZhdGVkKSkge1xuICAgICAgICAgIHJlYWN0aXZhdGVDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5pdENvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgIGlmIChpc0RlZih2bm9kZS5kYXRhLnBlbmRpbmdJbnNlcnQpKSB7XG4gICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaC5hcHBseShpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCk7XG4gICAgICB2bm9kZS5kYXRhLnBlbmRpbmdJbnNlcnQgPSBudWxsO1xuICAgIH1cbiAgICB2bm9kZS5lbG0gPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kZWw7XG4gICAgaWYgKGlzUGF0Y2hhYmxlKHZub2RlKSkge1xuICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICBzZXRTY29wZSh2bm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGVtcHR5IGNvbXBvbmVudCByb290LlxuICAgICAgLy8gc2tpcCBhbGwgZWxlbWVudC1yZWxhdGVkIG1vZHVsZXMgZXhjZXB0IGZvciByZWYgKCMzNDU1KVxuICAgICAgcmVnaXN0ZXJSZWYodm5vZGUpO1xuICAgICAgLy8gbWFrZSBzdXJlIHRvIGludm9rZSB0aGUgaW5zZXJ0IGhvb2tcbiAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKHZub2RlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFjdGl2YXRlQ29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuICAgIHZhciBpO1xuICAgIC8vIGhhY2sgZm9yICM0MzM5OiBhIHJlYWN0aXZhdGVkIGNvbXBvbmVudCB3aXRoIGlubmVyIHRyYW5zaXRpb25cbiAgICAvLyBkb2VzIG5vdCB0cmlnZ2VyIGJlY2F1c2UgdGhlIGlubmVyIG5vZGUncyBjcmVhdGVkIGhvb2tzIGFyZSBub3QgY2FsbGVkXG4gICAgLy8gYWdhaW4uIEl0J3Mgbm90IGlkZWFsIHRvIGludm9sdmUgbW9kdWxlLXNwZWNpZmljIGxvZ2ljIGluIGhlcmUgYnV0XG4gICAgLy8gdGhlcmUgZG9lc24ndCBzZWVtIHRvIGJlIGEgYmV0dGVyIHdheSB0byBkbyBpdC5cbiAgICB2YXIgaW5uZXJOb2RlID0gdm5vZGU7XG4gICAgd2hpbGUgKGlubmVyTm9kZS5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgaW5uZXJOb2RlID0gaW5uZXJOb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcbiAgICAgIGlmIChpc0RlZihpID0gaW5uZXJOb2RlLmRhdGEpICYmIGlzRGVmKGkgPSBpLnRyYW5zaXRpb24pKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMuYWN0aXZhdGUubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBjYnMuYWN0aXZhdGVbaV0oZW1wdHlOb2RlLCBpbm5lck5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKGlubmVyTm9kZSk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIC8vIHVubGlrZSBhIG5ld2x5IGNyZWF0ZWQgY29tcG9uZW50LFxuICAgIC8vIGEgcmVhY3RpdmF0ZWQga2VlcC1hbGl2ZSBjb21wb25lbnQgZG9lc24ndCBpbnNlcnQgaXRzZWxmXG4gICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5zZXJ0IChwYXJlbnQsIGVsbSwgcmVmJCQxKSB7XG4gICAgaWYgKGlzRGVmKHBhcmVudCkpIHtcbiAgICAgIGlmIChpc0RlZihyZWYkJDEpKSB7XG4gICAgICAgIGlmIChyZWYkJDEucGFyZW50Tm9kZSA9PT0gcGFyZW50KSB7XG4gICAgICAgICAgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50LCBlbG0sIHJlZiQkMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVPcHMuYXBwZW5kQ2hpbGQocGFyZW50LCBlbG0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNoaWxkcmVuICh2bm9kZSwgY2hpbGRyZW4sIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY2hlY2tEdXBsaWNhdGVLZXlzKGNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY3JlYXRlRWxtKGNoaWxkcmVuW2ldLCBpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmVsbSwgbnVsbCwgdHJ1ZSwgY2hpbGRyZW4sIGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNQcmltaXRpdmUodm5vZGUudGV4dCkpIHtcbiAgICAgIG5vZGVPcHMuYXBwZW5kQ2hpbGQodm5vZGUuZWxtLCBub2RlT3BzLmNyZWF0ZVRleHROb2RlKFN0cmluZyh2bm9kZS50ZXh0KSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUGF0Y2hhYmxlICh2bm9kZSkge1xuICAgIHdoaWxlICh2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG4gICAgfVxuICAgIHJldHVybiBpc0RlZih2bm9kZS50YWcpXG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VDcmVhdGVIb29rcyAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkge1xuICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgdm5vZGUpO1xuICAgIH1cbiAgICBpID0gdm5vZGUuZGF0YS5ob29rOyAvLyBSZXVzZSB2YXJpYWJsZVxuICAgIGlmIChpc0RlZihpKSkge1xuICAgICAgaWYgKGlzRGVmKGkuY3JlYXRlKSkgeyBpLmNyZWF0ZShlbXB0eU5vZGUsIHZub2RlKTsgfVxuICAgICAgaWYgKGlzRGVmKGkuaW5zZXJ0KSkgeyBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7IH1cbiAgICB9XG4gIH1cblxuICAvLyBzZXQgc2NvcGUgaWQgYXR0cmlidXRlIGZvciBzY29wZWQgQ1NTLlxuICAvLyB0aGlzIGlzIGltcGxlbWVudGVkIGFzIGEgc3BlY2lhbCBjYXNlIHRvIGF2b2lkIHRoZSBvdmVyaGVhZFxuICAvLyBvZiBnb2luZyB0aHJvdWdoIHRoZSBub3JtYWwgYXR0cmlidXRlIHBhdGNoaW5nIHByb2Nlc3MuXG4gIGZ1bmN0aW9uIHNldFNjb3BlICh2bm9kZSkge1xuICAgIHZhciBpO1xuICAgIGlmIChpc0RlZihpID0gdm5vZGUuZm5TY29wZUlkKSkge1xuICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhbmNlc3RvciA9IHZub2RlO1xuICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgICAgIGlmIChpc0RlZihpID0gYW5jZXN0b3IuY29udGV4dCkgJiYgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpKSB7XG4gICAgICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGZvciBzbG90IGNvbnRlbnQgdGhleSBzaG91bGQgYWxzbyBnZXQgdGhlIHNjb3BlSWQgZnJvbSB0aGUgaG9zdCBpbnN0YW5jZS5cbiAgICBpZiAoaXNEZWYoaSA9IGFjdGl2ZUluc3RhbmNlKSAmJlxuICAgICAgaSAhPT0gdm5vZGUuY29udGV4dCAmJlxuICAgICAgaSAhPT0gdm5vZGUuZm5Db250ZXh0ICYmXG4gICAgICBpc0RlZihpID0gaS4kb3B0aW9ucy5fc2NvcGVJZClcbiAgICApIHtcbiAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFZub2RlcyAocGFyZW50RWxtLCByZWZFbG0sIHZub2Rlcywgc3RhcnRJZHgsIGVuZElkeCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG4gICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkge1xuICAgICAgY3JlYXRlRWxtKHZub2Rlc1tzdGFydElkeF0sIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0sIGZhbHNlLCB2bm9kZXMsIHN0YXJ0SWR4KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VEZXN0cm95SG9vayAodm5vZGUpIHtcbiAgICB2YXIgaSwgajtcbiAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG4gICAgaWYgKGlzRGVmKGRhdGEpKSB7XG4gICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuZGVzdHJveSkpIHsgaSh2bm9kZSk7IH1cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMuZGVzdHJveS5sZW5ndGg7ICsraSkgeyBjYnMuZGVzdHJveVtpXSh2bm9kZSk7IH1cbiAgICB9XG4gICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jaGlsZHJlbikpIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7ICsraikge1xuICAgICAgICBpbnZva2VEZXN0cm95SG9vayh2bm9kZS5jaGlsZHJlbltqXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlVm5vZGVzIChwYXJlbnRFbG0sIHZub2Rlcywgc3RhcnRJZHgsIGVuZElkeCkge1xuICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcbiAgICAgIHZhciBjaCA9IHZub2Rlc1tzdGFydElkeF07XG4gICAgICBpZiAoaXNEZWYoY2gpKSB7XG4gICAgICAgIGlmIChpc0RlZihjaC50YWcpKSB7XG4gICAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhjaCk7XG4gICAgICAgICAgaW52b2tlRGVzdHJveUhvb2soY2gpO1xuICAgICAgICB9IGVsc2UgeyAvLyBUZXh0IG5vZGVcbiAgICAgICAgICByZW1vdmVOb2RlKGNoLmVsbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rICh2bm9kZSwgcm0pIHtcbiAgICBpZiAoaXNEZWYocm0pIHx8IGlzRGVmKHZub2RlLmRhdGEpKSB7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBsaXN0ZW5lcnMgPSBjYnMucmVtb3ZlLmxlbmd0aCArIDE7XG4gICAgICBpZiAoaXNEZWYocm0pKSB7XG4gICAgICAgIC8vIHdlIGhhdmUgYSByZWN1cnNpdmVseSBwYXNzZWQgZG93biBybSBjYWxsYmFja1xuICAgICAgICAvLyBpbmNyZWFzZSB0aGUgbGlzdGVuZXJzIGNvdW50XG4gICAgICAgIHJtLmxpc3RlbmVycyArPSBsaXN0ZW5lcnM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkaXJlY3RseSByZW1vdmluZ1xuICAgICAgICBybSA9IGNyZWF0ZVJtQ2Iodm5vZGUuZWxtLCBsaXN0ZW5lcnMpO1xuICAgICAgfVxuICAgICAgLy8gcmVjdXJzaXZlbHkgaW52b2tlIGhvb2tzIG9uIGNoaWxkIGNvbXBvbmVudCByb290IG5vZGVcbiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UpICYmIGlzRGVmKGkgPSBpLl92bm9kZSkgJiYgaXNEZWYoaS5kYXRhKSkge1xuICAgICAgICByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rKGksIHJtKTtcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMucmVtb3ZlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNicy5yZW1vdmVbaV0odm5vZGUsIHJtKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5yZW1vdmUpKSB7XG4gICAgICAgIGkodm5vZGUsIHJtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJtKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZU5vZGUodm5vZGUuZWxtKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVDaGlsZHJlbiAocGFyZW50RWxtLCBvbGRDaCwgbmV3Q2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSkge1xuICAgIHZhciBvbGRTdGFydElkeCA9IDA7XG4gICAgdmFyIG5ld1N0YXJ0SWR4ID0gMDtcbiAgICB2YXIgb2xkRW5kSWR4ID0gb2xkQ2gubGVuZ3RoIC0gMTtcbiAgICB2YXIgb2xkU3RhcnRWbm9kZSA9IG9sZENoWzBdO1xuICAgIHZhciBvbGRFbmRWbm9kZSA9IG9sZENoW29sZEVuZElkeF07XG4gICAgdmFyIG5ld0VuZElkeCA9IG5ld0NoLmxlbmd0aCAtIDE7XG4gICAgdmFyIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFswXTtcbiAgICB2YXIgbmV3RW5kVm5vZGUgPSBuZXdDaFtuZXdFbmRJZHhdO1xuICAgIHZhciBvbGRLZXlUb0lkeCwgaWR4SW5PbGQsIHZub2RlVG9Nb3ZlLCByZWZFbG07XG5cbiAgICAvLyByZW1vdmVPbmx5IGlzIGEgc3BlY2lhbCBmbGFnIHVzZWQgb25seSBieSA8dHJhbnNpdGlvbi1ncm91cD5cbiAgICAvLyB0byBlbnN1cmUgcmVtb3ZlZCBlbGVtZW50cyBzdGF5IGluIGNvcnJlY3QgcmVsYXRpdmUgcG9zaXRpb25zXG4gICAgLy8gZHVyaW5nIGxlYXZpbmcgdHJhbnNpdGlvbnNcbiAgICB2YXIgY2FuTW92ZSA9ICFyZW1vdmVPbmx5O1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhuZXdDaCk7XG4gICAgfVxuXG4gICAgd2hpbGUgKG9sZFN0YXJ0SWR4IDw9IG9sZEVuZElkeCAmJiBuZXdTdGFydElkeCA8PSBuZXdFbmRJZHgpIHtcbiAgICAgIGlmIChpc1VuZGVmKG9sZFN0YXJ0Vm5vZGUpKSB7XG4gICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTsgLy8gVm5vZGUgaGFzIGJlZW4gbW92ZWQgbGVmdFxuICAgICAgfSBlbHNlIGlmIChpc1VuZGVmKG9sZEVuZFZub2RlKSkge1xuICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld1N0YXJ0Vm5vZGUpKSB7XG4gICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdO1xuICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG4gICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUpKSB7XG4gICAgICAgIHBhdGNoVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgICAgbmV3RW5kVm5vZGUgPSBuZXdDaFstLW5ld0VuZElkeF07XG4gICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgcmlnaHRcbiAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBub2RlT3BzLm5leHRTaWJsaW5nKG9sZEVuZFZub2RlLmVsbSkpO1xuICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07XG4gICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld1N0YXJ0Vm5vZGUpKSB7IC8vIFZub2RlIG1vdmVkIGxlZnRcbiAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZEVuZFZub2RlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pO1xuICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzVW5kZWYob2xkS2V5VG9JZHgpKSB7IG9sZEtleVRvSWR4ID0gY3JlYXRlS2V5VG9PbGRJZHgob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOyB9XG4gICAgICAgIGlkeEluT2xkID0gaXNEZWYobmV3U3RhcnRWbm9kZS5rZXkpXG4gICAgICAgICAgPyBvbGRLZXlUb0lkeFtuZXdTdGFydFZub2RlLmtleV1cbiAgICAgICAgICA6IGZpbmRJZHhJbk9sZChuZXdTdGFydFZub2RlLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7XG4gICAgICAgIGlmIChpc1VuZGVmKGlkeEluT2xkKSkgeyAvLyBOZXcgZWxlbWVudFxuICAgICAgICAgIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGZhbHNlLCBuZXdDaCwgbmV3U3RhcnRJZHgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZub2RlVG9Nb3ZlID0gb2xkQ2hbaWR4SW5PbGRdO1xuICAgICAgICAgIGlmIChzYW1lVm5vZGUodm5vZGVUb01vdmUsIG5ld1N0YXJ0Vm5vZGUpKSB7XG4gICAgICAgICAgICBwYXRjaFZub2RlKHZub2RlVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICAgICAgb2xkQ2hbaWR4SW5PbGRdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIHZub2RlVG9Nb3ZlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBzYW1lIGtleSBidXQgZGlmZmVyZW50IGVsZW1lbnQuIHRyZWF0IGFzIG5ldyBlbGVtZW50XG4gICAgICAgICAgICBjcmVhdGVFbG0obmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBmYWxzZSwgbmV3Q2gsIG5ld1N0YXJ0SWR4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob2xkU3RhcnRJZHggPiBvbGRFbmRJZHgpIHtcbiAgICAgIHJlZkVsbSA9IGlzVW5kZWYobmV3Q2hbbmV3RW5kSWR4ICsgMV0pID8gbnVsbCA6IG5ld0NoW25ld0VuZElkeCArIDFdLmVsbTtcbiAgICAgIGFkZFZub2RlcyhwYXJlbnRFbG0sIHJlZkVsbSwgbmV3Q2gsIG5ld1N0YXJ0SWR4LCBuZXdFbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgfSBlbHNlIGlmIChuZXdTdGFydElkeCA+IG5ld0VuZElkeCkge1xuICAgICAgcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSwgb2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrRHVwbGljYXRlS2V5cyAoY2hpbGRyZW4pIHtcbiAgICB2YXIgc2VlbktleXMgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdm5vZGUgPSBjaGlsZHJlbltpXTtcbiAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXk7XG4gICAgICBpZiAoaXNEZWYoa2V5KSkge1xuICAgICAgICBpZiAoc2VlbktleXNba2V5XSkge1xuICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAoXCJEdXBsaWNhdGUga2V5cyBkZXRlY3RlZDogJ1wiICsga2V5ICsgXCInLiBUaGlzIG1heSBjYXVzZSBhbiB1cGRhdGUgZXJyb3IuXCIpLFxuICAgICAgICAgICAgdm5vZGUuY29udGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VlbktleXNba2V5XSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kSWR4SW5PbGQgKG5vZGUsIG9sZENoLCBzdGFydCwgZW5kKSB7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHZhciBjID0gb2xkQ2hbaV07XG4gICAgICBpZiAoaXNEZWYoYykgJiYgc2FtZVZub2RlKG5vZGUsIGMpKSB7IHJldHVybiBpIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXRjaFZub2RlIChvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSkge1xuICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBlbG0gPSB2bm9kZS5lbG0gPSBvbGRWbm9kZS5lbG07XG5cbiAgICBpZiAoaXNUcnVlKG9sZFZub2RlLmlzQXN5bmNQbGFjZWhvbGRlcikpIHtcbiAgICAgIGlmIChpc0RlZih2bm9kZS5hc3luY0ZhY3RvcnkucmVzb2x2ZWQpKSB7XG4gICAgICAgIGh5ZHJhdGUob2xkVm5vZGUuZWxtLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZub2RlLmlzQXN5bmNQbGFjZWhvbGRlciA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyByZXVzZSBlbGVtZW50IGZvciBzdGF0aWMgdHJlZXMuXG4gICAgLy8gbm90ZSB3ZSBvbmx5IGRvIHRoaXMgaWYgdGhlIHZub2RlIGlzIGNsb25lZCAtXG4gICAgLy8gaWYgdGhlIG5ldyBub2RlIGlzIG5vdCBjbG9uZWQgaXQgbWVhbnMgdGhlIHJlbmRlciBmdW5jdGlvbnMgaGF2ZSBiZWVuXG4gICAgLy8gcmVzZXQgYnkgdGhlIGhvdC1yZWxvYWQtYXBpIGFuZCB3ZSBuZWVkIHRvIGRvIGEgcHJvcGVyIHJlLXJlbmRlci5cbiAgICBpZiAoaXNUcnVlKHZub2RlLmlzU3RhdGljKSAmJlxuICAgICAgaXNUcnVlKG9sZFZub2RlLmlzU3RhdGljKSAmJlxuICAgICAgdm5vZGUua2V5ID09PSBvbGRWbm9kZS5rZXkgJiZcbiAgICAgIChpc1RydWUodm5vZGUuaXNDbG9uZWQpIHx8IGlzVHJ1ZSh2bm9kZS5pc09uY2UpKVxuICAgICkge1xuICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBvbGRWbm9kZS5jb21wb25lbnRJbnN0YW5jZTtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBpO1xuICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkucHJlcGF0Y2gpKSB7XG4gICAgICBpKG9sZFZub2RlLCB2bm9kZSk7XG4gICAgfVxuXG4gICAgdmFyIG9sZENoID0gb2xkVm5vZGUuY2hpbGRyZW47XG4gICAgdmFyIGNoID0gdm5vZGUuY2hpbGRyZW47XG4gICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzUGF0Y2hhYmxlKHZub2RlKSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGNicy51cGRhdGUubGVuZ3RoOyArK2kpIHsgY2JzLnVwZGF0ZVtpXShvbGRWbm9kZSwgdm5vZGUpOyB9XG4gICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkudXBkYXRlKSkgeyBpKG9sZFZub2RlLCB2bm9kZSk7IH1cbiAgICB9XG4gICAgaWYgKGlzVW5kZWYodm5vZGUudGV4dCkpIHtcbiAgICAgIGlmIChpc0RlZihvbGRDaCkgJiYgaXNEZWYoY2gpKSB7XG4gICAgICAgIGlmIChvbGRDaCAhPT0gY2gpIHsgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSk7IH1cbiAgICAgIH0gZWxzZSBpZiAoaXNEZWYoY2gpKSB7XG4gICAgICAgIGlmIChpc0RlZihvbGRWbm9kZS50ZXh0KSkgeyBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgJycpOyB9XG4gICAgICAgIGFkZFZub2RlcyhlbG0sIG51bGwsIGNoLCAwLCBjaC5sZW5ndGggLSAxLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRDaCkpIHtcbiAgICAgICAgcmVtb3ZlVm5vZGVzKGVsbSwgb2xkQ2gsIDAsIG9sZENoLmxlbmd0aCAtIDEpO1xuICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRWbm9kZS50ZXh0KSkge1xuICAgICAgICBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgJycpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob2xkVm5vZGUudGV4dCAhPT0gdm5vZGUudGV4dCkge1xuICAgICAgbm9kZU9wcy5zZXRUZXh0Q29udGVudChlbG0sIHZub2RlLnRleHQpO1xuICAgIH1cbiAgICBpZiAoaXNEZWYoZGF0YSkpIHtcbiAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wb3N0cGF0Y2gpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUluc2VydEhvb2sgKHZub2RlLCBxdWV1ZSwgaW5pdGlhbCkge1xuICAgIC8vIGRlbGF5IGluc2VydCBob29rcyBmb3IgY29tcG9uZW50IHJvb3Qgbm9kZXMsIGludm9rZSB0aGVtIGFmdGVyIHRoZVxuICAgIC8vIGVsZW1lbnQgaXMgcmVhbGx5IGluc2VydGVkXG4gICAgaWYgKGlzVHJ1ZShpbml0aWFsKSAmJiBpc0RlZih2bm9kZS5wYXJlbnQpKSB7XG4gICAgICB2bm9kZS5wYXJlbnQuZGF0YS5wZW5kaW5nSW5zZXJ0ID0gcXVldWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgcXVldWVbaV0uZGF0YS5ob29rLmluc2VydChxdWV1ZVtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGh5ZHJhdGlvbkJhaWxlZCA9IGZhbHNlO1xuICAvLyBsaXN0IG9mIG1vZHVsZXMgdGhhdCBjYW4gc2tpcCBjcmVhdGUgaG9vayBkdXJpbmcgaHlkcmF0aW9uIGJlY2F1c2UgdGhleVxuICAvLyBhcmUgYWxyZWFkeSByZW5kZXJlZCBvbiB0aGUgY2xpZW50IG9yIGhhcyBubyBuZWVkIGZvciBpbml0aWFsaXphdGlvblxuICAvLyBOb3RlOiBzdHlsZSBpcyBleGNsdWRlZCBiZWNhdXNlIGl0IHJlbGllcyBvbiBpbml0aWFsIGNsb25lIGZvciBmdXR1cmVcbiAgLy8gZGVlcCB1cGRhdGVzICgjNzA2MykuXG4gIHZhciBpc1JlbmRlcmVkTW9kdWxlID0gbWFrZU1hcCgnYXR0cnMsY2xhc3Msc3RhdGljQ2xhc3Msc3RhdGljU3R5bGUsa2V5Jyk7XG5cbiAgLy8gTm90ZTogdGhpcyBpcyBhIGJyb3dzZXItb25seSBmdW5jdGlvbiBzbyB3ZSBjYW4gYXNzdW1lIGVsbXMgYXJlIERPTSBub2Rlcy5cbiAgZnVuY3Rpb24gaHlkcmF0ZSAoZWxtLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpblZQcmUpIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgdGFnID0gdm5vZGUudGFnO1xuICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcbiAgICBpblZQcmUgPSBpblZQcmUgfHwgKGRhdGEgJiYgZGF0YS5wcmUpO1xuICAgIHZub2RlLmVsbSA9IGVsbTtcblxuICAgIGlmIChpc1RydWUodm5vZGUuaXNDb21tZW50KSAmJiBpc0RlZih2bm9kZS5hc3luY0ZhY3RvcnkpKSB7XG4gICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgLy8gYXNzZXJ0IG5vZGUgbWF0Y2hcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKCFhc3NlcnROb2RlTWF0Y2goZWxtLCB2bm9kZSwgaW5WUHJlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRGVmKGRhdGEpKSB7XG4gICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHsgaSh2bm9kZSwgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pOyB9XG4gICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuICAgICAgICAvLyBjaGlsZCBjb21wb25lbnQuIGl0IHNob3VsZCBoYXZlIGh5ZHJhdGVkIGl0cyBvd24gdHJlZS5cbiAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRGVmKHRhZykpIHtcbiAgICAgIGlmIChpc0RlZihjaGlsZHJlbikpIHtcbiAgICAgICAgLy8gZW1wdHkgZWxlbWVudCwgYWxsb3cgY2xpZW50IHRvIHBpY2sgdXAgYW5kIHBvcHVsYXRlIGNoaWxkcmVuXG4gICAgICAgIGlmICghZWxtLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgIGNyZWF0ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB2LWh0bWwgYW5kIGRvbVByb3BzOiBpbm5lckhUTUxcbiAgICAgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEpICYmIGlzRGVmKGkgPSBpLmRvbVByb3BzKSAmJiBpc0RlZihpID0gaS5pbm5lckhUTUwpKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gZWxtLmlubmVySFRNTCkge1xuICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICAhaHlkcmF0aW9uQmFpbGVkXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGh5ZHJhdGlvbkJhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQYXJlbnQ6ICcsIGVsbSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdzZXJ2ZXIgaW5uZXJIVE1MOiAnLCBpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2NsaWVudCBpbm5lckhUTUw6ICcsIGVsbS5pbm5lckhUTUwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBpdGVyYXRlIGFuZCBjb21wYXJlIGNoaWxkcmVuIGxpc3RzXG4gICAgICAgICAgICB2YXIgY2hpbGRyZW5NYXRjaCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgY2hpbGROb2RlID0gZWxtLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7XG4gICAgICAgICAgICAgIGlmICghY2hpbGROb2RlIHx8ICFoeWRyYXRlKGNoaWxkTm9kZSwgY2hpbGRyZW5baSQxXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpblZQcmUpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5NYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgY2hpbGROb2RlIGlzIG5vdCBudWxsLCBpdCBtZWFucyB0aGUgYWN0dWFsIGNoaWxkTm9kZXMgbGlzdCBpc1xuICAgICAgICAgICAgLy8gbG9uZ2VyIHRoYW4gdGhlIHZpcnR1YWwgY2hpbGRyZW4gbGlzdC5cbiAgICAgICAgICAgIGlmICghY2hpbGRyZW5NYXRjaCB8fCBjaGlsZE5vZGUpIHtcbiAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgIWh5ZHJhdGlvbkJhaWxlZFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBoeWRyYXRpb25CYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGFyZW50OiAnLCBlbG0pO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWlzbWF0Y2hpbmcgY2hpbGROb2RlcyB2cy4gVk5vZGVzOiAnLCBlbG0uY2hpbGROb2RlcywgY2hpbGRyZW4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7XG4gICAgICAgIHZhciBmdWxsSW52b2tlID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgaWYgKCFpc1JlbmRlcmVkTW9kdWxlKGtleSkpIHtcbiAgICAgICAgICAgIGZ1bGxJbnZva2UgPSB0cnVlO1xuICAgICAgICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZ1bGxJbnZva2UgJiYgZGF0YVsnY2xhc3MnXSkge1xuICAgICAgICAgIC8vIGVuc3VyZSBjb2xsZWN0aW5nIGRlcHMgZm9yIGRlZXAgY2xhc3MgYmluZGluZ3MgZm9yIGZ1dHVyZSB1cGRhdGVzXG4gICAgICAgICAgdHJhdmVyc2UoZGF0YVsnY2xhc3MnXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsbS5kYXRhICE9PSB2bm9kZS50ZXh0KSB7XG4gICAgICBlbG0uZGF0YSA9IHZub2RlLnRleHQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBhc3NlcnROb2RlTWF0Y2ggKG5vZGUsIHZub2RlLCBpblZQcmUpIHtcbiAgICBpZiAoaXNEZWYodm5vZGUudGFnKSkge1xuICAgICAgcmV0dXJuIHZub2RlLnRhZy5pbmRleE9mKCd2dWUtY29tcG9uZW50JykgPT09IDAgfHwgKFxuICAgICAgICAhaXNVbmtub3duRWxlbWVudCQkMSh2bm9kZSwgaW5WUHJlKSAmJlxuICAgICAgICB2bm9kZS50YWcudG9Mb3dlckNhc2UoKSA9PT0gKG5vZGUudGFnTmFtZSAmJiBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSlcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09ICh2bm9kZS5pc0NvbW1lbnQgPyA4IDogMylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSwgaHlkcmF0aW5nLCByZW1vdmVPbmx5LCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuICAgIGlmIChpc1VuZGVmKHZub2RlKSkge1xuICAgICAgaWYgKGlzRGVmKG9sZFZub2RlKSkgeyBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7IH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBpc0luaXRpYWxQYXRjaCA9IGZhbHNlO1xuICAgIHZhciBpbnNlcnRlZFZub2RlUXVldWUgPSBbXTtcblxuICAgIGlmIChpc1VuZGVmKG9sZFZub2RlKSkge1xuICAgICAgLy8gZW1wdHkgbW91bnQgKGxpa2VseSBhcyBjb21wb25lbnQpLCBjcmVhdGUgbmV3IHJvb3QgZWxlbWVudFxuICAgICAgaXNJbml0aWFsUGF0Y2ggPSB0cnVlO1xuICAgICAgY3JlYXRlRWxtKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGlzUmVhbEVsZW1lbnQgPSBpc0RlZihvbGRWbm9kZS5ub2RlVHlwZSk7XG4gICAgICBpZiAoIWlzUmVhbEVsZW1lbnQgJiYgc2FtZVZub2RlKG9sZFZub2RlLCB2bm9kZSkpIHtcbiAgICAgICAgLy8gcGF0Y2ggZXhpc3Rpbmcgcm9vdCBub2RlXG4gICAgICAgIHBhdGNoVm5vZGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzUmVhbEVsZW1lbnQpIHtcbiAgICAgICAgICAvLyBtb3VudGluZyB0byBhIHJlYWwgZWxlbWVudFxuICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQgYW5kIGlmIHdlIGNhbiBwZXJmb3JtXG4gICAgICAgICAgLy8gYSBzdWNjZXNzZnVsIGh5ZHJhdGlvbi5cbiAgICAgICAgICBpZiAob2xkVm5vZGUubm9kZVR5cGUgPT09IDEgJiYgb2xkVm5vZGUuaGFzQXR0cmlidXRlKFNTUl9BVFRSKSkge1xuICAgICAgICAgICAgb2xkVm5vZGUucmVtb3ZlQXR0cmlidXRlKFNTUl9BVFRSKTtcbiAgICAgICAgICAgIGh5ZHJhdGluZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1RydWUoaHlkcmF0aW5nKSkge1xuICAgICAgICAgICAgaWYgKGh5ZHJhdGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpKSB7XG4gICAgICAgICAgICAgIGludm9rZUluc2VydEhvb2sodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIHJldHVybiBvbGRWbm9kZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAgICAgJ1RoZSBjbGllbnQtc2lkZSByZW5kZXJlZCB2aXJ0dWFsIERPTSB0cmVlIGlzIG5vdCBtYXRjaGluZyAnICtcbiAgICAgICAgICAgICAgICAnc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQuIFRoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBpbmNvcnJlY3QgJyArXG4gICAgICAgICAgICAgICAgJ0hUTUwgbWFya3VwLCBmb3IgZXhhbXBsZSBuZXN0aW5nIGJsb2NrLWxldmVsIGVsZW1lbnRzIGluc2lkZSAnICtcbiAgICAgICAgICAgICAgICAnPHA+LCBvciBtaXNzaW5nIDx0Ym9keT4uIEJhaWxpbmcgaHlkcmF0aW9uIGFuZCBwZXJmb3JtaW5nICcgK1xuICAgICAgICAgICAgICAgICdmdWxsIGNsaWVudC1zaWRlIHJlbmRlci4nXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGVpdGhlciBub3Qgc2VydmVyLXJlbmRlcmVkLCBvciBoeWRyYXRpb24gZmFpbGVkLlxuICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBub2RlIGFuZCByZXBsYWNlIGl0XG4gICAgICAgICAgb2xkVm5vZGUgPSBlbXB0eU5vZGVBdChvbGRWbm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXBsYWNpbmcgZXhpc3RpbmcgZWxlbWVudFxuICAgICAgICB2YXIgb2xkRWxtID0gb2xkVm5vZGUuZWxtO1xuICAgICAgICB2YXIgcGFyZW50RWxtJDEgPSBub2RlT3BzLnBhcmVudE5vZGUob2xkRWxtKTtcblxuICAgICAgICAvLyBjcmVhdGUgbmV3IG5vZGVcbiAgICAgICAgY3JlYXRlRWxtKFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZSxcbiAgICAgICAgICAvLyBleHRyZW1lbHkgcmFyZSBlZGdlIGNhc2U6IGRvIG5vdCBpbnNlcnQgaWYgb2xkIGVsZW1lbnQgaXMgaW4gYVxuICAgICAgICAgIC8vIGxlYXZpbmcgdHJhbnNpdGlvbi4gT25seSBoYXBwZW5zIHdoZW4gY29tYmluaW5nIHRyYW5zaXRpb24gK1xuICAgICAgICAgIC8vIGtlZXAtYWxpdmUgKyBIT0NzLiAoIzQ1OTApXG4gICAgICAgICAgb2xkRWxtLl9sZWF2ZUNiID8gbnVsbCA6IHBhcmVudEVsbSQxLFxuICAgICAgICAgIG5vZGVPcHMubmV4dFNpYmxpbmcob2xkRWxtKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIHVwZGF0ZSBwYXJlbnQgcGxhY2Vob2xkZXIgbm9kZSBlbGVtZW50LCByZWN1cnNpdmVseVxuICAgICAgICBpZiAoaXNEZWYodm5vZGUucGFyZW50KSkge1xuICAgICAgICAgIHZhciBhbmNlc3RvciA9IHZub2RlLnBhcmVudDtcbiAgICAgICAgICB2YXIgcGF0Y2hhYmxlID0gaXNQYXRjaGFibGUodm5vZGUpO1xuICAgICAgICAgIHdoaWxlIChhbmNlc3Rvcikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMuZGVzdHJveS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICBjYnMuZGVzdHJveVtpXShhbmNlc3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmNlc3Rvci5lbG0gPSB2bm9kZS5lbG07XG4gICAgICAgICAgICBpZiAocGF0Y2hhYmxlKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkge1xuICAgICAgICAgICAgICAgIGNicy5jcmVhdGVbaSQxXShlbXB0eU5vZGUsIGFuY2VzdG9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyAjNjUxM1xuICAgICAgICAgICAgICAvLyBpbnZva2UgaW5zZXJ0IGhvb2tzIHRoYXQgbWF5IGhhdmUgYmVlbiBtZXJnZWQgYnkgY3JlYXRlIGhvb2tzLlxuICAgICAgICAgICAgICAvLyBlLmcuIGZvciBkaXJlY3RpdmVzIHRoYXQgdXNlcyB0aGUgXCJpbnNlcnRlZFwiIGhvb2suXG4gICAgICAgICAgICAgIHZhciBpbnNlcnQgPSBhbmNlc3Rvci5kYXRhLmhvb2suaW5zZXJ0O1xuICAgICAgICAgICAgICBpZiAoaW5zZXJ0Lm1lcmdlZCkge1xuICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGF0IGluZGV4IDEgdG8gYXZvaWQgcmUtaW52b2tpbmcgY29tcG9uZW50IG1vdW50ZWQgaG9va1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkkMiA9IDE7IGkkMiA8IGluc2VydC5mbnMubGVuZ3RoOyBpJDIrKykge1xuICAgICAgICAgICAgICAgICAgaW5zZXJ0LmZuc1tpJDJdKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWdpc3RlclJlZihhbmNlc3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZXN0cm95IG9sZCBub2RlXG4gICAgICAgIGlmIChpc0RlZihwYXJlbnRFbG0kMSkpIHtcbiAgICAgICAgICByZW1vdmVWbm9kZXMocGFyZW50RWxtJDEsIFtvbGRWbm9kZV0sIDAsIDApO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZFZub2RlLnRhZykpIHtcbiAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGlzSW5pdGlhbFBhdGNoKTtcbiAgICByZXR1cm4gdm5vZGUuZWxtXG4gIH1cbn1cblxuLyogICovXG5cbnZhciBkaXJlY3RpdmVzID0ge1xuICBjcmVhdGU6IHVwZGF0ZURpcmVjdGl2ZXMsXG4gIHVwZGF0ZTogdXBkYXRlRGlyZWN0aXZlcyxcbiAgZGVzdHJveTogZnVuY3Rpb24gdW5iaW5kRGlyZWN0aXZlcyAodm5vZGUpIHtcbiAgICB1cGRhdGVEaXJlY3RpdmVzKHZub2RlLCBlbXB0eU5vZGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURpcmVjdGl2ZXMgKG9sZFZub2RlLCB2bm9kZSkge1xuICBpZiAob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzIHx8IHZub2RlLmRhdGEuZGlyZWN0aXZlcykge1xuICAgIF91cGRhdGUob2xkVm5vZGUsIHZub2RlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgdmFyIGlzQ3JlYXRlID0gb2xkVm5vZGUgPT09IGVtcHR5Tm9kZTtcbiAgdmFyIGlzRGVzdHJveSA9IHZub2RlID09PSBlbXB0eU5vZGU7XG4gIHZhciBvbGREaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKG9sZFZub2RlLmRhdGEuZGlyZWN0aXZlcywgb2xkVm5vZGUuY29udGV4dCk7XG4gIHZhciBuZXdEaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKHZub2RlLmRhdGEuZGlyZWN0aXZlcywgdm5vZGUuY29udGV4dCk7XG5cbiAgdmFyIGRpcnNXaXRoSW5zZXJ0ID0gW107XG4gIHZhciBkaXJzV2l0aFBvc3RwYXRjaCA9IFtdO1xuXG4gIHZhciBrZXksIG9sZERpciwgZGlyO1xuICBmb3IgKGtleSBpbiBuZXdEaXJzKSB7XG4gICAgb2xkRGlyID0gb2xkRGlyc1trZXldO1xuICAgIGRpciA9IG5ld0RpcnNba2V5XTtcbiAgICBpZiAoIW9sZERpcikge1xuICAgICAgLy8gbmV3IGRpcmVjdGl2ZSwgYmluZFxuICAgICAgY2FsbEhvb2skMShkaXIsICdiaW5kJywgdm5vZGUsIG9sZFZub2RlKTtcbiAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuaW5zZXJ0ZWQpIHtcbiAgICAgICAgZGlyc1dpdGhJbnNlcnQucHVzaChkaXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBleGlzdGluZyBkaXJlY3RpdmUsIHVwZGF0ZVxuICAgICAgZGlyLm9sZFZhbHVlID0gb2xkRGlyLnZhbHVlO1xuICAgICAgY2FsbEhvb2skMShkaXIsICd1cGRhdGUnLCB2bm9kZSwgb2xkVm5vZGUpO1xuICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5jb21wb25lbnRVcGRhdGVkKSB7XG4gICAgICAgIGRpcnNXaXRoUG9zdHBhdGNoLnB1c2goZGlyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZGlyc1dpdGhJbnNlcnQubGVuZ3RoKSB7XG4gICAgdmFyIGNhbGxJbnNlcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhJbnNlcnRbaV0sICdpbnNlcnRlZCcsIHZub2RlLCBvbGRWbm9kZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoaXNDcmVhdGUpIHtcbiAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAnaW5zZXJ0JywgY2FsbEluc2VydCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxJbnNlcnQoKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoKSB7XG4gICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdwb3N0cGF0Y2gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoUG9zdHBhdGNoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhQb3N0cGF0Y2hbaV0sICdjb21wb25lbnRVcGRhdGVkJywgdm5vZGUsIG9sZFZub2RlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmICghaXNDcmVhdGUpIHtcbiAgICBmb3IgKGtleSBpbiBvbGREaXJzKSB7XG4gICAgICBpZiAoIW5ld0RpcnNba2V5XSkge1xuICAgICAgICAvLyBubyBsb25nZXIgcHJlc2VudCwgdW5iaW5kXG4gICAgICAgIGNhbGxIb29rJDEob2xkRGlyc1trZXldLCAndW5iaW5kJywgb2xkVm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG52YXIgZW1wdHlNb2RpZmllcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzJDEgKFxuICBkaXJzLFxuICB2bVxuKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpZiAoIWRpcnMpIHtcbiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICByZXR1cm4gcmVzXG4gIH1cbiAgdmFyIGksIGRpcjtcbiAgZm9yIChpID0gMDsgaSA8IGRpcnMubGVuZ3RoOyBpKyspIHtcbiAgICBkaXIgPSBkaXJzW2ldO1xuICAgIGlmICghZGlyLm1vZGlmaWVycykge1xuICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgICBkaXIubW9kaWZpZXJzID0gZW1wdHlNb2RpZmllcnM7XG4gICAgfVxuICAgIHJlc1tnZXRSYXdEaXJOYW1lKGRpcildID0gZGlyO1xuICAgIGRpci5kZWYgPSByZXNvbHZlQXNzZXQodm0uJG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyLm5hbWUsIHRydWUpO1xuICB9XG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGdldFJhd0Rpck5hbWUgKGRpcikge1xuICByZXR1cm4gZGlyLnJhd05hbWUgfHwgKChkaXIubmFtZSkgKyBcIi5cIiArIChPYmplY3Qua2V5cyhkaXIubW9kaWZpZXJzIHx8IHt9KS5qb2luKCcuJykpKVxufVxuXG5mdW5jdGlvbiBjYWxsSG9vayQxIChkaXIsIGhvb2ssIHZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KSB7XG4gIHZhciBmbiA9IGRpci5kZWYgJiYgZGlyLmRlZltob29rXTtcbiAgaWYgKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZuKHZub2RlLmVsbSwgZGlyLCB2bm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaGFuZGxlRXJyb3IoZSwgdm5vZGUuY29udGV4dCwgKFwiZGlyZWN0aXZlIFwiICsgKGRpci5uYW1lKSArIFwiIFwiICsgaG9vayArIFwiIGhvb2tcIikpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgYmFzZU1vZHVsZXMgPSBbXG4gIHJlZixcbiAgZGlyZWN0aXZlc1xuXVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gdXBkYXRlQXR0cnMgKG9sZFZub2RlLCB2bm9kZSkge1xuICB2YXIgb3B0cyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG4gIGlmIChpc0RlZihvcHRzKSAmJiBvcHRzLkN0b3Iub3B0aW9ucy5pbmhlcml0QXR0cnMgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5hdHRycykgJiYgaXNVbmRlZih2bm9kZS5kYXRhLmF0dHJzKSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBrZXksIGN1ciwgb2xkO1xuICB2YXIgZWxtID0gdm5vZGUuZWxtO1xuICB2YXIgb2xkQXR0cnMgPSBvbGRWbm9kZS5kYXRhLmF0dHJzIHx8IHt9O1xuICB2YXIgYXR0cnMgPSB2bm9kZS5kYXRhLmF0dHJzIHx8IHt9O1xuICAvLyBjbG9uZSBvYnNlcnZlZCBvYmplY3RzLCBhcyB0aGUgdXNlciBwcm9iYWJseSB3YW50cyB0byBtdXRhdGUgaXRcbiAgaWYgKGlzRGVmKGF0dHJzLl9fb2JfXykpIHtcbiAgICBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgPSBleHRlbmQoe30sIGF0dHJzKTtcbiAgfVxuXG4gIGZvciAoa2V5IGluIGF0dHJzKSB7XG4gICAgY3VyID0gYXR0cnNba2V5XTtcbiAgICBvbGQgPSBvbGRBdHRyc1trZXldO1xuICAgIGlmIChvbGQgIT09IGN1cikge1xuICAgICAgc2V0QXR0cihlbG0sIGtleSwgY3VyKTtcbiAgICB9XG4gIH1cbiAgLy8gIzQzOTE6IGluIElFOSwgc2V0dGluZyB0eXBlIGNhbiByZXNldCB2YWx1ZSBmb3IgaW5wdXRbdHlwZT1yYWRpb11cbiAgLy8gIzY2NjY6IElFL0VkZ2UgZm9yY2VzIHByb2dyZXNzIHZhbHVlIGRvd24gdG8gMSBiZWZvcmUgc2V0dGluZyBhIG1heFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKChpc0lFIHx8IGlzRWRnZSkgJiYgYXR0cnMudmFsdWUgIT09IG9sZEF0dHJzLnZhbHVlKSB7XG4gICAgc2V0QXR0cihlbG0sICd2YWx1ZScsIGF0dHJzLnZhbHVlKTtcbiAgfVxuICBmb3IgKGtleSBpbiBvbGRBdHRycykge1xuICAgIGlmIChpc1VuZGVmKGF0dHJzW2tleV0pKSB7XG4gICAgICBpZiAoaXNYbGluayhrZXkpKSB7XG4gICAgICAgIGVsbS5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBnZXRYbGlua1Byb3Aoa2V5KSk7XG4gICAgICB9IGVsc2UgaWYgKCFpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHtcbiAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkge1xuICBpZiAoZWwudGFnTmFtZS5pbmRleE9mKCctJykgPiAtMSkge1xuICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc0Jvb2xlYW5BdHRyKGtleSkpIHtcbiAgICAvLyBzZXQgYXR0cmlidXRlIGZvciBibGFuayB2YWx1ZVxuICAgIC8vIGUuZy4gPG9wdGlvbiBkaXNhYmxlZD5TZWxlY3Qgb25lPC9vcHRpb24+XG4gICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGVjaG5pY2FsbHkgYWxsb3dmdWxsc2NyZWVuIGlzIGEgYm9vbGVhbiBhdHRyaWJ1dGUgZm9yIDxpZnJhbWU+LFxuICAgICAgLy8gYnV0IEZsYXNoIGV4cGVjdHMgYSB2YWx1ZSBvZiBcInRydWVcIiB3aGVuIHVzZWQgb24gPGVtYmVkPiB0YWdcbiAgICAgIHZhbHVlID0ga2V5ID09PSAnYWxsb3dmdWxsc2NyZWVuJyAmJiBlbC50YWdOYW1lID09PSAnRU1CRUQnXG4gICAgICAgID8gJ3RydWUnXG4gICAgICAgIDoga2V5O1xuICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJyA/ICdmYWxzZScgOiAndHJ1ZScpO1xuICB9IGVsc2UgaWYgKGlzWGxpbmsoa2V5KSkge1xuICAgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywgZ2V0WGxpbmtQcm9wKGtleSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXksIHZhbHVlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYmFzZVNldEF0dHIoZWwsIGtleSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2VTZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkge1xuICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyAjNzEzODogSUUxMCAmIDExIGZpcmVzIGlucHV0IGV2ZW50IHdoZW4gc2V0dGluZyBwbGFjZWhvbGRlciBvblxuICAgIC8vIDx0ZXh0YXJlYT4uLi4gYmxvY2sgdGhlIGZpcnN0IGlucHV0IGV2ZW50IGFuZCByZW1vdmUgdGhlIGJsb2NrZXJcbiAgICAvLyBpbW1lZGlhdGVseS5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoXG4gICAgICBpc0lFICYmICFpc0lFOSAmJlxuICAgICAgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJlxuICAgICAga2V5ID09PSAncGxhY2Vob2xkZXInICYmICFlbC5fX2llcGhcbiAgICApIHtcbiAgICAgIHZhciBibG9ja2VyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBibG9ja2VyKTtcbiAgICAgIH07XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpO1xuICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgICBlbC5fX2llcGggPSB0cnVlOyAvKiBJRSBwbGFjZWhvbGRlciBwYXRjaGVkICovXG4gICAgfVxuICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgfVxufVxuXG52YXIgYXR0cnMgPSB7XG4gIGNyZWF0ZTogdXBkYXRlQXR0cnMsXG4gIHVwZGF0ZTogdXBkYXRlQXR0cnNcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIHVwZGF0ZUNsYXNzIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgdmFyIGVsID0gdm5vZGUuZWxtO1xuICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG4gIHZhciBvbGREYXRhID0gb2xkVm5vZGUuZGF0YTtcbiAgaWYgKFxuICAgIGlzVW5kZWYoZGF0YS5zdGF0aWNDbGFzcykgJiZcbiAgICBpc1VuZGVmKGRhdGEuY2xhc3MpICYmIChcbiAgICAgIGlzVW5kZWYob2xkRGF0YSkgfHwgKFxuICAgICAgICBpc1VuZGVmKG9sZERhdGEuc3RhdGljQ2xhc3MpICYmXG4gICAgICAgIGlzVW5kZWYob2xkRGF0YS5jbGFzcylcbiAgICAgIClcbiAgICApXG4gICkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGNscyA9IGdlbkNsYXNzRm9yVm5vZGUodm5vZGUpO1xuXG4gIC8vIGhhbmRsZSB0cmFuc2l0aW9uIGNsYXNzZXNcbiAgdmFyIHRyYW5zaXRpb25DbGFzcyA9IGVsLl90cmFuc2l0aW9uQ2xhc3NlcztcbiAgaWYgKGlzRGVmKHRyYW5zaXRpb25DbGFzcykpIHtcbiAgICBjbHMgPSBjb25jYXQoY2xzLCBzdHJpbmdpZnlDbGFzcyh0cmFuc2l0aW9uQ2xhc3MpKTtcbiAgfVxuXG4gIC8vIHNldCB0aGUgY2xhc3NcbiAgaWYgKGNscyAhPT0gZWwuX3ByZXZDbGFzcykge1xuICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuICAgIGVsLl9wcmV2Q2xhc3MgPSBjbHM7XG4gIH1cbn1cblxudmFyIGtsYXNzID0ge1xuICBjcmVhdGU6IHVwZGF0ZUNsYXNzLFxuICB1cGRhdGU6IHVwZGF0ZUNsYXNzXG59XG5cbi8qICAqL1xuXG4vKiAgKi9cblxuXG5cblxuXG5cblxuXG5cbi8vIGFkZCBhIHJhdyBhdHRyICh1c2UgdGhpcyBpbiBwcmVUcmFuc2Zvcm1zKVxuXG5cblxuXG5cblxuXG5cbi8vIG5vdGU6IHRoaXMgb25seSByZW1vdmVzIHRoZSBhdHRyIGZyb20gdGhlIEFycmF5IChhdHRyc0xpc3QpIHNvIHRoYXQgaXRcbi8vIGRvZXNuJ3QgZ2V0IHByb2Nlc3NlZCBieSBwcm9jZXNzQXR0cnMuXG4vLyBCeSBkZWZhdWx0IGl0IGRvZXMgTk9UIHJlbW92ZSBpdCBmcm9tIHRoZSBtYXAgKGF0dHJzTWFwKSBiZWNhdXNlIHRoZSBtYXAgaXNcbi8vIG5lZWRlZCBkdXJpbmcgY29kZWdlbi5cblxuLyogICovXG5cbi8qKlxuICogQ3Jvc3MtcGxhdGZvcm0gY29kZSBnZW5lcmF0aW9uIGZvciBjb21wb25lbnQgdi1tb2RlbFxuICovXG5cblxuLyoqXG4gKiBDcm9zcy1wbGF0Zm9ybSBjb2RlZ2VuIGhlbHBlciBmb3IgZ2VuZXJhdGluZyB2LW1vZGVsIHZhbHVlIGFzc2lnbm1lbnQgY29kZS5cbiAqL1xuXG4vKiAgKi9cblxuLy8gaW4gc29tZSBjYXNlcywgdGhlIGV2ZW50IHVzZWQgaGFzIHRvIGJlIGRldGVybWluZWQgYXQgcnVudGltZVxuLy8gc28gd2UgdXNlZCBzb21lIHJlc2VydmVkIHRva2VucyBkdXJpbmcgY29tcGlsZS5cbnZhciBSQU5HRV9UT0tFTiA9ICdfX3InO1xudmFyIENIRUNLQk9YX1JBRElPX1RPS0VOID0gJ19fYyc7XG5cbi8qICAqL1xuXG4vLyBub3JtYWxpemUgdi1tb2RlbCBldmVudCB0b2tlbnMgdGhhdCBjYW4gb25seSBiZSBkZXRlcm1pbmVkIGF0IHJ1bnRpbWUuXG4vLyBpdCdzIGltcG9ydGFudCB0byBwbGFjZSB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGluIHRoZSBhcnJheSBiZWNhdXNlXG4vLyB0aGUgd2hvbGUgcG9pbnQgaXMgZW5zdXJpbmcgdGhlIHYtbW9kZWwgY2FsbGJhY2sgZ2V0cyBjYWxsZWQgYmVmb3JlXG4vLyB1c2VyLWF0dGFjaGVkIGhhbmRsZXJzLlxuZnVuY3Rpb24gbm9ybWFsaXplRXZlbnRzIChvbikge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzRGVmKG9uW1JBTkdFX1RPS0VOXSkpIHtcbiAgICAvLyBJRSBpbnB1dFt0eXBlPXJhbmdlXSBvbmx5IHN1cHBvcnRzIGBjaGFuZ2VgIGV2ZW50XG4gICAgdmFyIGV2ZW50ID0gaXNJRSA/ICdjaGFuZ2UnIDogJ2lucHV0JztcbiAgICBvbltldmVudF0gPSBbXS5jb25jYXQob25bUkFOR0VfVE9LRU5dLCBvbltldmVudF0gfHwgW10pO1xuICAgIGRlbGV0ZSBvbltSQU5HRV9UT0tFTl07XG4gIH1cbiAgLy8gVGhpcyB3YXMgb3JpZ2luYWxseSBpbnRlbmRlZCB0byBmaXggIzQ1MjEgYnV0IG5vIGxvbmdlciBuZWNlc3NhcnlcbiAgLy8gYWZ0ZXIgMi41LiBLZWVwaW5nIGl0IGZvciBiYWNrd2FyZHMgY29tcGF0IHdpdGggZ2VuZXJhdGVkIGNvZGUgZnJvbSA8IDIuNFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzRGVmKG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXSkpIHtcbiAgICBvbi5jaGFuZ2UgPSBbXS5jb25jYXQob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dLCBvbi5jaGFuZ2UgfHwgW10pO1xuICAgIGRlbGV0ZSBvbltDSEVDS0JPWF9SQURJT19UT0tFTl07XG4gIH1cbn1cblxudmFyIHRhcmdldCQxO1xuXG5mdW5jdGlvbiBjcmVhdGVPbmNlSGFuZGxlciAoaGFuZGxlciwgZXZlbnQsIGNhcHR1cmUpIHtcbiAgdmFyIF90YXJnZXQgPSB0YXJnZXQkMTsgLy8gc2F2ZSBjdXJyZW50IHRhcmdldCBlbGVtZW50IGluIGNsb3N1cmVcbiAgcmV0dXJuIGZ1bmN0aW9uIG9uY2VIYW5kbGVyICgpIHtcbiAgICB2YXIgcmVzID0gaGFuZGxlci5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIGlmIChyZXMgIT09IG51bGwpIHtcbiAgICAgIHJlbW92ZSQyKGV2ZW50LCBvbmNlSGFuZGxlciwgY2FwdHVyZSwgX3RhcmdldCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFkZCQxIChcbiAgZXZlbnQsXG4gIGhhbmRsZXIsXG4gIG9uY2UkJDEsXG4gIGNhcHR1cmUsXG4gIHBhc3NpdmVcbikge1xuICBoYW5kbGVyID0gd2l0aE1hY3JvVGFzayhoYW5kbGVyKTtcbiAgaWYgKG9uY2UkJDEpIHsgaGFuZGxlciA9IGNyZWF0ZU9uY2VIYW5kbGVyKGhhbmRsZXIsIGV2ZW50LCBjYXB0dXJlKTsgfVxuICB0YXJnZXQkMS5hZGRFdmVudExpc3RlbmVyKFxuICAgIGV2ZW50LFxuICAgIGhhbmRsZXIsXG4gICAgc3VwcG9ydHNQYXNzaXZlXG4gICAgICA/IHsgY2FwdHVyZTogY2FwdHVyZSwgcGFzc2l2ZTogcGFzc2l2ZSB9XG4gICAgICA6IGNhcHR1cmVcbiAgKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlJDIgKFxuICBldmVudCxcbiAgaGFuZGxlcixcbiAgY2FwdHVyZSxcbiAgX3RhcmdldFxuKSB7XG4gIChfdGFyZ2V0IHx8IHRhcmdldCQxKS5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgIGV2ZW50LFxuICAgIGhhbmRsZXIuX3dpdGhUYXNrIHx8IGhhbmRsZXIsXG4gICAgY2FwdHVyZVxuICApO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVET01MaXN0ZW5lcnMgKG9sZFZub2RlLCB2bm9kZSkge1xuICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLm9uKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEub24pKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIG9uID0gdm5vZGUuZGF0YS5vbiB8fCB7fTtcbiAgdmFyIG9sZE9uID0gb2xkVm5vZGUuZGF0YS5vbiB8fCB7fTtcbiAgdGFyZ2V0JDEgPSB2bm9kZS5lbG07XG4gIG5vcm1hbGl6ZUV2ZW50cyhvbik7XG4gIHVwZGF0ZUxpc3RlbmVycyhvbiwgb2xkT24sIGFkZCQxLCByZW1vdmUkMiwgdm5vZGUuY29udGV4dCk7XG4gIHRhcmdldCQxID0gdW5kZWZpbmVkO1xufVxuXG52YXIgZXZlbnRzID0ge1xuICBjcmVhdGU6IHVwZGF0ZURPTUxpc3RlbmVycyxcbiAgdXBkYXRlOiB1cGRhdGVET01MaXN0ZW5lcnNcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIHVwZGF0ZURPTVByb3BzIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5kb21Qcm9wcykgJiYgaXNVbmRlZih2bm9kZS5kYXRhLmRvbVByb3BzKSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBrZXksIGN1cjtcbiAgdmFyIGVsbSA9IHZub2RlLmVsbTtcbiAgdmFyIG9sZFByb3BzID0gb2xkVm5vZGUuZGF0YS5kb21Qcm9wcyB8fCB7fTtcbiAgdmFyIHByb3BzID0gdm5vZGUuZGF0YS5kb21Qcm9wcyB8fCB7fTtcbiAgLy8gY2xvbmUgb2JzZXJ2ZWQgb2JqZWN0cywgYXMgdGhlIHVzZXIgcHJvYmFibHkgd2FudHMgdG8gbXV0YXRlIGl0XG4gIGlmIChpc0RlZihwcm9wcy5fX29iX18pKSB7XG4gICAgcHJvcHMgPSB2bm9kZS5kYXRhLmRvbVByb3BzID0gZXh0ZW5kKHt9LCBwcm9wcyk7XG4gIH1cblxuICBmb3IgKGtleSBpbiBvbGRQcm9wcykge1xuICAgIGlmIChpc1VuZGVmKHByb3BzW2tleV0pKSB7XG4gICAgICBlbG1ba2V5XSA9ICcnO1xuICAgIH1cbiAgfVxuICBmb3IgKGtleSBpbiBwcm9wcykge1xuICAgIGN1ciA9IHByb3BzW2tleV07XG4gICAgLy8gaWdub3JlIGNoaWxkcmVuIGlmIHRoZSBub2RlIGhhcyB0ZXh0Q29udGVudCBvciBpbm5lckhUTUwsXG4gICAgLy8gYXMgdGhlc2Ugd2lsbCB0aHJvdyBhd2F5IGV4aXN0aW5nIERPTSBub2RlcyBhbmQgY2F1c2UgcmVtb3ZhbCBlcnJvcnNcbiAgICAvLyBvbiBzdWJzZXF1ZW50IHBhdGNoZXMgKCMzMzYwKVxuICAgIGlmIChrZXkgPT09ICd0ZXh0Q29udGVudCcgfHwga2V5ID09PSAnaW5uZXJIVE1MJykge1xuICAgICAgaWYgKHZub2RlLmNoaWxkcmVuKSB7IHZub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7IH1cbiAgICAgIGlmIChjdXIgPT09IG9sZFByb3BzW2tleV0pIHsgY29udGludWUgfVxuICAgICAgLy8gIzY2MDEgd29yayBhcm91bmQgQ2hyb21lIHZlcnNpb24gPD0gNTUgYnVnIHdoZXJlIHNpbmdsZSB0ZXh0Tm9kZVxuICAgICAgLy8gcmVwbGFjZWQgYnkgaW5uZXJIVE1ML3RleHRDb250ZW50IHJldGFpbnMgaXRzIHBhcmVudE5vZGUgcHJvcGVydHlcbiAgICAgIGlmIChlbG0uY2hpbGROb2Rlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZWxtLnJlbW92ZUNoaWxkKGVsbS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAndmFsdWUnKSB7XG4gICAgICAvLyBzdG9yZSB2YWx1ZSBhcyBfdmFsdWUgYXMgd2VsbCBzaW5jZVxuICAgICAgLy8gbm9uLXN0cmluZyB2YWx1ZXMgd2lsbCBiZSBzdHJpbmdpZmllZFxuICAgICAgZWxtLl92YWx1ZSA9IGN1cjtcbiAgICAgIC8vIGF2b2lkIHJlc2V0dGluZyBjdXJzb3IgcG9zaXRpb24gd2hlbiB2YWx1ZSBpcyB0aGUgc2FtZVxuICAgICAgdmFyIHN0ckN1ciA9IGlzVW5kZWYoY3VyKSA/ICcnIDogU3RyaW5nKGN1cik7XG4gICAgICBpZiAoc2hvdWxkVXBkYXRlVmFsdWUoZWxtLCBzdHJDdXIpKSB7XG4gICAgICAgIGVsbS52YWx1ZSA9IHN0ckN1cjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWxtW2tleV0gPSBjdXI7XG4gICAgfVxuICB9XG59XG5cbi8vIGNoZWNrIHBsYXRmb3Jtcy93ZWIvdXRpbC9hdHRycy5qcyBhY2NlcHRWYWx1ZVxuXG5cbmZ1bmN0aW9uIHNob3VsZFVwZGF0ZVZhbHVlIChlbG0sIGNoZWNrVmFsKSB7XG4gIHJldHVybiAoIWVsbS5jb21wb3NpbmcgJiYgKFxuICAgIGVsbS50YWdOYW1lID09PSAnT1BUSU9OJyB8fFxuICAgIGlzTm90SW5Gb2N1c0FuZERpcnR5KGVsbSwgY2hlY2tWYWwpIHx8XG4gICAgaXNEaXJ0eVdpdGhNb2RpZmllcnMoZWxtLCBjaGVja1ZhbClcbiAgKSlcbn1cblxuZnVuY3Rpb24gaXNOb3RJbkZvY3VzQW5kRGlydHkgKGVsbSwgY2hlY2tWYWwpIHtcbiAgLy8gcmV0dXJuIHRydWUgd2hlbiB0ZXh0Ym94ICgubnVtYmVyIGFuZCAudHJpbSkgbG9zZXMgZm9jdXMgYW5kIGl0cyB2YWx1ZSBpc1xuICAvLyBub3QgZXF1YWwgdG8gdGhlIHVwZGF0ZWQgdmFsdWVcbiAgdmFyIG5vdEluRm9jdXMgPSB0cnVlO1xuICAvLyAjNjE1N1xuICAvLyB3b3JrIGFyb3VuZCBJRSBidWcgd2hlbiBhY2Nlc3NpbmcgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpbiBhbiBpZnJhbWVcbiAgdHJ5IHsgbm90SW5Gb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGVsbTsgfSBjYXRjaCAoZSkge31cbiAgcmV0dXJuIG5vdEluRm9jdXMgJiYgZWxtLnZhbHVlICE9PSBjaGVja1ZhbFxufVxuXG5mdW5jdGlvbiBpc0RpcnR5V2l0aE1vZGlmaWVycyAoZWxtLCBuZXdWYWwpIHtcbiAgdmFyIHZhbHVlID0gZWxtLnZhbHVlO1xuICB2YXIgbW9kaWZpZXJzID0gZWxtLl92TW9kaWZpZXJzOyAvLyBpbmplY3RlZCBieSB2LW1vZGVsIHJ1bnRpbWVcbiAgaWYgKGlzRGVmKG1vZGlmaWVycykpIHtcbiAgICBpZiAobW9kaWZpZXJzLmxhenkpIHtcbiAgICAgIC8vIGlucHV0cyB3aXRoIGxhenkgc2hvdWxkIG9ubHkgYmUgdXBkYXRlZCB3aGVuIG5vdCBpbiBmb2N1c1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChtb2RpZmllcnMubnVtYmVyKSB7XG4gICAgICByZXR1cm4gdG9OdW1iZXIodmFsdWUpICE9PSB0b051bWJlcihuZXdWYWwpXG4gICAgfVxuICAgIGlmIChtb2RpZmllcnMudHJpbSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRyaW0oKSAhPT0gbmV3VmFsLnRyaW0oKVxuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWUgIT09IG5ld1ZhbFxufVxuXG52YXIgZG9tUHJvcHMgPSB7XG4gIGNyZWF0ZTogdXBkYXRlRE9NUHJvcHMsXG4gIHVwZGF0ZTogdXBkYXRlRE9NUHJvcHNcbn1cblxuLyogICovXG5cbnZhciBwYXJzZVN0eWxlVGV4dCA9IGNhY2hlZChmdW5jdGlvbiAoY3NzVGV4dCkge1xuICB2YXIgcmVzID0ge307XG4gIHZhciBsaXN0RGVsaW1pdGVyID0gLzsoPyFbXihdKlxcKSkvZztcbiAgdmFyIHByb3BlcnR5RGVsaW1pdGVyID0gLzooLispLztcbiAgY3NzVGV4dC5zcGxpdChsaXN0RGVsaW1pdGVyKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIHZhciB0bXAgPSBpdGVtLnNwbGl0KHByb3BlcnR5RGVsaW1pdGVyKTtcbiAgICAgIHRtcC5sZW5ndGggPiAxICYmIChyZXNbdG1wWzBdLnRyaW0oKV0gPSB0bXBbMV0udHJpbSgpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxuLy8gbWVyZ2Ugc3RhdGljIGFuZCBkeW5hbWljIHN0eWxlIGRhdGEgb24gdGhlIHNhbWUgdm5vZGVcbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlRGF0YSAoZGF0YSkge1xuICB2YXIgc3R5bGUgPSBub3JtYWxpemVTdHlsZUJpbmRpbmcoZGF0YS5zdHlsZSk7XG4gIC8vIHN0YXRpYyBzdHlsZSBpcyBwcmUtcHJvY2Vzc2VkIGludG8gYW4gb2JqZWN0IGR1cmluZyBjb21waWxhdGlvblxuICAvLyBhbmQgaXMgYWx3YXlzIGEgZnJlc2ggb2JqZWN0LCBzbyBpdCdzIHNhZmUgdG8gbWVyZ2UgaW50byBpdFxuICByZXR1cm4gZGF0YS5zdGF0aWNTdHlsZVxuICAgID8gZXh0ZW5kKGRhdGEuc3RhdGljU3R5bGUsIHN0eWxlKVxuICAgIDogc3R5bGVcbn1cblxuLy8gbm9ybWFsaXplIHBvc3NpYmxlIGFycmF5IC8gc3RyaW5nIHZhbHVlcyBpbnRvIE9iamVjdFxuZnVuY3Rpb24gbm9ybWFsaXplU3R5bGVCaW5kaW5nIChiaW5kaW5nU3R5bGUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYmluZGluZ1N0eWxlKSkge1xuICAgIHJldHVybiB0b09iamVjdChiaW5kaW5nU3R5bGUpXG4gIH1cbiAgaWYgKHR5cGVvZiBiaW5kaW5nU3R5bGUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHBhcnNlU3R5bGVUZXh0KGJpbmRpbmdTdHlsZSlcbiAgfVxuICByZXR1cm4gYmluZGluZ1N0eWxlXG59XG5cbi8qKlxuICogcGFyZW50IGNvbXBvbmVudCBzdHlsZSBzaG91bGQgYmUgYWZ0ZXIgY2hpbGQnc1xuICogc28gdGhhdCBwYXJlbnQgY29tcG9uZW50J3Mgc3R5bGUgY291bGQgb3ZlcnJpZGUgaXRcbiAqL1xuZnVuY3Rpb24gZ2V0U3R5bGUgKHZub2RlLCBjaGVja0NoaWxkKSB7XG4gIHZhciByZXMgPSB7fTtcbiAgdmFyIHN0eWxlRGF0YTtcblxuICBpZiAoY2hlY2tDaGlsZCkge1xuICAgIHZhciBjaGlsZE5vZGUgPSB2bm9kZTtcbiAgICB3aGlsZSAoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlO1xuICAgICAgaWYgKFxuICAgICAgICBjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEgJiZcbiAgICAgICAgKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YShjaGlsZE5vZGUuZGF0YSkpXG4gICAgICApIHtcbiAgICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YSh2bm9kZS5kYXRhKSkpIHtcbiAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuICB9XG5cbiAgdmFyIHBhcmVudE5vZGUgPSB2bm9kZTtcbiAgd2hpbGUgKChwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnQpKSB7XG4gICAgaWYgKHBhcmVudE5vZGUuZGF0YSAmJiAoc3R5bGVEYXRhID0gbm9ybWFsaXplU3R5bGVEYXRhKHBhcmVudE5vZGUuZGF0YSkpKSB7XG4gICAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qICAqL1xuXG52YXIgY3NzVmFyUkUgPSAvXi0tLztcbnZhciBpbXBvcnRhbnRSRSA9IC9cXHMqIWltcG9ydGFudCQvO1xudmFyIHNldFByb3AgPSBmdW5jdGlvbiAoZWwsIG5hbWUsIHZhbCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGNzc1ZhclJFLnRlc3QobmFtZSkpIHtcbiAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWwpO1xuICB9IGVsc2UgaWYgKGltcG9ydGFudFJFLnRlc3QodmFsKSkge1xuICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbC5yZXBsYWNlKGltcG9ydGFudFJFLCAnJyksICdpbXBvcnRhbnQnKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbm9ybWFsaXplZE5hbWUgPSBub3JtYWxpemUobmFtZSk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgLy8gU3VwcG9ydCB2YWx1ZXMgYXJyYXkgY3JlYXRlZCBieSBhdXRvcHJlZml4ZXIsIGUuZy5cbiAgICAgIC8vIHtkaXNwbGF5OiBbXCItd2Via2l0LWJveFwiLCBcIi1tcy1mbGV4Ym94XCIsIFwiZmxleFwiXX1cbiAgICAgIC8vIFNldCB0aGVtIG9uZSBieSBvbmUsIGFuZCB0aGUgYnJvd3NlciB3aWxsIG9ubHkgc2V0IHRob3NlIGl0IGNhbiByZWNvZ25pemVcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB2YWwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdID0gdmFsW2ldO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zdHlsZVtub3JtYWxpemVkTmFtZV0gPSB2YWw7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdmVuZG9yTmFtZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcblxudmFyIGVtcHR5U3R5bGU7XG52YXIgbm9ybWFsaXplID0gY2FjaGVkKGZ1bmN0aW9uIChwcm9wKSB7XG4gIGVtcHR5U3R5bGUgPSBlbXB0eVN0eWxlIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlO1xuICBwcm9wID0gY2FtZWxpemUocHJvcCk7XG4gIGlmIChwcm9wICE9PSAnZmlsdGVyJyAmJiAocHJvcCBpbiBlbXB0eVN0eWxlKSkge1xuICAgIHJldHVybiBwcm9wXG4gIH1cbiAgdmFyIGNhcE5hbWUgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZW5kb3JOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuYW1lID0gdmVuZG9yTmFtZXNbaV0gKyBjYXBOYW1lO1xuICAgIGlmIChuYW1lIGluIGVtcHR5U3R5bGUpIHtcbiAgICAgIHJldHVybiBuYW1lXG4gICAgfVxuICB9XG59KTtcblxuZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG9sZFZub2RlLCB2bm9kZSkge1xuICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG4gIHZhciBvbGREYXRhID0gb2xkVm5vZGUuZGF0YTtcblxuICBpZiAoaXNVbmRlZihkYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKGRhdGEuc3R5bGUpICYmXG4gICAgaXNVbmRlZihvbGREYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKG9sZERhdGEuc3R5bGUpXG4gICkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGN1ciwgbmFtZTtcbiAgdmFyIGVsID0gdm5vZGUuZWxtO1xuICB2YXIgb2xkU3RhdGljU3R5bGUgPSBvbGREYXRhLnN0YXRpY1N0eWxlO1xuICB2YXIgb2xkU3R5bGVCaW5kaW5nID0gb2xkRGF0YS5ub3JtYWxpemVkU3R5bGUgfHwgb2xkRGF0YS5zdHlsZSB8fCB7fTtcblxuICAvLyBpZiBzdGF0aWMgc3R5bGUgZXhpc3RzLCBzdHlsZWJpbmRpbmcgYWxyZWFkeSBtZXJnZWQgaW50byBpdCB3aGVuIGRvaW5nIG5vcm1hbGl6ZVN0eWxlRGF0YVxuICB2YXIgb2xkU3R5bGUgPSBvbGRTdGF0aWNTdHlsZSB8fCBvbGRTdHlsZUJpbmRpbmc7XG5cbiAgdmFyIHN0eWxlID0gbm9ybWFsaXplU3R5bGVCaW5kaW5nKHZub2RlLmRhdGEuc3R5bGUpIHx8IHt9O1xuXG4gIC8vIHN0b3JlIG5vcm1hbGl6ZWQgc3R5bGUgdW5kZXIgYSBkaWZmZXJlbnQga2V5IGZvciBuZXh0IGRpZmZcbiAgLy8gbWFrZSBzdXJlIHRvIGNsb25lIGl0IGlmIGl0J3MgcmVhY3RpdmUsIHNpbmNlIHRoZSB1c2VyIGxpa2VseSB3YW50c1xuICAvLyB0byBtdXRhdGUgaXQuXG4gIHZub2RlLmRhdGEubm9ybWFsaXplZFN0eWxlID0gaXNEZWYoc3R5bGUuX19vYl9fKVxuICAgID8gZXh0ZW5kKHt9LCBzdHlsZSlcbiAgICA6IHN0eWxlO1xuXG4gIHZhciBuZXdTdHlsZSA9IGdldFN0eWxlKHZub2RlLCB0cnVlKTtcblxuICBmb3IgKG5hbWUgaW4gb2xkU3R5bGUpIHtcbiAgICBpZiAoaXNVbmRlZihuZXdTdHlsZVtuYW1lXSkpIHtcbiAgICAgIHNldFByb3AoZWwsIG5hbWUsICcnKTtcbiAgICB9XG4gIH1cbiAgZm9yIChuYW1lIGluIG5ld1N0eWxlKSB7XG4gICAgY3VyID0gbmV3U3R5bGVbbmFtZV07XG4gICAgaWYgKGN1ciAhPT0gb2xkU3R5bGVbbmFtZV0pIHtcbiAgICAgIC8vIGllOSBzZXR0aW5nIHRvIG51bGwgaGFzIG5vIGVmZmVjdCwgbXVzdCB1c2UgZW1wdHkgc3RyaW5nXG4gICAgICBzZXRQcm9wKGVsLCBuYW1lLCBjdXIgPT0gbnVsbCA/ICcnIDogY3VyKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHN0eWxlID0ge1xuICBjcmVhdGU6IHVwZGF0ZVN0eWxlLFxuICB1cGRhdGU6IHVwZGF0ZVN0eWxlXG59XG5cbi8qICAqL1xuXG4vKipcbiAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIFNWRyBzaW5jZSBjbGFzc0xpc3QgaXMgbm90IHN1cHBvcnRlZCBvblxuICogU1ZHIGVsZW1lbnRzIGluIElFXG4gKi9cbmZ1bmN0aW9uIGFkZENsYXNzIChlbCwgY2xzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIWNscyB8fCAhKGNscyA9IGNscy50cmltKCkpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKGNscy5pbmRleE9mKCcgJykgPiAtMSkge1xuICAgICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoYykgeyByZXR1cm4gZWwuY2xhc3NMaXN0LmFkZChjKTsgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9IFwiIFwiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIjtcbiAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoY3VyICsgY2xzKS50cmltKCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIFNWRyBzaW5jZSBjbGFzc0xpc3QgaXMgbm90IHN1cHBvcnRlZCBvblxuICogU1ZHIGVsZW1lbnRzIGluIElFXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzIChlbCwgY2xzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIWNscyB8fCAhKGNscyA9IGNscy50cmltKCkpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKGNscy5pbmRleE9mKCcgJykgPiAtMSkge1xuICAgICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoYykgeyByZXR1cm4gZWwuY2xhc3NMaXN0LnJlbW92ZShjKTsgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICB9XG4gICAgaWYgKCFlbC5jbGFzc0xpc3QubGVuZ3RoKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBjdXIgPSBcIiBcIiArIChlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgXCIgXCI7XG4gICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcbiAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG4gICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7XG4gICAgfVxuICAgIGN1ciA9IGN1ci50cmltKCk7XG4gICAgaWYgKGN1cikge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGN1cik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgICB9XG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uIChkZWYpIHtcbiAgaWYgKCFkZWYpIHtcbiAgICByZXR1cm5cbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAodHlwZW9mIGRlZiA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIgcmVzID0ge307XG4gICAgaWYgKGRlZi5jc3MgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbmQocmVzLCBhdXRvQ3NzVHJhbnNpdGlvbihkZWYubmFtZSB8fCAndicpKTtcbiAgICB9XG4gICAgZXh0ZW5kKHJlcywgZGVmKTtcbiAgICByZXR1cm4gcmVzXG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gYXV0b0Nzc1RyYW5zaXRpb24oZGVmKVxuICB9XG59XG5cbnZhciBhdXRvQ3NzVHJhbnNpdGlvbiA9IGNhY2hlZChmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4ge1xuICAgIGVudGVyQ2xhc3M6IChuYW1lICsgXCItZW50ZXJcIiksXG4gICAgZW50ZXJUb0NsYXNzOiAobmFtZSArIFwiLWVudGVyLXRvXCIpLFxuICAgIGVudGVyQWN0aXZlQ2xhc3M6IChuYW1lICsgXCItZW50ZXItYWN0aXZlXCIpLFxuICAgIGxlYXZlQ2xhc3M6IChuYW1lICsgXCItbGVhdmVcIiksXG4gICAgbGVhdmVUb0NsYXNzOiAobmFtZSArIFwiLWxlYXZlLXRvXCIpLFxuICAgIGxlYXZlQWN0aXZlQ2xhc3M6IChuYW1lICsgXCItbGVhdmUtYWN0aXZlXCIpXG4gIH1cbn0pO1xuXG52YXIgaGFzVHJhbnNpdGlvbiA9IGluQnJvd3NlciAmJiAhaXNJRTk7XG52YXIgVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcbnZhciBBTklNQVRJT04gPSAnYW5pbWF0aW9uJztcblxuLy8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xudmFyIHRyYW5zaXRpb25Qcm9wID0gJ3RyYW5zaXRpb24nO1xudmFyIHRyYW5zaXRpb25FbmRFdmVudCA9ICd0cmFuc2l0aW9uZW5kJztcbnZhciBhbmltYXRpb25Qcm9wID0gJ2FuaW1hdGlvbic7XG52YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSAnYW5pbWF0aW9uZW5kJztcbmlmIChoYXNUcmFuc2l0aW9uKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAod2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmXG4gICAgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkXG4gICkge1xuICAgIHRyYW5zaXRpb25Qcm9wID0gJ1dlYmtpdFRyYW5zaXRpb24nO1xuICAgIHRyYW5zaXRpb25FbmRFdmVudCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kJztcbiAgfVxuICBpZiAod2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiZcbiAgICB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZFxuICApIHtcbiAgICBhbmltYXRpb25Qcm9wID0gJ1dlYmtpdEFuaW1hdGlvbic7XG4gICAgYW5pbWF0aW9uRW5kRXZlbnQgPSAnd2Via2l0QW5pbWF0aW9uRW5kJztcbiAgfVxufVxuXG4vLyBiaW5kaW5nIHRvIHdpbmRvdyBpcyBuZWNlc3NhcnkgdG8gbWFrZSBob3QgcmVsb2FkIHdvcmsgaW4gSUUgaW4gc3RyaWN0IG1vZGVcbnZhciByYWYgPSBpbkJyb3dzZXJcbiAgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KVxuICAgIDogc2V0VGltZW91dFxuICA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4oKTsgfTtcblxuZnVuY3Rpb24gbmV4dEZyYW1lIChmbikge1xuICByYWYoZnVuY3Rpb24gKCkge1xuICAgIHJhZihmbik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRUcmFuc2l0aW9uQ2xhc3MgKGVsLCBjbHMpIHtcbiAgdmFyIHRyYW5zaXRpb25DbGFzc2VzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzIHx8IChlbC5fdHJhbnNpdGlvbkNsYXNzZXMgPSBbXSk7XG4gIGlmICh0cmFuc2l0aW9uQ2xhc3Nlcy5pbmRleE9mKGNscykgPCAwKSB7XG4gICAgdHJhbnNpdGlvbkNsYXNzZXMucHVzaChjbHMpO1xuICAgIGFkZENsYXNzKGVsLCBjbHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVRyYW5zaXRpb25DbGFzcyAoZWwsIGNscykge1xuICBpZiAoZWwuX3RyYW5zaXRpb25DbGFzc2VzKSB7XG4gICAgcmVtb3ZlKGVsLl90cmFuc2l0aW9uQ2xhc3NlcywgY2xzKTtcbiAgfVxuICByZW1vdmVDbGFzcyhlbCwgY2xzKTtcbn1cblxuZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzIChcbiAgZWwsXG4gIGV4cGVjdGVkVHlwZSxcbiAgY2Jcbikge1xuICB2YXIgcmVmID0gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSk7XG4gIHZhciB0eXBlID0gcmVmLnR5cGU7XG4gIHZhciB0aW1lb3V0ID0gcmVmLnRpbWVvdXQ7XG4gIHZhciBwcm9wQ291bnQgPSByZWYucHJvcENvdW50O1xuICBpZiAoIXR5cGUpIHsgcmV0dXJuIGNiKCkgfVxuICB2YXIgZXZlbnQgPSB0eXBlID09PSBUUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG4gIHZhciBlbmRlZCA9IDA7XG4gIHZhciBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpO1xuICAgIGNiKCk7XG4gIH07XG4gIHZhciBvbkVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuICAgICAgaWYgKCsrZW5kZWQgPj0gcHJvcENvdW50KSB7XG4gICAgICAgIGVuZCgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGVuZGVkIDwgcHJvcENvdW50KSB7XG4gICAgICBlbmQoKTtcbiAgICB9XG4gIH0sIHRpbWVvdXQgKyAxKTtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpO1xufVxuXG52YXIgdHJhbnNmb3JtUkUgPSAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvO1xuXG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uSW5mbyAoZWwsIGV4cGVjdGVkVHlwZSkge1xuICB2YXIgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICB2YXIgdHJhbnNpdGlvbkRlbGF5cyA9IHN0eWxlc1t0cmFuc2l0aW9uUHJvcCArICdEZWxheSddLnNwbGl0KCcsICcpO1xuICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9ucyA9IHN0eWxlc1t0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbiddLnNwbGl0KCcsICcpO1xuICB2YXIgdHJhbnNpdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KHRyYW5zaXRpb25EZWxheXMsIHRyYW5zaXRpb25EdXJhdGlvbnMpO1xuICB2YXIgYW5pbWF0aW9uRGVsYXlzID0gc3R5bGVzW2FuaW1hdGlvblByb3AgKyAnRGVsYXknXS5zcGxpdCgnLCAnKTtcbiAgdmFyIGFuaW1hdGlvbkR1cmF0aW9ucyA9IHN0eWxlc1thbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJ10uc3BsaXQoJywgJyk7XG4gIHZhciBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7XG5cbiAgdmFyIHR5cGU7XG4gIHZhciB0aW1lb3V0ID0gMDtcbiAgdmFyIHByb3BDb3VudCA9IDA7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoZXhwZWN0ZWRUeXBlID09PSBUUkFOU0lUSU9OKSB7XG4gICAgaWYgKHRyYW5zaXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgdHlwZSA9IFRSQU5TSVRJT047XG4gICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7XG4gICAgICBwcm9wQ291bnQgPSB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHtcbiAgICBpZiAoYW5pbWF0aW9uVGltZW91dCA+IDApIHtcbiAgICAgIHR5cGUgPSBBTklNQVRJT047XG4gICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDtcbiAgICAgIHByb3BDb3VudCA9IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRpbWVvdXQgPSBNYXRoLm1heCh0cmFuc2l0aW9uVGltZW91dCwgYW5pbWF0aW9uVGltZW91dCk7XG4gICAgdHlwZSA9IHRpbWVvdXQgPiAwXG4gICAgICA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dFxuICAgICAgICA/IFRSQU5TSVRJT05cbiAgICAgICAgOiBBTklNQVRJT05cbiAgICAgIDogbnVsbDtcbiAgICBwcm9wQ291bnQgPSB0eXBlXG4gICAgICA/IHR5cGUgPT09IFRSQU5TSVRJT05cbiAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aFxuICAgICAgICA6IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGhcbiAgICAgIDogMDtcbiAgfVxuICB2YXIgaGFzVHJhbnNmb3JtID1cbiAgICB0eXBlID09PSBUUkFOU0lUSU9OICYmXG4gICAgdHJhbnNmb3JtUkUudGVzdChzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnUHJvcGVydHknXSk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogdHlwZSxcbiAgICB0aW1lb3V0OiB0aW1lb3V0LFxuICAgIHByb3BDb3VudDogcHJvcENvdW50LFxuICAgIGhhc1RyYW5zZm9ybTogaGFzVHJhbnNmb3JtXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VGltZW91dCAoZGVsYXlzLCBkdXJhdGlvbnMpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgd2hpbGUgKGRlbGF5cy5sZW5ndGggPCBkdXJhdGlvbnMubGVuZ3RoKSB7XG4gICAgZGVsYXlzID0gZGVsYXlzLmNvbmNhdChkZWxheXMpO1xuICB9XG5cbiAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIGR1cmF0aW9ucy5tYXAoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICByZXR1cm4gdG9NcyhkKSArIHRvTXMoZGVsYXlzW2ldKVxuICB9KSlcbn1cblxuZnVuY3Rpb24gdG9NcyAocykge1xuICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpKSAqIDEwMDBcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGVudGVyICh2bm9kZSwgdG9nZ2xlRGlzcGxheSkge1xuICB2YXIgZWwgPSB2bm9kZS5lbG07XG5cbiAgLy8gY2FsbCBsZWF2ZSBjYWxsYmFjayBub3dcbiAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkge1xuICAgIGVsLl9sZWF2ZUNiLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgZWwuX2xlYXZlQ2IoKTtcbiAgfVxuXG4gIHZhciBkYXRhID0gcmVzb2x2ZVRyYW5zaXRpb24odm5vZGUuZGF0YS50cmFuc2l0aW9uKTtcbiAgaWYgKGlzVW5kZWYoZGF0YSkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNEZWYoZWwuX2VudGVyQ2IpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgY3NzID0gZGF0YS5jc3M7XG4gIHZhciB0eXBlID0gZGF0YS50eXBlO1xuICB2YXIgZW50ZXJDbGFzcyA9IGRhdGEuZW50ZXJDbGFzcztcbiAgdmFyIGVudGVyVG9DbGFzcyA9IGRhdGEuZW50ZXJUb0NsYXNzO1xuICB2YXIgZW50ZXJBY3RpdmVDbGFzcyA9IGRhdGEuZW50ZXJBY3RpdmVDbGFzcztcbiAgdmFyIGFwcGVhckNsYXNzID0gZGF0YS5hcHBlYXJDbGFzcztcbiAgdmFyIGFwcGVhclRvQ2xhc3MgPSBkYXRhLmFwcGVhclRvQ2xhc3M7XG4gIHZhciBhcHBlYXJBY3RpdmVDbGFzcyA9IGRhdGEuYXBwZWFyQWN0aXZlQ2xhc3M7XG4gIHZhciBiZWZvcmVFbnRlciA9IGRhdGEuYmVmb3JlRW50ZXI7XG4gIHZhciBlbnRlciA9IGRhdGEuZW50ZXI7XG4gIHZhciBhZnRlckVudGVyID0gZGF0YS5hZnRlckVudGVyO1xuICB2YXIgZW50ZXJDYW5jZWxsZWQgPSBkYXRhLmVudGVyQ2FuY2VsbGVkO1xuICB2YXIgYmVmb3JlQXBwZWFyID0gZGF0YS5iZWZvcmVBcHBlYXI7XG4gIHZhciBhcHBlYXIgPSBkYXRhLmFwcGVhcjtcbiAgdmFyIGFmdGVyQXBwZWFyID0gZGF0YS5hZnRlckFwcGVhcjtcbiAgdmFyIGFwcGVhckNhbmNlbGxlZCA9IGRhdGEuYXBwZWFyQ2FuY2VsbGVkO1xuICB2YXIgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uO1xuXG4gIC8vIGFjdGl2ZUluc3RhbmNlIHdpbGwgYWx3YXlzIGJlIHRoZSA8dHJhbnNpdGlvbj4gY29tcG9uZW50IG1hbmFnaW5nIHRoaXNcbiAgLy8gdHJhbnNpdGlvbi4gT25lIGVkZ2UgY2FzZSB0byBjaGVjayBpcyB3aGVuIHRoZSA8dHJhbnNpdGlvbj4gaXMgcGxhY2VkXG4gIC8vIGFzIHRoZSByb290IG5vZGUgb2YgYSBjaGlsZCBjb21wb25lbnQuIEluIHRoYXQgY2FzZSB3ZSBuZWVkIHRvIGNoZWNrXG4gIC8vIDx0cmFuc2l0aW9uPidzIHBhcmVudCBmb3IgYXBwZWFyIGNoZWNrLlxuICB2YXIgY29udGV4dCA9IGFjdGl2ZUluc3RhbmNlO1xuICB2YXIgdHJhbnNpdGlvbk5vZGUgPSBhY3RpdmVJbnN0YW5jZS4kdm5vZGU7XG4gIHdoaWxlICh0cmFuc2l0aW9uTm9kZSAmJiB0cmFuc2l0aW9uTm9kZS5wYXJlbnQpIHtcbiAgICB0cmFuc2l0aW9uTm9kZSA9IHRyYW5zaXRpb25Ob2RlLnBhcmVudDtcbiAgICBjb250ZXh0ID0gdHJhbnNpdGlvbk5vZGUuY29udGV4dDtcbiAgfVxuXG4gIHZhciBpc0FwcGVhciA9ICFjb250ZXh0Ll9pc01vdW50ZWQgfHwgIXZub2RlLmlzUm9vdEluc2VydDtcblxuICBpZiAoaXNBcHBlYXIgJiYgIWFwcGVhciAmJiBhcHBlYXIgIT09ICcnKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgc3RhcnRDbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhckNsYXNzXG4gICAgPyBhcHBlYXJDbGFzc1xuICAgIDogZW50ZXJDbGFzcztcbiAgdmFyIGFjdGl2ZUNsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyQWN0aXZlQ2xhc3NcbiAgICA/IGFwcGVhckFjdGl2ZUNsYXNzXG4gICAgOiBlbnRlckFjdGl2ZUNsYXNzO1xuICB2YXIgdG9DbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhclRvQ2xhc3NcbiAgICA/IGFwcGVhclRvQ2xhc3NcbiAgICA6IGVudGVyVG9DbGFzcztcblxuICB2YXIgYmVmb3JlRW50ZXJIb29rID0gaXNBcHBlYXJcbiAgICA/IChiZWZvcmVBcHBlYXIgfHwgYmVmb3JlRW50ZXIpXG4gICAgOiBiZWZvcmVFbnRlcjtcbiAgdmFyIGVudGVySG9vayA9IGlzQXBwZWFyXG4gICAgPyAodHlwZW9mIGFwcGVhciA9PT0gJ2Z1bmN0aW9uJyA/IGFwcGVhciA6IGVudGVyKVxuICAgIDogZW50ZXI7XG4gIHZhciBhZnRlckVudGVySG9vayA9IGlzQXBwZWFyXG4gICAgPyAoYWZ0ZXJBcHBlYXIgfHwgYWZ0ZXJFbnRlcilcbiAgICA6IGFmdGVyRW50ZXI7XG4gIHZhciBlbnRlckNhbmNlbGxlZEhvb2sgPSBpc0FwcGVhclxuICAgID8gKGFwcGVhckNhbmNlbGxlZCB8fCBlbnRlckNhbmNlbGxlZClcbiAgICA6IGVudGVyQ2FuY2VsbGVkO1xuXG4gIHZhciBleHBsaWNpdEVudGVyRHVyYXRpb24gPSB0b051bWJlcihcbiAgICBpc09iamVjdChkdXJhdGlvbilcbiAgICAgID8gZHVyYXRpb24uZW50ZXJcbiAgICAgIDogZHVyYXRpb25cbiAgKTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBleHBsaWNpdEVudGVyRHVyYXRpb24gIT0gbnVsbCkge1xuICAgIGNoZWNrRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uLCAnZW50ZXInLCB2bm9kZSk7XG4gIH1cblxuICB2YXIgZXhwZWN0c0NTUyA9IGNzcyAhPT0gZmFsc2UgJiYgIWlzSUU5O1xuICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgoZW50ZXJIb29rKTtcblxuICB2YXIgY2IgPSBlbC5fZW50ZXJDYiA9IG9uY2UoZnVuY3Rpb24gKCkge1xuICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHRvQ2xhc3MpO1xuICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBhY3RpdmVDbGFzcyk7XG4gICAgfVxuICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcbiAgICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7XG4gICAgICB9XG4gICAgICBlbnRlckNhbmNlbGxlZEhvb2sgJiYgZW50ZXJDYW5jZWxsZWRIb29rKGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJFbnRlckhvb2sgJiYgYWZ0ZXJFbnRlckhvb2soZWwpO1xuICAgIH1cbiAgICBlbC5fZW50ZXJDYiA9IG51bGw7XG4gIH0pO1xuXG4gIGlmICghdm5vZGUuZGF0YS5zaG93KSB7XG4gICAgLy8gcmVtb3ZlIHBlbmRpbmcgbGVhdmUgZWxlbWVudCBvbiBlbnRlciBieSBpbmplY3RpbmcgYW4gaW5zZXJ0IGhvb2tcbiAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ2luc2VydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuICAgICAgdmFyIHBlbmRpbmdOb2RlID0gcGFyZW50ICYmIHBhcmVudC5fcGVuZGluZyAmJiBwYXJlbnQuX3BlbmRpbmdbdm5vZGUua2V5XTtcbiAgICAgIGlmIChwZW5kaW5nTm9kZSAmJlxuICAgICAgICBwZW5kaW5nTm9kZS50YWcgPT09IHZub2RlLnRhZyAmJlxuICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2JcbiAgICAgICkge1xuICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2IoKTtcbiAgICAgIH1cbiAgICAgIGVudGVySG9vayAmJiBlbnRlckhvb2soZWwsIGNiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHN0YXJ0IGVudGVyIHRyYW5zaXRpb25cbiAgYmVmb3JlRW50ZXJIb29rICYmIGJlZm9yZUVudGVySG9vayhlbCk7XG4gIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcbiAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTtcbiAgICBuZXh0RnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcbiAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgdG9DbGFzcyk7XG4gICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkge1xuICAgICAgICAgIGlmIChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChjYiwgZXhwbGljaXRFbnRlckR1cmF0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBjYik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAodm5vZGUuZGF0YS5zaG93KSB7XG4gICAgdG9nZ2xlRGlzcGxheSAmJiB0b2dnbGVEaXNwbGF5KCk7XG4gICAgZW50ZXJIb29rICYmIGVudGVySG9vayhlbCwgY2IpO1xuICB9XG5cbiAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7XG4gICAgY2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWF2ZSAodm5vZGUsIHJtKSB7XG4gIHZhciBlbCA9IHZub2RlLmVsbTtcblxuICAvLyBjYWxsIGVudGVyIGNhbGxiYWNrIG5vd1xuICBpZiAoaXNEZWYoZWwuX2VudGVyQ2IpKSB7XG4gICAgZWwuX2VudGVyQ2IuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICBlbC5fZW50ZXJDYigpO1xuICB9XG5cbiAgdmFyIGRhdGEgPSByZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pO1xuICBpZiAoaXNVbmRlZihkYXRhKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkge1xuICAgIHJldHVybiBybSgpXG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGNzcyA9IGRhdGEuY3NzO1xuICB2YXIgdHlwZSA9IGRhdGEudHlwZTtcbiAgdmFyIGxlYXZlQ2xhc3MgPSBkYXRhLmxlYXZlQ2xhc3M7XG4gIHZhciBsZWF2ZVRvQ2xhc3MgPSBkYXRhLmxlYXZlVG9DbGFzcztcbiAgdmFyIGxlYXZlQWN0aXZlQ2xhc3MgPSBkYXRhLmxlYXZlQWN0aXZlQ2xhc3M7XG4gIHZhciBiZWZvcmVMZWF2ZSA9IGRhdGEuYmVmb3JlTGVhdmU7XG4gIHZhciBsZWF2ZSA9IGRhdGEubGVhdmU7XG4gIHZhciBhZnRlckxlYXZlID0gZGF0YS5hZnRlckxlYXZlO1xuICB2YXIgbGVhdmVDYW5jZWxsZWQgPSBkYXRhLmxlYXZlQ2FuY2VsbGVkO1xuICB2YXIgZGVsYXlMZWF2ZSA9IGRhdGEuZGVsYXlMZWF2ZTtcbiAgdmFyIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjtcblxuICB2YXIgZXhwZWN0c0NTUyA9IGNzcyAhPT0gZmFsc2UgJiYgIWlzSUU5O1xuICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgobGVhdmUpO1xuXG4gIHZhciBleHBsaWNpdExlYXZlRHVyYXRpb24gPSB0b051bWJlcihcbiAgICBpc09iamVjdChkdXJhdGlvbilcbiAgICAgID8gZHVyYXRpb24ubGVhdmVcbiAgICAgIDogZHVyYXRpb25cbiAgKTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBpc0RlZihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7XG4gICAgY2hlY2tEdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24sICdsZWF2ZScsIHZub2RlKTtcbiAgfVxuXG4gIHZhciBjYiA9IGVsLl9sZWF2ZUNiID0gb25jZShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5fcGVuZGluZykge1xuICAgICAgZWwucGFyZW50Tm9kZS5fcGVuZGluZ1t2bm9kZS5rZXldID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGV4cGVjdHNDU1MpIHtcbiAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcbiAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgfVxuICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcbiAgICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG4gICAgICB9XG4gICAgICBsZWF2ZUNhbmNlbGxlZCAmJiBsZWF2ZUNhbmNlbGxlZChlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJtKCk7XG4gICAgICBhZnRlckxlYXZlICYmIGFmdGVyTGVhdmUoZWwpO1xuICAgIH1cbiAgICBlbC5fbGVhdmVDYiA9IG51bGw7XG4gIH0pO1xuXG4gIGlmIChkZWxheUxlYXZlKSB7XG4gICAgZGVsYXlMZWF2ZShwZXJmb3JtTGVhdmUpO1xuICB9IGVsc2Uge1xuICAgIHBlcmZvcm1MZWF2ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGVyZm9ybUxlYXZlICgpIHtcbiAgICAvLyB0aGUgZGVsYXllZCBsZWF2ZSBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gY2FuY2VsbGVkXG4gICAgaWYgKGNiLmNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIHJlY29yZCBsZWF2aW5nIGVsZW1lbnRcbiAgICBpZiAoIXZub2RlLmRhdGEuc2hvdykge1xuICAgICAgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgfHwgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgPSB7fSkpWyh2bm9kZS5rZXkpXSA9IHZub2RlO1xuICAgIH1cbiAgICBiZWZvcmVMZWF2ZSAmJiBiZWZvcmVMZWF2ZShlbCk7XG4gICAgaWYgKGV4cGVjdHNDU1MpIHtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTtcbiAgICAgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG4gICAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZER1cmF0aW9uKGV4cGxpY2l0TGVhdmVEdXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChjYiwgZXhwbGljaXRMZWF2ZUR1cmF0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgY2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGxlYXZlICYmIGxlYXZlKGVsLCBjYik7XG4gICAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBvbmx5IHVzZWQgaW4gZGV2IG1vZGVcbmZ1bmN0aW9uIGNoZWNrRHVyYXRpb24gKHZhbCwgbmFtZSwgdm5vZGUpIHtcbiAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XG4gICAgd2FybihcbiAgICAgIFwiPHRyYW5zaXRpb24+IGV4cGxpY2l0IFwiICsgbmFtZSArIFwiIGR1cmF0aW9uIGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIFwiICtcbiAgICAgIFwiZ290IFwiICsgKEpTT04uc3RyaW5naWZ5KHZhbCkpICsgXCIuXCIsXG4gICAgICB2bm9kZS5jb250ZXh0XG4gICAgKTtcbiAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7XG4gICAgd2FybihcbiAgICAgIFwiPHRyYW5zaXRpb24+IGV4cGxpY2l0IFwiICsgbmFtZSArIFwiIGR1cmF0aW9uIGlzIE5hTiAtIFwiICtcbiAgICAgICd0aGUgZHVyYXRpb24gZXhwcmVzc2lvbiBtaWdodCBiZSBpbmNvcnJlY3QuJyxcbiAgICAgIHZub2RlLmNvbnRleHRcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWREdXJhdGlvbiAodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsKVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIHRyYW5zaXRpb24gaG9vaydzIGFyZ3VtZW50IGxlbmd0aC4gVGhlIGhvb2sgbWF5IGJlOlxuICogLSBhIG1lcmdlZCBob29rIChpbnZva2VyKSB3aXRoIHRoZSBvcmlnaW5hbCBpbiAuZm5zXG4gKiAtIGEgd3JhcHBlZCBjb21wb25lbnQgbWV0aG9kIChjaGVjayAuX2xlbmd0aClcbiAqIC0gYSBwbGFpbiBmdW5jdGlvbiAoLmxlbmd0aClcbiAqL1xuZnVuY3Rpb24gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCAoZm4pIHtcbiAgaWYgKGlzVW5kZWYoZm4pKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgdmFyIGludm9rZXJGbnMgPSBmbi5mbnM7XG4gIGlmIChpc0RlZihpbnZva2VyRm5zKSkge1xuICAgIC8vIGludm9rZXJcbiAgICByZXR1cm4gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChcbiAgICAgIEFycmF5LmlzQXJyYXkoaW52b2tlckZucylcbiAgICAgICAgPyBpbnZva2VyRm5zWzBdXG4gICAgICAgIDogaW52b2tlckZuc1xuICAgIClcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gKGZuLl9sZW5ndGggfHwgZm4ubGVuZ3RoKSA+IDFcbiAgfVxufVxuXG5mdW5jdGlvbiBfZW50ZXIgKF8sIHZub2RlKSB7XG4gIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHtcbiAgICBlbnRlcih2bm9kZSk7XG4gIH1cbn1cblxudmFyIHRyYW5zaXRpb24gPSBpbkJyb3dzZXIgPyB7XG4gIGNyZWF0ZTogX2VudGVyLFxuICBhY3RpdmF0ZTogX2VudGVyLFxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSQkMSAodm5vZGUsIHJtKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAodm5vZGUuZGF0YS5zaG93ICE9PSB0cnVlKSB7XG4gICAgICBsZWF2ZSh2bm9kZSwgcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBybSgpO1xuICAgIH1cbiAgfVxufSA6IHt9XG5cbnZhciBwbGF0Zm9ybU1vZHVsZXMgPSBbXG4gIGF0dHJzLFxuICBrbGFzcyxcbiAgZXZlbnRzLFxuICBkb21Qcm9wcyxcbiAgc3R5bGUsXG4gIHRyYW5zaXRpb25cbl1cblxuLyogICovXG5cbi8vIHRoZSBkaXJlY3RpdmUgbW9kdWxlIHNob3VsZCBiZSBhcHBsaWVkIGxhc3QsIGFmdGVyIGFsbFxuLy8gYnVpbHQtaW4gbW9kdWxlcyBoYXZlIGJlZW4gYXBwbGllZC5cbnZhciBtb2R1bGVzID0gcGxhdGZvcm1Nb2R1bGVzLmNvbmNhdChiYXNlTW9kdWxlcyk7XG5cbnZhciBwYXRjaCA9IGNyZWF0ZVBhdGNoRnVuY3Rpb24oeyBub2RlT3BzOiBub2RlT3BzLCBtb2R1bGVzOiBtb2R1bGVzIH0pO1xuXG4vKipcbiAqIE5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBsaWtlIGF0dGFjaGluZ1xuICogcHJvcGVydGllcyB0byBFbGVtZW50cy5cbiAqL1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbmlmIChpc0lFOSkge1xuICAvLyBodHRwOi8vd3d3Lm1hdHRzNDExLmNvbS9wb3N0L2ludGVybmV0LWV4cGxvcmVyLTktb25pbnB1dC9cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgaWYgKGVsICYmIGVsLnZtb2RlbCkge1xuICAgICAgdHJpZ2dlcihlbCwgJ2lucHV0Jyk7XG4gICAgfVxuICB9KTtcbn1cblxudmFyIGRpcmVjdGl2ZSA9IHtcbiAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkIChlbCwgYmluZGluZywgdm5vZGUsIG9sZFZub2RlKSB7XG4gICAgaWYgKHZub2RlLnRhZyA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgIC8vICM2OTAzXG4gICAgICBpZiAob2xkVm5vZGUuZWxtICYmICFvbGRWbm9kZS5lbG0uX3ZPcHRpb25zKSB7XG4gICAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRpcmVjdGl2ZS5jb21wb25lbnRVcGRhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpO1xuICAgICAgfVxuICAgICAgZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodm5vZGUudGFnID09PSAndGV4dGFyZWEnIHx8IGlzVGV4dElucHV0VHlwZShlbC50eXBlKSkge1xuICAgICAgZWwuX3ZNb2RpZmllcnMgPSBiaW5kaW5nLm1vZGlmaWVycztcbiAgICAgIGlmICghYmluZGluZy5tb2RpZmllcnMubGF6eSkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbnN0YXJ0Jywgb25Db21wb3NpdGlvblN0YXJ0KTtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25lbmQnLCBvbkNvbXBvc2l0aW9uRW5kKTtcbiAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlblxuICAgICAgICAvLyBzd2l0Y2hpbmcgZm9jdXMgYmVmb3JlIGNvbmZpcm1pbmcgY29tcG9zaXRpb24gY2hvaWNlXG4gICAgICAgIC8vIHRoaXMgYWxzbyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgc29tZSBicm93c2VycyBlLmcuIGlPUyBDaHJvbWVcbiAgICAgICAgLy8gZmlyZXMgXCJjaGFuZ2VcIiBpbnN0ZWFkIG9mIFwiaW5wdXRcIiBvbiBhdXRvY29tcGxldGUuXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGlzSUU5KSB7XG4gICAgICAgICAgZWwudm1vZGVsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnRVcGRhdGVkOiBmdW5jdGlvbiBjb21wb25lbnRVcGRhdGVkIChlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICBpZiAodm5vZGUudGFnID09PSAnc2VsZWN0Jykge1xuICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpO1xuICAgICAgLy8gaW4gY2FzZSB0aGUgb3B0aW9ucyByZW5kZXJlZCBieSB2LWZvciBoYXZlIGNoYW5nZWQsXG4gICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHZhbHVlIGlzIG91dC1vZi1zeW5jIHdpdGggdGhlIHJlbmRlcmVkIG9wdGlvbnMuXG4gICAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZmlsdGVyIG91dCB2YWx1ZXMgdGhhdCBubyBsb25nZXIgaGFzIGEgbWF0Y2hpbmdcbiAgICAgIC8vIG9wdGlvbiBpbiB0aGUgRE9NLlxuICAgICAgdmFyIHByZXZPcHRpb25zID0gZWwuX3ZPcHRpb25zO1xuICAgICAgdmFyIGN1ck9wdGlvbnMgPSBlbC5fdk9wdGlvbnMgPSBbXS5tYXAuY2FsbChlbC5vcHRpb25zLCBnZXRWYWx1ZSk7XG4gICAgICBpZiAoY3VyT3B0aW9ucy5zb21lKGZ1bmN0aW9uIChvLCBpKSB7IHJldHVybiAhbG9vc2VFcXVhbChvLCBwcmV2T3B0aW9uc1tpXSk7IH0pKSB7XG4gICAgICAgIC8vIHRyaWdnZXIgY2hhbmdlIGV2ZW50IGlmXG4gICAgICAgIC8vIG5vIG1hdGNoaW5nIG9wdGlvbiBmb3VuZCBmb3IgYXQgbGVhc3Qgb25lIHZhbHVlXG4gICAgICAgIHZhciBuZWVkUmVzZXQgPSBlbC5tdWx0aXBsZVxuICAgICAgICAgID8gYmluZGluZy52YWx1ZS5zb21lKGZ1bmN0aW9uICh2KSB7IHJldHVybiBoYXNOb01hdGNoaW5nT3B0aW9uKHYsIGN1ck9wdGlvbnMpOyB9KVxuICAgICAgICAgIDogYmluZGluZy52YWx1ZSAhPT0gYmluZGluZy5vbGRWYWx1ZSAmJiBoYXNOb01hdGNoaW5nT3B0aW9uKGJpbmRpbmcudmFsdWUsIGN1ck9wdGlvbnMpO1xuICAgICAgICBpZiAobmVlZFJlc2V0KSB7XG4gICAgICAgICAgdHJpZ2dlcihlbCwgJ2NoYW5nZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTZWxlY3RlZCAoZWwsIGJpbmRpbmcsIHZtKSB7XG4gIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZtKTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0lFIHx8IGlzRWRnZSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pO1xuICAgIH0sIDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFjdHVhbGx5U2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkge1xuICB2YXIgdmFsdWUgPSBiaW5kaW5nLnZhbHVlO1xuICB2YXIgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlO1xuICBpZiAoaXNNdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICBcIjxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD1cXFwiXCIgKyAoYmluZGluZy5leHByZXNzaW9uKSArIFwiXFxcIj4gXCIgK1xuICAgICAgXCJleHBlY3RzIGFuIEFycmF5IHZhbHVlIGZvciBpdHMgYmluZGluZywgYnV0IGdvdCBcIiArIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKSksXG4gICAgICB2bVxuICAgICk7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHNlbGVjdGVkLCBvcHRpb247XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvcHRpb24gPSBlbC5vcHRpb25zW2ldO1xuICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICBzZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgZ2V0VmFsdWUob3B0aW9uKSkgPiAtMTtcbiAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQgIT09IHNlbGVjdGVkKSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobG9vc2VFcXVhbChnZXRWYWx1ZShvcHRpb24pLCB2YWx1ZSkpIHtcbiAgICAgICAgaWYgKGVsLnNlbGVjdGVkSW5kZXggIT09IGkpIHtcbiAgICAgICAgICBlbC5zZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKCFpc011bHRpcGxlKSB7XG4gICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhc05vTWF0Y2hpbmdPcHRpb24gKHZhbHVlLCBvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhbG9vc2VFcXVhbChvLCB2YWx1ZSk7IH0pXG59XG5cbmZ1bmN0aW9uIGdldFZhbHVlIChvcHRpb24pIHtcbiAgcmV0dXJuICdfdmFsdWUnIGluIG9wdGlvblxuICAgID8gb3B0aW9uLl92YWx1ZVxuICAgIDogb3B0aW9uLnZhbHVlXG59XG5cbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydCAoZSkge1xuICBlLnRhcmdldC5jb21wb3NpbmcgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kIChlKSB7XG4gIC8vIHByZXZlbnQgdHJpZ2dlcmluZyBhbiBpbnB1dCBldmVudCBmb3Igbm8gcmVhc29uXG4gIGlmICghZS50YXJnZXQuY29tcG9zaW5nKSB7IHJldHVybiB9XG4gIGUudGFyZ2V0LmNvbXBvc2luZyA9IGZhbHNlO1xuICB0cmlnZ2VyKGUudGFyZ2V0LCAnaW5wdXQnKTtcbn1cblxuZnVuY3Rpb24gdHJpZ2dlciAoZWwsIHR5cGUpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbn1cblxuLyogICovXG5cbi8vIHJlY3Vyc2l2ZWx5IHNlYXJjaCBmb3IgcG9zc2libGUgdHJhbnNpdGlvbiBkZWZpbmVkIGluc2lkZSB0aGUgY29tcG9uZW50IHJvb3RcbmZ1bmN0aW9uIGxvY2F0ZU5vZGUgKHZub2RlKSB7XG4gIHJldHVybiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSAmJiAoIXZub2RlLmRhdGEgfHwgIXZub2RlLmRhdGEudHJhbnNpdGlvbilcbiAgICA/IGxvY2F0ZU5vZGUodm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlKVxuICAgIDogdm5vZGVcbn1cblxudmFyIHNob3cgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQgKGVsLCByZWYsIHZub2RlKSB7XG4gICAgdmFyIHZhbHVlID0gcmVmLnZhbHVlO1xuXG4gICAgdm5vZGUgPSBsb2NhdGVOb2RlKHZub2RlKTtcbiAgICB2YXIgdHJhbnNpdGlvbiQkMSA9IHZub2RlLmRhdGEgJiYgdm5vZGUuZGF0YS50cmFuc2l0aW9uO1xuICAgIHZhciBvcmlnaW5hbERpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgPVxuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJycgOiBlbC5zdHlsZS5kaXNwbGF5O1xuICAgIGlmICh2YWx1ZSAmJiB0cmFuc2l0aW9uJCQxKSB7XG4gICAgICB2bm9kZS5kYXRhLnNob3cgPSB0cnVlO1xuICAgICAgZW50ZXIodm5vZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IG9yaWdpbmFsRGlzcGxheTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBvcmlnaW5hbERpc3BsYXkgOiAnbm9uZSc7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlIChlbCwgcmVmLCB2bm9kZSkge1xuICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcbiAgICB2YXIgb2xkVmFsdWUgPSByZWYub2xkVmFsdWU7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXZhbHVlID09PSAhb2xkVmFsdWUpIHsgcmV0dXJuIH1cbiAgICB2bm9kZSA9IGxvY2F0ZU5vZGUodm5vZGUpO1xuICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247XG4gICAgaWYgKHRyYW5zaXRpb24kJDEpIHtcbiAgICAgIHZub2RlLmRhdGEuc2hvdyA9IHRydWU7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZW50ZXIodm5vZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5O1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxlYXZlKHZub2RlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IGVsLl9fdk9yaWdpbmFsRGlzcGxheSA6ICdub25lJztcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQgKFxuICAgIGVsLFxuICAgIGJpbmRpbmcsXG4gICAgdm5vZGUsXG4gICAgb2xkVm5vZGUsXG4gICAgaXNEZXN0cm95XG4gICkge1xuICAgIGlmICghaXNEZXN0cm95KSB7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5O1xuICAgIH1cbiAgfVxufVxuXG52YXIgcGxhdGZvcm1EaXJlY3RpdmVzID0ge1xuICBtb2RlbDogZGlyZWN0aXZlLFxuICBzaG93OiBzaG93XG59XG5cbi8qICAqL1xuXG4vLyBQcm92aWRlcyB0cmFuc2l0aW9uIHN1cHBvcnQgZm9yIGEgc2luZ2xlIGVsZW1lbnQvY29tcG9uZW50LlxuLy8gc3VwcG9ydHMgdHJhbnNpdGlvbiBtb2RlIChvdXQtaW4gLyBpbi1vdXQpXG5cbnZhciB0cmFuc2l0aW9uUHJvcHMgPSB7XG4gIG5hbWU6IFN0cmluZyxcbiAgYXBwZWFyOiBCb29sZWFuLFxuICBjc3M6IEJvb2xlYW4sXG4gIG1vZGU6IFN0cmluZyxcbiAgdHlwZTogU3RyaW5nLFxuICBlbnRlckNsYXNzOiBTdHJpbmcsXG4gIGxlYXZlQ2xhc3M6IFN0cmluZyxcbiAgZW50ZXJUb0NsYXNzOiBTdHJpbmcsXG4gIGxlYXZlVG9DbGFzczogU3RyaW5nLFxuICBlbnRlckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gIGxlYXZlQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgYXBwZWFyQ2xhc3M6IFN0cmluZyxcbiAgYXBwZWFyQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgYXBwZWFyVG9DbGFzczogU3RyaW5nLFxuICBkdXJhdGlvbjogW051bWJlciwgU3RyaW5nLCBPYmplY3RdXG59O1xuXG4vLyBpbiBjYXNlIHRoZSBjaGlsZCBpcyBhbHNvIGFuIGFic3RyYWN0IGNvbXBvbmVudCwgZS5nLiA8a2VlcC1hbGl2ZT5cbi8vIHdlIHdhbnQgdG8gcmVjdXJzaXZlbHkgcmV0cmlldmUgdGhlIHJlYWwgY29tcG9uZW50IHRvIGJlIHJlbmRlcmVkXG5mdW5jdGlvbiBnZXRSZWFsQ2hpbGQgKHZub2RlKSB7XG4gIHZhciBjb21wT3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG4gIGlmIChjb21wT3B0aW9ucyAmJiBjb21wT3B0aW9ucy5DdG9yLm9wdGlvbnMuYWJzdHJhY3QpIHtcbiAgICByZXR1cm4gZ2V0UmVhbENoaWxkKGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoY29tcE9wdGlvbnMuY2hpbGRyZW4pKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB2bm9kZVxuICB9XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RUcmFuc2l0aW9uRGF0YSAoY29tcCkge1xuICB2YXIgZGF0YSA9IHt9O1xuICB2YXIgb3B0aW9ucyA9IGNvbXAuJG9wdGlvbnM7XG4gIC8vIHByb3BzXG4gIGZvciAodmFyIGtleSBpbiBvcHRpb25zLnByb3BzRGF0YSkge1xuICAgIGRhdGFba2V5XSA9IGNvbXBba2V5XTtcbiAgfVxuICAvLyBldmVudHMuXG4gIC8vIGV4dHJhY3QgbGlzdGVuZXJzIGFuZCBwYXNzIHRoZW0gZGlyZWN0bHkgdG8gdGhlIHRyYW5zaXRpb24gbWV0aG9kc1xuICB2YXIgbGlzdGVuZXJzID0gb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuICBmb3IgKHZhciBrZXkkMSBpbiBsaXN0ZW5lcnMpIHtcbiAgICBkYXRhW2NhbWVsaXplKGtleSQxKV0gPSBsaXN0ZW5lcnNba2V5JDFdO1xuICB9XG4gIHJldHVybiBkYXRhXG59XG5cbmZ1bmN0aW9uIHBsYWNlaG9sZGVyIChoLCByYXdDaGlsZCkge1xuICBpZiAoL1xcZC1rZWVwLWFsaXZlJC8udGVzdChyYXdDaGlsZC50YWcpKSB7XG4gICAgcmV0dXJuIGgoJ2tlZXAtYWxpdmUnLCB7XG4gICAgICBwcm9wczogcmF3Q2hpbGQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGFcbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGhhc1BhcmVudFRyYW5zaXRpb24gKHZub2RlKSB7XG4gIHdoaWxlICgodm5vZGUgPSB2bm9kZS5wYXJlbnQpKSB7XG4gICAgaWYgKHZub2RlLmRhdGEudHJhbnNpdGlvbikge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTYW1lQ2hpbGQgKGNoaWxkLCBvbGRDaGlsZCkge1xuICByZXR1cm4gb2xkQ2hpbGQua2V5ID09PSBjaGlsZC5rZXkgJiYgb2xkQ2hpbGQudGFnID09PSBjaGlsZC50YWdcbn1cblxudmFyIFRyYW5zaXRpb24gPSB7XG4gIG5hbWU6ICd0cmFuc2l0aW9uJyxcbiAgcHJvcHM6IHRyYW5zaXRpb25Qcm9wcyxcbiAgYWJzdHJhY3Q6IHRydWUsXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKGgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJHNsb3RzLmRlZmF1bHQ7XG4gICAgaWYgKCFjaGlsZHJlbikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gZmlsdGVyIG91dCB0ZXh0IG5vZGVzIChwb3NzaWJsZSB3aGl0ZXNwYWNlcylcbiAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy50YWcgfHwgaXNBc3luY1BsYWNlaG9sZGVyKGMpOyB9KTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gd2FybiBtdWx0aXBsZSBlbGVtZW50c1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgICc8dHJhbnNpdGlvbj4gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIHNpbmdsZSBlbGVtZW50LiBVc2UgJyArXG4gICAgICAgICc8dHJhbnNpdGlvbi1ncm91cD4gZm9yIGxpc3RzLicsXG4gICAgICAgIHRoaXMuJHBhcmVudFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgbW9kZSA9IHRoaXMubW9kZTtcblxuICAgIC8vIHdhcm4gaW52YWxpZCBtb2RlXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgIG1vZGUgJiYgbW9kZSAhPT0gJ2luLW91dCcgJiYgbW9kZSAhPT0gJ291dC1pbidcbiAgICApIHtcbiAgICAgIHdhcm4oXG4gICAgICAgICdpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAnICsgbW9kZSxcbiAgICAgICAgdGhpcy4kcGFyZW50XG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciByYXdDaGlsZCA9IGNoaWxkcmVuWzBdO1xuXG4gICAgLy8gaWYgdGhpcyBpcyBhIGNvbXBvbmVudCByb290IG5vZGUgYW5kIHRoZSBjb21wb25lbnQnc1xuICAgIC8vIHBhcmVudCBjb250YWluZXIgbm9kZSBhbHNvIGhhcyB0cmFuc2l0aW9uLCBza2lwLlxuICAgIGlmIChoYXNQYXJlbnRUcmFuc2l0aW9uKHRoaXMuJHZub2RlKSkge1xuICAgICAgcmV0dXJuIHJhd0NoaWxkXG4gICAgfVxuXG4gICAgLy8gYXBwbHkgdHJhbnNpdGlvbiBkYXRhIHRvIGNoaWxkXG4gICAgLy8gdXNlIGdldFJlYWxDaGlsZCgpIHRvIGlnbm9yZSBhYnN0cmFjdCBjb21wb25lbnRzIGUuZy4ga2VlcC1hbGl2ZVxuICAgIHZhciBjaGlsZCA9IGdldFJlYWxDaGlsZChyYXdDaGlsZCk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFjaGlsZCkge1xuICAgICAgcmV0dXJuIHJhd0NoaWxkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xlYXZpbmcpIHtcbiAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZClcbiAgICB9XG5cbiAgICAvLyBlbnN1cmUgYSBrZXkgdGhhdCBpcyB1bmlxdWUgdG8gdGhlIHZub2RlIHR5cGUgYW5kIHRvIHRoaXMgdHJhbnNpdGlvblxuICAgIC8vIGNvbXBvbmVudCBpbnN0YW5jZS4gVGhpcyBrZXkgd2lsbCBiZSB1c2VkIHRvIHJlbW92ZSBwZW5kaW5nIGxlYXZpbmcgbm9kZXNcbiAgICAvLyBkdXJpbmcgZW50ZXJpbmcuXG4gICAgdmFyIGlkID0gXCJfX3RyYW5zaXRpb24tXCIgKyAodGhpcy5fdWlkKSArIFwiLVwiO1xuICAgIGNoaWxkLmtleSA9IGNoaWxkLmtleSA9PSBudWxsXG4gICAgICA/IGNoaWxkLmlzQ29tbWVudFxuICAgICAgICA/IGlkICsgJ2NvbW1lbnQnXG4gICAgICAgIDogaWQgKyBjaGlsZC50YWdcbiAgICAgIDogaXNQcmltaXRpdmUoY2hpbGQua2V5KVxuICAgICAgICA/IChTdHJpbmcoY2hpbGQua2V5KS5pbmRleE9mKGlkKSA9PT0gMCA/IGNoaWxkLmtleSA6IGlkICsgY2hpbGQua2V5KVxuICAgICAgICA6IGNoaWxkLmtleTtcblxuICAgIHZhciBkYXRhID0gKGNoaWxkLmRhdGEgfHwgKGNoaWxkLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7XG4gICAgdmFyIG9sZFJhd0NoaWxkID0gdGhpcy5fdm5vZGU7XG4gICAgdmFyIG9sZENoaWxkID0gZ2V0UmVhbENoaWxkKG9sZFJhd0NoaWxkKTtcblxuICAgIC8vIG1hcmsgdi1zaG93XG4gICAgLy8gc28gdGhhdCB0aGUgdHJhbnNpdGlvbiBtb2R1bGUgY2FuIGhhbmQgb3ZlciB0aGUgY29udHJvbCB0byB0aGUgZGlyZWN0aXZlXG4gICAgaWYgKGNoaWxkLmRhdGEuZGlyZWN0aXZlcyAmJiBjaGlsZC5kYXRhLmRpcmVjdGl2ZXMuc29tZShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lID09PSAnc2hvdyc7IH0pKSB7XG4gICAgICBjaGlsZC5kYXRhLnNob3cgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIG9sZENoaWxkICYmXG4gICAgICBvbGRDaGlsZC5kYXRhICYmXG4gICAgICAhaXNTYW1lQ2hpbGQoY2hpbGQsIG9sZENoaWxkKSAmJlxuICAgICAgIWlzQXN5bmNQbGFjZWhvbGRlcihvbGRDaGlsZCkgJiZcbiAgICAgIC8vICM2Njg3IGNvbXBvbmVudCByb290IGlzIGEgY29tbWVudCBub2RlXG4gICAgICAhKG9sZENoaWxkLmNvbXBvbmVudEluc3RhbmNlICYmIG9sZENoaWxkLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpXG4gICAgKSB7XG4gICAgICAvLyByZXBsYWNlIG9sZCBjaGlsZCB0cmFuc2l0aW9uIGRhdGEgd2l0aCBmcmVzaCBvbmVcbiAgICAgIC8vIGltcG9ydGFudCBmb3IgZHluYW1pYyB0cmFuc2l0aW9ucyFcbiAgICAgIHZhciBvbGREYXRhID0gb2xkQ2hpbGQuZGF0YS50cmFuc2l0aW9uID0gZXh0ZW5kKHt9LCBkYXRhKTtcbiAgICAgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIG1vZGVcbiAgICAgIGlmIChtb2RlID09PSAnb3V0LWluJykge1xuICAgICAgICAvLyByZXR1cm4gcGxhY2Vob2xkZXIgbm9kZSBhbmQgcXVldWUgdXBkYXRlIHdoZW4gbGVhdmUgZmluaXNoZXNcbiAgICAgICAgdGhpcy5fbGVhdmluZyA9IHRydWU7XG4gICAgICAgIG1lcmdlVk5vZGVIb29rKG9sZERhdGEsICdhZnRlckxlYXZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMkMS5fbGVhdmluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMkMS4kZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZClcbiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcpIHtcbiAgICAgICAgaWYgKGlzQXN5bmNQbGFjZWhvbGRlcihjaGlsZCkpIHtcbiAgICAgICAgICByZXR1cm4gb2xkUmF3Q2hpbGRcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsYXllZExlYXZlO1xuICAgICAgICB2YXIgcGVyZm9ybUxlYXZlID0gZnVuY3Rpb24gKCkgeyBkZWxheWVkTGVhdmUoKTsgfTtcbiAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2FmdGVyRW50ZXInLCBwZXJmb3JtTGVhdmUpO1xuICAgICAgICBtZXJnZVZOb2RlSG9vayhkYXRhLCAnZW50ZXJDYW5jZWxsZWQnLCBwZXJmb3JtTGVhdmUpO1xuICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnZGVsYXlMZWF2ZScsIGZ1bmN0aW9uIChsZWF2ZSkgeyBkZWxheWVkTGVhdmUgPSBsZWF2ZTsgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhd0NoaWxkXG4gIH1cbn1cblxuLyogICovXG5cbi8vIFByb3ZpZGVzIHRyYW5zaXRpb24gc3VwcG9ydCBmb3IgbGlzdCBpdGVtcy5cbi8vIHN1cHBvcnRzIG1vdmUgdHJhbnNpdGlvbnMgdXNpbmcgdGhlIEZMSVAgdGVjaG5pcXVlLlxuXG4vLyBCZWNhdXNlIHRoZSB2ZG9tJ3MgY2hpbGRyZW4gdXBkYXRlIGFsZ29yaXRobSBpcyBcInVuc3RhYmxlXCIgLSBpLmUuXG4vLyBpdCBkb2Vzbid0IGd1YXJhbnRlZSB0aGUgcmVsYXRpdmUgcG9zaXRpb25pbmcgb2YgcmVtb3ZlZCBlbGVtZW50cyxcbi8vIHdlIGZvcmNlIHRyYW5zaXRpb24tZ3JvdXAgdG8gdXBkYXRlIGl0cyBjaGlsZHJlbiBpbnRvIHR3byBwYXNzZXM6XG4vLyBpbiB0aGUgZmlyc3QgcGFzcywgd2UgcmVtb3ZlIGFsbCBub2RlcyB0aGF0IG5lZWQgdG8gYmUgcmVtb3ZlZCxcbi8vIHRyaWdnZXJpbmcgdGhlaXIgbGVhdmluZyB0cmFuc2l0aW9uOyBpbiB0aGUgc2Vjb25kIHBhc3MsIHdlIGluc2VydC9tb3ZlXG4vLyBpbnRvIHRoZSBmaW5hbCBkZXNpcmVkIHN0YXRlLiBUaGlzIHdheSBpbiB0aGUgc2Vjb25kIHBhc3MgcmVtb3ZlZFxuLy8gbm9kZXMgd2lsbCByZW1haW4gd2hlcmUgdGhleSBzaG91bGQgYmUuXG5cbnZhciBwcm9wcyA9IGV4dGVuZCh7XG4gIHRhZzogU3RyaW5nLFxuICBtb3ZlQ2xhc3M6IFN0cmluZ1xufSwgdHJhbnNpdGlvblByb3BzKTtcblxuZGVsZXRlIHByb3BzLm1vZGU7XG5cbnZhciBUcmFuc2l0aW9uR3JvdXAgPSB7XG4gIHByb3BzOiBwcm9wcyxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoaCkge1xuICAgIHZhciB0YWcgPSB0aGlzLnRhZyB8fCB0aGlzLiR2bm9kZS5kYXRhLnRhZyB8fCAnc3Bhbic7XG4gICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMucHJldkNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjtcbiAgICB2YXIgcmF3Q2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0IHx8IFtdO1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICB2YXIgdHJhbnNpdGlvbkRhdGEgPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYyA9IHJhd0NoaWxkcmVuW2ldO1xuICAgICAgaWYgKGMudGFnKSB7XG4gICAgICAgIGlmIChjLmtleSAhPSBudWxsICYmIFN0cmluZyhjLmtleSkuaW5kZXhPZignX192bGlzdCcpICE9PSAwKSB7XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaChjKTtcbiAgICAgICAgICBtYXBbYy5rZXldID0gY1xuICAgICAgICAgIDsoYy5kYXRhIHx8IChjLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRGF0YTtcbiAgICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgdmFyIG9wdHMgPSBjLmNvbXBvbmVudE9wdGlvbnM7XG4gICAgICAgICAgdmFyIG5hbWUgPSBvcHRzID8gKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcgfHwgJycpIDogYy50YWc7XG4gICAgICAgICAgd2FybigoXCI8dHJhbnNpdGlvbi1ncm91cD4gY2hpbGRyZW4gbXVzdCBiZSBrZXllZDogPFwiICsgbmFtZSArIFwiPlwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJldkNoaWxkcmVuKSB7XG4gICAgICB2YXIga2VwdCA9IFtdO1xuICAgICAgdmFyIHJlbW92ZWQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHByZXZDaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7XG4gICAgICAgIHZhciBjJDEgPSBwcmV2Q2hpbGRyZW5baSQxXTtcbiAgICAgICAgYyQxLmRhdGEudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25EYXRhO1xuICAgICAgICBjJDEuZGF0YS5wb3MgPSBjJDEuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAobWFwW2MkMS5rZXldKSB7XG4gICAgICAgICAga2VwdC5wdXNoKGMkMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVtb3ZlZC5wdXNoKGMkMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMua2VwdCA9IGgodGFnLCBudWxsLCBrZXB0KTtcbiAgICAgIHRoaXMucmVtb3ZlZCA9IHJlbW92ZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGgodGFnLCBudWxsLCBjaGlsZHJlbilcbiAgfSxcblxuICBiZWZvcmVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVVwZGF0ZSAoKSB7XG4gICAgLy8gZm9yY2UgcmVtb3ZpbmcgcGFzc1xuICAgIHRoaXMuX19wYXRjaF9fKFxuICAgICAgdGhpcy5fdm5vZGUsXG4gICAgICB0aGlzLmtlcHQsXG4gICAgICBmYWxzZSwgLy8gaHlkcmF0aW5nXG4gICAgICB0cnVlIC8vIHJlbW92ZU9ubHkgKCFpbXBvcnRhbnQsIGF2b2lkcyB1bm5lY2Vzc2FyeSBtb3ZlcylcbiAgICApO1xuICAgIHRoaXMuX3Zub2RlID0gdGhpcy5rZXB0O1xuICB9LFxuXG4gIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQgKCkge1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucHJldkNoaWxkcmVuO1xuICAgIHZhciBtb3ZlQ2xhc3MgPSB0aGlzLm1vdmVDbGFzcyB8fCAoKHRoaXMubmFtZSB8fCAndicpICsgJy1tb3ZlJyk7XG4gICAgaWYgKCFjaGlsZHJlbi5sZW5ndGggfHwgIXRoaXMuaGFzTW92ZShjaGlsZHJlblswXS5lbG0sIG1vdmVDbGFzcykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIHdlIGRpdmlkZSB0aGUgd29yayBpbnRvIHRocmVlIGxvb3BzIHRvIGF2b2lkIG1peGluZyBET00gcmVhZHMgYW5kIHdyaXRlc1xuICAgIC8vIGluIGVhY2ggaXRlcmF0aW9uIC0gd2hpY2ggaGVscHMgcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nLlxuICAgIGNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xuICAgIGNoaWxkcmVuLmZvckVhY2gocmVjb3JkUG9zaXRpb24pO1xuICAgIGNoaWxkcmVuLmZvckVhY2goYXBwbHlUcmFuc2xhdGlvbik7XG5cbiAgICAvLyBmb3JjZSByZWZsb3cgdG8gcHV0IGV2ZXJ5dGhpbmcgaW4gcG9zaXRpb25cbiAgICAvLyBhc3NpZ24gdG8gdGhpcyB0byBhdm9pZCBiZWluZyByZW1vdmVkIGluIHRyZWUtc2hha2luZ1xuICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuICAgIHRoaXMuX3JlZmxvdyA9IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0O1xuXG4gICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgaWYgKGMuZGF0YS5tb3ZlZCkge1xuICAgICAgICB2YXIgZWwgPSBjLmVsbTtcbiAgICAgICAgdmFyIHMgPSBlbC5zdHlsZTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnJztcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGVsLl9tb3ZlQ2IgPSBmdW5jdGlvbiBjYiAoZSkge1xuICAgICAgICAgIGlmICghZSB8fCAvdHJhbnNmb3JtJC8udGVzdChlLnByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCBjYik7XG4gICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICBoYXNNb3ZlOiBmdW5jdGlvbiBoYXNNb3ZlIChlbCwgbW92ZUNsYXNzKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghaGFzVHJhbnNpdGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHRoaXMuX2hhc01vdmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhc01vdmVcbiAgICAgIH1cbiAgICAgIC8vIERldGVjdCB3aGV0aGVyIGFuIGVsZW1lbnQgd2l0aCB0aGUgbW92ZSBjbGFzcyBhcHBsaWVkIGhhc1xuICAgICAgLy8gQ1NTIHRyYW5zaXRpb25zLiBTaW5jZSB0aGUgZWxlbWVudCBtYXkgYmUgaW5zaWRlIGFuIGVudGVyaW5nXG4gICAgICAvLyB0cmFuc2l0aW9uIGF0IHRoaXMgdmVyeSBtb21lbnQsIHdlIG1ha2UgYSBjbG9uZSBvZiBpdCBhbmQgcmVtb3ZlXG4gICAgICAvLyBhbGwgb3RoZXIgdHJhbnNpdGlvbiBjbGFzc2VzIGFwcGxpZWQgdG8gZW5zdXJlIG9ubHkgdGhlIG1vdmUgY2xhc3NcbiAgICAgIC8vIGlzIGFwcGxpZWQuXG4gICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcbiAgICAgIGlmIChlbC5fdHJhbnNpdGlvbkNsYXNzZXMpIHtcbiAgICAgICAgZWwuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNscykgeyByZW1vdmVDbGFzcyhjbG9uZSwgY2xzKTsgfSk7XG4gICAgICB9XG4gICAgICBhZGRDbGFzcyhjbG9uZSwgbW92ZUNsYXNzKTtcbiAgICAgIGNsb25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB0aGlzLiRlbC5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgICB2YXIgaW5mbyA9IGdldFRyYW5zaXRpb25JbmZvKGNsb25lKTtcbiAgICAgIHRoaXMuJGVsLnJlbW92ZUNoaWxkKGNsb25lKTtcbiAgICAgIHJldHVybiAodGhpcy5faGFzTW92ZSA9IGluZm8uaGFzVHJhbnNmb3JtKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxsUGVuZGluZ0NicyAoYykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGMuZWxtLl9tb3ZlQ2IpIHtcbiAgICBjLmVsbS5fbW92ZUNiKCk7XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChjLmVsbS5fZW50ZXJDYikge1xuICAgIGMuZWxtLl9lbnRlckNiKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVjb3JkUG9zaXRpb24gKGMpIHtcbiAgYy5kYXRhLm5ld1BvcyA9IGMuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xufVxuXG5mdW5jdGlvbiBhcHBseVRyYW5zbGF0aW9uIChjKSB7XG4gIHZhciBvbGRQb3MgPSBjLmRhdGEucG9zO1xuICB2YXIgbmV3UG9zID0gYy5kYXRhLm5ld1BvcztcbiAgdmFyIGR4ID0gb2xkUG9zLmxlZnQgLSBuZXdQb3MubGVmdDtcbiAgdmFyIGR5ID0gb2xkUG9zLnRvcCAtIG5ld1Bvcy50b3A7XG4gIGlmIChkeCB8fCBkeSkge1xuICAgIGMuZGF0YS5tb3ZlZCA9IHRydWU7XG4gICAgdmFyIHMgPSBjLmVsbS5zdHlsZTtcbiAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyBkeCArIFwicHgsXCIgKyBkeSArIFwicHgpXCI7XG4gICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnO1xuICB9XG59XG5cbnZhciBwbGF0Zm9ybUNvbXBvbmVudHMgPSB7XG4gIFRyYW5zaXRpb246IFRyYW5zaXRpb24sXG4gIFRyYW5zaXRpb25Hcm91cDogVHJhbnNpdGlvbkdyb3VwXG59XG5cbi8qICAqL1xuXG4vLyBpbnN0YWxsIHBsYXRmb3JtIHNwZWNpZmljIHV0aWxzXG5WdWUuY29uZmlnLm11c3RVc2VQcm9wID0gbXVzdFVzZVByb3A7XG5WdWUuY29uZmlnLmlzUmVzZXJ2ZWRUYWcgPSBpc1Jlc2VydmVkVGFnO1xuVnVlLmNvbmZpZy5pc1Jlc2VydmVkQXR0ciA9IGlzUmVzZXJ2ZWRBdHRyO1xuVnVlLmNvbmZpZy5nZXRUYWdOYW1lc3BhY2UgPSBnZXRUYWdOYW1lc3BhY2U7XG5WdWUuY29uZmlnLmlzVW5rbm93bkVsZW1lbnQgPSBpc1Vua25vd25FbGVtZW50O1xuXG4vLyBpbnN0YWxsIHBsYXRmb3JtIHJ1bnRpbWUgZGlyZWN0aXZlcyAmIGNvbXBvbmVudHNcbmV4dGVuZChWdWUub3B0aW9ucy5kaXJlY3RpdmVzLCBwbGF0Zm9ybURpcmVjdGl2ZXMpO1xuZXh0ZW5kKFZ1ZS5vcHRpb25zLmNvbXBvbmVudHMsIHBsYXRmb3JtQ29tcG9uZW50cyk7XG5cbi8vIGluc3RhbGwgcGxhdGZvcm0gcGF0Y2ggZnVuY3Rpb25cblZ1ZS5wcm90b3R5cGUuX19wYXRjaF9fID0gaW5Ccm93c2VyID8gcGF0Y2ggOiBub29wO1xuXG4vLyBwdWJsaWMgbW91bnQgbWV0aG9kXG5WdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChcbiAgZWwsXG4gIGh5ZHJhdGluZ1xuKSB7XG4gIGVsID0gZWwgJiYgaW5Ccm93c2VyID8gcXVlcnkoZWwpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gbW91bnRDb21wb25lbnQodGhpcywgZWwsIGh5ZHJhdGluZylcbn07XG5cbi8vIGRldnRvb2xzIGdsb2JhbCBob29rXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuaWYgKGluQnJvd3Nlcikge1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG4gICAgICBpZiAoZGV2dG9vbHMpIHtcbiAgICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcgJiZcbiAgICAgICAgaXNDaHJvbWVcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXShcbiAgICAgICAgICAnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBleHRlbnNpb24gZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArXG4gICAgICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICBjb25maWcucHJvZHVjdGlvblRpcCAhPT0gZmFsc2UgJiZcbiAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc29sZVtjb25zb2xlLmluZm8gPyAnaW5mbycgOiAnbG9nJ10oXG4gICAgICAgIFwiWW91IGFyZSBydW5uaW5nIFZ1ZSBpbiBkZXZlbG9wbWVudCBtb2RlLlxcblwiICtcbiAgICAgICAgXCJNYWtlIHN1cmUgdG8gdHVybiBvbiBwcm9kdWN0aW9uIG1vZGUgd2hlbiBkZXBsb3lpbmcgZm9yIHByb2R1Y3Rpb24uXFxuXCIgK1xuICAgICAgICBcIlNlZSBtb3JlIHRpcHMgYXQgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvZGVwbG95bWVudC5odG1sXCJcbiAgICAgICk7XG4gICAgfVxuICB9LCAwKTtcbn1cblxuLyogICovXG5cbm1vZHVsZS5leHBvcnRzID0gVnVlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUvZGlzdC92dWUucnVudGltZS5jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vcHJvY2Vzcy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBzY29wZSA9ICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbCkgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmKSB8fFxuICAgICAgICAgICAgd2luZG93O1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwoc2NvcGUsIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVkaWF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLnNldEltbWVkaWF0ZSk7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuY2xlYXJJbW1lZGlhdGUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbi8qIHN0eWxlcyAqL1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyP21pbmltaXplIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlcj9pZD1kYXRhLXYtNWVjYWE0NGEhc2Fzcy1sb2FkZXIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9pbmRleC52dWVcIilcblxudmFyIENvbXBvbmVudCA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2NvbXBvbmVudC1ub3JtYWxpemVyXCIpKFxuICAvKiBzY3JpcHQgKi9cbiAgcmVxdWlyZShcIiEhYmFiZWwtbG9hZGVyIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTVlY2FhNDRhIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9pbmRleC52dWVcIiksXG4gIC8qIHNjb3BlSWQgKi9cbiAgbnVsbCxcbiAgLyogY3NzTW9kdWxlcyAqL1xuICBudWxsXG4pXG5cbm1vZHVsZS5leHBvcnRzID0gQ29tcG9uZW50LmV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYXBwL2luZGV4LnZ1ZVxuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi01ZWNhYTQ0YSEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlc0NsaWVudC5qc1wiKShcIjQyMTVmMzg2XCIsIGNvbnRlbnQsIHRydWUpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLXN0eWxlLWxvYWRlciEuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtNWVjYWE0NGEhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9hcHAvaW5kZXgudnVlXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcbmV4cG9ydHMuaShyZXF1aXJlKFwiLSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSEuL3Nhc3MvZm9udGVsbG8vY3NzL2ZvbnRlbGxvLmNzc1wiKSwgXCJcIik7XG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiZm9vdGVyOmFmdGVyLGhlYWRlcjphZnRlcntjb250ZW50OlxcXCIgXFxcIjtkaXNwbGF5OnRhYmxlO2NsZWFyOmJvdGh9LmV4cGFuZC15LWVudGVyLWFjdGl2ZSwuZXhwYW5kLXktbGVhdmUtYWN0aXZlLC5tb2RhbC1lbnRlci1hY3RpdmUsLm1vZGFsLWxlYXZlLWFjdGl2ZSwucGxheWVyLW1vcmUtZW50ZXItYWN0aXZlLC5wbGF5ZXItbW9yZS1sZWF2ZS1hY3RpdmV7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjNzIGVhc2V9LmV4cGFuZC15LWVudGVyLC5leHBhbmQteS1sZWF2ZS1hY3RpdmUsLm1vZGFsLWVudGVyLC5tb2RhbC1sZWF2ZS1hY3RpdmUsLnBsYXllci1tb3JlLWVudGVyLC5wbGF5ZXItbW9yZS1sZWF2ZS1hY3RpdmV7dHJhbnNmb3JtOnNjYWxlWSgwKX0ucGxheWVyLW1vcmUtZW50ZXIsLnBsYXllci1tb3JlLWVudGVyLWFjdGl2ZSwucGxheWVyLW1vcmUtbGVhdmUtYWN0aXZle3RyYW5zZm9ybS1vcmlnaW46Y2VudGVyIHRvcH0jYm9keSwuYXBwLGJvZHksaHRtbHt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowfWJvZHl7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7bGluZS1oZWlnaHQ6MThweH0qe2JveC1zaXppbmc6Ym9yZGVyLWJveH0uYXBwe2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1ufWZvb3RlcixoZWFkZXJ7d2lkdGg6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiMyYTcyYmJ9Zm9vdGVyIC5sZWZ0LGhlYWRlciAubGVmdHtmbG9hdDpsZWZ0fWZvb3RlciAucmlnaHQsaGVhZGVyIC5yaWdodHtmbG9hdDpyaWdodH1mb290ZXIgLmNlbnRlcixoZWFkZXIgLmNlbnRlcnttYXJnaW46YXV0bzt0ZXh0LWFsaWduOmNlbnRlcn1mb290ZXIgLm1vYmlsZS1yb3csaGVhZGVyIC5tb2JpbGUtcm93e2Rpc3BsYXk6aW5saW5lLWJsb2NrfUBtZWRpYSAobWF4LXdpZHRoOjU0MHB4KXtmb290ZXIgLm1vYmlsZS1yb3csaGVhZGVyIC5tb2JpbGUtcm93e3BhZGRpbmctYm90dG9tOjEwcHg7ZGlzcGxheTpibG9ja31mb290ZXIgLm1vYmlsZS1yb3c6bGFzdC1jaGlsZCxoZWFkZXIgLm1vYmlsZS1yb3c6bGFzdC1jaGlsZHtwYWRkaW5nLWJvdHRvbTowfX0ubHlyaWMtZWRpdG9yey1tcy1mbGV4OjE7ZmxleDoxO292ZXJmbG93OmF1dG99LmZvcm0tZ3JvdXB7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7cGFkZGluZzo1cHggMDstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyfS5mb3JtLWdyb3VwIGxhYmVse3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtwYWRkaW5nLXJpZ2h0OjEwcHh9LmZvcm0tZ3JvdXAgaW5wdXR7LW1zLWZsZXg6MTtmbGV4OjE7aGVpZ2h0OjMwcHg7Ym9yZGVyOjFweCBzb2xpZCAjZDZkNmQ2O3BhZGRpbmc6MCAzcHg7Ym9yZGVyLXJhZGl1czo1cHh9Lm1lbnUtaXRlbXtkaXNwbGF5OmlubGluZS1ibG9jaztjb2xvcjojZmZmO2hlaWdodDo0MHB4O2xpbmUtaGVpZ2h0OjQwcHg7cGFkZGluZzowIDhweDtjdXJzb3I6cG9pbnRlcn0ubWVudS1pdGVtOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzIxNTk5MX0uYnRue2JvcmRlci1yYWRpdXM6NXB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6NnB4O2ZvbnQtd2VpZ2h0OmJvbGRlcjtjdXJzb3I6cG9pbnRlcjt0ZXh0LWRlY29yYXRpb246bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YmFja2dyb3VuZDojMTE2MWIzO2NvbG9yOiNmZmZ9LmJ0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMxMjRiODZ9LmJ0bi53aGl0ZSxmb290ZXIgLmJ0bixoZWFkZXIgLmJ0bntiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzExNjFiM30uYnRuLndoaXRlOmhvdmVyLGZvb3RlciAuYnRuOmhvdmVyLGhlYWRlciAuYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2U4ZTFlMX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtNWVjYWE0NGEhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9hcHAvaW5kZXgudnVlXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0dmFyIGxpc3QgPSBbXTtcblxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcblx0XHR2YXIgcmVzdWx0ID0gW107XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiQGZvbnQtZmFjZXtmb250LWZhbWlseTpmb250ZWxsbztzcmM6dXJsKFwiICsgcmVxdWlyZShcIi4uL2ZvbnQvZm9udGVsbG8uZW90PzQwMzU4MjY3XCIpICsgXCIpO3NyYzp1cmwoXCIgKyByZXF1aXJlKFwiLi4vZm9udC9mb250ZWxsby5lb3Q/NDAzNTgyNjdcIikgKyBcIiNpZWZpeCkgZm9ybWF0KFxcXCJlbWJlZGRlZC1vcGVudHlwZVxcXCIpLHVybChcIiArIHJlcXVpcmUoXCIuLi9mb250L2ZvbnRlbGxvLndvZmYyPzQwMzU4MjY3XCIpICsgXCIpIGZvcm1hdChcXFwid29mZjJcXFwiKSx1cmwoXCIgKyByZXF1aXJlKFwiLi4vZm9udC9mb250ZWxsby53b2ZmPzQwMzU4MjY3XCIpICsgXCIpIGZvcm1hdChcXFwid29mZlxcXCIpLHVybChcIiArIHJlcXVpcmUoXCIuLi9mb250L2ZvbnRlbGxvLnR0Zj80MDM1ODI2N1wiKSArIFwiKSBmb3JtYXQoXFxcInRydWV0eXBlXFxcIiksdXJsKFwiICsgcmVxdWlyZShcIi4uL2ZvbnQvZm9udGVsbG8uc3ZnPzQwMzU4MjY3XCIpICsgXCIjZm9udGVsbG8pIGZvcm1hdChcXFwic3ZnXFxcIik7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc3R5bGU6bm9ybWFsfVtjbGFzcyo9XFxcIiBpY29uLVxcXCJdOmJlZm9yZSxbY2xhc3NePWljb24tXTpiZWZvcmV7Zm9udC1mYW1pbHk6Zm9udGVsbG87Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NDAwO3NwZWFrOm5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7d2lkdGg6MWVtO21hcmdpbi1yaWdodDouMmVtO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtdmFyaWFudDpub3JtYWw7dGV4dC10cmFuc2Zvcm06bm9uZTtsaW5lLWhlaWdodDoxZW07bWFyZ2luLWxlZnQ6LjJlbTstd2Via2l0LWZvbnQtc21vb3RoaW5nOmFudGlhbGlhc2VkOy1tb3otb3N4LWZvbnQtc21vb3RoaW5nOmdyYXlzY2FsZX0uaWNvbi1lZGl0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwMFxcXCJ9Lmljb24tc2F2ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MDFcXFwifS5pY29uLXRyYXNoOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwMlxcXCJ9Lmljb24tZG93bmxvYWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODAzXFxcIn0uaWNvbi11cGxvYWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODA0XFxcIn0uaWNvbi1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MDVcXFwifS5pY29uLWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODA2XFxcIn0uaWNvbi11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MDdcXFwifS5pY29uLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODA4XFxcIn0uaWNvbi12b2x1bWUtb2ZmOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwOVxcXCJ9Lmljb24tdm9sdW1lLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgwQVxcXCJ9Lmljb24tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MERcXFwifS5pY29uLWNhbmNlbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MEVcXFwifS5pY29uLWVsbGlwc2lzLXZlcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFODBGXFxcIn0uaWNvbi1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgxMFxcXCJ9Lmljb24taGVscC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgxMVxcXCJ9Lmljb24tcGxheTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MTJcXFwifS5pY29uLXBhdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgxM1xcXCJ9Lmljb24tZm9yd2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MTRcXFwifS5pY29uLWJhY2t3YXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTgxNVxcXCJ9Lmljb24tc3RvcDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEU4MTZcXFwifVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuL2FwcC9zYXNzL2ZvbnRlbGxvL2Nzcy9mb250ZWxsby5jc3Ncbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMmJiNGFlMDgwODRiN2E5MDBiZmUxYzcwM2M5ODhmMzQuZW90XCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvc2Fzcy9mb250ZWxsby9mb250L2ZvbnRlbGxvLmVvdD80MDM1ODI2N1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZjMxM2EwZjk4NzY3MmRjNzdhOGMyNDMzODBlMjA4OWUud29mZjJcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9zYXNzL2ZvbnRlbGxvL2ZvbnQvZm9udGVsbG8ud29mZjI/NDAzNTgyNjdcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjRjYzkzMDE2M2Y2ZDUwODhkZmE1ZmVmNjE5ZDg3Y2I5LndvZmZcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9zYXNzL2ZvbnRlbGxvL2ZvbnQvZm9udGVsbG8ud29mZj80MDM1ODI2N1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYjQ4MzU0NDMwM2ZjZmM3ZTFlMzQxNTlhNDExZmNkY2IudHRmXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvc2Fzcy9mb250ZWxsby9mb250L2ZvbnRlbGxvLnR0Zj80MDM1ODI2N1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZjQwMzdmOGQxNmY0MzM3OWIxODAyMDcwNmJkYzk1Njcuc3ZnXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvc2Fzcy9mb250ZWxsby9mb250L2ZvbnRlbGxvLnN2Zz80MDM1ODI2N1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuICBNb2RpZmllZCBieSBFdmFuIFlvdSBAeXl4OTkwODAzXG4qL1xuXG52YXIgaGFzRG9jdW1lbnQgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnXG5cbmlmICh0eXBlb2YgREVCVUcgIT09ICd1bmRlZmluZWQnICYmIERFQlVHKSB7XG4gIGlmICghaGFzRG9jdW1lbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3Z1ZS1zdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudC4gJyArXG4gICAgXCJVc2UgeyB0YXJnZXQ6ICdub2RlJyB9IGluIHlvdXIgV2VicGFjayBjb25maWcgdG8gaW5kaWNhdGUgYSBzZXJ2ZXItcmVuZGVyaW5nIGVudmlyb25tZW50LlwiXG4gICkgfVxufVxuXG52YXIgbGlzdFRvU3R5bGVzID0gcmVxdWlyZSgnLi9saXN0VG9TdHlsZXMnKVxuXG4vKlxudHlwZSBTdHlsZU9iamVjdCA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgcGFydHM6IEFycmF5PFN0eWxlT2JqZWN0UGFydD5cbn1cblxudHlwZSBTdHlsZU9iamVjdFBhcnQgPSB7XG4gIGNzczogc3RyaW5nO1xuICBtZWRpYTogc3RyaW5nO1xuICBzb3VyY2VNYXA6ID9zdHJpbmdcbn1cbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHsvKlxuICBbaWQ6IG51bWJlcl06IHtcbiAgICBpZDogbnVtYmVyLFxuICAgIHJlZnM6IG51bWJlcixcbiAgICBwYXJ0czogQXJyYXk8KG9iaj86IFN0eWxlT2JqZWN0UGFydCkgPT4gdm9pZD5cbiAgfVxuKi99XG5cbnZhciBoZWFkID0gaGFzRG9jdW1lbnQgJiYgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSlcbnZhciBzaW5nbGV0b25FbGVtZW50ID0gbnVsbFxudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwXG52YXIgaXNQcm9kdWN0aW9uID0gZmFsc2VcbnZhciBub29wID0gZnVuY3Rpb24gKCkge31cblxuLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4vLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG52YXIgaXNPbGRJRSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9tc2llIFs2LTldXFxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSlcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGFyZW50SWQsIGxpc3QsIF9pc1Byb2R1Y3Rpb24pIHtcbiAgaXNQcm9kdWN0aW9uID0gX2lzUHJvZHVjdGlvblxuXG4gIHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMocGFyZW50SWQsIGxpc3QpXG4gIGFkZFN0eWxlc1RvRG9tKHN0eWxlcylcblxuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG4gICAgdmFyIG1heVJlbW92ZSA9IFtdXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldXG4gICAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXVxuICAgICAgZG9tU3R5bGUucmVmcy0tXG4gICAgICBtYXlSZW1vdmUucHVzaChkb21TdHlsZSlcbiAgICB9XG4gICAgaWYgKG5ld0xpc3QpIHtcbiAgICAgIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhwYXJlbnRJZCwgbmV3TGlzdClcbiAgICAgIGFkZFN0eWxlc1RvRG9tKHN0eWxlcylcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzID0gW11cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXVxuICAgICAgaWYgKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKClcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMgLyogQXJyYXk8U3R5bGVPYmplY3Q+ICovKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV1cbiAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXVxuICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgZG9tU3R5bGUucmVmcysrXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pXG4gICAgICB9XG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdKSlcbiAgICAgIH1cbiAgICAgIGlmIChkb21TdHlsZS5wYXJ0cy5sZW5ndGggPiBpdGVtLnBhcnRzLmxlbmd0aCkge1xuICAgICAgICBkb21TdHlsZS5wYXJ0cy5sZW5ndGggPSBpdGVtLnBhcnRzLmxlbmd0aFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFydHMgPSBbXVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSkpXG4gICAgICB9XG4gICAgICBzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHsgaWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0cyB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAoKSB7XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpXG4gIHN0eWxlRWxlbWVudC50eXBlID0gJ3RleHQvY3NzJ1xuICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudClcbiAgcmV0dXJuIHN0eWxlRWxlbWVudFxufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqIC8qIFN0eWxlT2JqZWN0UGFydCAqLykge1xuICB2YXIgdXBkYXRlLCByZW1vdmVcbiAgdmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlW2RhdGEtdnVlLXNzci1pZH49XCInICsgb2JqLmlkICsgJ1wiXScpXG5cbiAgaWYgKHN0eWxlRWxlbWVudCkge1xuICAgIGlmIChpc1Byb2R1Y3Rpb24pIHtcbiAgICAgIC8vIGhhcyBTU1Igc3R5bGVzIGFuZCBpbiBwcm9kdWN0aW9uIG1vZGUuXG4gICAgICAvLyBzaW1wbHkgZG8gbm90aGluZy5cbiAgICAgIHJldHVybiBub29wXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGhhcyBTU1Igc3R5bGVzIGJ1dCBpbiBkZXYgbW9kZS5cbiAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBDaHJvbWUgY2FuJ3QgaGFuZGxlIHNvdXJjZSBtYXAgaW4gc2VydmVyLXJlbmRlcmVkXG4gICAgICAvLyBzdHlsZSB0YWdzIC0gc291cmNlIG1hcHMgaW4gPHN0eWxlPiBvbmx5IHdvcmtzIGlmIHRoZSBzdHlsZSB0YWcgaXNcbiAgICAgIC8vIGNyZWF0ZWQgYW5kIGluc2VydGVkIGR5bmFtaWNhbGx5LiBTbyB3ZSByZW1vdmUgdGhlIHNlcnZlciByZW5kZXJlZFxuICAgICAgLy8gc3R5bGVzIGFuZCBpbmplY3QgbmV3IG9uZXMuXG4gICAgICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpXG4gICAgfVxuICB9XG5cbiAgaWYgKGlzT2xkSUUpIHtcbiAgICAvLyB1c2Ugc2luZ2xldG9uIG1vZGUgZm9yIElFOS5cbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrK1xuICAgIHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQoKSlcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSlcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKVxuICB9IGVsc2Uge1xuICAgIC8vIHVzZSBtdWx0aS1zdHlsZS10YWcgbW9kZSBpbiBhbGwgb3RoZXIgY2FzZXNcbiAgICBzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQoKVxuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgc3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZShvYmopXG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmogLyogU3R5bGVPYmplY3RQYXJ0ICovKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcbiAgICAgICAgICBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuICAgICAgICAgIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKVxuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKVxuICAgIH1cbiAgfVxufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgdGV4dFN0b3JlID0gW11cblxuICByZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudFxuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpXG4gIH1cbn0pKClcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLmNzc1xuXG4gIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKVxuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKVxuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXNcbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSlcbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZUVsZW1lbnQsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzc1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWFcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXBcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKVxuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCkge1xuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9qYXZhc2NyaXB0LWRlYnVnZ2luZ1xuICAgIC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcbiAgICBjc3MgKz0gJ1xcbi8qIyBzb3VyY2VVUkw9JyArIHNvdXJjZU1hcC5zb3VyY2VzWzBdICsgJyAqLydcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuICAgIGNzcyArPSAnXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCwnICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArICcgKi8nXG4gIH1cblxuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzXG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpXG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKVxuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlc0NsaWVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBsaXN0IGZvcm1hdCBwcm9kdWNlZCBieSBjc3MtbG9hZGVyIGludG8gc29tZXRoaW5nXG4gKiBlYXNpZXIgdG8gbWFuaXB1bGF0ZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsaXN0VG9TdHlsZXMgKHBhcmVudElkLCBsaXN0KSB7XG4gIHZhciBzdHlsZXMgPSBbXVxuICB2YXIgbmV3U3R5bGVzID0ge31cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldXG4gICAgdmFyIGlkID0gaXRlbVswXVxuICAgIHZhciBjc3MgPSBpdGVtWzFdXG4gICAgdmFyIG1lZGlhID0gaXRlbVsyXVxuICAgIHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdXG4gICAgdmFyIHBhcnQgPSB7XG4gICAgICBpZDogcGFyZW50SWQgKyAnOicgKyBpLFxuICAgICAgY3NzOiBjc3MsXG4gICAgICBtZWRpYTogbWVkaWEsXG4gICAgICBzb3VyY2VNYXA6IHNvdXJjZU1hcFxuICAgIH1cbiAgICBpZiAoIW5ld1N0eWxlc1tpZF0pIHtcbiAgICAgIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7IGlkOiBpZCwgcGFydHM6IFtwYXJ0XSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydClcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0eWxlc1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtc3R5bGUtbG9hZGVyL2xpYi9saXN0VG9TdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50IChcbiAgcmF3U2NyaXB0RXhwb3J0cyxcbiAgY29tcGlsZWRUZW1wbGF0ZSxcbiAgc2NvcGVJZCxcbiAgY3NzTW9kdWxlc1xuKSB7XG4gIHZhciBlc01vZHVsZVxuICB2YXIgc2NyaXB0RXhwb3J0cyA9IHJhd1NjcmlwdEV4cG9ydHMgPSByYXdTY3JpcHRFeHBvcnRzIHx8IHt9XG5cbiAgLy8gRVM2IG1vZHVsZXMgaW50ZXJvcFxuICB2YXIgdHlwZSA9IHR5cGVvZiByYXdTY3JpcHRFeHBvcnRzLmRlZmF1bHRcbiAgaWYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBlc01vZHVsZSA9IHJhd1NjcmlwdEV4cG9ydHNcbiAgICBzY3JpcHRFeHBvcnRzID0gcmF3U2NyaXB0RXhwb3J0cy5kZWZhdWx0XG4gIH1cblxuICAvLyBWdWUuZXh0ZW5kIGNvbnN0cnVjdG9yIGV4cG9ydCBpbnRlcm9wXG4gIHZhciBvcHRpb25zID0gdHlwZW9mIHNjcmlwdEV4cG9ydHMgPT09ICdmdW5jdGlvbidcbiAgICA/IHNjcmlwdEV4cG9ydHMub3B0aW9uc1xuICAgIDogc2NyaXB0RXhwb3J0c1xuXG4gIC8vIHJlbmRlciBmdW5jdGlvbnNcbiAgaWYgKGNvbXBpbGVkVGVtcGxhdGUpIHtcbiAgICBvcHRpb25zLnJlbmRlciA9IGNvbXBpbGVkVGVtcGxhdGUucmVuZGVyXG4gICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBjb21waWxlZFRlbXBsYXRlLnN0YXRpY1JlbmRlckZuc1xuICB9XG5cbiAgLy8gc2NvcGVkSWRcbiAgaWYgKHNjb3BlSWQpIHtcbiAgICBvcHRpb25zLl9zY29wZUlkID0gc2NvcGVJZFxuICB9XG5cbiAgLy8gaW5qZWN0IGNzc01vZHVsZXNcbiAgaWYgKGNzc01vZHVsZXMpIHtcbiAgICB2YXIgY29tcHV0ZWQgPSBvcHRpb25zLmNvbXB1dGVkIHx8IChvcHRpb25zLmNvbXB1dGVkID0ge30pXG4gICAgT2JqZWN0LmtleXMoY3NzTW9kdWxlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgbW9kdWxlID0gY3NzTW9kdWxlc1trZXldXG4gICAgICBjb21wdXRlZFtrZXldID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9kdWxlIH1cbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBlc01vZHVsZTogZXNNb2R1bGUsXG4gICAgZXhwb3J0czogc2NyaXB0RXhwb3J0cyxcbiAgICBvcHRpb25zOiBvcHRpb25zXG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiBjbGFzcz1cImFwcFwiPlxuICAgIDxoZWFkZXI+XG4gICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuICAgICAgICA8bmF2LW1lbnUgY2xhc3M9XCJtZW51LWl0ZW1cIiA6dGl0bGU9XCIkdCgnYnV0dG9uLnVwbG9hZCcpXCI+XG4gICAgICAgICAgPGRpdiBzbG90PVwidGFyZ2V0XCI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImljb24tdXBsb2FkXCI+PC9pPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDx1bCBzbG90PVwibGlzdFwiPlxuICAgICAgICAgICAgPGxpIEBjbGljaz1cIiRyZWZzLm1vZGFscy5zaG93KCdscmMtZm9ybWF0LXVwbG9hZCcpXCI+XG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbi11cGxvYWRcIj48L2k+IHt7ICR0KCdtZW51LnVwbG9hZC5scmMnKSB9fVxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaSBAY2xpY2s9XCIkcmVmcy5tb2RhbHMuc2hvdygnbHlyaWMtdXBsb2FkJylcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLXVwbG9hZFwiPjwvaT4ge3sgJHQoJ21lbnUudXBsb2FkLmx5cmljJykgfX1cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgIDx1cGxvYWQgYWNjZXB0PVwiYXVkaW8vKlwiIHJlYWQtZm9ybWF0PVwidXJsXCIgQHVwbG9hZD1cInVwbG9hZE11c2ljXCI+e3sgJHQoJ21lbnUudXBsb2FkLm11c2ljJyl9fTwvdXBsb2FkPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L25hdi1tZW51PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVudS1pdGVtXCIgQGNsaWNrPVwiJHJlZnMubW9kYWxzLnNob3coJ2xyYy1zYXZlJylcIiA6dGl0bGU9XCIkdCgnYnV0dG9uLnNhdmUnKVwiPlxuICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbi1zYXZlXCI+PC9pPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW51LWl0ZW1cIiBAY2xpY2s9XCJlZGl0aW5nPSFlZGl0aW5nXCIgOnRpdGxlPVwiZWRpdGluZyA/ICR0KCdidXR0b24uY2xvc2VfZWRpdCcpIDogJHQoJ2J1dHRvbi5vcGVuX2VkaXQnKVwiPlxuICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiZWRpdGluZ1wiPlxuICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWNhbmNlbFwiPjwvaT5cbiAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICAgIDx0ZW1wbGF0ZSB2LWVsc2U+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImljb24tZWRpdFwiPjwvaT5cbiAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1lbnUtaXRlbVwiIEBjbGljaz1cIiRyZWZzLm1vZGFscy5zaG93KCdoZWxwJylcIiA6dGl0bGU9XCIkdCgnYnV0dG9uLmhlbHAnKVwiPlxuICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbi1oZWxwLWNpcmNsZWRcIj48L2k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9oZWFkZXI+XG5cbiAgICA8cGxheWVyXG4gICAgICA6c3JjPVwibXVzaWNVcmxcIlxuICAgICAgQHRpbWV1cGRhdGU9XCJ0aW1ldXBkYXRlXCJcbiAgICAgIHJlZj1cInBsYXllclwiPlxuICAgIDwvcGxheWVyPlxuXG4gICAgPGx5cmljLWVkaXRvclxuICAgICAgY2xhc3M9XCJseXJpYy1lZGl0b3JcIlxuICAgICAgOmVkaXRpbmc9XCJlZGl0aW5nXCJcbiAgICAgIDpydW5uZXI9XCJydW5uZXJcIlxuICAgICAgOmx5cmljLWFycmF5PVwibHlyaWNBcnJheVwiXG4gICAgICA6cGxheXRvPVwicGxheXRvXCJcbiAgICAgIHJlZj1cImx5cmljXCI+XG4gICAgICBseXJpYyBlZGl0b3JcbiAgICA8L2x5cmljLWVkaXRvcj5cblxuICAgIDxmb290ZXI+XG4gICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVudS1pdGVtXCIgQGNsaWNrPVwicmVtb3ZlTHlyaWNcIj5cbiAgICAgICAgICA8aSBjbGFzcz1cImljb24tdHJhc2hcIj48L2k+IHt7ICR0KCdidXR0b24ucmVtb3ZlX2x5cmljJykgfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiIHYtaWY9XCJlZGl0aW5nXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW51LWl0ZW1cIiB0aXRsZT1cIltVUF1cIiBAY2xpY2s9XCIkcmVmcy5seXJpYy4kZW1pdCgncHJldmx5cmljJylcIj57eyAkdCgnYnV0dG9uLnByZXZfbHlyaWMnKSB9fTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVudS1pdGVtXCIgdGl0bGU9XCJbRE9XTl1cIiBAY2xpY2s9XCIkcmVmcy5seXJpYy4kZW1pdCgnbmV4dGx5cmljJylcIj57eyAkdCgnYnV0dG9uLm5leHRfbHlyaWMnKSB9fTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9mb290ZXI+XG5cbiAgICA8bW9kYWxzIHJlZj1cIm1vZGFsc1wiPjwvbW9kYWxzPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuQGltcG9ydCAnc2Fzcy9pbmRleCc7XG5cbmh0bWwsIGJvZHksICNib2R5LCAuYXBwIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgbWFyZ2luOiAwO1xufVxuXG5ib2R5IHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcbiAgbGluZS1oZWlnaHQ6IDE4cHg7XG59XG5cbioge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4uYXBwIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuaGVhZGVyLCBmb290ZXIge1xuICBAZXh0ZW5kICVyb3c7XG4gIHdpZHRoOiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkYmx1ZS1jb2xvcjtcbiAgLmxlZnQge1xuICAgIGZsb2F0OiBsZWZ0O1xuICB9XG4gIC5yaWdodCB7XG4gICAgZmxvYXQ6IHJpZ2h0O1xuICB9XG4gIC5jZW50ZXIge1xuICAgIG1hcmdpbjogYXV0bztcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cbiAgLm1vYmlsZS1yb3cge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBAaW5jbHVkZSBtb2JpbGUge1xuICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICY6bGFzdC1jaGlsZCB7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4ubHlyaWMtZWRpdG9yIHtcbiAgZmxleDogMTtcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbi5mb3JtLWdyb3VwIHtcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogNXB4IDA7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGxhYmVsIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIHBhZGRpbmctcmlnaHQ6IDEwcHg7XG4gIH1cbiAgaW5wdXQge1xuICAgIGZsZXg6IDE7XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNENkQ2RDY7XG4gICAgcGFkZGluZzogMCAzcHg7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICB9XG59XG5cbi5tZW51LWl0ZW0ge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgJGhlaWdodDogNDBweDtcbiAgaGVpZ2h0OiAkaGVpZ2h0O1xuICBsaW5lLWhlaWdodDogJGhlaWdodDtcbiAgcGFkZGluZzogMCA4cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogZGFya2VuKCRibHVlLWNvbG9yLCAxMCUpO1xuICB9XG59XG5cbi5idG4ge1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcGFkZGluZzogNnB4O1xuICBmb250LXdlaWdodDogYm9sZGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG5cbiAgYmFja2dyb3VuZDogIzExNjFCMztcbiAgY29sb3I6IHdoaXRlO1xuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTI0Qjg2O1xuICB9XG5cbiAgaGVhZGVyICYsXG4gIGZvb3RlciAmLFxuICAmLndoaXRlLFxuICB7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgY29sb3I6ICMxMTYxQjM7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRThFMUUxO1xuICAgIH1cbiAgfVxufVxuPC9zdHlsZT5cblxuPHNjcmlwdD5cbiAgaW1wb3J0IFVwbG9hZCBmcm9tICcuL3VwbG9hZCdcbiAgaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcidcbiAgaW1wb3J0IEx5cmljRWRpdG9yIGZyb20gJy4vbHlyaWMtZWRpdG9yJ1xuICBpbXBvcnQgTW9kYWxzIGZyb20gJy4vbW9kYWxzJ1xuICAvLyBpbXBvcnQgTWVudSBmcm9tICcuL21lbnUnXG4gIGltcG9ydCBOYXZNZW51IGZyb20gJy4vbmF2LW1lbnUnXG4gIGltcG9ydCB7THJjLCBSdW5uZXJ9IGZyb20gJ2xyYy1raXQnXG4gIGltcG9ydCBjYWNoZSBmcm9tICcuLi9jYWNoZSdcblxuICBleHBvcnQgZGVmYXVsdCB7XG4gICAgZGF0YSAoKSB7XG4gICAgICB2YXIgbHJjRm9ybWF0ID0gY2FjaGUubHJjRm9ybWF0XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG11c2ljVXJsOiAnJyxcbiAgICAgICAgZWRpdGluZzogY2FjaGUuZWRpdGluZyxcblxuICAgICAgICBscmNGb3JtYXQ6IGxyY0Zvcm1hdCxcbiAgICAgICAgcnVubmVyOiBuZXcgUnVubmVyKExyYy5wYXJzZShscmNGb3JtYXQpKSxcbiAgICAgICAgbHlyaWNBcnJheTogY2FjaGUubHlyaWNBcnJheVxuICAgICAgfVxuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgdXBsb2FkTXVzaWMgKG11c2ljKSB7XG4gICAgICAgIC8vIGNhY2hlLm11c2ljID0gbXVzaWNcbiAgICAgICAgdGhpcy4kcmVmcy5wbGF5ZXIuc3JjID0gbXVzaWNcbiAgICAgIH0sXG4gICAgICByZW1vdmVMeXJpYyAoKSB7XG4gICAgICAgIHRoaXMubHJjRm9ybWF0ID0gJydcbiAgICAgICAgdGhpcy5seXJpY0FycmF5ID0gW11cbiAgICAgICAgdGhpcy5ydW5uZXIgPSBuZXcgUnVubmVyKClcbiAgICAgIH0sXG4gICAgICBwbGF5dG8gKHRpbWUpIHtcbiAgICAgICAgdGhpcy4kcmVmcy5wbGF5ZXIucGxheXRvKHRpbWUpXG4gICAgICB9LFxuICAgICAgdGltZXVwZGF0ZSAodGltZXN0YW1wKSB7XG4gICAgICAgIHRoaXMuJHJlZnMubHlyaWMuJGVtaXQoJ3RpbWV1cGRhdGUnLCB0aW1lc3RhbXApXG4gICAgICB9LFxuICAgIH0sXG4gICAgd2F0Y2g6IHtcbiAgICAgIGVkaXRpbmcgKHZhbCkge1xuICAgICAgICBjYWNoZS5lZGl0aW5nID0gdmFsXG4gICAgICB9LFxuICAgICAgbHJjRm9ybWF0ICh2YWwpIHtcbiAgICAgICAgY2FjaGUubHJjRm9ybWF0ID0gdmFsXG4gICAgICAgIHRoaXMucnVubmVyID0gbmV3IFJ1bm5lcihMcmMucGFyc2UodGhpcy5scmNGb3JtYXQpKVxuICAgICAgfSxcbiAgICAgIGx5cmljQXJyYXk6IHtcbiAgICAgICAgZGVlcDogdHJ1ZSxcbiAgICAgICAgaGFuZGxlciAoKSB7XG4gICAgICAgICAgY2FjaGUubHlyaWNBcnJheSA9IHRoaXMubHlyaWNBcnJheVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgIFVwbG9hZCxcbiAgICAgIFBsYXllcixcbiAgICAgIEx5cmljRWRpdG9yLFxuICAgICAgTW9kYWxzLFxuICAgICAgLy8gTWVudSxcbiAgICAgIE5hdk1lbnUsXG4gICAgfSxcbiAgfVxuPC9zY3JpcHQ+XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gaW5kZXgudnVlPzI2ZWYzNjg1IiwiXG4vKiBzdHlsZXMgKi9cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXI/aWQ9ZGF0YS12LTBhNTViYWM4JnNjb3BlZD10cnVlIXNhc3MtbG9hZGVyIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXN0eWxlcyZpbmRleD0wIS4vdXBsb2FkLnZ1ZVwiKVxuXG52YXIgQ29tcG9uZW50ID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXJcIikoXG4gIC8qIHNjcmlwdCAqL1xuICByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi91cGxvYWQudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTBhNTViYWM4IS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi91cGxvYWQudnVlXCIpLFxuICAvKiBzY29wZUlkICovXG4gIFwiZGF0YS12LTBhNTViYWM4XCIsXG4gIC8qIGNzc01vZHVsZXMgKi9cbiAgbnVsbFxuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC91cGxvYWQudnVlXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi0wYTU1YmFjOCZzY29wZWQ9dHJ1ZSEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi91cGxvYWQudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCI3MjA5MGI2N1wiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTBhNTViYWM4JnNjb3BlZD10cnVlIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL3VwbG9hZC52dWVcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImlucHV0W3R5cGU9ZmlsZV1bZGF0YS12LTBhNTViYWM4XXtkaXNwbGF5Om5vbmV9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTBhNTViYWM4JnNjb3BlZD10cnVlIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL3VwbG9hZC52dWVcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiBAY2xpY2s9XCJ1cGxvYWRcIj5cbiAgICA8aSBjbGFzcz1cImljb24tdXBsb2FkXCI+PC9pPlxuICAgIDxzbG90Pjwvc2xvdD5cbiAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiA6YWNjZXB0PVwiYWNjZXB0XCIgcmVmPVwidXBsb2FkXCIgLz5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c3R5bGUgbGFuZz1cInNhc3NcIiBzY29wZWQ+XG5pbnB1dFt0eXBlPVwiZmlsZVwiXSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG48L3N0eWxlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHVwbG9hZCA9IHRoaXMuJHJlZnMudXBsb2FkXG4gICAgdXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICh1cGxvYWQuZmlsZXMubGVuZ3RoID4gMCAmJiB0aGlzLnR5cGVfbWF0Y2goKSkge1xuICAgICAgICBpZiAodGhpcy5yZWFkRm9ybWF0ID09PSAndXJsJykge1xuICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZCcsIFVSTC5jcmVhdGVPYmplY3RVUkwodXBsb2FkLmZpbGVzWzBdKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZCcsIGV2ZW50LnRhcmdldC5yZXN1bHQpXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlYWRlclsncmVhZEFzJyArIHRoaXMucmVhZEZvcm1hdF0odXBsb2FkLmZpbGVzWzBdKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSxcbiAgcHJvcHM6IHtcbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICByZWFkRm9ybWF0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnVGV4dCcsXG4gICAgfSxcbiAgICBhY2NlcHQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgIH0sXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICB1cGxvYWQgKCkge1xuICAgICAgdGhpcy4kcmVmcy51cGxvYWQuY2xpY2soKVxuICAgIH0sXG4gICAgdHlwZV9tYXRjaCAoKSB7XG4gICAgICBpZiAodGhpcy50eXBlKSB7XG4gICAgICAgIHZhciBtYXRjaCA9IG5ldyBSZWdFeHAoYF4ke3RoaXMudHlwZX0vYClcbiAgICAgICAgcmV0dXJuIG1hdGNoLnRlc3QodGhpcy4kcmVmcy51cGxvYWQuZmlsZXNbMF0udHlwZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9LFxufVxuPC9zY3JpcHQ+XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gdXBsb2FkLnZ1ZT80NjZmZmRhMiIsIm1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG4gIHJldHVybiBfYygnZGl2Jywge1xuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IF92bS51cGxvYWRcbiAgICB9XG4gIH0sIFtfYygnaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJpY29uLXVwbG9hZFwiXG4gIH0pLCBfdm0uX3YoXCIgXCIpLCBfdm0uX3QoXCJkZWZhdWx0XCIpLCBfdm0uX3YoXCIgXCIpLCBfYygnaW5wdXQnLCB7XG4gICAgcmVmOiBcInVwbG9hZFwiLFxuICAgIGF0dHJzOiB7XG4gICAgICBcInR5cGVcIjogXCJmaWxlXCIsXG4gICAgICBcImFjY2VwdFwiOiBfdm0uYWNjZXB0XG4gICAgfVxuICB9KV0sIDIpXG59LHN0YXRpY1JlbmRlckZuczogW119XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlci5qcz9pZD1kYXRhLXYtMGE1NWJhYzghLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9hcHAvdXBsb2FkLnZ1ZVxuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG4vKiBzdHlsZXMgKi9cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXI/aWQ9ZGF0YS12LWQ0ODI1MGIwJnNjb3BlZD10cnVlIXNhc3MtbG9hZGVyIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXN0eWxlcyZpbmRleD0wIS4vcGxheWVyLnZ1ZVwiKVxuXG52YXIgQ29tcG9uZW50ID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXJcIikoXG4gIC8qIHNjcmlwdCAqL1xuICByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9wbGF5ZXIudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LWQ0ODI1MGIwIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9wbGF5ZXIudnVlXCIpLFxuICAvKiBzY29wZUlkICovXG4gIFwiZGF0YS12LWQ0ODI1MGIwXCIsXG4gIC8qIGNzc01vZHVsZXMgKi9cbiAgbnVsbFxuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9wbGF5ZXIudnVlXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi1kNDgyNTBiMCZzY29wZWQ9dHJ1ZSEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9wbGF5ZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCIxNmQ0MGNmNVwiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LWQ0ODI1MGIwJnNjb3BlZD10cnVlIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL3BsYXllci52dWVcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5yb290W2RhdGEtdi1kNDgyNTBiMF17aGVpZ2h0OjMwcHh9LnJvb3QubW9iaWxlW2RhdGEtdi1kNDgyNTBiMF17aGVpZ2h0OjYwcHh9Lm1vcmVbZGF0YS12LWQ0ODI1MGIwXSwucGxheWVyW2RhdGEtdi1kNDgyNTBiMF0sLnNvdW5kW2RhdGEtdi1kNDgyNTBiMF17ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59Lm1vcmVbZGF0YS12LWQ0ODI1MGIwXSwucGxheWVyW2RhdGEtdi1kNDgyNTBiMF17YmFja2dyb3VuZDojZDBkYWU0O2NvbG9yOiMyYTcyYmI7aGVpZ2h0OjMwcHh9LmN0cmwtYnRuW2RhdGEtdi1kNDgyNTBiMF17Zm9udC1zaXplOjIwcHg7cGFkZGluZzowIDFweH0ucmFuZ2VbZGF0YS12LWQ0ODI1MGIwXXttYXJnaW4tbGVmdDo0cHg7bWFyZ2luLXJpZ2h0OjRweH0ucmFuZ2UubXVzaWNbZGF0YS12LWQ0ODI1MGIwXXstbXMtZmxleDoxO2ZsZXg6MX10aW1lLXBhbmVsW2RhdGEtdi1kNDgyNTBiMF17cGFkZGluZzowIDVweH0ubW9yZVtkYXRhLXYtZDQ4MjUwYjBde2hlaWdodDozMHB4Oy1tcy1mbGV4LXBhY2s6ZW5kO2p1c3RpZnktY29udGVudDpmbGV4LWVuZDtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjEwfS5tb2JpbGUgLm1vcmVbZGF0YS12LWQ0ODI1MGIwXXstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59LnNvdW5kW2RhdGEtdi1kNDgyNTBiMF17cGFkZGluZzowIDVweDt3aWR0aDozMCV9LnNvdW5kIC5yYW5nZS52b2x1bWVbZGF0YS12LWQ0ODI1MGIwXXstbXMtZmxleDoxO2ZsZXg6MX0uc291bmQgLmN0cmwtbXV0ZS1idG5bZGF0YS12LWQ0ODI1MGIwXXt3aWR0aDoyNnB4O2ZvbnQtc2l6ZToxOHB4fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi1kNDgyNTBiMCZzY29wZWQ9dHJ1ZSEuLi9+L3Nhc3MtbG9hZGVyIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2FwcC9wbGF5ZXIudnVlXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCI8dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJyb290XCIgOmNsYXNzPVwie21vYmlsZTogaXNNb2JpbGV9XCIgdi1zaG93PVwic3JjLmxlbmd0aFwiIEBtb3VzZW92ZXI9XCJob3Zlcj10cnVlXCIgQG1vdXNlbGVhdmU9XCJob3Zlcj1mYWxzZVwiPlxuICAgIDxkaXYgY2xhc3M9XCJwbGF5ZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjdHJsLWJ0blwiIHRpdGxlPVwiW1NQQUNFXVwiIEBjbGljaz1cInBhdXNlZCA9ICFwYXVzZWRcIj5cbiAgICAgICAgPGkgdi1pZj1cInBhdXNlZFwiIGNsYXNzPVwiaWNvbi1wbGF5XCI+PC9pPlxuICAgICAgICA8aSB2LWVsc2UgY2xhc3M9XCJpY29uLXBhdXNlXCI+PC9pPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY3RybC1idG5cIiB0aXRsZT1cIltMRUZUXVwiIEBjbGljaz1cIiRlbWl0KCdiYWNrd2FyZCcpXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiaWNvbi1iYWNrd2FyZFwiPjwvaT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImN0cmwtYnRuXCIgdGl0bGU9XCJbUklHSFRdXCIgQGNsaWNrPVwiJGVtaXQoJ2ZvcndhcmQnKVwiPlxuICAgICAgICA8aSBjbGFzcz1cImljb24tZm9yd2FyZFwiPjwvaT5cbiAgICAgIDwvZGl2PlxuICAgICAgPHJhbmdlIGNsYXNzPVwicmFuZ2UgbXVzaWNcIiA6dmFsdWU9XCJwcm9jZXNzXCIgQHNlZWs9XCJzZWVrXCIgcmVmPVwibXVzaWNSYW5nZVwiPjwvcmFuZ2U+XG4gICAgICA8dGltZS1wYW5lbCB2LWlmPVwiIWlzTW9iaWxlXCIgOmR1cmF0aW9uPVwiZHVyYXRpb25cIiA6Y3VycmVudC10aW1lPVwiY3VycmVudFRpbWVcIj48L3RpbWUtcGFuZWw+XG4gICAgPC9kaXY+XG4gICAgPHRyYW5zaXRpb24gbmFtZT1cInBsYXllci1tb3JlXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9yZVwiIHYtc2hvdz1cImlzTW9iaWxlIHx8IGhvdmVyXCI+XG4gICAgICAgIDx0aW1lLXBhbmVsIHYtaWY9XCJpc01vYmlsZVwiIDpkdXJhdGlvbj1cImR1cmF0aW9uXCIgOmN1cnJlbnQtdGltZT1cImN1cnJlbnRUaW1lXCI+PC90aW1lLXBhbmVsPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic291bmRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3RybC1idG5cIiBAY2xpY2s9XCJtdXRlZCA9ICFtdXRlZFwiPlxuICAgICAgICAgICAgPGkgdi1pZj1cIm11dGVkIHx8IHZvbHVtZSA9PSAwXCIgY2xhc3M9XCJpY29uLXZvbHVtZS1vZmZcIj48L2k+XG4gICAgICAgICAgICA8aSB2LWVsc2UgY2xhc3M9XCJpY29uLXZvbHVtZS11cFwiPjwvaT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8cmFuZ2UgY2xhc3M9XCJyYW5nZSB2b2x1bWVcIiA6dmFsdWU9XCJ2b2x1bWVcIiBAc2Vlaz1cInZvbHVtZVNlZWtcIiBAZHJhZy1zZWVrPVwidm9sdW1lU2Vla1wiIHJlZj1cInNvdW5kUmFuZ2VcIj48L3JhbmdlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvdHJhbnNpdGlvbj5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c3R5bGUgbGFuZz1cInNhc3NcIiBzY29wZWQ+XG5AaW1wb3J0IFwic2Fzcy9iYXNlXCI7XG5cbiRsaW5lLWhlaWdodDogMzBweDtcblxuLnJvb3Qge1xuICBoZWlnaHQ6ICRsaW5lLWhlaWdodDtcbiAgJi5tb2JpbGUge1xuICAgIGhlaWdodDogJGxpbmUtaGVpZ2h0ICogMjtcbiAgfVxufVxuXG4lZmxleCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cblxuJWxpbmUge1xuICBAZXh0ZW5kICVmbGV4O1xuICBiYWNrZ3JvdW5kOiAjRDBEQUU0O1xuICBjb2xvcjogJGJsdWUtY29sb3I7XG4gIGhlaWdodDogJGxpbmUtaGVpZ2h0O1xufVxuXG4ucGxheWVyIHtcbiAgQGV4dGVuZCAlbGluZTtcbn1cblxuLmN0cmwtYnRuIHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBwYWRkaW5nOiAwIDFweDtcbn1cblxuLnJhbmdlIHtcbiAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgbWFyZ2luLXJpZ2h0OiA0cHg7XG59XG5cbi5yYW5nZS5tdXNpYyB7XG4gIGZsZXg6IDE7XG59XG5cbnRpbWUtcGFuZWwge1xuICBwYWRkaW5nOiAwIDVweDtcbn1cblxuLm1vcmUge1xuICBAZXh0ZW5kICVsaW5lO1xuICBoZWlnaHQ6ICRsaW5lLWhlaWdodDtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgLm1vYmlsZSAmIHtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIH1cbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiAxMDtcbn1cblxuLnNvdW5kIHtcbiAgQGV4dGVuZCAlZmxleDtcbiAgcGFkZGluZzogMCA1cHg7XG4gIHdpZHRoOiAzMCU7XG4gIC5yYW5nZS52b2x1bWUge1xuICAgIGZsZXg6IDE7XG4gIH1cbiAgLmN0cmwtbXV0ZS1idG4ge1xuICAgIHdpZHRoOiAyNnB4O1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgfVxufVxuXG48L3N0eWxlPlxuXG48c2NyaXB0PlxuaW1wb3J0IFJhbmdlIGZyb20gJy4vcmFuZ2UnXG5pbXBvcnQgVGltZVBhbmVsIGZyb20gJy4vdGltZS1wYW5lbCdcbmltcG9ydCB7Z2xvYmFsS2V5ZG93biwgaXNNb2JpbGV9IGZyb20gJy4uL3V0aWxzJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGRhdGEgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBob3ZlcjogZmFsc2UsXG4gICAgICBpc01vYmlsZTogaXNNb2JpbGUsXG5cbiAgICAgIHByb2Nlc3M6IDAsXG4gICAgICBtdXRlZDogZmFsc2UsXG4gICAgICBwYXVzZWQ6IHRydWUsXG4gICAgICBjdXJyZW50VGltZTogMCxcbiAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgdm9sdW1lOiAwLFxuICAgICAgc3JjOiAnJyxcbiAgICAgIGF1ZGlvOiBudWxsLFxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIHNlZWsgKHBlcmNlbnQpIHtcbiAgICAgIHRoaXMucGxheXRvKHBhcnNlRmxvYXQocGVyY2VudCAqIHRoaXMuYXVkaW8uZHVyYXRpb24pKVxuICAgIH0sXG4gICAgdm9sdW1lU2VlayAocGVyY2VudCkge1xuICAgICAgdGhpcy5hdWRpby52b2x1bWUgPSB0aGlzLnZvbHVtZSA9IHBlcmNlbnRcbiAgICB9LFxuICAgIHBsYXl0byAodGltZSkge1xuICAgICAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIFVzaW5nIGBuZXh0VGlja2BcbiAgICAgIC8vIEEgYnVnIG9uIGNocm9tZSwgZGF0YVVSTCBtdXNpYyB3aWxsIG92ZXJsYXAgcGxheSB3aGVuIGNoYW5nZSBjdXJyZW50VGltZSBiZWZvcmUgY2FsbCBgYXVkaW8ucGxheSgpYFxuICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gdGhpcy5hdWRpby5jdXJyZW50VGltZSA9IHRpbWVcbiAgICAgIH0pXG4gICAgfSxcbiAgfSxcbiAgbW91bnRlZCAoKSB7XG4gICAgdGhpcy5hdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJylcbiAgICB0aGlzLmF1ZGlvLnByZWxvYWQgPSAnbWV0YWRhdGEnXG4gICAgdGhpcy5hdWRpby5hZGRFdmVudExpc3RlbmVyKCdkdXJhdGlvbmNoYW5nZScsICgpID0+IHtcbiAgICAgIHRoaXMuZHVyYXRpb24gPSB0aGlzLmF1ZGlvLmR1cmF0aW9uXG4gICAgfSlcbiAgICAvLyBUT0RPIG9uIHByb2dyZXNzXG4gICAgdGhpcy5hdWRpby5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgdGhpcy5jdXJyZW50VGltZSA9IHRoaXMuYXVkaW8uY3VycmVudFRpbWVcbiAgICAgIHRoaXMucHJvY2VzcyA9IHRoaXMuY3VycmVudFRpbWUgLyB0aGlzLmR1cmF0aW9uXG4gICAgICB0aGlzLiRlbWl0KCd0aW1ldXBkYXRlJywgdGhpcy5jdXJyZW50VGltZSlcbiAgICB9KVxuICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLiRlbWl0KCd0aW1ldXBkYXRlJywgdGhpcy5jdXJyZW50VGltZSlcbiAgICAgIHRoaXMucHJvY2VzcyA9IDBcbiAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZVxuICAgIH0pXG4gICAgZ2xvYmFsS2V5ZG93blxuICAgIC5vbihbJ3NwYWNlJywgJyAnXSwgKCkgPT4ge1xuICAgICAgdGhpcy5wYXVzZWQgPSAhdGhpcy5wYXVzZWRcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG4gICAgLm9uKCdhcnJvd2xlZnQnLCAoKSA9PiB7XG4gICAgICB0aGlzLiRlbWl0KCdiYWNrd2FyZCcpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICAgIC5vbignYXJyb3dyaWdodCcsICgpID0+IHtcbiAgICAgIHRoaXMuJGVtaXQoJ2ZvcndhcmQnKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcblxuICAgIHRoaXNcbiAgICAgIC4kb24oJ2JhY2t3YXJkJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnBsYXl0byh0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lIC0gNSlcbiAgICAgIH0pXG4gICAgICAuJG9uKCdmb3J3YXJkJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnBsYXl0byh0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lICsgNSlcbiAgICAgIH0pXG4gIH0sXG4gIHdhdGNoOiB7XG4gICAgc3JjOiB7XG4gICAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgICBoYW5kbGVyIChzcmMpIHtcbiAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuYXVkaW8uc3JjID0gc3JjXG4gICAgICAgICAgdGhpcy5wcm9jZXNzID0gMFxuICAgICAgICAgIHRoaXMudm9sdW1lID0gdGhpcy5hdWRpby52b2x1bWVcbiAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gdGhpcy5hdWRpby5jdXJyZW50VGltZVxuICAgICAgICAgIHRoaXMuZHVyYXRpb24gPSB0aGlzLmF1ZGlvLmR1cmF0aW9uXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSxcbiAgICBwcm9jZXNzICh2YWwpIHtcbiAgICAgIHRoaXMuJHJlZnMubXVzaWNSYW5nZS5jaGFuZ2VWYWx1ZSh2YWwpXG4gICAgfSxcbiAgICB2b2x1bWUgKHZhbCkge1xuICAgICAgdGhpcy4kcmVmcy5zb3VuZFJhbmdlLmNoYW5nZVZhbHVlKHZhbClcbiAgICB9LFxuICAgIG11dGVkICh2YWwpIHtcbiAgICAgIHRoaXMuYXVkaW8ubXV0ZWQgPSB2YWxcbiAgICB9LFxuICAgIHBhdXNlZCAoKSB7XG4gICAgICBpZiAodGhpcy5wYXVzZWQpIHtcbiAgICAgICAgdGhpcy5hdWRpby5wYXVzZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmF1ZGlvLnBsYXkoKVxuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIGNvbXBvbmVudHM6IHtcbiAgICBSYW5nZSxcbiAgICBUaW1lUGFuZWwsXG4gIH0sXG59XG48L3NjcmlwdD5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBwbGF5ZXIudnVlPzQzYzFiZDc1IiwiXG4vKiBzdHlsZXMgKi9cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXI/aWQ9ZGF0YS12LTU4MjBkZTc0JnNjb3BlZD10cnVlIXNhc3MtbG9hZGVyIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXN0eWxlcyZpbmRleD0wIS4vcmFuZ2UudnVlXCIpXG5cbnZhciBDb21wb25lbnQgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9jb21wb25lbnQtbm9ybWFsaXplclwiKShcbiAgLyogc2NyaXB0ICovXG4gIHJlcXVpcmUoXCIhIWJhYmVsLWxvYWRlciEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL3JhbmdlLnZ1ZVwiKSxcbiAgLyogdGVtcGxhdGUgKi9cbiAgcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyP2lkPWRhdGEtdi01ODIwZGU3NCEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vcmFuZ2UudnVlXCIpLFxuICAvKiBzY29wZUlkICovXG4gIFwiZGF0YS12LTU4MjBkZTc0XCIsXG4gIC8qIGNzc01vZHVsZXMgKi9cbiAgbnVsbFxuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9yYW5nZS52dWVcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTU4MjBkZTc0JnNjb3BlZD10cnVlIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL3JhbmdlLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpKFwiM2FkMzk1MzVcIiwgY29udGVudCwgdHJ1ZSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtc3R5bGUtbG9hZGVyIS4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi01ODIwZGU3NCZzY29wZWQ9dHJ1ZSEuLi9+L3Nhc3MtbG9hZGVyIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2FwcC9yYW5nZS52dWVcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5iYXJbZGF0YS12LTU4MjBkZTc0XXtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTBweH0ud3JhcFtkYXRhLXYtNTgyMGRlNzRde3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZC1jb2xvcjojMTIzYjVkO2JvcmRlci1yYWRpdXM6NXB4O292ZXJmbG93OmhpZGRlbn0udmFsdWVbZGF0YS12LTU4MjBkZTc0XXtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiMyYTcyYmJ9LnRodW1iW2RhdGEtdi01ODIwZGU3NF17Y3Vyc29yOm1vdmU7cG9zaXRpb246YWJzb2x1dGU7dG9wOi0zcHg7d2lkdGg6MTBweDtoZWlnaHQ6MTZweDtiYWNrZ3JvdW5kOiNmZmY7Ym94LXNoYWRvdzppbnNldCAtMXB4IC0xcHggNXB4IC0ycHggIzBiMjAzMTtib3JkZXItcmFkaXVzOjE2cHg7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTVweCl9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTU4MjBkZTc0JnNjb3BlZD10cnVlIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL3JhbmdlLnZ1ZVxuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwiYmFyXCIgQGNsaWNrPVwiY2xpY2tcIiByZWY9XCJiYXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwid3JhcFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInZhbHVlXCIgOnN0eWxlPVwie3dpZHRoOiBzZWxmVmFsdWUqMTAwICsgJyUnfVwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJ0aHVtYlwiIDpzdHlsZT1cIntsZWZ0OiBzZWxmVmFsdWUqMTAwICsgJyUnfVwiIHJlZj1cInRodW1iXCI+PC9kaXY+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHN0eWxlIGxhbmc9XCJzYXNzXCIgc2NvcGVkPlxuQGltcG9ydCBcInNhc3MvYmFzZVwiO1xuXG4kcm9vdC1oZWlnaHQ6IDEwcHg7XG5cbi5iYXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGhlaWdodDogJHJvb3QtaGVpZ2h0O1xufVxuXG4ud3JhcCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6ICMxMjNCNUQ7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLnZhbHVlIHtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkYmx1ZS1jb2xvcjtcbn1cblxuLnRodW1iIHtcbiAgJHdpZHRoOiAxMHB4O1xuICAkaGVpZ2h0OiAxNnB4O1xuXG4gIGN1cnNvcjogbW92ZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IC0oJGhlaWdodCAtICRyb290LWhlaWdodCkgLyAyO1xuICB3aWR0aDogJHdpZHRoO1xuICBoZWlnaHQ6ICRoZWlnaHQ7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBib3gtc2hhZG93OiBpbnNldCAtMXB4IC0xcHggNXB4IC0ycHggIzBCMjAzMTtcbiAgYm9yZGVyLXJhZGl1czogJGhlaWdodDtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0kd2lkdGggLyAyKTtcbn1cbjwvc3R5bGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQge0RyYWdnZXJ9IGZyb20gJy4uL3V0aWxzJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGRhdGEgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZWxmVmFsdWU6IDAsXG4gICAgICBkcmFnaW5nOiBmYWxzZSxcbiAgICAgIGRyYWdWYWx1ZTogMCxcbiAgICB9XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB2YWxpZGF0b3I6ICh2YWwpID0+IHtcbiAgICAgICAgcmV0dXJuIHZhbCA+PSAwICYmIHZhbCA8PSAxXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBjbGljayAoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMuJHJlZnMudGh1bWIpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB0aGlzLnNlbGZWYWx1ZSA9IHRoaXMub2Zmc2V0MnZhbHVlKGV2ZW50Lm9mZnNldFgpXG4gICAgICB0aGlzLmVtaXRTZWVrKClcbiAgICB9LFxuICAgIGVtaXRTZWVrICgpIHtcbiAgICAgIHRoaXMuJGVtaXQoJ3NlZWsnLCB0aGlzLnNlbGZWYWx1ZSlcbiAgICB9LFxuICAgIGVtaXREcmFnU2VlayAoKSB7XG4gICAgICB0aGlzLiRlbWl0KCdkcmFnLXNlZWsnLCB0aGlzLnNlbGZWYWx1ZSlcbiAgICB9LFxuICAgIG9mZnNldDJ2YWx1ZSAob2Zmc2V0KSB7XG4gICAgICByZXR1cm4gb2Zmc2V0IC8gdGhpcy4kcmVmcy5iYXIuY2xpZW50V2lkdGhcbiAgICB9LFxuICAgIGNoYW5nZVZhbHVlICh2YWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLmRyYWdpbmcpIHtcbiAgICAgICAgdGhpcy5zZWxmVmFsdWUgPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgbW91bnRlZCAoKSB7XG4gICAgdmFyIHRodW1iID0gdGhpcy4kcmVmcy50aHVtYlxuICAgIHZhciBiYXIgPSB0aGlzLiRyZWZzLmJhclxuXG4gICAgdmFyIGRyYWdnZXIgPSBuZXcgRHJhZ2dlcih0aHVtYiwgYmFyKVxuICAgIGRyYWdnZXJcbiAgICAub24oJ3N0YXJ0JywgKCkgPT4ge1xuICAgICAgdGhpcy5kcmFnaW5nID0gdHJ1ZVxuICAgIH0pXG4gICAgLm9uKCdtb3ZlJywgKCkgPT4ge1xuICAgICAgdGhpcy5zZWxmVmFsdWUgPSB0aGlzLm9mZnNldDJ2YWx1ZShkcmFnZ2VyLm9mZnNldClcbiAgICAgIHRoaXMuZW1pdERyYWdTZWVrKClcbiAgICB9KVxuICAgIC5vbignZW5kJywgKCkgPT4ge1xuICAgICAgdGhpcy5kcmFnaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuc2VsZlZhbHVlID0gdGhpcy5vZmZzZXQydmFsdWUoZHJhZ2dlci5vZmZzZXQpXG4gICAgICB0aGlzLmVtaXRTZWVrKClcbiAgICB9KVxuICAgIGRyYWdnZXIuY3JlYXRlKClcbiAgfSxcbn1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJhbmdlLnZ1ZT83MDM3MGVhMyIsImltcG9ydCBFdmVudEVtaXR0ZXIyIGZyb20gJ2V2ZW50ZW1pdHRlcjInXG5pbXBvcnQgRmlsZVNhdmVyIGZyb20gJ2ZpbGVzYXZlci5qcydcbmltcG9ydCBVbmlkcmFnZ2VyIGZyb20gJ3VuaWRyYWdnZXInXG5pbXBvcnQgaXMgZnJvbSAnaXNfanMnXG5pbXBvcnQgZXh0ZW5kIGZyb20gJ2V4dGVuZCdcbmltcG9ydCBjbG9uZSBmcm9tICdjbG9uZSdcbmltcG9ydCBQS0cgZnJvbSAnLi4vcGFja2FnZS5qc29uJ1xuXG5leHBvcnQgdmFyIGlzTW9iaWxlID0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdylcblxuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlciBleHRlbmRzIEV2ZW50RW1pdHRlcjIge1xuICBvbiAoZXZlbnRzLCAuLi5hcmdzKSB7XG4gICAgaWYgKGlzLmFycmF5KGV2ZW50cykpIHtcbiAgICAgIGV2ZW50cy5mb3JFYWNoKChpdCkgPT4ge1xuICAgICAgICBzdXBlci5vbihpdCwgLi4uYXJncylcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHN1cGVyLm9uKGV2ZW50cywgLi4uYXJncylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2Nyb2xsZXIge1xuICB0aW1lciA9IFtdXG4gIHNjcm9sbGFibGVTdGFydFRpbWUgPSBuZXcgRGF0ZSgpXG5cbiAgY29uc3RydWN0b3IgKHZpZXdwb3J0LCBjb25maWcgPSB7fSkge1xuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydFxuICAgIHRoaXMuY29uZmlnID0gZXh0ZW5kKHtkZWxheTogMywgdGltZTogMSwgc3RlcDogMTAwfSwgY29uZmlnKVxuXG4gICAgdGhpcy52aWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuaXNDYW5TY3JvbGwoKSkge1xuICAgICAgICB0aGlzLmxldERlbGF5KClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgbGV0RGVsYXkgKCkge1xuICAgIHRoaXMuc2Nyb2xsYWJsZVN0YXJ0VGltZSA9IERhdGUubm93KCkgKyB0aGlzLmNvbmZpZy5kZWxheSAqIDEwMDBcbiAgfVxuXG4gIGNsZWFyVGltZXIgKCkge1xuICAgIHRoaXMudGltZXIuZm9yRWFjaCgoaXQpID0+IGNsZWFyVGltZW91dChpdCkpXG4gICAgdGhpcy50aW1lciA9IFtdXG4gIH1cblxuICBpc0NhblNjcm9sbCAoKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCkgPiB0aGlzLnNjcm9sbGFibGVTdGFydFRpbWVcbiAgfVxuXG4gIHNjcm9sbFRvICh0YXJnZXRUb3AsIGZvcmNlID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMuaXNDYW5TY3JvbGwoKSAmJiBmb3JjZSA9PT0gZmFsc2UpIHsgcmV0dXJuIH1cbiAgICB0aGlzLmNsZWFyVGltZXIoKVxuXG4gICAgdmFyIHN0YXJ0VG9wID0gdGhpcy52aWV3cG9ydC5zY3JvbGxUb3BcbiAgICB2YXIgZW5kVG9wID0gdGFyZ2V0VG9wXG4gICAgdmFyIGRpZmZUb3AgPSBlbmRUb3AgLSBzdGFydFRvcFxuICAgIGlmIChkaWZmVG9wID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgcGVyU3RlcCA9IGRpZmZUb3AgLyB0aGlzLmNvbmZpZy5zdGVwXG5cbiAgICB2YXIgY3VyVG9wID0gc3RhcnRUb3BcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuY29uZmlnLnN0ZXA7ICsraSkge1xuICAgICAgKChpKSA9PiB7XG4gICAgICAgIHRoaXMudGltZXIucHVzaChzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoY3VyVG9wICE9PSB0aGlzLnZpZXdwb3J0LnNjcm9sbFRvcCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVyKClcbiAgICAgICAgICAgIHRoaXMubGV0RGVsYXkoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNjcm9sbFRvcCA9IHN0YXJ0VG9wICsgcGVyU3RlcCAqIGlcbiAgICAgICAgICAgIGN1clRvcCA9IHRoaXMudmlld3BvcnQuc2Nyb2xsVG9wXG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLmNvbmZpZy50aW1lICogMTAwMCAqIGkgLyB0aGlzLmNvbmZpZy5zdGVwKSlcbiAgICAgIH0pKGkpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEZWxheUhvdmVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgc3RhdGljIExhc3RIb3ZlciA9IG51bGxcbiAgZW50ZXJUaW1lciA9IG51bGxcbiAgbGVhdmVUaW1lciA9IG51bGxcbiAgc2hvdyA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IgKGVsZW1lbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcbiAgICB0aGlzLmNmZyA9IGV4dGVuZCh7XG4gICAgICBlbnRlckRlbGF5OiAwLjUsXG4gICAgICBsZWF2ZURlbGF5OiAwLjMsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgfSwgY29uZmlnKVxuXG4gICAgdGhpcy5ob3ZlcigoKSA9PiB7XG4gICAgICB0aGlzLnNob3cgPSB0cnVlXG4gICAgfSwgKCkgPT4ge1xuICAgICAgdGhpcy5zaG93ID0gZmFsc2VcbiAgICB9KVxuXG4gICAgaWYgKGlzTW9iaWxlKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3cpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2xlYXZlJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmNsb3NlTGFzdEhvdmVyKClcbiAgICAgICAgICB0aGlzLmVtaXQoJ2VudGVyJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xlYXJMZWF2ZVRpbWVyKClcbiAgICAgICAgdGhpcy5lbnRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jbG9zZUxhc3RIb3ZlcigpXG4gICAgICAgICAgRGVsYXlIb3Zlci5MYXN0SG92ZXIgPSB0aGlzXG4gICAgICAgICAgdGhpcy5lbWl0KCdlbnRlcicpXG4gICAgICAgIH0sIDEwMDAgKiB0aGlzLmNmZy5lbnRlckRlbGF5KVxuICAgICAgfSlcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsZWFyRW50ZXJUaW1lcigpXG4gICAgICAgIHRoaXMubGVhdmVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZW1pdCgnbGVhdmUnKVxuICAgICAgICB9LCAxMDAwICogdGhpcy5jZmcubGVhdmVEZWxheSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2xvc2VMYXN0SG92ZXIgKCkge1xuICAgIGlmICh0aGlzLmNmZy51bmlxdWUgJiZcbiAgICAgICAgRGVsYXlIb3Zlci5MYXN0SG92ZXIgJiZcbiAgICAgICAgRGVsYXlIb3Zlci5MYXN0SG92ZXIgIT09IHRoaXNcbiAgICAgICApIHtcbiAgICAgIERlbGF5SG92ZXIuTGFzdEhvdmVyLmVtaXQoJ2xlYXZlJylcbiAgICB9XG4gIH1cblxuICBjbGVhckxlYXZlVGltZXIgKCkge1xuICAgIGlmICh0aGlzLmxlYXZlVGltZXIgIT09IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxlYXZlVGltZXIpXG4gICAgICB0aGlzLmxlYXZlVGltZXIgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgY2xlYXJFbnRlclRpbWVyICgpIHtcbiAgICBpZiAodGhpcy5lbnRlclRpbWVyICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5lbnRlclRpbWVyKVxuICAgICAgdGhpcy5lbnRlclRpbWVyID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGhvdmVyIChlbnRlciwgbGVhdmUpIHtcbiAgICB0aGlzXG4gICAgLm9uKCdlbnRlcicsIGVudGVyKVxuICAgIC5vbignbGVhdmUnLCBsZWF2ZSlcbiAgfVxufVxuXG52YXIgaXNGaWxlU2F2ZXJTdXBwb3J0ZWRcbnRyeSB7XG4gIGlzRmlsZVNhdmVyU3VwcG9ydGVkID0gISFuZXcgQmxvYigpXG59IGNhdGNoIChlKSB7XG4gIGlzRmlsZVNhdmVyU3VwcG9ydGVkID0gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVMcmMgKHN0ciwgbmFtZSkge1xuICBpZiAoaXNGaWxlU2F2ZXJTdXBwb3J0ZWQpIHtcbiAgICBGaWxlU2F2ZXIuc2F2ZUFzKFxuICAgICAgbmV3IEJsb2IoW3N0cl0sIHt0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J30pLFxuICAgICAgYCR7bmFtZX0ubHJjYFxuICAgIClcbiAgfSBlbHNlIHtcbiAgICBhbGVydCgnUGxlYXNlIHVwZ3JhZGUgeW91ciBicm93c2VyJylcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2FjaGUge1xuICB2ZXJzaW9uID0gMlxuXG4gIGNvbnN0cnVjdG9yIChwcmVmaXggPSBQS0cubmFtZSkge1xuICAgIHRoaXMucHJlZml4ID0gcHJlZml4XG4gIH1cblxuICByZWFkICgpIHtcbiAgICB2YXIgZGF0YVxuICAgIGlmICh0aGlzLnByZWZpeCBpbiBsb2NhbFN0b3JhZ2UpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVt0aGlzLnByZWZpeF0pXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLiR2ZXJzaW9uID09PSB0aGlzLnZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIGRhdGFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHt9XG4gIH1cblxuICB3cml0ZSAoZGF0YSkge1xuICAgIGRhdGEuJHZlcnNpb24gPSB0aGlzLnZlcnNpb25cbiAgICBsb2NhbFN0b3JhZ2VbdGhpcy5wcmVmaXhdID0gSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgfVxuXG4gIGdldCAoa2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMucmVhZCgpXG4gICAgcmV0dXJuIChrZXkgaW4gZGF0YSkgPyBkYXRhW2tleV0gOiBkZWZhdWx0VmFsdWVcbiAgfVxuXG4gIHNldCAoa2V5LCB2YWx1ZSkge1xuICAgIHZhciBkYXRhID0gdGhpcy5yZWFkKClcbiAgICBkYXRhW2tleV0gPSB2YWx1ZVxuICAgIHRyeSB7XG4gICAgICB0aGlzLndyaXRlKGRhdGEpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdmFyIGNhY2hlID0gbmV3IENhY2hlKClcblxuZXhwb3J0IHZhciBnbG9iYWxLZXlkb3duID0gbmV3IEV2ZW50RW1pdHRlcigpXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICBpZiAoLyhpbnB1dHxzZWxlY3R8b3B0aW9ufHRleHRhcmVhKS8udGVzdChcbiAgICBldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKVxuICApIHJldHVyblxuXG4gIHZhciBjb2RlID0gZXZlbnQua2V5IHx8IGV2ZW50LmNvZGVcbiAgdmFyIGhhc0ZhbHNlID0gZ2xvYmFsS2V5ZG93bi5saXN0ZW5lcnMoY29kZS50b0xvd2VyQ2FzZSgpKVxuICAgIC5tYXAoKGZuKSA9PiBmbihldmVudCkpXG4gICAgLnNvbWUoKGZsYWcpID0+IGZsYWcgPT09IGZhbHNlKVxuICBpZiAoaGFzRmFsc2UpIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbn0pXG5cbmV4cG9ydCBjbGFzcyBEcmFnZ2VyIGV4dGVuZHMgVW5pZHJhZ2dlciB7XG4gIGNvbnN0cnVjdG9yIChlbGVtLCBjb250YWluZXIpIHtcbiAgICBzdXBlcihlbGVtKVxuICAgIHRoaXMuZWUgPSBuZXcgRXZlbnRFbWl0dGVyKClcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXJcbiAgfVxuXG4gIG9uICguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZWUub24oLi4uYXJncylcbiAgfVxuXG4gIGVtaXQgKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5lZS5lbWl0KC4uLmFyZ3MpXG4gIH1cblxuICBjcmVhdGUgKCkge1xuICAgIHRoaXMuaGFuZGxlcyA9IFsgdGhpcy5lbGVtZW50IF1cbiAgICB0aGlzLmJpbmRIYW5kbGVzKClcbiAgfVxuXG4gIGRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICB0aGlzLmRyYWdTdGFydFBvaW50LmxlZnQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0TGVmdFxuICAgIHRoaXMuZW1pdCgnc3RhcnQnLCBldmVudClcbiAgfVxuXG4gIGRyYWdNb3ZlIChldmVudCwgcG9pbnRlciwgbW92ZVZlY3Rvcikge1xuICAgIHRoaXMub2Zmc2V0ID0gdGhpcy5kcmFnU3RhcnRQb2ludC5sZWZ0ICsgbW92ZVZlY3Rvci54XG4gICAgaWYgKHRoaXMub2Zmc2V0IDwgMCkge1xuICAgICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgfSBlbHNlIGlmICh0aGlzLm9mZnNldCA+IHRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoKSB7XG4gICAgICB0aGlzLm9mZnNldCA9IHRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoXG4gICAgfVxuICAgIHRoaXMuZW1pdCgnbW92ZScsIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yKVxuICB9XG5cbiAgZHJhZ0VuZCAoZXZlbnQsIHBvaW50ZXIpIHtcbiAgICB0aGlzLmVtaXQoJ2VuZCcsIGV2ZW50LCBwb2ludGVyKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lc3RhbXAydGltZXN0ciAodGltZSwgb25seUludGVnZXIgPSBmYWxzZSkge1xuICBpZiAoIXRpbWUpIHtcbiAgICB0aW1lID0gMFxuICB9XG4gIHZhciBwYWRaZXJvID0gKG51bSwgc2l6ZSA9IDIpID0+IHtcbiAgICBudW0gPSBudW0udG9TdHJpbmcoKVxuICAgIHdoaWxlIChudW0uc3BsaXQoJy4nKVswXS5sZW5ndGggPCBzaXplKSBudW0gPSAnMCcgKyBudW1cbiAgICByZXR1cm4gbnVtXG4gIH1cbiAgaWYgKG9ubHlJbnRlZ2VyKSB7XG4gICAgcmV0dXJuIGAke3BhZFplcm8ocGFyc2VJbnQodGltZSAvIDYwLCAxMCkpfToke3BhZFplcm8ocGFyc2VJbnQodGltZSAlIDYwLCAxMCkpfWBcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYCR7cGFkWmVybyhwYXJzZUludCh0aW1lIC8gNjAsIDEwKSl9OiR7cGFkWmVybygodGltZSAlIDYwKS50b0ZpeGVkKDIpLCAyKX1gXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVzdHIydGltZXN0YW1wIChzdHIpIHtcbiAgdmFyIFttaW51dGUsIHNlY29uZF0gPSBzdHIuc3BsaXQoJzonKVxuICByZXR1cm4gcGFyc2VJbnQobWludXRlLCAxMCkgKiA2MCArIHBhcnNlRmxvYXQoc2Vjb25kKVxufVxuXG5leHBvcnQgY2xhc3MgVG9vbHRpcFBvc2l0aW9uIHtcbiAgZGlycyA9IFtcbiAgICAnYm90dG9tJyxcbiAgICAncmlnaHQnLFxuICAgICd0b3AnLFxuICAgICdsZWZ0JyxcbiAgXVxuXG4gIGNvbnN0cnVjdG9yICh0YXJnZXQsIHRvb2x0aXAsIGRpciA9ICdib3R0b20nKSB7XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXRcbiAgICB0aGlzLnRvb2x0aXAgPSB0b29sdGlwXG4gICAgdGhpcy52aWV3cG9ydCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICAgIHRoaXMuZ2VuZXJhdGVEaXJzKGRpcilcbiAgfVxuXG4gIGdlbmVyYXRlRGlycyAoZGlyKSB7XG4gICAgdmFyIGlkeCA9IHRoaXMuZGlycy5pbmRleE9mKGRpcilcbiAgICB0aGlzLmRpcnMuc3BsaWNlKGlkeCwgMSlcbiAgICB0aGlzLmRpcnMudW5zaGlmdChkaXIpXG4gIH1cblxuICBjaGVja1JlY3RPdmVyZmxvdyAocmVjdCkge1xuICAgIHJldHVybiByZWN0LmxlZnQgPj0gMCAmJlxuICAgICAgcmVjdC50b3AgPj0gMCAmJlxuICAgICAgcmVjdC5yaWdodCA8PSB0aGlzLnZpZXdwb3J0LmNsaWVudFdpZHRoICYmXG4gICAgICByZWN0LmJvdHRvbSA8PSB0aGlzLnZpZXdwb3J0LmNsaWVudEhlaWdodFxuICB9XG5cbiAgcmVjdE92ZXJmbG93Q291bnQgKHJlY3QpIHtcbiAgICB2YXIgbmVnYXRpdmUgPSAodmFsKSA9PiB2YWwgPCAwID8gdmFsIDogMFxuICAgIHJldHVybiBuZWdhdGl2ZShyZWN0LmxlZnQpICtcbiAgICAgIG5lZ2F0aXZlKHJlY3QudG9wKSArXG4gICAgICBuZWdhdGl2ZSh0aGlzLnZpZXdwb3J0LmNsaWVudFdpZHRoIC0gcmVjdC5yaWdodCkgK1xuICAgICAgbmVnYXRpdmUodGhpcy52aWV3cG9ydC5jbGllbnRIZWlnaHQgLSByZWN0LmJvdHRvbSlcbiAgfVxuXG4gIHBvc2l0aW9uICgpIHtcbiAgICB2YXIgcmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdmFyIHdpZHRoID0gdGhpcy50b29sdGlwLmNsaWVudFdpZHRoXG4gICAgdmFyIGhlaWdodCA9IHRoaXMudG9vbHRpcC5jbGllbnRIZWlnaHRcblxuICAgIHZhciB0b29sdGlwUmVjdCA9IHtcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIH1cblxuICAgIHZhciBvdmVyZmxvd1ZhbHVlcyA9IFtdXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGlycy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGRpciA9IHRoaXMuZGlyc1tpXVxuICAgICAgc3dpdGNoICh0aGlzLmRpcnNbaV0pIHtcbiAgICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgICB0b29sdGlwUmVjdC5sZWZ0ID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIgLSB3aWR0aCAvIDJcbiAgICAgICAgICB0b29sdGlwUmVjdC5yaWdodCA9IHRvb2x0aXBSZWN0LmxlZnQgKyB3aWR0aFxuICAgICAgICAgIHRvb2x0aXBSZWN0LnRvcCA9IHJlY3QuYm90dG9tXG4gICAgICAgICAgdG9vbHRpcFJlY3QuYm90dG9tID0gcmVjdC5ib3R0b20gKyBoZWlnaHRcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgIHRvb2x0aXBSZWN0LmxlZnQgPSByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMiAtIHdpZHRoIC8gMlxuICAgICAgICAgIHRvb2x0aXBSZWN0LnJpZ2h0ID0gdG9vbHRpcFJlY3QubGVmdCArIHdpZHRoXG4gICAgICAgICAgdG9vbHRpcFJlY3QudG9wID0gcmVjdC50b3AgLSBoZWlnaHRcbiAgICAgICAgICB0b29sdGlwUmVjdC5ib3R0b20gPSByZWN0LnRvcFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgIHRvb2x0aXBSZWN0LmxlZnQgPSByZWN0LmxlZnQgLSB3aWR0aFxuICAgICAgICAgIHRvb2x0aXBSZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0XG4gICAgICAgICAgdG9vbHRpcFJlY3QudG9wID0gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIgLSBoZWlnaHQgLyAyXG4gICAgICAgICAgdG9vbHRpcFJlY3QuYm90dG9tID0gdG9vbHRpcFJlY3QudG9wICsgaGVpZ2h0XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgIHRvb2x0aXBSZWN0LmxlZnQgPSByZWN0LnJpZ2h0XG4gICAgICAgICAgdG9vbHRpcFJlY3QucmlnaHQgPSByZWN0LnJpZ2h0ICsgd2lkdGhcbiAgICAgICAgICB0b29sdGlwUmVjdC50b3AgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMiAtIGhlaWdodCAvIDJcbiAgICAgICAgICB0b29sdGlwUmVjdC5ib3R0b20gPSB0b29sdGlwUmVjdC50b3AgKyBoZWlnaHRcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBvdmVyZmxvd1ZhbHVlcy5wdXNoKFt0aGlzLnJlY3RPdmVyZmxvd0NvdW50KHRvb2x0aXBSZWN0KSwgZGlyLCBjbG9uZSh0b29sdGlwUmVjdCldKVxuICAgIH1cblxuICAgIG92ZXJmbG93VmFsdWVzLnNvcnQoKGEsIGIpID0+IGJbMF0gLSBhWzBdKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRpcjogb3ZlcmZsb3dWYWx1ZXNbMF1bMV0sXG4gICAgICByZWN0OiBvdmVyZmxvd1ZhbHVlc1swXVsyXSxcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3V0aWxzLmpzIiwiLyohXHJcbiAqIEV2ZW50RW1pdHRlcjJcclxuICogaHR0cHM6Ly9naXRodWIuY29tL2hpajFueC9FdmVudEVtaXR0ZXIyXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMyBoaWoxbnhcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKi9cclxuOyFmdW5jdGlvbih1bmRlZmluZWQpIHtcclxuXHJcbiAgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5ID8gQXJyYXkuaXNBcnJheSA6IGZ1bmN0aW9uIF9pc0FycmF5KG9iaikge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSBcIltvYmplY3QgQXJyYXldXCI7XHJcbiAgfTtcclxuICB2YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xyXG5cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgdGhpcy5fZXZlbnRzID0ge307XHJcbiAgICBpZiAodGhpcy5fY29uZikge1xyXG4gICAgICBjb25maWd1cmUuY2FsbCh0aGlzLCB0aGlzLl9jb25mKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25mKSB7XHJcbiAgICBpZiAoY29uZikge1xyXG4gICAgICB0aGlzLl9jb25mID0gY29uZjtcclxuXHJcbiAgICAgIGNvbmYuZGVsaW1pdGVyICYmICh0aGlzLmRlbGltaXRlciA9IGNvbmYuZGVsaW1pdGVyKTtcclxuICAgICAgdGhpcy5fZXZlbnRzLm1heExpc3RlbmVycyA9IGNvbmYubWF4TGlzdGVuZXJzICE9PSB1bmRlZmluZWQgPyBjb25mLm1heExpc3RlbmVycyA6IGRlZmF1bHRNYXhMaXN0ZW5lcnM7XHJcbiAgICAgIGNvbmYud2lsZGNhcmQgJiYgKHRoaXMud2lsZGNhcmQgPSBjb25mLndpbGRjYXJkKTtcclxuICAgICAgY29uZi5uZXdMaXN0ZW5lciAmJiAodGhpcy5uZXdMaXN0ZW5lciA9IGNvbmYubmV3TGlzdGVuZXIpO1xyXG4gICAgICBjb25mLnZlcmJvc2VNZW1vcnlMZWFrICYmICh0aGlzLnZlcmJvc2VNZW1vcnlMZWFrID0gY29uZi52ZXJib3NlTWVtb3J5TGVhayk7XHJcblxyXG4gICAgICBpZiAodGhpcy53aWxkY2FyZCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJUcmVlID0ge307XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2V2ZW50cy5tYXhMaXN0ZW5lcnMgPSBkZWZhdWx0TWF4TGlzdGVuZXJzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbG9nUG9zc2libGVNZW1vcnlMZWFrKGNvdW50LCBldmVudE5hbWUpIHtcclxuICAgIHZhciBlcnJvck1zZyA9ICcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcclxuICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcclxuICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJztcclxuXHJcbiAgICBpZih0aGlzLnZlcmJvc2VNZW1vcnlMZWFrKXtcclxuICAgICAgZXJyb3JNc2cgKz0gJyBFdmVudCBuYW1lOiAlcy4nO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yTXNnLCBjb3VudCwgZXZlbnROYW1lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNc2csIGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29uc29sZS50cmFjZSl7XHJcbiAgICAgIGNvbnNvbGUudHJhY2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcihjb25mKSB7XHJcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcclxuICAgIHRoaXMubmV3TGlzdGVuZXIgPSBmYWxzZTtcclxuICAgIHRoaXMudmVyYm9zZU1lbW9yeUxlYWsgPSBmYWxzZTtcclxuICAgIGNvbmZpZ3VyZS5jYWxsKHRoaXMsIGNvbmYpO1xyXG4gIH1cclxuICBFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyMiA9IEV2ZW50RW1pdHRlcjsgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZm9yIGV4cG9ydGluZyBFdmVudEVtaXR0ZXIgcHJvcGVydHlcclxuXHJcbiAgLy9cclxuICAvLyBBdHRlbnRpb24sIGZ1bmN0aW9uIHJldHVybiB0eXBlIG5vdyBpcyBhcnJheSwgYWx3YXlzICFcclxuICAvLyBJdCBoYXMgemVybyBlbGVtZW50cyBpZiBubyBhbnkgbWF0Y2hlcyBmb3VuZCBhbmQgb25lIG9yIG1vcmVcclxuICAvLyBlbGVtZW50cyAobGVhZnMpIGlmIHRoZXJlIGFyZSBtYXRjaGVzXHJcbiAgLy9cclxuICBmdW5jdGlvbiBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHRyZWUsIGkpIHtcclxuICAgIGlmICghdHJlZSkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICB2YXIgbGlzdGVuZXJzPVtdLCBsZWFmLCBsZW4sIGJyYW5jaCwgeFRyZWUsIHh4VHJlZSwgaXNvbGF0ZWRCcmFuY2gsIGVuZFJlYWNoZWQsXHJcbiAgICAgICAgdHlwZUxlbmd0aCA9IHR5cGUubGVuZ3RoLCBjdXJyZW50VHlwZSA9IHR5cGVbaV0sIG5leHRUeXBlID0gdHlwZVtpKzFdO1xyXG4gICAgaWYgKGkgPT09IHR5cGVMZW5ndGggJiYgdHJlZS5fbGlzdGVuZXJzKSB7XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIElmIGF0IHRoZSBlbmQgb2YgdGhlIGV2ZW50KHMpIGxpc3QgYW5kIHRoZSB0cmVlIGhhcyBsaXN0ZW5lcnNcclxuICAgICAgLy8gaW52b2tlIHRob3NlIGxpc3RlbmVycy5cclxuICAgICAgLy9cclxuICAgICAgaWYgKHR5cGVvZiB0cmVlLl9saXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBoYW5kbGVycyAmJiBoYW5kbGVycy5wdXNoKHRyZWUuX2xpc3RlbmVycyk7XHJcbiAgICAgICAgcmV0dXJuIFt0cmVlXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKGxlYWYgPSAwLCBsZW4gPSB0cmVlLl9saXN0ZW5lcnMubGVuZ3RoOyBsZWFmIDwgbGVuOyBsZWFmKyspIHtcclxuICAgICAgICAgIGhhbmRsZXJzICYmIGhhbmRsZXJzLnB1c2godHJlZS5fbGlzdGVuZXJzW2xlYWZdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFt0cmVlXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICgoY3VycmVudFR5cGUgPT09ICcqJyB8fCBjdXJyZW50VHlwZSA9PT0gJyoqJykgfHwgdHJlZVtjdXJyZW50VHlwZV0pIHtcclxuICAgICAgLy9cclxuICAgICAgLy8gSWYgdGhlIGV2ZW50IGVtaXR0ZWQgaXMgJyonIGF0IHRoaXMgcGFydFxyXG4gICAgICAvLyBvciB0aGVyZSBpcyBhIGNvbmNyZXRlIG1hdGNoIGF0IHRoaXMgcGF0Y2hcclxuICAgICAgLy9cclxuICAgICAgaWYgKGN1cnJlbnRUeXBlID09PSAnKicpIHtcclxuICAgICAgICBmb3IgKGJyYW5jaCBpbiB0cmVlKSB7XHJcbiAgICAgICAgICBpZiAoYnJhbmNoICE9PSAnX2xpc3RlbmVycycgJiYgdHJlZS5oYXNPd25Qcm9wZXJ0eShicmFuY2gpKSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIGkrMSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzO1xyXG4gICAgICB9IGVsc2UgaWYoY3VycmVudFR5cGUgPT09ICcqKicpIHtcclxuICAgICAgICBlbmRSZWFjaGVkID0gKGkrMSA9PT0gdHlwZUxlbmd0aCB8fCAoaSsyID09PSB0eXBlTGVuZ3RoICYmIG5leHRUeXBlID09PSAnKicpKTtcclxuICAgICAgICBpZihlbmRSZWFjaGVkICYmIHRyZWUuX2xpc3RlbmVycykge1xyXG4gICAgICAgICAgLy8gVGhlIG5leHQgZWxlbWVudCBoYXMgYSBfbGlzdGVuZXJzLCBhZGQgaXQgdG8gdGhlIGhhbmRsZXJzLlxyXG4gICAgICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmNvbmNhdChzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHRyZWUsIHR5cGVMZW5ndGgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoYnJhbmNoIGluIHRyZWUpIHtcclxuICAgICAgICAgIGlmIChicmFuY2ggIT09ICdfbGlzdGVuZXJzJyAmJiB0cmVlLmhhc093blByb3BlcnR5KGJyYW5jaCkpIHtcclxuICAgICAgICAgICAgaWYoYnJhbmNoID09PSAnKicgfHwgYnJhbmNoID09PSAnKionKSB7XHJcbiAgICAgICAgICAgICAgaWYodHJlZVticmFuY2hdLl9saXN0ZW5lcnMgJiYgIWVuZFJlYWNoZWQpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIHR5cGVMZW5ndGgpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmNvbmNhdChzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHRyZWVbYnJhbmNoXSwgaSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoYnJhbmNoID09PSBuZXh0VHlwZSkge1xyXG4gICAgICAgICAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIGkrMikpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIE5vIG1hdGNoIG9uIHRoaXMgb25lLCBzaGlmdCBpbnRvIHRoZSB0cmVlIGJ1dCBub3QgaW4gdGhlIHR5cGUgYXJyYXkuXHJcbiAgICAgICAgICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmNvbmNhdChzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHRyZWVbYnJhbmNoXSwgaSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsaXN0ZW5lcnM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5jb25jYXQoc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2N1cnJlbnRUeXBlXSwgaSsxKSk7XHJcbiAgICB9XHJcblxyXG4gICAgeFRyZWUgPSB0cmVlWycqJ107XHJcbiAgICBpZiAoeFRyZWUpIHtcclxuICAgICAgLy9cclxuICAgICAgLy8gSWYgdGhlIGxpc3RlbmVyIHRyZWUgd2lsbCBhbGxvdyBhbnkgbWF0Y2ggZm9yIHRoaXMgcGFydCxcclxuICAgICAgLy8gdGhlbiByZWN1cnNpdmVseSBleHBsb3JlIGFsbCBicmFuY2hlcyBvZiB0aGUgdHJlZVxyXG4gICAgICAvL1xyXG4gICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHhUcmVlLCBpKzEpO1xyXG4gICAgfVxyXG5cclxuICAgIHh4VHJlZSA9IHRyZWVbJyoqJ107XHJcbiAgICBpZih4eFRyZWUpIHtcclxuICAgICAgaWYoaSA8IHR5cGVMZW5ndGgpIHtcclxuICAgICAgICBpZih4eFRyZWUuX2xpc3RlbmVycykge1xyXG4gICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIGxpc3RlbmVyIG9uIGEgJyoqJywgaXQgd2lsbCBjYXRjaCBhbGwsIHNvIGFkZCBpdHMgaGFuZGxlci5cclxuICAgICAgICAgIHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgeHhUcmVlLCB0eXBlTGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIGFycmF5cyBvZiBtYXRjaGluZyBuZXh0IGJyYW5jaGVzIGFuZCBvdGhlcnMuXHJcbiAgICAgICAgZm9yKGJyYW5jaCBpbiB4eFRyZWUpIHtcclxuICAgICAgICAgIGlmKGJyYW5jaCAhPT0gJ19saXN0ZW5lcnMnICYmIHh4VHJlZS5oYXNPd25Qcm9wZXJ0eShicmFuY2gpKSB7XHJcbiAgICAgICAgICAgIGlmKGJyYW5jaCA9PT0gbmV4dFR5cGUpIHtcclxuICAgICAgICAgICAgICAvLyBXZSBrbm93IHRoZSBuZXh0IGVsZW1lbnQgd2lsbCBtYXRjaCwgc28ganVtcCB0d2ljZS5cclxuICAgICAgICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHh4VHJlZVticmFuY2hdLCBpKzIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoYnJhbmNoID09PSBjdXJyZW50VHlwZSkge1xyXG4gICAgICAgICAgICAgIC8vIEN1cnJlbnQgbm9kZSBtYXRjaGVzLCBtb3ZlIGludG8gdGhlIHRyZWUuXHJcbiAgICAgICAgICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4eFRyZWVbYnJhbmNoXSwgaSsxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpc29sYXRlZEJyYW5jaCA9IHt9O1xyXG4gICAgICAgICAgICAgIGlzb2xhdGVkQnJhbmNoW2JyYW5jaF0gPSB4eFRyZWVbYnJhbmNoXTtcclxuICAgICAgICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHsgJyoqJzogaXNvbGF0ZWRCcmFuY2ggfSwgaSsxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmKHh4VHJlZS5fbGlzdGVuZXJzKSB7XHJcbiAgICAgICAgLy8gV2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgYW5kIHN0aWxsIG9uIGEgJyoqJ1xyXG4gICAgICAgIHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgeHhUcmVlLCB0eXBlTGVuZ3RoKTtcclxuICAgICAgfSBlbHNlIGlmKHh4VHJlZVsnKiddICYmIHh4VHJlZVsnKiddLl9saXN0ZW5lcnMpIHtcclxuICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHh4VHJlZVsnKiddLCB0eXBlTGVuZ3RoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsaXN0ZW5lcnM7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBncm93TGlzdGVuZXJUcmVlKHR5cGUsIGxpc3RlbmVyKSB7XHJcblxyXG4gICAgdHlwZSA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUuc3BsaXQodGhpcy5kZWxpbWl0ZXIpIDogdHlwZS5zbGljZSgpO1xyXG5cclxuICAgIC8vXHJcbiAgICAvLyBMb29rcyBmb3IgdHdvIGNvbnNlY3V0aXZlICcqKicsIGlmIHNvLCBkb24ndCBhZGQgdGhlIGV2ZW50IGF0IGFsbC5cclxuICAgIC8vXHJcbiAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSB0eXBlLmxlbmd0aDsgaSsxIDwgbGVuOyBpKyspIHtcclxuICAgICAgaWYodHlwZVtpXSA9PT0gJyoqJyAmJiB0eXBlW2krMV0gPT09ICcqKicpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgdHJlZSA9IHRoaXMubGlzdGVuZXJUcmVlO1xyXG4gICAgdmFyIG5hbWUgPSB0eXBlLnNoaWZ0KCk7XHJcblxyXG4gICAgd2hpbGUgKG5hbWUgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgaWYgKCF0cmVlW25hbWVdKSB7XHJcbiAgICAgICAgdHJlZVtuYW1lXSA9IHt9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0cmVlID0gdHJlZVtuYW1lXTtcclxuXHJcbiAgICAgIGlmICh0eXBlLmxlbmd0aCA9PT0gMCkge1xyXG5cclxuICAgICAgICBpZiAoIXRyZWUuX2xpc3RlbmVycykge1xyXG4gICAgICAgICAgdHJlZS5fbGlzdGVuZXJzID0gbGlzdGVuZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiB0cmVlLl9saXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdHJlZS5fbGlzdGVuZXJzID0gW3RyZWUuX2xpc3RlbmVyc107XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdHJlZS5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG5cclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgIXRyZWUuX2xpc3RlbmVycy53YXJuZWQgJiZcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzLm1heExpc3RlbmVycyA+IDAgJiZcclxuICAgICAgICAgICAgdHJlZS5fbGlzdGVuZXJzLmxlbmd0aCA+IHRoaXMuX2V2ZW50cy5tYXhMaXN0ZW5lcnNcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICB0cmVlLl9saXN0ZW5lcnMud2FybmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgbG9nUG9zc2libGVNZW1vcnlMZWFrLmNhbGwodGhpcywgdHJlZS5fbGlzdGVuZXJzLmxlbmd0aCwgbmFtZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIG5hbWUgPSB0eXBlLnNoaWZ0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW5cclxuICAvLyAxMCBsaXN0ZW5lcnMgYXJlIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2hcclxuICAvLyBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cclxuICAvL1xyXG4gIC8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xyXG4gIC8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxyXG5cclxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmRlbGltaXRlciA9ICcuJztcclxuXHJcbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XHJcbiAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XHJcbiAgICAgIHRoaXMuX2V2ZW50cy5tYXhMaXN0ZW5lcnMgPSBuO1xyXG4gICAgICBpZiAoIXRoaXMuX2NvbmYpIHRoaXMuX2NvbmYgPSB7fTtcclxuICAgICAgdGhpcy5fY29uZi5tYXhMaXN0ZW5lcnMgPSBuO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnQgPSAnJztcclxuXHJcbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZXZlbnQsIGZuKSB7XHJcbiAgICB0aGlzLm1hbnkoZXZlbnQsIDEsIGZuKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubWFueSA9IGZ1bmN0aW9uKGV2ZW50LCB0dGwsIGZuKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hbnkgb25seSBhY2NlcHRzIGluc3RhbmNlcyBvZiBGdW5jdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxpc3RlbmVyKCkge1xyXG4gICAgICBpZiAoLS10dGwgPT09IDApIHtcclxuICAgICAgICBzZWxmLm9mZihldmVudCwgbGlzdGVuZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGlzdGVuZXIuX29yaWdpbiA9IGZuO1xyXG5cclxuICAgIHRoaXMub24oZXZlbnQsIGxpc3RlbmVyKTtcclxuXHJcbiAgICByZXR1cm4gc2VsZjtcclxuICB9O1xyXG5cclxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB0aGlzLl9ldmVudHMgfHwgaW5pdC5jYWxsKHRoaXMpO1xyXG5cclxuICAgIHZhciB0eXBlID0gYXJndW1lbnRzWzBdO1xyXG5cclxuICAgIGlmICh0eXBlID09PSAnbmV3TGlzdGVuZXInICYmICF0aGlzLm5ld0xpc3RlbmVyKSB7XHJcbiAgICAgIGlmICghdGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGFsID0gYXJndW1lbnRzLmxlbmd0aDtcclxuICAgIHZhciBhcmdzLGwsaSxqO1xyXG4gICAgdmFyIGhhbmRsZXI7XHJcblxyXG4gICAgaWYgKHRoaXMuX2FsbCAmJiB0aGlzLl9hbGwubGVuZ3RoKSB7XHJcbiAgICAgIGhhbmRsZXIgPSB0aGlzLl9hbGwuc2xpY2UoKTtcclxuICAgICAgaWYgKGFsID4gMykge1xyXG4gICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwpO1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBhbDsgaisrKSBhcmdzW2pdID0gYXJndW1lbnRzW2pdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGkgPSAwLCBsID0gaGFuZGxlci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcclxuICAgICAgICBzd2l0Y2ggKGFsKSB7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIHR5cGUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIHR5cGUsIGFyZ3VtZW50c1sxXSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICBoYW5kbGVyW2ldLmNhbGwodGhpcywgdHlwZSwgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGhhbmRsZXJbaV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMud2lsZGNhcmQpIHtcclxuICAgICAgaGFuZGxlciA9IFtdO1xyXG4gICAgICB2YXIgbnMgPSB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycgPyB0eXBlLnNwbGl0KHRoaXMuZGVsaW1pdGVyKSA6IHR5cGUuc2xpY2UoKTtcclxuICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcywgaGFuZGxlciwgbnMsIHRoaXMubGlzdGVuZXJUcmVlLCAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XHJcbiAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRoaXMuZXZlbnQgPSB0eXBlO1xyXG4gICAgICAgIHN3aXRjaCAoYWwpIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYXJncyA9IG5ldyBBcnJheShhbCAtIDEpO1xyXG4gICAgICAgICAgZm9yIChqID0gMTsgaiA8IGFsOyBqKyspIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xyXG4gICAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gZWxzZSBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgIC8vIG5lZWQgdG8gbWFrZSBjb3B5IG9mIGhhbmRsZXJzIGJlY2F1c2UgbGlzdCBjYW4gY2hhbmdlIGluIHRoZSBtaWRkbGVcclxuICAgICAgICAvLyBvZiBlbWl0IGNhbGxcclxuICAgICAgICBoYW5kbGVyID0gaGFuZGxlci5zbGljZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGhhbmRsZXIgJiYgaGFuZGxlci5sZW5ndGgpIHtcclxuICAgICAgaWYgKGFsID4gMykge1xyXG4gICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwgLSAxKTtcclxuICAgICAgICBmb3IgKGogPSAxOyBqIDwgYWw7IGorKykgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChpID0gMCwgbCA9IGhhbmRsZXIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudCA9IHR5cGU7XHJcbiAgICAgICAgc3dpdGNoIChhbCkge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgIGhhbmRsZXJbaV0uY2FsbCh0aGlzKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIGhhbmRsZXJbaV0uY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBoYW5kbGVyW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoIXRoaXMuX2FsbCAmJiB0eXBlID09PSAnZXJyb3InKSB7XHJcbiAgICAgIGlmIChhcmd1bWVudHNbMV0gaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgIHRocm93IGFyZ3VtZW50c1sxXTsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmNhdWdodCwgdW5zcGVjaWZpZWQgJ2Vycm9yJyBldmVudC5cIik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAhIXRoaXMuX2FsbDtcclxuICB9O1xyXG5cclxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXRBc3luYyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XHJcblxyXG4gICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF07XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICduZXdMaXN0ZW5lcicgJiYgIXRoaXMubmV3TGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcikgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtmYWxzZV0pOyB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHByb21pc2VzPSBbXTtcclxuXHJcbiAgICB2YXIgYWwgPSBhcmd1bWVudHMubGVuZ3RoO1xyXG4gICAgdmFyIGFyZ3MsbCxpLGo7XHJcbiAgICB2YXIgaGFuZGxlcjtcclxuXHJcbiAgICBpZiAodGhpcy5fYWxsKSB7XHJcbiAgICAgIGlmIChhbCA+IDMpIHtcclxuICAgICAgICBhcmdzID0gbmV3IEFycmF5KGFsKTtcclxuICAgICAgICBmb3IgKGogPSAxOyBqIDwgYWw7IGorKykgYXJnc1tqXSA9IGFyZ3VtZW50c1tqXTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5fYWxsLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHRoaXMuZXZlbnQgPSB0eXBlO1xyXG4gICAgICAgIHN3aXRjaCAoYWwpIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2FsbFtpXS5jYWxsKHRoaXMsIHR5cGUpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fYWxsW2ldLmNhbGwodGhpcywgdHlwZSwgYXJndW1lbnRzWzFdKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2FsbFtpXS5jYWxsKHRoaXMsIHR5cGUsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9hbGxbaV0uYXBwbHkodGhpcywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XHJcbiAgICAgIGhhbmRsZXIgPSBbXTtcclxuICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XHJcbiAgICAgIHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIGhhbmRsZXIsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcclxuICAgICAgc3dpdGNoIChhbCkge1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyLmNhbGwodGhpcykpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDI6XHJcbiAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSkpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwgLSAxKTtcclxuICAgICAgICBmb3IgKGogPSAxOyBqIDwgYWw7IGorKykgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XHJcbiAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIGhhbmRsZXIubGVuZ3RoKSB7XHJcbiAgICAgIGlmIChhbCA+IDMpIHtcclxuICAgICAgICBhcmdzID0gbmV3IEFycmF5KGFsIC0gMSk7XHJcbiAgICAgICAgZm9yIChqID0gMTsgaiA8IGFsOyBqKyspIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBoYW5kbGVyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHRoaXMuZXZlbnQgPSB0eXBlO1xyXG4gICAgICAgIHN3aXRjaCAoYWwpIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXJbaV0uY2FsbCh0aGlzKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXJbaV0uY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgIHByb21pc2VzLnB1c2goaGFuZGxlcltpXS5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyW2ldLmFwcGx5KHRoaXMsIGFyZ3MpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoIXRoaXMuX2FsbCAmJiB0eXBlID09PSAnZXJyb3InKSB7XHJcbiAgICAgIGlmIChhcmd1bWVudHNbMV0gaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChhcmd1bWVudHNbMV0pOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlVuY2F1Z2h0LCB1bnNwZWNpZmllZCAnZXJyb3InIGV2ZW50LlwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XHJcbiAgfTtcclxuXHJcbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XHJcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgdGhpcy5vbkFueSh0eXBlKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ29uIG9ubHkgYWNjZXB0cyBpbnN0YW5jZXMgb2YgRnVuY3Rpb24nKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XHJcblxyXG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PSBcIm5ld0xpc3RlbmVyc1wiISBCZWZvcmVcclxuICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJzXCIuXHJcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xyXG5cclxuICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XHJcbiAgICAgIGdyb3dMaXN0ZW5lclRyZWUuY2FsbCh0aGlzLCB0eXBlLCBsaXN0ZW5lcik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB7XHJcbiAgICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxyXG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2V2ZW50c1t0eXBlXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIC8vIENoYW5nZSB0byBhcnJheS5cclxuICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxyXG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XHJcblxyXG4gICAgICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgJiZcclxuICAgICAgICB0aGlzLl9ldmVudHMubWF4TGlzdGVuZXJzID4gMCAmJlxyXG4gICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiB0aGlzLl9ldmVudHMubWF4TGlzdGVuZXJzXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xyXG4gICAgICAgIGxvZ1Bvc3NpYmxlTWVtb3J5TGVhay5jYWxsKHRoaXMsIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgsIHR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbkFueSA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignb25Bbnkgb25seSBhY2NlcHRzIGluc3RhbmNlcyBvZiBGdW5jdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5fYWxsKSB7XHJcbiAgICAgIHRoaXMuX2FsbCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCB0aGUgZnVuY3Rpb24gdG8gdGhlIGV2ZW50IGxpc3RlbmVyIGNvbGxlY3Rpb24uXHJcbiAgICB0aGlzLl9hbGwucHVzaChmbik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcclxuXHJcbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbW92ZUxpc3RlbmVyIG9ubHkgdGFrZXMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGhhbmRsZXJzLGxlYWZzPVtdO1xyXG5cclxuICAgIGlmKHRoaXMud2lsZGNhcmQpIHtcclxuICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XHJcbiAgICAgIGxlYWZzID0gc2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcywgbnVsbCwgbnMsIHRoaXMubGlzdGVuZXJUcmVlLCAwKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyBkb2VzIG5vdCB1c2UgbGlzdGVuZXJzKCksIHNvIG5vIHNpZGUgZWZmZWN0IG9mIGNyZWF0aW5nIF9ldmVudHNbdHlwZV1cclxuICAgICAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pIHJldHVybiB0aGlzO1xyXG4gICAgICBoYW5kbGVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcclxuICAgICAgbGVhZnMucHVzaCh7X2xpc3RlbmVyczpoYW5kbGVyc30pO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGlMZWFmPTA7IGlMZWFmPGxlYWZzLmxlbmd0aDsgaUxlYWYrKykge1xyXG4gICAgICB2YXIgbGVhZiA9IGxlYWZzW2lMZWFmXTtcclxuICAgICAgaGFuZGxlcnMgPSBsZWFmLl9saXN0ZW5lcnM7XHJcbiAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xyXG5cclxuICAgICAgICB2YXIgcG9zaXRpb24gPSAtMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaGFuZGxlcnNbaV0gPT09IGxpc3RlbmVyIHx8XHJcbiAgICAgICAgICAgIChoYW5kbGVyc1tpXS5saXN0ZW5lciAmJiBoYW5kbGVyc1tpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHx8XHJcbiAgICAgICAgICAgIChoYW5kbGVyc1tpXS5fb3JpZ2luICYmIGhhbmRsZXJzW2ldLl9vcmlnaW4gPT09IGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLndpbGRjYXJkKSB7XHJcbiAgICAgICAgICBsZWFmLl9saXN0ZW5lcnMuc3BsaWNlKHBvc2l0aW9uLCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0uc3BsaWNlKHBvc2l0aW9uLCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChoYW5kbGVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIGlmKHRoaXMud2lsZGNhcmQpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGxlYWYuX2xpc3RlbmVycztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIiwgdHlwZSwgbGlzdGVuZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChoYW5kbGVycyA9PT0gbGlzdGVuZXIgfHxcclxuICAgICAgICAoaGFuZGxlcnMubGlzdGVuZXIgJiYgaGFuZGxlcnMubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB8fFxyXG4gICAgICAgIChoYW5kbGVycy5fb3JpZ2luICYmIGhhbmRsZXJzLl9vcmlnaW4gPT09IGxpc3RlbmVyKSkge1xyXG4gICAgICAgIGlmKHRoaXMud2lsZGNhcmQpIHtcclxuICAgICAgICAgIGRlbGV0ZSBsZWFmLl9saXN0ZW5lcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsIHR5cGUsIGxpc3RlbmVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5R2FyYmFnZUNvbGxlY3Qocm9vdCkge1xyXG4gICAgICBpZiAocm9vdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocm9vdCk7XHJcbiAgICAgIGZvciAodmFyIGkgaW4ga2V5cykge1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xyXG4gICAgICAgIHZhciBvYmogPSByb290W2tleV07XHJcbiAgICAgICAgaWYgKChvYmogaW5zdGFuY2VvZiBGdW5jdGlvbikgfHwgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHx8IChvYmogPT09IG51bGwpKVxyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgcmVjdXJzaXZlbHlHYXJiYWdlQ29sbGVjdChyb290W2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIGRlbGV0ZSByb290W2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZWN1cnNpdmVseUdhcmJhZ2VDb2xsZWN0KHRoaXMubGlzdGVuZXJUcmVlKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZkFueSA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICB2YXIgaSA9IDAsIGwgPSAwLCBmbnM7XHJcbiAgICBpZiAoZm4gJiYgdGhpcy5fYWxsICYmIHRoaXMuX2FsbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZucyA9IHRoaXMuX2FsbDtcclxuICAgICAgZm9yKGkgPSAwLCBsID0gZm5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmKGZuID09PSBmbnNbaV0pIHtcclxuICAgICAgICAgIGZucy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICB0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lckFueVwiLCBmbik7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZucyA9IHRoaXMuX2FsbDtcclxuICAgICAgZm9yKGkgPSAwLCBsID0gZm5zLmxlbmd0aDsgaSA8IGw7IGkrKylcclxuICAgICAgICB0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lckFueVwiLCBmbnNbaV0pO1xyXG4gICAgICB0aGlzLl9hbGwgPSBbXTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZjtcclxuXHJcbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAhdGhpcy5fZXZlbnRzIHx8IGluaXQuY2FsbCh0aGlzKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMud2lsZGNhcmQpIHtcclxuICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XHJcbiAgICAgIHZhciBsZWFmcyA9IHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIG51bGwsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XHJcblxyXG4gICAgICBmb3IgKHZhciBpTGVhZj0wOyBpTGVhZjxsZWFmcy5sZW5ndGg7IGlMZWFmKyspIHtcclxuICAgICAgICB2YXIgbGVhZiA9IGxlYWZzW2lMZWFmXTtcclxuICAgICAgICBsZWFmLl9saXN0ZW5lcnMgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHMpIHtcclxuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgaWYgKHRoaXMud2lsZGNhcmQpIHtcclxuICAgICAgdmFyIGhhbmRsZXJzID0gW107XHJcbiAgICAgIHZhciBucyA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUuc3BsaXQodGhpcy5kZWxpbWl0ZXIpIDogdHlwZS5zbGljZSgpO1xyXG4gICAgICBzZWFyY2hMaXN0ZW5lclRyZWUuY2FsbCh0aGlzLCBoYW5kbGVycywgbnMsIHRoaXMubGlzdGVuZXJUcmVlLCAwKTtcclxuICAgICAgcmV0dXJuIGhhbmRsZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XHJcblxyXG4gICAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFtdO1xyXG4gICAgaWYgKCFpc0FycmF5KHRoaXMuX2V2ZW50c1t0eXBlXSkpIHtcclxuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fZXZlbnRzW3R5cGVdO1xyXG4gIH07XHJcblxyXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgIHJldHVybiB0aGlzLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7XHJcbiAgfTtcclxuXHJcbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnNBbnkgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICBpZih0aGlzLl9hbGwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2FsbDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gIH07XHJcblxyXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBFdmVudEVtaXR0ZXI7XHJcbiAgICB9KTtcclxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgLy8gQ29tbW9uSlNcclxuICAgIG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIC8vIEJyb3dzZXIgZ2xvYmFsLlxyXG4gICAgd2luZG93LkV2ZW50RW1pdHRlcjIgPSBFdmVudEVtaXR0ZXI7XHJcbiAgfVxyXG59KCk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vZXZlbnRlbWl0dGVyMi9saWIvZXZlbnRlbWl0dGVyMi5qc1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogRmlsZVNhdmVyLmpzXG4gKiBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cbiAqIDEuMS4yMDE1MDcxNlxuICpcbiAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb21cbiAqIExpY2Vuc2U6IFgxMS9NSVRcbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4gKi9cblxuLypnbG9iYWwgc2VsZiAqL1xuLypqc2xpbnQgYml0d2lzZTogdHJ1ZSwgaW5kZW50OiA0LCBsYXhicmVhazogdHJ1ZSwgbGF4Y29tbWE6IHRydWUsIHNtYXJ0dGFiczogdHJ1ZSwgcGx1c3BsdXM6IHRydWUgKi9cblxuLyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9GaWxlU2F2ZXIuanMgKi9cblxudmFyIHNhdmVBcyA9IHNhdmVBcyB8fCAoZnVuY3Rpb24odmlldykge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0Ly8gSUUgPDEwIGlzIGV4cGxpY2l0bHkgdW5zdXBwb3J0ZWRcblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgWzEtOV1cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyXG5cdFx0ICBkb2MgPSB2aWV3LmRvY3VtZW50XG5cdFx0ICAvLyBvbmx5IGdldCBVUkwgd2hlbiBuZWNlc3NhcnkgaW4gY2FzZSBCbG9iLmpzIGhhc24ndCBvdmVycmlkZGVuIGl0IHlldFxuXHRcdCwgZ2V0X1VSTCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XG5cdFx0fVxuXHRcdCwgc2F2ZV9saW5rID0gZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiwgXCJhXCIpXG5cdFx0LCBjYW5fdXNlX3NhdmVfbGluayA9IFwiZG93bmxvYWRcIiBpbiBzYXZlX2xpbmtcblx0XHQsIGNsaWNrID0gZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0dmFyIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKTtcblx0XHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdFx0fVxuXHRcdCwgd2Via2l0X3JlcV9mcyA9IHZpZXcud2Via2l0UmVxdWVzdEZpbGVTeXN0ZW1cblx0XHQsIHJlcV9mcyA9IHZpZXcucmVxdWVzdEZpbGVTeXN0ZW0gfHwgd2Via2l0X3JlcV9mcyB8fCB2aWV3Lm1velJlcXVlc3RGaWxlU3lzdGVtXG5cdFx0LCB0aHJvd19vdXRzaWRlID0gZnVuY3Rpb24oZXgpIHtcblx0XHRcdCh2aWV3LnNldEltbWVkaWF0ZSB8fCB2aWV3LnNldFRpbWVvdXQpKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aHJvdyBleDtcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0XHQsIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiXG5cdFx0LCBmc19taW5fc2l6ZSA9IDBcblx0XHQvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM3NTI5NyNjNyBhbmRcblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9GaWxlU2F2ZXIuanMvY29tbWl0LzQ4NTkzMGEjY29tbWl0Y29tbWVudC04NzY4MDQ3XG5cdFx0Ly8gZm9yIHRoZSByZWFzb25pbmcgYmVoaW5kIHRoZSB0aW1lb3V0IGFuZCByZXZvY2F0aW9uIGZsb3dcblx0XHQsIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCA9IDUwMCAvLyBpbiBtc1xuXHRcdCwgcmV2b2tlID0gZnVuY3Rpb24oZmlsZSkge1xuXHRcdFx0dmFyIHJldm9rZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSB7IC8vIGZpbGUgaXMgYW4gb2JqZWN0IFVSTFxuXHRcdFx0XHRcdGdldF9VUkwoKS5yZXZva2VPYmplY3RVUkwoZmlsZSk7XG5cdFx0XHRcdH0gZWxzZSB7IC8vIGZpbGUgaXMgYSBGaWxlXG5cdFx0XHRcdFx0ZmlsZS5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGlmICh2aWV3LmNocm9tZSkge1xuXHRcdFx0XHRyZXZva2VyKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZXRUaW1lb3V0KHJldm9rZXIsIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdCwgZGlzcGF0Y2ggPSBmdW5jdGlvbihmaWxlc2F2ZXIsIGV2ZW50X3R5cGVzLCBldmVudCkge1xuXHRcdFx0ZXZlbnRfdHlwZXMgPSBbXS5jb25jYXQoZXZlbnRfdHlwZXMpO1xuXHRcdFx0dmFyIGkgPSBldmVudF90eXBlcy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoaS0tKSB7XG5cdFx0XHRcdHZhciBsaXN0ZW5lciA9IGZpbGVzYXZlcltcIm9uXCIgKyBldmVudF90eXBlc1tpXV07XG5cdFx0XHRcdGlmICh0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRsaXN0ZW5lci5jYWxsKGZpbGVzYXZlciwgZXZlbnQgfHwgZmlsZXNhdmVyKTtcblx0XHRcdFx0XHR9IGNhdGNoIChleCkge1xuXHRcdFx0XHRcdFx0dGhyb3dfb3V0c2lkZShleCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdCwgYXV0b19ib20gPSBmdW5jdGlvbihibG9iKSB7XG5cdFx0XHQvLyBwcmVwZW5kIEJPTSBmb3IgVVRGLTggWE1MIGFuZCB0ZXh0LyogdHlwZXMgKGluY2x1ZGluZyBIVE1MKVxuXHRcdFx0aWYgKC9eXFxzKig/OnRleHRcXC9cXFMqfGFwcGxpY2F0aW9uXFwveG1sfFxcUypcXC9cXFMqXFwreG1sKVxccyo7LipjaGFyc2V0XFxzKj1cXHMqdXRmLTgvaS50ZXN0KGJsb2IudHlwZSkpIHtcblx0XHRcdFx0cmV0dXJuIG5ldyBCbG9iKFtcIlxcdWZlZmZcIiwgYmxvYl0sIHt0eXBlOiBibG9iLnR5cGV9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBibG9iO1xuXHRcdH1cblx0XHQsIEZpbGVTYXZlciA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcblx0XHRcdH1cblx0XHRcdC8vIEZpcnN0IHRyeSBhLmRvd25sb2FkLCB0aGVuIHdlYiBmaWxlc3lzdGVtLCB0aGVuIG9iamVjdCBVUkxzXG5cdFx0XHR2YXJcblx0XHRcdFx0ICBmaWxlc2F2ZXIgPSB0aGlzXG5cdFx0XHRcdCwgdHlwZSA9IGJsb2IudHlwZVxuXHRcdFx0XHQsIGJsb2JfY2hhbmdlZCA9IGZhbHNlXG5cdFx0XHRcdCwgb2JqZWN0X3VybFxuXHRcdFx0XHQsIHRhcmdldF92aWV3XG5cdFx0XHRcdCwgZGlzcGF0Y2hfYWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZGlzcGF0Y2goZmlsZXNhdmVyLCBcIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgd3JpdGVlbmRcIi5zcGxpdChcIiBcIikpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIG9uIGFueSBmaWxlc3lzIGVycm9ycyByZXZlcnQgdG8gc2F2aW5nIHdpdGggb2JqZWN0IFVSTHNcblx0XHRcdFx0LCBmc19lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vIGRvbid0IGNyZWF0ZSBtb3JlIG9iamVjdCBVUkxzIHRoYW4gbmVlZGVkXG5cdFx0XHRcdFx0aWYgKGJsb2JfY2hhbmdlZCB8fCAhb2JqZWN0X3VybCkge1xuXHRcdFx0XHRcdFx0b2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0YXJnZXRfdmlldykge1xuXHRcdFx0XHRcdFx0dGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmw7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciBuZXdfdGFiID0gdmlldy5vcGVuKG9iamVjdF91cmwsIFwiX2JsYW5rXCIpO1xuXHRcdFx0XHRcdFx0aWYgKG5ld190YWIgPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzYWZhcmkgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHRcdFx0Ly9BcHBsZSBkbyBub3QgYWxsb3cgd2luZG93Lm9wZW4sIHNlZSBodHRwOi8vYml0Lmx5LzFrWmZmUklcblx0XHRcdFx0XHRcdFx0dmlldy5sb2NhdGlvbi5ocmVmID0gb2JqZWN0X3VybFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQsIGFib3J0YWJsZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoZmlsZXNhdmVyLnJlYWR5U3RhdGUgIT09IGZpbGVzYXZlci5ET05FKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHQsIGNyZWF0ZV9pZl9ub3RfZm91bmQgPSB7Y3JlYXRlOiB0cnVlLCBleGNsdXNpdmU6IGZhbHNlfVxuXHRcdFx0XHQsIHNsaWNlXG5cdFx0XHQ7XG5cdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXHRcdFx0aWYgKCFuYW1lKSB7XG5cdFx0XHRcdG5hbWUgPSBcImRvd25sb2FkXCI7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2FuX3VzZV9zYXZlX2xpbmspIHtcblx0XHRcdFx0b2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cdFx0XHRcdHNhdmVfbGluay5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0c2F2ZV9saW5rLmRvd25sb2FkID0gbmFtZTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRjbGljayhzYXZlX2xpbmspO1xuXHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Ly8gT2JqZWN0IGFuZCB3ZWIgZmlsZXN5c3RlbSBVUkxzIGhhdmUgYSBwcm9ibGVtIHNhdmluZyBpbiBHb29nbGUgQ2hyb21lIHdoZW5cblx0XHRcdC8vIHZpZXdlZCBpbiBhIHRhYiwgc28gSSBmb3JjZSBzYXZlIHdpdGggYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXG5cdFx0XHQvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD05MTE1OFxuXHRcdFx0Ly8gVXBkYXRlOiBHb29nbGUgZXJyYW50bHkgY2xvc2VkIDkxMTU4LCBJIHN1Ym1pdHRlZCBpdCBhZ2Fpbjpcblx0XHRcdC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zODk2NDJcblx0XHRcdGlmICh2aWV3LmNocm9tZSAmJiB0eXBlICYmIHR5cGUgIT09IGZvcmNlX3NhdmVhYmxlX3R5cGUpIHtcblx0XHRcdFx0c2xpY2UgPSBibG9iLnNsaWNlIHx8IGJsb2Iud2Via2l0U2xpY2U7XG5cdFx0XHRcdGJsb2IgPSBzbGljZS5jYWxsKGJsb2IsIDAsIGJsb2Iuc2l6ZSwgZm9yY2Vfc2F2ZWFibGVfdHlwZSk7XG5cdFx0XHRcdGJsb2JfY2hhbmdlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHQvLyBTaW5jZSBJIGNhbid0IGJlIHN1cmUgdGhhdCB0aGUgZ3Vlc3NlZCBtZWRpYSB0eXBlIHdpbGwgdHJpZ2dlciBhIGRvd25sb2FkXG5cdFx0XHQvLyBpbiBXZWJLaXQsIEkgYXBwZW5kIC5kb3dubG9hZCB0byB0aGUgZmlsZW5hbWUuXG5cdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjU0NDBcblx0XHRcdGlmICh3ZWJraXRfcmVxX2ZzICYmIG5hbWUgIT09IFwiZG93bmxvYWRcIikge1xuXHRcdFx0XHRuYW1lICs9IFwiLmRvd25sb2FkXCI7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSB8fCB3ZWJraXRfcmVxX2ZzKSB7XG5cdFx0XHRcdHRhcmdldF92aWV3ID0gdmlldztcblx0XHRcdH1cblx0XHRcdGlmICghcmVxX2ZzKSB7XG5cdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGZzX21pbl9zaXplICs9IGJsb2Iuc2l6ZTtcblx0XHRcdHJlcV9mcyh2aWV3LlRFTVBPUkFSWSwgZnNfbWluX3NpemUsIGFib3J0YWJsZShmdW5jdGlvbihmcykge1xuXHRcdFx0XHRmcy5yb290LmdldERpcmVjdG9yeShcInNhdmVkXCIsIGNyZWF0ZV9pZl9ub3RfZm91bmQsIGFib3J0YWJsZShmdW5jdGlvbihkaXIpIHtcblx0XHRcdFx0XHR2YXIgc2F2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0ZGlyLmdldEZpbGUobmFtZSwgY3JlYXRlX2lmX25vdF9mb3VuZCwgYWJvcnRhYmxlKGZ1bmN0aW9uKGZpbGUpIHtcblx0XHRcdFx0XHRcdFx0ZmlsZS5jcmVhdGVXcml0ZXIoYWJvcnRhYmxlKGZ1bmN0aW9uKHdyaXRlcikge1xuXHRcdFx0XHRcdFx0XHRcdHdyaXRlci5vbndyaXRlZW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBmaWxlLnRvVVJMKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGlzcGF0Y2goZmlsZXNhdmVyLCBcIndyaXRlZW5kXCIsIGV2ZW50KTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldm9rZShmaWxlKTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHdyaXRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgZXJyb3IgPSB3cml0ZXIuZXJyb3I7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyb3IuY29kZSAhPT0gZXJyb3IuQUJPUlRfRVJSKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgYWJvcnRcIi5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0d3JpdGVyW1wib25cIiArIGV2ZW50XSA9IGZpbGVzYXZlcltcIm9uXCIgKyBldmVudF07XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0d3JpdGVyLndyaXRlKGJsb2IpO1xuXHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0d3JpdGVyLmFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuV1JJVElORztcblx0XHRcdFx0XHRcdFx0fSksIGZzX2Vycm9yKTtcblx0XHRcdFx0XHRcdH0pLCBmc19lcnJvcik7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRkaXIuZ2V0RmlsZShuYW1lLCB7Y3JlYXRlOiBmYWxzZX0sIGFib3J0YWJsZShmdW5jdGlvbihmaWxlKSB7XG5cdFx0XHRcdFx0XHQvLyBkZWxldGUgZmlsZSBpZiBpdCBhbHJlYWR5IGV4aXN0c1xuXHRcdFx0XHRcdFx0ZmlsZS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdHNhdmUoKTtcblx0XHRcdFx0XHR9KSwgYWJvcnRhYmxlKGZ1bmN0aW9uKGV4KSB7XG5cdFx0XHRcdFx0XHRpZiAoZXguY29kZSA9PT0gZXguTk9UX0ZPVU5EX0VSUikge1xuXHRcdFx0XHRcdFx0XHRzYXZlKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRmc19lcnJvcigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0fSksIGZzX2Vycm9yKTtcblx0XHRcdH0pLCBmc19lcnJvcik7XG5cdFx0fVxuXHRcdCwgRlNfcHJvdG8gPSBGaWxlU2F2ZXIucHJvdG90eXBlXG5cdFx0LCBzYXZlQXMgPSBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0cmV0dXJuIG5ldyBGaWxlU2F2ZXIoYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pO1xuXHRcdH1cblx0O1xuXHQvLyBJRSAxMCsgKG5hdGl2ZSBzYXZlQXMpXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihibG9iLCBuYW1lIHx8IFwiZG93bmxvYWRcIik7XG5cdFx0fTtcblx0fVxuXG5cdEZTX3Byb3RvLmFib3J0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGZpbGVzYXZlciA9IHRoaXM7XG5cdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwiYWJvcnRcIik7XG5cdH07XG5cdEZTX3Byb3RvLnJlYWR5U3RhdGUgPSBGU19wcm90by5JTklUID0gMDtcblx0RlNfcHJvdG8uV1JJVElORyA9IDE7XG5cdEZTX3Byb3RvLkRPTkUgPSAyO1xuXG5cdEZTX3Byb3RvLmVycm9yID1cblx0RlNfcHJvdG8ub253cml0ZXN0YXJ0ID1cblx0RlNfcHJvdG8ub25wcm9ncmVzcyA9XG5cdEZTX3Byb3RvLm9ud3JpdGUgPVxuXHRGU19wcm90by5vbmFib3J0ID1cblx0RlNfcHJvdG8ub25lcnJvciA9XG5cdEZTX3Byb3RvLm9ud3JpdGVlbmQgPVxuXHRcdG51bGw7XG5cblx0cmV0dXJuIHNhdmVBcztcbn0oXG5cdCAgIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGZcblx0fHwgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dcblx0fHwgdGhpcy5jb250ZW50XG4pKTtcbi8vIGBzZWxmYCBpcyB1bmRlZmluZWQgaW4gRmlyZWZveCBmb3IgQW5kcm9pZCBjb250ZW50IHNjcmlwdCBjb250ZXh0XG4vLyB3aGlsZSBgdGhpc2AgaXMgbnNJQ29udGVudEZyYW1lTWVzc2FnZU1hbmFnZXJcbi8vIHdpdGggYW4gYXR0cmlidXRlIGBjb250ZW50YCB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSB3aW5kb3dcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgbW9kdWxlLmV4cG9ydHMuc2F2ZUFzID0gc2F2ZUFzO1xufSBlbHNlIGlmICgodHlwZW9mIGRlZmluZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkZWZpbmUgIT09IG51bGwpICYmIChkZWZpbmUuYW1kICE9IG51bGwpKSB7XG4gIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNhdmVBcztcbiAgfSk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2ZpbGVzYXZlci5qcy9GaWxlU2F2ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi93ZWJwYWNrL2J1aWxkaW4vYW1kLWRlZmluZS5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi93ZWJwYWNrL2J1aWxkaW4vYW1kLW9wdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIVxuICogVW5pZHJhZ2dlciB2Mi4zLjBcbiAqIERyYWdnYWJsZSBiYXNlIGNsYXNzXG4gKiBNSVQgbGljZW5zZVxuICovXG5cbi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHVudXNlZDogdHJ1ZSwgdW5kZWY6IHRydWUsIHN0cmljdDogdHJ1ZSAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICAvKmpzaGludCBzdHJpY3Q6IGZhbHNlICovIC8qZ2xvYmFscyBkZWZpbmUsIG1vZHVsZSwgcmVxdWlyZSAqL1xuXG4gIGlmICggdHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XG4gICAgLy8gQU1EXG4gICAgZGVmaW5lKCBbXG4gICAgICAndW5pcG9pbnRlci91bmlwb2ludGVyJ1xuICAgIF0sIGZ1bmN0aW9uKCBVbmlwb2ludGVyICkge1xuICAgICAgcmV0dXJuIGZhY3RvcnkoIHdpbmRvdywgVW5pcG9pbnRlciApO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgcmVxdWlyZSgndW5pcG9pbnRlcicpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5VbmlkcmFnZ2VyID0gZmFjdG9yeShcbiAgICAgIHdpbmRvdyxcbiAgICAgIHdpbmRvdy5Vbmlwb2ludGVyXG4gICAgKTtcbiAgfVxuXG59KCB3aW5kb3csIGZ1bmN0aW9uIGZhY3RvcnkoIHdpbmRvdywgVW5pcG9pbnRlciApIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBVbmlkcmFnZ2VyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIFVuaWRyYWdnZXIoKSB7fVxuXG4vLyBpbmhlcml0IFVuaXBvaW50ZXIgJiBFdkVtaXR0ZXJcbnZhciBwcm90byA9IFVuaWRyYWdnZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVW5pcG9pbnRlci5wcm90b3R5cGUgKTtcblxuLy8gLS0tLS0gYmluZCBzdGFydCAtLS0tLSAvL1xuXG5wcm90by5iaW5kSGFuZGxlcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9iaW5kSGFuZGxlcyggdHJ1ZSApO1xufTtcblxucHJvdG8udW5iaW5kSGFuZGxlcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9iaW5kSGFuZGxlcyggZmFsc2UgKTtcbn07XG5cbi8qKlxuICogQWRkIG9yIHJlbW92ZSBzdGFydCBldmVudFxuICogQHBhcmFtIHtCb29sZWFufSBpc0FkZFxuICovXG5wcm90by5fYmluZEhhbmRsZXMgPSBmdW5jdGlvbiggaXNBZGQgKSB7XG4gIC8vIG11bmdlIGlzQWRkLCBkZWZhdWx0IHRvIHRydWVcbiAgaXNBZGQgPSBpc0FkZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGlzQWRkO1xuICAvLyBiaW5kIGVhY2ggaGFuZGxlXG4gIHZhciBiaW5kTWV0aG9kID0gaXNBZGQgPyAnYWRkRXZlbnRMaXN0ZW5lcicgOiAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG4gIHZhciB0b3VjaEFjdGlvbiA9IGlzQWRkID8gdGhpcy5fdG91Y2hBY3Rpb25WYWx1ZSA6ICcnO1xuICBmb3IgKCB2YXIgaT0wOyBpIDwgdGhpcy5oYW5kbGVzLmxlbmd0aDsgaSsrICkge1xuICAgIHZhciBoYW5kbGUgPSB0aGlzLmhhbmRsZXNbaV07XG4gICAgdGhpcy5fYmluZFN0YXJ0RXZlbnQoIGhhbmRsZSwgaXNBZGQgKTtcbiAgICBoYW5kbGVbIGJpbmRNZXRob2QgXSggJ2NsaWNrJywgdGhpcyApO1xuICAgIC8vIHRvdWNoLWFjdGlvbjogbm9uZSB0byBvdmVycmlkZSBicm93c2VyIHRvdWNoIGdlc3R1cmVzLiBtZXRhZml6enkvZmxpY2tpdHkjNTQwXG4gICAgaWYgKCB3aW5kb3cuUG9pbnRlckV2ZW50ICkge1xuICAgICAgaGFuZGxlLnN0eWxlLnRvdWNoQWN0aW9uID0gdG91Y2hBY3Rpb247XG4gICAgfVxuICB9XG59O1xuXG4vLyBwcm90b3R5cGUgc28gaXQgY2FuIGJlIG92ZXJ3cml0ZWFibGUgYnkgRmxpY2tpdHlcbnByb3RvLl90b3VjaEFjdGlvblZhbHVlID0gJ25vbmUnO1xuXG4vLyAtLS0tLSBzdGFydCBldmVudCAtLS0tLSAvL1xuXG4vKipcbiAqIHBvaW50ZXIgc3RhcnRcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gKiBAcGFyYW0ge0V2ZW50IG9yIFRvdWNofSBwb2ludGVyXG4gKi9cbnByb3RvLnBvaW50ZXJEb3duID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICB2YXIgaXNPa2F5ID0gdGhpcy5va2F5UG9pbnRlckRvd24oIGV2ZW50ICk7XG4gIGlmICggIWlzT2theSApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdHJhY2sgc3RhcnQgZXZlbnQgcG9zaXRpb25cbiAgdGhpcy5wb2ludGVyRG93blBvaW50ZXIgPSBwb2ludGVyO1xuXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHRoaXMucG9pbnRlckRvd25CbHVyKCk7XG4gIC8vIGJpbmQgbW92ZSBhbmQgZW5kIGV2ZW50c1xuICB0aGlzLl9iaW5kUG9zdFN0YXJ0RXZlbnRzKCBldmVudCApO1xuICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJEb3duJywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG4vLyBub2RlcyB0aGF0IGhhdmUgdGV4dCBmaWVsZHNcbnZhciBjdXJzb3JOb2RlcyA9IHtcbiAgVEVYVEFSRUE6IHRydWUsXG4gIElOUFVUOiB0cnVlLFxuICBTRUxFQ1Q6IHRydWUsXG4gIE9QVElPTjogdHJ1ZSxcbn07XG5cbi8vIGlucHV0IHR5cGVzIHRoYXQgZG8gbm90IGhhdmUgdGV4dCBmaWVsZHNcbnZhciBjbGlja1R5cGVzID0ge1xuICByYWRpbzogdHJ1ZSxcbiAgY2hlY2tib3g6IHRydWUsXG4gIGJ1dHRvbjogdHJ1ZSxcbiAgc3VibWl0OiB0cnVlLFxuICBpbWFnZTogdHJ1ZSxcbiAgZmlsZTogdHJ1ZSxcbn07XG5cbi8vIGRpc21pc3MgaW5wdXRzIHdpdGggdGV4dCBmaWVsZHMuIGZsaWNraXR5IzQwMywgZmxpY2tpdHkjNDA0XG5wcm90by5va2F5UG9pbnRlckRvd24gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHZhciBpc0N1cnNvck5vZGUgPSBjdXJzb3JOb2Rlc1sgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lIF07XG4gIHZhciBpc0NsaWNrVHlwZSA9IGNsaWNrVHlwZXNbIGV2ZW50LnRhcmdldC50eXBlIF07XG4gIHZhciBpc09rYXkgPSAhaXNDdXJzb3JOb2RlIHx8IGlzQ2xpY2tUeXBlO1xuICBpZiAoICFpc09rYXkgKSB7XG4gICAgdGhpcy5fcG9pbnRlclJlc2V0KCk7XG4gIH1cbiAgcmV0dXJuIGlzT2theTtcbn07XG5cbi8vIGtsdWRnZSB0byBibHVyIHByZXZpb3VzbHkgZm9jdXNlZCBpbnB1dFxucHJvdG8ucG9pbnRlckRvd25CbHVyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBmb2N1c2VkID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgLy8gZG8gbm90IGJsdXIgYm9keSBmb3IgSUUxMCwgbWV0YWZpenp5L2ZsaWNraXR5IzExN1xuICB2YXIgY2FuQmx1ciA9IGZvY3VzZWQgJiYgZm9jdXNlZC5ibHVyICYmIGZvY3VzZWQgIT0gZG9jdW1lbnQuYm9keTtcbiAgaWYgKCBjYW5CbHVyICkge1xuICAgIGZvY3VzZWQuYmx1cigpO1xuICB9XG59O1xuXG4vLyAtLS0tLSBtb3ZlIGV2ZW50IC0tLS0tIC8vXG5cbi8qKlxuICogZHJhZyBtb3ZlXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICogQHBhcmFtIHtFdmVudCBvciBUb3VjaH0gcG9pbnRlclxuICovXG5wcm90by5wb2ludGVyTW92ZSA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdmFyIG1vdmVWZWN0b3IgPSB0aGlzLl9kcmFnUG9pbnRlck1vdmUoIGV2ZW50LCBwb2ludGVyICk7XG4gIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlck1vdmUnLCBbIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yIF0gKTtcbiAgdGhpcy5fZHJhZ01vdmUoIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yICk7XG59O1xuXG4vLyBiYXNlIHBvaW50ZXIgbW92ZSBsb2dpY1xucHJvdG8uX2RyYWdQb2ludGVyTW92ZSA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdmFyIG1vdmVWZWN0b3IgPSB7XG4gICAgeDogcG9pbnRlci5wYWdlWCAtIHRoaXMucG9pbnRlckRvd25Qb2ludGVyLnBhZ2VYLFxuICAgIHk6IHBvaW50ZXIucGFnZVkgLSB0aGlzLnBvaW50ZXJEb3duUG9pbnRlci5wYWdlWVxuICB9O1xuICAvLyBzdGFydCBkcmFnIGlmIHBvaW50ZXIgaGFzIG1vdmVkIGZhciBlbm91Z2ggdG8gc3RhcnQgZHJhZ1xuICBpZiAoICF0aGlzLmlzRHJhZ2dpbmcgJiYgdGhpcy5oYXNEcmFnU3RhcnRlZCggbW92ZVZlY3RvciApICkge1xuICAgIHRoaXMuX2RyYWdTdGFydCggZXZlbnQsIHBvaW50ZXIgKTtcbiAgfVxuICByZXR1cm4gbW92ZVZlY3Rvcjtcbn07XG5cbi8vIGNvbmRpdGlvbiBpZiBwb2ludGVyIGhhcyBtb3ZlZCBmYXIgZW5vdWdoIHRvIHN0YXJ0IGRyYWdcbnByb3RvLmhhc0RyYWdTdGFydGVkID0gZnVuY3Rpb24oIG1vdmVWZWN0b3IgKSB7XG4gIHJldHVybiBNYXRoLmFicyggbW92ZVZlY3Rvci54ICkgPiAzIHx8IE1hdGguYWJzKCBtb3ZlVmVjdG9yLnkgKSA+IDM7XG59O1xuXG4vLyAtLS0tLSBlbmQgZXZlbnQgLS0tLS0gLy9cblxuLyoqXG4gKiBwb2ludGVyIHVwXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICogQHBhcmFtIHtFdmVudCBvciBUb3VjaH0gcG9pbnRlclxuICovXG5wcm90by5wb2ludGVyVXAgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlclVwJywgWyBldmVudCwgcG9pbnRlciBdICk7XG4gIHRoaXMuX2RyYWdQb2ludGVyVXAoIGV2ZW50LCBwb2ludGVyICk7XG59O1xuXG5wcm90by5fZHJhZ1BvaW50ZXJVcCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgaWYgKCB0aGlzLmlzRHJhZ2dpbmcgKSB7XG4gICAgdGhpcy5fZHJhZ0VuZCggZXZlbnQsIHBvaW50ZXIgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBwb2ludGVyIGRpZG4ndCBtb3ZlIGVub3VnaCBmb3IgZHJhZyB0byBzdGFydFxuICAgIHRoaXMuX3N0YXRpY0NsaWNrKCBldmVudCwgcG9pbnRlciApO1xuICB9XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBkcmFnIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8vIGRyYWdTdGFydFxucHJvdG8uX2RyYWdTdGFydCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcbiAgLy8gcHJldmVudCBjbGlja3NcbiAgdGhpcy5pc1ByZXZlbnRpbmdDbGlja3MgPSB0cnVlO1xuICB0aGlzLmRyYWdTdGFydCggZXZlbnQsIHBvaW50ZXIgKTtcbn07XG5cbnByb3RvLmRyYWdTdGFydCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdGhpcy5lbWl0RXZlbnQoICdkcmFnU3RhcnQnLCBbIGV2ZW50LCBwb2ludGVyIF0gKTtcbn07XG5cbi8vIGRyYWdNb3ZlXG5wcm90by5fZHJhZ01vdmUgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgKSB7XG4gIC8vIGRvIG5vdCBkcmFnIGlmIG5vdCBkcmFnZ2luZyB5ZXRcbiAgaWYgKCAhdGhpcy5pc0RyYWdnaW5nICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuZHJhZ01vdmUoIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yICk7XG59O1xuXG5wcm90by5kcmFnTW92ZSA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciwgbW92ZVZlY3RvciApIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgdGhpcy5lbWl0RXZlbnQoICdkcmFnTW92ZScsIFsgZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgXSApO1xufTtcblxuLy8gZHJhZ0VuZFxucHJvdG8uX2RyYWdFbmQgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIC8vIHNldCBmbGFnc1xuICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgLy8gcmUtZW5hYmxlIGNsaWNraW5nIGFzeW5jXG4gIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSB0aGlzLmlzUHJldmVudGluZ0NsaWNrcztcbiAgfS5iaW5kKCB0aGlzICkgKTtcblxuICB0aGlzLmRyYWdFbmQoIGV2ZW50LCBwb2ludGVyICk7XG59O1xuXG5wcm90by5kcmFnRW5kID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICB0aGlzLmVtaXRFdmVudCggJ2RyYWdFbmQnLCBbIGV2ZW50LCBwb2ludGVyIF0gKTtcbn07XG5cbi8vIC0tLS0tIG9uY2xpY2sgLS0tLS0gLy9cblxuLy8gaGFuZGxlIGFsbCBjbGlja3MgYW5kIHByZXZlbnQgY2xpY2tzIHdoZW4gZHJhZ2dpbmdcbnByb3RvLm9uY2xpY2sgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIGlmICggdGhpcy5pc1ByZXZlbnRpbmdDbGlja3MgKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxufTtcblxuLy8gLS0tLS0gc3RhdGljQ2xpY2sgLS0tLS0gLy9cblxuLy8gdHJpZ2dlcmVkIGFmdGVyIHBvaW50ZXIgZG93biAmIHVwIHdpdGggbm8vdGlueSBtb3ZlbWVudFxucHJvdG8uX3N0YXRpY0NsaWNrID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICAvLyBpZ25vcmUgZW11bGF0ZWQgbW91c2UgdXAgY2xpY2tzXG4gIGlmICggdGhpcy5pc0lnbm9yaW5nTW91c2VVcCAmJiBldmVudC50eXBlID09ICdtb3VzZXVwJyApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLnN0YXRpY0NsaWNrKCBldmVudCwgcG9pbnRlciApO1xuXG4gIC8vIHNldCBmbGFnIGZvciBlbXVsYXRlZCBjbGlja3MgMzAwbXMgYWZ0ZXIgdG91Y2hlbmRcbiAgaWYgKCBldmVudC50eXBlICE9ICdtb3VzZXVwJyApIHtcbiAgICB0aGlzLmlzSWdub3JpbmdNb3VzZVVwID0gdHJ1ZTtcbiAgICAvLyByZXNldCBmbGFnIGFmdGVyIDMwMG1zXG4gICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgdGhpcy5pc0lnbm9yaW5nTW91c2VVcDtcbiAgICB9LmJpbmQoIHRoaXMgKSwgNDAwICk7XG4gIH1cbn07XG5cbnByb3RvLnN0YXRpY0NsaWNrID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICB0aGlzLmVtaXRFdmVudCggJ3N0YXRpY0NsaWNrJywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG4vLyAtLS0tLSB1dGlscyAtLS0tLSAvL1xuXG5VbmlkcmFnZ2VyLmdldFBvaW50ZXJQb2ludCA9IFVuaXBvaW50ZXIuZ2V0UG9pbnRlclBvaW50O1xuXG4vLyAtLS0tLSAgLS0tLS0gLy9cblxucmV0dXJuIFVuaWRyYWdnZXI7XG5cbn0pKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdW5pZHJhZ2dlci91bmlkcmFnZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiFcbiAqIFVuaXBvaW50ZXIgdjIuMy4wXG4gKiBiYXNlIGNsYXNzIGZvciBkb2luZyBvbmUgdGhpbmcgd2l0aCBwb2ludGVyIGV2ZW50XG4gKiBNSVQgbGljZW5zZVxuICovXG5cbi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHVuZGVmOiB0cnVlLCB1bnVzZWQ6IHRydWUsIHN0cmljdDogdHJ1ZSAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqLyAvKmdsb2JhbCBkZWZpbmUsIG1vZHVsZSwgcmVxdWlyZSAqL1xuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuICAgIC8vIEFNRFxuICAgIGRlZmluZSggW1xuICAgICAgJ2V2LWVtaXR0ZXIvZXYtZW1pdHRlcidcbiAgICBdLCBmdW5jdGlvbiggRXZFbWl0dGVyICkge1xuICAgICAgcmV0dXJuIGZhY3RvcnkoIHdpbmRvdywgRXZFbWl0dGVyICk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICB3aW5kb3csXG4gICAgICByZXF1aXJlKCdldi1lbWl0dGVyJylcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LlVuaXBvaW50ZXIgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgd2luZG93LkV2RW1pdHRlclxuICAgICk7XG4gIH1cblxufSggd2luZG93LCBmdW5jdGlvbiBmYWN0b3J5KCB3aW5kb3csIEV2RW1pdHRlciApIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gVW5pcG9pbnRlcigpIHt9XG5cbi8vIGluaGVyaXQgRXZFbWl0dGVyXG52YXIgcHJvdG8gPSBVbmlwb2ludGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2RW1pdHRlci5wcm90b3R5cGUgKTtcblxucHJvdG8uYmluZFN0YXJ0RXZlbnQgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgdGhpcy5fYmluZFN0YXJ0RXZlbnQoIGVsZW0sIHRydWUgKTtcbn07XG5cbnByb3RvLnVuYmluZFN0YXJ0RXZlbnQgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgdGhpcy5fYmluZFN0YXJ0RXZlbnQoIGVsZW0sIGZhbHNlICk7XG59O1xuXG4vKipcbiAqIEFkZCBvciByZW1vdmUgc3RhcnQgZXZlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNBZGQgLSByZW1vdmUgaWYgZmFsc2V5XG4gKi9cbnByb3RvLl9iaW5kU3RhcnRFdmVudCA9IGZ1bmN0aW9uKCBlbGVtLCBpc0FkZCApIHtcbiAgLy8gbXVuZ2UgaXNBZGQsIGRlZmF1bHQgdG8gdHJ1ZVxuICBpc0FkZCA9IGlzQWRkID09PSB1bmRlZmluZWQgPyB0cnVlIDogaXNBZGQ7XG4gIHZhciBiaW5kTWV0aG9kID0gaXNBZGQgPyAnYWRkRXZlbnRMaXN0ZW5lcicgOiAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG5cbiAgLy8gZGVmYXVsdCB0byBtb3VzZSBldmVudHNcbiAgdmFyIHN0YXJ0RXZlbnQgPSAnbW91c2Vkb3duJztcbiAgaWYgKCB3aW5kb3cuUG9pbnRlckV2ZW50ICkge1xuICAgIC8vIFBvaW50ZXIgRXZlbnRzXG4gICAgc3RhcnRFdmVudCA9ICdwb2ludGVyZG93bic7XG4gIH0gZWxzZSBpZiAoICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyApIHtcbiAgICAvLyBUb3VjaCBFdmVudHMuIGlPUyBTYWZhcmlcbiAgICBzdGFydEV2ZW50ID0gJ3RvdWNoc3RhcnQnO1xuICB9XG4gIGVsZW1bIGJpbmRNZXRob2QgXSggc3RhcnRFdmVudCwgdGhpcyApO1xufTtcblxuLy8gdHJpZ2dlciBoYW5kbGVyIG1ldGhvZHMgZm9yIGV2ZW50c1xucHJvdG8uaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHZhciBtZXRob2QgPSAnb24nICsgZXZlbnQudHlwZTtcbiAgaWYgKCB0aGlzWyBtZXRob2QgXSApIHtcbiAgICB0aGlzWyBtZXRob2QgXSggZXZlbnQgKTtcbiAgfVxufTtcblxuLy8gcmV0dXJucyB0aGUgdG91Y2ggdGhhdCB3ZSdyZSBrZWVwaW5nIHRyYWNrIG9mXG5wcm90by5nZXRUb3VjaCA9IGZ1bmN0aW9uKCB0b3VjaGVzICkge1xuICBmb3IgKCB2YXIgaT0wOyBpIDwgdG91Y2hlcy5sZW5ndGg7IGkrKyApIHtcbiAgICB2YXIgdG91Y2ggPSB0b3VjaGVzW2ldO1xuICAgIGlmICggdG91Y2guaWRlbnRpZmllciA9PSB0aGlzLnBvaW50ZXJJZGVudGlmaWVyICkge1xuICAgICAgcmV0dXJuIHRvdWNoO1xuICAgIH1cbiAgfVxufTtcblxuLy8gLS0tLS0gc3RhcnQgZXZlbnQgLS0tLS0gLy9cblxucHJvdG8ub25tb3VzZWRvd24gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIC8vIGRpc21pc3MgY2xpY2tzIGZyb20gcmlnaHQgb3IgbWlkZGxlIGJ1dHRvbnNcbiAgdmFyIGJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjtcbiAgaWYgKCBidXR0b24gJiYgKCBidXR0b24gIT09IDAgJiYgYnV0dG9uICE9PSAxICkgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuX3BvaW50ZXJEb3duKCBldmVudCwgZXZlbnQgKTtcbn07XG5cbnByb3RvLm9udG91Y2hzdGFydCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy5fcG9pbnRlckRvd24oIGV2ZW50LCBldmVudC5jaGFuZ2VkVG91Y2hlc1swXSApO1xufTtcblxucHJvdG8ub25wb2ludGVyZG93biA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy5fcG9pbnRlckRvd24oIGV2ZW50LCBldmVudCApO1xufTtcblxuLyoqXG4gKiBwb2ludGVyIHN0YXJ0XG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICogQHBhcmFtIHtFdmVudCBvciBUb3VjaH0gcG9pbnRlclxuICovXG5wcm90by5fcG9pbnRlckRvd24gPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIC8vIGRpc21pc3MgcmlnaHQgY2xpY2sgYW5kIG90aGVyIHBvaW50ZXJzXG4gIC8vIGJ1dHRvbiA9IDAgaXMgb2theSwgMS00IG5vdFxuICBpZiAoIGV2ZW50LmJ1dHRvbiB8fCB0aGlzLmlzUG9pbnRlckRvd24gKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5pc1BvaW50ZXJEb3duID0gdHJ1ZTtcbiAgLy8gc2F2ZSBwb2ludGVyIGlkZW50aWZpZXIgdG8gbWF0Y2ggdXAgdG91Y2ggZXZlbnRzXG4gIHRoaXMucG9pbnRlcklkZW50aWZpZXIgPSBwb2ludGVyLnBvaW50ZXJJZCAhPT0gdW5kZWZpbmVkID9cbiAgICAvLyBwb2ludGVySWQgZm9yIHBvaW50ZXIgZXZlbnRzLCB0b3VjaC5pbmRlbnRpZmllciBmb3IgdG91Y2ggZXZlbnRzXG4gICAgcG9pbnRlci5wb2ludGVySWQgOiBwb2ludGVyLmlkZW50aWZpZXI7XG5cbiAgdGhpcy5wb2ludGVyRG93biggZXZlbnQsIHBvaW50ZXIgKTtcbn07XG5cbnByb3RvLnBvaW50ZXJEb3duID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICB0aGlzLl9iaW5kUG9zdFN0YXJ0RXZlbnRzKCBldmVudCApO1xuICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJEb3duJywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG4vLyBoYXNoIG9mIGV2ZW50cyB0byBiZSBib3VuZCBhZnRlciBzdGFydCBldmVudFxudmFyIHBvc3RTdGFydEV2ZW50cyA9IHtcbiAgbW91c2Vkb3duOiBbICdtb3VzZW1vdmUnLCAnbW91c2V1cCcgXSxcbiAgdG91Y2hzdGFydDogWyAndG91Y2htb3ZlJywgJ3RvdWNoZW5kJywgJ3RvdWNoY2FuY2VsJyBdLFxuICBwb2ludGVyZG93bjogWyAncG9pbnRlcm1vdmUnLCAncG9pbnRlcnVwJywgJ3BvaW50ZXJjYW5jZWwnIF0sXG59O1xuXG5wcm90by5fYmluZFBvc3RTdGFydEV2ZW50cyA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgaWYgKCAhZXZlbnQgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGdldCBwcm9wZXIgZXZlbnRzIHRvIG1hdGNoIHN0YXJ0IGV2ZW50XG4gIHZhciBldmVudHMgPSBwb3N0U3RhcnRFdmVudHNbIGV2ZW50LnR5cGUgXTtcbiAgLy8gYmluZCBldmVudHMgdG8gbm9kZVxuICBldmVudHMuZm9yRWFjaCggZnVuY3Rpb24oIGV2ZW50TmFtZSApIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCB0aGlzICk7XG4gIH0sIHRoaXMgKTtcbiAgLy8gc2F2ZSB0aGVzZSBhcmd1bWVudHNcbiAgdGhpcy5fYm91bmRQb2ludGVyRXZlbnRzID0gZXZlbnRzO1xufTtcblxucHJvdG8uX3VuYmluZFBvc3RTdGFydEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAvLyBjaGVjayBmb3IgX2JvdW5kRXZlbnRzLCBpbiBjYXNlIGRyYWdFbmQgdHJpZ2dlcmVkIHR3aWNlIChvbGQgSUU4IGJ1ZylcbiAgaWYgKCAhdGhpcy5fYm91bmRQb2ludGVyRXZlbnRzICkge1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLl9ib3VuZFBvaW50ZXJFdmVudHMuZm9yRWFjaCggZnVuY3Rpb24oIGV2ZW50TmFtZSApIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCB0aGlzICk7XG4gIH0sIHRoaXMgKTtcblxuICBkZWxldGUgdGhpcy5fYm91bmRQb2ludGVyRXZlbnRzO1xufTtcblxuLy8gLS0tLS0gbW92ZSBldmVudCAtLS0tLSAvL1xuXG5wcm90by5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy5fcG9pbnRlck1vdmUoIGV2ZW50LCBldmVudCApO1xufTtcblxucHJvdG8ub25wb2ludGVybW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgaWYgKCBldmVudC5wb2ludGVySWQgPT0gdGhpcy5wb2ludGVySWRlbnRpZmllciApIHtcbiAgICB0aGlzLl9wb2ludGVyTW92ZSggZXZlbnQsIGV2ZW50ICk7XG4gIH1cbn07XG5cbnByb3RvLm9udG91Y2htb3ZlID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB2YXIgdG91Y2ggPSB0aGlzLmdldFRvdWNoKCBldmVudC5jaGFuZ2VkVG91Y2hlcyApO1xuICBpZiAoIHRvdWNoICkge1xuICAgIHRoaXMuX3BvaW50ZXJNb3ZlKCBldmVudCwgdG91Y2ggKTtcbiAgfVxufTtcblxuLyoqXG4gKiBwb2ludGVyIG1vdmVcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gKiBAcGFyYW0ge0V2ZW50IG9yIFRvdWNofSBwb2ludGVyXG4gKiBAcHJpdmF0ZVxuICovXG5wcm90by5fcG9pbnRlck1vdmUgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIHRoaXMucG9pbnRlck1vdmUoIGV2ZW50LCBwb2ludGVyICk7XG59O1xuXG4vLyBwdWJsaWNcbnByb3RvLnBvaW50ZXJNb3ZlID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJNb3ZlJywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG4vLyAtLS0tLSBlbmQgZXZlbnQgLS0tLS0gLy9cblxuXG5wcm90by5vbm1vdXNldXAgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMuX3BvaW50ZXJVcCggZXZlbnQsIGV2ZW50ICk7XG59O1xuXG5wcm90by5vbnBvaW50ZXJ1cCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgaWYgKCBldmVudC5wb2ludGVySWQgPT0gdGhpcy5wb2ludGVySWRlbnRpZmllciApIHtcbiAgICB0aGlzLl9wb2ludGVyVXAoIGV2ZW50LCBldmVudCApO1xuICB9XG59O1xuXG5wcm90by5vbnRvdWNoZW5kID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB2YXIgdG91Y2ggPSB0aGlzLmdldFRvdWNoKCBldmVudC5jaGFuZ2VkVG91Y2hlcyApO1xuICBpZiAoIHRvdWNoICkge1xuICAgIHRoaXMuX3BvaW50ZXJVcCggZXZlbnQsIHRvdWNoICk7XG4gIH1cbn07XG5cbi8qKlxuICogcG9pbnRlciB1cFxuICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAqIEBwYXJhbSB7RXZlbnQgb3IgVG91Y2h9IHBvaW50ZXJcbiAqIEBwcml2YXRlXG4gKi9cbnByb3RvLl9wb2ludGVyVXAgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIHRoaXMuX3BvaW50ZXJEb25lKCk7XG4gIHRoaXMucG9pbnRlclVwKCBldmVudCwgcG9pbnRlciApO1xufTtcblxuLy8gcHVibGljXG5wcm90by5wb2ludGVyVXAgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlclVwJywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG4vLyAtLS0tLSBwb2ludGVyIGRvbmUgLS0tLS0gLy9cblxuLy8gdHJpZ2dlcmVkIG9uIHBvaW50ZXIgdXAgJiBwb2ludGVyIGNhbmNlbFxucHJvdG8uX3BvaW50ZXJEb25lID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX3BvaW50ZXJSZXNldCgpO1xuICB0aGlzLl91bmJpbmRQb3N0U3RhcnRFdmVudHMoKTtcbiAgdGhpcy5wb2ludGVyRG9uZSgpO1xufTtcblxucHJvdG8uX3BvaW50ZXJSZXNldCA9IGZ1bmN0aW9uKCkge1xuICAvLyByZXNldCBwcm9wZXJ0aWVzXG4gIHRoaXMuaXNQb2ludGVyRG93biA9IGZhbHNlO1xuICBkZWxldGUgdGhpcy5wb2ludGVySWRlbnRpZmllcjtcbn07XG5cbnByb3RvLnBvaW50ZXJEb25lID0gbm9vcDtcblxuLy8gLS0tLS0gcG9pbnRlciBjYW5jZWwgLS0tLS0gLy9cblxucHJvdG8ub25wb2ludGVyY2FuY2VsID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICBpZiAoIGV2ZW50LnBvaW50ZXJJZCA9PSB0aGlzLnBvaW50ZXJJZGVudGlmaWVyICkge1xuICAgIHRoaXMuX3BvaW50ZXJDYW5jZWwoIGV2ZW50LCBldmVudCApO1xuICB9XG59O1xuXG5wcm90by5vbnRvdWNoY2FuY2VsID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB2YXIgdG91Y2ggPSB0aGlzLmdldFRvdWNoKCBldmVudC5jaGFuZ2VkVG91Y2hlcyApO1xuICBpZiAoIHRvdWNoICkge1xuICAgIHRoaXMuX3BvaW50ZXJDYW5jZWwoIGV2ZW50LCB0b3VjaCApO1xuICB9XG59O1xuXG4vKipcbiAqIHBvaW50ZXIgY2FuY2VsXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICogQHBhcmFtIHtFdmVudCBvciBUb3VjaH0gcG9pbnRlclxuICogQHByaXZhdGVcbiAqL1xucHJvdG8uX3BvaW50ZXJDYW5jZWwgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIHRoaXMuX3BvaW50ZXJEb25lKCk7XG4gIHRoaXMucG9pbnRlckNhbmNlbCggZXZlbnQsIHBvaW50ZXIgKTtcbn07XG5cbi8vIHB1YmxpY1xucHJvdG8ucG9pbnRlckNhbmNlbCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdGhpcy5lbWl0RXZlbnQoICdwb2ludGVyQ2FuY2VsJywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG4vLyAtLS0tLSAgLS0tLS0gLy9cblxuLy8gdXRpbGl0eSBmdW5jdGlvbiBmb3IgZ2V0dGluZyB4L3kgY29vcmRzIGZyb20gZXZlbnRcblVuaXBvaW50ZXIuZ2V0UG9pbnRlclBvaW50ID0gZnVuY3Rpb24oIHBvaW50ZXIgKSB7XG4gIHJldHVybiB7XG4gICAgeDogcG9pbnRlci5wYWdlWCxcbiAgICB5OiBwb2ludGVyLnBhZ2VZXG4gIH07XG59O1xuXG4vLyAtLS0tLSAgLS0tLS0gLy9cblxucmV0dXJuIFVuaXBvaW50ZXI7XG5cbn0pKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdW5pcG9pbnRlci91bmlwb2ludGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIEV2RW1pdHRlciB2MS4xLjBcbiAqIExpbCcgZXZlbnQgZW1pdHRlclxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4vKiBqc2hpbnQgdW51c2VkOiB0cnVlLCB1bmRlZjogdHJ1ZSwgc3RyaWN0OiB0cnVlICovXG5cbiggZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIC8qIGpzaGludCBzdHJpY3Q6IGZhbHNlICovIC8qIGdsb2JhbHMgZGVmaW5lLCBtb2R1bGUsIHdpbmRvdyAqL1xuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuICAgIC8vIEFNRCAtIFJlcXVpcmVKU1xuICAgIGRlZmluZSggZmFjdG9yeSApO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTIC0gQnJvd3NlcmlmeSwgV2VicGFja1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgIGdsb2JhbC5FdkVtaXR0ZXIgPSBmYWN0b3J5KCk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCkge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gRXZFbWl0dGVyKCkge31cblxudmFyIHByb3RvID0gRXZFbWl0dGVyLnByb3RvdHlwZTtcblxucHJvdG8ub24gPSBmdW5jdGlvbiggZXZlbnROYW1lLCBsaXN0ZW5lciApIHtcbiAgaWYgKCAhZXZlbnROYW1lIHx8ICFsaXN0ZW5lciApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gc2V0IGV2ZW50cyBoYXNoXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIC8vIHNldCBsaXN0ZW5lcnMgYXJyYXlcbiAgdmFyIGxpc3RlbmVycyA9IGV2ZW50c1sgZXZlbnROYW1lIF0gPSBldmVudHNbIGV2ZW50TmFtZSBdIHx8IFtdO1xuICAvLyBvbmx5IGFkZCBvbmNlXG4gIGlmICggbGlzdGVuZXJzLmluZGV4T2YoIGxpc3RlbmVyICkgPT0gLTEgKSB7XG4gICAgbGlzdGVuZXJzLnB1c2goIGxpc3RlbmVyICk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLm9uY2UgPSBmdW5jdGlvbiggZXZlbnROYW1lLCBsaXN0ZW5lciApIHtcbiAgaWYgKCAhZXZlbnROYW1lIHx8ICFsaXN0ZW5lciApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gYWRkIGV2ZW50XG4gIHRoaXMub24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKTtcbiAgLy8gc2V0IG9uY2UgZmxhZ1xuICAvLyBzZXQgb25jZUV2ZW50cyBoYXNoXG4gIHZhciBvbmNlRXZlbnRzID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge307XG4gIC8vIHNldCBvbmNlTGlzdGVuZXJzIG9iamVjdFxuICB2YXIgb25jZUxpc3RlbmVycyA9IG9uY2VFdmVudHNbIGV2ZW50TmFtZSBdID0gb25jZUV2ZW50c1sgZXZlbnROYW1lIF0gfHwge307XG4gIC8vIHNldCBmbGFnXG4gIG9uY2VMaXN0ZW5lcnNbIGxpc3RlbmVyIF0gPSB0cnVlO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8ub2ZmID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzWyBldmVudE5hbWUgXTtcbiAgaWYgKCAhbGlzdGVuZXJzIHx8ICFsaXN0ZW5lcnMubGVuZ3RoICkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZiggbGlzdGVuZXIgKTtcbiAgaWYgKCBpbmRleCAhPSAtMSApIHtcbiAgICBsaXN0ZW5lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5wcm90by5lbWl0RXZlbnQgPSBmdW5jdGlvbiggZXZlbnROYW1lLCBhcmdzICkge1xuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1sgZXZlbnROYW1lIF07XG4gIGlmICggIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gY29weSBvdmVyIHRvIGF2b2lkIGludGVyZmVyZW5jZSBpZiAub2ZmKCkgaW4gbGlzdGVuZXJcbiAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLnNsaWNlKDApO1xuICBhcmdzID0gYXJncyB8fCBbXTtcbiAgLy8gb25jZSBzdHVmZlxuICB2YXIgb25jZUxpc3RlbmVycyA9IHRoaXMuX29uY2VFdmVudHMgJiYgdGhpcy5fb25jZUV2ZW50c1sgZXZlbnROYW1lIF07XG5cbiAgZm9yICggdmFyIGk9MDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKyApIHtcbiAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV1cbiAgICB2YXIgaXNPbmNlID0gb25jZUxpc3RlbmVycyAmJiBvbmNlTGlzdGVuZXJzWyBsaXN0ZW5lciBdO1xuICAgIGlmICggaXNPbmNlICkge1xuICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVyXG4gICAgICAvLyByZW1vdmUgYmVmb3JlIHRyaWdnZXIgdG8gcHJldmVudCByZWN1cnNpb25cbiAgICAgIHRoaXMub2ZmKCBldmVudE5hbWUsIGxpc3RlbmVyICk7XG4gICAgICAvLyB1bnNldCBvbmNlIGZsYWdcbiAgICAgIGRlbGV0ZSBvbmNlTGlzdGVuZXJzWyBsaXN0ZW5lciBdO1xuICAgIH1cbiAgICAvLyB0cmlnZ2VyIGxpc3RlbmVyXG4gICAgbGlzdGVuZXIuYXBwbHkoIHRoaXMsIGFyZ3MgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8uYWxsT2ZmID0gZnVuY3Rpb24oKSB7XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHM7XG4gIGRlbGV0ZSB0aGlzLl9vbmNlRXZlbnRzO1xufTtcblxucmV0dXJuIEV2RW1pdHRlcjtcblxufSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9ldi1lbWl0dGVyL2V2LWVtaXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIGlzLmpzIDAuOC4wXG4vLyBBdXRob3I6IEFyYXMgQXRhc2F5Z2luXG5cbi8vIEFNRCB3aXRoIGdsb2JhbCwgTm9kZSwgb3IgZ2xvYmFsXG47KGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBBbHNvIGNyZWF0ZSBhIGdsb2JhbCBpbiBjYXNlIHNvbWUgc2NyaXB0c1xuICAgICAgICAgICAgLy8gdGhhdCBhcmUgbG9hZGVkIHN0aWxsIGFyZSBsb29raW5nIGZvclxuICAgICAgICAgICAgLy8gYSBnbG9iYWwgZXZlbiB3aGVuIGFuIEFNRCBsb2FkZXIgaXMgaW4gdXNlLlxuICAgICAgICAgICAgcmV0dXJuIChyb290LmlzID0gZmFjdG9yeSgpKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb21lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290LmlzID0gZmFjdG9yeSgpO1xuICAgIH1cbn0gKHRoaXMsIGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gQmFzZWxpbmVcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgdmFyIHJvb3QgPSB0aGlzIHx8IGdsb2JhbDtcbiAgICB2YXIgcHJldmlvdXNJcyA9IHJvb3QuaXM7XG5cbiAgICAvLyBkZWZpbmUgJ2lzJyBvYmplY3QgYW5kIGN1cnJlbnQgdmVyc2lvblxuICAgIHZhciBpcyA9IHt9O1xuICAgIGlzLlZFUlNJT04gPSAnMC44LjAnO1xuXG4gICAgLy8gZGVmaW5lIGludGVyZmFjZXNcbiAgICBpcy5ub3QgPSB7fTtcbiAgICBpcy5hbGwgPSB7fTtcbiAgICBpcy5hbnkgPSB7fTtcblxuICAgIC8vIGNhY2hlIHNvbWUgbWV0aG9kcyB0byBjYWxsIGxhdGVyIG9uXG4gICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbiAgICB2YXIgYXJyYXlTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbiAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHdoaWNoIHJldmVyc2VzIHRoZSBzZW5zZSBvZiBwcmVkaWNhdGUgcmVzdWx0XG4gICAgZnVuY3Rpb24gbm90KGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICFmdW5jLmFwcGx5KG51bGwsIGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gd2hpY2ggY2FsbCBwcmVkaWNhdGUgZnVuY3Rpb24gcGVyIHBhcmFtZXRlciBhbmQgcmV0dXJuIHRydWUgaWYgYWxsIHBhc3NcbiAgICBmdW5jdGlvbiBhbGwoZnVuYykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHBhcmFtZXRlcnMubGVuZ3RoO1xuICAgICAgICAgICAgaWYobGVuZ3RoID09PSAxICYmIGlzLmFycmF5KHBhcmFtZXRlcnNbMF0pKSB7ICAgIC8vIHN1cHBvcnQgYXJyYXlcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0gcGFyYW1ldGVyc1swXTtcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBwYXJhbWV0ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZ1bmMuY2FsbChudWxsLCBwYXJhbWV0ZXJzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHdoaWNoIGNhbGwgcHJlZGljYXRlIGZ1bmN0aW9uIHBlciBwYXJhbWV0ZXIgYW5kIHJldHVybiB0cnVlIGlmIGFueSBwYXNzXG4gICAgZnVuY3Rpb24gYW55KGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBhcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBwYXJhbWV0ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmKGxlbmd0aCA9PT0gMSAmJiBpcy5hcnJheShwYXJhbWV0ZXJzWzBdKSkgeyAgICAvLyBzdXBwb3J0IGFycmF5XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gcGFyYW1ldGVycy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZ1bmMuY2FsbChudWxsLCBwYXJhbWV0ZXJzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gVHlwZSBjaGVja3NcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBBcmd1bWVudHM/XG4gICAgaXMuYXJndW1lbnRzID0gZnVuY3Rpb24odmFsdWUpIHsgICAgLy8gZmFsbGJhY2sgY2hlY2sgaXMgZm9yIElFXG4gICAgICAgIHJldHVybiBpcy5ub3QubnVsbCh2YWx1ZSkgJiYgKHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcmd1bWVudHNdJyB8fCAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAnY2FsbGVlJyBpbiB2YWx1ZSkpO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIEFycmF5P1xuICAgIGlzLmFycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkgeyAgICAvLyBjaGVjayBuYXRpdmUgaXNBcnJheSBmaXJzdFxuICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgQm9vbGVhbj9cbiAgICBpcy5ib29sZWFuID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIERhdGUgT2JqZWN0P1xuICAgIGlzLmRhdGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGVdJztcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBFcnJvciBvYmplY3Q/XG4gICAgaXMuZXJyb3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEVycm9yXSc7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgZnVuY3Rpb24/XG4gICAgaXMuZnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkgeyAgICAvLyBmYWxsYmFjayBjaGVjayBpcyBmb3IgSUVcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBOYU4/XG4gICAgaXMubmFuID0gZnVuY3Rpb24odmFsdWUpIHsgICAgLy8gTmFOIGlzIG51bWJlciA6KSBBbHNvIGl0IGlzIHRoZSBvbmx5IHZhbHVlIHdoaWNoIGRvZXMgbm90IGVxdWFsIGl0c2VsZlxuICAgICAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIG51bGw/XG4gICAgaXMubnVsbCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBudW1iZXI/XG4gICAgaXMubnVtYmVyID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGlzLm5vdC5uYW4odmFsdWUpICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBOdW1iZXJdJztcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBvYmplY3Q/XG4gICAgaXMub2JqZWN0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhdmFsdWU7XG4gICAgfTtcblxuICAgIC8vIGlzIGdpdmVuIHZhbHVlIGEgcHVyZSBKU09OIG9iamVjdD9cbiAgICBpcy5qc29uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBSZWdFeHA/XG4gICAgaXMucmVnZXhwID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbiAgICB9O1xuXG4gICAgLy8gYXJlIGdpdmVuIHZhbHVlcyBzYW1lIHR5cGU/XG4gICAgLy8gcHJldmVudCBOYU4sIE51bWJlciBzYW1lIHR5cGUgY2hlY2tcbiAgICBpcy5zYW1lVHlwZSA9IGZ1bmN0aW9uKHZhbHVlMSwgdmFsdWUyKSB7XG4gICAgICAgIGlmKGlzLm5hbih2YWx1ZTEpIHx8IGlzLm5hbih2YWx1ZTIpKSB7XG4gICAgICAgICAgICByZXR1cm4gaXMubmFuKHZhbHVlMSkgPT09IGlzLm5hbih2YWx1ZTIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlMSkgPT09IHRvU3RyaW5nLmNhbGwodmFsdWUyKTtcbiAgICB9O1xuICAgIC8vIHNhbWVUeXBlIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgaXMuc2FtZVR5cGUuYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgU3RyaW5nP1xuICAgIGlzLnN0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgQ2hhcj9cbiAgICBpcy5jaGFyID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGlzLnN0cmluZyh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAxO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIHZhbHVlIHVuZGVmaW5lZD9cbiAgICBpcy51bmRlZmluZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgLy8gUHJlc2VuY2UgY2hlY2tzXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAgIC8vaXMgYSBnaXZlbiB2YWx1ZSBlbXB0eT8gT2JqZWN0cywgYXJyYXlzLCBzdHJpbmdzXG4gICAgaXMuZW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZihpcy5vYmplY3QodmFsdWUpKXtcbiAgICAgICAgICAgIHZhciBudW0gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSkubGVuZ3RoO1xuICAgICAgICAgICAgaWYobnVtID09PSAwIHx8IChudW0gPT09IDEgJiYgaXMuYXJyYXkodmFsdWUpKSB8fCAobnVtID09PSAyICYmIGlzLmFyZ3VtZW50cyh2YWx1ZSkpKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gJyc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBleGlzdHk/XG4gICAgaXMuZXhpc3R5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gdmFsdWUgdHJ1dGh5P1xuICAgIGlzLnRydXRoeSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBpcy5leGlzdHkodmFsdWUpICYmIHZhbHVlICE9PSBmYWxzZSAmJiBpcy5ub3QubmFuKHZhbHVlKSAmJiB2YWx1ZSAhPT0gXCJcIiAmJiB2YWx1ZSAhPT0gMDtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBmYWxzeT9cbiAgICBpcy5mYWxzeSA9IG5vdChpcy50cnV0aHkpO1xuXG4gICAgLy8gaXMgYSBnaXZlbiB2YWx1ZSBzcGFjZT9cbiAgICAvLyBob3JpemFudGFsIHRhYjogOSwgbGluZSBmZWVkOiAxMCwgdmVydGljYWwgdGFiOiAxMSwgZm9ybSBmZWVkOiAxMiwgY2FycmlhZ2UgcmV0dXJuOiAxMywgc3BhY2U6IDMyXG4gICAgaXMuc3BhY2UgPSAgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYoaXMuY2hhcih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciBjaGFyYWN0ZXJDb2RlID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIHJldHVybiAoY2hhcmFjdGVyQ29kZSA+ICA4ICYmIGNoYXJhY3RlckNvZGUgPCAxNCkgfHwgY2hhcmFjdGVyQ29kZSA9PT0gMzI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQXJpdGhtZXRpYyBjaGVja3NcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgLy8gYXJlIGdpdmVuIHZhbHVlcyBlcXVhbD8gc3VwcG9ydHMgbnVtYmVycywgc3RyaW5ncywgcmVnZXhwcywgYm9vbGVhbnNcbiAgICAvLyBUT0RPOiBBZGQgb2JqZWN0IGFuZCBhcnJheSBzdXBwb3J0XG4gICAgaXMuZXF1YWwgPSBmdW5jdGlvbih2YWx1ZTEsIHZhbHVlMikge1xuICAgICAgICAvLyBjaGVjayAwIGFuZCAtMCBlcXVpdHkgd2l0aCBJbmZpbml0eSBhbmQgLUluZmluaXR5XG4gICAgICAgIGlmKGlzLmFsbC5udW1iZXIodmFsdWUxLCB2YWx1ZTIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxID09PSB2YWx1ZTIgJiYgMSAvIHZhbHVlMSA9PT0gMSAvIHZhbHVlMjtcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayByZWdleHBzIGFzIHN0cmluZ3MgdG9vXG4gICAgICAgIGlmKGlzLmFsbC5zdHJpbmcodmFsdWUxLCB2YWx1ZTIpIHx8IGlzLmFsbC5yZWdleHAodmFsdWUxLCB2YWx1ZTIpKSB7XG4gICAgICAgICAgICByZXR1cm4gJycgKyB2YWx1ZTEgPT09ICcnICsgdmFsdWUyO1xuICAgICAgICB9XG4gICAgICAgIGlmKGlzLmFsbC5ib29sZWFuKHZhbHVlMSwgdmFsdWUyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMSA9PT0gdmFsdWUyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8vIGVxdWFsIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgaXMuZXF1YWwuYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGV2ZW4/XG4gICAgaXMuZXZlbiA9IGZ1bmN0aW9uKG51bWIpIHtcbiAgICAgICAgcmV0dXJuIGlzLm51bWJlcihudW1iKSAmJiBudW1iICUgMiA9PT0gMDtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiBudW1iZXIgb2RkP1xuICAgIGlzLm9kZCA9IGZ1bmN0aW9uKG51bWIpIHtcbiAgICAgICAgcmV0dXJuIGlzLm51bWJlcihudW1iKSAmJiBudW1iICUgMiA9PT0gMTtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiBudW1iZXIgcG9zaXRpdmU/XG4gICAgaXMucG9zaXRpdmUgPSBmdW5jdGlvbihudW1iKSB7XG4gICAgICAgIHJldHVybiBpcy5udW1iZXIobnVtYikgJiYgbnVtYiA+IDA7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIG5lZ2F0aXZlP1xuICAgIGlzLm5lZ2F0aXZlID0gZnVuY3Rpb24obnVtYikge1xuICAgICAgICByZXR1cm4gaXMubnVtYmVyKG51bWIpICYmIG51bWIgPCAwO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIG51bWJlciBhYm92ZSBtaW5pbXVtIHBhcmFtZXRlcj9cbiAgICBpcy5hYm92ZSA9IGZ1bmN0aW9uKG51bWIsIG1pbikge1xuICAgICAgICByZXR1cm4gaXMuYWxsLm51bWJlcihudW1iLCBtaW4pICYmIG51bWIgPiBtaW47XG4gICAgfTtcbiAgICAvLyBhYm92ZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLmFib3ZlLmFwaSA9IFsnbm90J107XG5cbiAgICAvLyBpcyBhIGdpdmVuIG51bWJlciBhYm92ZSBtYXhpbXVtIHBhcmFtZXRlcj9cbiAgICBpcy51bmRlciA9IGZ1bmN0aW9uKG51bWIsIG1heCkge1xuICAgICAgICByZXR1cm4gaXMuYWxsLm51bWJlcihudW1iLCBtYXgpICYmIG51bWIgPCBtYXg7XG4gICAgfTtcbiAgICAvLyBsZWFzdCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLnVuZGVyLmFwaSA9IFsnbm90J107XG5cbiAgICAvLyBpcyBhIGdpdmVuIG51bWJlciB3aXRoaW4gbWluaW11bSBhbmQgbWF4aW11bSBwYXJhbWV0ZXJzP1xuICAgIGlzLndpdGhpbiA9IGZ1bmN0aW9uKG51bWIsIG1pbiwgbWF4KSB7XG4gICAgICAgIHJldHVybiBpcy5hbGwubnVtYmVyKG51bWIsIG1pbiwgbWF4KSAmJiBudW1iID4gbWluICYmIG51bWIgPCBtYXg7XG4gICAgfTtcbiAgICAvLyB3aXRoaW4gbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICBpcy53aXRoaW4uYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGRlY2ltYWw/XG4gICAgaXMuZGVjaW1hbCA9IGZ1bmN0aW9uKG51bWIpIHtcbiAgICAgICAgcmV0dXJuIGlzLm51bWJlcihudW1iKSAmJiBudW1iICUgMSAhPT0gMDtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiBudW1iZXIgaW50ZWdlcj9cbiAgICBpcy5pbnRlZ2VyID0gZnVuY3Rpb24obnVtYikge1xuICAgICAgICByZXR1cm4gaXMubnVtYmVyKG51bWIpICYmIG51bWIgJSAxID09PSAwO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIG51bWJlciBmaW5pdGU/XG4gICAgaXMuZmluaXRlID0gaXNGaW5pdGUgfHwgZnVuY3Rpb24obnVtYikge1xuICAgICAgICByZXR1cm4gbnVtYiAhPT0gSW5maW5pdHkgJiYgbnVtYiAhPT0gLUluZmluaXR5ICYmIGlzLm5vdC5uYW4obnVtYik7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gbnVtYmVyIGluZmluaXRlP1xuICAgIGlzLmluZmluaXRlID0gbm90KGlzLmZpbml0ZSk7XG5cbiAgICAvLyBSZWdleHAgY2hlY2tzXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgICAvLyBTdGV2ZW4gTGV2aXRoYW4sIEphbiBHb3l2YWVydHM6IFJlZ3VsYXIgRXhwcmVzc2lvbnMgQ29va2Jvb2tcbiAgICAvLyBTY290dCBHb256YWxlejogRW1haWwgYWRkcmVzcyB2YWxpZGF0aW9uXG5cbiAgICAvLyBlcHBQaG9uZSBtYXRjaCBleHRlbnNpYmxlIHByb3Zpc2lvbmluZyBwcm90b2NvbCBmb3JtYXRcbiAgICAvLyBuYW5wUGhvbmUgbWF0Y2ggbm9ydGggYW1lcmljYW4gbnVtYmVyIHBsYW4gZm9ybWF0XG4gICAgLy8gZGF0ZVN0cmluZyBtYXRjaCBtL2QveXkgYW5kIG1tL2RkL3l5eXksIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBvbmUgb3IgdHdvIGRpZ2l0cyBmb3IgdGhlIGRheSBhbmQgbW9udGgsIGFuZCB0d28gb3IgZm91ciBkaWdpdHMgZm9yIHRoZSB5ZWFyXG4gICAgLy8gdGltZSBtYXRjaCBob3VycywgbWludXRlcywgYW5kIHNlY29uZHMsIDI0LWhvdXIgY2xvY2tcbiAgICB2YXIgcmVnZXhwcyA9IHtcbiAgICAgICAgdXJsOiAvXig/Oig/Omh0dHBzP3xmdHApOlxcL1xcLyk/KD86KD8hKD86MTB8MTI3KSg/OlxcLlxcZHsxLDN9KXszfSkoPyEoPzoxNjlcXC4yNTR8MTkyXFwuMTY4KSg/OlxcLlxcZHsxLDN9KXsyfSkoPyExNzJcXC4oPzoxWzYtOV18MlxcZHwzWzAtMV0pKD86XFwuXFxkezEsM30pezJ9KSg/OlsxLTldXFxkP3wxXFxkXFxkfDJbMDFdXFxkfDIyWzAtM10pKD86XFwuKD86MT9cXGR7MSwyfXwyWzAtNF1cXGR8MjVbMC01XSkpezJ9KD86XFwuKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16XFx1MDBhMS1cXHVmZmZmMC05XS0qKSpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSspKD86XFwuKD86W2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0tKikqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSooPzpcXC4oPzpbYS16XFx1MDBhMS1cXHVmZmZmXXsyLH0pKSkoPzo6XFxkezIsNX0pPyg/OlxcL1xcUyopPyQvaSxcbiAgICAgICAgZW1haWw6IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaSxcbiAgICAgICAgY3JlZGl0Q2FyZDogL14oPzooNFswLTldezEyfSg/OlswLTldezN9KT8pfCg1WzEtNV1bMC05XXsxNH0pfCg2KD86MDExfDVbMC05XXsyfSlbMC05XXsxMn0pfCgzWzQ3XVswLTldezEzfSl8KDMoPzowWzAtNV18WzY4XVswLTldKVswLTldezExfSl8KCg/OjIxMzF8MTgwMHwzNVswLTldezN9KVswLTldezExfSkpJC8sXG4gICAgICAgIGFscGhhTnVtZXJpYzogL15bQS1aYS16MC05XSskLyxcbiAgICAgICAgdGltZVN0cmluZzogL14oMlswLTNdfFswMV0/WzAtOV0pOihbMC01XT9bMC05XSk6KFswLTVdP1swLTldKSQvLFxuICAgICAgICBkYXRlU3RyaW5nOiAvXigxWzAtMl18MD9bMS05XSlcXC8oM1swMV18WzEyXVswLTldfDA/WzEtOV0pXFwvKD86WzAtOV17Mn0pP1swLTldezJ9JC8sXG4gICAgICAgIHVzWmlwQ29kZTogL15bMC05XXs1fSg/Oi1bMC05XXs0fSk/JC8sXG4gICAgICAgIGNhUG9zdGFsQ29kZTogL14oPyEuKltERklPUVVdKVtBLVZYWV1bMC05XVtBLVpdXFxzP1swLTldW0EtWl1bMC05XSQvLFxuICAgICAgICB1a1Bvc3RDb2RlOiAvXltBLVpdezEsMn1bMC05UkNITlFdWzAtOUEtWl0/XFxzP1swLTldW0FCRC1ISkxOUC1VVy1aXXsyfSR8XltBLVpdezJ9LT9bMC05XXs0fSQvLFxuICAgICAgICBuYW5wUGhvbmU6IC9eXFwoPyhbMC05XXszfSlcXCk/Wy0uIF0/KFswLTldezN9KVstLiBdPyhbMC05XXs0fSkkLyxcbiAgICAgICAgZXBwUGhvbmU6IC9eXFwrWzAtOV17MSwzfVxcLlswLTldezQsMTR9KD86eC4rKT8kLyxcbiAgICAgICAgc29jaWFsU2VjdXJpdHlOdW1iZXI6IC9eKD8hMDAwfDY2NilbMC04XVswLTldezJ9LSg/ITAwKVswLTldezJ9LSg/ITAwMDApWzAtOV17NH0kLyxcbiAgICAgICAgYWZmaXJtYXRpdmU6IC9eKD86MXx0KD86cnVlKT98eSg/OmVzKT98b2soPzpheSk/KSQvLFxuICAgICAgICBoZXhhZGVjaW1hbDogL15bMC05YS1mQS1GXSskLyxcbiAgICAgICAgaGV4Q29sb3I6IC9eIz8oWzAtOWEtZkEtRl17M318WzAtOWEtZkEtRl17Nn0pJC8sXG4gICAgICAgIGlwdjQ6IC9eKD86KD86XFxkfFsxLTldXFxkfDFcXGR7Mn18MlswLTRdXFxkfDI1WzAtNV0pXFwuKXszfSg/OlxcZHxbMS05XVxcZHwxXFxkezJ9fDJbMC00XVxcZHwyNVswLTVdKSQvLFxuICAgICAgICBpcHY2OiAvXigoW2EtekEtWl18W2EtekEtWl1bYS16QS1aMC05XFwtXSpbYS16QS1aMC05XSlcXC4pKihbQS1aYS16XXxbQS1aYS16XVtBLVphLXowLTlcXC1dKltBLVphLXowLTldKSR8XlxccyooKChbMC05QS1GYS1mXXsxLDR9Oil7N30oWzAtOUEtRmEtZl17MSw0fXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn0oOlswLTlBLUZhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs1fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs0fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05QS1GYS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7M30oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsyfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezF9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNn0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KDooKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKSkoJS4rKT9cXHMqJC8sXG4gICAgICAgIGlwOiAvXigoWzAtOV18WzEtOV1bMC05XXwxWzAtOV17Mn18MlswLTRdWzAtOV18MjVbMC01XSlcXC4pezN9KFswLTldfFsxLTldWzAtOV18MVswLTldezJ9fDJbMC00XVswLTldfDI1WzAtNV0pJHxeKChbYS16QS1aXXxbYS16QS1aXVthLXpBLVowLTlcXC1dKlthLXpBLVowLTldKVxcLikqKFtBLVphLXpdfFtBLVphLXpdW0EtWmEtejAtOVxcLV0qW0EtWmEtejAtOV0pJHxeXFxzKigoKFswLTlBLUZhLWZdezEsNH06KXs3fShbMC05QS1GYS1mXXsxLDR9fDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSg6WzAtOUEtRmEtZl17MSw0fXwoKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezV9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsMn0pfDooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezR9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsM30pfCgoOlswLTlBLUZhLWZdezEsNH0pPzooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXszfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDR9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDJ9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezJ9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNX0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsM306KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7MX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw2fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw0fTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoOigoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDd9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDV9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpKSglLispP1xccyokL1xuICAgIH07XG5cbiAgICAvLyBjcmVhdGUgcmVnZXhwIGNoZWNrcyBtZXRob2RzIGZyb20gJ3JlZ2V4cCcgb2JqZWN0XG4gICAgZm9yKHZhciByZWdleHAgaW4gcmVnZXhwcykge1xuICAgICAgICBpZihyZWdleHBzLmhhc093blByb3BlcnR5KHJlZ2V4cCkpIHtcbiAgICAgICAgICAgIHJlZ2V4cENoZWNrKHJlZ2V4cCwgcmVnZXhwcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWdleHBDaGVjayhyZWdleHAsIHJlZ2V4cHMpIHtcbiAgICAgICAgaXNbcmVnZXhwXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVnZXhwc1tyZWdleHBdLnRlc3QodmFsdWUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFN0cmluZyBjaGVja3NcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgLy8gaXMgYSBnaXZlbiBzdHJpbmcgaW5jbHVkZSBwYXJhbWV0ZXIgc3Vic3RyaW5nP1xuICAgIGlzLmluY2x1ZGUgPSBmdW5jdGlvbihzdHIsIHN1YnN0cikge1xuICAgICAgICByZXR1cm4gc3RyLmluZGV4T2Yoc3Vic3RyKSA+IC0xO1xuICAgIH07XG4gICAgLy8gaW5jbHVkZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLmluY2x1ZGUuYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gc3RyaW5nIGFsbCB1cHBlcmNhc2U/XG4gICAgaXMudXBwZXJDYXNlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHJldHVybiBpcy5zdHJpbmcoc3RyKSAmJiBzdHIgPT09IHN0ci50b1VwcGVyQ2FzZSgpO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIHN0cmluZyBhbGwgbG93ZXJjYXNlP1xuICAgIGlzLmxvd2VyQ2FzZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICByZXR1cm4gaXMuc3RyaW5nKHN0cikgJiYgc3RyID09PSBzdHIudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xuXG4gICAgLy8gaXMgc3RyaW5nIHN0YXJ0IHdpdGggYSBnaXZlbiBzdGFydFdpdGggcGFyYW1ldGVyP1xuICAgIGlzLnN0YXJ0V2l0aCA9IGZ1bmN0aW9uKHN0ciwgc3RhcnRXaXRoKSB7XG4gICAgICAgIHJldHVybiBpcy5zdHJpbmcoc3RyKSAmJiBzdHIuaW5kZXhPZihzdGFydFdpdGgpID09PSAwO1xuICAgIH07XG4gICAgLy8gc3RhcnRXaXRoIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgaXMuc3RhcnRXaXRoLmFwaSA9IFsnbm90J107XG5cbiAgICAvLyBpcyBzdHJpbmcgZW5kIHdpdGggYSBnaXZlbiBlbmRXaXRoIHBhcmFtZXRlcj9cbiAgICBpcy5lbmRXaXRoID0gZnVuY3Rpb24oc3RyLCBlbmRXaXRoKSB7XG4gICAgICAgIHJldHVybiBpcy5zdHJpbmcoc3RyKSAmJiBzdHIuaW5kZXhPZihlbmRXaXRoKSA+IC0xICYmIHN0ci5pbmRleE9mKGVuZFdpdGgpID09PSBzdHIubGVuZ3RoIC0gIGVuZFdpdGgubGVuZ3RoO1xuICAgIH07XG4gICAgLy8gZW5kV2l0aCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLmVuZFdpdGguYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gc3RyaW5nIG9yIHNlbnRlbmNlIGNhcGl0YWxpemVkP1xuICAgIGlzLmNhcGl0YWxpemVkID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIGlmKGlzLm5vdC5zdHJpbmcoc3RyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3b3JkcyA9IHN0ci5zcGxpdCgnICcpO1xuICAgICAgICB2YXIgY2FwaXRhbGl6ZWQgPSBbXTtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjYXBpdGFsaXplZC5wdXNoKHdvcmRzW2ldWzBdID09PSB3b3Jkc1tpXVswXS50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXMuYWxsLnRydXRoeS5hcHBseShudWxsLCBjYXBpdGFsaXplZCk7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gc3RyaW5nIHBhbGluZHJvbWU/XG4gICAgaXMucGFsaW5kcm9tZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICByZXR1cm4gaXMuc3RyaW5nKHN0cikgJiYgc3RyID09IHN0ci5zcGxpdCgnJykucmV2ZXJzZSgpLmpvaW4oJycpO1xuICAgIH07XG5cbiAgICAvLyBUaW1lIGNoZWNrc1xuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgICB2YXIgZGF5cyA9IFsnc3VuZGF5JywgJ21vbmRheScsICd0dWVzZGF5JywgJ3dlZG5lc2RheScsICd0aHVyc2RheScsICdmcmlkYXknLCAnc2F0dXJkYXknXTtcbiAgICB2YXIgbW9udGhzID0gWydqYW51YXJ5JywgJ2ZlYnJ1YXJ5JywgJ21hcmNoJywgJ2FwcmlsJywgJ21heScsICdqdW5lJywgJ2p1bHknLCAnYXVndXN0JywgJ3NlcHRlbWJlcicsICdvY3RvYmVyJywgJ25vdmVtYmVyJywgJ2RlY2VtYmVyJ107XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW5kaWNhdGUgdG9kYXk/XG4gICAgaXMudG9kYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciB0b2RheVN0cmluZyA9IG5vdy50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBvYmoudG9EYXRlU3RyaW5nKCkgPT09IHRvZGF5U3RyaW5nO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW5kaWNhdGUgeWVzdGVyZGF5P1xuICAgIGlzLnllc3RlcmRheSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIHllc3RlcmRheVN0cmluZyA9IG5ldyBEYXRlKG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSAxKSkudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBpcy5kYXRlKG9iaikgJiYgb2JqLnRvRGF0ZVN0cmluZygpID09PSB5ZXN0ZXJkYXlTdHJpbmc7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gZGF0ZSBpbmRpY2F0ZSB0b21vcnJvdz9cbiAgICBpcy50b21vcnJvdyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIHRvbW9ycm93U3RyaW5nID0gbmV3IERhdGUobm93LnNldERhdGUobm93LmdldERhdGUoKSArIDEpKS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBvYmoudG9EYXRlU3RyaW5nKCkgPT09IHRvbW9ycm93U3RyaW5nO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgcGFzdD9cbiAgICBpcy5wYXN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gaXMuZGF0ZShvYmopICYmIG9iai5nZXRUaW1lKCkgPCBub3cuZ2V0VGltZSgpO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgZnV0dXJlP1xuICAgIGlzLmZ1dHVyZSA9IG5vdChpcy5wYXN0KTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gZGF0ZXMgZGF5IGVxdWFsIGdpdmVuIGRheVN0cmluZyBwYXJhbWV0ZXI/XG4gICAgaXMuZGF5ID0gZnVuY3Rpb24ob2JqLCBkYXlTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBkYXlTdHJpbmcudG9Mb3dlckNhc2UoKSA9PT0gZGF5c1tvYmouZ2V0RGF5KCldO1xuICAgIH07XG4gICAgLy8gZGF5IG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgaXMuZGF5LmFwaSA9IFsnbm90J107XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGVzIG1vbnRoIGVxdWFsIGdpdmVuIG1vbnRoU3RyaW5nIHBhcmFtZXRlcj9cbiAgICBpcy5tb250aCA9IGZ1bmN0aW9uKG9iaiwgbW9udGhTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBtb250aFN0cmluZy50b0xvd2VyQ2FzZSgpID09PSBtb250aHNbb2JqLmdldE1vbnRoKCldO1xuICAgIH07XG4gICAgLy8gbW9udGggbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICBpcy5tb250aC5hcGkgPSBbJ25vdCddO1xuXG4gICAgLy8gaXMgYSBnaXZlbiBkYXRlcyB5ZWFyIGVxdWFsIGdpdmVuIHllYXIgcGFyYW1ldGVyP1xuICAgIGlzLnllYXIgPSBmdW5jdGlvbihvYmosIHllYXIpIHtcbiAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBpcy5udW1iZXIoeWVhcikgJiYgeWVhciA9PT0gb2JqLmdldEZ1bGxZZWFyKCk7XG4gICAgfTtcbiAgICAvLyB5ZWFyIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgaXMueWVhci5hcGkgPSBbJ25vdCddO1xuXG4gICAgLy8gaXMgdGhlIGdpdmVuIHllYXIgYSBsZWFwIHllYXI/XG4gICAgaXMubGVhcFllYXIgPSBmdW5jdGlvbih5ZWFyKSB7XG4gICAgICAgIHJldHVybiBpcy5udW1iZXIoeWVhcikgJiYgKCh5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwKSB8fCB5ZWFyICUgNDAwID09PSAwKTtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiBkYXRlIHdlZWtlbmQ/XG4gICAgLy8gNjogU2F0dXJkYXksIDA6IFN1bmRheVxuICAgIGlzLndlZWtlbmQgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiAob2JqLmdldERheSgpID09PSA2IHx8IG9iai5nZXREYXkoKSA9PT0gMCk7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gZGF0ZSB3ZWVrZGF5P1xuICAgIGlzLndlZWtkYXkgPSBub3QoaXMud2Vla2VuZCk7XG5cbiAgICAvLyBpcyBkYXRlIHdpdGhpbiBnaXZlbiByYW5nZT9cbiAgICBpcy5pbkRhdGVSYW5nZSA9IGZ1bmN0aW9uKG9iaiwgc3RhcnRPYmosIGVuZE9iaikge1xuICAgICAgICBpZihpcy5ub3QuZGF0ZShvYmopIHx8IGlzLm5vdC5kYXRlKHN0YXJ0T2JqKSB8fCBpcy5ub3QuZGF0ZShlbmRPYmopKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdpdmVuRGF0ZSA9IG9iai5nZXRUaW1lKCk7XG4gICAgICAgIHZhciBzdGFydCA9IHN0YXJ0T2JqLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIGVuZCA9IGVuZE9iai5nZXRUaW1lKCk7XG4gICAgICAgIHJldHVybiBnaXZlbkRhdGUgPiBzdGFydCAmJiBnaXZlbkRhdGUgPCBlbmQ7XG4gICAgfTtcbiAgICAvLyBpbkRhdGVSYW5nZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLmluRGF0ZVJhbmdlLmFwaSA9IFsnbm90J107XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbGFzdCB3ZWVrIHJhbmdlP1xuICAgIGlzLmluTGFzdFdlZWsgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gNykpLCBuZXcgRGF0ZSgpKTtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiBkYXRlIGluIGxhc3QgbW9udGggcmFuZ2U/XG4gICAgaXMuaW5MYXN0TW9udGggPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUobmV3IERhdGUoKS5zZXRNb250aChuZXcgRGF0ZSgpLmdldE1vbnRoKCkgLSAxKSksIG5ldyBEYXRlKCkpO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbGFzdCB5ZWFyIHJhbmdlP1xuICAgIGlzLmluTGFzdFllYXIgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUobmV3IERhdGUoKS5zZXRGdWxsWWVhcihuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgLSAxKSksIG5ldyBEYXRlKCkpO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbmV4dCB3ZWVrIHJhbmdlP1xuICAgIGlzLmluTmV4dFdlZWsgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUoKSwgbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgNykpKTtcbiAgICB9O1xuXG4gICAgLy8gaXMgYSBnaXZlbiBkYXRlIGluIG5leHQgbW9udGggcmFuZ2U/XG4gICAgaXMuaW5OZXh0TW9udGggPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUoKSwgbmV3IERhdGUobmV3IERhdGUoKS5zZXRNb250aChuZXcgRGF0ZSgpLmdldE1vbnRoKCkgKyAxKSkpO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gbmV4dCB5ZWFyIHJhbmdlP1xuICAgIGlzLmluTmV4dFllYXIgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzLmluRGF0ZVJhbmdlKG9iaiwgbmV3IERhdGUoKSwgbmV3IERhdGUobmV3IERhdGUoKS5zZXRGdWxsWWVhcihuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgKyAxKSkpO1xuICAgIH07XG5cbiAgICAvLyBpcyBhIGdpdmVuIGRhdGUgaW4gdGhlIHBhcmFtZXRlciBxdWFydGVyP1xuICAgIGlzLnF1YXJ0ZXJPZlllYXIgPSBmdW5jdGlvbihvYmosIHF1YXJ0ZXJOdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIGlzLmRhdGUob2JqKSAmJiBpcy5udW1iZXIocXVhcnRlck51bWJlcikgJiYgcXVhcnRlck51bWJlciA9PT0gTWF0aC5mbG9vcigob2JqLmdldE1vbnRoKCkgKyAzKSAvIDMpO1xuICAgIH07XG4gICAgLy8gcXVhcnRlck9mWWVhciBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLnF1YXJ0ZXJPZlllYXIuYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gZGF0ZSBpbiBkYXlsaWdodCBzYXZpbmcgdGltZT9cbiAgICBpcy5kYXlMaWdodFNhdmluZ1RpbWUgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgdmFyIGphbnVhcnkgPSBuZXcgRGF0ZShvYmouZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gICAgICAgIHZhciBqdWx5ID0gbmV3IERhdGUob2JqLmdldEZ1bGxZZWFyKCksIDYsIDEpO1xuICAgICAgICB2YXIgc3RkVGltZXpvbmVPZmZzZXQgPSBNYXRoLm1heChqYW51YXJ5LmdldFRpbWV6b25lT2Zmc2V0KCksIGp1bHkuZ2V0VGltZXpvbmVPZmZzZXQoKSk7XG4gICAgICAgIHJldHVybiBvYmouZ2V0VGltZXpvbmVPZmZzZXQoKSA8IHN0ZFRpbWV6b25lT2Zmc2V0O1xuICAgIH07XG5cbiAgICAvLyBFbnZpcm9ubWVudCBjaGVja3NcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgLy8gY2hlY2sgaWYgbGlicmFyeSBpcyB1c2VkIGFzIGEgTm9kZS5qcyBtb2R1bGVcbiAgICBpZih0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXG4gICAgICAgIC8vIHN0b3JlIG5hdmlnYXRvciBwcm9wZXJ0aWVzIHRvIHVzZSBsYXRlclxuICAgICAgICB2YXIgdXNlckFnZW50ID0gJ25hdmlnYXRvcicgaW4gd2luZG93ICYmICd1c2VyQWdlbnQnIGluIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgfHwgJyc7XG4gICAgICAgIHZhciB2ZW5kb3IgPSAnbmF2aWdhdG9yJyBpbiB3aW5kb3cgJiYgJ3ZlbmRvcicgaW4gbmF2aWdhdG9yICYmIG5hdmlnYXRvci52ZW5kb3IudG9Mb3dlckNhc2UoKSB8fCAnJztcbiAgICAgICAgdmFyIGFwcFZlcnNpb24gPSAnbmF2aWdhdG9yJyBpbiB3aW5kb3cgJiYgJ2FwcFZlcnNpb24nIGluIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBjaHJvbWU/XG4gICAgICAgIGlzLmNocm9tZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9jaHJvbWV8Y2hyb21pdW0vaS50ZXN0KHVzZXJBZ2VudCkgJiYgL2dvb2dsZSBpbmMvLnRlc3QodmVuZG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gY2hyb21lIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgICAgIGlzLmNocm9tZS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBmaXJlZm94P1xuICAgICAgICBpcy5maXJlZm94ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL2ZpcmVmb3gvaS50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGZpcmVmb3ggbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuZmlyZWZveC5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBlZGdlP1xuICAgICAgICBpcy5lZGdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL2VkZ2UvaS50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGVkZ2UgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuZWRnZS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBpbnRlcm5ldCBleHBsb3Jlcj9cbiAgICAgICAgLy8gcGFyYW1ldGVyIGlzIG9wdGlvbmFsXG4gICAgICAgIGlzLmllID0gZnVuY3Rpb24odmVyc2lvbikge1xuICAgICAgICAgICAgaWYoIXZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gL21zaWUvaS50ZXN0KHVzZXJBZ2VudCkgfHwgXCJBY3RpdmVYT2JqZWN0XCIgaW4gd2luZG93O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmVyc2lvbiA+PSAxMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIkFjdGl2ZVhPYmplY3RcIiBpbiB3aW5kb3c7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnbXNpZSAnICsgdmVyc2lvbikudGVzdCh1c2VyQWdlbnQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBpZSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgICAgICBpcy5pZS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBvcGVyYT9cbiAgICAgICAgaXMub3BlcmEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvXk9wZXJhXFwvLy50ZXN0KHVzZXJBZ2VudCkgfHwgLy8gT3BlcmEgMTIgYW5kIG9sZGVyIHZlcnNpb25zXG4gICAgICAgICAgICAgICAgL1xceDIwT1BSXFwvLy50ZXN0KHVzZXJBZ2VudCk7IC8vIE9wZXJhIDE1K1xuICAgICAgICB9O1xuICAgICAgICAvLyBvcGVyYSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgICAgICBpcy5vcGVyYS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgYnJvd3NlciBzYWZhcmk/XG4gICAgICAgIGlzLnNhZmFyaSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9zYWZhcmkvaS50ZXN0KHVzZXJBZ2VudCkgJiYgL2FwcGxlIGNvbXB1dGVyL2kudGVzdCh2ZW5kb3IpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBzYWZhcmkgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuc2FmYXJpLmFwaSA9IFsnbm90J107XG5cbiAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgaW9zP1xuICAgICAgICBpcy5pb3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBpcy5pcGhvbmUoKSB8fCBpcy5pcGFkKCkgfHwgaXMuaXBvZCgpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBpb3MgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuaW9zLmFwaSA9IFsnbm90J107XG5cbiAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgaXBob25lP1xuICAgICAgICBpcy5pcGhvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvaXBob25lL2kudGVzdCh1c2VyQWdlbnQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBpcGhvbmUgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuaXBob25lLmFwaSA9IFsnbm90J107XG5cbiAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgaXBhZD9cbiAgICAgICAgaXMuaXBhZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9pcGFkL2kudGVzdCh1c2VyQWdlbnQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBpcGFkIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgICAgIGlzLmlwYWQuYXBpID0gWydub3QnXTtcblxuICAgICAgICAvLyBpcyBjdXJyZW50IGRldmljZSBpcG9kP1xuICAgICAgICBpcy5pcG9kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL2lwb2QvaS50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGlwb2QgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuaXBvZC5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIGFuZHJvaWQ/XG4gICAgICAgIGlzLmFuZHJvaWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvYW5kcm9pZC9pLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gYW5kcm9pZCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgICAgICBpcy5hbmRyb2lkLmFwaSA9IFsnbm90J107XG5cbiAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgYW5kcm9pZCBwaG9uZT9cbiAgICAgICAgaXMuYW5kcm9pZFBob25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL2FuZHJvaWQvaS50ZXN0KHVzZXJBZ2VudCkgJiYgL21vYmlsZS9pLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gYW5kcm9pZFBob25lIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgICAgIGlzLmFuZHJvaWRQaG9uZS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIGFuZHJvaWQgdGFibGV0P1xuICAgICAgICBpcy5hbmRyb2lkVGFibGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL2FuZHJvaWQvaS50ZXN0KHVzZXJBZ2VudCkgJiYgIS9tb2JpbGUvaS50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGFuZHJvaWRUYWJsZXQgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuYW5kcm9pZFRhYmxldC5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIGJsYWNrYmVycnk/XG4gICAgICAgIGlzLmJsYWNrYmVycnkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodXNlckFnZW50KSB8fCAvQkIxMC9pLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gYmxhY2tiZXJyeSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgICAgICBpcy5ibGFja2JlcnJ5LmFwaSA9IFsnbm90J107XG5cbiAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2UgZGVza3RvcD9cbiAgICAgICAgaXMuZGVza3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzLm5vdC5tb2JpbGUoKSAmJiBpcy5ub3QudGFibGV0KCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGRlc2t0b3AgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMuZGVza3RvcC5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgb3BlcmF0aW5nIHN5c3RlbSBsaW51eD9cbiAgICAgICAgaXMubGludXggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvbGludXgvaS50ZXN0KGFwcFZlcnNpb24pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBsaW51eCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgICAgICBpcy5saW51eC5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgb3BlcmF0aW5nIHN5c3RlbSBtYWM/XG4gICAgICAgIGlzLm1hYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9tYWMvaS50ZXN0KGFwcFZlcnNpb24pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBtYWMgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMubWFjLmFwaSA9IFsnbm90J107XG5cbiAgICAgICAgLy8gaXMgY3VycmVudCBvcGVyYXRpbmcgc3lzdGVtIHdpbmRvd3M/XG4gICAgICAgIGlzLndpbmRvd3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvd2luL2kudGVzdChhcHBWZXJzaW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gd2luZG93cyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgICAgICBpcy53aW5kb3dzLmFwaSA9IFsnbm90J107XG5cbiAgICAgICAgLy8gaXMgY3VycmVudCBkZXZpY2Ugd2luZG93cyBwaG9uZT9cbiAgICAgICAgaXMud2luZG93c1Bob25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaXMud2luZG93cygpICYmIC9waG9uZS9pLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gd2luZG93c1Bob25lIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgICAgIGlzLndpbmRvd3NQaG9uZS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIHdpbmRvd3MgdGFibGV0P1xuICAgICAgICBpcy53aW5kb3dzVGFibGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaXMud2luZG93cygpICYmIGlzLm5vdC53aW5kb3dzUGhvbmUoKSAmJiAvdG91Y2gvaS50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHdpbmRvd3NUYWJsZXQgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMud2luZG93c1RhYmxldC5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIG1vYmlsZT9cbiAgICAgICAgaXMubW9iaWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaXMuaXBob25lKCkgfHwgaXMuaXBvZCgpIHx8IGlzLmFuZHJvaWRQaG9uZSgpIHx8IGlzLmJsYWNrYmVycnkoKSB8fCBpcy53aW5kb3dzUGhvbmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gbW9iaWxlIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgICAgIGlzLm1vYmlsZS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgZGV2aWNlIHRhYmxldD9cbiAgICAgICAgaXMudGFibGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaXMuaXBhZCgpIHx8IGlzLmFuZHJvaWRUYWJsZXQoKSB8fCBpcy53aW5kb3dzVGFibGV0KCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHRhYmxldCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgICAgICBpcy50YWJsZXQuYXBpID0gWydub3QnXTtcblxuICAgICAgICAvLyBpcyBjdXJyZW50IHN0YXRlIG9ubGluZT9cbiAgICAgICAgaXMub25saW5lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm9uTGluZTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gb25saW5lIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgICAgIGlzLm9ubGluZS5hcGkgPSBbJ25vdCddO1xuXG4gICAgICAgIC8vIGlzIGN1cnJlbnQgc3RhdGUgb2ZmbGluZT9cbiAgICAgICAgaXMub2ZmbGluZSA9IG5vdChpcy5vbmxpbmUpO1xuICAgICAgICAvLyBvZmZsaW5lIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICdhbGwnIGFuZCAnYW55JyBpbnRlcmZhY2VzXG4gICAgICAgIGlzLm9mZmxpbmUuYXBpID0gWydub3QnXTtcblxuICAgICAgICAvLyBpcyBjdXJyZW50IGRldmljZSBzdXBwb3J0cyB0b3VjaD9cbiAgICAgICAgaXMudG91Y2hEZXZpY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwnRG9jdW1lbnRUb3VjaCcgaW4gd2luZG93ICYmIGRvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gdG91Y2hEZXZpY2UgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgJ2FsbCcgYW5kICdhbnknIGludGVyZmFjZXNcbiAgICAgICAgaXMudG91Y2hEZXZpY2UuYXBpID0gWydub3QnXTtcbiAgICB9XG5cbiAgICAvLyBPYmplY3QgY2hlY2tzXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAgIC8vIGhhcyBhIGdpdmVuIG9iamVjdCBnb3QgcGFyYW1ldGVyaXplZCBjb3VudCBwcm9wZXJ0eT9cbiAgICBpcy5wcm9wZXJ0eUNvdW50ID0gZnVuY3Rpb24ob2JqLCBjb3VudCkge1xuICAgICAgICBpZighaXMub2JqZWN0KG9iaikgfHwgIWlzLm51bWJlcihjb3VudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZihPYmplY3Qua2V5cykge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSBjb3VudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvcGVydGllcyA9IFtdLFxuICAgICAgICAgICAgcHJvcGVydHk7XG4gICAgICAgIGZvcihwcm9wZXJ0eSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKHByb3BlcnR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcGVydGllcy5sZW5ndGggPT09IGNvdW50O1xuICAgIH07XG4gICAgLy8gcHJvcGVydHlDb3VudCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLnByb3BlcnR5Q291bnQuYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGdpdmVuIG9iamVjdCBoYXMgcGFyYW1ldGVyaXplZCBwcm9wZXJ0eT9cbiAgICBpcy5wcm9wZXJ0eURlZmluZWQgPSBmdW5jdGlvbihvYmosIHByb3BlcnR5KSB7XG4gICAgICAgIHJldHVybiBpcy5vYmplY3Qob2JqKSAmJiBpcy5zdHJpbmcocHJvcGVydHkpICYmIHByb3BlcnR5IGluIG9iajtcbiAgICB9O1xuICAgIC8vIHByb3BlcnR5RGVmaW5lZCBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLnByb3BlcnR5RGVmaW5lZC5hcGkgPSBbJ25vdCddO1xuXG4gICAgLy8gaXMgYSBnaXZlbiBvYmplY3Qgd2luZG93P1xuICAgIC8vIHNldEludGVydmFsIG1ldGhvZCBpcyBvbmx5IGF2YWlsYWJsZSBmb3Igd2luZG93IG9iamVjdFxuICAgIGlzLndpbmRvd09iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgJ3NldEludGVydmFsJyBpbiBvYmo7XG4gICAgfTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gb2JqZWN0IGEgRE9NIG5vZGU/XG4gICAgaXMuZG9tTm9kZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICByZXR1cm4gaXMub2JqZWN0KG9iaikgJiYgb2JqLm5vZGVUeXBlID4gMDtcbiAgICB9O1xuXG4gICAgLy8gQXJyYXkgY2hlY2tzXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAgIC8vIGlzIGEgZ2l2ZW4gaXRlbSBpbiBhbiBhcnJheT9cbiAgICBpcy5pbkFycmF5ID0gZnVuY3Rpb24odmFsLCBhcnIpe1xuICAgICAgICBpZihpcy5ub3QuYXJyYXkoYXJyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhcnJbaV0gPT09IHZhbCkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLy8gaW5BcnJheSBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlc1xuICAgIGlzLmluQXJyYXkuYXBpID0gWydub3QnXTtcblxuICAgIC8vIGlzIGEgZ2l2ZW4gYXJyYXkgc29ydGVkP1xuICAgIGlzLnNvcnRlZCA9IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZihpcy5ub3QuYXJyYXkoYXJyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmKGFycltpXSA+IGFycltpICsgMV0pIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gQVBJXG4gICAgLy8gU2V0ICdub3QnLCAnYWxsJyBhbmQgJ2FueScgaW50ZXJmYWNlcyB0byBtZXRob2RzIGJhc2VkIG9uIHRoZWlyIGFwaSBwcm9wZXJ0eVxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgICBmdW5jdGlvbiBzZXRJbnRlcmZhY2VzKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGlzO1xuICAgICAgICBmb3IodmFyIG9wdGlvbiBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIG9wdGlvbikgJiYgaXMuZnVuY3Rpb24ob3B0aW9uc1tvcHRpb25dKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnRlcmZhY2VzID0gb3B0aW9uc1tvcHRpb25dLmFwaSB8fCBbJ25vdCcsICdhbGwnLCAnYW55J107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRlcmZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGludGVyZmFjZXNbaV0gPT09ICdub3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcy5ub3Rbb3B0aW9uXSA9IG5vdChpc1tvcHRpb25dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihpbnRlcmZhY2VzW2ldID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXMuYWxsW29wdGlvbl0gPSBhbGwoaXNbb3B0aW9uXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoaW50ZXJmYWNlc1tpXSA9PT0gJ2FueScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzLmFueVtvcHRpb25dID0gYW55KGlzW29wdGlvbl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldEludGVyZmFjZXMoKTtcblxuICAgIC8vIENvbmZpZ3VyYXRpb24gbWV0aG9kc1xuICAgIC8vIEludGVudGlvbmFsbHkgYWRkZWQgYWZ0ZXIgc2V0SW50ZXJmYWNlcyBmdW5jdGlvblxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgICAvLyBzZXQgb3B0aW9uYWwgcmVnZXhwcyB0byBtZXRob2RzIGlmIHlvdSB0aGluayB0aGV5IHN1Y2tcbiAgICBpcy5zZXRSZWdleHAgPSBmdW5jdGlvbihyZWdleHAsIHJlZ2V4cE5hbWUpIHtcbiAgICAgICAgZm9yKHZhciByIGluIHJlZ2V4cHMpIHtcbiAgICAgICAgICAgIGlmKGhhc093blByb3BlcnR5LmNhbGwocmVnZXhwcywgcikgJiYgKHJlZ2V4cE5hbWUgPT09IHIpKSB7XG4gICAgICAgICAgICAgICAgcmVnZXhwc1tyXSA9IHJlZ2V4cDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBjaGFuZ2UgbmFtZXNwYWNlIG9mIGxpYnJhcnkgdG8gcHJldmVudCBuYW1lIGNvbGxpc2lvbnNcbiAgICAvLyB2YXIgcHJlZmVycmVkTmFtZSA9IGlzLnNldE5hbWVzcGFjZSgpO1xuICAgIC8vIHByZWZlcnJlZE5hbWUub2RkKDMpO1xuICAgIC8vID0+IHRydWVcbiAgICBpcy5zZXROYW1lc3BhY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcm9vdC5pcyA9IHByZXZpb3VzSXM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICByZXR1cm4gaXM7XG59KSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2lzX2pzL2lzLmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxudmFyIGlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KGFycikge1xuXHRpZiAodHlwZW9mIEFycmF5LmlzQXJyYXkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpO1xuXHR9XG5cblx0cmV0dXJuIHRvU3RyLmNhbGwoYXJyKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbnZhciBpc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0aWYgKCFvYmogfHwgdG9TdHIuY2FsbChvYmopICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZhciBoYXNPd25Db25zdHJ1Y3RvciA9IGhhc093bi5jYWxsKG9iaiwgJ2NvbnN0cnVjdG9yJyk7XG5cdHZhciBoYXNJc1Byb3RvdHlwZU9mID0gb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgJiYgaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgJ2lzUHJvdG90eXBlT2YnKTtcblx0Ly8gTm90IG93biBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBtdXN0IGJlIE9iamVjdFxuXHRpZiAob2JqLmNvbnN0cnVjdG9yICYmICFoYXNPd25Db25zdHJ1Y3RvciAmJiAhaGFzSXNQcm90b3R5cGVPZikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vIE93biBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhdGVkIGZpcnN0bHksIHNvIHRvIHNwZWVkIHVwLFxuXHQvLyBpZiBsYXN0IG9uZSBpcyBvd24sIHRoZW4gYWxsIHByb3BlcnRpZXMgYXJlIG93bi5cblx0dmFyIGtleTtcblx0Zm9yIChrZXkgaW4gb2JqKSB7IC8qKi8gfVxuXG5cdHJldHVybiB0eXBlb2Yga2V5ID09PSAndW5kZWZpbmVkJyB8fCBoYXNPd24uY2FsbChvYmosIGtleSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGV4dGVuZCgpIHtcblx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lO1xuXHR2YXIgdGFyZ2V0ID0gYXJndW1lbnRzWzBdO1xuXHR2YXIgaSA9IDE7XG5cdHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuXHR2YXIgZGVlcCA9IGZhbHNlO1xuXG5cdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0aWYgKHR5cGVvZiB0YXJnZXQgPT09ICdib29sZWFuJykge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzFdIHx8IHt9O1xuXHRcdC8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHRpID0gMjtcblx0fVxuXHRpZiAodGFyZ2V0ID09IG51bGwgfHwgKHR5cGVvZiB0YXJnZXQgIT09ICdvYmplY3QnICYmIHR5cGVvZiB0YXJnZXQgIT09ICdmdW5jdGlvbicpKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHRmb3IgKDsgaSA8IGxlbmd0aDsgKytpKSB7XG5cdFx0b3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcblx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0aWYgKG9wdGlvbnMgIT0gbnVsbCkge1xuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yIChuYW1lIGluIG9wdGlvbnMpIHtcblx0XHRcdFx0c3JjID0gdGFyZ2V0W25hbWVdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1tuYW1lXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICh0YXJnZXQgIT09IGNvcHkpIHtcblx0XHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0XHRpZiAoZGVlcCAmJiBjb3B5ICYmIChpc1BsYWluT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9IGlzQXJyYXkoY29weSkpKSkge1xuXHRcdFx0XHRcdFx0aWYgKGNvcHlJc0FycmF5KSB7XG5cdFx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdFx0dGFyZ2V0W25hbWVdID0gZXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KTtcblxuXHRcdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBjb3B5ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdFx0dGFyZ2V0W25hbWVdID0gY29weTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vZXh0ZW5kL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgY2xvbmUgPSAoZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9pbnN0YW5jZW9mKG9iaiwgdHlwZSkge1xuICByZXR1cm4gdHlwZSAhPSBudWxsICYmIG9iaiBpbnN0YW5jZW9mIHR5cGU7XG59XG5cbnZhciBuYXRpdmVNYXA7XG50cnkge1xuICBuYXRpdmVNYXAgPSBNYXA7XG59IGNhdGNoKF8pIHtcbiAgLy8gbWF5YmUgYSByZWZlcmVuY2UgZXJyb3IgYmVjYXVzZSBubyBgTWFwYC4gR2l2ZSBpdCBhIGR1bW15IHZhbHVlIHRoYXQgbm9cbiAgLy8gdmFsdWUgd2lsbCBldmVyIGJlIGFuIGluc3RhbmNlb2YuXG4gIG5hdGl2ZU1hcCA9IGZ1bmN0aW9uKCkge307XG59XG5cbnZhciBuYXRpdmVTZXQ7XG50cnkge1xuICBuYXRpdmVTZXQgPSBTZXQ7XG59IGNhdGNoKF8pIHtcbiAgbmF0aXZlU2V0ID0gZnVuY3Rpb24oKSB7fTtcbn1cblxudmFyIG5hdGl2ZVByb21pc2U7XG50cnkge1xuICBuYXRpdmVQcm9taXNlID0gUHJvbWlzZTtcbn0gY2F0Y2goXykge1xuICBuYXRpdmVQcm9taXNlID0gZnVuY3Rpb24oKSB7fTtcbn1cblxuLyoqXG4gKiBDbG9uZXMgKGNvcGllcykgYW4gT2JqZWN0IHVzaW5nIGRlZXAgY29weWluZy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHN1cHBvcnRzIGNpcmN1bGFyIHJlZmVyZW5jZXMgYnkgZGVmYXVsdCwgYnV0IGlmIHlvdSBhcmUgY2VydGFpblxuICogdGhlcmUgYXJlIG5vIGNpcmN1bGFyIHJlZmVyZW5jZXMgaW4geW91ciBvYmplY3QsIHlvdSBjYW4gc2F2ZSBzb21lIENQVSB0aW1lXG4gKiBieSBjYWxsaW5nIGNsb25lKG9iaiwgZmFsc2UpLlxuICpcbiAqIENhdXRpb246IGlmIGBjaXJjdWxhcmAgaXMgZmFsc2UgYW5kIGBwYXJlbnRgIGNvbnRhaW5zIGNpcmN1bGFyIHJlZmVyZW5jZXMsXG4gKiB5b3VyIHByb2dyYW0gbWF5IGVudGVyIGFuIGluZmluaXRlIGxvb3AgYW5kIGNyYXNoLlxuICpcbiAqIEBwYXJhbSBgcGFyZW50YCAtIHRoZSBvYmplY3QgdG8gYmUgY2xvbmVkXG4gKiBAcGFyYW0gYGNpcmN1bGFyYCAtIHNldCB0byB0cnVlIGlmIHRoZSBvYmplY3QgdG8gYmUgY2xvbmVkIG1heSBjb250YWluXG4gKiAgICBjaXJjdWxhciByZWZlcmVuY2VzLiAob3B0aW9uYWwgLSB0cnVlIGJ5IGRlZmF1bHQpXG4gKiBAcGFyYW0gYGRlcHRoYCAtIHNldCB0byBhIG51bWJlciBpZiB0aGUgb2JqZWN0IGlzIG9ubHkgdG8gYmUgY2xvbmVkIHRvXG4gKiAgICBhIHBhcnRpY3VsYXIgZGVwdGguIChvcHRpb25hbCAtIGRlZmF1bHRzIHRvIEluZmluaXR5KVxuICogQHBhcmFtIGBwcm90b3R5cGVgIC0gc2V0cyB0aGUgcHJvdG90eXBlIHRvIGJlIHVzZWQgd2hlbiBjbG9uaW5nIGFuIG9iamVjdC5cbiAqICAgIChvcHRpb25hbCAtIGRlZmF1bHRzIHRvIHBhcmVudCBwcm90b3R5cGUpLlxuICogQHBhcmFtIGBpbmNsdWRlTm9uRW51bWVyYWJsZWAgLSBzZXQgdG8gdHJ1ZSBpZiB0aGUgbm9uLWVudW1lcmFibGUgcHJvcGVydGllc1xuICogICAgc2hvdWxkIGJlIGNsb25lZCBhcyB3ZWxsLiBOb24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9uIHRoZSBwcm90b3R5cGVcbiAqICAgIGNoYWluIHdpbGwgYmUgaWdub3JlZC4gKG9wdGlvbmFsIC0gZmFsc2UgYnkgZGVmYXVsdClcbiovXG5mdW5jdGlvbiBjbG9uZShwYXJlbnQsIGNpcmN1bGFyLCBkZXB0aCwgcHJvdG90eXBlLCBpbmNsdWRlTm9uRW51bWVyYWJsZSkge1xuICBpZiAodHlwZW9mIGNpcmN1bGFyID09PSAnb2JqZWN0Jykge1xuICAgIGRlcHRoID0gY2lyY3VsYXIuZGVwdGg7XG4gICAgcHJvdG90eXBlID0gY2lyY3VsYXIucHJvdG90eXBlO1xuICAgIGluY2x1ZGVOb25FbnVtZXJhYmxlID0gY2lyY3VsYXIuaW5jbHVkZU5vbkVudW1lcmFibGU7XG4gICAgY2lyY3VsYXIgPSBjaXJjdWxhci5jaXJjdWxhcjtcbiAgfVxuICAvLyBtYWludGFpbiB0d28gYXJyYXlzIGZvciBjaXJjdWxhciByZWZlcmVuY2VzLCB3aGVyZSBjb3JyZXNwb25kaW5nIHBhcmVudHNcbiAgLy8gYW5kIGNoaWxkcmVuIGhhdmUgdGhlIHNhbWUgaW5kZXhcbiAgdmFyIGFsbFBhcmVudHMgPSBbXTtcbiAgdmFyIGFsbENoaWxkcmVuID0gW107XG5cbiAgdmFyIHVzZUJ1ZmZlciA9IHR5cGVvZiBCdWZmZXIgIT0gJ3VuZGVmaW5lZCc7XG5cbiAgaWYgKHR5cGVvZiBjaXJjdWxhciA9PSAndW5kZWZpbmVkJylcbiAgICBjaXJjdWxhciA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBkZXB0aCA9PSAndW5kZWZpbmVkJylcbiAgICBkZXB0aCA9IEluZmluaXR5O1xuXG4gIC8vIHJlY3Vyc2UgdGhpcyBmdW5jdGlvbiBzbyB3ZSBkb24ndCByZXNldCBhbGxQYXJlbnRzIGFuZCBhbGxDaGlsZHJlblxuICBmdW5jdGlvbiBfY2xvbmUocGFyZW50LCBkZXB0aCkge1xuICAgIC8vIGNsb25pbmcgbnVsbCBhbHdheXMgcmV0dXJucyBudWxsXG4gICAgaWYgKHBhcmVudCA9PT0gbnVsbClcbiAgICAgIHJldHVybiBudWxsO1xuXG4gICAgaWYgKGRlcHRoID09PSAwKVxuICAgICAgcmV0dXJuIHBhcmVudDtcblxuICAgIHZhciBjaGlsZDtcbiAgICB2YXIgcHJvdG87XG4gICAgaWYgKHR5cGVvZiBwYXJlbnQgIT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuXG4gICAgaWYgKF9pbnN0YW5jZW9mKHBhcmVudCwgbmF0aXZlTWFwKSkge1xuICAgICAgY2hpbGQgPSBuZXcgbmF0aXZlTWFwKCk7XG4gICAgfSBlbHNlIGlmIChfaW5zdGFuY2VvZihwYXJlbnQsIG5hdGl2ZVNldCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IG5hdGl2ZVNldCgpO1xuICAgIH0gZWxzZSBpZiAoX2luc3RhbmNlb2YocGFyZW50LCBuYXRpdmVQcm9taXNlKSkge1xuICAgICAgY2hpbGQgPSBuZXcgbmF0aXZlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHBhcmVudC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmVzb2x2ZShfY2xvbmUodmFsdWUsIGRlcHRoIC0gMSkpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICByZWplY3QoX2Nsb25lKGVyciwgZGVwdGggLSAxKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjbG9uZS5fX2lzQXJyYXkocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBbXTtcbiAgICB9IGVsc2UgaWYgKGNsb25lLl9faXNSZWdFeHAocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBuZXcgUmVnRXhwKHBhcmVudC5zb3VyY2UsIF9fZ2V0UmVnRXhwRmxhZ3MocGFyZW50KSk7XG4gICAgICBpZiAocGFyZW50Lmxhc3RJbmRleCkgY2hpbGQubGFzdEluZGV4ID0gcGFyZW50Lmxhc3RJbmRleDtcbiAgICB9IGVsc2UgaWYgKGNsb25lLl9faXNEYXRlKHBhcmVudCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IERhdGUocGFyZW50LmdldFRpbWUoKSk7XG4gICAgfSBlbHNlIGlmICh1c2VCdWZmZXIgJiYgQnVmZmVyLmlzQnVmZmVyKHBhcmVudCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IEJ1ZmZlcihwYXJlbnQubGVuZ3RoKTtcbiAgICAgIHBhcmVudC5jb3B5KGNoaWxkKTtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9IGVsc2UgaWYgKF9pbnN0YW5jZW9mKHBhcmVudCwgRXJyb3IpKSB7XG4gICAgICBjaGlsZCA9IE9iamVjdC5jcmVhdGUocGFyZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBwcm90b3R5cGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGFyZW50KTtcbiAgICAgICAgY2hpbGQgPSBPYmplY3QuY3JlYXRlKHByb3RvKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjaGlsZCA9IE9iamVjdC5jcmVhdGUocHJvdG90eXBlKTtcbiAgICAgICAgcHJvdG8gPSBwcm90b3R5cGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNpcmN1bGFyKSB7XG4gICAgICB2YXIgaW5kZXggPSBhbGxQYXJlbnRzLmluZGV4T2YocGFyZW50KTtcblxuICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgIHJldHVybiBhbGxDaGlsZHJlbltpbmRleF07XG4gICAgICB9XG4gICAgICBhbGxQYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIGFsbENoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgIH1cblxuICAgIGlmIChfaW5zdGFuY2VvZihwYXJlbnQsIG5hdGl2ZU1hcCkpIHtcbiAgICAgIHBhcmVudC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgdmFyIGtleUNoaWxkID0gX2Nsb25lKGtleSwgZGVwdGggLSAxKTtcbiAgICAgICAgdmFyIHZhbHVlQ2hpbGQgPSBfY2xvbmUodmFsdWUsIGRlcHRoIC0gMSk7XG4gICAgICAgIGNoaWxkLnNldChrZXlDaGlsZCwgdmFsdWVDaGlsZCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKF9pbnN0YW5jZW9mKHBhcmVudCwgbmF0aXZlU2V0KSkge1xuICAgICAgcGFyZW50LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIGVudHJ5Q2hpbGQgPSBfY2xvbmUodmFsdWUsIGRlcHRoIC0gMSk7XG4gICAgICAgIGNoaWxkLmFkZChlbnRyeUNoaWxkKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgaW4gcGFyZW50KSB7XG4gICAgICB2YXIgYXR0cnM7XG4gICAgICBpZiAocHJvdG8pIHtcbiAgICAgICAgYXR0cnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGF0dHJzICYmIGF0dHJzLnNldCA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY2hpbGRbaV0gPSBfY2xvbmUocGFyZW50W2ldLCBkZXB0aCAtIDEpO1xuICAgIH1cblxuICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocGFyZW50KTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBEb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IGNsb25pbmcgYSBzeW1ib2wgYmVjYXVzZSBpdCBpcyBhIHByaW1pdGl2ZSxcbiAgICAgICAgLy8gbGlrZSBhIG51bWJlciBvciBzdHJpbmcuXG4gICAgICAgIHZhciBzeW1ib2wgPSBzeW1ib2xzW2ldO1xuICAgICAgICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocGFyZW50LCBzeW1ib2wpO1xuICAgICAgICBpZiAoZGVzY3JpcHRvciAmJiAhZGVzY3JpcHRvci5lbnVtZXJhYmxlICYmICFpbmNsdWRlTm9uRW51bWVyYWJsZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkW3N5bWJvbF0gPSBfY2xvbmUocGFyZW50W3N5bWJvbF0sIGRlcHRoIC0gMSk7XG4gICAgICAgIGlmICghZGVzY3JpcHRvci5lbnVtZXJhYmxlKSB7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoaWxkLCBzeW1ib2wsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5jbHVkZU5vbkVudW1lcmFibGUpIHtcbiAgICAgIHZhciBhbGxQcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocGFyZW50KTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsUHJvcGVydHlOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gYWxsUHJvcGVydHlOYW1lc1tpXTtcbiAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHBhcmVudCwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5lbnVtZXJhYmxlKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRbcHJvcGVydHlOYW1lXSA9IF9jbG9uZShwYXJlbnRbcHJvcGVydHlOYW1lXSwgZGVwdGggLSAxKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoaWxkLCBwcm9wZXJ0eU5hbWUsIHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGQ7XG4gIH1cblxuICByZXR1cm4gX2Nsb25lKHBhcmVudCwgZGVwdGgpO1xufVxuXG4vKipcbiAqIFNpbXBsZSBmbGF0IGNsb25lIHVzaW5nIHByb3RvdHlwZSwgYWNjZXB0cyBvbmx5IG9iamVjdHMsIHVzZWZ1bGwgZm9yIHByb3BlcnR5XG4gKiBvdmVycmlkZSBvbiBGTEFUIGNvbmZpZ3VyYXRpb24gb2JqZWN0IChubyBuZXN0ZWQgcHJvcHMpLlxuICpcbiAqIFVTRSBXSVRIIENBVVRJT04hIFRoaXMgbWF5IG5vdCBiZWhhdmUgYXMgeW91IHdpc2ggaWYgeW91IGRvIG5vdCBrbm93IGhvdyB0aGlzXG4gKiB3b3Jrcy5cbiAqL1xuY2xvbmUuY2xvbmVQcm90b3R5cGUgPSBmdW5jdGlvbiBjbG9uZVByb3RvdHlwZShwYXJlbnQpIHtcbiAgaWYgKHBhcmVudCA9PT0gbnVsbClcbiAgICByZXR1cm4gbnVsbDtcblxuICB2YXIgYyA9IGZ1bmN0aW9uICgpIHt9O1xuICBjLnByb3RvdHlwZSA9IHBhcmVudDtcbiAgcmV0dXJuIG5ldyBjKCk7XG59O1xuXG4vLyBwcml2YXRlIHV0aWxpdHkgZnVuY3Rpb25zXG5cbmZ1bmN0aW9uIF9fb2JqVG9TdHIobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuY2xvbmUuX19vYmpUb1N0ciA9IF9fb2JqVG9TdHI7XG5cbmZ1bmN0aW9uIF9faXNEYXRlKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiBfX29ialRvU3RyKG8pID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5jbG9uZS5fX2lzRGF0ZSA9IF9faXNEYXRlO1xuXG5mdW5jdGlvbiBfX2lzQXJyYXkobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIF9fb2JqVG9TdHIobykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5jbG9uZS5fX2lzQXJyYXkgPSBfX2lzQXJyYXk7XG5cbmZ1bmN0aW9uIF9faXNSZWdFeHAobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIF9fb2JqVG9TdHIobykgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuY2xvbmUuX19pc1JlZ0V4cCA9IF9faXNSZWdFeHA7XG5cbmZ1bmN0aW9uIF9fZ2V0UmVnRXhwRmxhZ3MocmUpIHtcbiAgdmFyIGZsYWdzID0gJyc7XG4gIGlmIChyZS5nbG9iYWwpIGZsYWdzICs9ICdnJztcbiAgaWYgKHJlLmlnbm9yZUNhc2UpIGZsYWdzICs9ICdpJztcbiAgaWYgKHJlLm11bHRpbGluZSkgZmxhZ3MgKz0gJ20nO1xuICByZXR1cm4gZmxhZ3M7XG59XG5jbG9uZS5fX2dldFJlZ0V4cEZsYWdzID0gX19nZXRSZWdFeHBGbGFncztcblxucmV0dXJuIGNsb25lO1xufSkoKTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gY2xvbmU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nsb25lL2Nsb25lLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG4ndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuLypcbiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cbiAqL1xuZXhwb3J0cy5rTWF4TGVuZ3RoID0ga01heExlbmd0aCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuX19wcm90b19fID0ge19fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsIGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfX1cbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoa01heExlbmd0aCgpIDwgbGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcbiAgfVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICBpZiAodGhhdCA9PT0gbnVsbCkge1xuICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICAgIH1cbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKHRoaXMsIGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxuLy8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gZnJvbSAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcbiAgfVxuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoYXQsIHZhbHVlKVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG4gKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cbiAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuICogQnVmZmVyLmZyb20oYnVmZmVyKVxuICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG4gKiovXG5CdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxuICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG4gICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTdcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJylcbiAgfVxufVxuXG5mdW5jdGlvbiBhbGxvYyAodGhhdCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICBpZiAoc2l6ZSA8PSAwKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuICB9XG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcbiAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gU2xvd0J1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICovXG5CdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgfVxuXG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXG4gIHZhciBhY3R1YWwgPSB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cbiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG4gICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG4gICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cbiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcbiAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ2xlbmd0aFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcbiAgfSBlbHNlIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gYXJyYXlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMFxuICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuKVxuXG4gICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhhdFxuICAgIH1cblxuICAgIG9iai5jb3B5KHRoYXQsIDAsIDAsIGxlbilcbiAgICByZXR1cm4gdGhhdFxuICB9XG5cbiAgaWYgKG9iaikge1xuICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApXG4gICAgICB9XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG4gICAgfVxuXG4gICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpXG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG4gICAgbGVuZ3RoID0gMFxuICB9XG4gIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aClcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldXG4gICAgICB5ID0gYltpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVmID0gbGlzdFtpXVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nXG4gIH1cblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcbiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblxuICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmRcbiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxuICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoZW5kIDw9IDApIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXG4gIGVuZCA+Pj49IDBcbiAgc3RhcnQgPj4+PSAwXG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cbmZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcbiAgdmFyIGkgPSBiW25dXG4gIGJbbl0gPSBiW21dXG4gIGJbbV0gPSBpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgNCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDggIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KVxuICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KVxuICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIH1cblxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMFxuICB9XG4gIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xXG4gIH1cbiAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBzdGFydCA+Pj49IDBcbiAgZW5kID4+Pj0gMFxuICB0aGlzU3RhcnQgPj4+PSAwXG4gIHRoaXNFbmQgPj4+PSAwXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcbiAgdmFyIHkgPSBlbmQgLSBzdGFydFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG4gICAgICB4ID0gdGhpc0NvcHlbaV1cbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cbi8vXG4vLyBBcmd1bWVudHM6XG4vLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuLy8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcbi8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG4gICAgYnl0ZU9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG4gICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJlxuICAgICAgICB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICB2YXIgaW5kZXhTaXplID0gMVxuICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aFxuICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXG4gIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9XG4gICAgICBpbmRleFNpemUgPSAyXG4gICAgICBhcnJMZW5ndGggLz0gMlxuICAgICAgdmFsTGVuZ3RoIC89IDJcbiAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkge1xuICAgIGlmIChpbmRleFNpemUgPT09IDEpIHtcbiAgICAgIHJldHVybiBidWZbaV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSlcbiAgICB9XG4gIH1cblxuICB2YXIgaVxuICBpZiAoZGlyKSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleFxuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHJldHVybiBpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcbiAgdmFyIHJlcyA9IFtdXG5cbiAgdmFyIGkgPSBzdGFydFxuICB3aGlsZSAoaSA8IGVuZCkge1xuICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG4gICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcbiAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxudmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcbiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuICB9XG5cbiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuICB2YXIgcmVzID0gJydcbiAgdmFyIGkgPSAwXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuXG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcbiAgICBzdGFydCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuXG4gICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICB2YXIgbmV3QnVmXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG4gICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xuICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcbiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgdGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcbiAgICAgIHRhcmdldCxcbiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcbiAgICAgIHRhcmdldFN0YXJ0XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBVc2FnZTpcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcbiAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczpcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gc3RhcnRcbiAgICAgIHN0YXJ0ID0gMFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuZFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcbiAgICAgIGlmIChjb2RlIDwgMjU2KSB7XG4gICAgICAgIHZhbCA9IGNvZGVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAyNTVcbiAgfVxuXG4gIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwXG5cbiAgaWYgKCF2YWwpIHZhbCA9IDBcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICB0aGlzW2ldID0gdmFsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGNvZGVQb2ludFxuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdmFyIGJ5dGVzID0gW11cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuICB9XG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcbiAgdmFyIGMsIGhpLCBsb1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIGlzbmFuICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2J1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfFxuICAgICAgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDIpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID1cbiAgICAgICgodWludDhbaV0gPDwgMTYpICYgMHhGRjAwMDApICtcbiAgICAgICgodWludDhbaSArIDFdIDw8IDgpICYgMHhGRjAwKSArXG4gICAgICAodWludDhbaSArIDJdICYgMHhGRilcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayhcbiAgICAgIHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aClcbiAgICApKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG4gICAgICAnPT0nXG4gICAgKVxuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDEwXSArXG4gICAgICBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gK1xuICAgICAgJz0nXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Jhc2U2NC1qcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIG5CaXRzID0gLTdcbiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcbiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblxuICBpICs9IGRcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBzID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBlTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSAoZSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSAobSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcbiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcbiAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG4gICAgZSA9IGVNYXhcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS1cbiAgICAgIGMgKj0gMlxuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKytcbiAgICAgIGMgLz0gMlxuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDBcbiAgICAgIGUgPSBlTWF4XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICgodmFsdWUgKiBjKSAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9pZWVlNzU0L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vaXNhcnJheS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSB7XCJuYW1lXCI6XCJscmMtbWFrZXJcIixcInZlcnNpb25cIjpcIjAuMi4yXCIsXCJkZXNjcmlwdGlvblwiOlwibHJjIG1ha2VyXCIsXCJtYWluXCI6XCJpbmRleC5qc1wiLFwic2NyaXB0c1wiOntcInRlc3RcIjpcIm5wbSBydW4gbGludFwiLFwibGludFwiOlwiZXNsaW50IC0tZm9ybWF0ICdub2RlX21vZHVsZXMvZXNsaW50LWZyaWVuZGx5LWZvcm1hdHRlcicgLS1leHQganMsdnVlIHdlYnBhY2suY29uZmlnLmpzIHNyY1wiLFwiZGV2XCI6XCJ3ZWJwYWNrLWRldi1zZXJ2ZXIgLS1ob3N0PScwLjAuMC4wJyAtLXByb2dyZXNzIC0tY29sb3JzIC0taW5saW5lIC0taG90IC0tb3V0cHV0LXB1YmxpYy1wYXRoPScvYXNzZXRzLydcIixcImJ1aWxkXCI6XCJucG0gcnVuIGJ1aWxkOmNsZWFuICYmIG5wbSBydW4gYnVpbGQ6d2VicGFjayAmJiBucG0gcnVuIGJ1aWxkOnZpZXdcIixcImJ1aWxkOmNsZWFuXCI6XCJybSAtcmYgYnVpbGRcIixcImJ1aWxkOnZpZXdcIjpcIiBjcCBpbmRleC5odG1sIGJ1aWxkL2luZGV4Lmh0bWxcIixcImJ1aWxkOndlYnBhY2tcIjpcIndlYnBhY2sgLS1vcHRpbWl6ZS1taW5pbWl6ZSAtLW91dHB1dC1wdWJsaWMtcGF0aD0nLi9hc3NldHMvJ1wiLFwiZGVwbG95XCI6XCJucG0gcnVuIGJ1aWxkICYmIGdoLXBhZ2VzIC1kIGJ1aWxkXCJ9LFwia2V5d29yZHNcIjpbXCJscmNcIl0sXCJhdXRob3JcIjpcIldlaXJvbmcgWHUgPHdlaXJvbmd4dS5yYWlkb3VAZ21haWwuY29tPlwiLFwiaG9tZXBhZ2VcIjpcImh0dHBzOi8vZ2l0aHViLmNvbS93ZWlyb25neHUvbHJjLW1ha2VyXCIsXCJyZXBvc2l0b3J5XCI6e1widHlwZVwiOlwiZ2l0XCIsXCJ1cmxcIjpcImh0dHBzOi8vZ2l0aHViLmNvbS93ZWlyb25neHUvbHJjLW1ha2VyLmdpdFwifSxcIm9ubGluZVBhZ2VcIjpcImh0dHBzOi8vd2Vpcm9uZ3h1LmdpdGh1Yi5pby9scmMtbWFrZXIvXCIsXCJidWdzXCI6XCJodHRwczovL2dpdGh1Yi5jb20vd2Vpcm9uZ3h1L2xyYy1tYWtlci9pc3N1ZXNcIixcImxpY2Vuc2VcIjpcIk1JVFwiLFwiZGV2RGVwZW5kZW5jaWVzXCI6e1wiYXV0b3ByZWZpeGVyXCI6XCJeNi41LjNcIixcImJhYmVsLWNvcmVcIjpcIl42LjcuNlwiLFwiYmFiZWwtZXNsaW50XCI6XCJeNy4xLjFcIixcImJhYmVsLWhlbHBlci12dWUtanN4LW1lcmdlLXByb3BzXCI6XCJeMi4wLjJcIixcImJhYmVsLWxvYWRlclwiOlwiXjYuMi44XCIsXCJiYWJlbC1wbHVnaW4tc3ludGF4LWpzeFwiOlwiXjYuMTguMFwiLFwiYmFiZWwtcGx1Z2luLXRyYW5zZm9ybS12dWUtanN4XCI6XCJeMy4yLjBcIixcImJhYmVsLXByZXNldC1sYXRlc3RcIjpcIl42LjE2LjBcIixcImJhYmVsLXByZXNldC1zdGFnZS0wXCI6XCJeNi4xNi4wXCIsXCJjc3MtbG9hZGVyXCI6XCJeMC4yNi4wXCIsXCJlc2xpbnRcIjpcIl4zLjEwLjJcIixcImVzbGludC1jb25maWctc3RhbmRhcmRcIjpcIl42LjIuMVwiLFwiZXNsaW50LWZyaWVuZGx5LWZvcm1hdHRlclwiOlwiXjIuMC42XCIsXCJlc2xpbnQtbG9hZGVyXCI6XCJeMS4zLjBcIixcImVzbGludC1wbHVnaW4taHRtbFwiOlwiXjEuNy4wXCIsXCJlc2xpbnQtcGx1Z2luLXByb21pc2VcIjpcIl4zLjQuMFwiLFwiZXNsaW50LXBsdWdpbi1zdGFuZGFyZFwiOlwiXjIuMC4xXCIsXCJmaWxlLWxvYWRlclwiOlwiXjAuOS4wXCIsXCJnaC1wYWdlc1wiOlwiXjAuMTIuMFwiLFwianNvbi1sb2FkZXJcIjpcIl4wLjUuNFwiLFwibm9kZS1zYXNzXCI6XCJeMy4xMy4wXCIsXCJyZXNvbHZlLXVybC1sb2FkZXJcIjpcIl4xLjYuMFwiLFwic2Fzcy1sb2FkZXJcIjpcIl40LjAuMlwiLFwidXJsLWxvYWRlclwiOlwiXjAuNS43XCIsXCJ2dWUtbG9hZGVyXCI6XCJeMTAuMC4xXCIsXCJ2dWUtdGVtcGxhdGUtY29tcGlsZXJcIjpcIl4yLjEuM1wiLFwid2VicGFja1wiOlwiXjEuMTIuMTVcIixcIndlYnBhY2stZGV2LXNlcnZlclwiOlwiXjEuMTQuMVwiLFwieWFtbC1sb2FkZXJcIjpcIl4wLjQuMFwifSxcImRlcGVuZGVuY2llc1wiOntcImNsb25lXCI6XCJeMi4xLjBcIixcImV2ZW50ZW1pdHRlcjJcIjpcIl4yLjIuMVwiLFwiZXh0ZW5kXCI6XCJeMy4wLjBcIixcImZpbGVzYXZlci5qc1wiOlwiXjAuMi4wXCIsXCJscmMta2l0XCI6XCJeMC4yLjBcIixcInVuaWRyYWdnZXJcIjpcIl4yLjEuMFwiLFwidnVlXCI6XCJeMi4xLjNcIixcInZ1ZS1pMThuXCI6XCJeNS4wLjNcIn19XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vcGFja2FnZS5qc29uXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIHtcbiAgICByZWY6IFwiYmFyXCIsXG4gICAgc3RhdGljQ2xhc3M6IFwiYmFyXCIsXG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogX3ZtLmNsaWNrXG4gICAgfVxuICB9LCBbX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJ3cmFwXCJcbiAgfSwgW19jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwidmFsdWVcIixcbiAgICBzdHlsZTogKHtcbiAgICAgIHdpZHRoOiBfdm0uc2VsZlZhbHVlICogMTAwICsgJyUnXG4gICAgfSlcbiAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICByZWY6IFwidGh1bWJcIixcbiAgICBzdGF0aWNDbGFzczogXCJ0aHVtYlwiLFxuICAgIHN0eWxlOiAoe1xuICAgICAgbGVmdDogX3ZtLnNlbGZWYWx1ZSAqIDEwMCArICclJ1xuICAgIH0pXG4gIH0pXSlcbn0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyLmpzP2lkPWRhdGEtdi01ODIwZGU3NCEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FwcC9yYW5nZS52dWVcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuLyogc3R5bGVzICovXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXI/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyP2lkPWRhdGEtdi0zMzVhZTZjYiFzYXNzLWxvYWRlciEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL3RpbWUtcGFuZWwudnVlXCIpXG5cbnZhciBDb21wb25lbnQgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9jb21wb25lbnQtbm9ybWFsaXplclwiKShcbiAgLyogc2NyaXB0ICovXG4gIHJlcXVpcmUoXCIhIWJhYmVsLWxvYWRlciEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL3RpbWUtcGFuZWwudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTMzNWFlNmNiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi90aW1lLXBhbmVsLnZ1ZVwiKSxcbiAgLyogc2NvcGVJZCAqL1xuICBudWxsLFxuICAvKiBjc3NNb2R1bGVzICovXG4gIG51bGxcbilcblxubW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvdGltZS1wYW5lbC52dWVcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTMzNWFlNmNiIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL3RpbWUtcGFuZWwudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCIzMWQ5MGNlNlwiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTMzNWFlNmNiIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL3RpbWUtcGFuZWwudnVlXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJcIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtMzM1YWU2Y2IhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9hcHAvdGltZS1wYW5lbC52dWVcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgPGRpdj5cbiAgICA8c3BhbiBAY2xpY2s9XCJyZW1haW4gPSAhcmVtYWluXCI+XG4gICAgICA8dGVtcGxhdGUgdi1pZj1cInJlbWFpblwiPlxuICAgICAgICAte3soZHVyYXRpb24gLSBjdXJyZW50VGltZSkgfCB0aW1lfX1cbiAgICAgIDwvdGVtcGxhdGU+XG4gICAgICA8dGVtcGxhdGUgdi1lbHNlPlxuICAgICAgICB7e2N1cnJlbnRUaW1lIHwgdGltZX19XG4gICAgICA8L3RlbXBsYXRlPlxuICAgIDwvc3Bhbj5cbiAgICAvIHt7ZHVyYXRpb24gfCB0aW1lfX1cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c3R5bGUgbGFuZz1cInNhc3NcIj5cbjwvc3R5bGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQge3RpbWVzdGFtcDJ0aW1lc3RyfSBmcm9tICcuLi91dGlscydcbmltcG9ydCBjYWNoZSBmcm9tICcuLi9jYWNoZSdcblxuZXhwb3J0IGRlZmF1bHQge1xuICBkYXRhICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVtYWluOiBjYWNoZS50aW1lUmVtYWluLFxuICAgIH1cbiAgfSxcbiAgcHJvcHM6IHtcbiAgICBkdXJhdGlvbjoge1xuICAgICAgZGVmYXVsdDogMCxcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICB9LFxuICAgIGN1cnJlbnRUaW1lOiB7XG4gICAgICBkZWZhdWx0OiAwLFxuICAgICAgdHlwZTogTnVtYmVyLFxuICAgIH0sXG4gIH0sXG4gIGZpbHRlcnM6IHtcbiAgICB0aW1lICh0aW1lc3RhbXApIHtcbiAgICAgIHJldHVybiB0aW1lc3RhbXAydGltZXN0cih0aW1lc3RhbXAsIHRydWUpXG4gICAgfSxcbiAgfSxcbiAgd2F0Y2g6IHtcbiAgICByZW1haW4gKHZhbCkge1xuICAgICAgY2FjaGUudGltZVJlbWFpbiA9IHZhbFxuICAgIH0sXG4gIH0sXG59XG48L3NjcmlwdD5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB0aW1lLXBhbmVsLnZ1ZT9lMDM0OWI1ZSIsImltcG9ydCB7Y2FjaGV9IGZyb20gJy4vdXRpbHMnXG5cbmNvbnN0IGNhY2hlTWFwID0ge1xuICBscmNGb3JtYXQ6IHt9LFxuICBseXJpYzoge30sXG4gIGVkaXRpbmc6IHtcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG4gIGx5cmljQXJyYXk6IHtcbiAgICBkZWZhdWx0OiBbXVxuICB9LFxuICB0aW1lUmVtYWluOiB7XG4gICAgZGVmYXVsdDogZmFsc2UsXG4gIH0sXG4gIHVzZXJOYW1lOiB7XG4gICAgZGVmYXVsdDogJycsXG4gIH0sXG59XG5cbnZhciBjYWNoZU9iaiA9IHt9XG5PYmplY3Qua2V5cyhjYWNoZU1hcCkuZm9yRWFjaCgocHJvcCkgPT4ge1xuICBsZXQgY29uZmlnID0gY2FjaGVNYXBbcHJvcF1cbiAgY2FjaGVPYmpbcHJvcF0gPSBjYWNoZS5nZXQoY29uZmlnLm5hbWUgfHwgcHJvcCwgY29uZmlnLmRlZmF1bHQgfHwgJycpXG59KVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUHJveHkoY2FjaGVPYmosIHtcbiAgc2V0OiBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWx1ZSkge1xuICAgIGxldCBjb25maWcgPSBjYWNoZU1hcFtwcm9wXVxuICAgIGNhY2hlLnNldChjb25maWcubmFtZSB8fCBwcm9wLCB2YWx1ZSlcbiAgICBvYmpbcHJvcF0gPSB2YWx1ZVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG59KVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY2FjaGUuanMiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIFtfYygnc3BhbicsIHtcbiAgICBvbjoge1xuICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgX3ZtLnJlbWFpbiA9ICFfdm0ucmVtYWluXG4gICAgICB9XG4gICAgfVxuICB9LCBbKF92bS5yZW1haW4pID8gW192bS5fdihcIlxcbiAgICAgIC1cIiArIF92bS5fcyhfdm0uX2YoXCJ0aW1lXCIpKChfdm0uZHVyYXRpb24gLSBfdm0uY3VycmVudFRpbWUpKSkgKyBcIlxcbiAgICBcIildIDogW192bS5fdihcIlxcbiAgICAgIFwiICsgX3ZtLl9zKF92bS5fZihcInRpbWVcIikoX3ZtLmN1cnJlbnRUaW1lKSkgKyBcIlxcbiAgICBcIildXSwgMiksIF92bS5fdihcIlxcbiAgLyBcIiArIF92bS5fcyhfdm0uX2YoXCJ0aW1lXCIpKF92bS5kdXJhdGlvbikpICsgXCJcXG5cIildKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXIuanM/aWQ9ZGF0YS12LTMzNWFlNmNiIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vYXBwL3RpbWUtcGFuZWwudnVlXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIHtcbiAgICBkaXJlY3RpdmVzOiBbe1xuICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICByYXdOYW1lOiBcInYtc2hvd1wiLFxuICAgICAgdmFsdWU6IChfdm0uc3JjLmxlbmd0aCksXG4gICAgICBleHByZXNzaW9uOiBcInNyYy5sZW5ndGhcIlxuICAgIH1dLFxuICAgIHN0YXRpY0NsYXNzOiBcInJvb3RcIixcbiAgICBjbGFzczoge1xuICAgICAgbW9iaWxlOiBfdm0uaXNNb2JpbGVcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcIm1vdXNlb3ZlclwiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgX3ZtLmhvdmVyID0gdHJ1ZVxuICAgICAgfSxcbiAgICAgIFwibW91c2VsZWF2ZVwiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgX3ZtLmhvdmVyID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcInBsYXllclwiXG4gIH0sIFtfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImN0cmwtYnRuXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidGl0bGVcIjogXCJbU1BBQ0VdXCJcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICBfdm0ucGF1c2VkID0gIV92bS5wYXVzZWRcbiAgICAgIH1cbiAgICB9XG4gIH0sIFsoX3ZtLnBhdXNlZCkgPyBfYygnaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJpY29uLXBsYXlcIlxuICB9KSA6IF9jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tcGF1c2VcIlxuICB9KV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImN0cmwtYnRuXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidGl0bGVcIjogXCJbTEVGVF1cIlxuICAgIH0sXG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIF92bS4kZW1pdCgnYmFja3dhcmQnKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW19jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tYmFja3dhcmRcIlxuICB9KV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImN0cmwtYnRuXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidGl0bGVcIjogXCJbUklHSFRdXCJcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICBfdm0uJGVtaXQoJ2ZvcndhcmQnKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW19jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tZm9yd2FyZFwiXG4gIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCdyYW5nZScsIHtcbiAgICByZWY6IFwibXVzaWNSYW5nZVwiLFxuICAgIHN0YXRpY0NsYXNzOiBcInJhbmdlIG11c2ljXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidmFsdWVcIjogX3ZtLnByb2Nlc3NcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcInNlZWtcIjogX3ZtLnNlZWtcbiAgICB9XG4gIH0pLCBfdm0uX3YoXCIgXCIpLCAoIV92bS5pc01vYmlsZSkgPyBfYygndGltZS1wYW5lbCcsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJkdXJhdGlvblwiOiBfdm0uZHVyYXRpb24sXG4gICAgICBcImN1cnJlbnQtdGltZVwiOiBfdm0uY3VycmVudFRpbWVcbiAgICB9XG4gIH0pIDogX3ZtLl9lKCldLCAxKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3RyYW5zaXRpb24nLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIFwibmFtZVwiOiBcInBsYXllci1tb3JlXCJcbiAgICB9XG4gIH0sIFtfYygnZGl2Jywge1xuICAgIGRpcmVjdGl2ZXM6IFt7XG4gICAgICBuYW1lOiBcInNob3dcIixcbiAgICAgIHJhd05hbWU6IFwidi1zaG93XCIsXG4gICAgICB2YWx1ZTogKF92bS5pc01vYmlsZSB8fCBfdm0uaG92ZXIpLFxuICAgICAgZXhwcmVzc2lvbjogXCJpc01vYmlsZSB8fCBob3ZlclwiXG4gICAgfV0sXG4gICAgc3RhdGljQ2xhc3M6IFwibW9yZVwiXG4gIH0sIFsoX3ZtLmlzTW9iaWxlKSA/IF9jKCd0aW1lLXBhbmVsJywge1xuICAgIGF0dHJzOiB7XG4gICAgICBcImR1cmF0aW9uXCI6IF92bS5kdXJhdGlvbixcbiAgICAgIFwiY3VycmVudC10aW1lXCI6IF92bS5jdXJyZW50VGltZVxuICAgIH1cbiAgfSkgOiBfdm0uX2UoKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJzb3VuZFwiXG4gIH0sIFtfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImN0cmwtYnRuXCIsXG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIF92bS5tdXRlZCA9ICFfdm0ubXV0ZWRcbiAgICAgIH1cbiAgICB9XG4gIH0sIFsoX3ZtLm11dGVkIHx8IF92bS52b2x1bWUgPT0gMCkgPyBfYygnaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJpY29uLXZvbHVtZS1vZmZcIlxuICB9KSA6IF9jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tdm9sdW1lLXVwXCJcbiAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3JhbmdlJywge1xuICAgIHJlZjogXCJzb3VuZFJhbmdlXCIsXG4gICAgc3RhdGljQ2xhc3M6IFwicmFuZ2Ugdm9sdW1lXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidmFsdWVcIjogX3ZtLnZvbHVtZVxuICAgIH0sXG4gICAgb246IHtcbiAgICAgIFwic2Vla1wiOiBfdm0udm9sdW1lU2VlayxcbiAgICAgIFwiZHJhZy1zZWVrXCI6IF92bS52b2x1bWVTZWVrXG4gICAgfVxuICB9KV0sIDEpXSwgMSldKV0sIDEpXG59LHN0YXRpY1JlbmRlckZuczogW119XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlci5qcz9pZD1kYXRhLXYtZDQ4MjUwYjAhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9hcHAvcGxheWVyLnZ1ZVxuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG4vKiBzdHlsZXMgKi9cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXI/aWQ9ZGF0YS12LTNmYjQ0MWJjJnNjb3BlZD10cnVlIXNhc3MtbG9hZGVyIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXN0eWxlcyZpbmRleD0wIS4vbHlyaWMtZWRpdG9yLnZ1ZVwiKVxuXG52YXIgQ29tcG9uZW50ID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXJcIikoXG4gIC8qIHNjcmlwdCAqL1xuICByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9seXJpYy1lZGl0b3IudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTNmYjQ0MWJjIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9seXJpYy1lZGl0b3IudnVlXCIpLFxuICAvKiBzY29wZUlkICovXG4gIFwiZGF0YS12LTNmYjQ0MWJjXCIsXG4gIC8qIGNzc01vZHVsZXMgKi9cbiAgbnVsbFxuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9seXJpYy1lZGl0b3IudnVlXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi0zZmI0NDFiYyZzY29wZWQ9dHJ1ZSEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9seXJpYy1lZGl0b3IudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCIxNWRkNTUyYlwiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTNmYjQ0MWJjJnNjb3BlZD10cnVlIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL2x5cmljLWVkaXRvci52dWVcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcInVsLmx5cmljc1tkYXRhLXYtM2ZiNDQxYmNde2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbjowO3BhZGRpbmc6MDtiYWNrZ3JvdW5kLWNvbG9yOiNmMWYxZjF9dWwubHlyaWNzPmxpW2RhdGEtdi0zZmI0NDFiY117bWluLWhlaWdodDo0MHB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiMyYTcyYmI7cGFkZGluZzoxMHB4IDB9dWwubHlyaWNzPmxpLmN1cltkYXRhLXYtM2ZiNDQxYmNde2NvbG9yOiMyYTcyYmI7dGV4dC1zaGFkb3c6MXB4IDFweCAxcHggI2FhYTtiYWNrZ3JvdW5kLWNvbG9yOiNmYmZiZmJ9dWwubHlyaWNzPmxpOmhvdmVyIC5jb25jZWFsW2RhdGEtdi0zZmI0NDFiY117ZGlzcGxheTppbmxpbmUtYmxvY2t9dWwubHlyaWNzPmxpIC5jb25jZWFsW2RhdGEtdi0zZmI0NDFiY117ZGlzcGxheTpub25lfXVsLmx5cmljcz5saS5kaXZpc2lvbltkYXRhLXYtM2ZiNDQxYmNdLHVsLmx5cmljcz5saS51bnNvcnRlZFtkYXRhLXYtM2ZiNDQxYmNde2JhY2tncm91bmQtY29sb3I6I2YxZjFmMX11bC5seXJpY3M+bGkuZGl2aXNpb25bZGF0YS12LTNmYjQ0MWJjXXtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCU7bWluLWhlaWdodDphdXRvO3BhZGRpbmc6MnB4IDA7Zm9udC1zaXplOjEycHg7dGV4dC1hbGlnbjpjZW50ZXJ9dWwubHlyaWNzLmVkaXRpbmc+bGlbZGF0YS12LTNmYjQ0MWJjXXtwYWRkaW5nOjA7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXh9dWwubHlyaWNzLmVkaXRpbmc+bGkuZGl2aXNpb25bZGF0YS12LTNmYjQ0MWJjXXtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6NHB4IDB9dWwubHlyaWNzLmVkaXRpbmc+bGkgLnRpbWVzdGFtcFtkYXRhLXYtM2ZiNDQxYmNde2NvbG9yOiM3YzlmYmI7d2lkdGg6NjBweDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzpcXFwiLlxcXCJ9dWwubHlyaWNzLmVkaXRpbmc+bGkgLmNvbnRlbnRbZGF0YS12LTNmYjQ0MWJjXXstbXMtZmxleDoxO2ZsZXg6MX11bC5seXJpY3MuZWRpdGluZz5saSAuaWNvbi1idG5bZGF0YS12LTNmYjQ0MWJjXXtwYWRkaW5nLWxlZnQ6NHB4O3BhZGRpbmctcmlnaHQ6NHB4fXVsLmx5cmljcy5lZGl0aW5nPmxpIC5jb250ZW50W2RhdGEtdi0zZmI0NDFiY10sdWwubHlyaWNzLmVkaXRpbmc+bGkgLmljb24tYnRuW2RhdGEtdi0zZmI0NDFiY10sdWwubHlyaWNzLmVkaXRpbmc+bGkgLnRpbWVzdGFtcFtkYXRhLXYtM2ZiNDQxYmNde3BhZGRpbmctdG9wOjEwcHg7cGFkZGluZy1ib3R0b206MTBweH11bC5seXJpY3MuZWRpdGluZz5saSBpbnB1dFtkYXRhLXYtM2ZiNDQxYmNde3RleHQtYWxpZ246Y2VudGVyO2JvcmRlcjpub25lO2JhY2tncm91bmQtY29sb3I6I2QwZGFlNH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtM2ZiNDQxYmMmc2NvcGVkPXRydWUhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9hcHAvbHlyaWMtZWRpdG9yLnZ1ZVxuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiPHRlbXBsYXRlPlxuICA8dWwgdi1pZj1cImVkaXRpbmdcIiBjbGFzcz1cImVkaXRpbmcgbHlyaWNzXCI+XG4gICAgPGxpXG4gICAgICB2LWZvcj1cIihseXJpYywgaSkgaW4gcnVubmVyLmxyYy5seXJpY3NcIlxuICAgICAgOnRpdGxlPVwibHlyaWMudGltZXN0YW1wXCJcbiAgICAgIDpjbGFzcz1cIntjdXI6IGkgPT0gaW5kZXh9XCJcbiAgICAgIEBkYmxjbGljaz1cImVkaXQoaSlcIlxuICAgICAgQGNvbnRleHRtZW51LnByZXZlbnQ9XCJlZGl0TWVudShpKVwiXG4gICAgPlxuICAgICAgPHRlbXBsYXRlIHYtaWY9XCJlZGl0aW5nSW5kZXggPT0gaVwiPlxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0aW1lc3RhbXBcIiB0eXBlPVwidGV4dFwiIHYtbW9kZWw9XCJseXJpYy50aW1lc3RhbXBcIiBAa2V5ZG93bi5lbnRlcj1cImV4aXRFZGl0XCIvPlxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJjb250ZW50XCIgdHlwZT1cInRleHRcIiB2LW1vZGVsPVwibHlyaWMuY29udGVudFwiIEBrZXlkb3duLmVudGVyPVwiZXhpdEVkaXRcIi8+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVzdGFtcFwiPnt7bHlyaWMudGltZXN0YW1wIHwgdGltZX19PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+e3tseXJpYy5jb250ZW50fX08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImljb24tYnRuIGNvbmNlYWxcIj5cbiAgICAgICAgICA8dG1lbnU+XG4gICAgICAgICAgICA8ZGl2IHNsb3Q9XCJ0YXJnZXRcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWVsbGlwc2lzLXZlcnRcIj48L2k+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDx1bCBzbG90PVwibGlzdFwiPlxuICAgICAgICAgICAgICA8IS0tIDxsaSBAY2xpY2s9XCJzZXRUaW1lc3RhbXBUZXh0KGkpXCI+ICAgICAgICAgICAgICAgICAgIC0tPlxuICAgICAgICAgICAgICA8IS0tICAgPGkgY2xhc3M9XCJpY29uLWV4Y2hhbmdlXCI+PC9pPiB7eyAkdCgnbHlyaWNfZWRpdG9yLnBsYXlfdG9fdGhpc19seXJpYycpIH19IC0tPlxuICAgICAgICAgICAgICA8IS0tIDwvbGk+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT5cbiAgICAgICAgICAgICAgPGxpIEBjbGljaz1cInJlbW92ZVRpbWVzdGFtcChpKVwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbi1jYW5jZWxcIj48L2k+IHt7ICR0KCdseXJpY19lZGl0b3IucmVtb3ZlX3RpbWVzdGFtcCcpIH19XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgIDxsaSBAY2xpY2s9XCJlZGl0KGkpXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWVkaXRcIj48L2k+IHt7ICR0KCdseXJpY19lZGl0b3IuZWRpdCcpIH19XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgIDxsaSBAY2xpY2s9XCJpbnNlcnQoaSlcIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb24tcGx1c1wiPjwvaT4ge3sgJHQoJ2x5cmljX2VkaXRvci5hZGQnKSB9fVxuICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICA8bGkgQGNsaWNrPVwicmVtb3ZlKGkpXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLXRyYXNoXCI+PC9pPiB7eyAkdCgnbHlyaWNfZWRpdG9yLnJlbW92ZScpIH19XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgIDwvdG1lbnU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC90ZW1wbGF0ZT5cbiAgICA8L2xpPlxuICAgIDxsaSB2LWlmPVwibHlyaWNBcnJheS5sZW5ndGhcIiBjbGFzcz1cImRpdmlzaW9uXCI+e3sgJHQoJ2x5cmljX2VkaXRvci5mb2xsb3dpbmdfdW5zb3J0ZWQnKSB9fTwvbGk+XG4gICAgPGxpXG4gICAgICB2LWZvcj1cIihseXJpYywgaSkgaW4gbHlyaWNBcnJheVwiXG4gICAgICB0cmFjay1ieT1cImlcIlxuICAgICAgY2xhc3M9XCJ1bnNvcnRlZFwiXG4gICAgICBAZGJsY2xpY2s9XCJlZGl0VGV4dChpKVwiXG4gICAgICBAY29udGV4dG1lbnUucHJldmVudD1cImVkaXRNZW51KGkpXCJcbiAgICA+XG4gICAgICA8dGVtcGxhdGUgdi1pZj1cImVkaXRpbmdUZXh0SW5kZXggPT0gaVwiPlxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJjb250ZW50XCIgdHlwZT1cInRleHRcIiB2LW1vZGVsPVwibHlyaWNBcnJheVtpXVwiIEBrZXlkb3duLmVudGVyPVwiZXhpdEVkaXRcIi8+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj57e2x5cmljfX08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImljb24tYnRuIGNvbmNlYWxcIj5cbiAgICAgICAgICA8dG1lbnU+XG4gICAgICAgICAgICA8ZGl2IHNsb3Q9XCJ0YXJnZXRcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWVsbGlwc2lzLXZlcnRcIj48L2k+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDx1bCBzbG90PVwibGlzdFwiPlxuICAgICAgICAgICAgICA8IS0tIDxsaSBAY2xpY2s9XCJzZXRUaW1lc3RhbXAoaSlcIj4gICAgICAgICAgICAgICAgICAgICAgIC0tPlxuICAgICAgICAgICAgICA8IS0tICAgPGkgY2xhc3M9XCJpY29uLWV4Y2hhbmdlXCI+PC9pPiB7eyAkdCgnbHlyaWNfZWRpdG9yLnBsYXlfdG9fdGhpc19seXJpYycpIH19IC0tPlxuICAgICAgICAgICAgICA8IS0tIDwvbGk+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT5cbiAgICAgICAgICAgICAgPGxpIEBjbGljaz1cImVkaXRUZXh0KGkpXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWVkaXRcIj48L2k+IHt7ICR0KCdseXJpY19lZGl0b3IuZWRpdCcpIH19XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgIDxsaSBAY2xpY2s9XCJpbnNlcnRUZXh0KGkpXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLXBsdXNcIj48L2k+IHt7ICR0KCdseXJpY19lZGl0b3IuYWRkJykgfX1cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgPGxpIEBjbGljaz1cInJlbW92ZVRleHQoaSlcIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb24tdHJhc2hcIj48L2k+IHt7ICR0KCdseXJpY19lZGl0b3IucmVtb3ZlJykgfX1cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC90bWVudT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgIDwvbGk+XG4gIDwvdWw+XG4gIDx1bCB2LWVsc2UgY2xhc3M9XCJseXJpY3NcIj5cbiAgICA8bGlcbiAgICAgIHYtZm9yPVwiKGx5cmljLCBpKSBpbiBydW5uZXIubHJjLmx5cmljc1wiXG4gICAgICBAY2xpY2s9XCJwbGF5dG8obHlyaWMudGltZXN0YW1wKVwiXG4gICAgICA6dGl0bGU9XCJseXJpYy50aW1lc3RhbXBcIlxuICAgICAgOmNsYXNzPVwie2N1cjogaSA9PSBpbmRleH1cIlxuICAgID5cbiAgICAgIHt7bHlyaWMuY29udGVudH19XG4gICAgPC9saT5cbiAgICA8bGkgdi1pZj1cImx5cmljQXJyYXkubGVuZ3RoXCIgY2xhc3M9XCJkaXZpc2lvblwiPnt7ICR0KCdseXJpY19lZGl0b3IuZm9sbG93aW5nX3Vuc29ydGVkJykgfX08L2xpPlxuICAgIDxsaVxuICAgICAgdi1mb3I9XCIobHlyaWMsIGkpIGluIGx5cmljQXJyYXlcIlxuICAgICAgdHJhY2stYnk9XCJpXCJcbiAgICAgIGNsYXNzPVwidW5zb3J0ZWRcIlxuICAgID5cbiAgICAgIHt7bHlyaWN9fVxuICAgIDwvbGk+XG4gIDwvdWw+XG48L3RlbXBsYXRlPlxuXG48c3R5bGUgbGFuZz1cInNhc3NcIiBzY29wZWQ+XG5AaW1wb3J0ICdzYXNzL2Jhc2UnO1xuXG51bC5seXJpY3Mge1xuICAkZGFyay1jb2xvcjogI2YxZjFmMTtcbiAgJGxpZ2h0LWNvbG9yOiAjZmJmYmZiO1xuICAkZmFjZS1jb2xvcjogJGJsdWUtY29sb3I7XG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkZGFyay1jb2xvcjtcbiAgPiBsaSB7XG4gICAgbWluLWhlaWdodDogNDBweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6ICRmYWNlLWNvbG9yO1xuICAgIHBhZGRpbmc6IDEwcHggMDtcbiAgICAmLmN1ciB7XG4gICAgICBjb2xvcjogJGZhY2UtY29sb3I7XG4gICAgICB0ZXh0LXNoYWRvdzogMXB4IDFweCAxcHggI2FhYTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICRsaWdodC1jb2xvcjtcbiAgICB9XG4gICAgJjpob3ZlciB7XG4gICAgICAuY29uY2VhbCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIH1cbiAgICB9XG4gICAgLmNvbmNlYWwge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgJi51bnNvcnRlZCxcbiAgICAmLmRpdmlzaW9uLFxuICAgIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICRkYXJrLWNvbG9yO1xuICAgIH1cbiAgICAmLmRpdmlzaW9uIHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBtaW4taGVpZ2h0OiBhdXRvO1xuICAgICAgcGFkZGluZzogMnB4IDA7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICB9XG4gICYuZWRpdGluZyB7XG4gICAgPiBsaSB7XG4gICAgICBwYWRkaW5nOiAwO1xuXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgJi5kaXZpc2lvbiB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICAgIH1cbiAgICAgIC50aW1lc3RhbXAge1xuICAgICAgICBjb2xvcjogIzdDOUZCQjtcbiAgICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6ICcuJztcbiAgICAgIH1cbiAgICAgIC5jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cbiAgICAgIC5pY29uLWJ0biB7XG4gICAgICAgIHBhZGRpbmctbGVmdDogNHB4O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiA0cHg7XG4gICAgICB9XG4gICAgICAudGltZXN0YW1wLFxuICAgICAgLmNvbnRlbnQsXG4gICAgICAuaWNvbi1idG4sXG4gICAgICB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAxMHB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgIH1cbiAgICAgIGlucHV0IHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNEMERBRTQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG48L3N0eWxlPlxuXG48c2NyaXB0PlxuaW1wb3J0IHtSdW5uZXJ9IGZyb20gJ2xyYy1raXQnXG5pbXBvcnQge1Njcm9sbGVyLCBnbG9iYWxLZXlkb3duLCB0aW1lc3RhbXAydGltZXN0cn0gZnJvbSAnLi4vdXRpbHMnXG5pbXBvcnQgY2FjaGUgZnJvbSAnLi4vY2FjaGUnXG5pbXBvcnQgVG1lbnUgZnJvbSAnLi90bWVudSdcblxuZXhwb3J0IGRlZmF1bHQge1xuICBkYXRhICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5kZXg6IC0xLFxuICAgICAgZWRpdGluZ0luZGV4OiAtMSxcbiAgICAgIGVkaXRpbmdUZXh0SW5kZXg6IC0xLFxuICAgICAgc2Nyb2xsZXI6IG51bGwsXG4gICAgfVxuICB9LFxuICBwcm9wczoge1xuICAgIHJ1bm5lcjoge1xuICAgICAgdHlwZTogUnVubmVyLFxuICAgICAgZGVmYXVsdDogbmV3IFJ1bm5lcigpLFxuICAgIH0sXG4gICAgcGxheXRvOiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbixcbiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9LFxuICAgIH0sXG4gICAgZWRpdGluZzoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGNhY2hlLmVkaXRpbmcsXG4gICAgfSxcbiAgICBseXJpY0FycmF5OiB7XG4gICAgICB0eXBlOiBBcnJheSxcbiAgICAgIGRlZmF1bHQ6IFtdLFxuICAgIH0sXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBlZGl0TWVudSAoaW5kZXgpIHtcbiAgICAgIC8vIFRPRE9cbiAgICB9LFxuICAgIGV4aXRFZGl0ICgpIHtcbiAgICAgIHRoaXMuZWRpdGluZ0luZGV4ID0gLTFcbiAgICAgIHRoaXMuZWRpdGluZ1RleHRJbmRleCA9IC0xXG4gICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnKVxuICAgIH0sXG4gICAgZWRpdCAoaW5kZXgpIHtcbiAgICAgIHRoaXMuZWRpdGluZ0luZGV4ID0gaW5kZXhcbiAgICB9LFxuICAgIGVkaXRUZXh0IChpbmRleCkge1xuICAgICAgdGhpcy5lZGl0aW5nVGV4dEluZGV4ID0gaW5kZXhcbiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZScpXG4gICAgfSxcbiAgICByZW1vdmUgKGluZGV4KSB7XG4gICAgICB0aGlzLnJ1bm5lci5scmMubHlyaWNzLnNwbGljZShpbmRleCwgMSlcbiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZScpXG4gICAgfSxcbiAgICByZW1vdmVUZXh0IChpbmRleCkge1xuICAgICAgdGhpcy5seXJpY0FycmF5LnNwbGljZShpbmRleCwgMSlcbiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZScpXG4gICAgfSxcbiAgICBpbnNlcnQgKGluZGV4KSB7XG4gICAgICB0aGlzLnJ1bm5lci5scmMubHlyaWNzLnNwbGljZShpbmRleCArIDEsIDAsIHtcbiAgICAgICAgdGltZXN0YW1wOiB0aGlzLnJ1bm5lci5scmMubHlyaWNzW2luZGV4XS50aW1lc3RhbXAsXG4gICAgICAgIGNvbnRlbnQ6IHRoaXMucnVubmVyLmxyYy5seXJpY3NbaW5kZXhdLmNvbnRlbnQsXG4gICAgICB9KVxuICAgICAgdGhpcy4kZW1pdCgndXBkYXRlJylcbiAgICB9LFxuICAgIGluc2VydFRleHQgKGluZGV4KSB7XG4gICAgICB0aGlzLmx5cmljQXJyYXkuc3BsaWNlKGluZGV4ICsgMSwgMCwgdGhpcy5seXJpY0FycmF5W2luZGV4XSlcbiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZScpXG4gICAgfSxcbiAgICByZW1vdmVUaW1lc3RhbXAgKGluZGV4KSB7XG4gICAgICB2YXIgbHlyaWNzID0gdGhpcy5ydW5uZXIubHJjLmx5cmljc1xuICAgICAgdmFyIHJlbW92ZUx5cmljcyA9IGx5cmljc1xuICAgICAgLnNwbGljZShpbmRleCwgbHlyaWNzLmxlbmd0aCAtIGluZGV4KVxuICAgICAgLm1hcCgobHlyaWMpID0+IHsgcmV0dXJuIGx5cmljLmNvbnRlbnQgfSlcbiAgICAgIHRoaXMubHlyaWNBcnJheS5zcGxpY2UoMCwgMCwgLi4ucmVtb3ZlTHlyaWNzKVxuICAgICAgdGhpcy4kZW1pdCgndXBkYXRlJylcbiAgICB9LFxuICAgIHNldFRpbWVzdGFtcCAoaW5kZXgpIHtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMuJHBhcmVudC4kcmVmcy5wbGF5ZXIuY3VycmVudFRpbWVcbiAgICAgIGlmIChjdXJyZW50VGltZSAhPT0gMCkge1xuICAgICAgICB0aGlzLnJ1bm5lci5scmMubHlyaWNzW2luZGV4XS50aW1lc3RhbXAgPSBjdXJyZW50VGltZVxuICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnKVxuICAgICAgfVxuICAgIH0sXG4gICAgc2V0VGltZXN0YW1wVGV4dCAoaW5kZXgpIHtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMuJHBhcmVudC4kcmVmcy5wbGF5ZXIuY3VycmVudFRpbWVcbiAgICAgIGlmIChjdXJyZW50VGltZSAhPT0gMCAmJiB0aGlzLmx5cmljQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMucnVubmVyLmxyYy5seXJpY3MucHVzaCh7XG4gICAgICAgICAgdGltZXN0YW1wOiBjdXJyZW50VGltZSxcbiAgICAgICAgICBjb250ZW50OiB0aGlzLmx5cmljQXJyYXlbaW5kZXhdLFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnJlbW92ZVRleHQoaW5kZXgpXG4gICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZScpXG4gICAgICB9XG4gICAgfSxcbiAgICBzY3JvbGxUb0N1cnJlbnRMeXJpYyAoZm9yY2UgPSBmYWxzZSkge1xuICAgICAgdmFyIHJvb3QgPSB0aGlzLiRlbFxuICAgICAgdmFyIGN1ciA9IHJvb3QucXVlcnlTZWxlY3RvcignLmN1cicpXG4gICAgICBpZiAoY3VyKSB7XG4gICAgICAgIHZhciBoZWlnaHQgPSByb290LmNsaWVudEhlaWdodFxuICAgICAgICB2YXIgdG9wID0gY3VyLm9mZnNldFRvcCAtIGhlaWdodCAvIDJcbiAgICAgICAgdGhpcy5zY3JvbGxlci5zY3JvbGxUbyh0b3AsIGZvcmNlKVxuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIGZpbHRlcnM6IHtcbiAgICB0aW1lOiB0aW1lc3RhbXAydGltZXN0cixcbiAgfSxcbiAgY3JlYXRlZCAoKSB7XG4gICAgdGhpcy4kb24oJ3RpbWV1cGRhdGUnLCAodGltZXN0YW1wKSA9PiB7XG4gICAgICB0aGlzLnJ1bm5lci50aW1lVXBkYXRlKHRpbWVzdGFtcClcbiAgICAgIHRoaXMuaW5kZXggPSB0aGlzLnJ1bm5lci5jdXJJbmRleCgpXG4gICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudEx5cmljKClcbiAgICB9KS4kb24oJ3VwZGF0ZScsICgpID0+IHtcbiAgICAgIHRoaXMucnVubmVyLmxyY1VwZGF0ZSgpXG4gICAgICB0aGlzLiRBcHAubHJjRm9ybWF0ID0gdGhpcy5ydW5uZXIubHJjLnRvU3RyaW5nKClcbiAgICAgIHRoaXMuJEFwcC5seXJpY0FycmF5ID0gdGhpcy5seXJpY0FycmF5XG4gICAgfSkuJG9uKCdwcmV2bHlyaWMnLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZVRpbWVzdGFtcCh0aGlzLnJ1bm5lci5scmMubHlyaWNzLmxlbmd0aCAtIDEpXG4gICAgfSkuJG9uKCduZXh0bHlyaWMnLCAoKSA9PiB7XG4gICAgICB0aGlzLnNldFRpbWVzdGFtcFRleHQoMClcbiAgICB9KVxuICB9LFxuICBtb3VudGVkICgpIHtcbiAgICB0aGlzLnNjcm9sbGVyID0gbmV3IFNjcm9sbGVyKHRoaXMuJGVsKVxuXG4gICAgZ2xvYmFsS2V5ZG93blxuICAgIC5vbihbJ2VudGVyJywgJ2VzY2FwZSddLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5lZGl0aW5nKSB7XG4gICAgICAgIHRoaXMuZXhpdEVkaXQoKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9KVxuICAgIC5vbignYXJyb3d1cCcsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmVkaXRpbmcpIHtcbiAgICAgICAgdGhpcy4kZW1pdCgncHJldmx5cmljJylcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSlcbiAgICAub24oJ2Fycm93ZG93bicsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmVkaXRpbmcpIHtcbiAgICAgICAgdGhpcy4kZW1pdCgnbmV4dGx5cmljJylcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSlcbiAgfSxcbiAgd2F0Y2g6IHtcbiAgICBlZGl0aW5nICgpIHtcbiAgICAgIGlmICghdGhpcy5lZGl0aW5nKSB7XG4gICAgICAgIHRoaXMuZXhpdEVkaXQoKVxuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIGNvbXBvbmVudHM6IHtcbiAgICBUbWVudSxcbiAgfSxcbn1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGx5cmljLWVkaXRvci52dWU/NWRjMDgxOTUiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlJ1bm5lciA9IGV4cG9ydHMuTHJjID0gZXhwb3J0cy5MaW5lUGFyc2VyID0gdW5kZWZpbmVkO1xuXG52YXIgX2xpbmVQYXJzZXIgPSByZXF1aXJlKCcuL2xpbmUtcGFyc2VyJyk7XG5cbnZhciBfbGluZVBhcnNlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW5lUGFyc2VyKTtcblxudmFyIF9scmMgPSByZXF1aXJlKCcuL2xyYycpO1xuXG52YXIgX2xyYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9scmMpO1xuXG52YXIgX3J1bm5lciA9IHJlcXVpcmUoJy4vcnVubmVyJyk7XG5cbnZhciBfcnVubmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3J1bm5lcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuTGluZVBhcnNlciA9IF9saW5lUGFyc2VyMi5kZWZhdWx0O1xuZXhwb3J0cy5McmMgPSBfbHJjMi5kZWZhdWx0O1xuZXhwb3J0cy5SdW5uZXIgPSBfcnVubmVyMi5kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vbHJjLWtpdC9saWIvbHJjLWtpdC5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBMaW5lUGFyc2VyID0gZnVuY3Rpb24gKCkge1xuICBfY3JlYXRlQ2xhc3MoTGluZVBhcnNlciwgbnVsbCwgW3tcbiAgICBrZXk6ICdwYXJzZVRhZ3MnLFxuXG4gICAgLy8gbWF0Y2ggYFt0aTogVGhlIFRpdGxlXWBcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VUYWdzKGxpbmUpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnRyaW0oKTtcbiAgICAgIHZhciBtYXRjaHMgPSBMaW5lUGFyc2VyLlRBR1NfUkVHRVhQLmV4ZWMobGluZSk7XG4gICAgICB2YXIgdGFnID0gbWF0Y2hzWzBdO1xuICAgICAgdmFyIGNvbnRlbnQgPSBsaW5lLnN1YnN0cih0YWcubGVuZ3RoKTtcbiAgICAgIHJldHVybiBbdGFnLnNsaWNlKDEsIC0xKS5zcGxpdCgvXFxdXFxzKlxcWy8pLCBjb250ZW50XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsaW5lIHBhcnNlIGxyYyBvZiB0aW1lc3RhbXBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHZhciBscCA9IG5ldyBMaW5lUGFyc2VyKCdbdGk6IFNvbmcgdGl0bGVdJylcbiAgICAgKiBscC50eXBlID09PSBMaW5lUGFyc2VyLlRZUEUuSU5GT1xuICAgICAqIGxwLmtleSA9PT0gJ3RpJ1xuICAgICAqIGxwLnZhbHVlID09PSAnU29uZyB0aXRsZSdcbiAgICAgKlxuICAgICAqIHZhciBscCA9IG5ldyBMaW5lUGFyc2VyKCdbMTA6MTAuMTBdaGVsbG8nKVxuICAgICAqIGxwLnR5cGUgPT09IExpbmVQYXJzZXIuVFlQRS5USU1FXG4gICAgICogbHAudGltZXN0YW1wcyA9PT0gWzEwKjYwKzEwLjEwXVxuICAgICAqIGxwLmNvbnRlbnQgPT09ICdoZWxsbydcbiAgICAgKiBAY29uc3RydWN0c1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lXG4gICAgICovXG5cbiAgICAvLyBtYXRjaCBgWzUxMjozNC4xXSBseXJpYyBjb250ZW50YFxuXG4gICAgLy8gbWF0Y2ggYFsxMjozMC4xXVsxMjozMC4yXWBcblxuICB9XSk7XG5cbiAgZnVuY3Rpb24gTGluZVBhcnNlcihsaW5lKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpbmVQYXJzZXIpO1xuXG4gICAgdGhpcy50eXBlID0gTGluZVBhcnNlci5UWVBFLklOVkFMSUQ7XG5cbiAgICB0cnkge1xuICAgICAgdmFyIF9MaW5lUGFyc2VyJHBhcnNlVGFncyA9IExpbmVQYXJzZXIucGFyc2VUYWdzKGxpbmUpO1xuXG4gICAgICB2YXIgX0xpbmVQYXJzZXIkcGFyc2VUYWdzMiA9IF9zbGljZWRUb0FycmF5KF9MaW5lUGFyc2VyJHBhcnNlVGFncywgMik7XG5cbiAgICAgIHZhciB0YWdzID0gX0xpbmVQYXJzZXIkcGFyc2VUYWdzMlswXTtcbiAgICAgIHZhciBjb250ZW50ID0gX0xpbmVQYXJzZXIkcGFyc2VUYWdzMlsxXTtcblxuICAgICAgaWYgKExpbmVQYXJzZXIuVElNRV9SRUdFWFAudGVzdCh0YWdzWzBdKSkge1xuICAgICAgICB0aGlzLnBhcnNlQXNUaW1lKHRhZ3MsIGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIGlmIChMaW5lUGFyc2VyLklORk9fUkVHRVhQLnRlc3QodGFnc1swXSkpIHtcbiAgICAgICAgdGhpcy5wYXJzZUFzSW5mbyh0YWdzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudHlwZSA9IExpbmVQYXJzZXIuVFlQRS5JTlZBTElEO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMudHlwZSA9IExpbmVQYXJzZXIuVFlQRS5JTlZBTElEO1xuICAgIH1cbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhMaW5lUGFyc2VyLCBbe1xuICAgIGtleTogJ3BhcnNlQXNUaW1lJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VBc1RpbWUodGFncywgY29udGVudCkge1xuICAgICAgdmFyIHRpbWVzdGFtcHMgPSBbXTtcbiAgICAgIHRhZ3MuZm9yRWFjaChmdW5jdGlvbiAodGFnKSB7XG4gICAgICAgIHZhciBtYXRjaHMgPSBMaW5lUGFyc2VyLlRJTUVfUkVHRVhQLmV4ZWModGFnKTtcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSBwYXJzZUZsb2F0KG1hdGNoc1sxXSk7XG4gICAgICAgIHZhciBzZWNvbmRzID0gcGFyc2VGbG9hdChtYXRjaHNbMl0ucmVwbGFjZSgvXFxzKy9nLCAnJykucmVwbGFjZSgnOicsICcuJykpO1xuICAgICAgICB0aW1lc3RhbXBzLnB1c2gobWludXRlcyAqIDYwICsgc2Vjb25kcyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMudGltZXN0YW1wcyA9IHRpbWVzdGFtcHM7XG4gICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50LnRyaW0oKTtcbiAgICAgIHRoaXMudHlwZSA9IExpbmVQYXJzZXIuVFlQRS5USU1FO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlQXNJbmZvJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VBc0luZm8odGFnKSB7XG4gICAgICB2YXIgbWF0Y2hzID0gTGluZVBhcnNlci5JTkZPX1JFR0VYUC5leGVjKHRhZyk7XG4gICAgICB0aGlzLmtleSA9IG1hdGNoc1sxXS50cmltKCk7XG4gICAgICB0aGlzLnZhbHVlID0gbWF0Y2hzWzJdLnRyaW0oKTtcbiAgICAgIHRoaXMudHlwZSA9IExpbmVQYXJzZXIuVFlQRS5JTkZPO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBMaW5lUGFyc2VyO1xufSgpO1xuXG5MaW5lUGFyc2VyLlRBR1NfUkVHRVhQID0gL14oXFxbLitcXF0pKy87XG5MaW5lUGFyc2VyLklORk9fUkVHRVhQID0gL15cXHMqKFxcdyspXFxzKjooLiopJC87XG5MaW5lUGFyc2VyLlRJTUVfUkVHRVhQID0gL15cXHMqKFxcZCspXFxzKjpcXHMqKFxcZCsoXFxzKltcXC46XVxccypcXGQrKT8pXFxzKiQvO1xuTGluZVBhcnNlci5UWVBFID0ge1xuICBJTlZBTElEOiAwLFxuICBJTkZPOiAxLFxuICBUSU1FOiAyXG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gTGluZVBhcnNlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2xyYy1raXQvbGliL2xpbmUtcGFyc2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfaXNfanMgPSByZXF1aXJlKCdpc19qcycpO1xuXG52YXIgX2lzX2pzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzX2pzKTtcblxudmFyIF9saW5lUGFyc2VyID0gcmVxdWlyZSgnLi9saW5lLXBhcnNlcicpO1xuXG52YXIgX2xpbmVQYXJzZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGluZVBhcnNlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBMcmMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIExyYygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTHJjKTtcblxuICAgIHRoaXMuaW5mbyA9IHt9O1xuICAgIHRoaXMubHlyaWNzID0gW107XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTHJjLCBbe1xuICAgIGtleTogJ29mZnNldCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9mZnNldChvZmZzZXRUaW1lKSB7XG4gICAgICB0aGlzLmx5cmljcy5mb3JFYWNoKGZ1bmN0aW9uIChseXJpYykge1xuICAgICAgICBseXJpYy50aW1lc3RhbXAgKz0gb2Zmc2V0VGltZTtcbiAgICAgICAgaWYgKGx5cmljLnRpbWVzdGFtcCA8IDApIHtcbiAgICAgICAgICBseXJpYy50aW1lc3RhbXAgPSAwO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgbHJjIHRleHRcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0cyBvcHRpb25zXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRzLmNvbWJpbmUgbHlyaWNzIGNvbWJpbmUgYnkgc2FtZSBjb250ZW50XG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRzLnNvcnQgbHlyaWNzIHNvcnQgYnkgdGltZXN0YW1wXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubGluZUZvcm1hdCBuZXdsaW5lIGZvcm1hdFxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndG9TdHJpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIG9wdHMuY29tYmluZSA9ICdjb21iaW5lJyBpbiBvcHRzID8gb3B0cy5jb21iaW5lIDogdHJ1ZTtcbiAgICAgIG9wdHMubGluZUZvcm1hdCA9ICdsaW5lRm9ybWF0JyBpbiBvcHRzID8gb3B0cy5saW5lRm9ybWF0IDogJ1xcclxcbic7XG4gICAgICBvcHRzLnNvcnQgPSAnc29ydCcgaW4gb3B0cyA/IG9wdHMuc29ydCA6IHRydWU7XG4gICAgICB2YXIgbGluZXMgPSBbXSxcbiAgICAgICAgICBseXJpY3NNYXAgPSB7fSxcbiAgICAgICAgICBseXJpY3NMaXN0ID0gW107XG5cbiAgICAgIC8vIGdlbmVyYXRlIGluZm9cbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmluZm8pIHtcbiAgICAgICAgbGluZXMucHVzaCgnWycgKyBrZXkgKyAnOicgKyB0aGlzLmluZm9ba2V5XSArICddJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRzLmNvbWJpbmUpIHtcbiAgICAgICAgLy8gdW5pcXVlbmVzc1xuICAgICAgICB0aGlzLmx5cmljcy5mb3JFYWNoKGZ1bmN0aW9uIChseXJpYykge1xuICAgICAgICAgIGlmIChseXJpYy5jb250ZW50IGluIGx5cmljc01hcCkge1xuICAgICAgICAgICAgbHlyaWNzTWFwW2x5cmljLmNvbnRlbnRdLnB1c2gobHlyaWMudGltZXN0YW1wKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbHlyaWNzTWFwW2x5cmljLmNvbnRlbnRdID0gW2x5cmljLnRpbWVzdGFtcF07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gc29ydGVkXG4gICAgICAgIGZvciAodmFyIGNvbnRlbnQgaW4gbHlyaWNzTWFwKSB7XG4gICAgICAgICAgaWYgKG9wdHMuc29ydCkge1xuICAgICAgICAgICAgbHlyaWNzTWFwW2NvbnRlbnRdLnNvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbHlyaWNzTGlzdC5wdXNoKHtcbiAgICAgICAgICAgIHRpbWVzdGFtcHM6IGx5cmljc01hcFtjb250ZW50XSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRzLnNvcnQpIHtcbiAgICAgICAgICBseXJpY3NMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnRpbWVzdGFtcHNbMF0gLSBiLnRpbWVzdGFtcHNbMF07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBnZW5lcmF0ZSBseXJpY3NcbiAgICAgICAgbHlyaWNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChseXJpYykge1xuICAgICAgICAgIGxpbmVzLnB1c2goJ1snICsgbHlyaWMudGltZXN0YW1wcy5tYXAoZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgcmV0dXJuIExyYy50aW1lc3RhbXBUb1N0cmluZyh0aW1lc3RhbXApO1xuICAgICAgICAgIH0pLmpvaW4oJ11bJykgKyAnXScgKyAobHlyaWMuY29udGVudCB8fCAnJykpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubHlyaWNzLmZvckVhY2goZnVuY3Rpb24gKGx5cmljKSB7XG4gICAgICAgICAgbGluZXMucHVzaCgnWycgKyBMcmMudGltZXN0YW1wVG9TdHJpbmcobHlyaWMudGltZXN0YW1wKSArICddJyArIChseXJpYy5jb250ZW50IHx8ICcnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGluZXMuam9pbihvcHRzLmxpbmVGb3JtYXQpO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiAncGFyc2UnLFxuXG5cbiAgICAvKipcbiAgICAgKiBwYXJzZSBscmMgdGV4dCBhbmQgcmV0dXJuIGEgTHJjIG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAgICogQHJldHVybiB7THJjfVxuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XG4gICAgICB2YXIgbHlyaWNzID0gW107XG4gICAgICB2YXIgaW5mbyA9IHt9O1xuICAgICAgdGV4dC5zcGxpdCgvXFxyXFxufFtcXG5cXHJdL2cpLm1hcChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9saW5lUGFyc2VyMi5kZWZhdWx0KGxpbmUpO1xuICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICBzd2l0Y2ggKGxpbmUudHlwZSkge1xuICAgICAgICAgIGNhc2UgX2xpbmVQYXJzZXIyLmRlZmF1bHQuVFlQRS5JTkZPOlxuICAgICAgICAgICAgaW5mb1tsaW5lLmtleV0gPSBsaW5lLnZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBfbGluZVBhcnNlcjIuZGVmYXVsdC5UWVBFLlRJTUU6XG4gICAgICAgICAgICBsaW5lLnRpbWVzdGFtcHMuZm9yRWFjaChmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgIGx5cmljcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBsaW5lLmNvbnRlbnRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgbHJjID0gbmV3IHRoaXMoKTtcbiAgICAgIGxyYy5seXJpY3MgPSBseXJpY3M7XG4gICAgICBscmMuaW5mbyA9IGluZm87XG4gICAgICByZXR1cm4gbHJjO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NoZWNrTHlyaWNPYmplY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0x5cmljT2JqZWN0KGx5cmljKSB7XG4gICAgICByZXR1cm4gX2lzX2pzMi5kZWZhdWx0Lm9iamVjdChseXJpYykgJiYgJ3RpbWVzdGFtcCcgaW4gbHlyaWMgJiYgX2lzX2pzMi5kZWZhdWx0Lm51bWJlcihseXJpYy50aW1lc3RhbXApICYmICdjb250ZW50JyBpbiBseXJpYyAmJiBfaXNfanMyLmRlZmF1bHQuc3RyaW5nKGx5cmljLmNvbnRlbnQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhZFplcm8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYWRaZXJvKG51bSkge1xuICAgICAgdmFyIHNpemUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAyIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICBpZiAoX2lzX2pzMi5kZWZhdWx0Lm51bWJlcihudW0pKSB7XG4gICAgICAgIG51bSA9IG51bS50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKG51bS5zcGxpdCgnLicpWzBdLmxlbmd0aCA8IHNpemUpIHtcbiAgICAgICAgbnVtID0gJzAnICsgbnVtO1xuICAgICAgfXJldHVybiBudW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGxyYyB0aW1lIHN0cmluZ1xuICAgICAqIEBleGFtcGxlXG4gICAgICogTHJjLnRpbWVzdGFtcFRvU3RyaW5nKDE0My41NClcbiAgICAgKiAvLyByZXR1cm4gJzAyOjIzLjU0JzpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZXN0YW1wIHNlY29uZCB0aW1lc3RhbXBcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3RpbWVzdGFtcFRvU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdGltZXN0YW1wVG9TdHJpbmcodGltZXN0YW1wKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYWRaZXJvKHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKSkgKyAnOicgKyB0aGlzLnBhZFplcm8oKHRpbWVzdGFtcCAlIDYwKS50b0ZpeGVkKDIpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTHJjO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBMcmM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9scmMta2l0L2xpYi9scmMuanNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9scmMgPSByZXF1aXJlKCcuL2xyYycpO1xuXG52YXIgX2xyYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9scmMpO1xuXG52YXIgX2Nsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcblxudmFyIF9jbG9uZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbG9uZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBSdW5uZXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0xyY30gbHJjXG4gICAqL1xuXG4gIGZ1bmN0aW9uIFJ1bm5lcigpIHtcbiAgICB2YXIgbHJjID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gbmV3IF9scmMyLmRlZmF1bHQoKSA6IGFyZ3VtZW50c1swXTtcbiAgICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1sxXTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSdW5uZXIpO1xuXG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgdGhpcy5fY3VycmVudEluZGV4ID0gLTE7XG4gICAgdGhpcy5zZXRMcmMobHJjKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgQHBhcmFtIHtMcmN9IGxyY1xuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhSdW5uZXIsIFt7XG4gICAga2V5OiAnc2V0THJjJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0THJjKGxyYykge1xuICAgICAgdGhpcy5scmMgPSAoMCwgX2Nsb25lMi5kZWZhdWx0KShscmMpO1xuICAgICAgdGhpcy5scmNVcGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdscmNVcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBscmNVcGRhdGUoKSB7XG4gICAgICBpZiAodGhpcy5vZmZzZXQpIHtcbiAgICAgICAgdGhpcy5fb2Zmc2V0QWxpZ24oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3NvcnQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdfb2Zmc2V0QWxpZ24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfb2Zmc2V0QWxpZ24oKSB7XG4gICAgICBpZiAoJ29mZnNldCcgaW4gdGhpcy5scmMuaW5mbykge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQodGhpcy5scmMuaW5mby5vZmZzZXQpIC8gMTAwMDtcbiAgICAgICAgaWYgKCFpc05hTihvZmZzZXQpKSB7XG4gICAgICAgICAgdGhpcy5scmMub2Zmc2V0KG9mZnNldCk7XG4gICAgICAgICAgZGVsZXRlIHRoaXMubHJjLmluZm8ub2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnX3NvcnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfc29ydCgpIHtcbiAgICAgIHRoaXMubHJjLmx5cmljcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIEBwYXJhbSB7bnVtYmVyfSB0aW1lc3RhbXBcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndGltZVVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVVcGRhdGUodGltZXN0YW1wKSB7XG4gICAgICBpZiAodGhpcy5fY3VycmVudEluZGV4ID49IHRoaXMubHJjLmx5cmljcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudEluZGV4ID0gdGhpcy5scmMubHlyaWNzLmxlbmd0aCAtIDE7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2N1cnJlbnRJbmRleCA8IC0xKSB7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRJbmRleCA9IC0xO1xuICAgICAgfVxuICAgICAgdGhpcy5fY3VycmVudEluZGV4ID0gdGhpcy5fZmluZEluZGV4KHRpbWVzdGFtcCwgdGhpcy5fY3VycmVudEluZGV4KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdfZmluZEluZGV4JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRJbmRleCh0aW1lc3RhbXAsIHN0YXJ0SW5kZXgpIHtcbiAgICAgIHZhciBjdXJGcm9udFRpbWVzdGFtcCA9IHN0YXJ0SW5kZXggPT0gLTEgPyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgOiB0aGlzLmxyYy5seXJpY3Nbc3RhcnRJbmRleF0udGltZXN0YW1wO1xuXG4gICAgICB2YXIgY3VyQmFja1RpbWVzdGFtcCA9IHN0YXJ0SW5kZXggPT0gdGhpcy5scmMubHlyaWNzLmxlbmd0aCAtIDEgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiB0aGlzLmxyYy5seXJpY3Nbc3RhcnRJbmRleCArIDFdLnRpbWVzdGFtcDtcblxuICAgICAgaWYgKHRpbWVzdGFtcCA8IGN1ckZyb250VGltZXN0YW1wKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maW5kSW5kZXgodGltZXN0YW1wLCBzdGFydEluZGV4IC0gMSk7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA9PT0gY3VyQmFja1RpbWVzdGFtcCkge1xuICAgICAgICBpZiAoY3VyQmFja1RpbWVzdGFtcCA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXJ0SW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXJ0SW5kZXggKyAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+IGN1ckJhY2tUaW1lc3RhbXApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRJbmRleCh0aW1lc3RhbXAsIHN0YXJ0SW5kZXggKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzdGFydEluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldEluZm8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmZvKCkge1xuICAgICAgcmV0dXJuIHRoaXMubHJjLmluZm87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0THlyaWNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0THlyaWNzKCkge1xuICAgICAgcmV0dXJuIHRoaXMubHJjLmx5cmljcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgQHJldHVybiB7T2JqZWN0fSB7Jyd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2dldEx5cmljJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0THlyaWMoKSB7XG4gICAgICB2YXIgaW5kZXggPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0aGlzLmN1ckluZGV4KCkgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDw9IHRoaXMubHJjLmx5cmljcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxyYy5seXJpY3NbaW5kZXhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmRleCBub3QgZXhpc3QnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjdXJJbmRleCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGN1ckluZGV4KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRJbmRleDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjdXJMeXJpYycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGN1ckx5cmljKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0THlyaWMoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUnVubmVyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSdW5uZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9scmMta2l0L2xpYi9ydW5uZXIuanNcbi8vIG1vZHVsZSBpZCA9IDYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBjbG9uZSA9IChmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDbG9uZXMgKGNvcGllcykgYW4gT2JqZWN0IHVzaW5nIGRlZXAgY29weWluZy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHN1cHBvcnRzIGNpcmN1bGFyIHJlZmVyZW5jZXMgYnkgZGVmYXVsdCwgYnV0IGlmIHlvdSBhcmUgY2VydGFpblxuICogdGhlcmUgYXJlIG5vIGNpcmN1bGFyIHJlZmVyZW5jZXMgaW4geW91ciBvYmplY3QsIHlvdSBjYW4gc2F2ZSBzb21lIENQVSB0aW1lXG4gKiBieSBjYWxsaW5nIGNsb25lKG9iaiwgZmFsc2UpLlxuICpcbiAqIENhdXRpb246IGlmIGBjaXJjdWxhcmAgaXMgZmFsc2UgYW5kIGBwYXJlbnRgIGNvbnRhaW5zIGNpcmN1bGFyIHJlZmVyZW5jZXMsXG4gKiB5b3VyIHByb2dyYW0gbWF5IGVudGVyIGFuIGluZmluaXRlIGxvb3AgYW5kIGNyYXNoLlxuICpcbiAqIEBwYXJhbSBgcGFyZW50YCAtIHRoZSBvYmplY3QgdG8gYmUgY2xvbmVkXG4gKiBAcGFyYW0gYGNpcmN1bGFyYCAtIHNldCB0byB0cnVlIGlmIHRoZSBvYmplY3QgdG8gYmUgY2xvbmVkIG1heSBjb250YWluXG4gKiAgICBjaXJjdWxhciByZWZlcmVuY2VzLiAob3B0aW9uYWwgLSB0cnVlIGJ5IGRlZmF1bHQpXG4gKiBAcGFyYW0gYGRlcHRoYCAtIHNldCB0byBhIG51bWJlciBpZiB0aGUgb2JqZWN0IGlzIG9ubHkgdG8gYmUgY2xvbmVkIHRvXG4gKiAgICBhIHBhcnRpY3VsYXIgZGVwdGguIChvcHRpb25hbCAtIGRlZmF1bHRzIHRvIEluZmluaXR5KVxuICogQHBhcmFtIGBwcm90b3R5cGVgIC0gc2V0cyB0aGUgcHJvdG90eXBlIHRvIGJlIHVzZWQgd2hlbiBjbG9uaW5nIGFuIG9iamVjdC5cbiAqICAgIChvcHRpb25hbCAtIGRlZmF1bHRzIHRvIHBhcmVudCBwcm90b3R5cGUpLlxuKi9cbmZ1bmN0aW9uIGNsb25lKHBhcmVudCwgY2lyY3VsYXIsIGRlcHRoLCBwcm90b3R5cGUpIHtcbiAgdmFyIGZpbHRlcjtcbiAgaWYgKHR5cGVvZiBjaXJjdWxhciA9PT0gJ29iamVjdCcpIHtcbiAgICBkZXB0aCA9IGNpcmN1bGFyLmRlcHRoO1xuICAgIHByb3RvdHlwZSA9IGNpcmN1bGFyLnByb3RvdHlwZTtcbiAgICBmaWx0ZXIgPSBjaXJjdWxhci5maWx0ZXI7XG4gICAgY2lyY3VsYXIgPSBjaXJjdWxhci5jaXJjdWxhclxuICB9XG4gIC8vIG1haW50YWluIHR3byBhcnJheXMgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMsIHdoZXJlIGNvcnJlc3BvbmRpbmcgcGFyZW50c1xuICAvLyBhbmQgY2hpbGRyZW4gaGF2ZSB0aGUgc2FtZSBpbmRleFxuICB2YXIgYWxsUGFyZW50cyA9IFtdO1xuICB2YXIgYWxsQ2hpbGRyZW4gPSBbXTtcblxuICB2YXIgdXNlQnVmZmVyID0gdHlwZW9mIEJ1ZmZlciAhPSAndW5kZWZpbmVkJztcblxuICBpZiAodHlwZW9mIGNpcmN1bGFyID09ICd1bmRlZmluZWQnKVxuICAgIGNpcmN1bGFyID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGRlcHRoID09ICd1bmRlZmluZWQnKVxuICAgIGRlcHRoID0gSW5maW5pdHk7XG5cbiAgLy8gcmVjdXJzZSB0aGlzIGZ1bmN0aW9uIHNvIHdlIGRvbid0IHJlc2V0IGFsbFBhcmVudHMgYW5kIGFsbENoaWxkcmVuXG4gIGZ1bmN0aW9uIF9jbG9uZShwYXJlbnQsIGRlcHRoKSB7XG4gICAgLy8gY2xvbmluZyBudWxsIGFsd2F5cyByZXR1cm5zIG51bGxcbiAgICBpZiAocGFyZW50ID09PSBudWxsKVxuICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAoZGVwdGggPT0gMClcbiAgICAgIHJldHVybiBwYXJlbnQ7XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgdmFyIHByb3RvO1xuICAgIGlmICh0eXBlb2YgcGFyZW50ICE9ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cblxuICAgIGlmIChjbG9uZS5fX2lzQXJyYXkocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBbXTtcbiAgICB9IGVsc2UgaWYgKGNsb25lLl9faXNSZWdFeHAocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBuZXcgUmVnRXhwKHBhcmVudC5zb3VyY2UsIF9fZ2V0UmVnRXhwRmxhZ3MocGFyZW50KSk7XG4gICAgICBpZiAocGFyZW50Lmxhc3RJbmRleCkgY2hpbGQubGFzdEluZGV4ID0gcGFyZW50Lmxhc3RJbmRleDtcbiAgICB9IGVsc2UgaWYgKGNsb25lLl9faXNEYXRlKHBhcmVudCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IERhdGUocGFyZW50LmdldFRpbWUoKSk7XG4gICAgfSBlbHNlIGlmICh1c2VCdWZmZXIgJiYgQnVmZmVyLmlzQnVmZmVyKHBhcmVudCkpIHtcbiAgICAgIGlmIChCdWZmZXIuYWxsb2NVbnNhZmUpIHtcbiAgICAgICAgLy8gTm9kZS5qcyA+PSA0LjUuMFxuICAgICAgICBjaGlsZCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShwYXJlbnQubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE9sZGVyIE5vZGUuanMgdmVyc2lvbnNcbiAgICAgICAgY2hpbGQgPSBuZXcgQnVmZmVyKHBhcmVudC5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcGFyZW50LmNvcHkoY2hpbGQpO1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHByb3RvdHlwZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwYXJlbnQpO1xuICAgICAgICBjaGlsZCA9IE9iamVjdC5jcmVhdGUocHJvdG8pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNoaWxkID0gT2JqZWN0LmNyZWF0ZShwcm90b3R5cGUpO1xuICAgICAgICBwcm90byA9IHByb3RvdHlwZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2lyY3VsYXIpIHtcbiAgICAgIHZhciBpbmRleCA9IGFsbFBhcmVudHMuaW5kZXhPZihwYXJlbnQpO1xuXG4gICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGFsbENoaWxkcmVuW2luZGV4XTtcbiAgICAgIH1cbiAgICAgIGFsbFBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgYWxsQ2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSBpbiBwYXJlbnQpIHtcbiAgICAgIHZhciBhdHRycztcbiAgICAgIGlmIChwcm90bykge1xuICAgICAgICBhdHRycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG8sIGkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXR0cnMgJiYgYXR0cnMuc2V0ID09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjaGlsZFtpXSA9IF9jbG9uZShwYXJlbnRbaV0sIGRlcHRoIC0gMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9XG5cbiAgcmV0dXJuIF9jbG9uZShwYXJlbnQsIGRlcHRoKTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgZmxhdCBjbG9uZSB1c2luZyBwcm90b3R5cGUsIGFjY2VwdHMgb25seSBvYmplY3RzLCB1c2VmdWxsIGZvciBwcm9wZXJ0eVxuICogb3ZlcnJpZGUgb24gRkxBVCBjb25maWd1cmF0aW9uIG9iamVjdCAobm8gbmVzdGVkIHByb3BzKS5cbiAqXG4gKiBVU0UgV0lUSCBDQVVUSU9OISBUaGlzIG1heSBub3QgYmVoYXZlIGFzIHlvdSB3aXNoIGlmIHlvdSBkbyBub3Qga25vdyBob3cgdGhpc1xuICogd29ya3MuXG4gKi9cbmNsb25lLmNsb25lUHJvdG90eXBlID0gZnVuY3Rpb24gY2xvbmVQcm90b3R5cGUocGFyZW50KSB7XG4gIGlmIChwYXJlbnQgPT09IG51bGwpXG4gICAgcmV0dXJuIG51bGw7XG5cbiAgdmFyIGMgPSBmdW5jdGlvbiAoKSB7fTtcbiAgYy5wcm90b3R5cGUgPSBwYXJlbnQ7XG4gIHJldHVybiBuZXcgYygpO1xufTtcblxuLy8gcHJpdmF0ZSB1dGlsaXR5IGZ1bmN0aW9uc1xuXG5mdW5jdGlvbiBfX29ialRvU3RyKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn07XG5jbG9uZS5fX29ialRvU3RyID0gX19vYmpUb1N0cjtcblxuZnVuY3Rpb24gX19pc0RhdGUobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIF9fb2JqVG9TdHIobykgPT09ICdbb2JqZWN0IERhdGVdJztcbn07XG5jbG9uZS5fX2lzRGF0ZSA9IF9faXNEYXRlO1xuXG5mdW5jdGlvbiBfX2lzQXJyYXkobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIF9fb2JqVG9TdHIobykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuY2xvbmUuX19pc0FycmF5ID0gX19pc0FycmF5O1xuXG5mdW5jdGlvbiBfX2lzUmVnRXhwKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiBfX29ialRvU3RyKG8pID09PSAnW29iamVjdCBSZWdFeHBdJztcbn07XG5jbG9uZS5fX2lzUmVnRXhwID0gX19pc1JlZ0V4cDtcblxuZnVuY3Rpb24gX19nZXRSZWdFeHBGbGFncyhyZSkge1xuICB2YXIgZmxhZ3MgPSAnJztcbiAgaWYgKHJlLmdsb2JhbCkgZmxhZ3MgKz0gJ2cnO1xuICBpZiAocmUuaWdub3JlQ2FzZSkgZmxhZ3MgKz0gJ2knO1xuICBpZiAocmUubXVsdGlsaW5lKSBmbGFncyArPSAnbSc7XG4gIHJldHVybiBmbGFncztcbn07XG5jbG9uZS5fX2dldFJlZ0V4cEZsYWdzID0gX19nZXRSZWdFeHBGbGFncztcblxucmV0dXJuIGNsb25lO1xufSkoKTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gY2xvbmU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2xyYy1raXQvfi9jbG9uZS9jbG9uZS5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG4vKiBzdHlsZXMgKi9cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXI/aWQ9ZGF0YS12LTBiYzFkODVjJnNjb3BlZD10cnVlIXNhc3MtbG9hZGVyIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXN0eWxlcyZpbmRleD0wIS4vdG1lbnUudnVlXCIpXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXI/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyP2lkPWRhdGEtdi0wYmMxZDg1YyFzYXNzLWxvYWRlciEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zdHlsZXMmaW5kZXg9MSEuL3RtZW51LnZ1ZVwiKVxuXG52YXIgQ29tcG9uZW50ID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXJcIikoXG4gIC8qIHNjcmlwdCAqL1xuICByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90bWVudS52dWVcIiksXG4gIC8qIHRlbXBsYXRlICovXG4gIHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlcj9pZD1kYXRhLXYtMGJjMWQ4NWMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3RtZW51LnZ1ZVwiKSxcbiAgLyogc2NvcGVJZCAqL1xuICBcImRhdGEtdi0wYmMxZDg1Y1wiLFxuICAvKiBjc3NNb2R1bGVzICovXG4gIG51bGxcbilcblxubW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvdG1lbnUudnVlXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi0wYmMxZDg1YyZzY29wZWQ9dHJ1ZSEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi90bWVudS52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlc0NsaWVudC5qc1wiKShcIjAwNmUwODNjXCIsIGNvbnRlbnQsIHRydWUpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLXN0eWxlLWxvYWRlciEuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtMGJjMWQ4NWMmc2NvcGVkPXRydWUhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9hcHAvdG1lbnUudnVlXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJzcGFuW2RhdGEtdi0wYmMxZDg1Y117cG9zaXRpb246cmVsYXRpdmV9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTBiYzFkODVjJnNjb3BlZD10cnVlIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL3RtZW51LnZ1ZVxuLy8gbW9kdWxlIGlkID0gNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP21pbmltaXplIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtMGJjMWQ4NWMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vdG1lbnUudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCJkZmIyMjM2MFwiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTBiYzFkODVjIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vYXBwL3RtZW51LnZ1ZVxuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm1lbnV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmV9Lm1lbnUgdWx7bGlzdC1zdHlsZS10eXBlOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowfS5tZW51IHVsIGxpe3doaXRlLXNwYWNlOm5vd3JhcDtoZWlnaHQ6MjVweDtsaW5lLWhlaWdodDoyNXB4O3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzJhNzJiYjtjdXJzb3I6cG9pbnRlcn0ubWVudSB1bCBsaTpob3Zlcntjb2xvcjojMmE3MmJiO2JhY2tncm91bmQtY29sb3I6I2U4ZTFlMX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtMGJjMWQ4NWMhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTEhLi9hcHAvdG1lbnUudnVlXG4vLyBtb2R1bGUgaWQgPSA2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCI8dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJtZW51XCIgcmVmPVwibWVudVwiPlxuICAgIDx0b29sdGlwIDpkaXI9XCJkaXJcIiA6dGFyZ2V0PVwiJHJlZnMubWVudVwiIDplbnRlci1kZWxheT1cIjBcIj5cbiAgICAgIDxkaXYgc2xvdD1cInRhcmdldFwiPlxuICAgICAgICA8c2xvdCBuYW1lPVwidGFyZ2V0XCI+XG4gICAgICAgIDwvc2xvdD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBzbG90PVwiY29udGVudFwiPlxuICAgICAgICA8c2xvdCBuYW1lPVwibGlzdFwiPlxuICAgICAgICA8L3Nsb3Q+XG4gICAgICA8L2Rpdj5cbiAgICA8L3Rvb2x0aXA+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHN0eWxlIGxhbmc9XCJzYXNzXCIgc2NvcGVkPlxuc3BhbiB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbjwvc3R5bGU+XG5cbjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuQGltcG9ydCAnc2Fzcy9iYXNlJztcblxuLm1lbnUge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdWwge1xuICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMDtcbiAgICBsaSB7XG4gICAgICAkYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIGhlaWdodDogMjVweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyNXB4O1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgY29sb3I6ICRibHVlLWNvbG9yO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiAkYmx1ZS1jb2xvcjtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0U4RTFFMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbjwvc3R5bGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgVG9vbHRpcCBmcm9tICcuL3Rvb2x0aXAnXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpcjogZmFsc2UsXG4gICAgfVxuICB9LFxuICBjb21wb25lbnRzOiB7XG4gICAgVG9vbHRpcCxcbiAgfSxcbn1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHRtZW51LnZ1ZT8wYTZhNTIyYyIsIlxuLyogc3R5bGVzICovXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXI/bWluaW1pemUhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyP2lkPWRhdGEtdi0zNTdkM2M0YyFzYXNzLWxvYWRlciEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL3Rvb2x0aXAudnVlXCIpXG5cbnZhciBDb21wb25lbnQgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9jb21wb25lbnQtbm9ybWFsaXplclwiKShcbiAgLyogc2NyaXB0ICovXG4gIHJlcXVpcmUoXCIhIWJhYmVsLWxvYWRlciEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL3Rvb2x0aXAudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTM1N2QzYzRjIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi90b29sdGlwLnZ1ZVwiKSxcbiAgLyogc2NvcGVJZCAqL1xuICBudWxsLFxuICAvKiBjc3NNb2R1bGVzICovXG4gIG51bGxcbilcblxubW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvdG9vbHRpcC52dWVcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTM1N2QzYzRjIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL3Rvb2x0aXAudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCIxYmMyY2VkNVwiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTM1N2QzYzRjIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0wIS4vYXBwL3Rvb2x0aXAudnVlXG4vLyBtb2R1bGUgaWQgPSA3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudG9vbHRpcCAud3JhcHtwYWRkaW5nOjhweDtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzJhNzJiYjtib3JkZXItcmFkaXVzOjhweDtib3gtc2hhZG93Oi41cHggLjVweCAzcHggLjVweCAjY2NjfS50b29sdGlwIC53cmFwIC5hcnJvd3twb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDowO2hlaWdodDowO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG99LnRvb2x0aXAgLndyYXAgLmFycm93LmxlZnR7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6LTE2cHg7Ym9yZGVyOjhweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDo4cHggc29saWQgI2ZmZn0udG9vbHRpcCAud3JhcCAuYXJyb3cucmlnaHR7dG9wOjA7Ym90dG9tOjA7bGVmdDotMTZweDtib3JkZXI6OHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yaWdodDo4cHggc29saWQgI2ZmZn0udG9vbHRpcCAud3JhcCAuYXJyb3cudG9we2xlZnQ6MDtyaWdodDowO2JvdHRvbTotMTZweDtib3JkZXI6OHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci10b3A6OHB4IHNvbGlkICNmZmZ9LnRvb2x0aXAgLndyYXAgLmFycm93LmJvdHRvbXtsZWZ0OjA7cmlnaHQ6MDt0b3A6LTE2cHg7Ym9yZGVyOjhweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItYm90dG9tOjhweCBzb2xpZCAjZmZmfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi0zNTdkM2M0YyEuLi9+L3Nhc3MtbG9hZGVyIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2FwcC90b29sdGlwLnZ1ZVxuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiPHRlbXBsYXRlPlxuICA8c3BhbiBjbGFzcz1cInRvb2x0aXBcIj5cbiAgICA8c2xvdCBuYW1lPVwidGFyZ2V0XCI+PC9zbG90PlxuICAgIDxkaXYgY2xhc3M9XCJ3cmFwXCIgOnN0eWxlPVwic3R5bGVcIiByZWY9XCJ3cmFwXCI+XG4gICAgICA8ZGl2IDpjbGFzcz1cIidhcnJvdyAnICsgZGlyXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICA8c2xvdCBuYW1lPVwiY29udGVudFwiPjwvc2xvdD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L3NwYW4+XG48L3RlbXBsYXRlPlxuXG48c3R5bGUgbGFuZz1cInNhc3NcIj5cbkBpbXBvcnQgJ3Nhc3MvYmFzZSc7XG5cbi50b29sdGlwIHtcbiAgLndyYXAge1xuICAgICRib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB6LWluZGV4OiAxMDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgY29sb3I6ICRibHVlLWNvbG9yO1xuICAgIGJvcmRlci1yYWRpdXM6ICRib3JkZXItcmFkaXVzO1xuICAgIGJveC1zaGFkb3c6IC41cHggLjVweCAzcHggLjVweCAjY2NjO1xuXG4gICAgLmFycm93IHtcbiAgICAgICR3aWR0aDogOHB4O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDA7XG4gICAgICBoZWlnaHQ6IDA7XG4gICAgICBkaXNwbGF5OiBibG9jaztcblxuICAgICAgQG1peGluIGFycm93KCRkaXIpIHtcbiAgICAgICAgYm9yZGVyOiAkd2lkdGggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIGJvcmRlci0jeyRkaXJ9OiAkd2lkdGggc29saWQgd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICYubGVmdCB7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICByaWdodDogLSAkd2lkdGggKiAyO1xuICAgICAgICBAaW5jbHVkZSBhcnJvdygnbGVmdCcpO1xuICAgICAgfVxuICAgICAgJi5yaWdodCB7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBsZWZ0OiAtICR3aWR0aCAqIDI7XG4gICAgICAgIEBpbmNsdWRlIGFycm93KCdyaWdodCcpO1xuICAgICAgfVxuICAgICAgJi50b3Age1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAtICR3aWR0aCAqIDI7XG4gICAgICAgIEBpbmNsdWRlIGFycm93KCd0b3AnKTtcbiAgICAgIH1cbiAgICAgICYuYm90dG9tIHtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIHRvcDogLSAkd2lkdGggKiAyO1xuICAgICAgICBAaW5jbHVkZSBhcnJvdygnYm90dG9tJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG48L3N0eWxlPlxuXG48c2NyaXB0PlxuaW1wb3J0IHtEZWxheUhvdmVyLCBUb29sdGlwUG9zaXRpb259IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IGV4dGVuZCBmcm9tICdleHRlbmQnXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgICB9LFxuICAgICAgc2hvdzogZmFsc2UsXG4gICAgICBkaXI6IGZhbHNlLFxuICAgIH1cbiAgfSxcbiAgcHJvcHM6IHtcbiAgICBlbnRlckRlbGF5OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwLjEsXG4gICAgfSxcbiAgICBsZWF2ZURlbGF5OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwLjUsXG4gICAgfSxcbiAgICB0YXJnZXQ6IHtcbiAgICAgIHR5cGU6IEVsZW1lbnQsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gIH0sXG4gIG1vdW50ZWQgKCkge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLnRhcmdldCAhPT0gbnVsbCA/IHRoaXMudGFyZ2V0IDogdGhpcy4kZWxcbiAgICB2YXIgdGxwUG9zID0gbmV3IFRvb2x0aXBQb3NpdGlvbihwYXJlbnQsIHRoaXMuJHJlZnMud3JhcClcbiAgICB2YXIgYXJyb3dTcGFjZSA9IDEwXG5cbiAgICB2YXIgZGhvdmVyID0gbmV3IERlbGF5SG92ZXIocGFyZW50LCB7XG4gICAgICBlbnRlckRlbGF5OiB0aGlzLmVudGVyRGVsYXksXG4gICAgICBsZWF2ZURlbGF5OiB0aGlzLmxlYXZlRGVsYXksXG4gICAgfSlcbiAgICBkaG92ZXIuaG92ZXIoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHZhciBwb3MgPSB0bHBQb3MucG9zaXRpb24oKVxuICAgICAgICB0aGlzLmRpciA9IHBvcy5kaXJcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpcikge1xuICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgZXh0ZW5kKHRoaXMuc3R5bGUsIHtcbiAgICAgICAgICAgICAgdG9wOiBgJHtwb3MucmVjdC50b3B9cHhgLFxuICAgICAgICAgICAgICBsZWZ0OiBgJHtwb3MucmVjdC5sZWZ0IC0gYXJyb3dTcGFjZX1weGAsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICBleHRlbmQodGhpcy5zdHlsZSwge1xuICAgICAgICAgICAgICB0b3A6IGAke3Bvcy5yZWN0LnRvcH1weGAsXG4gICAgICAgICAgICAgIGxlZnQ6IGAke3Bvcy5yZWN0LmxlZnQgKyBhcnJvd1NwYWNlfXB4YCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICBleHRlbmQodGhpcy5zdHlsZSwge1xuICAgICAgICAgICAgICB0b3A6IGAke3Bvcy5yZWN0LnRvcCAtIGFycm93U3BhY2V9cHhgLFxuICAgICAgICAgICAgICBsZWZ0OiBgJHtwb3MucmVjdC5sZWZ0fXB4YCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICBleHRlbmQodGhpcy5zdHlsZSwge1xuICAgICAgICAgICAgICB0b3A6IGAke3Bvcy5yZWN0LnRvcCArIGFycm93U3BhY2V9cHhgLFxuICAgICAgICAgICAgICBsZWZ0OiBgJHtwb3MucmVjdC5sZWZ0fXB4YCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgZmFsc2U6XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNob3cgPSB0cnVlXG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnNob3cgPSBmYWxzZVxuICAgICAgfVxuICAgIClcbiAgfSxcbiAgd2F0Y2g6IHtcbiAgICBzaG93OiB7XG4gICAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgICBoYW5kbGVyICgpIHtcbiAgICAgICAgdGhpcy5zdHlsZS52aXNpYmlsaXR5ID0gdGhpcy5zaG93ID8gJ3Zpc2libGUnIDogJ2hpZGRlbidcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbn1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHRvb2x0aXAudnVlPzM3ZGNiZTIyIiwibW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcbiAgcmV0dXJuIF9jKCdzcGFuJywge1xuICAgIHN0YXRpY0NsYXNzOiBcInRvb2x0aXBcIlxuICB9LCBbX3ZtLl90KFwidGFyZ2V0XCIpLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgIHJlZjogXCJ3cmFwXCIsXG4gICAgc3RhdGljQ2xhc3M6IFwid3JhcFwiLFxuICAgIHN0eWxlOiAoX3ZtLnN0eWxlKVxuICB9LCBbX2MoJ2RpdicsIHtcbiAgICBjbGFzczogJ2Fycm93ICcgKyBfdm0uZGlyXG4gIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImNvbnRlbnRcIlxuICB9LCBbX3ZtLl90KFwiY29udGVudFwiKV0sIDIpXSldLCAyKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXIuanM/aWQ9ZGF0YS12LTM1N2QzYzRjIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vYXBwL3Rvb2x0aXAudnVlXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIHtcbiAgICByZWY6IFwibWVudVwiLFxuICAgIHN0YXRpY0NsYXNzOiBcIm1lbnVcIlxuICB9LCBbX2MoJ3Rvb2x0aXAnLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIFwiZGlyXCI6IF92bS5kaXIsXG4gICAgICBcInRhcmdldFwiOiBfdm0uJHJlZnMubWVudSxcbiAgICAgIFwiZW50ZXItZGVsYXlcIjogMFxuICAgIH1cbiAgfSwgW19jKCdkaXYnLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIFwic2xvdFwiOiBcInRhcmdldFwiXG4gICAgfSxcbiAgICBzbG90OiBcInRhcmdldFwiXG4gIH0sIFtfdm0uX3QoXCJ0YXJnZXRcIildLCAyKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJzbG90XCI6IFwiY29udGVudFwiXG4gICAgfSxcbiAgICBzbG90OiBcImNvbnRlbnRcIlxuICB9LCBbX3ZtLl90KFwibGlzdFwiKV0sIDIpXSldLCAxKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXIuanM/aWQ9ZGF0YS12LTBiYzFkODVjIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vYXBwL3RtZW51LnZ1ZVxuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcbiAgcmV0dXJuIChfdm0uZWRpdGluZykgPyBfYygndWwnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiZWRpdGluZyBseXJpY3NcIlxuICB9LCBbX3ZtLl9sKChfdm0ucnVubmVyLmxyYy5seXJpY3MpLCBmdW5jdGlvbihseXJpYywgaSkge1xuICAgIHJldHVybiBfYygnbGknLCB7XG4gICAgICBjbGFzczoge1xuICAgICAgICBjdXI6IGkgPT0gX3ZtLmluZGV4XG4gICAgICB9LFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgXCJ0aXRsZVwiOiBseXJpYy50aW1lc3RhbXBcbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcImRibGNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIF92bS5lZGl0KGkpXG4gICAgICAgIH0sXG4gICAgICAgIFwiY29udGV4dG1lbnVcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgX3ZtLmVkaXRNZW51KGkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBbKF92bS5lZGl0aW5nSW5kZXggPT0gaSkgPyBbX2MoJ2lucHV0Jywge1xuICAgICAgZGlyZWN0aXZlczogW3tcbiAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcbiAgICAgICAgdmFsdWU6IChseXJpYy50aW1lc3RhbXApLFxuICAgICAgICBleHByZXNzaW9uOiBcImx5cmljLnRpbWVzdGFtcFwiXG4gICAgICB9XSxcbiAgICAgIHN0YXRpY0NsYXNzOiBcInRpbWVzdGFtcFwiLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiXG4gICAgICB9LFxuICAgICAgZG9tUHJvcHM6IHtcbiAgICAgICAgXCJ2YWx1ZVwiOiAobHlyaWMudGltZXN0YW1wKVxuICAgICAgfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIFwia2V5ZG93blwiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICBpZiAoISgnYnV0dG9uJyBpbiAkZXZlbnQpICYmIF92bS5faygkZXZlbnQua2V5Q29kZSwgXCJlbnRlclwiLCAxMywgJGV2ZW50LmtleSwgXCJFbnRlclwiKSkgeyByZXR1cm4gbnVsbDsgfVxuICAgICAgICAgIHJldHVybiBfdm0uZXhpdEVkaXQoJGV2ZW50KVxuICAgICAgICB9LFxuICAgICAgICBcImlucHV0XCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgeyByZXR1cm47IH1cbiAgICAgICAgICBfdm0uJHNldChseXJpYywgXCJ0aW1lc3RhbXBcIiwgJGV2ZW50LnRhcmdldC52YWx1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygnaW5wdXQnLCB7XG4gICAgICBkaXJlY3RpdmVzOiBbe1xuICAgICAgICBuYW1lOiBcIm1vZGVsXCIsXG4gICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgICB2YWx1ZTogKGx5cmljLmNvbnRlbnQpLFxuICAgICAgICBleHByZXNzaW9uOiBcImx5cmljLmNvbnRlbnRcIlxuICAgICAgfV0sXG4gICAgICBzdGF0aWNDbGFzczogXCJjb250ZW50XCIsXG4gICAgICBhdHRyczoge1xuICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCJcbiAgICAgIH0sXG4gICAgICBkb21Qcm9wczoge1xuICAgICAgICBcInZhbHVlXCI6IChseXJpYy5jb250ZW50KVxuICAgICAgfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIFwia2V5ZG93blwiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICBpZiAoISgnYnV0dG9uJyBpbiAkZXZlbnQpICYmIF92bS5faygkZXZlbnQua2V5Q29kZSwgXCJlbnRlclwiLCAxMywgJGV2ZW50LmtleSwgXCJFbnRlclwiKSkgeyByZXR1cm4gbnVsbDsgfVxuICAgICAgICAgIHJldHVybiBfdm0uZXhpdEVkaXQoJGV2ZW50KVxuICAgICAgICB9LFxuICAgICAgICBcImlucHV0XCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgeyByZXR1cm47IH1cbiAgICAgICAgICBfdm0uJHNldChseXJpYywgXCJjb250ZW50XCIsICRldmVudC50YXJnZXQudmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KV0gOiBbX2MoJ2RpdicsIHtcbiAgICAgIHN0YXRpY0NsYXNzOiBcInRpbWVzdGFtcFwiXG4gICAgfSwgW192bS5fdihfdm0uX3MoX3ZtLl9mKFwidGltZVwiKShseXJpYy50aW1lc3RhbXApKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICAgIHN0YXRpY0NsYXNzOiBcImNvbnRlbnRcIlxuICAgIH0sIFtfdm0uX3YoX3ZtLl9zKGx5cmljLmNvbnRlbnQpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1idG4gY29uY2VhbFwiXG4gICAgfSwgW19jKCd0bWVudScsIFtfYygnZGl2Jywge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgXCJzbG90XCI6IFwidGFyZ2V0XCJcbiAgICAgIH0sXG4gICAgICBzbG90OiBcInRhcmdldFwiXG4gICAgfSwgW19jKCdpJywge1xuICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1lbGxpcHNpcy12ZXJ0XCJcbiAgICB9KV0pLCBfdm0uX3YoXCIgXCIpLCBfYygndWwnLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBcInNsb3RcIjogXCJsaXN0XCJcbiAgICAgIH0sXG4gICAgICBzbG90OiBcImxpc3RcIlxuICAgIH0sIFtfYygnbGknLCB7XG4gICAgICBvbjoge1xuICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIF92bS5yZW1vdmVUaW1lc3RhbXAoaSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIFtfYygnaScsIHtcbiAgICAgIHN0YXRpY0NsYXNzOiBcImljb24tY2FuY2VsXCJcbiAgICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLnJlbW92ZV90aW1lc3RhbXAnKSkgKyBcIlxcbiAgICAgICAgICAgIFwiKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbGknLCB7XG4gICAgICBvbjoge1xuICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIF92bS5lZGl0KGkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBbX2MoJ2knLCB7XG4gICAgICBzdGF0aWNDbGFzczogXCJpY29uLWVkaXRcIlxuICAgIH0pLCBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KCdseXJpY19lZGl0b3IuZWRpdCcpKSArIFwiXFxuICAgICAgICAgICAgXCIpXSksIF92bS5fdihcIiBcIiksIF9jKCdsaScsIHtcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgX3ZtLmluc2VydChpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgW19jKCdpJywge1xuICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1wbHVzXCJcbiAgICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLmFkZCcpKSArIFwiXFxuICAgICAgICAgICAgXCIpXSksIF92bS5fdihcIiBcIiksIF9jKCdsaScsIHtcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgX3ZtLnJlbW92ZShpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgW19jKCdpJywge1xuICAgICAgc3RhdGljQ2xhc3M6IFwiaWNvbi10cmFzaFwiXG4gICAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ2x5cmljX2VkaXRvci5yZW1vdmUnKSkgKyBcIlxcbiAgICAgICAgICAgIFwiKV0pXSldKV0sIDEpXV0sIDIpXG4gIH0pLCBfdm0uX3YoXCIgXCIpLCAoX3ZtLmx5cmljQXJyYXkubGVuZ3RoKSA/IF9jKCdsaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJkaXZpc2lvblwiXG4gIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLmZvbGxvd2luZ191bnNvcnRlZCcpKSldKSA6IF92bS5fZSgpLCBfdm0uX3YoXCIgXCIpLCBfdm0uX2woKF92bS5seXJpY0FycmF5KSwgZnVuY3Rpb24obHlyaWMsIGkpIHtcbiAgICByZXR1cm4gX2MoJ2xpJywge1xuICAgICAgc3RhdGljQ2xhc3M6IFwidW5zb3J0ZWRcIixcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIFwidHJhY2stYnlcIjogXCJpXCJcbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcImRibGNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIF92bS5lZGl0VGV4dChpKVxuICAgICAgICB9LFxuICAgICAgICBcImNvbnRleHRtZW51XCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIF92bS5lZGl0TWVudShpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgWyhfdm0uZWRpdGluZ1RleHRJbmRleCA9PSBpKSA/IFtfYygnaW5wdXQnLCB7XG4gICAgICBkaXJlY3RpdmVzOiBbe1xuICAgICAgICBuYW1lOiBcIm1vZGVsXCIsXG4gICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgICB2YWx1ZTogKF92bS5seXJpY0FycmF5W2ldKSxcbiAgICAgICAgZXhwcmVzc2lvbjogXCJseXJpY0FycmF5W2ldXCJcbiAgICAgIH1dLFxuICAgICAgc3RhdGljQ2xhc3M6IFwiY29udGVudFwiLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiXG4gICAgICB9LFxuICAgICAgZG9tUHJvcHM6IHtcbiAgICAgICAgXCJ2YWx1ZVwiOiAoX3ZtLmx5cmljQXJyYXlbaV0pXG4gICAgICB9LFxuICAgICAgb246IHtcbiAgICAgICAgXCJrZXlkb3duXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIGlmICghKCdidXR0b24nIGluICRldmVudCkgJiYgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcImVudGVyXCIsIDEzLCAkZXZlbnQua2V5LCBcIkVudGVyXCIpKSB7IHJldHVybiBudWxsOyB9XG4gICAgICAgICAgcmV0dXJuIF92bS5leGl0RWRpdCgkZXZlbnQpXG4gICAgICAgIH0sXG4gICAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7IHJldHVybjsgfVxuICAgICAgICAgIF92bS4kc2V0KF92bS5seXJpY0FycmF5LCBpLCAkZXZlbnQudGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSldIDogW19jKCdkaXYnLCB7XG4gICAgICBzdGF0aWNDbGFzczogXCJjb250ZW50XCJcbiAgICB9LCBbX3ZtLl92KF92bS5fcyhseXJpYykpXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG4gICAgICBzdGF0aWNDbGFzczogXCJpY29uLWJ0biBjb25jZWFsXCJcbiAgICB9LCBbX2MoJ3RtZW51JywgW19jKCdkaXYnLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBcInNsb3RcIjogXCJ0YXJnZXRcIlxuICAgICAgfSxcbiAgICAgIHNsb3Q6IFwidGFyZ2V0XCJcbiAgICB9LCBbX2MoJ2knLCB7XG4gICAgICBzdGF0aWNDbGFzczogXCJpY29uLWVsbGlwc2lzLXZlcnRcIlxuICAgIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCd1bCcsIHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIFwic2xvdFwiOiBcImxpc3RcIlxuICAgICAgfSxcbiAgICAgIHNsb3Q6IFwibGlzdFwiXG4gICAgfSwgW19jKCdsaScsIHtcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgX3ZtLmVkaXRUZXh0KGkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBbX2MoJ2knLCB7XG4gICAgICBzdGF0aWNDbGFzczogXCJpY29uLWVkaXRcIlxuICAgIH0pLCBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KCdseXJpY19lZGl0b3IuZWRpdCcpKSArIFwiXFxuICAgICAgICAgICAgXCIpXSksIF92bS5fdihcIiBcIiksIF9jKCdsaScsIHtcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgX3ZtLmluc2VydFRleHQoaSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIFtfYygnaScsIHtcbiAgICAgIHN0YXRpY0NsYXNzOiBcImljb24tcGx1c1wiXG4gICAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ2x5cmljX2VkaXRvci5hZGQnKSkgKyBcIlxcbiAgICAgICAgICAgIFwiKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbGknLCB7XG4gICAgICBvbjoge1xuICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIF92bS5yZW1vdmVUZXh0KGkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBbX2MoJ2knLCB7XG4gICAgICBzdGF0aWNDbGFzczogXCJpY29uLXRyYXNoXCJcbiAgICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbHlyaWNfZWRpdG9yLnJlbW92ZScpKSArIFwiXFxuICAgICAgICAgICAgXCIpXSldKV0pXSwgMSldXSwgMilcbiAgfSldLCAyKSA6IF9jKCd1bCcsIHtcbiAgICBzdGF0aWNDbGFzczogXCJseXJpY3NcIlxuICB9LCBbX3ZtLl9sKChfdm0ucnVubmVyLmxyYy5seXJpY3MpLCBmdW5jdGlvbihseXJpYywgaSkge1xuICAgIHJldHVybiBfYygnbGknLCB7XG4gICAgICBjbGFzczoge1xuICAgICAgICBjdXI6IGkgPT0gX3ZtLmluZGV4XG4gICAgICB9LFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgXCJ0aXRsZVwiOiBseXJpYy50aW1lc3RhbXBcbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIF92bS5wbGF5dG8obHlyaWMudGltZXN0YW1wKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgW192bS5fdihcIlxcbiAgICBcIiArIF92bS5fcyhseXJpYy5jb250ZW50KSArIFwiXFxuICBcIildKVxuICB9KSwgX3ZtLl92KFwiIFwiKSwgKF92bS5seXJpY0FycmF5Lmxlbmd0aCkgPyBfYygnbGknLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiZGl2aXNpb25cIlxuICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ2x5cmljX2VkaXRvci5mb2xsb3dpbmdfdW5zb3J0ZWQnKSkpXSkgOiBfdm0uX2UoKSwgX3ZtLl92KFwiIFwiKSwgX3ZtLl9sKChfdm0ubHlyaWNBcnJheSksIGZ1bmN0aW9uKGx5cmljLCBpKSB7XG4gICAgcmV0dXJuIF9jKCdsaScsIHtcbiAgICAgIHN0YXRpY0NsYXNzOiBcInVuc29ydGVkXCIsXG4gICAgICBhdHRyczoge1xuICAgICAgICBcInRyYWNrLWJ5XCI6IFwiaVwiXG4gICAgICB9XG4gICAgfSwgW192bS5fdihcIlxcbiAgICBcIiArIF92bS5fcyhseXJpYykgKyBcIlxcbiAgXCIpXSlcbiAgfSldLCAyKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXIuanM/aWQ9ZGF0YS12LTNmYjQ0MWJjIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vYXBwL2x5cmljLWVkaXRvci52dWVcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuLyogc3R5bGVzICovXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXI/bWluaW1pemUhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyP2lkPWRhdGEtdi03MmQyOWU3MCZzY29wZWQ9dHJ1ZSFzYXNzLWxvYWRlciEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyP21pbmltaXplIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlcj9pZD1kYXRhLXYtNzJkMjllNzAhc2Fzcy1sb2FkZXIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c3R5bGVzJmluZGV4PTEhLi9pbmRleC52dWVcIilcblxudmFyIENvbXBvbmVudCA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2NvbXBvbmVudC1ub3JtYWxpemVyXCIpKFxuICAvKiBzY3JpcHQgKi9cbiAgcmVxdWlyZShcIiEhYmFiZWwtbG9hZGVyIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTcyZDI5ZTcwIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9pbmRleC52dWVcIiksXG4gIC8qIHNjb3BlSWQgKi9cbiAgXCJkYXRhLXYtNzJkMjllNzBcIixcbiAgLyogY3NzTW9kdWxlcyAqL1xuICBudWxsXG4pXG5cbm1vZHVsZS5leHBvcnRzID0gQ29tcG9uZW50LmV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYXBwL21vZGFscy9pbmRleC52dWVcbi8vIG1vZHVsZSBpZCA9IDc4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTcyZDI5ZTcwJnNjb3BlZD10cnVlIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpKFwiMzE2NTdjNDlcIiwgY29udGVudCwgdHJ1ZSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtc3R5bGUtbG9hZGVyIS4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi03MmQyOWU3MCZzY29wZWQ9dHJ1ZSEuLi9+L3Nhc3MtbG9hZGVyIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2FwcC9tb2RhbHMvaW5kZXgudnVlXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubW9kYWwgLmZvb3RlciAuYnRuLWdyb3VwW2RhdGEtdi03MmQyOWU3MF06YWZ0ZXIsLm1vZGFsIC5oZWFkZXJbZGF0YS12LTcyZDI5ZTcwXTphZnRlcntjb250ZW50OlxcXCIgXFxcIjtkaXNwbGF5OnRhYmxlO2NsZWFyOmJvdGh9LmNvdmVyW2RhdGEtdi03MmQyOWU3MF17cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNyk7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt6LWluZGV4OjEwMDA7b3ZlcmZsb3c6YXV0b30ubW9kYWxbZGF0YS12LTcyZDI5ZTcwXXtwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46MzBweCBhdXRvO2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjhweDtvdmVyZmxvdzpoaWRkZW59Lm1vZGFsLmxnW2RhdGEtdi03MmQyOWU3MF17d2lkdGg6NTAlfS5tb2RhbC5tZFtkYXRhLXYtNzJkMjllNzBde3dpZHRoOjcwJX0ubW9kYWwuc21bZGF0YS12LTcyZDI5ZTcwXXt3aWR0aDo5MCV9Lm1vZGFsIC5ib2R5W2RhdGEtdi03MmQyOWU3MF0sLm1vZGFsIC5mb290ZXJbZGF0YS12LTcyZDI5ZTcwXSwubW9kYWwgLmhlYWRlcltkYXRhLXYtNzJkMjllNzBde3BhZGRpbmctbGVmdDoxNHB4O3BhZGRpbmctcmlnaHQ6MTRweH0ubW9kYWwgLmJvZHlbZGF0YS12LTcyZDI5ZTcwXSwubW9kYWwgLmhlYWRlcltkYXRhLXYtNzJkMjllNzBde3BhZGRpbmctdG9wOjE0cHg7cGFkZGluZy1ib3R0b206MTRweH0ubW9kYWwgLmZvb3RlcltkYXRhLXYtNzJkMjllNzBdLC5tb2RhbCAuaGVhZGVyW2RhdGEtdi03MmQyOWU3MF17Y29sb3I6IzJhNzJiYn0ubW9kYWwgLmhlYWRlcltkYXRhLXYtNzJkMjllNzBde2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlNWU1ZTU7Zm9udC13ZWlnaHQ6Ym9sZGVyfS5tb2RhbCAuaGVhZGVyIC5pY29uLWNhbmNlbFtkYXRhLXYtNzJkMjllNzBde2Zsb2F0OnJpZ2h0O2N1cnNvcjpwb2ludGVyfS5tb2RhbCAuZm9vdGVyW2RhdGEtdi03MmQyOWU3MF17Ym9yZGVyLXRvcDoxcHggc29saWQgI2U1ZTVlNX0ubW9kYWwgLmZvb3RlciAuYnRuLWdyb3VwIC5idG5bZGF0YS12LTcyZDI5ZTcwXXtmbG9hdDpyaWdodDtib3JkZXItcmFkaXVzOjA7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtjb2xvcjojMmE3MmJiO3BhZGRpbmc6OHB4IDEwcHh9Lm1vZGFsIC5mb290ZXIgLmJ0bi1ncm91cCAuYnRuW2RhdGEtdi03MmQyOWU3MF06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4xKX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtNzJkMjllNzAmc2NvcGVkPXRydWUhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9hcHAvbW9kYWxzL2luZGV4LnZ1ZVxuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP21pbmltaXplIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtNzJkMjllNzAhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCI3NzQ5ZDJjNlwiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTcyZDI5ZTcwIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vYXBwL21vZGFscy9pbmRleC52dWVcbi8vIG1vZHVsZSBpZCA9IDgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5tb2RhbCBoM3ttYXJnaW46MTBweCAwfS5tb2RhbCB0ZXh0YXJlYXt3aWR0aDoxMDAlO2JvcmRlcjoxcHggc29saWQgI2Q2ZDZkNjtib3JkZXItcmFkaXVzOjVweDttaW4taGVpZ2h0OjMwMHB4O21hcmdpbjoxMHB4IDB9Lm1vZGFsIHB7bWFyZ2luOjB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LTcyZDI5ZTcwIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vYXBwL21vZGFscy9pbmRleC52dWVcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiA6Y2xhc3M9XCJ7Y292ZXI6IGNvdmVyU2hvd31cIiBAY2xpY2s9XCJjYW5jZWxcIj5cbiAgICA8dHJhbnNpdGlvbiBuYW1lPVwibW9kYWxcIiBAYWZ0ZXItbGVhdmU9XCJjb3ZlclNob3cgPSBmYWxzZVwiPlxuICAgICAgPGRpdiB2LWlmPVwiaXNTaG93XCIgY2xhc3M9XCJtb2RhbFwiIDpjbGFzcz1cIltzaXplXVwiIEBjbGljay5zdG9wPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICAgICAge3t0aXRsZX19XG4gICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWNhbmNlbFwiIEBjbGljaz1cImNhbmNlbFwiPjwvaT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XG4gICAgICAgICAgPGRpdiByZWY9XCJtb2RhbFdyYXBwZXJcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj5cbiAgICAgICAgICA8ZGl2IHYtaWY9XCJjb25maXJtXCIgY2xhc3M9XCJidG4tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJidG5cIiBAY2xpY2s9XCJva1wiPnt7ICR0KCdtb2RhbC5idXR0b24ub2snKSB9fTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0blwiIEBjbGljaz1cImNhbmNlbFwiPnt7ICR0KCdtb2RhbC5idXR0b24uY2FuY2VsJykgfX08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L3RyYW5zaXRpb24+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHN0eWxlIGxhbmc9XCJzYXNzXCIgc2NvcGVkPlxuQGltcG9ydCBcIi4uL3Nhc3MvYmFzZVwiO1xuXG4kcHJpbWFyeS1jb2xvcjogIzRGOTlFNDtcblxuLmNvdmVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgei1pbmRleDogMTAwMDtcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbi5tb2RhbCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgbWFyZ2luOiAzMHB4IGF1dG87XG5cbiAgJi5sZyB7XG4gICAgd2lkdGg6IDUwJTtcbiAgfVxuXG4gICYubWQge1xuICAgIHdpZHRoOiA3MCU7XG4gIH1cblxuICAmLnNtIHtcbiAgICB3aWR0aDogOTAlO1xuICB9XG5cbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAuaGVhZGVyLFxuICAuYm9keSxcbiAgLmZvb3RlcixcbiAge1xuICAgIHBhZGRpbmctbGVmdDogMTRweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAxNHB4O1xuICB9XG5cbiAgLmhlYWRlcixcbiAgLmJvZHksXG4gIHtcbiAgICBwYWRkaW5nLXRvcDogMTRweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogMTRweDtcbiAgfVxuXG4gIC5oZWFkZXIsXG4gIC5mb290ZXIsXG4gIHtcbiAgICBjb2xvcjogJGJsdWUtY29sb3I7XG4gIH1cblxuICAuaGVhZGVyIHtcbiAgICBAZXh0ZW5kICVyb3c7XG5cbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0U1RTVFNTtcbiAgICBmb250LXdlaWdodDogYm9sZGVyO1xuXG4gICAgLmljb24tY2FuY2VsIHtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG4gIH1cblxuICAuZm9vdGVyIHtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI0U1RTVFNTtcblxuICAgIC5idG4tZ3JvdXAge1xuICAgICAgQGV4dGVuZCAlcm93O1xuXG4gICAgICAuYnRuIHtcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY29sb3I6ICRibHVlLWNvbG9yO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTBweDtcblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbjwvc3R5bGU+XG5cbjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAubW9kYWwge1xuICAgIGgzIHtcbiAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgIH1cbiAgICB0ZXh0YXJlYSB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNENkQ2RDY7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICBtaW4taGVpZ2h0OiAzMDBweDtcbiAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgIH1cbiAgICBwIHtcbiAgICAgIG1hcmdpbjogMDtcbiAgICB9XG4gIH1cbjwvc3R5bGU+XG5cbjxzY3JpcHQ+XG4gIGltcG9ydCBWdWUgZnJvbSAndnVlJ1xuICBpbXBvcnQge2dsb2JhbEtleWRvd259IGZyb20gJy4uLy4uL3V0aWxzJ1xuICBpbXBvcnQgSGVscCBmcm9tICcuL2hlbHAnXG4gIGltcG9ydCBMcmNGb3JtYXRVcGxvYWQgZnJvbSAnLi9scmMtZm9ybWF0LXVwbG9hZCdcbiAgaW1wb3J0IEx5cmljVXBsb2FkIGZyb20gJy4vbHlyaWMtdXBsb2FkJ1xuICBpbXBvcnQgTHJjU2F2ZSBmcm9tICcuL2xyYy1zYXZlJ1xuXG4gIHZhciBDT01QT05FTlRTID0ge1xuICAgICdoZWxwJzogSGVscCxcbiAgICAnbHJjLWZvcm1hdC11cGxvYWQnOiBMcmNGb3JtYXRVcGxvYWQsXG4gICAgJ2x5cmljLXVwbG9hZCc6IEx5cmljVXBsb2FkLFxuICAgICdscmMtc2F2ZSc6IExyY1NhdmUsXG4gIH1cblxuICB3aW5kb3cuTUMgPSBbXVxuXG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBkYXRhICgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiAnTW9kYWwnLFxuICAgICAgICBzaXplOiAnbWQnLFxuICAgICAgICBjb25maXJtOiBmYWxzZSxcbiAgICAgICAgbW9kYWxOYW1lOiAnJyxcbiAgICAgICAgbW9kYWxDb21wb25lbnQ6IG51bGwsXG4gICAgICAgIGlzU2hvdzogZmFsc2UsXG4gICAgICAgIGNvdmVyU2hvdzogZmFsc2UsXG4gICAgICB9XG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICBzaG93IChtb2RhbE5hbWUpIHtcbiAgICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlXG4gICAgICAgIHRoaXMuY292ZXJTaG93ID0gdHJ1ZVxuICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5tb2RhbE5hbWUgPSBtb2RhbE5hbWVcbiAgICAgICAgICB0aGlzLm1vZGFsQ29tcG9uZW50ID0gbmV3IFZ1ZSh7XG4gICAgICAgICAgICAuLi5DT01QT05FTlRTW3RoaXMubW9kYWxOYW1lXVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5tb2RhbENvbXBvbmVudC4kbW91bnQodGhpcy4kcmVmcy5tb2RhbFdyYXBwZXIpXG5cbiAgICAgICAgICBpZiAodGhpcy5tb2RhbENvbXBvbmVudC50aXRsZSkge1xuICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMubW9kYWxDb21wb25lbnQudGl0bGVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMubW9kYWxDb21wb25lbnQuc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMubW9kYWxDb21wb25lbnQuc2l6ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5tb2RhbENvbXBvbmVudC5jb25maXJtKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpcm0gPSB0aGlzLm1vZGFsQ29tcG9uZW50LmNvbmZpcm1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgIH0sXG4gICAgICBvayAoKSB7XG4gICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2VcbiAgICAgICAgdGhpcy5tb2RhbENvbXBvbmVudC4kZW1pdCgnb2snKVxuICAgICAgICB0aGlzLm1vZGFsQ29tcG9uZW50LiRkZXN0cm95KClcbiAgICAgIH0sXG4gICAgICBjYW5jZWwgKCkge1xuICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlXG4gICAgICAgIHRoaXMubW9kYWxDb21wb25lbnQuJGVtaXQoJ2NhbmNlbCcpXG4gICAgICAgIHRoaXMubW9kYWxDb21wb25lbnQuJGRlc3Ryb3koKVxuICAgICAgfSxcbiAgICB9LFxuICAgIG1vdW50ZWQgKCkge1xuICAgICAgZ2xvYmFsS2V5ZG93bi5vbignZXNjYXBlJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc1Nob3cpIHtcbiAgICAgICAgICB0aGlzLmNhbmNlbCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICBIZWxwLFxuICAgICAgTHJjRm9ybWF0VXBsb2FkLFxuICAgICAgTHlyaWNVcGxvYWQsXG4gICAgICBMcmNTYXZlLFxuICAgIH0sXG4gIH1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LnZ1ZT80NjJkNzZmMCIsIlxuLyogc3R5bGVzICovXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXI/bWluaW1pemUhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyP2lkPWRhdGEtdi1hNjU4MzZkYSZzY29wZWQ9dHJ1ZSFzYXNzLWxvYWRlciEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2hlbHAudnVlXCIpXG5cbnZhciBDb21wb25lbnQgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9jb21wb25lbnQtbm9ybWFsaXplclwiKShcbiAgLyogc2NyaXB0ICovXG4gIHJlcXVpcmUoXCIhIWJhYmVsLWxvYWRlciEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2hlbHAudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LWE2NTgzNmRhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9oZWxwLnZ1ZVwiKSxcbiAgLyogc2NvcGVJZCAqL1xuICBcImRhdGEtdi1hNjU4MzZkYVwiLFxuICAvKiBjc3NNb2R1bGVzICovXG4gIG51bGxcbilcblxubW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvbW9kYWxzL2hlbHAudnVlXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/bWluaW1pemUhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi1hNjU4MzZkYSZzY29wZWQ9dHJ1ZSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9oZWxwLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpKFwiNWZjZGY0ZTJcIiwgY29udGVudCwgdHJ1ZSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtc3R5bGUtbG9hZGVyIS4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi1hNjU4MzZkYSZzY29wZWQ9dHJ1ZSEuLi9+L3Nhc3MtbG9hZGVyIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2FwcC9tb2RhbHMvaGVscC52dWVcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oZWxwW2RhdGEtdi1hNjU4MzZkYV17Y29sb3I6IzMzM30uaGVscCBhW2RhdGEtdi1hNjU4MzZkYV0sLmhlbHAgaDNbZGF0YS12LWE2NTgzNmRhXSwuaGVscCBoNFtkYXRhLXYtYTY1ODM2ZGFde2NvbG9yOiMyYTcyYmJ9LmhlbHAgaDNbZGF0YS12LWE2NTgzNmRhXXttYXJnaW46NXB4IDB9LmhlbHAgaDRbZGF0YS12LWE2NTgzNmRhXXttYXJnaW46MH0uaGVscCBhW2RhdGEtdi1hNjU4MzZkYV17Zm9udC13ZWlnaHQ6Ym9sZGVyfS5oZWxwIHVsW2RhdGEtdi1hNjU4MzZkYV17bGlzdC1zdHlsZS10eXBlOm5vbmU7cGFkZGluZzowIDAgMCAyMHB4fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi1hNjU4MzZkYSZzY29wZWQ9dHJ1ZSEuLi9+L3Nhc3MtbG9hZGVyIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2FwcC9tb2RhbHMvaGVscC52dWVcbi8vIG1vZHVsZSBpZCA9IDg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiBjbGFzcz1cImhlbHBcIj5cbiAgICA8aDM+e3sgJHQoJ21vZGFsLmhlbHAuc2hvcnRjdXRfa2V5JykgfX08L2gzPlxuICAgIDxoND57eyAkdCgnbW9kYWwuaGVscC5wbGF5X2NvbnRyb2wudGl0bGUnKSB9fTwvaDQ+XG4gICAgPHVsPlxuICAgICAgPGxpPjxzdHJvbmc+e3sgJHQoJ21vZGFsLmhlbHAucGxheV9jb250cm9sLmxlZnRfa2V5JykgfX06PC9zdHJvbmc+IHt7ICR0KCdtb2RhbC5oZWxwLnBsYXlfY29udHJvbC5iYWNrd2FyZCcpIH19PC9saT5cbiAgICAgIDxsaT48c3Ryb25nPnt7ICR0KCdtb2RhbC5oZWxwLnBsYXlfY29udHJvbC5yaWdodF9rZXknKSB9fTo8L3N0cm9uZz4ge3sgJHQoJ21vZGFsLmhlbHAucGxheV9jb250cm9sLmZvcndhcmQnKSB9fTwvbGk+XG4gICAgPC91bD5cbiAgICA8aDQ+e3sgJHQoJ21vZGFsLmhlbHAubWFrZV9scmMudGl0bGUnKSB9fTwvaDQ+XG4gICAgPHVsPlxuICAgICAgPGxpPjxzdHJvbmc+e3sgJHQoJ21vZGFsLmhlbHAubWFrZV9scmMudXBfa2V5JykgfX06PC9zdHJvbmc+IHt7ICR0KCdtb2RhbC5oZWxwLm1ha2VfbHJjLnByZXZfbHlyaWMnKSB9fTwvbGk+XG4gICAgICA8bGk+PHN0cm9uZz57eyAkdCgnbW9kYWwuaGVscC5tYWtlX2xyYy5kb3duX2tleScpIH19Ojwvc3Ryb25nPiB7eyAkdCgnbW9kYWwuaGVscC5tYWtlX2xyYy5uZXh0X2x5cmljJykgfX08L2xpPlxuICAgIDwvdWw+XG4gICAgPGRpdiBjbGFzcz1cImxpbmtcIj5cbiAgICAgIDxhIDpocmVmPVwiUEtHLmhvbWVwYWdlXCIgdGFyZ2V0PVwiX2JsYW5rXCI+e3sgJHQoJ21vZGFsLmhlbHAuc291cmNlX2NvZGUnKSB9fTogZ2l0aHViPC9hPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzdHlsZSBsYW5nPVwic2Fzc1wiIHNjb3BlZD5cbiAgQGltcG9ydCAnLi4vc2Fzcy9iYXNlJztcblxuICAuaGVscCB7XG4gICAgY29sb3I6ICMzMzM7XG4gICAgaDMsIGg0LCBhIHtcbiAgICAgIGNvbG9yOiAkYmx1ZS1jb2xvcjtcbiAgICB9XG4gICAgaDMge1xuICAgICAgbWFyZ2luOiA1cHggMDtcbiAgICB9XG4gICAgaDQge1xuICAgICAgbWFyZ2luOiAwO1xuICAgIH1cbiAgICBhIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7XG4gICAgfVxuICAgIHVsIHtcbiAgICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbiAgICAgIHBhZGRpbmc6IDAgMCAwIDIwcHg7XG4gICAgfVxuICB9XG48L3N0eWxlPlxuXG48c2NyaXB0PlxuICBpbXBvcnQgUEtHIGZyb20gJy4uLy4uLy4uL3BhY2thZ2UuanNvbidcblxuICBleHBvcnQgZGVmYXVsdCB7XG4gICAgZGF0YSAoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBQS0c6IFBLRyxcbiAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ21vZGFsLmhlbHAudGl0bGUnKSxcbiAgICAgIH1cbiAgICB9XG4gIH1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGhlbHAudnVlPzM2ZTcwN2IzIiwibW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcbiAgcmV0dXJuIF9jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiaGVscFwiXG4gIH0sIFtfYygnaDMnLCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAuc2hvcnRjdXRfa2V5JykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnaDQnLCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAucGxheV9jb250cm9sLnRpdGxlJykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygndWwnLCBbX2MoJ2xpJywgW19jKCdzdHJvbmcnLCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAucGxheV9jb250cm9sLmxlZnRfa2V5JykpICsgXCI6XCIpXSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAucGxheV9jb250cm9sLmJhY2t3YXJkJykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbGknLCBbX2MoJ3N0cm9uZycsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5wbGF5X2NvbnRyb2wucmlnaHRfa2V5JykpICsgXCI6XCIpXSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAucGxheV9jb250cm9sLmZvcndhcmQnKSkpXSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2g0JywgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5oZWxwLm1ha2VfbHJjLnRpdGxlJykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygndWwnLCBbX2MoJ2xpJywgW19jKCdzdHJvbmcnLCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAubWFrZV9scmMudXBfa2V5JykpICsgXCI6XCIpXSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAubWFrZV9scmMucHJldl9seXJpYycpKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2xpJywgW19jKCdzdHJvbmcnLCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAubWFrZV9scmMuZG93bl9rZXknKSkgKyBcIjpcIildKSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbW9kYWwuaGVscC5tYWtlX2xyYy5uZXh0X2x5cmljJykpKV0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwibGlua1wiXG4gIH0sIFtfYygnYScsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJocmVmXCI6IF92bS5QS0cuaG9tZXBhZ2UsXG4gICAgICBcInRhcmdldFwiOiBcIl9ibGFua1wiXG4gICAgfVxuICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmhlbHAuc291cmNlX2NvZGUnKSkgKyBcIjogZ2l0aHViXCIpXSldKV0pXG59LHN0YXRpY1JlbmRlckZuczogW119XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlci5qcz9pZD1kYXRhLXYtYTY1ODM2ZGEhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9hcHAvbW9kYWxzL2hlbHAudnVlXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgQ29tcG9uZW50ID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXJcIikoXG4gIC8qIHNjcmlwdCAqL1xuICByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9scmMtZm9ybWF0LXVwbG9hZC52dWVcIiksXG4gIC8qIHRlbXBsYXRlICovXG4gIHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlcj9pZD1kYXRhLXYtMGM4YTk2ZjYhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2xyYy1mb3JtYXQtdXBsb2FkLnZ1ZVwiKSxcbiAgLyogc2NvcGVJZCAqL1xuICBudWxsLFxuICAvKiBjc3NNb2R1bGVzICovXG4gIG51bGxcbilcblxubW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvbW9kYWxzL2xyYy1mb3JtYXQtdXBsb2FkLnZ1ZVxuLy8gbW9kdWxlIGlkID0gODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiPHRlbXBsYXRlPlxuICA8ZGl2PlxuICAgIDxwPnt7ICR0KCdtb2RhbC5scmNfZm9ybWF0X3VwbG9hZC5kZXNjcmlwdGlvbicpIH19PC9wPlxuICAgIDx0ZXh0YXJlYSB2LW1vZGVsPVwibHlyaWNcIj48L3RleHRhcmVhPlxuICAgIDx1cGxvYWQgY2xhc3M9XCJidG5cIiBAdXBsb2FkPVwidXBsb2FkXCI+e3sgJHQoJ21vZGFsLmxyY19mb3JtYXRfdXBsb2FkLnVwbG9hZCcpIH19PC91cGxvYWQ+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbiAgaW1wb3J0IFVwbG9hZCBmcm9tICcuLi91cGxvYWQnXG5cbiAgZXhwb3J0IGRlZmF1bHQge1xuICAgIGRhdGEgKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ21vZGFsLmxyY19mb3JtYXRfdXBsb2FkLnRpdGxlJyksXG4gICAgICAgIGx5cmljOiAnJyxcbiAgICAgICAgY29uZmlybTogdHJ1ZSxcbiAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZWQgKCkge1xuICAgICAgdGhpcy5seXJpYyA9IHRoaXMuJEFwcC5scmNGb3JtYXRcbiAgICAgIHRoaXMuJG9uKCdvaycsICgpID0+IHtcbiAgICAgICAgdGhpcy4kQXBwLmxyY0Zvcm1hdCA9IHRoaXMubHlyaWNcbiAgICAgIH0pXG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICB1cGxvYWQgKGx5cmljKSB7XG4gICAgICAgIHRoaXMubHlyaWMgPSBseXJpY1xuICAgICAgfSxcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgIFVwbG9hZCxcbiAgICB9LFxuICB9XG48L3NjcmlwdD5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBscmMtZm9ybWF0LXVwbG9hZC52dWU/N2RiM2YxNTIiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIFtfYygncCcsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHJjX2Zvcm1hdF91cGxvYWQuZGVzY3JpcHRpb24nKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCd0ZXh0YXJlYScsIHtcbiAgICBkaXJlY3RpdmVzOiBbe1xuICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgcmF3TmFtZTogXCJ2LW1vZGVsXCIsXG4gICAgICB2YWx1ZTogKF92bS5seXJpYyksXG4gICAgICBleHByZXNzaW9uOiBcImx5cmljXCJcbiAgICB9XSxcbiAgICBkb21Qcm9wczoge1xuICAgICAgXCJ2YWx1ZVwiOiAoX3ZtLmx5cmljKVxuICAgIH0sXG4gICAgb246IHtcbiAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgeyByZXR1cm47IH1cbiAgICAgICAgX3ZtLmx5cmljID0gJGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfSksIF92bS5fdihcIiBcIiksIF9jKCd1cGxvYWQnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiYnRuXCIsXG4gICAgb246IHtcbiAgICAgIFwidXBsb2FkXCI6IF92bS51cGxvYWRcbiAgICB9XG4gIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHJjX2Zvcm1hdF91cGxvYWQudXBsb2FkJykpKV0pXSwgMSlcbn0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyLmpzP2lkPWRhdGEtdi0wYzhhOTZmNiEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FwcC9tb2RhbHMvbHJjLWZvcm1hdC11cGxvYWQudnVlXG4vLyBtb2R1bGUgaWQgPSA5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgQ29tcG9uZW50ID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXJcIikoXG4gIC8qIHNjcmlwdCAqL1xuICByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9seXJpYy11cGxvYWQudnVlXCIpLFxuICAvKiB0ZW1wbGF0ZSAqL1xuICByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LWZmMTJlMGZlIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9seXJpYy11cGxvYWQudnVlXCIpLFxuICAvKiBzY29wZUlkICovXG4gIG51bGwsXG4gIC8qIGNzc01vZHVsZXMgKi9cbiAgbnVsbFxuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9tb2RhbHMvbHlyaWMtdXBsb2FkLnZ1ZVxuLy8gbW9kdWxlIGlkID0gOTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiPHRlbXBsYXRlPlxuICA8ZGl2PlxuICAgIDxwPnt7ICR0KCdtb2RhbC5seXJpY191cGxvYWQuZGVzY3JpcHRpb24nKSB9fTwvcD5cbiAgICA8dGV4dGFyZWEgdi1tb2RlbD1cImx5cmljXCI+PC90ZXh0YXJlYT5cbiAgICA8dXBsb2FkIGNsYXNzPVwiYnRuXCIgQHVwbG9hZD1cInVwbG9hZFwiPnt7ICR0KCdtb2RhbC5seXJpY191cGxvYWQudXBsb2FkJykgfX08L3VwbG9hZD5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuICBpbXBvcnQgVXBsb2FkIGZyb20gJy4uL3VwbG9hZCdcbiAgaW1wb3J0IGNhY2hlIGZyb20gJy4uLy4uL2NhY2hlJ1xuXG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBkYXRhICgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiB0aGlzLiR0KCdtb2RhbC5seXJpY191cGxvYWQudGl0bGUnKSxcbiAgICAgICAgbHlyaWM6IGNhY2hlLmx5cmljLFxuICAgICAgICBjb25maXJtOiB0cnVlLFxuICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZCAoKSB7XG4gICAgICB0aGlzLiRvbignb2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuJEFwcC5seXJpY0FycmF5ID0gdGhpcy5seXJpYy5zcGxpdCgvXFxyXFxufFtcXG5cXHJdL2cpXG4gICAgICB9KVxuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgdXBsb2FkIChseXJpYykge1xuICAgICAgICB0aGlzLmx5cmljID0gbHlyaWNcbiAgICAgIH0sXG4gICAgfSxcbiAgICB3YXRjaDoge1xuICAgICAgbHlyaWMgKHZhbCkge1xuICAgICAgICBjYWNoZS5seXJpYyA9IHZhbFxuICAgICAgfSxcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgIFVwbG9hZFxuICAgIH0sXG4gIH1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGx5cmljLXVwbG9hZC52dWU/MGE1MzI4ZGMiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIFtfYygncCcsIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHlyaWNfdXBsb2FkLmRlc2NyaXB0aW9uJykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygndGV4dGFyZWEnLCB7XG4gICAgZGlyZWN0aXZlczogW3tcbiAgICAgIG5hbWU6IFwibW9kZWxcIixcbiAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgdmFsdWU6IChfdm0ubHlyaWMpLFxuICAgICAgZXhwcmVzc2lvbjogXCJseXJpY1wiXG4gICAgfV0sXG4gICAgZG9tUHJvcHM6IHtcbiAgICAgIFwidmFsdWVcIjogKF92bS5seXJpYylcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImlucHV0XCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuOyB9XG4gICAgICAgIF92bS5seXJpYyA9ICRldmVudC50YXJnZXQudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygndXBsb2FkJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImJ0blwiLFxuICAgIG9uOiB7XG4gICAgICBcInVwbG9hZFwiOiBfdm0udXBsb2FkXG4gICAgfVxuICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ21vZGFsLmx5cmljX3VwbG9hZC51cGxvYWQnKSkpXSldLCAxKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL34vdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXIuanM/aWQ9ZGF0YS12LWZmMTJlMGZlIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vYXBwL21vZGFscy9seXJpYy11cGxvYWQudnVlXG4vLyBtb2R1bGUgaWQgPSA5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgQ29tcG9uZW50ID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvY29tcG9uZW50LW5vcm1hbGl6ZXJcIikoXG4gIC8qIHNjcmlwdCAqL1xuICByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9scmMtc2F2ZS52dWVcIiksXG4gIC8qIHRlbXBsYXRlICovXG4gIHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlcj9pZD1kYXRhLXYtZDY0ZTY4MDIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2xyYy1zYXZlLnZ1ZVwiKSxcbiAgLyogc2NvcGVJZCAqL1xuICBudWxsLFxuICAvKiBjc3NNb2R1bGVzICovXG4gIG51bGxcbilcblxubW9kdWxlLmV4cG9ydHMgPSBDb21wb25lbnQuZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvbW9kYWxzL2xyYy1zYXZlLnZ1ZVxuLy8gbW9kdWxlIGlkID0gOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiPHRlbXBsYXRlPlxuICA8ZGl2PlxuICAgIDxoMz57eyAkdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLmluZm9fdGl0bGUnKSB9fTwvaDM+XG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIiB2LWZvcj1cImZpZWxkIGluIGluZm9GaWVsZHNcIiB2LWlmPVwiZmllbGQubGFiZWxcIj5cbiAgICAgIDxsYWJlbCA6Zm9yPVwiJ2luZm8tJyArIGZpZWxkLmtleVwiIHYtdGV4dD1cImZpZWxkLmxhYmVsXCI+PC9sYWJlbD5cbiAgICAgIDxpbnB1dCA6aWQ9XCInaW5mby0nICsgZmllbGQua2V5XCIgdHlwZT1cInRleHRcIiB2LW1vZGVsPVwiaW5mb1tmaWVsZC5rZXldXCIgLz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgPGxhYmVsIGZvcj1cImluZm8tYnlcIj57eyAkdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLmZpZWxkcy5scmNfY3JlYXRvcicpIH19PC9sYWJlbD5cbiAgICAgIDxpbnB1dCBpZD1cImluZm8tYnlcIiB0eXBlPVwidGV4dFwiIHYtbW9kZWw9XCJ1c2VyTmFtZVwiIC8+XG4gICAgPC9kaXY+XG5cbiAgICA8aDM+e3sgJHQoJ21vZGFsLmxyY19mb3JtYXRfc2F2ZS5zYXZlX3RpdGxlJykgfX08L2gzPlxuICAgIDx0ZXh0YXJlYT57eyBseXJpYyB9fTwvdGV4dGFyZWE+XG4gICAgPGxhYmVsPlxuICAgICAge3sgJHQoJ21vZGFsLmxyY19mb3JtYXRfc2F2ZS5jb21iaW5lJykgfX1cbiAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiB2LW1vZGVsPVwic2F2ZU9wdGlvbnMuY29tYmluZVwiIC8+XG4gICAgPC9sYWJlbD5cbiAgICA8ZGl2IGNsYXNzPVwiYnRuXCIgQGNsaWNrPVwic2F2ZVwiPlxuICAgICAgPGkgY2xhc3M9XCJpY29uLWRvd25sb2FkXCI+PC9pPiB7eyAkdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLmRvd25sb2FkJykgfX1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuICBpbXBvcnQge3NhdmVMcmMsIHRpbWVzdGFtcDJ0aW1lc3RyfSBmcm9tICcuLi8uLi91dGlscydcbiAgaW1wb3J0IGNhY2hlIGZyb20gJy4uLy4uL2NhY2hlJ1xuICBpbXBvcnQgUEtHIGZyb20gJy4uLy4uLy4uL3BhY2thZ2UuanNvbidcblxuICBleHBvcnQgZGVmYXVsdCB7XG4gICAgZGF0YSAoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogdGhpcy4kdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLnRpdGxlJyksXG4gICAgICAgIGx5cmljOiAnJyxcbiAgICAgICAgdXNlck5hbWU6IGNhY2hlLnVzZXJOYW1lLFxuICAgICAgICBzYXZlT3B0aW9uczoge1xuICAgICAgICAgIGNvbWJpbmU6IHRydWUsXG4gICAgICAgICAgbGluZUZvcm1hdDogJ1xcclxcbicsXG4gICAgICAgICAgc29ydDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5mb0ZpZWxkczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ3RpJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuZmllbGRzLnNvbmdfdGl0bGUnKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ2FyJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuZmllbGRzLmFydGlzdCcpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnYWwnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ21vZGFsLmxyY19mb3JtYXRfc2F2ZS5maWVsZHMuYWxidW0nKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ2F1JyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuZmllbGRzLnNvbmd0ZXh0X2NyZWF0b3InKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBpbmZvOiB7fSxcbiAgICAgIH1cbiAgICB9LFxuICAgIG1vdW50ZWQgKCkge1xuICAgICAgdGhpcy5ydW5uZXIgPSB0aGlzLiRBcHAucnVubmVyXG4gICAgICBsZXQgcGxheWVyID0gdGhpcy4kQXBwLiRyZWZzLnBsYXllclxuICAgICAgbGV0IGluZm8gPSB7fVxuXG4gICAgICB0aGlzLmluZm9GaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgaWYgKGZpZWxkLmtleSBpbiB0aGlzLnJ1bm5lci5scmMuaW5mbykge1xuICAgICAgICAgIGluZm9bZmllbGQua2V5XSA9IHRoaXMucnVubmVyLmxyYy5pbmZvW2ZpZWxkLmtleV1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbmZvW2ZpZWxkLmtleV0gPSAnJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgaWYgKHBsYXllci5kdXJhdGlvbikge1xuICAgICAgICBpbmZvLmxlbmd0aCA9IHRpbWVzdGFtcDJ0aW1lc3RyKHBsYXllci5kdXJhdGlvbilcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnVzZXJOYW1lKSB7XG4gICAgICAgIGluZm8uYnkgPSB0aGlzLnVzZXJOYW1lXG4gICAgICB9XG4gICAgICBpbmZvLnJlID0gYCR7UEtHLm5hbWV9ICgke1BLRy5vbmxpbmVQYWdlfSlgXG4gICAgICBpbmZvLnZlID0gUEtHLnZlcnNpb25cblxuICAgICAgdGhpcy5pbmZvID0gaW5mb1xuXG4gICAgICB0aGlzLmx5cmljVXBkYXRlKClcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgIHNhdmUgKCkge1xuICAgICAgICBzYXZlTHJjKHRoaXMucnVubmVyLmxyYy50b1N0cmluZyh0aGlzLnNhdmVPcHRpb25zKSwgdGhpcy5ydW5uZXIubHJjLmluZm8udGkgfHwgJ2x5cmljJylcbiAgICAgIH0sXG4gICAgICBpbmZvVXBkYXRlICgpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuaW5mbykge1xuICAgICAgICAgIGlmICh0aGlzLmluZm9ba2V5XS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucnVubmVyLmxyYy5pbmZvW2tleV0gPSB0aGlzLmluZm9ba2V5XVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5ydW5uZXIubHJjLmluZm9ba2V5XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmx5cmljVXBkYXRlKClcbiAgICAgIH0sXG4gICAgICBseXJpY1VwZGF0ZSAoKSB7XG4gICAgICAgIHRoaXMubHlyaWMgPSB0aGlzLnJ1bm5lci5scmMudG9TdHJpbmcodGhpcy5zYXZlT3B0aW9ucylcbiAgICAgIH0sXG4gICAgfSxcbiAgICB3YXRjaDoge1xuICAgICAgdXNlck5hbWUgKG5hbWUpIHtcbiAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ2J5JywgbmFtZSlcbiAgICAgICAgY2FjaGUudXNlck5hbWUgPSBuYW1lXG4gICAgICB9LFxuICAgICAgbHlyaWMgKCkge1xuICAgICAgICB0aGlzLiRBcHAubHJjRm9ybWF0ID0gdGhpcy5seXJpY1xuICAgICAgfSxcbiAgICAgIHNhdmVPcHRpb25zOiB7XG4gICAgICAgIGRlZXA6IHRydWUsXG4gICAgICAgIGhhbmRsZXIgKCkge1xuICAgICAgICAgIHRoaXMubHlyaWNVcGRhdGUoKVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGluZm86IHtcbiAgICAgICAgZGVlcDogdHJ1ZSxcbiAgICAgICAgaGFuZGxlciAoKSB7XG4gICAgICAgICAgdGhpcy5pbmZvVXBkYXRlKClcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfVxuPC9zY3JpcHQ+XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbHJjLXNhdmUudnVlPzBiY2MxZDc0IiwibW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcbiAgcmV0dXJuIF9jKCdkaXYnLCBbX2MoJ2gzJywgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuaW5mb190aXRsZScpKSldKSwgX3ZtLl92KFwiIFwiKSwgX3ZtLl9sKChfdm0uaW5mb0ZpZWxkcyksIGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgcmV0dXJuIChmaWVsZC5sYWJlbCkgPyBfYygnZGl2Jywge1xuICAgICAgc3RhdGljQ2xhc3M6IFwiZm9ybS1ncm91cFwiXG4gICAgfSwgW19jKCdsYWJlbCcsIHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIFwiZm9yXCI6ICdpbmZvLScgKyBmaWVsZC5rZXlcbiAgICAgIH0sXG4gICAgICBkb21Qcm9wczoge1xuICAgICAgICBcInRleHRDb250ZW50XCI6IF92bS5fcyhmaWVsZC5sYWJlbClcbiAgICAgIH1cbiAgICB9KSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2lucHV0Jywge1xuICAgICAgZGlyZWN0aXZlczogW3tcbiAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcbiAgICAgICAgdmFsdWU6IChfdm0uaW5mb1tmaWVsZC5rZXldKSxcbiAgICAgICAgZXhwcmVzc2lvbjogXCJpbmZvW2ZpZWxkLmtleV1cIlxuICAgICAgfV0sXG4gICAgICBhdHRyczoge1xuICAgICAgICBcImlkXCI6ICdpbmZvLScgKyBmaWVsZC5rZXksXG4gICAgICAgIFwidHlwZVwiOiBcInRleHRcIlxuICAgICAgfSxcbiAgICAgIGRvbVByb3BzOiB7XG4gICAgICAgIFwidmFsdWVcIjogKF92bS5pbmZvW2ZpZWxkLmtleV0pXG4gICAgICB9LFxuICAgICAgb246IHtcbiAgICAgICAgXCJpbnB1dFwiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgX3ZtLiRzZXQoX3ZtLmluZm8sIGZpZWxkLmtleSwgJGV2ZW50LnRhcmdldC52YWx1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXSkgOiBfdm0uX2UoKVxuICB9KSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJmb3JtLWdyb3VwXCJcbiAgfSwgW19jKCdsYWJlbCcsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJmb3JcIjogXCJpbmZvLWJ5XCJcbiAgICB9XG4gIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLmZpZWxkcy5scmNfY3JlYXRvcicpKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2lucHV0Jywge1xuICAgIGRpcmVjdGl2ZXM6IFt7XG4gICAgICBuYW1lOiBcIm1vZGVsXCIsXG4gICAgICByYXdOYW1lOiBcInYtbW9kZWxcIixcbiAgICAgIHZhbHVlOiAoX3ZtLnVzZXJOYW1lKSxcbiAgICAgIGV4cHJlc3Npb246IFwidXNlck5hbWVcIlxuICAgIH1dLFxuICAgIGF0dHJzOiB7XG4gICAgICBcImlkXCI6IFwiaW5mby1ieVwiLFxuICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiXG4gICAgfSxcbiAgICBkb21Qcm9wczoge1xuICAgICAgXCJ2YWx1ZVwiOiAoX3ZtLnVzZXJOYW1lKVxuICAgIH0sXG4gICAgb246IHtcbiAgICAgIFwiaW5wdXRcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgeyByZXR1cm47IH1cbiAgICAgICAgX3ZtLnVzZXJOYW1lID0gJGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2gzJywgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5scmNfZm9ybWF0X3NhdmUuc2F2ZV90aXRsZScpKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3RleHRhcmVhJywgW192bS5fdihfdm0uX3MoX3ZtLmx5cmljKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2xhYmVsJywgW192bS5fdihcIlxcbiAgICBcIiArIF92bS5fcyhfdm0uJHQoJ21vZGFsLmxyY19mb3JtYXRfc2F2ZS5jb21iaW5lJykpICsgXCJcXG4gICAgXCIpLCBfYygnaW5wdXQnLCB7XG4gICAgZGlyZWN0aXZlczogW3tcbiAgICAgIG5hbWU6IFwibW9kZWxcIixcbiAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgdmFsdWU6IChfdm0uc2F2ZU9wdGlvbnMuY29tYmluZSksXG4gICAgICBleHByZXNzaW9uOiBcInNhdmVPcHRpb25zLmNvbWJpbmVcIlxuICAgIH1dLFxuICAgIGF0dHJzOiB7XG4gICAgICBcInR5cGVcIjogXCJjaGVja2JveFwiXG4gICAgfSxcbiAgICBkb21Qcm9wczoge1xuICAgICAgXCJjaGVja2VkXCI6IEFycmF5LmlzQXJyYXkoX3ZtLnNhdmVPcHRpb25zLmNvbWJpbmUpID8gX3ZtLl9pKF92bS5zYXZlT3B0aW9ucy5jb21iaW5lLCBudWxsKSA+IC0xIDogKF92bS5zYXZlT3B0aW9ucy5jb21iaW5lKVxuICAgIH0sXG4gICAgb246IHtcbiAgICAgIFwiY2hhbmdlXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICB2YXIgJCRhID0gX3ZtLnNhdmVPcHRpb25zLmNvbWJpbmUsXG4gICAgICAgICAgJCRlbCA9ICRldmVudC50YXJnZXQsXG4gICAgICAgICAgJCRjID0gJCRlbC5jaGVja2VkID8gKHRydWUpIDogKGZhbHNlKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoJCRhKSkge1xuICAgICAgICAgIHZhciAkJHYgPSBudWxsLFxuICAgICAgICAgICAgJCRpID0gX3ZtLl9pKCQkYSwgJCR2KTtcbiAgICAgICAgICBpZiAoJCRlbC5jaGVja2VkKSB7XG4gICAgICAgICAgICAkJGkgPCAwICYmIChfdm0uJHNldChfdm0uc2F2ZU9wdGlvbnMsIFwiY29tYmluZVwiLCAkJGEuY29uY2F0KFskJHZdKSkpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQkaSA+IC0xICYmIChfdm0uJHNldChfdm0uc2F2ZU9wdGlvbnMsIFwiY29tYmluZVwiLCAkJGEuc2xpY2UoMCwgJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSArIDEpKSkpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF92bS4kc2V0KF92bS5zYXZlT3B0aW9ucywgXCJjb21iaW5lXCIsICQkYylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJidG5cIixcbiAgICBvbjoge1xuICAgICAgXCJjbGlja1wiOiBfdm0uc2F2ZVxuICAgIH1cbiAgfSwgW19jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tZG93bmxvYWRcIlxuICB9KSwgX3ZtLl92KFwiIFwiICsgX3ZtLl9zKF92bS4kdCgnbW9kYWwubHJjX2Zvcm1hdF9zYXZlLmRvd25sb2FkJykpICsgXCJcXG4gIFwiKV0pXSwgMilcbn0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyLmpzP2lkPWRhdGEtdi1kNjRlNjgwMiEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FwcC9tb2RhbHMvbHJjLXNhdmUudnVlXG4vLyBtb2R1bGUgaWQgPSA5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIHtcbiAgICBjbGFzczoge1xuICAgICAgY292ZXI6IF92bS5jb3ZlclNob3dcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IF92bS5jYW5jZWxcbiAgICB9XG4gIH0sIFtfYygndHJhbnNpdGlvbicsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJuYW1lXCI6IFwibW9kYWxcIlxuICAgIH0sXG4gICAgb246IHtcbiAgICAgIFwiYWZ0ZXItbGVhdmVcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIF92bS5jb3ZlclNob3cgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgfSwgWyhfdm0uaXNTaG93KSA/IF9jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwibW9kYWxcIixcbiAgICBjbGFzczogW192bS5zaXplXSxcbiAgICBvbjoge1xuICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW19jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiaGVhZGVyXCJcbiAgfSwgW192bS5fdihcIlxcbiAgICAgICAgXCIgKyBfdm0uX3MoX3ZtLnRpdGxlKSArIFwiXFxuICAgICAgICBcIiksIF9jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tY2FuY2VsXCIsXG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogX3ZtLmNhbmNlbFxuICAgIH1cbiAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJib2R5XCJcbiAgfSwgW19jKCdkaXYnLCB7XG4gICAgcmVmOiBcIm1vZGFsV3JhcHBlclwiXG4gIH0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiZm9vdGVyXCJcbiAgfSwgWyhfdm0uY29uZmlybSkgPyBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImJ0bi1ncm91cFwiXG4gIH0sIFtfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImJ0blwiLFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IF92bS5va1xuICAgIH1cbiAgfSwgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5idXR0b24ub2snKSkpXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiYnRuXCIsXG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogX3ZtLmNhbmNlbFxuICAgIH1cbiAgfSwgW192bS5fdihfdm0uX3MoX3ZtLiR0KCdtb2RhbC5idXR0b24uY2FuY2VsJykpKV0pXSkgOiBfdm0uX2UoKV0pXSkgOiBfdm0uX2UoKV0pXSwgMSlcbn0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyLmpzP2lkPWRhdGEtdi03MmQyOWU3MCEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FwcC9tb2RhbHMvaW5kZXgudnVlXG4vLyBtb2R1bGUgaWQgPSA5OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbi8qIHN0eWxlcyAqL1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyP21pbmltaXplIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlcj9pZD1kYXRhLXYtYTM3MzM2NjAmc2NvcGVkPXRydWUhc2Fzcy1sb2FkZXIhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9uYXYtbWVudS52dWVcIilcbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXI/aWQ9ZGF0YS12LWEzNzMzNjYwIXNhc3MtbG9hZGVyIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXN0eWxlcyZpbmRleD0xIS4vbmF2LW1lbnUudnVlXCIpXG5cbnZhciBDb21wb25lbnQgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9jb21wb25lbnQtbm9ybWFsaXplclwiKShcbiAgLyogc2NyaXB0ICovXG4gIHJlcXVpcmUoXCIhIWJhYmVsLWxvYWRlciEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL25hdi1tZW51LnZ1ZVwiKSxcbiAgLyogdGVtcGxhdGUgKi9cbiAgcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyP2lkPWRhdGEtdi1hMzczMzY2MCEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vbmF2LW1lbnUudnVlXCIpLFxuICAvKiBzY29wZUlkICovXG4gIFwiZGF0YS12LWEzNzMzNjYwXCIsXG4gIC8qIGNzc01vZHVsZXMgKi9cbiAgbnVsbFxuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBvbmVudC5leHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9uYXYtbWVudS52dWVcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LWEzNzMzNjYwJnNjb3BlZD10cnVlIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL25hdi1tZW51LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpKFwiMWMzYjVkODVcIiwgY29udGVudCwgdHJ1ZSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtc3R5bGUtbG9hZGVyIS4uL34vY3NzLWxvYWRlcj9taW5pbWl6ZSEuLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzP2lkPWRhdGEtdi1hMzczMzY2MCZzY29wZWQ9dHJ1ZSEuLi9+L3Nhc3MtbG9hZGVyIS4uL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZXMmaW5kZXg9MCEuL2FwcC9uYXYtbWVudS52dWVcbi8vIG1vZHVsZSBpZCA9IDEwMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudGFyZ2V0W2RhdGEtdi1hMzczMzY2MF17cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jazttYXJnaW46LThweDtwYWRkaW5nOjhweH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtYTM3MzM2NjAmc2NvcGVkPXRydWUhLi4vfi9zYXNzLWxvYWRlciEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGVzJmluZGV4PTAhLi9hcHAvbmF2LW1lbnUudnVlXG4vLyBtb2R1bGUgaWQgPSAxMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP21pbmltaXplIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcz9pZD1kYXRhLXYtYTM3MzM2NjAhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vbmF2LW1lbnUudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikoXCIxYjY5MjQ3MVwiLCBjb250ZW50LCB0cnVlKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LWEzNzMzNjYwIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vYXBwL25hdi1tZW51LnZ1ZVxuLy8gbW9kdWxlIGlkID0gMTAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5uYXYtbWVudSAud3JhcHtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwMDtib3gtc2hhZG93OjRweCA0cHggM3B4IC0ycHggI2NjY30ubmF2LW1lbnUgLndyYXAgdWx7bGlzdC1zdHlsZS10eXBlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO2JhY2tncm91bmQtY29sb3I6IzIxNTk5MX0ubmF2LW1lbnUgLndyYXAgdWwgbGl7cGFkZGluZzowIDVweDtjdXJzb3I6cG9pbnRlcjtsaW5lLWhlaWdodDozMHB4O2ZvbnQtc2l6ZToxMnB4fS5uYXYtbWVudSAud3JhcCB1bCBsaTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMxNzNmNjh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanM/aWQ9ZGF0YS12LWEzNzMzNjYwIS4uL34vc2Fzcy1sb2FkZXIhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlcyZpbmRleD0xIS4vYXBwL25hdi1tZW51LnZ1ZVxuLy8gbW9kdWxlIGlkID0gMTAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiBjbGFzcz1cIm5hdi1tZW51XCIgcmVmPVwibWVudVwiPlxuICAgIDxzcGFuIGNsYXNzPVwidGFyZ2V0XCI+XG4gICAgICA8c2xvdCBuYW1lPVwidGFyZ2V0XCI+PC9zbG90PlxuICAgIDwvc3Bhbj5cbiAgICA8ZGl2IGNsYXNzPVwid3JhcFwiIDpzdHlsZT1cInN0eWxlXCIgdi1zaG93PVwic2hvd1wiPlxuICAgICAgPHNsb3QgbmFtZT1cImxpc3RcIj48L3Nsb3Q+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHN0eWxlIGxhbmc9XCJzYXNzXCIgc2NvcGVkPlxuLnRhcmdldCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbjogLThweDtcbiAgcGFkZGluZzogOHB4O1xufVxuPC9zdHlsZT5cblxuPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5AaW1wb3J0ICdzYXNzL2Jhc2UnO1xuXG4ubmF2LW1lbnUge1xuICAud3JhcCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDEwMDtcbiAgICBib3gtc2hhZG93OiA0cHggNHB4IDNweCAtMnB4ICNjY2M7XG4gICAgdWwge1xuICAgICAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xuICAgICAgcGFkZGluZzogMDtcbiAgICAgIG1hcmdpbjogMDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtlbigkYmx1ZS1jb2xvciwgMTAlKTtcbiAgICAgIGxpIHtcbiAgICAgICAgcGFkZGluZzogMCA1cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDMwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogZGFya2VuKCRibHVlLWNvbG9yLCAyMCUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG48L3N0eWxlPlxuXG48c2NyaXB0PlxuaW1wb3J0IHtEZWxheUhvdmVyfSBmcm9tICcuLi91dGlscydcblxuZXhwb3J0IGRlZmF1bHQge1xuICBkYXRhICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlyOiBmYWxzZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgIH0sXG4gICAgICBzaG93OiBmYWxzZSxcbiAgICB9XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgZW50ZXJEZWxheToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMC4xLFxuICAgIH0sXG4gICAgbGVhdmVEZWxheToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMC41LFxuICAgIH0sXG4gIH0sXG4gIG1vdW50ZWQgKCkge1xuICAgIHZhciBtZW51ID0gdGhpcy4kcmVmcy5tZW51XG4gICAgdmFyIGRob3ZlciA9IG5ldyBEZWxheUhvdmVyKG1lbnUsIHtcbiAgICAgIGVudGVyRGVsYXk6IHRoaXMuZW50ZXJEZWxheSxcbiAgICAgIGxlYXZlRGVsYXk6IHRoaXMubGVhdmVEZWxheSxcbiAgICB9KVxuICAgIGRob3Zlci5ob3ZlcihcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93ID0gdHJ1ZVxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93ID0gZmFsc2VcbiAgICAgIH1cbiAgICApXG5cbiAgICB2YXIgcGFyZW50ID0gdGhpcy4kZWxcbiAgICB0aGlzLnN0eWxlLnRvcCA9IHBhcmVudC5zdHlsZS5jbGllbnRIZWlnaHRcbiAgfSxcbn1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5hdi1tZW51LnZ1ZT84YmYyN2Y2MCIsIm1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG4gIHJldHVybiBfYygnZGl2Jywge1xuICAgIHJlZjogXCJtZW51XCIsXG4gICAgc3RhdGljQ2xhc3M6IFwibmF2LW1lbnVcIlxuICB9LCBbX2MoJ3NwYW4nLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwidGFyZ2V0XCJcbiAgfSwgW192bS5fdChcInRhcmdldFwiKV0sIDIpLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgIGRpcmVjdGl2ZXM6IFt7XG4gICAgICBuYW1lOiBcInNob3dcIixcbiAgICAgIHJhd05hbWU6IFwidi1zaG93XCIsXG4gICAgICB2YWx1ZTogKF92bS5zaG93KSxcbiAgICAgIGV4cHJlc3Npb246IFwic2hvd1wiXG4gICAgfV0sXG4gICAgc3RhdGljQ2xhc3M6IFwid3JhcFwiLFxuICAgIHN0eWxlOiAoX3ZtLnN0eWxlKVxuICB9LCBbX3ZtLl90KFwibGlzdFwiKV0sIDIpXSlcbn0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyLmpzP2lkPWRhdGEtdi1hMzczMzY2MCEuLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FwcC9uYXYtbWVudS52dWVcbi8vIG1vZHVsZSBpZCA9IDEwNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJhcHBcIlxuICB9LCBbX2MoJ2hlYWRlcicsIFtfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImxlZnRcIlxuICB9LCBbX2MoJ25hdi1tZW51Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcIm1lbnUtaXRlbVwiLFxuICAgIGF0dHJzOiB7XG4gICAgICBcInRpdGxlXCI6IF92bS4kdCgnYnV0dG9uLnVwbG9hZCcpXG4gICAgfVxuICB9LCBbX2MoJ2RpdicsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJzbG90XCI6IFwidGFyZ2V0XCJcbiAgICB9LFxuICAgIHNsb3Q6IFwidGFyZ2V0XCJcbiAgfSwgW19jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tdXBsb2FkXCJcbiAgfSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3VsJywge1xuICAgIGF0dHJzOiB7XG4gICAgICBcInNsb3RcIjogXCJsaXN0XCJcbiAgICB9LFxuICAgIHNsb3Q6IFwibGlzdFwiXG4gIH0sIFtfYygnbGknLCB7XG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIF92bS4kcmVmcy5tb2RhbHMuc2hvdygnbHJjLWZvcm1hdC11cGxvYWQnKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW19jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24tdXBsb2FkXCJcbiAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ21lbnUudXBsb2FkLmxyYycpKSArIFwiXFxuICAgICAgICAgIFwiKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbGknLCB7XG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIF92bS4kcmVmcy5tb2RhbHMuc2hvdygnbHlyaWMtdXBsb2FkJylcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtfYygnaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJpY29uLXVwbG9hZFwiXG4gIH0pLCBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KCdtZW51LnVwbG9hZC5seXJpYycpKSArIFwiXFxuICAgICAgICAgIFwiKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbGknLCBbX2MoJ3VwbG9hZCcsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJhY2NlcHRcIjogXCJhdWRpby8qXCIsXG4gICAgICBcInJlYWQtZm9ybWF0XCI6IFwidXJsXCJcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcInVwbG9hZFwiOiBfdm0udXBsb2FkTXVzaWNcbiAgICB9XG4gIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS4kdCgnbWVudS51cGxvYWQubXVzaWMnKSkpXSldLCAxKV0pXSksIF92bS5fdihcIiBcIiksIF9jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwibWVudS1pdGVtXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidGl0bGVcIjogX3ZtLiR0KCdidXR0b24uc2F2ZScpXG4gICAgfSxcbiAgICBvbjoge1xuICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgX3ZtLiRyZWZzLm1vZGFscy5zaG93KCdscmMtc2F2ZScpXG4gICAgICB9XG4gICAgfVxuICB9LCBbX2MoJ2knLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwiaWNvbi1zYXZlXCJcbiAgfSldKV0sIDEpLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcInJpZ2h0XCJcbiAgfSwgW19jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwibWVudS1pdGVtXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidGl0bGVcIjogX3ZtLmVkaXRpbmcgPyBfdm0uJHQoJ2J1dHRvbi5jbG9zZV9lZGl0JykgOiBfdm0uJHQoJ2J1dHRvbi5vcGVuX2VkaXQnKVxuICAgIH0sXG4gICAgb246IHtcbiAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgIF92bS5lZGl0aW5nID0gIV92bS5lZGl0aW5nXG4gICAgICB9XG4gICAgfVxuICB9LCBbKF92bS5lZGl0aW5nKSA/IFtfYygnaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJpY29uLWNhbmNlbFwiXG4gIH0pXSA6IFtfYygnaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJpY29uLWVkaXRcIlxuICB9KV1dLCAyKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJtZW51LWl0ZW1cIixcbiAgICBhdHRyczoge1xuICAgICAgXCJ0aXRsZVwiOiBfdm0uJHQoJ2J1dHRvbi5oZWxwJylcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICBfdm0uJHJlZnMubW9kYWxzLnNob3coJ2hlbHAnKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW19jKCdpJywge1xuICAgIHN0YXRpY0NsYXNzOiBcImljb24taGVscC1jaXJjbGVkXCJcbiAgfSldKV0pXSksIF92bS5fdihcIiBcIiksIF9jKCdwbGF5ZXInLCB7XG4gICAgcmVmOiBcInBsYXllclwiLFxuICAgIGF0dHJzOiB7XG4gICAgICBcInNyY1wiOiBfdm0ubXVzaWNVcmxcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcInRpbWV1cGRhdGVcIjogX3ZtLnRpbWV1cGRhdGVcbiAgICB9XG4gIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbHlyaWMtZWRpdG9yJywge1xuICAgIHJlZjogXCJseXJpY1wiLFxuICAgIHN0YXRpY0NsYXNzOiBcImx5cmljLWVkaXRvclwiLFxuICAgIGF0dHJzOiB7XG4gICAgICBcImVkaXRpbmdcIjogX3ZtLmVkaXRpbmcsXG4gICAgICBcInJ1bm5lclwiOiBfdm0ucnVubmVyLFxuICAgICAgXCJseXJpYy1hcnJheVwiOiBfdm0ubHlyaWNBcnJheSxcbiAgICAgIFwicGxheXRvXCI6IF92bS5wbGF5dG9cbiAgICB9XG4gIH0sIFtfdm0uX3YoXCJcXG4gICAgbHlyaWMgZWRpdG9yXFxuICBcIildKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2Zvb3RlcicsIFtfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImxlZnRcIlxuICB9LCBbX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJtZW51LWl0ZW1cIixcbiAgICBvbjoge1xuICAgICAgXCJjbGlja1wiOiBfdm0ucmVtb3ZlTHlyaWNcbiAgICB9XG4gIH0sIFtfYygnaScsIHtcbiAgICBzdGF0aWNDbGFzczogXCJpY29uLXRyYXNoXCJcbiAgfSksIF92bS5fdihcIiBcIiArIF92bS5fcyhfdm0uJHQoJ2J1dHRvbi5yZW1vdmVfbHlyaWMnKSkgKyBcIlxcbiAgICAgIFwiKV0pXSksIF92bS5fdihcIiBcIiksIChfdm0uZWRpdGluZykgPyBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcInJpZ2h0XCJcbiAgfSwgW19jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwibWVudS1pdGVtXCIsXG4gICAgYXR0cnM6IHtcbiAgICAgIFwidGl0bGVcIjogXCJbVVBdXCJcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICBfdm0uJHJlZnMubHlyaWMuJGVtaXQoJ3ByZXZseXJpYycpXG4gICAgICB9XG4gICAgfVxuICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ2J1dHRvbi5wcmV2X2x5cmljJykpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcIm1lbnUtaXRlbVwiLFxuICAgIGF0dHJzOiB7XG4gICAgICBcInRpdGxlXCI6IFwiW0RPV05dXCJcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICBfdm0uJHJlZnMubHlyaWMuJGVtaXQoJ25leHRseXJpYycpXG4gICAgICB9XG4gICAgfVxuICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uJHQoJ2J1dHRvbi5uZXh0X2x5cmljJykpKV0pXSkgOiBfdm0uX2UoKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbW9kYWxzJywge1xuICAgIHJlZjogXCJtb2RhbHNcIlxuICB9KV0sIDEpXG59LHN0YXRpY1JlbmRlckZuczogW119XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlci5qcz9pZD1kYXRhLXYtNWVjYWE0NGEhLi4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9hcHAvaW5kZXgudnVlXG4vLyBtb2R1bGUgaWQgPSAxMDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXG5pbXBvcnQgaTE4biBmcm9tICd2dWUtaTE4bidcbmltcG9ydCBsb2NhbGVzIGZyb20gJy4vbG9jYWxlcydcblxudmFyIGxhbmcgPSAobmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgJ2VuJykudG9Mb2NhbGVMb3dlckNhc2UoKVxuXG5pZiAoIShsYW5nIGluIGxvY2FsZXMpKSB7XG4gIGlmIChsYW5nLmluZGV4T2YoJy0nKSA+PSAwKSB7XG4gICAgbGFuZyA9IGxhbmcuc3BsaXQoJy0nKVswXVxuICB9XG59XG5cblZ1ZS51c2UoaTE4bilcblxuVnVlLmNvbmZpZy5sYW5nID0gbGFuZ1xuVnVlLmxvY2FsZShsYW5nLCBsb2NhbGVzW2xhbmddKVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaTE4bi5qcyIsIi8qIVxuICogdnVlLWkxOG4gdjUuMC4zIFxuICogKGMpIDIwMTcga2F6dXlhIGthd2FndWNoaVxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogd2FyblxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtc2dcbiAqIEBwYXJhbSB7RXJyb3J9IFtlcnJdXG4gKlxuICovXG5cbmZ1bmN0aW9uIHdhcm4gKG1zZywgZXJyKSB7XG4gIGlmICh3aW5kb3cuY29uc29sZSkge1xuICAgIGNvbnNvbGUud2FybignW3Z1ZS1pMThuXSAnICsgbXNnKTtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIEFzc2V0ID0gZnVuY3Rpb24gKFZ1ZSwgbGFuZ1ZNKSB7XG4gIC8qKlxuICAgKiBSZWdpc3RlciBvciByZXRyaWV2ZSBhIGdsb2JhbCBsb2NhbGUgZGVmaW5pdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gICAqIEBwYXJhbSB7T2JqZWN0IHwgRnVuY3Rpb24gfCBQcm9taXNlfSBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIFZ1ZS5sb2NhbGUgPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24sIGNiKSB7XG4gICAgaWYgKGRlZmluaXRpb24gPT09IHVuZGVmaW5lZCkgeyAvLyBnZXR0ZXJcbiAgICAgIHJldHVybiBsYW5nVk0ubG9jYWxlc1tpZF1cbiAgICB9IGVsc2UgeyAvLyBzZXR0ZXJcbiAgICAgIGlmIChkZWZpbml0aW9uID09PSBudWxsKSB7XG4gICAgICAgIGxhbmdWTS5sb2NhbGVzW2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGVsZXRlIGxhbmdWTS5sb2NhbGVzW2lkXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldExvY2FsZShpZCwgZGVmaW5pdGlvbiwgZnVuY3Rpb24gKGxvY2FsZSkge1xuICAgICAgICAgIGlmIChsb2NhbGUpIHtcbiAgICAgICAgICAgIGxhbmdWTS4kc2V0KGxhbmdWTS5sb2NhbGVzLCBpZCwgbG9jYWxlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2FybignZmFpbGVkIHNldCBgJyArIGlkICsgJ2AgbG9jYWxlJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNiICYmIGNiKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cblxuZnVuY3Rpb24gc2V0TG9jYWxlIChpZCwgZGVmaW5pdGlvbiwgY2IpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbml0aW9uID09PSAnb2JqZWN0JykgeyAvLyBzeW5jXG4gICAgY2IoZGVmaW5pdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGZ1dHVyZSA9IGRlZmluaXRpb24uY2FsbCh0aGlzKTtcbiAgICBpZiAodHlwZW9mIGZ1dHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGZ1dHVyZS5yZXNvbHZlZCkge1xuICAgICAgICAvLyBjYWNoZWRcbiAgICAgICAgY2IoZnV0dXJlLnJlc29sdmVkKTtcbiAgICAgIH0gZWxzZSBpZiAoZnV0dXJlLnJlcXVlc3RlZCkge1xuICAgICAgICAvLyBwb29sIGNhbGxiYWNrc1xuICAgICAgICBmdXR1cmUucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1dHVyZS5yZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgY2JzID0gZnV0dXJlLnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuICAgICAgICBmdXR1cmUoZnVuY3Rpb24gKGxvY2FsZSkgeyAvLyByZXNvbHZlXG4gICAgICAgICAgZnV0dXJlLnJlc29sdmVkID0gbG9jYWxlO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY2JzW2ldKGxvY2FsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7IC8vIHJlamVjdFxuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKGZ1dHVyZSkpIHsgLy8gcHJvbWlzZVxuICAgICAgZnV0dXJlLnRoZW4oZnVuY3Rpb24gKGxvY2FsZSkgeyAvLyByZXNvbHZlXG4gICAgICAgIGNiKGxvY2FsZSk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7IC8vIHJlamVjdFxuICAgICAgICBjYigpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIGNiKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUHJvbWlzZSAocCkge1xuICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nXG59XG5cbnZhciBPdmVycmlkZSA9IGZ1bmN0aW9uIChWdWUsIGxhbmdWTSkge1xuICAvLyBvdmVycmlkZSBfaW5pdFxuICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG4gIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgaW5pdC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgaWYgKCF0aGlzLiRwYXJlbnQpIHsgLy8gcm9vdFxuICAgICAgdGhpcy5fJGxhbmcgPSBsYW5nVk07XG4gICAgICB0aGlzLl9sYW5nVW53YXRjaCA9IHRoaXMuXyRsYW5nLiR3YXRjaCgnJGRhdGEnLCBmdW5jdGlvbiAodmFsLCBvbGQpIHtcbiAgICAgICAgdGhpcyQxLiRmb3JjZVVwZGF0ZSgpO1xuICAgICAgfSwgeyBkZWVwOiB0cnVlIH0pO1xuICAgIH1cbiAgfTtcblxuICAvLyBvdmVycmlkZSBfZGVzdHJveVxuICB2YXIgZGVzdHJveSA9IFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3k7XG4gIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLiRwYXJlbnQgJiYgdGhpcy5fbGFuZ1Vud2F0Y2gpIHtcbiAgICAgIHRoaXMuX2xhbmdVbndhdGNoKCk7XG4gICAgICB0aGlzLl9sYW5nVW53YXRjaCA9IG51bGw7XG4gICAgICB0aGlzLl8kbGFuZyA9IG51bGw7XG4gICAgfVxuXG4gICAgZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufTtcblxuLyoqXG4gKiBPYnNlcnZlclxuICovXG5cbnZhciBXYXRjaGVyO1xuLyoqXG4gKiBnZXRXYXRjaGVyXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcmV0dXJuIHtXYXRjaGVyfVxuICovXG5cbmZ1bmN0aW9uIGdldFdhdGNoZXIgKHZtKSB7XG4gIGlmICghV2F0Y2hlcikge1xuICAgIHZhciB1bndhdGNoID0gdm0uJHdhdGNoKCdfX3dhdGNoZXJfXycsIGZ1bmN0aW9uIChhKSB7fSk7XG4gICAgV2F0Y2hlciA9IHZtLl93YXRjaGVyc1swXS5jb25zdHJ1Y3RvcjtcbiAgICB1bndhdGNoKCk7XG4gIH1cbiAgcmV0dXJuIFdhdGNoZXJcbn1cblxudmFyIERlcDtcbi8qKlxuICogZ2V0RGVwXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcmV0dXJuIHtEZXB9XG4gKi9cblxuZnVuY3Rpb24gZ2V0RGVwICh2bSkge1xuICBpZiAoIURlcCAmJiB2bSAmJiB2bS5fZGF0YSAmJiB2bS5fZGF0YS5fX29iX18gJiYgdm0uX2RhdGEuX19vYl9fLmRlcCkge1xuICAgIERlcCA9IHZtLl9kYXRhLl9fb2JfXy5kZXAuY29uc3RydWN0b3I7XG4gIH1cbiAgcmV0dXJuIERlcFxufVxuXG4vKipcbiAqIHV0aWxpdGVzXG4gKi9cblxuLyoqXG4gKiBpc05pbFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIEJvb2xlYW5cbiAqL1xuZnVuY3Rpb24gaXNOaWwgKHZhbCkge1xuICByZXR1cm4gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkXG59XG5cbi8qKlxuICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAcmV0dXJuIEZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGJpbmQgKGZuLCBjdHgpIHtcbiAgZnVuY3Rpb24gYm91bmRGbiAoYSkge1xuICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICByZXR1cm4gbFxuICAgICAgPyBsID4gMVxuICAgICAgICA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKVxuICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKVxuICAgICAgOiBmbi5jYWxsKGN0eClcbiAgfVxuICAvLyByZWNvcmQgb3JpZ2luYWwgZm4gbGVuZ3RoXG4gIGJvdW5kRm4uX2xlbmd0aCA9IGZuLmxlbmd0aDtcbiAgcmV0dXJuIGJvdW5kRm5cbn1cblxuLyoqXG4gKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcbiAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcbiAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIEJvb2xlYW5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QgKG9iaikge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnXG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIEJvb2xlYW5cbiAqL1xudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0IChvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklOR1xufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEByZXR1cm4gQm9vbGVhblxuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZnVuY3Rpb24gaGFzT3duIChvYmosIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcbn1cblxudmFyIGZhbGxiYWNrOyAvLyBmYWxsYmFjayBsYW5nXG52YXIgbWlzc2luZ0hhbmRsZXIgPSBudWxsOyAvLyBtaXNzaW5nIGhhbmRsZXJcbnZhciBpMThuRm9ybWF0dGVyID0gbnVsbDsgLy8gY3VzdG9tIGZvcm1hdHRlclxuXG52YXIgQ29uZmlnID0gZnVuY3Rpb24gKFZ1ZSwgbGFuZ1ZNLCBsYW5nKSB7XG4gIHZhciBXYXRjaGVyID0gZ2V0V2F0Y2hlcihsYW5nVk0pO1xuICB2YXIgRGVwID0gZ2V0RGVwKGxhbmdWTSk7XG5cbiAgZnVuY3Rpb24gbWFrZUNvbXB1dGVkR2V0dGVyIChnZXR0ZXIsIG93bmVyKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG4gICAgICBsYXp5OiB0cnVlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIgKCkge1xuICAgICAgd2F0Y2hlci5kaXJ0eSAmJiB3YXRjaGVyLmV2YWx1YXRlKCk7XG4gICAgICBEZXAgJiYgRGVwLnRhcmdldCAmJiB3YXRjaGVyLmRlcGVuZCgpO1xuICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWVcbiAgICB9XG4gIH1cblxuICAvLyBkZWZpbmUgVnVlLmNvbmZpZy5sYW5nIGNvbmZpZ3JhdGlvblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLmNvbmZpZywgJ2xhbmcnLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gbGFuZ1ZNLmxhbmcgfSwgbGFuZ1ZNKSxcbiAgICBzZXQ6IGJpbmQoZnVuY3Rpb24gKHZhbCkgeyBsYW5nVk0ubGFuZyA9IHZhbDsgfSwgbGFuZ1ZNKVxuICB9KTtcblxuICAvLyBkZWZpbmUgVnVlLmNvbmZpZy5mYWxsYmFja0xhbmcgY29uZmlncmF0aW9uXG4gIGZhbGxiYWNrID0gbGFuZztcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5jb25maWcsICdmYWxsYmFja0xhbmcnLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxsYmFjayB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbCkgeyBmYWxsYmFjayA9IHZhbDsgfVxuICB9KTtcblxuICAvLyBkZWZpbmUgVnVlLmNvbmZpZy5taXNzaW5nSGFuZGxlciBjb25maWdyYXRpb25cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5jb25maWcsICdtaXNzaW5nSGFuZGxlcicsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1pc3NpbmdIYW5kbGVyIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7IG1pc3NpbmdIYW5kbGVyID0gdmFsOyB9XG4gIH0pO1xuXG4gIC8vIGRlZmluZSBWdWUuY29uZmlnLmkxOEZvcm1hdHRlciBjb25maWdyYXRpb25cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5jb25maWcsICdpMThuRm9ybWF0dGVyJywge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaTE4bkZvcm1hdHRlciB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbCkgeyBpMThuRm9ybWF0dGVyID0gdmFsOyB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiAgU3RyaW5nIGZvcm1hdCB0ZW1wbGF0ZVxuICogIC0gSW5zcGlyZWQ6XG4gKiAgICBodHRwczovL2dpdGh1Yi5jb20vTWF0dC1Fc2NoL3N0cmluZy10ZW1wbGF0ZS9pbmRleC5qc1xuICovXG5cbnZhciBSRV9OQVJHUyA9IC8oJXwpXFx7KFswLTlhLXpBLVpfXSspXFx9L2c7XG5cblxudmFyIEZvcm1hdCA9IGZ1bmN0aW9uIChWdWUpIHtcbiAgLyoqXG4gICAqIHRlbXBsYXRlXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAgICogQHBhcmFtIHtBcnJheX0gLi4uYXJnc1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRlbXBsYXRlIChzdHJpbmcpIHtcbiAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcbiAgICB3aGlsZSAoIGxlbi0tID4gMCApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gKyAxIF07XG5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICBhcmdzID0gYXJnc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJncyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghYXJncyB8fCAhYXJncy5oYXNPd25Qcm9wZXJ0eSkge1xuICAgICAgYXJncyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZShSRV9OQVJHUywgZnVuY3Rpb24gKG1hdGNoLCBwcmVmaXgsIGksIGluZGV4KSB7XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICBpZiAoc3RyaW5nW2luZGV4IC0gMV0gPT09ICd7JyAmJlxuICAgICAgICBzdHJpbmdbaW5kZXggKyBtYXRjaC5sZW5ndGhdID09PSAnfScpIHtcbiAgICAgICAgcmV0dXJuIGlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGhhc093bihhcmdzLCBpKSA/IGFyZ3NbaV0gOiBtYXRjaDtcbiAgICAgICAgaWYgKGlzTmlsKHJlc3VsdCkpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHRlbXBsYXRlXG59O1xuXG4vKipcbiAqICBQYXRoIHBhZXJzZXJcbiAqICAtIEluc3BpcmVkOlxuICogICAgVnVlLmpzIFBhdGggcGFyc2VyXG4gKi9cblxuLy8gY2FjaGVcbnZhciBwYXRoQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vLyBhY3Rpb25zXG52YXIgQVBQRU5EID0gMDtcbnZhciBQVVNIID0gMTtcbnZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xudmFyIFBVU0hfU1VCX1BBVEggPSAzO1xuXG4vLyBzdGF0ZXNcbnZhciBCRUZPUkVfUEFUSCA9IDA7XG52YXIgSU5fUEFUSCA9IDE7XG52YXIgQkVGT1JFX0lERU5UID0gMjtcbnZhciBJTl9JREVOVCA9IDM7XG52YXIgSU5fU1VCX1BBVEggPSA0O1xudmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XG52YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcbnZhciBBRlRFUl9QQVRIID0gNztcbnZhciBFUlJPUiA9IDg7XG5cbnZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xuICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdbJzogW0lOX1NVQl9QQVRIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcbiAgJ3dzJzogW0lOX1BBVEhdLFxuICAnLic6IFtCRUZPUkVfSURFTlRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcbiAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcbiAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuZnVuY3Rpb24gaXNMaXRlcmFsIChleHApIHtcbiAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKVxufVxuXG4vKipcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gKi9cblxuZnVuY3Rpb24gc3RyaXBRdW90ZXMgKHN0cikge1xuICB2YXIgYSA9IHN0ci5jaGFyQ29kZUF0KDApO1xuICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNylcbiAgICA/IHN0ci5zbGljZSgxLCAtMSlcbiAgICA6IHN0clxufVxuXG4vKipcbiAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG4gKlxuICogQHBhcmFtIHtDaGFyfSBjaFxuICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlIChjaCkge1xuICBpZiAoY2ggPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gJ2VvZicgfVxuXG4gIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDB4NUI6IC8vIFtcbiAgICBjYXNlIDB4NUQ6IC8vIF1cbiAgICBjYXNlIDB4MkU6IC8vIC5cbiAgICBjYXNlIDB4MjI6IC8vIFwiXG4gICAgY2FzZSAweDI3OiAvLyAnXG4gICAgY2FzZSAweDMwOiAvLyAwXG4gICAgICByZXR1cm4gY2hcblxuICAgIGNhc2UgMHg1RjogLy8gX1xuICAgIGNhc2UgMHgyNDogLy8gJFxuICAgIGNhc2UgMHgyRDogLy8gLVxuICAgICAgcmV0dXJuICdpZGVudCdcblxuICAgIGNhc2UgMHgyMDogLy8gU3BhY2VcbiAgICBjYXNlIDB4MDk6IC8vIFRhYlxuICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxuICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG4gICAgY2FzZSAweEEwOiAgLy8gTm8tYnJlYWsgc3BhY2VcbiAgICBjYXNlIDB4RkVGRjogIC8vIEJ5dGUgT3JkZXIgTWFya1xuICAgIGNhc2UgMHgyMDI4OiAgLy8gTGluZSBTZXBhcmF0b3JcbiAgICBjYXNlIDB4MjAyOTogIC8vIFBhcmFncmFwaCBTZXBhcmF0b3JcbiAgICAgIHJldHVybiAnd3MnXG4gIH1cblxuICAvLyBhLXosIEEtWlxuICBpZiAoKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EpIHx8IChjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKSkge1xuICAgIHJldHVybiAnaWRlbnQnXG4gIH1cblxuICAvLyAxLTlcbiAgaWYgKGNvZGUgPj0gMHgzMSAmJiBjb2RlIDw9IDB4MzkpIHsgcmV0dXJuICdudW1iZXInIH1cblxuICByZXR1cm4gJ2Vsc2UnXG59XG5cbi8qKlxuICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG4gKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG4gKiBkeW5hbWljIGluZGljYXRvciAoKikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRTdWJQYXRoIChwYXRoKSB7XG4gIHZhciB0cmltbWVkID0gcGF0aC50cmltKCk7XG4gIC8vIGludmFsaWQgbGVhZGluZyAwXG4gIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7IHJldHVybiBmYWxzZSB9XG5cbiAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZFxufVxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2UgKHBhdGgpIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG4gIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cbiAgdmFyIGFjdGlvbnMgPSBbXTtcblxuICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICBrZXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IG5ld0NoYXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSArPSBuZXdDaGFyO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgc3ViUGF0aERlcHRoKys7XG4gIH07XG5cbiAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuICAgICAgc3ViUGF0aERlcHRoLS07XG4gICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViUGF0aERlcHRoID0gMDtcbiAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcbiAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUgKCkge1xuICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcbiAgICBpZiAoKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIpIHx8XG4gICAgICAobW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSkge1xuICAgICAgaW5kZXgrKztcbiAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICB3aGlsZSAobW9kZSAhPSBudWxsKSB7XG4gICAgaW5kZXgrKztcbiAgICBjID0gcGF0aFtpbmRleF07XG5cbiAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG4gICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG4gICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXG4gICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG4gICAgICByZXR1cm4gLy8gcGFyc2UgZXJyb3JcbiAgICB9XG5cbiAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcbiAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZFxuICAgICAgICA/IGNcbiAgICAgICAgOiBuZXdDaGFyO1xuICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobW9kZSA9PT0gQUZURVJfUEFUSCkge1xuICAgICAga2V5cy5yYXcgPSBwYXRoO1xuICAgICAgcmV0dXJuIGtleXNcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7XG4gIHZhciBoaXQgPSBwYXRoQ2FjaGVbcGF0aF07XG4gIGlmICghaGl0KSB7XG4gICAgaGl0ID0gcGFyc2UocGF0aCk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgcGF0aENhY2hlW3BhdGhdID0gaGl0O1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGl0XG59XG5cbnZhciBQYXRoID0gZnVuY3Rpb24gKFZ1ZSkge1xuICBmdW5jdGlvbiBlbXB0eSAodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldCA9PT0gbnVsbCB8fCB0YXJnZXQgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdHJ1ZSB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA+IDApIHsgcmV0dXJuIGZhbHNlIH1cbiAgICAgIGlmICh0YXJnZXQubGVuZ3RoID09PSAwKSB7IHJldHVybiB0cnVlIH1cbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0KSkge1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWNvbnN0ICovXG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGFyZ2V0KSB7XG4gICAgICAgIGlmIChoYXNPd24odGFyZ2V0LCBrZXkpKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICB9XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIHByZWZlci1jb25zdCAqL1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIGZyb20gcGF0aCBzdHJpbmdcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgKiBAcmV0dXJuIHZhbHVlXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldFZhbHVlIChvYmosIHBhdGgpIHtcbiAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHsgcmV0dXJuIG51bGwgfVxuXG4gICAgdmFyIHBhdGhzID0gcGFyc2VQYXRoKHBhdGgpO1xuICAgIGlmIChlbXB0eShwYXRocykpIHsgcmV0dXJuIG51bGwgfVxuXG4gICAgdmFyIGxlbmd0aCA9IHBhdGhzLmxlbmd0aDtcbiAgICB2YXIgcmV0ID0gbnVsbDtcbiAgICB2YXIgbGFzdCA9IG9iajtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGxhc3RbcGF0aHNbaV1dO1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGFzdCA9IG51bGw7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBsYXN0ID0gdmFsdWU7XG4gICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0ID0gbGFzdDtcbiAgICByZXR1cm4gcmV0XG4gIH1cblxuICByZXR1cm4gZ2V0VmFsdWVcbn07XG5cbi8qKlxuICogZXh0ZW5kXG4gKlxuICogQHBhcmFtIHtWdWV9IFZ1ZVxuICogQHJldHVybiB7VnVlfVxuICovXG5cbnZhciBFeHRlbmQgPSBmdW5jdGlvbiAoVnVlKSB7XG4gIHZhciBmb3JtYXQgPSBGb3JtYXQoVnVlKTtcbiAgdmFyIGdldFZhbHVlID0gUGF0aChWdWUpO1xuXG4gIGZ1bmN0aW9uIHBhcnNlQXJncyAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgdmFyIGxhbmcgPSBWdWUuY29uZmlnLmxhbmc7XG4gICAgdmFyIGZhbGxiYWNrID0gVnVlLmNvbmZpZy5mYWxsYmFja0xhbmc7XG5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmIChpc09iamVjdChhcmdzWzBdKSB8fCBBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICAgIGFyZ3MgPSBhcmdzWzBdO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbGFuZyA9IGFyZ3NbMF07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICBsYW5nID0gYXJnc1swXTtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdChhcmdzWzFdKSB8fCBBcnJheS5pc0FycmF5KGFyZ3NbMV0pKSB7XG4gICAgICAgIGFyZ3MgPSBhcmdzWzFdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGxhbmc6IGxhbmcsIGZhbGxiYWNrOiBmYWxsYmFjaywgcGFyYW1zOiBhcmdzIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGV4aXN0IChsb2NhbGUsIGtleSkge1xuICAgIGlmICghbG9jYWxlIHx8ICFrZXkpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICByZXR1cm4gIWlzTmlsKGdldFZhbHVlKGxvY2FsZSwga2V5KSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGludGVycG9sYXRlIChsb2NhbGUsIGtleSwgYXJncykge1xuICAgIGlmICghbG9jYWxlKSB7IHJldHVybiBudWxsIH1cblxuICAgIHZhciB2YWwgPSBnZXRWYWx1ZShsb2NhbGUsIGtleSk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkgeyByZXR1cm4gdmFsIH1cbiAgICBpZiAoaXNOaWwodmFsKSkgeyB2YWwgPSBsb2NhbGVba2V5XTsgfVxuICAgIGlmIChpc05pbCh2YWwpKSB7IHJldHVybiBudWxsIH1cbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHsgd2FybihcIlZhbHVlIG9mIGtleSAnXCIgKyBrZXkgKyBcIicgaXMgbm90IGEgc3RyaW5nIVwiKTsgcmV0dXJuIG51bGwgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHRoZSBleGlzdGFuY2Ugb2YgbGlua3Mgd2l0aGluIHRoZSB0cmFuc2xhdGVkIHN0cmluZ1xuICAgIGlmICh2YWwuaW5kZXhPZignQDonKSA+PSAwKSB7XG4gICAgICAvLyBNYXRjaCBhbGwgdGhlIGxpbmtzIHdpdGhpbiB0aGUgbG9jYWxcbiAgICAgIC8vIFdlIGFyZSBnb2luZyB0byByZXBsYWNlIGVhY2ggb2ZcbiAgICAgIC8vIHRoZW0gd2l0aCBpdHMgdHJhbnNsYXRpb25cbiAgICAgIHZhciBtYXRjaGVzID0gdmFsLm1hdGNoKC8oQDpbXFx3fC5dKykvZyk7XG4gICAgICBmb3IgKHZhciBpZHggaW4gbWF0Y2hlcykge1xuICAgICAgICB2YXIgbGluayA9IG1hdGNoZXNbaWR4XTtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBsZWFkaW5nIEA6XG4gICAgICAgIHZhciBsaW5rUGxhY2Vob2xkZXIgPSBsaW5rLnN1YnN0cigyKTtcbiAgICAgICAgLy8gVHJhbnNsYXRlIHRoZSBsaW5rXG4gICAgICAgIHZhciB0cmFuc2xhdGVkc3RyaW5nID0gaW50ZXJwb2xhdGUobG9jYWxlLCBsaW5rUGxhY2Vob2xkZXIsIGFyZ3MpO1xuICAgICAgICAvLyBSZXBsYWNlIHRoZSBsaW5rIHdpdGggdGhlIHRyYW5zbGF0ZWQgc3RyaW5nXG4gICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKGxpbmssIHRyYW5zbGF0ZWRzdHJpbmcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAhYXJnc1xuICAgICAgPyB2YWxcbiAgICAgIDogVnVlLmNvbmZpZy5pMThuRm9ybWF0dGVyXG4gICAgICAgID8gVnVlLmNvbmZpZy5pMThuRm9ybWF0dGVyLmFwcGx5KG51bGwsIFt2YWxdLmNvbmNhdChhcmdzKSlcbiAgICAgICAgOiBmb3JtYXQodmFsLCBhcmdzKVxuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlIChnZXR0ZXIsIGxhbmcsIGZhbGxiYWNrLCBrZXksIHBhcmFtcykge1xuICAgIHZhciByZXMgPSBudWxsO1xuICAgIHJlcyA9IGludGVycG9sYXRlKGdldHRlcihsYW5nKSwga2V5LCBwYXJhbXMpO1xuICAgIGlmICghaXNOaWwocmVzKSkgeyByZXR1cm4gcmVzIH1cblxuICAgIHJlcyA9IGludGVycG9sYXRlKGdldHRlcihmYWxsYmFjayksIGtleSwgcGFyYW1zKTtcbiAgICBpZiAoIWlzTmlsKHJlcykpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ0ZhbGwgYmFjayB0byB0cmFuc2xhdGUgdGhlIGtleXBhdGggXCInICsga2V5ICsgJ1wiIHdpdGggXCInICtcbiAgICAgICAgICBmYWxsYmFjayArICdcIiBsYW5ndWFnZS4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuXG4gIGZ1bmN0aW9uIHdhcm5EZWZhdWx0IChsYW5nLCBrZXksIHZtLCByZXN1bHQpIHtcbiAgICBpZiAoIWlzTmlsKHJlc3VsdCkpIHsgcmV0dXJuIHJlc3VsdCB9XG4gICAgaWYgKFZ1ZS5jb25maWcubWlzc2luZ0hhbmRsZXIpIHtcbiAgICAgIFZ1ZS5jb25maWcubWlzc2luZ0hhbmRsZXIuYXBwbHkobnVsbCwgW2xhbmcsIGtleSwgdm1dKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybignQ2Fubm90IHRyYW5zbGF0ZSB0aGUgdmFsdWUgb2Yga2V5cGF0aCBcIicgKyBrZXkgKyAnXCIuICcgK1xuICAgICAgICAgICdVc2UgdGhlIHZhbHVlIG9mIGtleXBhdGggYXMgZGVmYXVsdCcpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBc3NldExvY2FsZSAobGFuZykge1xuICAgIHJldHVybiBWdWUubG9jYWxlKGxhbmcpXG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb21wb25lbnRMb2NhbGUgKGxhbmcpIHtcbiAgICByZXR1cm4gdGhpcy4kb3B0aW9ucy5sb2NhbGVzW2xhbmddXG4gIH1cblxuICBmdW5jdGlvbiBnZXRPbGRDaG9pY2VJbmRleEZpeGVkIChjaG9pY2UpIHtcbiAgICByZXR1cm4gY2hvaWNlID8gY2hvaWNlID4gMSA/IDEgOiAwIDogMVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2hvaWNlSW5kZXggKGNob2ljZSwgY2hvaWNlc0xlbmd0aCkge1xuICAgIGNob2ljZSA9IE1hdGguYWJzKGNob2ljZSk7XG5cbiAgICBpZiAoY2hvaWNlc0xlbmd0aCA9PT0gMikgeyByZXR1cm4gZ2V0T2xkQ2hvaWNlSW5kZXhGaXhlZChjaG9pY2UpIH1cblxuICAgIHJldHVybiBjaG9pY2UgPyBNYXRoLm1pbihjaG9pY2UsIDIpIDogMFxuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hDaG9pY2UgKGxvY2FsZSwgY2hvaWNlKSB7XG4gICAgaWYgKCFsb2NhbGUgJiYgdHlwZW9mIGxvY2FsZSAhPT0gJ3N0cmluZycpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBjaG9pY2VzID0gbG9jYWxlLnNwbGl0KCd8Jyk7XG5cbiAgICBjaG9pY2UgPSBnZXRDaG9pY2VJbmRleChjaG9pY2UsIGNob2ljZXMubGVuZ3RoKTtcbiAgICBpZiAoIWNob2ljZXNbY2hvaWNlXSkgeyByZXR1cm4gbG9jYWxlIH1cbiAgICByZXR1cm4gY2hvaWNlc1tjaG9pY2VdLnRyaW0oKVxuICB9XG5cbiAgLyoqXG4gICAqIFZ1ZS50XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtBcnJheX0gLi4uYXJnc1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIFZ1ZS50ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxO1xuICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDEgXTtcblxuICAgIGlmICgha2V5KSB7IHJldHVybiAnJyB9XG4gICAgdmFyIHJlZiA9IHBhcnNlQXJncy5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgIHZhciBsYW5nID0gcmVmLmxhbmc7XG4gICAgdmFyIGZhbGxiYWNrID0gcmVmLmZhbGxiYWNrO1xuICAgIHZhciBwYXJhbXMgPSByZWYucGFyYW1zO1xuICAgIHJldHVybiB3YXJuRGVmYXVsdChsYW5nLCBrZXksIG51bGwsIHRyYW5zbGF0ZShnZXRBc3NldExvY2FsZSwgbGFuZywgZmFsbGJhY2ssIGtleSwgcGFyYW1zKSlcbiAgfTtcblxuICAvKipcbiAgICogVnVlLnRjXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSBjaG9pY2VcbiAgICogQHBhcmFtIHtBcnJheX0gLi4uYXJnc1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIFZ1ZS50YyA9IGZ1bmN0aW9uIChrZXksIGNob2ljZSkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAyO1xuICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDIgXTtcblxuICAgIHJldHVybiBmZXRjaENob2ljZShWdWUudC5hcHBseShWdWUsIFsga2V5IF0uY29uY2F0KCBhcmdzICkpLCBjaG9pY2UpXG4gIH07XG5cbiAgLyoqXG4gICAqIFZ1ZS50ZVxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3NcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgVnVlLnRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxO1xuICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDEgXTtcblxuICAgIHZhciByZWYgPSBwYXJzZUFyZ3MuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICB2YXIgbGFuZyA9IHJlZi5sYW5nO1xuICAgIHJldHVybiBleGlzdChnZXRBc3NldExvY2FsZShsYW5nKSwga2V5KVxuICB9O1xuXG4gIC8qKlxuICAgKiAkdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3NcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiR0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxO1xuICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDEgXTtcblxuICAgIGlmICgha2V5KSB7IHJldHVybiAnJyB9XG4gICAgdmFyIHJlZiA9IHBhcnNlQXJncy5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgIHZhciBsYW5nID0gcmVmLmxhbmc7XG4gICAgdmFyIGZhbGxiYWNrID0gcmVmLmZhbGxiYWNrO1xuICAgIHZhciBwYXJhbXMgPSByZWYucGFyYW1zO1xuICAgIHZhciByZXMgPSBudWxsO1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmxvY2FsZXMpIHtcbiAgICAgIHJlcyA9IHRyYW5zbGF0ZShcbiAgICAgICAgYmluZChnZXRDb21wb25lbnRMb2NhbGUsIHRoaXMpLCBsYW5nLCBmYWxsYmFjaywga2V5LCBwYXJhbXNcbiAgICAgICk7XG4gICAgICBpZiAocmVzKSB7IHJldHVybiByZXMgfVxuICAgIH1cbiAgICByZXR1cm4gd2FybkRlZmF1bHQobGFuZywga2V5LCB0aGlzLCB0cmFuc2xhdGUoZ2V0QXNzZXRMb2NhbGUsIGxhbmcsIGZhbGxiYWNrLCBrZXksIHBhcmFtcykpXG4gIH07XG5cbiAgLyoqXG4gICAqICR0Y1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gY2hvaWNlXG4gICAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3NcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiR0YyA9IGZ1bmN0aW9uIChrZXksIGNob2ljZSkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAyO1xuICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDIgXTtcblxuICAgIGlmICh0eXBlb2YgY2hvaWNlICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgY2hvaWNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIGtleVxuICAgIH1cbiAgICByZXR1cm4gZmV0Y2hDaG9pY2UoKHJlZiA9IHRoaXMpLiR0LmFwcGx5KHJlZiwgWyBrZXkgXS5jb25jYXQoIGFyZ3MgKSksIGNob2ljZSlcbiAgICB2YXIgcmVmO1xuICB9O1xuXG4gIC8qKlxuICAgKiAkdGVcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge0FycmF5fSAuLi5hcmdzXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxO1xuICAgIHdoaWxlICggbGVuLS0gPiAwICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiArIDEgXTtcblxuICAgIHZhciByZWYgPSBwYXJzZUFyZ3MuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICB2YXIgbGFuZyA9IHJlZi5sYW5nO1xuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmxvY2FsZXMpIHsgLy8gZXhpc3QgY29tcG9uZW50IGxvY2FsZVxuICAgICAgZm91bmQgPSBleGlzdChiaW5kKGdldENvbXBvbmVudExvY2FsZSkobGFuZyksIGtleSk7XG4gICAgfVxuICAgIGlmICghZm91bmQpIHtcbiAgICAgIGZvdW5kID0gZXhpc3QoZ2V0QXNzZXRMb2NhbGUobGFuZyksIGtleSk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZFxuICB9O1xuXG4gIFZ1ZS5taXhpbih7XG4gICAgY29tcHV0ZWQ6IHtcbiAgICAgICRsYW5nOiBmdW5jdGlvbiAkbGFuZyAoKSB7XG4gICAgICAgIHJldHVybiBWdWUuY29uZmlnLmxhbmdcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBWdWVcbn07XG5cbnZhciBsYW5nVk07IC8vIHNpbmdsZXRvblxuXG5cbi8qKlxuICogcGx1Z2luXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFZ1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAqL1xuXG5mdW5jdGlvbiBwbHVnaW4gKFZ1ZSwgb3B0cykge1xuICBpZiAoIG9wdHMgPT09IHZvaWQgMCApIG9wdHMgPSB7fTtcblxuICB2YXIgdmVyc2lvbiA9IChWdWUudmVyc2lvbiAmJiBOdW1iZXIoVnVlLnZlcnNpb24uc3BsaXQoJy4nKVswXSkpIHx8IC0xO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHBsdWdpbi5pbnN0YWxsZWQpIHtcbiAgICB3YXJuKCdhbHJlYWR5IGluc3RhbGxlZC4nKTtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHZlcnNpb24gPCAyKSB7XG4gICAgd2FybigoXCJ2dWUtaTE4biAoXCIgKyAocGx1Z2luLnZlcnNpb24pICsgXCIpIG5lZWQgdG8gdXNlIFZ1ZSAyLjAgb3IgbGF0ZXIgKFZ1ZTogXCIgKyAoVnVlLnZlcnNpb24pICsgXCIpLlwiKSk7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgbGFuZyA9ICdlbic7XG4gIHNldHVwTGFuZ1ZNKFZ1ZSwgbGFuZyk7XG5cbiAgQXNzZXQoVnVlLCBsYW5nVk0pO1xuICBPdmVycmlkZShWdWUsIGxhbmdWTSk7XG4gIENvbmZpZyhWdWUsIGxhbmdWTSwgbGFuZyk7XG4gIEV4dGVuZChWdWUpO1xufVxuXG5mdW5jdGlvbiBzZXR1cExhbmdWTSAoVnVlLCBsYW5nKSB7XG4gIHZhciBzaWxlbnQgPSBWdWUuY29uZmlnLnNpbGVudDtcbiAgVnVlLmNvbmZpZy5zaWxlbnQgPSB0cnVlO1xuICBpZiAoIWxhbmdWTSkge1xuICAgIGxhbmdWTSA9IG5ldyBWdWUoeyBkYXRhOiB7IGxhbmc6IGxhbmcsIGxvY2FsZXM6IHt9IH0gfSk7XG4gIH1cbiAgVnVlLmNvbmZpZy5zaWxlbnQgPSBzaWxlbnQ7XG59XG5cbnBsdWdpbi52ZXJzaW9uID0gJ19fVkVSU0lPTl9fJztcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcbiAgd2luZG93LlZ1ZS51c2UocGx1Z2luKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwbHVnaW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3Z1ZS1pMThuL2Rpc3QvdnVlLWkxOG4uY29tbW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGxvY2FsZXMgPSB7fVxuXG47W1xuICAnZW4nLFxuICAnemgnLFxuXS5mb3JFYWNoKChrZXkpID0+IHtcbiAgbG9jYWxlc1trZXldID0gcmVxdWlyZSgnLi8nICsga2V5KVxufSlcblxuZXhwb3J0IGRlZmF1bHQgbG9jYWxlc1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbG9jYWxlcy9pbmRleC5qcyIsInZhciBtYXAgPSB7XG5cdFwiLi9lblwiOiAxMTEsXG5cdFwiLi9lbi55bWxcIjogMTExLFxuXHRcIi4vaW5kZXhcIjogMTA5LFxuXHRcIi4vaW5kZXguanNcIjogMTA5LFxuXHRcIi4vemhcIjogMTEyLFxuXHRcIi4vemgueW1sXCI6IDExMlxufTtcbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyh3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSk7XG59O1xuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRyZXR1cm4gbWFwW3JlcV0gfHwgKGZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInLlwiKSB9KCkpO1xufTtcbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSAxMTA7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2xvY2FsZXMgXlxcLlxcLy4qJFxuLy8gbW9kdWxlIGlkID0gMTEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0ge1wiYnV0dG9uXCI6e1widXBsb2FkXCI6XCJ1cGxvYWRcIixcInNhdmVcIjpcInNhdmVcIixcImNsb3NlX2VkaXRcIjpcImNsb3NlIGVkaXRcIixcIm9wZW5fZWRpdFwiOlwib3BlbiBlZGl0XCIsXCJoZWxwXCI6XCJoZWxwXCIsXCJscmNfaW5mb1wiOlwiaW5mb1wiLFwicmVtb3ZlX2x5cmljXCI6XCJyZW1vdmUgbHlyaWNcIixcInByZXZfbHlyaWNcIjpcInByZXYgbHlyaWNcIixcIm5leHRfbHlyaWNcIjpcIm5leHQgbHlyaWNcIn0sXCJtZW51XCI6e1widXBsb2FkXCI6e1wibHJjXCI6XCJMUkMgZm9ybWF0IGx5cmljXCIsXCJseXJpY1wiOlwibHlyaWMgdGV4dFwiLFwibXVzaWNcIjpcIm11c2ljXCJ9fSxcIm1vZGFsXCI6e1wibHJjX2Zvcm1hdF9zYXZlXCI6e1widGl0bGVcIjpcIkx5cmljcyBTYXZlXCIsXCJpbmZvX3RpdGxlXCI6XCJMeXJpY3MgSW5mb1wiLFwiZmllbGRzXCI6e1wic29uZ190aXRsZVwiOlwiU29uZSBUaXRsZVwiLFwiYXJ0aXN0XCI6XCJBcnRpc3RcIixcImFsYnVtXCI6XCJBbGJ1bVwiLFwic29uZ3RleHRfY3JlYXRvclwiOlwiU29uZ3RleHQgQ3JlYXRvclwiLFwibHJjX2NyZWF0b3JcIjpcIkxSQyBDcmVhdG9yXCJ9LFwic2F2ZV90aXRsZVwiOlwiTHlyaWNzXCIsXCJjb21iaW5lXCI6XCJjb21iaW5lIGx5cmljc1wiLFwiZG93bmxvYWRcIjpcImx5cmljcyBmaWxlIGRvd25sb2FkXCJ9LFwibHJjX2Zvcm1hdF91cGxvYWRcIjp7XCJ0aXRsZVwiOlwiVXBsb2FkIExSQyBGb3JtYXRcIixcImRlc2NyaXB0aW9uXCI6XCJVcGxvYWQgdGltZXN0YW1wZWQgbHlyaWNzXCIsXCJ1cGxvYWRcIjpcIlJlYWQgZnJvbSBmaWxlXCJ9LFwibHlyaWNfdXBsb2FkXCI6e1widGl0bGVcIjpcIlVwbG9hZCBUZXh0IEx5cmljc1wiLFwiZGVzY3JpcHRpb25cIjpcIlBsYWluIFRleHQgbHlyaWNzLCBseXJpY3MgZGl2aWRlZCBieSBhIG5ld2xpbmVcIixcInVwbG9hZFwiOlwiUmVhZCBmcm9tIGZpbGVcIn0sXCJoZWxwXCI6e1widGl0bGVcIjpcIkhlbHBcIixcInNob3J0Y3V0X2tleVwiOlwic2hvcnRjdXQga2V5XCIsXCJwbGF5X2NvbnRyb2xcIjp7XCJ0aXRsZVwiOlwicGxheSBjb250cm9sXCIsXCJsZWZ0X2tleVwiOlwiPExlZnQ+XCIsXCJyaWdodF9rZXlcIjpcIjxSaWdodD5cIixcImJhY2t3YXJkXCI6XCJiYWNrd2FyZFwiLFwiZm9yd2FyZFwiOlwiZm9yd2FyZFwifSxcIm1ha2VfbHJjXCI6e1widGl0bGVcIjpcIm1ha2UgbHJjXCIsXCJ1cF9rZXlcIjpcIjxVcD5cIixcImRvd25fa2V5XCI6XCI8RG93bj5cIixcInByZXZfbHlyaWNcIjpcInByZXYgbHlyaWNcIixcIm5leHRfbHlyaWNcIjpcIm5leHQgbHlyaWNcIn0sXCJzb3VyY2VfY29kZVwiOlwic291cmNlIGNvZGVcIn0sXCJidXR0b25cIjp7XCJva1wiOlwib2tcIixcImNhbmNlbFwiOlwiY2FuY2VsXCJ9fSxcImx5cmljX2VkaXRvclwiOntcImVkaXRcIjpcImVkaXRcIixcImFkZFwiOlwiYWRkXCIsXCJyZW1vdmVcIjpcInJlbW92ZVwiLFwicmVtb3ZlX3RpbWVzdGFtcFwiOlwicmVtb3ZlIHRpbWVzdGFtcFwiLFwicGxheV90b190aGlzX2x5cmljXCI6XCJwbGF5IHRvIHRoaXMgbHlyaWNcIixcImZvbGxvd2luZ191bnNvcnRlZFwiOlwiVGhlIGZvbGxvd2luZyB1bnNvcnRlZFwifX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2xvY2FsZXMvZW4ueW1sXG4vLyBtb2R1bGUgaWQgPSAxMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSB7XCJidXR0b25cIjp7XCJ1cGxvYWRcIjpcIuS4iuS8oFwiLFwic2F2ZVwiOlwi5L+d5a2YXCIsXCJjbG9zZV9lZGl0XCI6XCLlhbPpl63nvJbovpFcIixcIm9wZW5fZWRpdFwiOlwi5omT5byA57yW6L6RXCIsXCJoZWxwXCI6XCLluK7liqlcIixcImxyY19pbmZvXCI6XCLkv6Hmga9cIixcInJlbW92ZV9seXJpY1wiOlwi5riF6Zmk5q2M6K+NXCIsXCJwcmV2X2x5cmljXCI6XCLkuIrkuIDmnaHmrYzor41cIixcIm5leHRfbHlyaWNcIjpcIuS4i+S4gOadoeatjOivjVwifSxcIm1lbnVcIjp7XCJ1cGxvYWRcIjp7XCJscmNcIjpcIkxSQ+agvOW8j+atjOivjVwiLFwibHlyaWNcIjpcIuatjOivjeaWh+acrFwiLFwibXVzaWNcIjpcIumfs+S5kFwifX0sXCJtb2RhbFwiOntcImxyY19mb3JtYXRfc2F2ZVwiOntcInRpdGxlXCI6XCLkv53lrZjmrYzor41cIixcImluZm9fdGl0bGVcIjpcIuatjOivjeS/oeaBr1wiLFwiZmllbGRzXCI6e1wic29uZ190aXRsZVwiOlwi5q2M5ZCNXCIsXCJhcnRpc3RcIjpcIuiJuuacr+WutlwiLFwiYWxidW1cIjpcIuS4k+i+kVwiLFwic29uZ3RleHRfY3JlYXRvclwiOlwi5q2M6K+N5L2c6ICFXCIsXCJscmNfY3JlYXRvclwiOlwiTFJDIOWIm+W7uuiAhVwifSxcInNhdmVfdGl0bGVcIjpcIuatjOivjVwiLFwiY29tYmluZVwiOlwi5ZCI5bm25q2M6K+NXCIsXCJkb3dubG9hZFwiOlwi5LiL6L295q2M6K+N5paH5Lu2XCJ9LFwibHJjX2Zvcm1hdF91cGxvYWRcIjp7XCJ0aXRsZVwiOlwi5LiK5LygTFJD5qC85byP5paH5pysXCIsXCJkZXNjcmlwdGlvblwiOlwi5LiK5Lyg5bey57uP5YyF5ZCr5pe26Ze05oiz55qE5q2M6K+NXCIsXCJ1cGxvYWRcIjpcIuS7juaWh+S7tuivu+WPllwifSxcImx5cmljX3VwbG9hZFwiOntcInRpdGxlXCI6XCLkuIrkvKDmrYzor43mlofmnKxcIixcImRlc2NyaXB0aW9uXCI6XCLnuq/mlofmnKzmrYzor43vvIznlKjmjaLooYzlr7nmrYzor43liJLliIZcIixcInVwbG9hZFwiOlwi5LuO5paH5Lu26K+75Y+WXCJ9LFwiaGVscFwiOntcInRpdGxlXCI6XCLluK7liqlcIixcInNob3J0Y3V0X2tleVwiOlwi5b+r5o236ZSuXCIsXCJwbGF5X2NvbnRyb2xcIjp7XCJ0aXRsZVwiOlwi5pKt5pS+5o6n5Yi2XCIsXCJsZWZ0X2tleVwiOlwiPExlZnQ+XCIsXCJyaWdodF9rZXlcIjpcIjxSaWdodD5cIixcImJhY2t3YXJkXCI6XCLlkI7pgIBcIixcImZvcndhcmRcIjpcIuWJjei/m1wifSxcIm1ha2VfbHJjXCI6e1widGl0bGVcIjpcIuWItuS9nOatjOivjVwiLFwidXBfa2V5XCI6XCI8VXA+XCIsXCJkb3duX2tleVwiOlwiPERvd24+XCIsXCJwcmV2X2x5cmljXCI6XCLkuIrkuIDmnaHmrYzor41cIixcIm5leHRfbHlyaWNcIjpcIuS4i+S4gOadoeatjOivjVwifSxcInNvdXJjZV9jb2RlXCI6XCLmupDnoIFcIn0sXCJidXR0b25cIjp7XCJva1wiOlwi56Gu6K6kXCIsXCJjYW5jZWxcIjpcIuWPlua2iFwifX0sXCJseXJpY19lZGl0b3JcIjp7XCJlZGl0XCI6XCLnvJbovpFcIixcImFkZFwiOlwi5re75YqgXCIsXCJyZW1vdmVcIjpcIuWIoOmZpFwiLFwicmVtb3ZlX3RpbWVzdGFtcFwiOlwi5Yig6Zmk5pe26Ze06L20XCIsXCJwbGF5X3RvX3RoaXNfbHlyaWNcIjpcIuaSreaUvuWIsOi/meadoeatjOivjVwiLFwiZm9sbG93aW5nX3Vuc29ydGVkXCI6XCLku6XkuIvmnKrmjpLluo9cIn19XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9sb2NhbGVzL3poLnltbFxuLy8gbW9kdWxlIGlkID0gMTEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=